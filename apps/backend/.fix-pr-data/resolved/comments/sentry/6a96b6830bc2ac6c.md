# Comment: 6a96b6830bc2ac6c

**Source:** sentry
**Type:** comment
**File:** `apps/backend/agents/linear_validator.py`
**Line:** 611
**Original ID:** 2737997927
**Created:** None
**Severity:** HIGH
**Status:** RESOLVED

---

## Original Content

**Bug:** The `async` method `validate_ticket` makes a blocking synchronous HTTP call to `_fetch_linear_issue` without `await asyncio.to_thread`, which will block the event loop.
<sub>Severity: HIGH</sub>
<!-- BUG_PREDICTION -->

<details>
<summary><b title="Reference ID: `9349249`">Suggested Fix</b></summary>

Wrap the call to `self._fetch_linear_issue(issue_id)` at line 608 within `await asyncio.to_thread()` to run the blocking I/O in a separate thread, preventing it from blocking the main event loop. For example: `issue_data = await asyncio.to_thread(self._fetch_linear_issue, issue_id)`.
</details>

<details open>
<summary><b title="Reference ID: `9349249`">Prompt for AI Agent</b></summary>

```
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/backend/agents/linear_validator.py#L577-L611

Potential issue: The `async` method `validate_ticket` calls the synchronous function
`_fetch_linear_issue` which contains a blocking `requests.post()` call. This call is
made directly without being wrapped in `asyncio.to_thread()`. The batch validation
runner explicitly passes `issue_data=None`, which triggers this code path. This will
block the asyncio event loop for the duration of the HTTP request (up to 10 seconds),
negating the concurrency of the batch validation system and causing sequential execution
instead of parallel, leading to significant performance degradation.
```
</details>

<!--
<sub>Reference ID: `9349249`</sub>-->

---

## Suggested Fix

```python
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/backend/agents/linear_validator.py#L577-L611

Potential issue: The `async` method `validate_ticket` calls the synchronous function
`_fetch_linear_issue` which contains a blocking `requests.post()` call. This call is
made directly without being wrapped in `asyncio.to_thread()`. The batch validation
runner explicitly passes `issue_data=None`, which triggers this code path. This will
block the asyncio event loop for the duration of the HTTP request (up to 10 seconds),
negating the concurrency of the batch validation system and causing sequential execution
instead of parallel, leading to significant performance degradation.
```

---

## Implementation Notes

*Status: RESOLVED*

**Resolution:** Fixed in commit 99523a7d: Wrapped _fetch_linear_issue call in asyncio.to_thread()

### Fix Commit

`99523a7d`