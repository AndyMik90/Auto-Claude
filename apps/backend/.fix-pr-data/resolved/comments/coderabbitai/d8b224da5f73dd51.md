# Comment: d8b224da5f73dd51

**Source:** coderabbitai
**Type:** comment
**File:** `apps/frontend/src/renderer/stores/linear-store.ts`
**Original ID:** 2713898555
**Created:** None
**Severity:** CRITICAL
**Status:** SKIPPED

---

## Original Content

_‚ö†Ô∏è Potential issue_ | _üî¥ Critical_

**`selectedProjectId` is not defined in the store state.**

The code accesses `store.selectedProjectId` but this property is not declared in the `LinearState` interface (lines 10-54). This will result in `undefined` and the validation will always fail with "No project selected".

<details>
<summary>Proposed fix - add the missing state property</summary>

```diff
 interface LinearState {
   // State
   tickets: LinearTicket[];
   filters: LinearFilters;
   validationResults: Map<string, ValidationResult>;
   selectedTicketId: string | null;
+  selectedProjectId: string | null;
   teams: LinearTeam[];
   projects: LinearProject[];
   isLoading: boolean;
   error: string | null;
   
   // ... actions ...
+  
+  // Project selection action
+  selectProject: (projectId: string | null) => void;
 }
```

And in the store initialization:

```diff
 export const useLinearStore = create<LinearState>((set, get) => ({
   // Initial state
   tickets: [],
   filters: {},
   validationResults: new Map(),
   selectedTicketId: null,
+  selectedProjectId: null,
   teams: [],
   projects: [],
   isLoading: false,
   error: null,
   
   // ... other actions ...
+  
+  selectProject: (projectId) => set({ selectedProjectId: projectId }),
 }));
```
</details>

<!-- suggestion_start -->

<details>
<summary>üìù Committable suggestion</summary>

> ‚ÄºÔ∏è **IMPORTANT**
> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.

```suggestion
interface LinearState {
  // State
  tickets: LinearTicket[];
  filters: LinearFilters;
  validationResults: Map<string, ValidationResult>;
  selectedTicketId: string | null;
  selectedProjectId: string | null;
  teams: LinearTeam[];
  projects: LinearProject[];
  isLoading: boolean;
  error: string | null;
  
  // ... actions ...
  
  // Project selection action
  selectProject: (projectId: string | null) => void;
}
```

```suggestion
export const useLinearStore = create<LinearState>((set, get) => ({
  // Initial state
  tickets: [],
  filters: {},
  validationResults: new Map(),
  selectedTicketId: null,
  selectedProjectId: null,
  teams: [],
  projects: [],
  isLoading: false,
  error: null,
  
  // ... other actions ...
  
  selectProject: (projectId) => set({ selectedProjectId: projectId }),
}));
```

</details>

<!-- suggestion_end -->

<details>
<summary>ü§ñ Prompt for AI Agents</summary>

```
In `@apps/frontend/src/renderer/stores/linear-store.ts` around lines 363 - 373,
The store is accessing store.selectedProjectId but LinearState doesn't declare
it, causing undefined; add a selectedProjectId?: string | null (or string)
property to the LinearState interface and initialize it in the store's initial
state (e.g., in the createLinearStore / initialState object) to a sensible
default (null or empty string) so the code that reads projectId (used in the
validation block) behaves correctly; update any related setters/getters (e.g.,
setSelectedProjectId) to maintain the new state field.
```

</details>

<!-- fingerprinting:phantom:medusa:ocelot -->

<!-- This is an auto-generated comment by CodeRabbit -->

---

## Suggested Fix

```typescript
And in the store initialization:
```

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** selectedProjectId IS defined in LinearState interface on line 17. This was already fixed.