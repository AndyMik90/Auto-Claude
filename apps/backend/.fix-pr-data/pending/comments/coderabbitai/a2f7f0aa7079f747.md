# Comment: a2f7f0aa7079f747

**Source:** coderabbitai
**Type:** comment
**File:** `apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx`
**Line:** 215
**Original ID:** 2736656974
**Created:** None
**Severity:** MEDIUM
**Status:** PENDING

---

## Original Content

_‚ö†Ô∏è Potential issue_ | _üü° Minor_

<details>
<summary>üß© Analysis chain</summary>

üèÅ Script executed:

```shell
# First, let's locate and examine the LinearTicketDetail.tsx file
fd "LinearTicketDetail.tsx" --type f
```

Repository: AndyMik90/Auto-Claude

Length of output: 143

---

üèÅ Script executed:

```shell
# Look for the formatDate function in the file
rg -A 20 "function formatDate|const formatDate" apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx
```

Repository: AndyMik90/Auto-Claude

Length of output: 778

---

üèÅ Script executed:

```shell
# Check the context around lines 210-215 and 387-405
sed -n '200,220p' apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx
```

Repository: AndyMik90/Auto-Claude

Length of output: 559

---

üèÅ Script executed:

```shell
# Check the context around lines 387-405
sed -n '380,415p' apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx
```

Repository: AndyMik90/Auto-Claude

Length of output: 842

---

üèÅ Script executed:

```shell
# Check if formatDate is used elsewhere in the component
rg "formatDate" apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx
```

Repository: AndyMik90/Auto-Claude

Length of output: 150

---

üèÅ Script executed:

```shell
# Check git status and recent changes for this file
cd apps/frontend/src/renderer/components/linear/components && git log --oneline -n 20 LinearTicketDetail.tsx 2>/dev/null || echo "Git history not available or file is new"
```

Repository: AndyMik90/Auto-Claude

Length of output: 142

---

üèÅ Script executed:

```shell
# Try to see if the function exists in the base/main branch
git diff HEAD apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx 2>/dev/null | head -100 || echo "Cannot retrieve git diff"
```

Repository: AndyMik90/Auto-Claude

Length of output: 47

---

üèÅ Script executed:

```shell
# Check if this is a new file
git status apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx 2>/dev/null || echo "Git status check failed"
```

Repository: AndyMik90/Auto-Claude

Length of output: 130

---

üèÅ Script executed:

```shell
# Check the full file structure to understand the component better
wc -l apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx
```

Repository: AndyMik90/Auto-Claude

Length of output: 147

---

üèÅ Script executed:

```shell
# Find i18n translation files
fd "en\.json|fr\.json" apps/frontend --type f | head -20
```

Repository: AndyMik90/Auto-Claude

Length of output: 47

---

üèÅ Script executed:

```shell
# Look for linear namespace translations
fd "\.json" apps/frontend --type f -exec grep -l "linear" {} \;
```

Repository: AndyMik90/Auto-Claude

Length of output: 265

---

üèÅ Script executed:

```shell
# Check the structure of translation files
find apps/frontend -path "*/locales/*" -o -path "*/translations/*" -o -path "*/i18n/*" | grep -E "\.(json|ts|tsx)$" | head -10
```

Repository: AndyMik90/Auto-Claude

Length of output: 595

---

üèÅ Script executed:

```shell
# Look at the head of the translation directory
ls -la apps/frontend/src/renderer/locales/ 2>/dev/null || ls -la apps/frontend/locales/ 2>/dev/null || find apps/frontend -type d -name "locales" -o -name "translations" | head -5
```

Repository: AndyMik90/Auto-Claude

Length of output: 102

---

üèÅ Script executed:

```shell
# Check the contents of linear.json for English
cat apps/frontend/src/shared/i18n/locales/en/linear.json
```

Repository: AndyMik90/Auto-Claude

Length of output: 5933

---

üèÅ Script executed:

```shell
# Check the French translation file
cat apps/frontend/src/shared/i18n/locales/fr/linear.json
```

Repository: AndyMik90/Auto-Claude

Length of output: 6364

---

üèÅ Script executed:

```shell
# Check the component's useTranslation usage
rg "useTranslation|i18n" apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx -B 2 -A 2
```

Repository: AndyMik90/Auto-Claude

Length of output: 489

---



</details>

**Hardcode English time strings in `formatDate` must be localized.**

The function returns hardcoded strings ("yesterday", "m ago", "h ago", etc.) that violate the i18n requirement. Pass `t` into `formatDate` and use translation keys with interpolation for plural counts. Add the new keys to both `en/linear.json` and `fr/linear.json`.

<details>
<summary>Suggested fix</summary>

```diff
-					{formatDate(ticket.createdAt)}
+					{formatDate(ticket.createdAt, t)}
```

```diff
-function formatDate(dateString: string): string {
+function formatDate(
+	dateString: string,
+	t: (key: string, options?: Record<string, unknown>) => string,
+): string {
@@
-			return `${diffMins}m ago`;
+			return t("linear:minutesAgo", { count: diffMins });
@@
-		return `${diffHours}h ago`;
+		return t("linear:hoursAgo", { count: diffHours });
@@
-	if (diffDays === 1) return "yesterday";
-	if (diffDays < 7) return `${diffDays}d ago`;
-	if (diffDays < 30) return `${Math.floor(diffDays / 7)}w ago`;
-	if (diffDays < 365) return `${Math.floor(diffDays / 30)}mo ago`;
-	return `${Math.floor(diffDays / 365)}y ago`;
+	if (diffDays === 1) return t("linear:yesterday");
+	if (diffDays < 7) return t("linear:daysAgo", { count: diffDays });
+	if (diffDays < 30) return t("linear:weeksAgo", { count: Math.floor(diffDays / 7) });
+	if (diffDays < 365) return t("linear:monthsAgo", { count: Math.floor(diffDays / 30) });
+	return t("linear:yearsAgo", { count: Math.floor(diffDays / 365) });
```
</details>

Also applies to lines 387‚Äì405.

<details>
<summary>ü§ñ Prompt for AI Agents</summary>

```
In
`@apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx`
around lines 210 - 215, The hardcoded English strings in formatDate must be
localized: modify the component(s) that call formatDate (e.g., in
LinearTicketDetail around the createdAt render and the other block at lines
~387‚Äì405) to pass the i18n translation function t into formatDate, then update
formatDate to use translation keys (e.g., linear.time.yesterday,
linear.time.minutes, linear.time.hours, linear.time.days) with proper plural
interpolation instead of "yesterday", "m ago", "h ago", etc.; finally add those
new keys with plural forms into both en/linear.json and fr/linear.json so the
strings are translated and pluralized correctly.
```

</details>

<!-- fingerprinting:phantom:poseidon:eagle -->

<!-- This is an auto-generated comment by CodeRabbit -->

---

## Implementation Notes

*Status: PENDING - Not yet verified or implemented*

### Verification Checklist

- [ ] Read file at comment location
- [ ] Verify if issue is already fixed
- [ ] Implement fix if needed
- [ ] Re-verify after implementation

