# Comment: 85d3abd5e8041994

**Source:** sentry
**Type:** comment
**File:** `apps/frontend/src/renderer/components/linear/hooks/useLinearTickets.ts`
**Original ID:** 2717374174
**Created:** None
**Severity:** LOW
**Status:** PENDING

---

## Original Content

**Bug:** The `useLinearTickets` hook receives a `projectId` but doesn't set it in the `linear-store`, causing all ticket validations to fail because `store.selectedProjectId` is `null`.
<sub>Severity: CRITICAL</sub>
<!-- BUG_PREDICTION -->

<details>
<summary><b title="Reference ID: `9028099`">Suggested Fix</b></summary>

In the `useLinearTickets` hook, use a `useEffect` to synchronize the `projectId` prop with the `linear-store`. This will ensure the `selectedProjectId` is set before any validation functions are called. Add the following to the hook: `useEffect(() => { useLinearStore.getState().setSelectedProjectId(projectId || null); }, [projectId]);`.
</details>

<details open>
<summary><b title="Reference ID: `9028099`">Prompt for AI Agent</b></summary>

```
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/frontend/src/renderer/components/linear/hooks/useLinearTickets.ts#L259

Potential issue: The `useLinearTickets` hook receives a `projectId` prop but fails to
synchronize it with the `selectedProjectId` state in the `linear-store`. The validation
functions `validateLinearTicket` and `validateLinearTicketBatch` read
`selectedProjectId` directly from the store, which remains `null`. As a result, any call
to validate a ticket immediately fails with a "No project selected" error, preventing
all ticket validation functionality from working.
```
</details>


<sub><i>Did we get this right? :+1: / :-1: to inform future reviews.</i></sub>
<!--
<sub>Reference ID: `9028099`</sub>-->

---

## Suggested Fix

```typescript
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/frontend/src/renderer/components/linear/hooks/useLinearTickets.ts#L259

Potential issue: The `useLinearTickets` hook receives a `projectId` prop but fails to
synchronize it with the `selectedProjectId` state in the `linear-store`. The validation
functions `validateLinearTicket` and `validateLinearTicketBatch` read
`selectedProjectId` directly from the store, which remains `null`. As a result, any call
to validate a ticket immediately fails with a "No project selected" error, preventing
all ticket validation functionality from working.
```

---

## Implementation Notes

*Status: PENDING - Not yet verified or implemented*

### Verification Checklist

- [ ] Read file at comment location
- [ ] Verify if issue is already fixed
- [ ] Implement fix if needed
- [ ] Re-verify after implementation

