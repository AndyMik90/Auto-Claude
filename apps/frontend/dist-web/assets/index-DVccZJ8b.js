function V9(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function gh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bj={exports:{}},zm={};var yP;function q9(){if(yP)return zm;yP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:a}}return zm.Fragment=t,zm.jsx=s,zm.jsxs=s,zm}var wP;function W9(){return wP||(wP=1,bj.exports=q9()),bj.exports}var n=W9();const K9=new Set(["complete","failed"]);function Y9(e){return K9.has(e)}const PC=["backlog","in_progress","ai_review","human_review","done"],Dv={backlog:"columns.backlog",in_progress:"columns.in_progress",ai_review:"columns.ai_review",human_review:"columns.human_review",done:"columns.done",pr_created:"columns.pr_created"},X9={idle:"Idle",planning:"Planning",coding:"Coding",qa_review:"AI Review",qa_fixing:"Fixing Issues",complete:"Complete",failed:"Failed"},Z9={idle:"bg-muted/50 text-muted-foreground border-muted",planning:"bg-amber-500/10 text-amber-500 border-amber-500/30",coding:"bg-info/10 text-info border-info/30",qa_review:"bg-purple-500/10 text-purple-400 border-purple-500/30",qa_fixing:"bg-warning/10 text-warning border-warning/30",complete:"bg-success/10 text-success border-success/30",failed:"bg-destructive/10 text-destructive border-destructive/30"},RC={feature:"Feature",bug_fix:"Bug Fix",refactoring:"Refactoring",documentation:"Docs",security:"Security",performance:"Performance",ui_ux:"UI/UX",infrastructure:"Infrastructure",testing:"Testing"},DC={feature:"bg-primary/10 text-primary border-primary/30",bug_fix:"bg-destructive/10 text-destructive border-destructive/30",refactoring:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",documentation:"bg-amber-500/10 text-amber-500 border-amber-500/30",security:"bg-red-500/10 text-red-400 border-red-500/30",performance:"bg-purple-500/10 text-purple-400 border-purple-500/30",ui_ux:"bg-info/10 text-info border-info/30",infrastructure:"bg-slate-500/10 text-slate-400 border-slate-500/30",testing:"bg-emerald-500/10 text-emerald-400 border-emerald-500/30"},IC={trivial:"Trivial",small:"Small",medium:"Medium",large:"Large",complex:"Complex"},MC={trivial:"bg-success/10 text-success",small:"bg-info/10 text-info",medium:"bg-warning/10 text-warning",large:"bg-orange-500/10 text-orange-400",complex:"bg-destructive/10 text-destructive"},w5={low:"Low Impact",medium:"Medium Impact",high:"High Impact",critical:"Critical Impact"},Iv={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",critical:"bg-destructive/10 text-destructive"},j5={low:"Low",medium:"Medium",high:"High",urgent:"Urgent"},S5={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",urgent:"bg-destructive/10 text-destructive"},Pu=10,Q9=["image/png","image/jpeg","image/jpg","image/gif","image/webp","image/svg+xml"],Mv="PNG, JPEG, GIF, WebP, SVG",Lv="__JSON_ERROR__:",jP="__JSON_ERROR_SUFFIX__",gp={must:"Must Have",should:"Should Have",could:"Could Have",wont:"Won't Have"},xh={must:"bg-destructive/10 text-destructive border-destructive/30",should:"bg-warning/10 text-warning border-warning/30",could:"bg-info/10 text-info border-info/30",wont:"bg-muted text-muted-foreground border-muted"},Of={low:"bg-success/10 text-success",medium:"bg-warning/10 text-warning",high:"bg-destructive/10 text-destructive"},Ib={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-success/10 text-success"},fx=[{id:"under_review",label:"Under Review",color:"border-t-muted-foreground/50",icon:"Eye"},{id:"planned",label:"Planned",color:"border-t-info",icon:"Calendar"},{id:"in_progress",label:"In Progress",color:"border-t-primary",icon:"Play"},{id:"done",label:"Done",color:"border-t-success",icon:"Check"}],nc={code_improvements:"Code Improvements",ui_ux_improvements:"UI/UX Improvements",documentation_gaps:"Documentation",security_hardening:"Security",performance_optimizations:"Performance",code_quality:"Code Quality"},m_={code_improvements:"Code-revealed opportunities from patterns, architecture, and infrastructure analysis",ui_ux_improvements:"Visual and interaction improvements identified through app analysis",documentation_gaps:"Missing or outdated documentation that needs attention",security_hardening:"Security vulnerabilities and hardening opportunities",performance_optimizations:"Performance bottlenecks and optimization opportunities",code_quality:"Refactoring opportunities, large files, code smells, and best practice violations"},Zu={code_improvements:"bg-success/10 text-success border-success/30",ui_ux_improvements:"bg-info/10 text-info border-info/30",documentation_gaps:"bg-amber-500/10 text-amber-500 border-amber-500/30",security_hardening:"bg-destructive/10 text-destructive border-destructive/30",performance_optimizations:"bg-purple-500/10 text-purple-400 border-purple-500/30",code_quality:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30"},_5={draft:"bg-muted text-muted-foreground",selected:"bg-primary/10 text-primary",converted:"bg-success/10 text-success",dismissed:"bg-destructive/10 text-destructive line-through",archived:"bg-violet-500/10 text-violet-400"},xp={trivial:"bg-success/10 text-success",small:"bg-info/10 text-info",medium:"bg-warning/10 text-warning",large:"bg-orange-500/10 text-orange-400",complex:"bg-destructive/10 text-destructive"},LC={low:"bg-muted text-muted-foreground",medium:"bg-info/10 text-info",high:"bg-warning/10 text-warning",critical:"bg-destructive/10 text-destructive"},N5={low:"bg-info/10 text-info",medium:"bg-warning/10 text-warning",high:"bg-orange-500/10 text-orange-500",critical:"bg-destructive/10 text-destructive"},C5={usability:"Usability",accessibility:"Accessibility",performance:"Performance",visual:"Visual Design",interaction:"Interaction"},k5={readme:"README",api_docs:"API Documentation",inline_comments:"Inline Comments",examples:"Examples & Tutorials",architecture:"Architecture Docs",troubleshooting:"Troubleshooting Guide"},J9={authentication:"Authentication",authorization:"Authorization",input_validation:"Input Validation",data_protection:"Data Protection",dependencies:"Dependencies",configuration:"Configuration",secrets_management:"Secrets Management"},eq={bundle_size:"Bundle Size",runtime:"Runtime Performance",memory:"Memory Usage",database:"Database Queries",network:"Network Requests",rendering:"Rendering",caching:"Caching"},tq={large_files:"Large Files",code_smells:"Code Smells",complexity:"High Complexity",duplication:"Code Duplication",naming:"Naming Conventions",structure:"File Structure",linting:"Linting Issues",testing:"Test Coverage",types:"Type Safety",dependencies:"Dependency Issues",dead_code:"Dead Code",git_hygiene:"Git Hygiene"},A5={suggestion:"bg-info/10 text-info",minor:"bg-warning/10 text-warning",major:"bg-orange-500/10 text-orange-500",critical:"bg-destructive/10 text-destructive"},px={enabledTypes:["code_improvements","ui_ux_improvements","security_hardening"],includeRoadmapContext:!0,includeKanbanContext:!0,maxIdeasPerType:5},sq={"keep-a-changelog":"Keep a Changelog","simple-list":"Simple List","github-release":"GitHub Release"},nq={"keep-a-changelog":"Structured format with Added/Changed/Fixed/Removed sections","simple-list":"Clean bulleted list with categories","github-release":"GitHub-style release notes"},rq={technical:"Technical","user-facing":"User-Facing",marketing:"Marketing"},iq={technical:"Detailed technical changes for developers","user-facing":"Clear, non-technical descriptions for end users",marketing:"Value-focused copy emphasizing benefits"},aq={none:"None",little:"Headings Only",medium:"Headings + Highlights",high:"Everything"},oq={none:"No emojis",little:"Emojis on section headings only",medium:"Emojis on headings and key items",high:"Emojis on headings and every line"},yj={tasks:"Completed Tasks","git-history":"Git History","branch-diff":"Branch Comparison"},wj={tasks:"Generate from completed spec tasks","git-history":"Generate from recent commits or tag range","branch-diff":"Generate from commits between two branches"},lq={loading_specs:"Loading spec files...",loading_commits:"Loading commits...",generating:"Generating changelog...",formatting:"Formatting output...",complete:"Complete",error:"Error"},ca=[{value:"opus",label:"Claude Opus 4.5"},{value:"sonnet",label:"Claude Sonnet 4.5"},{value:"haiku",label:"Claude Haiku 4.5"}],ld=[{value:"none",label:"None",description:"No extended thinking"},{value:"low",label:"Low",description:"Brief consideration"},{value:"medium",label:"Medium",description:"Moderate analysis"},{value:"high",label:"High",description:"Deep thinking"},{value:"ultrathink",label:"Ultra Think",description:"Maximum reasoning depth"}],cq={spec:"opus",planning:"opus",coding:"opus",qa:"opus"},dq={spec:"ultrathink",planning:"high",coding:"low",qa:"low"},uq={spec:"opus",planning:"opus",coding:"opus",qa:"opus"},hq={spec:"ultrathink",planning:"ultrathink",coding:"ultrathink",qa:"ultrathink"},E5={spec:"sonnet",planning:"sonnet",coding:"sonnet",qa:"sonnet"},T5={spec:"medium",planning:"medium",coding:"medium",qa:"medium"},mq={spec:"haiku",planning:"haiku",coding:"haiku",qa:"haiku"},fq={spec:"low",planning:"low",coding:"low",qa:"low"},oa=E5,la=T5,P5={insights:"sonnet",ideation:"opus",roadmap:"opus",githubIssues:"opus",githubPrs:"opus",utility:"haiku"},R5={insights:"medium",ideation:"high",roadmap:"high",githubIssues:"medium",githubPrs:"medium",utility:"low"},jj={insights:{label:"Insights Chat",description:"Ask questions about your codebase"},ideation:{label:"Ideation",description:"Generate feature ideas and improvements"},roadmap:{label:"Roadmap",description:"Create strategic feature roadmaps"},githubIssues:{label:"GitHub Issues",description:"Automated issue triage and labeling"},githubPrs:{label:"GitHub PR Review",description:"AI-powered pull request reviews"},utility:{label:"Utility",description:"Commit messages and merge conflict resolution"}},ar=[{id:"auto",name:"Auto (Optimized)",description:"Uses Opus across all phases with optimized thinking levels",model:"opus",thinkingLevel:"high",icon:"Sparkles",phaseModels:cq,phaseThinking:dq},{id:"complex",name:"Complex Tasks",description:"For intricate, multi-step implementations requiring deep analysis",model:"opus",thinkingLevel:"ultrathink",icon:"Brain",phaseModels:uq,phaseThinking:hq},{id:"balanced",name:"Balanced",description:"Good balance of speed and quality for most tasks",model:"sonnet",thinkingLevel:"medium",icon:"Scale",phaseModels:E5,phaseThinking:T5},{id:"quick",name:"Quick Edits",description:"Fast iterations for simple changes and quick fixes",model:"haiku",thinkingLevel:"low",icon:"Zap",phaseModels:mq,phaseThinking:fq}],D5=[{id:"default",name:"Default",description:"Oscura-inspired with pale yellow accent",previewColors:{bg:"#F2F2ED",accent:"#E6E7A3",darkBg:"#0B0B0F",darkAccent:"#E6E7A3"}},{id:"dusk",name:"Dusk",description:"Warmer variant with slightly lighter dark mode",previewColors:{bg:"#F5F5F0",accent:"#E6E7A3",darkBg:"#131419",darkAccent:"#E6E7A3"}},{id:"lime",name:"Lime",description:"Fresh, energetic lime with purple accents",previewColors:{bg:"#E8F5A3",accent:"#7C3AED",darkBg:"#0F0F1A"}},{id:"ocean",name:"Ocean",description:"Calm, professional blue tones",previewColors:{bg:"#E0F2FE",accent:"#0284C7",darkBg:"#082F49"}},{id:"retro",name:"Retro",description:"Warm, nostalgic amber vibes",previewColors:{bg:"#FEF3C7",accent:"#D97706",darkBg:"#1C1917"}},{id:"neo",name:"Neo",description:"Modern cyberpunk pink/magenta",previewColors:{bg:"#FDF4FF",accent:"#D946EF",darkBg:"#0F0720"}},{id:"forest",name:"Forest",description:"Natural, earthy green tones",previewColors:{bg:"#DCFCE7",accent:"#16A34A",darkBg:"#052E16"}}],I5={open:"Open",closed:"Closed"},M5={open:"bg-success/10 text-success border-success/30",closed:"bg-purple-500/10 text-purple-400 border-purple-500/30"},pq={simple:"bg-success/10 text-success",standard:"bg-warning/10 text-warning",complex:"bg-destructive/10 text-destructive"},SP=[{id:"anthropic",baseUrl:"https://api.anthropic.com",labelKey:"settings:apiProfiles.presets.anthropic"},{id:"openrouter",baseUrl:"https://openrouter.ai/api/v1",labelKey:"settings:apiProfiles.presets.openrouter"},{id:"groq",baseUrl:"https://api.groq.com/openai/v1",labelKey:"settings:apiProfiles.presets.groq"},{id:"glm-global",baseUrl:"https://api.z.ai/api/anthropic",labelKey:"settings:apiProfiles.presets.glmGlobal"},{id:"glm-cn",baseUrl:"https://open.bigmodel.cn/api/paas/v4",labelKey:"settings:apiProfiles.presets.glmChina"}],Au=75,Eu=200,nl=100,$m=5,L5={theme:"system",colorTheme:"default",defaultModel:"opus",agentFramework:"auto-claude",pythonPath:void 0,gitPath:void 0,githubCLIPath:void 0,autoBuildPath:void 0,autoUpdateAutoBuild:!0,autoNameTerminals:!0,onboardingCompleted:!1,notifications:{onTaskComplete:!0,onTaskFailed:!0,onReviewNeeded:!0,sound:!1},globalClaudeOAuthToken:void 0,globalOpenAIApiKey:void 0,selectedAgentProfile:"auto",changelogFormat:"keep-a-changelog",changelogAudience:"user-facing",changelogEmojiLevel:"none",uiScale:nl,betaUpdates:!1,language:"en",sentryEnabled:!0},f_={model:"opus",memoryBackend:"file",linearSync:!1,notifications:{onTaskComplete:!0,onTaskFailed:!0,onReviewNeeded:!0,sound:!1},graphitiMcpEnabled:!0,graphitiMcpUrl:"http://localhost:8000/mcp/",useClaudeMd:!0},gq=[{id:"mock-project-1",name:"sample-project",path:"/Users/demo/projects/sample-project",autoBuildPath:"/Users/demo/projects/sample-project/auto-claude",settings:f_,createdAt:new Date,updatedAt:new Date},{id:"mock-project-2",name:"another-project",path:"/Users/demo/projects/another-project",autoBuildPath:"/Users/demo/projects/another-project/auto-claude",settings:f_,createdAt:new Date,updatedAt:new Date}],ja=[{id:"session-1",projectId:"mock-project-1",title:"Architecture discussion",messageCount:5,createdAt:new Date(Date.now()-1e3*60*30),updatedAt:new Date(Date.now()-1e3*60*30)},{id:"session-2",projectId:"mock-project-1",title:"Code review suggestions",messageCount:12,createdAt:new Date(Date.now()-1e3*60*60*2),updatedAt:new Date(Date.now()-1e3*60*60*2)},{id:"session-3",projectId:"mock-project-1",title:"Security analysis",messageCount:8,createdAt:new Date(Date.now()-1e3*60*60*24),updatedAt:new Date(Date.now()-1e3*60*60*24)},{id:"session-4",projectId:"mock-project-1",title:"Performance optimization",messageCount:3,createdAt:new Date(Date.now()-1e3*60*60*24*3),updatedAt:new Date(Date.now()-1e3*60*60*24*3)}],p_=[{id:"task-1",projectId:"mock-project-1",specId:"001-add-auth",title:"Add user authentication",description:"Implement JWT-based user authentication with login/logout functionality",status:"backlog",subtasks:[],logs:[],createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-864e5)},{id:"task-2",projectId:"mock-project-1",specId:"002-dashboard",title:"Build analytics dashboard",description:"Create a real-time analytics dashboard with charts and metrics",status:"in_progress",subtasks:[{id:"subtask-1",title:"Setup chart library",description:"Install and configure Chart.js",status:"completed",files:["src/lib/charts.ts"]},{id:"subtask-2",title:"Create dashboard layout",description:"Build responsive grid layout",status:"in_progress",files:["src/components/Dashboard.tsx"]},{id:"subtask-3",title:"Add data fetching",description:"Implement API calls for metrics",status:"pending",files:[]}],logs:["[INFO] Starting task...","[INFO] Subtask 1 completed","[INFO] Working on subtask 2..."],createdAt:new Date(Date.now()-36e5),updatedAt:new Date},{id:"task-3",projectId:"mock-project-1",specId:"003-fix-bug",title:"Fix pagination bug",description:"Fix off-by-one error in table pagination",status:"human_review",subtasks:[{id:"subtask-1",title:"Fix pagination logic",description:"Correct the offset calculation",status:"completed",files:["src/utils/pagination.ts"]}],logs:["[INFO] Task completed, awaiting review"],createdAt:new Date(Date.now()-72e5),updatedAt:new Date(Date.now()-18e5)},{id:"task-4",projectId:"mock-project-1",specId:"004-refactor",title:"Refactor API layer",description:"Consolidate API calls into a single service",status:"done",subtasks:[{id:"subtask-1",title:"Create API service",description:"Build centralized API client",status:"completed",files:["src/services/api.ts"]},{id:"subtask-2",title:"Migrate endpoints",description:"Update all components to use new service",status:"completed",files:["src/components/*.tsx"]}],logs:["[INFO] Task completed successfully"],createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-864e5)}],xq={addProject:async e=>({success:!0,data:{id:`mock-${Date.now()}`,name:e.split("/").pop()||"new-project",path:e,autoBuildPath:`${e}/auto-claude`,settings:f_,createdAt:new Date,updatedAt:new Date}}),removeProject:async()=>({success:!0}),getProjects:async()=>({success:!0,data:gq}),updateProjectSettings:async()=>({success:!0}),initializeProject:async()=>({success:!0,data:{success:!0,version:"1.0.0",wasUpdate:!1}}),checkProjectVersion:async()=>({success:!0,data:{isInitialized:!0,currentVersion:"1.0.0",sourceVersion:"1.0.0",updateAvailable:!1}}),getTabState:async()=>({success:!0,data:{openProjectIds:[],activeProjectId:null,tabOrder:[]}}),saveTabState:async()=>({success:!0}),selectDirectory:async()=>prompt("Enter project path (browser mock):","/Users/demo/projects/new-project"),createProjectFolder:async(e,t,s)=>({success:!0,data:{path:`/Users/demo/projects/${t}`,name:t,gitInitialized:s}}),getDefaultProjectLocation:async()=>"/Users/demo/projects",listDirectory:async()=>({success:!0,data:[]}),readFile:async()=>({success:!0,data:""}),getGitBranches:async()=>({success:!0,data:["main","develop","feature/test"]}),getCurrentGitBranch:async()=>({success:!0,data:"main"}),detectMainBranch:async()=>({success:!0,data:"main"}),checkGitStatus:async()=>({success:!0,data:{isGitRepo:!0,hasCommits:!0,currentBranch:"main"}}),initializeGit:async()=>({success:!0,data:{success:!0}})},vq={getTasks:async e=>({success:!0,data:p_.filter(t=>t.projectId===e)}),createTask:async(e,t,s)=>({success:!0,data:{id:`task-${Date.now()}`,projectId:e,specId:`00${p_.length+1}-new-task`,title:t,description:s,status:"backlog",subtasks:[],logs:[],createdAt:new Date,updatedAt:new Date}}),deleteTask:async()=>({success:!0}),updateTask:async(e,t)=>({success:!0,data:{id:e,projectId:"mock-project-1",specId:"001-updated",title:t.title||"Updated Task",description:t.description||"Updated description",status:"backlog",subtasks:[],logs:[],createdAt:new Date,updatedAt:new Date}}),startTask:()=>{console.warn("[Browser Mock] startTask called")},stopTask:()=>{console.warn("[Browser Mock] stopTask called")},submitReview:async()=>({success:!0}),archiveTasks:async()=>({success:!0,data:!0}),unarchiveTasks:async()=>({success:!0,data:!0}),updateTaskStatus:async(e,t,s)=>({success:!0}),recoverStuckTask:async(e,t)=>({success:!0,data:{taskId:e,recovered:!0,newStatus:t?.targetStatus||"backlog",message:"[Browser Mock] Task recovered successfully"}}),checkTaskRunning:async()=>({success:!0,data:!1}),getTaskLogs:async()=>({success:!0,data:null}),watchTaskLogs:async()=>({success:!0}),unwatchTaskLogs:async()=>({success:!0}),onTaskProgress:()=>()=>{},onTaskError:()=>()=>{},onTaskLog:()=>()=>{},onTaskStatusChange:()=>()=>{},onTaskExecutionProgress:()=>()=>{},onTaskLogsChanged:()=>()=>{},onTaskLogsStream:()=>()=>{}},bq={getWorktreeStatus:async()=>({success:!0,data:{exists:!1}}),getWorktreeDiff:async()=>({success:!0,data:{files:[],summary:"No changes"}}),mergeWorktree:async()=>({success:!0,data:{success:!0,message:"Merge completed successfully"}}),mergeWorktreePreview:async()=>({success:!0,data:{success:!0,message:"Preview generated",preview:{files:["src/index.ts","src/utils.ts"],conflicts:[{file:"src/utils.ts",location:"lines 10-15",tasks:["task-001"],severity:"low",canAutoMerge:!0,strategy:"append",reason:"Non-overlapping additions"}],summary:{totalFiles:2,conflictFiles:1,totalConflicts:1,autoMergeable:1}}}}),createWorktreePR:async()=>({success:!0,data:{success:!0,prUrl:"https://github.com/example/repo/pull/123"}}),discardWorktree:async(e,t)=>({success:!0,data:{success:!0,message:"Worktree discarded successfully"}}),clearStagedState:async()=>({success:!0,data:{cleared:!0}}),listWorktrees:async()=>({success:!0,data:{worktrees:[]}}),worktreeOpenInIDE:async()=>({success:!0,data:{opened:!0}}),worktreeOpenInTerminal:async()=>({success:!0,data:{opened:!0}}),worktreeDetectTools:async()=>({success:!0,data:{ides:[{id:"vscode",name:"Visual Studio Code",path:"/Applications/Visual Studio Code.app",installed:!0}],terminals:[{id:"system",name:"System Terminal",path:"",installed:!0}]}})},yq={createTerminal:async()=>(console.warn("[Browser Mock] createTerminal called"),{success:!0}),destroyTerminal:async()=>(console.warn("[Browser Mock] destroyTerminal called"),{success:!0}),sendTerminalInput:()=>{console.warn("[Browser Mock] sendTerminalInput called")},resizeTerminal:()=>{console.warn("[Browser Mock] resizeTerminal called")},invokeClaudeInTerminal:()=>{console.warn("[Browser Mock] invokeClaudeInTerminal called")},generateTerminalName:async()=>({success:!0,data:"Mock Terminal"}),setTerminalTitle:()=>{console.warn("[Browser Mock] setTerminalTitle called")},setTerminalWorktreeConfig:()=>{console.warn("[Browser Mock] setTerminalWorktreeConfig called")},getTerminalSessions:async()=>({success:!0,data:[]}),restoreTerminalSession:async()=>({success:!0,data:{success:!0,terminalId:"restored-terminal"}}),clearTerminalSessions:async()=>({success:!0}),resumeClaudeInTerminal:()=>{console.warn("[Browser Mock] resumeClaudeInTerminal called")},activateDeferredClaudeResume:()=>{console.warn("[Browser Mock] activateDeferredClaudeResume called")},getTerminalSessionDates:async()=>({success:!0,data:[]}),getTerminalSessionsForDate:async()=>({success:!0,data:[]}),restoreTerminalSessionsFromDate:async()=>({success:!0,data:{restored:0,failed:0,sessions:[]}}),saveTerminalBuffer:async()=>{},checkTerminalPtyAlive:async()=>({success:!0,data:{alive:!1}}),onTerminalOutput:()=>()=>{},onTerminalExit:()=>()=>{},onTerminalTitleChange:()=>()=>{},onTerminalWorktreeConfigChange:()=>()=>{},onTerminalClaudeSession:()=>()=>{},onTerminalRateLimit:()=>()=>{},onTerminalOAuthToken:()=>()=>{},onTerminalAuthCreated:()=>()=>{},onTerminalClaudeBusy:()=>()=>{},onTerminalClaudeExit:()=>()=>{},onTerminalPendingResume:()=>()=>{}},wq={getClaudeProfiles:async()=>({success:!0,data:{profiles:[],activeProfileId:"default"}}),saveClaudeProfile:async e=>({success:!0,data:{id:e.id,name:e.name,oauthToken:e.oauthToken,email:e.email,isDefault:e.isDefault??!1,createdAt:e.createdAt??new Date}}),deleteClaudeProfile:async()=>({success:!0}),renameClaudeProfile:async()=>({success:!0}),setActiveClaudeProfile:async()=>({success:!0}),switchClaudeProfile:async()=>({success:!0}),initializeClaudeProfile:async()=>({success:!0}),setClaudeProfileToken:async()=>({success:!0}),getAutoSwitchSettings:async()=>({success:!0,data:{enabled:!1,proactiveSwapEnabled:!1,sessionThreshold:95,weeklyThreshold:99,autoSwitchOnRateLimit:!1,usageCheckInterval:3e4}}),updateAutoSwitchSettings:async()=>({success:!0}),fetchClaudeUsage:async()=>({success:!0}),getBestAvailableProfile:async()=>({success:!0,data:null}),onSDKRateLimit:()=>()=>{},retryWithProfile:async()=>({success:!0}),requestUsageUpdate:async()=>({success:!0,data:null}),onUsageUpdated:()=>()=>{},onProactiveSwapNotification:()=>()=>{}},jq={getProjectContext:async()=>({success:!0,data:{projectIndex:null,memoryStatus:null,memoryState:null,recentMemories:[],isLoading:!1}}),refreshProjectIndex:async()=>({success:!1,error:"Not available in browser mock"}),getMemoryStatus:async()=>({success:!0,data:{enabled:!1,available:!1,reason:"Browser mock environment"}}),searchMemories:async()=>({success:!0,data:[]}),getRecentMemories:async()=>({success:!0,data:[]})},Sq={getProjectEnv:async()=>({success:!0,data:{claudeAuthStatus:"not_configured",linearEnabled:!1,githubEnabled:!1,gitlabEnabled:!1,graphitiEnabled:!1,enableFancyUi:!0}}),updateProjectEnv:async()=>({success:!0}),getSourceEnv:async()=>({success:!0,data:{hasClaudeToken:!0,envExists:!0,sourcePath:"/mock/auto-claude"}}),updateSourceEnv:async()=>({success:!0}),checkSourceToken:async()=>({success:!0,data:{hasToken:!0,sourcePath:"/mock/auto-claude"}}),checkClaudeAuth:async()=>({success:!0,data:{success:!1,authenticated:!1,error:"Not available in browser mock"}}),invokeClaudeSetup:async()=>({success:!0,data:{success:!1,authenticated:!1,error:"Not available in browser mock"}}),getLinearTeams:async()=>({success:!0,data:[]}),getLinearProjects:async()=>({success:!0,data:[]}),getLinearIssues:async()=>({success:!0,data:[]}),importLinearIssues:async()=>({success:!1,error:"Not available in browser mock"}),checkLinearConnection:async()=>({success:!0,data:{connected:!1,error:"Not available in browser mock"}}),getGitHubRepositories:async()=>({success:!0,data:[]}),getGitHubIssues:async()=>({success:!0,data:{issues:[],hasMore:!1}}),getGitHubIssue:async()=>({success:!1,error:"Not available in browser mock"}),checkGitHubConnection:async()=>({success:!0,data:{connected:!1,error:"Not available in browser mock"}}),investigateGitHubIssue:()=>{console.warn("[Browser Mock] investigateGitHubIssue called")},getIssueComments:async()=>({success:!0,data:[]}),importGitHubIssues:async()=>({success:!1,error:"Not available in browser mock"}),createGitHubRelease:async()=>({success:!0,data:{url:"https://github.com/example/repo/releases/tag/v1.0.0"}}),onGitHubInvestigationProgress:()=>()=>{},onGitHubInvestigationComplete:()=>()=>{},onGitHubInvestigationError:()=>()=>{},checkGitHubCli:async()=>({success:!0,data:{installed:!1,version:void 0}}),checkGitHubAuth:async()=>({success:!0,data:{authenticated:!1,username:void 0}}),startGitHubAuth:async()=>({success:!1,error:"Not available in browser mock"}),getGitHubToken:async()=>({success:!1,error:"Not available in browser mock"}),getGitHubUser:async()=>({success:!1,error:"Not available in browser mock"}),listGitHubUserRepos:async()=>({success:!0,data:{repos:[{fullName:"user/example-repo",description:"An example repository",isPrivate:!1},{fullName:"user/private-repo",description:"A private repository",isPrivate:!0}]}}),detectGitHubRepo:async()=>({success:!0,data:"user/example-repo"}),getGitHubBranches:async()=>({success:!0,data:["main","develop","feature/example"]}),createGitHubRepo:async(e,t)=>({success:!1,error:"Not available in browser mock"}),addGitRemote:async(e,t)=>({success:!1,error:"Not available in browser mock"}),listGitHubOrgs:async()=>({success:!0,data:{orgs:[{login:"example-org",avatarUrl:"https://avatars.githubusercontent.com/u/1?v=4"},{login:"another-org",avatarUrl:"https://avatars.githubusercontent.com/u/2?v=4"}]}}),getGitLabProjects:async()=>({success:!0,data:[]}),getGitLabIssues:async()=>({success:!0,data:[]}),getGitLabIssue:async()=>({success:!1,error:"Not available in browser mock"}),getGitLabIssueNotes:async()=>({success:!0,data:[]}),checkGitLabConnection:async()=>({success:!0,data:{connected:!1,error:"Not available in browser mock"}}),investigateGitLabIssue:()=>{console.warn("[Browser Mock] investigateGitLabIssue called")},importGitLabIssues:async()=>({success:!1,error:"Not available in browser mock"}),createGitLabRelease:async()=>({success:!0,data:{url:"https://gitlab.com/example/repo/-/releases/v1.0.0"}}),getGitLabMergeRequests:async()=>({success:!0,data:[]}),getGitLabMergeRequest:async()=>({success:!1,error:"Not available in browser mock"}),createGitLabMergeRequest:async(e,t)=>({success:!1,error:"Not available in browser mock"}),updateGitLabMergeRequest:async()=>({success:!1,error:"Not available in browser mock"}),getGitLabMRReview:async()=>null,runGitLabMRReview:()=>{},runGitLabMRFollowupReview:()=>{},postGitLabMRReview:async()=>!1,postGitLabMRNote:async()=>!1,mergeGitLabMR:async()=>!1,assignGitLabMR:async()=>!1,approveGitLabMR:async()=>!1,cancelGitLabMRReview:async()=>!1,checkGitLabMRNewCommits:async()=>({hasNewCommits:!1}),onGitLabMRReviewProgress:()=>()=>{},onGitLabMRReviewComplete:()=>()=>{},onGitLabMRReviewError:()=>()=>{},checkGitLabCli:async()=>({success:!0,data:{installed:!1,version:void 0}}),installGitLabCli:async()=>({success:!1,error:"Not available in browser mock"}),checkGitLabAuth:async()=>({success:!0,data:{authenticated:!1,username:void 0}}),startGitLabAuth:async()=>({success:!1,error:"Not available in browser mock"}),getGitLabToken:async()=>({success:!1,error:"Not available in browser mock"}),getGitLabUser:async()=>({success:!1,error:"Not available in browser mock"}),listGitLabUserProjects:async()=>({success:!0,data:{projects:[{pathWithNamespace:"user/example-project",description:"An example project",visibility:"public"},{pathWithNamespace:"user/private-project",description:"A private project",visibility:"private"}]}}),detectGitLabProject:async()=>({success:!0,data:{project:"user/example-project",instanceUrl:"https://gitlab.com"}}),getGitLabBranches:async()=>({success:!0,data:["main","develop","feature/example"]}),createGitLabProject:async()=>({success:!1,error:"Not available in browser mock"}),addGitLabRemote:async()=>({success:!1,error:"Not available in browser mock"}),listGitLabGroups:async()=>({success:!0,data:{groups:[{id:1,name:"Example Group",path:"example-group",fullPath:"example-group",description:"An example group"},{id:2,name:"Another Group",path:"another-group",fullPath:"another-group",description:"Another group"}]}}),onGitLabInvestigationProgress:()=>()=>{},onGitLabInvestigationComplete:()=>()=>{},onGitLabInvestigationError:()=>()=>{},onGitHubAuthDeviceCode:()=>()=>{}},_q={getChangelogDoneTasks:async(e,t)=>({success:!0,data:(t||p_).filter(s=>s.status==="done").map(s=>({id:s.id,specId:s.specId,title:s.title,description:s.description,completedAt:s.updatedAt,hasSpecs:!0}))}),loadTaskSpecs:async()=>({success:!0,data:[]}),generateChangelog:()=>{console.warn("[Browser Mock] generateChangelog called")},saveChangelog:async()=>({success:!0,data:{filePath:"CHANGELOG.md",bytesWritten:1024}}),saveChangelogImage:async()=>({success:!0,data:{relativePath:"images/mock-image.png",url:"file:///mock/path/images/mock-image.png"}}),readLocalImage:async()=>({success:!1,error:"Mock: Cannot read local images in browser mode"}),readExistingChangelog:async()=>({success:!0,data:{exists:!1}}),suggestChangelogVersion:async()=>({success:!0,data:{version:"1.0.0",reason:"Initial release"}}),suggestChangelogVersionFromCommits:async()=>({success:!0,data:{version:"1.0.0",reason:"Based on commit analysis"}}),getChangelogBranches:async()=>({success:!0,data:[]}),getChangelogTags:async()=>({success:!0,data:[]}),getChangelogCommitsPreview:async()=>({success:!0,data:[]}),onChangelogGenerationProgress:()=>()=>{},onChangelogGenerationComplete:()=>()=>{},onChangelogGenerationError:()=>()=>{},getReleaseableVersions:async()=>({success:!0,data:[{version:"1.0.0",tagName:"v1.0.0",date:"2025-12-13",content:`### Added
- Initial release
- User authentication
- Dashboard`,taskSpecIds:["001-auth","002-dashboard"],isReleased:!1},{version:"0.9.0",tagName:"v0.9.0",date:"2025-12-01",content:`### Added
- Beta features`,taskSpecIds:[],isReleased:!0,releaseUrl:"https://github.com/example/repo/releases/tag/v0.9.0"}]}),runReleasePreflightCheck:async(e,t)=>({success:!0,data:{canRelease:!0,checks:{gitClean:{passed:!0,message:"Working directory is clean"},commitsPushed:{passed:!0,message:"All commits pushed to remote"},tagAvailable:{passed:!0,message:`Tag v${t} is available`},githubConnected:{passed:!0,message:"GitHub CLI authenticated"},worktreesMerged:{passed:!0,message:"All features in this release are merged",unmergedWorktrees:[]}},blockers:[]}}),createRelease:()=>{console.warn("[Browser Mock] createRelease called")},onReleaseProgress:()=>()=>{},onReleaseComplete:()=>()=>{},onReleaseError:()=>()=>{}},Nq={getInsightsSession:async()=>({success:!0,data:ja.length>0?{id:ja[0].id,projectId:ja[0].projectId,messages:[],createdAt:ja[0].createdAt,updatedAt:ja[0].updatedAt}:null}),listInsightsSessions:async()=>({success:!0,data:ja}),newInsightsSession:async e=>{const t={id:`session-${Date.now()}`,projectId:e,title:"New conversation",messageCount:0,createdAt:new Date,updatedAt:new Date};return ja.unshift(t),{success:!0,data:{id:t.id,projectId:t.projectId,messages:[],createdAt:t.createdAt,updatedAt:t.updatedAt}}},switchInsightsSession:async(e,t)=>{const s=ja.find(r=>r.id===t);return s?{success:!0,data:{id:s.id,projectId:s.projectId,messages:[],createdAt:s.createdAt,updatedAt:s.updatedAt}}:{success:!1,error:"Session not found"}},deleteInsightsSession:async(e,t)=>{const s=ja.findIndex(r=>r.id===t);return s!==-1&&(ja.splice(s,1),console.warn("[Browser Mock] Session deleted:",t)),{success:!0}},renameInsightsSession:async(e,t,s)=>{const r=ja.find(i=>i.id===t);return r&&(r.title=s,console.warn("[Browser Mock] Session renamed:",t,"to",s)),{success:!0}},updateInsightsModelConfig:async(e,t,s)=>(console.warn("[Browser Mock] updateInsightsModelConfig called"),{success:!0}),sendInsightsMessage:()=>{console.warn("[Browser Mock] sendInsightsMessage called")},clearInsightsSession:async()=>({success:!0}),createTaskFromInsights:async(e,t,s)=>({success:!0,data:{id:`task-${Date.now()}`,projectId:e,specId:`00${Date.now()}-insights-task`,title:t,description:s,status:"backlog",subtasks:[],logs:[],createdAt:new Date,updatedAt:new Date}}),onInsightsStreamChunk:()=>()=>{},onInsightsStatus:()=>()=>{},onInsightsError:()=>()=>{}},Cq={getMemoryInfrastructureStatus:async()=>({success:!0,data:{memory:{kuzuInstalled:!0,databasePath:"~/.auto-claude/graphs",databaseExists:!0,databases:["auto_claude_memory"]},ready:!0}}),listMemoryDatabases:async()=>({success:!0,data:["auto_claude_memory","project_memory"]}),testMemoryConnection:async()=>({success:!0,data:{success:!0,message:"Connected to LadybugDB database (mock)",details:{latencyMs:5}}}),validateLLMApiKey:async()=>({success:!0,data:{success:!0,message:"API key is valid (mock)",details:{provider:"openai",latencyMs:100}}}),testGraphitiConnection:async()=>({success:!0,data:{database:{success:!0,message:"Connected to LadybugDB database (mock)",details:{latencyMs:5}},llmProvider:{success:!0,message:"LLM API key is valid (mock)",details:{provider:"openai",latencyMs:100}},ready:!0}}),checkOllamaStatus:async()=>({success:!0,data:{running:!0,url:"http://localhost:11434",version:"0.1.0"}}),checkOllamaInstalled:async()=>({success:!0,data:{installed:!0,path:"/usr/local/bin/ollama",version:"0.1.0"}}),installOllama:async()=>({success:!0,data:{command:"curl -fsSL https://ollama.com/install.sh | sh"}}),listOllamaModels:async()=>({success:!0,data:{models:[{name:"llama2",size_bytes:4e9,size_gb:3.73,modified_at:"2024-01-01",is_embedding:!1},{name:"nomic-embed-text",size_bytes:5e8,size_gb:.47,modified_at:"2024-01-01",is_embedding:!0,embedding_dim:768,description:"Nomic AI text embeddings"}],count:2}}),listOllamaEmbeddingModels:async()=>({success:!0,data:{embedding_models:[{name:"embeddinggemma",embedding_dim:768,description:"Google's lightweight embedding model (Recommended)",size_bytes:65e7,size_gb:.621},{name:"nomic-embed-text",embedding_dim:768,description:"Popular general-purpose embeddings",size_bytes:287e6,size_gb:.274},{name:"mxbai-embed-large",embedding_dim:1024,description:"MixedBread AI large embeddings",size_bytes:701e6,size_gb:.67}],count:3}}),pullOllamaModel:async e=>({success:!0,data:{model:e,status:"completed",output:[`Pulling ${e}...`,"Pull complete"]}}),onDownloadProgress:e=>(window.__downloadProgressCallback=e,()=>{delete window.__downloadProgressCallback}),getIdeation:async()=>({success:!0,data:null}),generateIdeation:()=>{console.warn("[Browser Mock] generateIdeation called")},refreshIdeation:()=>{console.warn("[Browser Mock] refreshIdeation called")},stopIdeation:async()=>({success:!0}),updateIdeaStatus:async()=>({success:!0}),convertIdeaToTask:async()=>({success:!1,error:"Not available in browser mock"}),dismissIdea:async()=>({success:!0}),dismissAllIdeas:async()=>({success:!0}),archiveIdea:async()=>({success:!0}),deleteIdea:async()=>({success:!0}),deleteMultipleIdeas:async()=>({success:!0}),onIdeationProgress:()=>()=>{},onIdeationLog:()=>()=>{},onIdeationComplete:()=>()=>{},onIdeationError:()=>()=>{},onIdeationStopped:()=>()=>{},onIdeationTypeComplete:()=>()=>{},onIdeationTypeFailed:()=>()=>{},openExternal:async e=>{console.warn("[Browser Mock] openExternal:",e),window.open(e,"_blank")},openTerminal:async e=>(console.warn("[Browser Mock] openTerminal:",e),{success:!0})},kq={getSettings:async()=>({success:!0,data:L5}),saveSettings:async()=>({success:!0}),notifySentryStateChanged:e=>{console.warn("[browser-mock] notifySentryStateChanged called")},getSentryDsn:async()=>"",getSentryConfig:async()=>({dsn:"",tracesSampleRate:0,profilesSampleRate:0}),getCliToolsInfo:async()=>({success:!0,data:{python:{found:!1,source:"fallback",message:"Not available in browser mode"},git:{found:!1,source:"fallback",message:"Not available in browser mode"},gh:{found:!1,source:"fallback",message:"Not available in browser mode"},claude:{found:!1,source:"fallback",message:"Not available in browser mode"}}}),getAppVersion:async()=>"0.1.0-browser",checkAppUpdate:async()=>({success:!0,data:null}),downloadAppUpdate:async()=>({success:!0}),downloadStableUpdate:async()=>({success:!0}),installAppUpdate:()=>{console.warn("[browser-mock] installAppUpdate called")},getDownloadedAppUpdate:async()=>({success:!0,data:null}),onAppUpdateAvailable:()=>()=>{},onAppUpdateDownloaded:()=>()=>{},onAppUpdateProgress:()=>()=>{},onAppUpdateStableDowngrade:()=>()=>{}},Aq=typeof window<"u"&&window.electronAPI!==void 0,Eq={...xq,...vq,...bq,...yq,...wq,...kq,getRoadmap:async()=>({success:!0,data:null}),getRoadmapStatus:async()=>({success:!0,data:{isRunning:!1}}),saveRoadmap:async()=>({success:!0}),generateRoadmap:(e,t,s)=>{console.warn("[Browser Mock] generateRoadmap called")},refreshRoadmap:(e,t,s)=>{console.warn("[Browser Mock] refreshRoadmap called")},updateFeatureStatus:async()=>({success:!0}),convertFeatureToSpec:async(e,t)=>({success:!0,data:{id:`task-${Date.now()}`,specId:"",projectId:e,title:"Converted Feature",description:"Feature converted from roadmap",status:"backlog",subtasks:[],logs:[],createdAt:new Date,updatedAt:new Date}}),stopRoadmap:async()=>({success:!0}),onRoadmapProgress:()=>()=>{},onRoadmapComplete:()=>()=>{},onRoadmapError:()=>()=>{},onRoadmapStopped:()=>()=>{},...jq,...Sq,..._q,...Nq,...Cq,getAPIProfiles:async()=>({success:!0,data:{profiles:[],activeProfileId:null,version:1}}),saveAPIProfile:async e=>({success:!0,data:{id:`mock-profile-${Date.now()}`,...e,createdAt:Date.now(),updatedAt:Date.now()}}),updateAPIProfile:async e=>({success:!0,data:{...e,updatedAt:Date.now()}}),deleteAPIProfile:async e=>({success:!0}),setActiveAPIProfile:async e=>({success:!0}),testConnection:async(e,t,s)=>({success:!0,data:{success:!0,message:"Connection successful (mock)"}}),discoverModels:async(e,t,s)=>({success:!0,data:{models:[]}}),github:{getGitHubRepositories:async()=>({success:!0,data:[]}),getGitHubIssues:async()=>({success:!0,data:{issues:[],hasMore:!1}}),getGitHubIssue:async()=>({success:!0,data:null}),getIssueComments:async()=>({success:!0,data:[]}),checkGitHubConnection:async()=>({success:!0,data:{connected:!1,repoFullName:void 0,error:void 0}}),investigateGitHubIssue:()=>{},importGitHubIssues:async()=>({success:!0,data:{success:!0,imported:0,failed:0,issues:[]}}),createGitHubRelease:async()=>({success:!0,data:{url:""}}),suggestReleaseVersion:async()=>({success:!0,data:{suggestedVersion:"1.0.0",currentVersion:"0.0.0",bumpType:"minor",commitCount:0,reason:"Initial"}}),checkGitHubCli:async()=>({success:!0,data:{installed:!1}}),checkGitHubAuth:async()=>({success:!0,data:{authenticated:!1}}),startGitHubAuth:async()=>({success:!0,data:{success:!1}}),getGitHubToken:async()=>({success:!0,data:{token:""}}),getGitHubUser:async()=>({success:!0,data:{username:""}}),listGitHubUserRepos:async()=>({success:!0,data:{repos:[]}}),detectGitHubRepo:async()=>({success:!0,data:""}),getGitHubBranches:async()=>({success:!0,data:[]}),createGitHubRepo:async()=>({success:!0,data:{fullName:"",url:""}}),addGitRemote:async()=>({success:!0,data:{remoteUrl:""}}),listGitHubOrgs:async()=>({success:!0,data:{orgs:[]}}),onGitHubAuthDeviceCode:()=>()=>{},onGitHubInvestigationProgress:()=>()=>{},onGitHubInvestigationComplete:()=>()=>{},onGitHubInvestigationError:()=>()=>{},getAutoFixConfig:async()=>null,saveAutoFixConfig:async()=>!0,getAutoFixQueue:async()=>[],checkAutoFixLabels:async()=>[],checkNewIssues:async()=>[],startAutoFix:()=>{},onAutoFixProgress:()=>()=>{},onAutoFixComplete:()=>()=>{},onAutoFixError:()=>()=>{},listPRs:async()=>[],getPR:async()=>null,runPRReview:()=>{},cancelPRReview:async()=>!0,postPRReview:async()=>!0,postPRComment:async()=>!0,mergePR:async()=>!0,assignPR:async()=>!0,getPRReview:async()=>null,getPRReviewsBatch:async()=>({}),deletePRReview:async()=>!0,checkNewCommits:async()=>({hasNewCommits:!1,newCommitCount:0}),checkMergeReadiness:async()=>({isDraft:!1,mergeable:"UNKNOWN",isBehind:!1,ciStatus:"none",blockers:[]}),runFollowupReview:()=>{},getPRLogs:async()=>null,getWorkflowsAwaitingApproval:async()=>({awaiting_approval:0,workflow_runs:[],can_approve:!1}),approveWorkflow:async()=>!0,onPRReviewProgress:()=>()=>{},onPRReviewComplete:()=>()=>{},onPRReviewError:()=>()=>{},batchAutoFix:()=>{},getBatches:async()=>[],onBatchProgress:()=>()=>{},onBatchComplete:()=>()=>{},onBatchError:()=>()=>{},analyzeIssuesPreview:()=>{},approveBatches:async()=>({success:!0,batches:[]}),onAnalyzePreviewProgress:()=>()=>{},onAnalyzePreviewComplete:()=>()=>{},onAnalyzePreviewError:()=>()=>{}},checkClaudeCodeVersion:async()=>({success:!0,data:{installed:"1.0.0",latest:"1.0.0",isOutdated:!1,path:"/usr/local/bin/claude",detectionResult:{found:!0,version:"1.0.0",path:"/usr/local/bin/claude",source:"system-path",message:"Claude Code CLI found"}}}),installClaudeCode:async()=>({success:!0,data:{command:"npm install -g @anthropic-ai/claude-code"}}),getClaudeCodeVersions:async()=>({success:!0,data:{versions:["1.0.5","1.0.4","1.0.3","1.0.2","1.0.1","1.0.0"]}}),installClaudeCodeVersion:async e=>({success:!0,data:{command:`npm install -g @anthropic-ai/claude-code@${e}`,version:e}}),getClaudeCodeInstallations:async()=>({success:!0,data:{installations:[{path:"/usr/local/bin/claude",version:"1.0.0",source:"system-path",isActive:!0}],activePath:"/usr/local/bin/claude"}}),setClaudeCodeActivePath:async e=>({success:!0,data:{path:e}}),createTerminalWorktree:async()=>({success:!1,error:"Not available in browser mode"}),listTerminalWorktrees:async()=>({success:!0,data:[]}),removeTerminalWorktree:async()=>({success:!1,error:"Not available in browser mode"}),listOtherWorktrees:async()=>({success:!0,data:[]}),checkMcpHealth:async e=>({success:!0,data:{serverId:e.id,status:"unknown",message:"Health check not available in browser mode",checkedAt:new Date().toISOString()}}),testMcpConnection:async e=>({success:!0,data:{serverId:e.id,success:!1,message:"Connection test not available in browser mode"}}),getDebugInfo:async()=>({systemInfo:{appVersion:"0.0.0-browser-mock",platform:"browser",isPackaged:"false"},recentErrors:[],logsPath:"/mock/logs",debugReport:"[Browser Mock] Debug report not available in browser mode"}),openLogsFolder:async()=>({success:!1,error:"Not available in browser mode"}),copyDebugInfo:async()=>({success:!1,error:"Not available in browser mode"}),getRecentErrors:async()=>[],listLogFiles:async()=>[]};function Tq(){Aq||(console.warn("%c[Browser Mock] Initializing mock electronAPI for browser preview","color: #f0ad4e; font-weight: bold;"),window.electronAPI=Eq)}Tq();const Dt=e=>typeof e=="string",Hm=()=>{let e,t;const s=new Promise((r,i)=>{e=r,t=i});return s.resolve=e,s.reject=t,s},_P=e=>e==null?"":""+e,Pq=(e,t,s)=>{e.forEach(r=>{t[r]&&(s[r]=t[r])})},Rq=/###/g,NP=e=>e&&e.indexOf("###")>-1?e.replace(Rq,"."):e,CP=e=>!e||Dt(e),wf=(e,t,s)=>{const r=Dt(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(CP(e))return{};const a=NP(r[i]);!e[a]&&s&&(e[a]=new s),Object.prototype.hasOwnProperty.call(e,a)?e=e[a]:e={},++i}return CP(e)?{}:{obj:e,k:NP(r[i])}},kP=(e,t,s)=>{const{obj:r,k:i}=wf(e,t,Object);if(r!==void 0||t.length===1){r[i]=s;return}let a=t[t.length-1],o=t.slice(0,t.length-1),l=wf(e,o,Object);for(;l.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),l=wf(e,o,Object),l?.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=s},Dq=(e,t,s,r)=>{const{obj:i,k:a}=wf(e,t,Object);i[a]=i[a]||[],i[a].push(s)},Ov=(e,t)=>{const{obj:s,k:r}=wf(e,t);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},Iq=(e,t,s)=>{const r=Ov(e,s);return r!==void 0?r:Ov(t,s)},O5=(e,t,s)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?Dt(e[r])||e[r]instanceof String||Dt(t[r])||t[r]instanceof String?s&&(e[r]=t[r]):O5(e[r],t[r],s):e[r]=t[r]);return e},pu=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Mq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Lq=e=>Dt(e)?e.replace(/[&<>"'\/]/g,t=>Mq[t]):e;class Oq{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const s=this.regExpMap.get(t);if(s!==void 0)return s;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Fq=[" ",",","?","!",";"],Bq=new Oq(20),zq=(e,t,s)=>{t=t||"",s=s||"";const r=Fq.filter(o=>t.indexOf(o)<0&&s.indexOf(o)<0);if(r.length===0)return!0;const i=Bq.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(e);if(!a){const o=e.indexOf(s);o>0&&!i.test(e.substring(0,o))&&(a=!0)}return a},g_=(e,t,s=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(s);let i=e;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,l="";for(let u=a;u<r.length;++u)if(u!==a&&(l+=s),l+=r[u],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&u<r.length-1)continue;a+=u-a+1;break}i=o}return i},Ff=e=>e?.replace("_","-"),$q={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Fv{constructor(t,s={}){this.init(t,s)}init(t,s={}){this.prefix=s.prefix||"i18next:",this.logger=t||$q,this.options=s,this.debug=s.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,s,r,i){return i&&!this.debug?null:(Dt(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[s](t))}create(t){return new Fv(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Fv(this.logger,t)}}var to=new Fv;class Mb{constructor(){this.observers={}}on(t,s){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(s)||0;this.observers[r].set(s,i+1)}),this}off(t,s){if(this.observers[t]){if(!s){delete this.observers[t];return}this.observers[t].delete(s)}}emit(t,...s){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[t,...s])})}}class AP extends Mb{constructor(t,s={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const s=this.options.ns.indexOf(t);s>-1&&this.options.ns.splice(s,1)}getResource(t,s,r,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,s],r&&(Array.isArray(r)?l.push(...r):Dt(r)&&a?l.push(...r.split(a)):l.push(r)));const u=Ov(this.data,l);return!u&&!s&&!r&&t.indexOf(".")>-1&&(t=l[0],s=l[1],r=l.slice(2).join(".")),u||!o||!Dt(r)?u:g_(this.data?.[t]?.[s],r,a)}addResource(t,s,r,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[t,s];r&&(l=l.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(l=t.split("."),i=s,s=l[1]),this.addNamespaces(s),kP(this.data,l,i),a.silent||this.emit("added",t,s,r,i)}addResources(t,s,r,i={silent:!1}){for(const a in r)(Dt(r[a])||Array.isArray(r[a]))&&this.addResource(t,s,a,r[a],{silent:!0});i.silent||this.emit("added",t,s,r)}addResourceBundle(t,s,r,i,a,o={silent:!1,skipCopy:!1}){let l=[t,s];t.indexOf(".")>-1&&(l=t.split("."),i=r,r=s,s=l[1]),this.addNamespaces(s);let u=Ov(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?O5(u,r,a):u={...u,...r},kP(this.data,l,u),o.silent||this.emit("added",t,s,r)}removeResourceBundle(t,s){this.hasResourceBundle(t,s)&&delete this.data[t][s],this.removeNamespaces(s),this.emit("removed",t,s)}hasResourceBundle(t,s){return this.getResource(t,s)!==void 0}getResourceBundle(t,s){return s||(s=this.options.defaultNS),this.getResource(t,s)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const s=this.getDataByLanguage(t);return!!(s&&Object.keys(s)||[]).find(i=>s[i]&&Object.keys(s[i]).length>0)}toJSON(){return this.data}}var F5={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,s,r,i){return e.forEach(a=>{t=this.processors[a]?.process(t,s,r,i)??t}),t}};const B5=Symbol("i18next/PATH_KEY");function Hq(){const e=[],t=Object.create(null);let s;return t.get=(r,i)=>(s?.revoke?.(),i===B5?e:(e.push(i),s=Proxy.revocable(r,t),s.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Bv(e,t){const{[B5]:s}=e(Hq());return s.join(t?.keySeparator??".")}const EP={},Sj=e=>!Dt(e)&&typeof e!="boolean"&&typeof e!="number";class zv extends Mb{constructor(t,s={}){super(),Pq(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=to.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,s={interpolation:{}}){const r={...s};if(t==null)return!1;const i=this.resolve(t,r);if(i?.res===void 0)return!1;const a=Sj(i.res);return!(r.returnObjects===!1&&a)}extractFromKey(t,s){let r=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let a=s.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!zq(t,r,i);if(o&&!l){const u=t.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:t,namespaces:Dt(a)?[a]:a};const d=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(d[0])>-1)&&(a=d.shift()),t=d.join(i)}return{key:t,namespaces:Dt(a)?[a]:a}}translate(t,s,r){let i=typeof s=="object"?{...s}:s;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=Bv(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:u}=this.extractFromKey(t[t.length-1],i),d=u[u.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const f=i.lng||this.language,x=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return x?a?{res:`${d}${m}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${m}${l}`:a?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:l;const v=this.resolve(t,i);let y=v?.res;const w=v?.usedKey||l,S=v?.exactUsedKey||l,C=["[object Number]","[object Function]","[object RegExp]"],_=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,j=!this.i18nFormat||this.i18nFormat.handleAsObject,T=i.count!==void 0&&!Dt(i.count),E=zv.hasDefaultValue(i),A=T?this.pluralResolver.getSuffix(f,i.count,i):"",R=i.ordinal&&T?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",D=T&&!i.ordinal&&i.count===0,M=D&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${A}`]||i[`defaultValue${R}`]||i.defaultValue;let P=y;j&&!y&&E&&(P=M);const O=Sj(P),F=Object.prototype.toString.apply(P);if(j&&P&&O&&C.indexOf(F)<0&&!(Dt(_)&&Array.isArray(P))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,P,{...i,ns:u}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(v.res=$,v.usedParams=this.getUsedParamsDetails(i),v):$}if(o){const $=Array.isArray(P),z=$?[]:{},H=$?S:w;for(const I in P)if(Object.prototype.hasOwnProperty.call(P,I)){const V=`${H}${o}${I}`;E&&!y?z[I]=this.translate(V,{...i,defaultValue:Sj(M)?M[I]:void 0,joinArrays:!1,ns:u}):z[I]=this.translate(V,{...i,joinArrays:!1,ns:u}),z[I]===V&&(z[I]=P[I])}y=z}}else if(j&&Dt(_)&&Array.isArray(y))y=y.join(_),y&&(y=this.extendTranslation(y,t,i,r));else{let $=!1,z=!1;!this.isValidLookup(y)&&E&&($=!0,y=M),this.isValidLookup(y)||(z=!0,y=l);const I=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&z?void 0:y,V=E&&M!==y&&this.options.updateMissing;if(z||$||V){if(this.logger.log(V?"updateKey":"missingKey",f,d,l,V?M:y),o){const G=this.resolve(l,{...i,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let G=0;G<K.length;G++)B.push(K[G]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(i.lng||this.language):B.push(i.lng||this.language);const L=(G,Y,q)=>{const Q=E&&q!==y?q:I;this.options.missingKeyHandler?this.options.missingKeyHandler(G,d,Y,Q,V,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(G,d,Y,Q,V,i),this.emit("missingKey",G,d,Y,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?B.forEach(G=>{const Y=this.pluralResolver.getSuffixes(G,i);D&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(q=>{L([G],l+q,i[`defaultValue${q}`]||M)})}):L(B,l,M))}y=this.extendTranslation(y,t,i,v,r),z&&y===l&&this.options.appendNamespaceToMissingKey&&(y=`${d}${m}${l}`),(z||$)&&this.options.parseMissingKeyHandler&&(y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${m}${l}`:l,$?y:void 0,i))}return a?(v.res=y,v.usedParams=this.getUsedParamsDetails(i),v):y}extendTranslation(t,s,r,i,a){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=Dt(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const f=t.match(this.interpolator.nestingRegexp);d=f&&f.length}let m=r.replace&&!Dt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,r.lng||this.language||i.usedLng,r),u){const f=t.match(this.interpolator.nestingRegexp),x=f&&f.length;d<x&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>a?.[0]===f[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${s[0]}`),null):this.translate(...f,s),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=Dt(o)?[o]:o;return t!=null&&l?.length&&r.applyPostProcessor!==!1&&(t=F5.handle(l,t,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,s={}){let r,i,a,o,l;return Dt(t)&&(t=[t]),t.forEach(u=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(u,s),m=d.key;i=m;let f=d.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const x=s.count!==void 0&&!Dt(s.count),v=x&&!s.ordinal&&s.count===0,y=s.context!==void 0&&(Dt(s.context)||typeof s.context=="number")&&s.context!=="",w=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);f.forEach(S=>{this.isValidLookup(r)||(l=S,!EP[`${w[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(EP[`${w[0]}-${S}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(C=>{if(this.isValidLookup(r))return;o=C;const _=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(_,m,C,S,s);else{let T;x&&(T=this.pluralResolver.getSuffix(C,s.count,s));const E=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(s.ordinal&&T.indexOf(A)===0&&_.push(m+T.replace(A,this.options.pluralSeparator)),_.push(m+T),v&&_.push(m+E)),y){const R=`${m}${this.options.contextSeparator||"_"}${s.context}`;_.push(R),x&&(s.ordinal&&T.indexOf(A)===0&&_.push(R+T.replace(A,this.options.pluralSeparator)),_.push(R+T),v&&_.push(R+E))}}let j;for(;j=_.pop();)this.isValidLookup(r)||(a=j,r=this.getResource(C,S,j,s))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,s,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,s,r,i):this.resourceStore.getResource(t,s,r,i)}getUsedParamsDetails(t={}){const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!Dt(t.replace);let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of s)delete i[a]}return i}static hasDefaultValue(t){const s="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s===r.substring(0,s.length)&&t[r]!==void 0)return!0;return!1}}class TP{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=to.create("languageUtils")}getScriptPartFromCode(t){if(t=Ff(t),!t||t.indexOf("-")<0)return null;const s=t.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(t){if(t=Ff(t),!t||t.indexOf("-")<0)return t;const s=t.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(t){if(Dt(t)&&t.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(t)[0]}catch{}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let s;return t.forEach(r=>{if(s)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(s=i)}),!s&&this.options.supportedLngs&&t.forEach(r=>{if(s)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return s=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return s=a;s=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(t,s){if(!t)return[];if(typeof t=="function"&&(t=t(s)),Dt(t)&&(t=[t]),Array.isArray(t))return t;if(!s)return t.default||[];let r=t[s];return r||(r=t[this.getScriptPartFromCode(s)]),r||(r=t[this.formatLanguageCode(s)]),r||(r=t[this.getLanguagePartFromCode(s)]),r||(r=t.default),r||[]}toResolveHierarchy(t,s){const r=this.getFallbackCodes((s===!1?[]:s)||this.options.fallbackLng||[],t),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Dt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):Dt(t)&&a(this.formatLanguageCode(t)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const PP={zero:0,one:1,two:2,few:3,many:4,other:5},RP={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Uq{constructor(t,s={}){this.languageUtils=t,this.options=s,this.logger=to.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,s){this.rules[t]=s}clearCache(){this.pluralRulesCache={}}getRule(t,s={}){const r=Ff(t==="dev"?"en":t),i=s.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),RP;if(!t.match(/-|_/))return RP;const u=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(u,s)}return this.pluralRulesCache[a]=o,o}needsPlural(t,s={}){let r=this.getRule(t,s);return r||(r=this.getRule("dev",s)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,s,r={}){return this.getSuffixes(t,r).map(i=>`${s}${i}`)}getSuffixes(t,s={}){let r=this.getRule(t,s);return r||(r=this.getRule("dev",s)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>PP[i]-PP[a]).map(i=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,s,r={}){const i=this.getRule(t,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(s)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",s,r))}}const DP=(e,t,s,r=".",i=!0)=>{let a=Iq(e,t,s);return!a&&i&&Dt(s)&&(a=g_(e,s,r),a===void 0&&(a=g_(t,s,r))),a},_j=e=>e.replace(/\$/g,"$$$$");class IP{constructor(t={}){this.logger=to.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(s=>s),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:s,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:l,suffixEscaped:u,formatSeparator:d,unescapeSuffix:m,unescapePrefix:f,nestingPrefix:x,nestingPrefixEscaped:v,nestingSuffix:y,nestingSuffixEscaped:w,nestingOptionsSeparator:S,maxReplaces:C,alwaysFormat:_}=t.interpolation;this.escape=s!==void 0?s:Lq,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?pu(a):o||"{{",this.suffix=l?pu(l):u||"}}",this.formatSeparator=d||",",this.unescapePrefix=m?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=x?pu(x):v||pu("$t("),this.nestingSuffix=y?pu(y):w||pu(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=C||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(s,r)=>s?.source===r?(s.lastIndex=0,s):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,s,r,i){let a,o,l;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=v=>{if(v.indexOf(this.formatSeparator)<0){const C=DP(s,u,v,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,r,{...i,...s,interpolationkey:v}):C}const y=v.split(this.formatSeparator),w=y.shift().trim(),S=y.join(this.formatSeparator).trim();return this.format(DP(s,u,w,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...i,...s,interpolationkey:w})};this.resetRegExp();const m=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:v=>_j(v)},{regex:this.regexp,safeValue:v=>this.escapeValue?_j(this.escape(v)):_j(v)}].forEach(v=>{for(l=0;a=v.regex.exec(t);){const y=a[1].trim();if(o=d(y),o===void 0)if(typeof m=="function"){const S=m(t,a,i);o=Dt(S)?S:""}else if(i&&Object.prototype.hasOwnProperty.call(i,y))o="";else if(f){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${t}`),o="";else!Dt(o)&&!this.useRawValueToEscape&&(o=_P(o));const w=v.safeValue(o);if(t=t.replace(a[0],w),f?(v.regex.lastIndex+=o.length,v.regex.lastIndex-=a[0].length):v.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,s,r={}){let i,a,o;const l=(u,d)=>{const m=this.nestingOptionsSeparator;if(u.indexOf(m)<0)return u;const f=u.split(new RegExp(`${m}[ ]*{`));let x=`{${f[1]}`;u=f[0],x=this.interpolate(x,o);const v=x.match(/'/g),y=x.match(/"/g);((v?.length??0)%2===0&&!y||y.length%2!==0)&&(x=x.replace(/'/g,'"'));try{o=JSON.parse(x),d&&(o={...d,...o})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,w),`${u}${m}${x}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,u};for(;i=this.nestingRegexp.exec(t);){let u=[];o={...r},o=o.replace&&!Dt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(u=i[1].slice(d).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),a=s(l.call(this,i[1].trim(),o),o),a&&i[0]===t&&!Dt(a))return a;Dt(a)||(a=_P(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),a=""),u.length&&(a=u.reduce((m,f)=>this.format(m,f,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),t=t.replace(i[0],a),this.regexp.lastIndex=0}return t}}const Gq=e=>{let t=e.toLowerCase().trim();const s={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...u]=o.split(":"),d=u.join(":").trim().replace(/^'+|'+$/g,""),m=l.trim();s[m]||(s[m]=d),d==="false"&&(s[m]=!1),d==="true"&&(s[m]=!0),isNaN(d)||(s[m]=parseInt(d,10))}})}return{formatName:t,formatOptions:s}},MP=e=>{const t={};return(s,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let l=t[o];return l||(l=e(Ff(r),i),t[o]=l),l(s)}},Vq=e=>(t,s,r)=>e(Ff(s),r)(t);class qq{constructor(t={}){this.logger=to.create("formatter"),this.options=t,this.init(t)}init(t,s={interpolation:{}}){this.formatSeparator=s.interpolation.formatSeparator||",";const r=s.cacheInBuiltFormats?MP:Vq;this.formats={number:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return l=>o.format(l)}),currency:r((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return l=>o.format(l)}),datetime:r((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return l=>o.format(l)}),relativetime:r((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return l=>o.format(l,a.range||"day")}),list:r((i,a)=>{const o=new Intl.ListFormat(i,{...a});return l=>o.format(l)})}}add(t,s){this.formats[t.toLowerCase().trim()]=s}addCached(t,s){this.formats[t.toLowerCase().trim()]=MP(s)}format(t,s,r,i={}){const a=s.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(u=>u.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,u)=>{const{formatName:d,formatOptions:m}=Gq(u);if(this.formats[d]){let f=l;try{const x=i?.formatParams?.[i.interpolationkey]||{},v=x.locale||x.lng||i.locale||i.lng||r;f=this.formats[d](l,v,{...m,...i,...x})}catch(x){this.logger.warn(x)}return f}else this.logger.warn(`there was no format function for ${d}`);return l},t)}}const Wq=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Kq extends Mb{constructor(t,s,r,i={}){super(),this.backend=t,this.store=s,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=to.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(t,s,r,i){const a={},o={},l={},u={};return t.forEach(d=>{let m=!0;s.forEach(f=>{const x=`${d}|${f}`;!r.reload&&this.store.hasResourceBundle(d,f)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?o[x]===void 0&&(o[x]=!0):(this.state[x]=1,m=!1,o[x]===void 0&&(o[x]=!0),a[x]===void 0&&(a[x]=!0),u[f]===void 0&&(u[f]=!0)))}),m||(l[d]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(u)}}loaded(t,s,r){const i=t.split("|"),a=i[0],o=i[1];s&&this.emit("failedLoading",a,o,s),!s&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=s?-1:2,s&&r&&(this.state[t]=0);const l={};this.queue.forEach(u=>{Dq(u.loaded,[a],o),Wq(u,t),s&&u.errors.push(s),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(d=>{l[d]||(l[d]={});const m=u.loaded[d];m.length&&m.forEach(f=>{l[d][f]===void 0&&(l[d][f]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(u=>!u.done)}read(t,s,r,i=0,a=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:s,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const l=(d,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(d&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,s,r,i+1,a*2,o)},a);return}o(d,m)},u=this.backend[r].bind(this.backend);if(u.length===2){try{const d=u(t,s);d&&typeof d.then=="function"?d.then(m=>l(null,m)).catch(l):l(null,d)}catch(d){l(d)}return}return u(t,s,l)}prepareLoading(t,s,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Dt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Dt(s)&&(s=[s]);const a=this.queueLoad(t,s,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(t,s,r){this.prepareLoading(t,s,{},r)}reload(t,s,r){this.prepareLoading(t,s,{reload:!0},r)}loadOne(t,s=""){const r=t.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${s}loading namespace ${a} for language ${i} failed`,o),!o&&l&&this.logger.log(`${s}loaded namespace ${a} for language ${i}`,l),this.loaded(t,o,l)})}saveMissing(t,s,r,i,a,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${r}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const u={...o,isUpdate:a},d=this.backend.create.bind(this.backend);if(d.length<6)try{let m;d.length===5?m=d(t,s,r,i,u):m=d(t,s,r,i),m&&typeof m.then=="function"?m.then(f=>l(null,f)).catch(l):l(null,m)}catch(m){l(m)}else d(t,s,r,i,l,u)}!t||!t[0]||this.store.addResource(t[0],s,r,i)}}}const LP=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),Dt(e[1])&&(t.defaultValue=e[1]),Dt(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const s=e[3]||e[2];Object.keys(s).forEach(r=>{t[r]=s[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),OP=e=>(Dt(e.ns)&&(e.ns=[e.ns]),Dt(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Dt(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),gx=()=>{},Yq=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(s=>{typeof e[s]=="function"&&(e[s]=e[s].bind(e))})};class jf extends Mb{constructor(t={},s){if(super(),this.options=OP(t),this.services={},this.logger=to,this.modules={external:[]},Yq(this),s&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,s),this;setTimeout(()=>{this.init(t,s)},0)}}init(t={},s){this.isInitializing=!0,typeof t=="function"&&(s=t,t={}),t.defaultNS==null&&t.ns&&(Dt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=LP();this.options={...r,...this.options,...OP(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?to.init(i(this.modules.logger),this.options):to.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=qq;const m=new TP(this.options);this.store=new AP(this.options.resources,this.options);const f=this.services;f.logger=to,f.resourceStore=this.store,f.languageUtils=m,f.pluralResolver=new Uq(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=i(d),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new IP(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Kq(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(v,...y)=>{this.emit(v,...y)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new zv(this.services,this.options),this.translator.on("*",(v,...y)=>{this.emit(v,...y)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,s||(s=gx),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...m)=>this.store[d](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...m)=>(this.store[d](...m),this)});const l=Hm(),u=()=>{const d=(m,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),s(m,f)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),l}loadResources(t,s=gx){let r=s;const i=Dt(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&a.indexOf(d)<0&&a.push(d)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>o(u)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(t,s,r){const i=Hm();return typeof t=="function"&&(r=t,t=void 0),typeof s=="function"&&(r=s,s=void 0),t||(t=this.languages),s||(s=this.options.ns),r||(r=gx),this.services.backendConnector.reload(t,s,a=>{i.resolve(),r(a)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&F5.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let s=0;s<this.languages.length;s++){const r=this.languages[s];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,s){this.isLanguageChangingTo=t;const r=Hm();this.emit("languageChanging",t);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?this.isLanguageChangingTo===t&&(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve((...d)=>this.t(...d)),s&&s(l,(...d)=>this.t(...d))},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=Dt(l)?l:l&&l[0],d=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(Dt(l)?[l]:l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,m=>{a(m,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,s,r){const i=(a,o,...l)=>{let u;typeof o!="object"?u=this.options.overloadTranslationOptionHandler([a,o].concat(l)):u={...o},u.lng=u.lng||i.lng,u.lngs=u.lngs||i.lngs,u.ns=u.ns||i.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||r||i.keyPrefix);const d=this.options.keySeparator||".";let m;return u.keyPrefix&&Array.isArray(a)?m=a.map(f=>(typeof f=="function"&&(f=Bv(f,{...this.options,...o})),`${u.keyPrefix}${d}${f}`)):(typeof a=="function"&&(a=Bv(a,{...this.options,...o})),m=u.keyPrefix?`${u.keyPrefix}${d}${a}`:a),this.t(m,u)};return Dt(t)?i.lng=t:i.lngs=t,i.ns=s,i.keyPrefix=r,i}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,s={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=s.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,u)=>{const d=this.services.backendConnector.state[`${l}|${u}`];return d===-1||d===0||d===2};if(s.precheck){const l=s.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!i||o(a,t)))}loadNamespaces(t,s){const r=Hm();return this.options.ns?(Dt(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),s&&s(i)}),r):(s&&s(),Promise.resolve())}loadLanguages(t,s){const r=Hm();Dt(t)&&(t=[t]);const i=this.options.preload||[],a=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),s&&s(o)}),r):(s&&s(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const i=new Intl.Locale(t);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new TP(LP());return t.toLowerCase().indexOf("-latn")>1?"ltr":s.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},s){const r=new jf(t,s);return r.createInstance=jf.createInstance,r}cloneInstance(t={},s=gx){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},a=new jf(i);if((t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const l=Object.keys(this.store.data).reduce((u,d)=>(u[d]={...this.store.data[d]},u[d]=Object.keys(u[d]).reduce((m,f)=>(m[f]={...u[d][f]},m),u[d]),u),{});a.store=new AP(l,i),a.services.resourceStore=a.store}return t.interpolation&&(a.services.interpolator=new IP(i)),a.translator=new zv(a.services,i),a.translator.on("*",(l,...u)=>{a.emit(l,...u)}),a.init(i,s),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Jr=jf.createInstance();Jr.createInstance;Jr.dir;Jr.init;Jr.loadResources;Jr.reloadResources;Jr.use;Jr.changeLanguage;Jr.getFixedT;Jr.t;Jr.exists;Jr.setDefaultNamespace;Jr.hasLoadedNamespace;Jr.loadNamespaces;Jr.loadLanguages;var Nj={exports:{}},Mt={};var FP;function Xq(){if(FP)return Mt;FP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),x=Symbol.iterator;function v(G){return G===null||typeof G!="object"?null:(G=x&&G[x]||G["@@iterator"],typeof G=="function"?G:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(G,Y,q){this.props=G,this.context=Y,this.refs=S,this.updater=q||y}C.prototype.isReactComponent={},C.prototype.setState=function(G,Y){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Y,"setState")},C.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function _(){}_.prototype=C.prototype;function j(G,Y,q){this.props=G,this.context=Y,this.refs=S,this.updater=q||y}var T=j.prototype=new _;T.constructor=j,w(T,C.prototype),T.isPureReactComponent=!0;var E=Array.isArray;function A(){}var R={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function M(G,Y,q){var Q=q.ref;return{$$typeof:e,type:G,key:Y,ref:Q!==void 0?Q:null,props:q}}function P(G,Y){return M(G.type,Y,G.props)}function O(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function F(G){var Y={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(q){return Y[q]})}var $=/\/+/g;function z(G,Y){return typeof G=="object"&&G!==null&&G.key!=null?F(""+G.key):Y.toString(36)}function H(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(A,A):(G.status="pending",G.then(function(Y){G.status==="pending"&&(G.status="fulfilled",G.value=Y)},function(Y){G.status==="pending"&&(G.status="rejected",G.reason=Y)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function I(G,Y,q,Q,se){var te=typeof G;(te==="undefined"||te==="boolean")&&(G=null);var ee=!1;if(G===null)ee=!0;else switch(te){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(G.$$typeof){case e:case t:ee=!0;break;case m:return ee=G._init,I(ee(G._payload),Y,q,Q,se)}}if(ee)return se=se(G),ee=Q===""?"."+z(G,0):Q,E(se)?(q="",ee!=null&&(q=ee.replace($,"$&/")+"/"),I(se,Y,q,"",function(re){return re})):se!=null&&(O(se)&&(se=P(se,q+(se.key==null||G&&G.key===se.key?"":(""+se.key).replace($,"$&/")+"/")+ee)),Y.push(se)),1;ee=0;var pe=Q===""?".":Q+":";if(E(G))for(var fe=0;fe<G.length;fe++)Q=G[fe],te=pe+z(Q,fe),ee+=I(Q,Y,q,te,se);else if(fe=v(G),typeof fe=="function")for(G=fe.call(G),fe=0;!(Q=G.next()).done;)Q=Q.value,te=pe+z(Q,fe++),ee+=I(Q,Y,q,te,se);else if(te==="object"){if(typeof G.then=="function")return I(H(G),Y,q,Q,se);throw Y=String(G),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ee}function V(G,Y,q){if(G==null)return G;var Q=[],se=0;return I(G,Q,"","",function(te){return Y.call(q,te,se++)}),Q}function B(G){if(G._status===-1){var Y=G._result;Y=Y(),Y.then(function(q){(G._status===0||G._status===-1)&&(G._status=1,G._result=q)},function(q){(G._status===0||G._status===-1)&&(G._status=2,G._result=q)}),G._status===-1&&(G._status=0,G._result=Y)}if(G._status===1)return G._result.default;throw G._result}var K=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},L={map:V,forEach:function(G,Y,q){V(G,function(){Y.apply(this,arguments)},q)},count:function(G){var Y=0;return V(G,function(){Y++}),Y},toArray:function(G){return V(G,function(Y){return Y})||[]},only:function(G){if(!O(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Mt.Activity=f,Mt.Children=L,Mt.Component=C,Mt.Fragment=s,Mt.Profiler=i,Mt.PureComponent=j,Mt.StrictMode=r,Mt.Suspense=u,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},Mt.cache=function(G){return function(){return G.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(G,Y,q){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var Q=w({},G.props),se=G.key;if(Y!=null)for(te in Y.key!==void 0&&(se=""+Y.key),Y)!D.call(Y,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&Y.ref===void 0||(Q[te]=Y[te]);var te=arguments.length-2;if(te===1)Q.children=q;else if(1<te){for(var ee=Array(te),pe=0;pe<te;pe++)ee[pe]=arguments[pe+2];Q.children=ee}return M(G.type,se,Q)},Mt.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Mt.createElement=function(G,Y,q){var Q,se={},te=null;if(Y!=null)for(Q in Y.key!==void 0&&(te=""+Y.key),Y)D.call(Y,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=Y[Q]);var ee=arguments.length-2;if(ee===1)se.children=q;else if(1<ee){for(var pe=Array(ee),fe=0;fe<ee;fe++)pe[fe]=arguments[fe+2];se.children=pe}if(G&&G.defaultProps)for(Q in ee=G.defaultProps,ee)se[Q]===void 0&&(se[Q]=ee[Q]);return M(G,te,se)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(G){return{$$typeof:l,render:G}},Mt.isValidElement=O,Mt.lazy=function(G){return{$$typeof:m,_payload:{_status:-1,_result:G},_init:B}},Mt.memo=function(G,Y){return{$$typeof:d,type:G,compare:Y===void 0?null:Y}},Mt.startTransition=function(G){var Y=R.T,q={};R.T=q;try{var Q=G(),se=R.S;se!==null&&se(q,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(A,K)}catch(te){K(te)}finally{Y!==null&&q.types!==null&&(Y.types=q.types),R.T=Y}},Mt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Mt.use=function(G){return R.H.use(G)},Mt.useActionState=function(G,Y,q){return R.H.useActionState(G,Y,q)},Mt.useCallback=function(G,Y){return R.H.useCallback(G,Y)},Mt.useContext=function(G){return R.H.useContext(G)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(G,Y){return R.H.useDeferredValue(G,Y)},Mt.useEffect=function(G,Y){return R.H.useEffect(G,Y)},Mt.useEffectEvent=function(G){return R.H.useEffectEvent(G)},Mt.useId=function(){return R.H.useId()},Mt.useImperativeHandle=function(G,Y,q){return R.H.useImperativeHandle(G,Y,q)},Mt.useInsertionEffect=function(G,Y){return R.H.useInsertionEffect(G,Y)},Mt.useLayoutEffect=function(G,Y){return R.H.useLayoutEffect(G,Y)},Mt.useMemo=function(G,Y){return R.H.useMemo(G,Y)},Mt.useOptimistic=function(G,Y){return R.H.useOptimistic(G,Y)},Mt.useReducer=function(G,Y,q){return R.H.useReducer(G,Y,q)},Mt.useRef=function(G){return R.H.useRef(G)},Mt.useState=function(G){return R.H.useState(G)},Mt.useSyncExternalStore=function(G,Y,q){return R.H.useSyncExternalStore(G,Y,q)},Mt.useTransition=function(){return R.H.useTransition()},Mt.version="19.2.3",Mt}var BP;function Lb(){return BP||(BP=1,Nj.exports=Xq()),Nj.exports}var p=Lb();const Vt=gh(p),OC=V9({__proto__:null,default:Vt},[p]);var Cj,zP;function Zq(){return zP||(zP=1,Cj={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Cj}var Qq=Zq();const Jq=gh(Qq);var eW=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function $P(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},s=e.match(/<\/?([^\s]+?)[/\s>]/);if(s&&(t.name=s[1],(Jq[s[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(eW),a=null;(a=i.exec(e))!==null;)if(a[0].trim())if(a[1]){var o=a[1].trim(),l=[o,""];o.indexOf("=")>-1&&(l=o.split("=")),t.attrs[l[0]]=l[1],i.lastIndex--}else a[2]&&(t.attrs[a[2]]=a[3].trim().substring(1,a[3].length-1));return t}var tW=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,sW=/^\s*$/,nW=Object.create(null);function z5(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?(function(s){var r=[];for(var i in s)r.push(i+'="'+s[i]+'"');return r.length?" "+r.join(" "):""})(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(z5,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var rW={parse:function(e,t){t||(t={}),t.components||(t.components=nW);var s,r=[],i=[],a=-1,o=!1;if(e.indexOf("<")!==0){var l=e.indexOf("<");r.push({type:"text",content:l===-1?e:e.substring(0,l)})}return e.replace(tW,function(u,d){if(o){if(u!=="</"+s.name+">")return;o=!1}var m,f=u.charAt(1)!=="/",x=u.startsWith("<!--"),v=d+u.length,y=e.charAt(v);if(x){var w=$P(u);return a<0?(r.push(w),r):((m=i[a]).children.push(w),r)}if(f&&(a++,(s=$P(u)).type==="tag"&&t.components[s.name]&&(s.type="component",o=!0),s.voidElement||o||!y||y==="<"||s.children.push({type:"text",content:e.slice(v,e.indexOf("<",v))}),a===0&&r.push(s),(m=i[a-1])&&m.children.push(s),i[a]=s),(!f||s.voidElement)&&(a>-1&&(s.voidElement||s.name===u.slice(2,-1))&&(a--,s=a===-1?r:i[a]),!o&&y!=="<"&&y)){m=a===-1?r:i[a].children;var S=e.indexOf("<",v),C=e.slice(v,S===-1?void 0:S);sW.test(C)&&(C=" "),(S>-1&&a+m.length>=0||C!==" ")&&m.push({type:"text",content:C})}}),r},stringify:function(e){return e.reduce(function(t,s){return t+z5("",s)},"")}};const nv=(e,t,s,r)=>{const i=[s,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);fi(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},HP={},Ob=(e,t,s,r)=>{fi(s)&&HP[s]||(fi(s)&&(HP[s]=new Date),nv(e,t,s,r))},$5=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},x_=(e,t,s)=>{e.loadNamespaces(t,$5(e,s))},UP=(e,t,s,r)=>{if(fi(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return x_(e,s,r);s.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,$5(e,r))},iW=(e,t,s={})=>!t.languages||!t.languages.length?(Ob(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),fi=e=>typeof e=="string",tl=e=>typeof e=="object"&&e!==null,aW=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oW={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lW=e=>oW[e],H5=e=>e.replace(aW,lW);let v_={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:H5,transDefaultProps:void 0};const cW=(e={})=>{v_={...v_,...e}},FC=()=>v_;let U5;const dW=e=>{U5=e},BC=()=>U5,rv=(e,t)=>{if(!e)return!1;const s=e.props?.children??e.children;return t?s.length>0:!!s},iv=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?Kc(t):t},uW=e=>Array.isArray(e)&&e.every(p.isValidElement),Kc=e=>Array.isArray(e)?e:[e],hW=(e,t)=>{const s={...t};return s.props=Object.assign(e.props,t.props),s},mW=e=>{const t={};if(!e)return t;const s=r=>{Kc(r).forEach(a=>{fi(a)||(rv(a)?s(iv(a)):tl(a)&&!p.isValidElement(a)&&Object.assign(t,a))})};return s(e),t},G5=(e,t,s,r)=>{if(!e)return"";let i="";const a=Kc(e),o=t?.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return a.forEach((l,u)=>{if(fi(l)){i+=`${l}`;return}if(p.isValidElement(l)){const{props:d,type:m}=l,f=Object.keys(d).length,x=o.indexOf(m)>-1,v=d.children;if(!v&&x&&!f){i+=`<${m}/>`;return}if(!v&&(!x||f)||d.i18nIsDynamicList){i+=`<${u}></${u}>`;return}if(x&&f===1&&fi(v)){i+=`<${m}>${v}</${m}>`;return}const y=G5(v,t,s,r);i+=`<${u}>${y}</${u}>`;return}if(l===null){nv(s,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(tl(l)){const{format:d,...m}=l,f=Object.keys(m);if(f.length===1){const x=d?`${f[0]}, ${d}`:f[0];i+=`{{${x}}}`;return}nv(s,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:l});return}nv(s,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:l})}),i},fW=(e,t=[],s={})=>{if(!e)return e;const r=Object.keys(s),i=[...t,...r];let a="",o=0;for(;o<e.length;)if(e[o]==="<"){let l=!1;const u=e.slice(o).match(/^<\/(\d+|[a-zA-Z][a-zA-Z0-9-]*)>/);if(u){const d=u[1];(/^\d+$/.test(d)||i.includes(d))&&(l=!0,a+=u[0],o+=u[0].length)}if(!l){const d=e.slice(o).match(/^<(\d+|[a-zA-Z][a-zA-Z0-9-]*)(\s+[\w-]+(?:=(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s*(\/)?>/);if(d){const m=d[1];(/^\d+$/.test(m)||i.includes(m))&&(l=!0,a+=d[0],o+=d[0].length)}}l||(a+="&lt;",o+=1)}else a+=e[o],o+=1;return a},pW=(e,t,s,r,i,a,o)=>{if(s==="")return[];const l=i.transKeepBasicHtmlNodesFor||[],u=s&&new RegExp(l.map(_=>`<${_}`).join("|")).test(s);if(!e&&!t&&!u&&!o)return[s];const d=t??{},m=_=>{Kc(_).forEach(T=>{fi(T)||(rv(T)?m(iv(T)):tl(T)&&!p.isValidElement(T)&&Object.assign(d,T))})};m(e);const f=fW(s,l,d),x=rW.parse(`<0>${f}</0>`),v={...d,...a},y=(_,j,T)=>{const E=iv(_),A=S(E,j.children,T);return uW(E)&&A.length===0||_.props?.i18nIsDynamicList?E:A},w=(_,j,T,E,A)=>{_.dummy?(_.children=j,T.push(p.cloneElement(_,{key:E},A?void 0:j))):T.push(...p.Children.map([_],R=>{const D="data-i18n-is-dynamic-list",M={key:E,[D]:void 0};return R&&R.props&&Object.keys(R.props).forEach(P=>{P==="ref"||P==="children"||P==="i18nIsDynamicList"||P===D||(M[P]=R.props[P])}),p.cloneElement(R,M,A?null:j)}))},S=(_,j,T)=>{const E=Kc(_);return Kc(j).reduce((R,D,M)=>{const P=D.children?.[0]?.content&&r.services.interpolator.interpolate(D.children[0].content,v,r.language);if(D.type==="tag"){let O=E[parseInt(D.name,10)];!O&&t&&(O=t[D.name]),T.length===1&&!O&&(O=T[0][D.name]),O||(O={});const F={...D.attrs};o&&Object.keys(F).forEach(B=>{const K=F[B];fi(K)&&(F[B]=H5(K))});const $=Object.keys(F).length!==0?hW({props:F},O):O,z=p.isValidElement($),H=z&&rv(D,!0)&&!D.voidElement,I=u&&tl($)&&$.dummy&&!z,V=tl(t)&&Object.hasOwnProperty.call(t,D.name);if(fi($)){const B=r.services.interpolator.interpolate($,v,r.language);R.push(B)}else if(rv($)||H){const B=y($,D,T);w($,B,R,M)}else if(I){const B=S(E,D.children,T);w($,B,R,M)}else if(Number.isNaN(parseFloat(D.name)))if(V){const B=y($,D,T);w($,B,R,M,D.voidElement)}else if(i.transSupportBasicHtmlNodes&&l.indexOf(D.name)>-1)if(D.voidElement)R.push(p.createElement(D.name,{key:`${D.name}-${M}`}));else{const B=S(E,D.children,T);R.push(p.createElement(D.name,{key:`${D.name}-${M}`},B))}else if(D.voidElement)R.push(`<${D.name} />`);else{const B=S(E,D.children,T);R.push(`<${D.name}>${B}</${D.name}>`)}else if(tl($)&&!z){const B=D.children[0]?P:null;B&&R.push(B)}else w($,P,R,M,D.children.length!==1||!P)}else if(D.type==="text"){const O=i.transWrapTextNodes,F=typeof i.unescape=="function"?i.unescape:FC().unescape,$=o?F(r.services.interpolator.interpolate(D.content,v,r.language)):r.services.interpolator.interpolate(D.content,v,r.language);O?R.push(p.createElement(O,{key:`${D.name}-${M}`},$)):R.push($)}return R},[])},C=S([{dummy:!0,children:e||[]}],x,Kc(e||[]));return iv(C[0])},V5=(e,t,s)=>{const r=e.key||t,i=p.cloneElement(e,{key:r});if(!i.props||!i.props.children||s.indexOf(`${t}/>`)<0&&s.indexOf(`${t} />`)<0)return i;function a(){return p.createElement(p.Fragment,null,i)}return p.createElement(a,{key:r})},gW=(e,t)=>e.map((s,r)=>V5(s,r,t)),xW=(e,t)=>{const s={};return Object.keys(e).forEach(r=>{Object.assign(s,{[r]:V5(e[r],r,t)})}),s},vW=(e,t,s,r)=>e?Array.isArray(e)?gW(e,t):tl(e)?xW(e,t):(Ob(s,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,bW=e=>!tl(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,s)=>t&&Number.isNaN(Number.parseFloat(s)),!0);function yW({children:e,count:t,parent:s,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:u,ns:d,i18n:m,t:f,shouldUnescape:x,...v}){const y=m||BC();if(!y)return Ob(y,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const w=f||y.t.bind(y)||(L=>L),S={...FC(),...y.options?.react};let C=d||w.ns||y.options?.defaultNS;C=fi(C)?[C]:C||["translation"];const{transDefaultProps:_}=S,j=_?.tOptions?{..._.tOptions,...a}:a,T=x??_?.shouldUnescape,E=_?.values?{..._.values,...o}:o,A=_?.components?{..._.components,...u}:u,R=G5(e,S,y,r),D=l||j?.defaultValue||R||S.transEmptyNodeValue||(typeof r=="function"?Bv(r):r),{hashTransKey:M}=S,P=r||(M?M(R||D):R||D);y.options?.interpolation?.defaultVariables?o=E&&Object.keys(E).length>0?{...E,...y.options.interpolation.defaultVariables}:{...y.options.interpolation.defaultVariables}:o=E;const O=mW(e);O&&typeof O.count=="number"&&t===void 0&&(t=O.count);const F=o||t!==void 0&&!y.options?.interpolation?.alwaysFormat||!e?j.interpolation:{interpolation:{...j.interpolation,prefix:"#$?",suffix:"?$#"}},$={...j,context:i||j.context,count:t,...o,...F,defaultValue:D,ns:C};let z=P?w(P,$):D;z===P&&D&&(z=D);const H=vW(A,z,y,r);let I=H||e,V=null;bW(H)&&(V=H,I=e);const B=pW(I,V,z,y,S,$,T),K=s??S.defaultTransParent;return K?p.createElement(K,v,B):B}const wW={type:"3rdParty",init(e){cW(e.options.react),dW(e)}},q5=p.createContext();class jW{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function SW({children:e,count:t,parent:s,i18nKey:r,context:i,tOptions:a={},values:o,defaults:l,components:u,ns:d,i18n:m,t:f,shouldUnescape:x,...v}){const{i18n:y,defaultNS:w}=p.useContext(q5)||{},S=m||y||BC(),C=f||S?.t.bind(S);return yW({children:e,count:t,parent:s,i18nKey:r,context:i,tOptions:a,values:o,defaults:l,components:u,ns:d||C?.ns||w||S?.options?.defaultNS,i18n:S,t:f,shouldUnescape:x,...v})}var kj={exports:{}},Aj={};var GP;function _W(){if(GP)return Aj;GP=1;var e=Lb();function t(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var s=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(f,x){var v=x(),y=r({inst:{value:v,getSnapshot:x}}),w=y[0].inst,S=y[1];return a(function(){w.value=v,w.getSnapshot=x,u(w)&&S({inst:w})},[f,v,x]),i(function(){return u(w)&&S({inst:w}),f(function(){u(w)&&S({inst:w})})},[f]),o(v),v}function u(f){var x=f.getSnapshot;f=f.value;try{var v=x();return!s(f,v)}catch{return!0}}function d(f,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Aj.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Aj}var VP;function NW(){return VP||(VP=1,kj.exports=_W()),kj.exports}var CW=NW();const kW=(e,t)=>fi(t)?t:tl(t)&&fi(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,AW={t:kW,ready:!1},EW=()=>()=>{},Re=(e,t={})=>{const{i18n:s}=t,{i18n:r,defaultNS:i}=p.useContext(q5)||{},a=s||r||BC();a&&!a.reportNamespaces&&(a.reportNamespaces=new jW),a||Ob(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=p.useMemo(()=>({...FC(),...a?.options?.react,...t}),[a,t]),{useSuspense:l,keyPrefix:u}=o,d=e||i||a?.options?.defaultNS,m=fi(d)?[d]:d||["translation"],f=p.useMemo(()=>m,m);a?.reportNamespaces?.addUsedNamespaces?.(f);const x=p.useRef(0),v=p.useCallback(M=>{if(!a)return EW;const{bindI18n:P,bindI18nStore:O}=o,F=()=>{x.current+=1,M()};return P&&a.on(P,F),O&&a.store.on(O,F),()=>{P&&P.split(" ").forEach($=>a.off($,F)),O&&O.split(" ").forEach($=>a.store.off($,F))}},[a,o]),y=p.useRef(),w=p.useCallback(()=>{if(!a)return AW;const M=!!(a.isInitialized||a.initializedStoreOnce)&&f.every(H=>iW(H,a,o)),P=t.lng||a.language,O=x.current,F=y.current;if(F&&F.ready===M&&F.lng===P&&F.keyPrefix===u&&F.revision===O)return F;const z={t:a.getFixedT(P,o.nsMode==="fallback"?f:f[0],u),ready:M,lng:P,keyPrefix:u,revision:O};return y.current=z,z},[a,f,u,o,t.lng]),[S,C]=p.useState(0),{t:_,ready:j}=CW.useSyncExternalStore(v,w,w);p.useEffect(()=>{if(a&&!j&&!l){const M=()=>C(P=>P+1);t.lng?UP(a,t.lng,f,M):x_(a,f,M)}},[a,t.lng,f,j,l,S]);const T=a||{},E=p.useRef(null),A=p.useRef(),R=M=>{const P=Object.getOwnPropertyDescriptors(M);P.__original&&delete P.__original;const O=Object.create(Object.getPrototypeOf(M),P);if(!Object.prototype.hasOwnProperty.call(O,"__original"))try{Object.defineProperty(O,"__original",{value:M,writable:!1,enumerable:!1,configurable:!1})}catch{}return O},D=p.useMemo(()=>{const M=T,P=M?.language;let O=M;M&&(E.current&&E.current.__original===M?A.current!==P?(O=R(M),E.current=O,A.current=P):O=E.current:(O=R(M),E.current=O,A.current=P));const F=[_,O,j];return F.t=_,F.i18n=O,F.ready=j,F},[_,T,j,T.resolvedLanguage,T.language,T.languages]);if(a&&l&&!j)throw new Promise(M=>{const P=()=>M();t.lng?UP(a,t.lng,f,P):x_(a,f,P)});return D},TW={settings:"Project settings",showArchived:"Show archived",hideArchived:"Hide archived",showArchivedTasks:"Show archived tasks",hideArchivedTasks:"Hide archived tasks",closeTab:"Close tab",closeTabAriaLabel:"Close tab (removes project from app)",addProjectAriaLabel:"Add project"},PW={deleteFeatureAriaLabel:"Delete feature",closeFeatureDetailsAriaLabel:"Close feature details",regenerateRoadmapAriaLabel:"Regenerate Roadmap",repositoryOwnerAriaLabel:"Repository owner",repositoryVisibilityAriaLabel:"Repository visibility",opensInNewWindow:"opens in new window",visitExternalLink:"Visit {{name}} (opens in new window)",upgradeSubscriptionAriaLabel:"Upgrade subscription (opens in new window)",learnMoreAriaLabel:"Learn more (opens in new window)",toggleFolder:"Toggle {{name}} folder",expandFolder:"Expand {{name}} folder",collapseFolder:"Collapse {{name}} folder",newConversationAriaLabel:"New conversation",saveEditAriaLabel:"Save",cancelEditAriaLabel:"Cancel",moreOptionsAriaLabel:"More options",closePanelAriaLabel:"Close panel",openOnGitHubAriaLabel:"Open on GitHub (opens in new window)",openOnGitLabAriaLabel:"Open on GitLab (opens in new window)",toggleShowArchivedAriaLabel:"Toggle show archived tasks",clearSelectionAriaLabel:"Clear selection",selectAllAriaLabel:"Select all",showDismissedAriaLabel:"Show dismissed",hideDismissedAriaLabel:"Hide dismissed",configureAriaLabel:"Configure",addMoreAriaLabel:"Add more",dismissAllAriaLabel:"Dismiss all ideas",regenerateIdeasAriaLabel:"Regenerate ideas",dismissAriaLabel:"Dismiss",browseFilesAriaLabel:"Browse files",renameAriaLabel:"Rename",deleteAriaLabel:"Delete",refreshAriaLabel:"Refresh",expandAriaLabel:"Expand",collapseAriaLabel:"Collapse",selectIdeaAriaLabel:"Select idea: {{title}}",convertToTaskAriaLabel:"Convert to task",goToTaskAriaLabel:"Go to task",reAuthenticateProfileAriaLabel:"Re-authenticate profile",hideTokenEntryAriaLabel:"Hide token entry",enterTokenManuallyAriaLabel:"Enter token manually",renameProfileAriaLabel:"Rename profile",deleteProfileAriaLabel:"Delete profile"},RW={save:"Save",cancel:"Cancel",skip:"Skip",next:"Next",back:"Back",close:"Close",initialize:"Initialize",delete:"Delete",confirm:"Confirm",retry:"Retry",create:"Create",createPR:"Create PR",openPR:"Open PR",open:"Open",start:"Start",stop:"Stop",refresh:"Refresh",refreshing:"Refreshing...",merge:"Merge",discard:"Discard",switch:"Switch",add:"Add",gotIt:"Got it",continue:"Continue",saving:"Saving..."},DW={loading:"Loading...",error:"Error",success:"Success",initializing:"Initializing...",saving:"Saving...",creating:"Creating...",noData:"No data",optional:"Optional",required:"Required",dismiss:"Dismiss"},IW={justNow:"Just now",minutesAgo:"{{count}}m ago",hoursAgo:"{{count}}h ago",daysAgo:"{{count}}d ago"},MW={generic:"An error occurred",unknownError:"An unknown error occurred",operationFailed:"Operation failed",networkError:"Network error",notFound:"Not found",unauthorized:"Unauthorized"},LW={accountSwitched:"Account Switched",swapFrom:"Switched from",swapTo:"to",swapReason:"({{reason}} swap)"},OW={title:"Rate Limited",resetsAt:"Resets {{time}}",hitLimit:"{{source}} hit usage limit",clickToManage:"Click to manage ",modalTitle:"Claude Code Usage Limit Reached",modalDescription:"You've reached your Claude Code usage limit for this period.",profile:"Profile: {{name}}",autoSwitching:"Auto-switching to {{name}}",autoSwitchingDescription:"Claude will restart with your other account automatically",resetsTime:"Resets {{time}}",usageRestored:"Your usage will be restored at this time",switchAccount:"Switch Claude Account",useAnotherAccount:"Use Another Account",recommended:"Recommended: {{name}} has more capacity available.",otherSubscriptions:"You have other Claude subscriptions configured. Switch to continue working:",selectAccount:"Select account...",switching:"Switching...",addNewAccount:"Add new account...",addAnotherSubscription:"Add another Claude subscription to automatically switch when you hit rate limits.",addAnotherAccount:"Add another account:",connectAccount:"Connect a Claude account:",accountNamePlaceholder:"Account name (e.g., Work, Personal)",willOpenLogin:"This will open Claude login to authenticate the new account.",autoSwitchOnRateLimit:"Auto-switch on rate limit",upgradeTitle:"Upgrade for more usage",upgradeDescription:"Upgrade your Claude subscription for higher usage limits.",upgradeSubscription:"Upgrade Subscription",sources:{changelog:"Changelog",task:"Task",roadmap:"Roadmap",ideation:"Ideation",titleGenerator:"Title Generator",claude:"Claude"},toast:{authenticating:'Authenticating "{{profileName}}"',checkTerminal:"Check the Agent Terminals section in the sidebar to complete OAuth login.",authStartFailed:"Failed to start authentication",addProfileFailed:"Failed to add profile",tryAgain:"Please try again."},sdk:{title:"Claude Code Rate Limit",interrupted:"{{source}} was interrupted due to usage limits.",proactiveSwap:" Proactive Swap",reactiveSwap:" Reactive Swap",proactiveSwapDesc:"Automatically switched from {{from}} to {{to}} before hitting rate limit.",reactiveSwapDesc:"Rate limit hit on {{from}}. Automatically switched to {{to}} and restarted.",continueWithoutInterruption:"Your work continued without interruption.",rateLimitReached:"Rate limit reached",operationStopped:"The operation was stopped because {{account}} reached its usage limit.",switchBelow:"Switch to another account below to continue.",addAccountToContinue:"Add another Claude account to continue working.",upgradeToProButton:"Upgrade to Pro for Higher Limits",resetsLabel:"Resets {{time}}",weeklyLimit:"Weekly limit - resets in about a week",sessionLimit:"Session limit - resets in a few hours",switchAccountRetry:"Switch Account & Retry",retrying:"Retrying...",retry:"Retry",autoSwitchRetryLabel:"Auto-switch & retry on rate limit",add:"Add",whatHappened:"What happened:",whatHappenedDesc:"The {{source}} operation was stopped because your Claude account ({{account}}) reached its usage limit.",switchRetryOrAdd:"You can switch to another account and retry, or add more accounts above.",addOrWait:"Add another Claude account above to continue working, or wait for the limit to reset.",close:"Close"}},FW={reviewing:"Reviewing",reviewed:"Reviewed",approved:"Approved",changesRequested:"Changes Requested",commented:"Commented",readyForFollowup:"Ready for Follow-up",readyToMerge:"Ready to Merge",pendingPost:"Pending Post",posted:"Posted",notReviewed:"Not Reviewed",allStatuses:"All statuses",allContributors:"All contributors",searchPlaceholder:"Search PRs...",contributors:"Contributors",contributorsSelected:"Contributors ({{count}})",status:"Status",filters:"Filters",clearFilters:"Clear",clearSearch:"Clear search",searchContributors:"Search contributors...",selectedCount:"{{count}} selected",noResultsFound:"No results found",reset:"Reset",pullRequests:"Pull Requests",open:"open",selectPRToView:"Select a pull request to view details",loadingPRs:"Loading pull requests...",noOpenPRs:"No open pull requests",notConnected:"GitHub Not Connected",connectPrompt:"Connect your GitHub account to view and review pull requests.",openSettings:"Open Settings",runAIReview:"Run AI Review",reviewStarted:"Review Started",analysisInProgress:"AI Analysis in Progress...",analysisComplete:"Analysis Complete ({{count}} findings)",findingsPostedToGitHub:"Findings Posted to GitHub",newCommits:"{{count}} New Commits",newCommit:"{{count}} New Commit",runFollowup:"Run Follow-up",aiReviewInProgress:"AI Review in Progress",waitingForChanges:"Waiting for Changes",reviewComplete:"Review Complete",reviewStatus:"Review Status",files:"files",filesChanged:"{{count}} files changed",clickToViewFiles:"Click to view changed files",loadingFiles:"Loading files...",noFilesAvailable:"File list not available",posting:"Posting...",postingApproval:"Posting Approval...",postFindings:"Post {{count}} Finding",postFindings_plural:"Post {{count}} Findings",approve:"Approve",merge:"Merge",mergeViaGitHub:"Merge via GitHub CLI. May fail if branch protection rules require additional reviews or checks.",autoApprovePR:"Approve PR",suggestions:"with {{count}} suggestions",postedFindings:"Posted {{count}} finding",postedFindings_plural:"Posted {{count}} findings",resolved:"{{count}} resolved",resolved_plural:"{{count}} resolved",stillOpen:"{{count}} still open",stillOpen_plural:"{{count}} still open",newIssue:"{{count}} new issue",newIssue_plural:"{{count}} new issues",reviewFailed:"Review Failed",description:"Description",noDescription:"No description provided.",followupReviewDetails:"Follow-up Review Details",aiAnalysisResults:"AI Analysis Results",cancel:"Cancel",previousReview:"Previous Review ({{count}} findings)",findingsPosted:"{{count}} Posted",followupInProgress:"Follow-up Analysis in Progress...",severity:{critical:"Blocker",high:"Required",medium:"Recommended",low:"Suggestion",criticalDesc:"Must fix",highDesc:"Should fix",mediumDesc:"Improve quality",lowDesc:"Consider"},category:{security:"Security",logic:"Logic",quality:"Quality",performance:"Performance",style:"Style",documentation:"Documentation",testing:"Testing",other:"Other"},state:{open:"Open",closed:"Closed",merged:"Merged"},selectCriticalHigh:"Select Blocker/Required ({{count}})",selectAll:"Select All",clear:"Clear",noIssuesFound:"No issues found! The code looks good.",allFindingsPosted:"All findings posted to GitHub",findingsPostedCount:"{{count}} finding posted to GitHub",findingsPostedCount_plural:"{{count}} findings posted to GitHub",selectedOfTotal:"{{selected}}/{{total}} selected",suggestedFix:"Suggested fix:",runAIReviewDesc:"Run an AI review to analyze this PR",newCommitsSinceFollowup:"{{count}} new commit since follow-up. Run another follow-up review.",newCommitsSinceFollowup_plural:"{{count}} new commits since follow-up. Run another follow-up review.",allIssuesResolved:"All {{count}} issue resolved. This PR can be merged.",allIssuesResolved_plural:"All {{count}} issues resolved. This PR can be merged.",nonBlockingSuggestions:"{{resolved}} resolved. {{suggestions}} non-blocking suggestion remain.",nonBlockingSuggestions_plural:"{{resolved}} resolved. {{suggestions}} non-blocking suggestions remain.",blockingIssues:"Blocking Issues",blockingIssuesDesc:"{{resolved}} resolved, {{unresolved}} blocking issue still open.",blockingIssuesDesc_plural:"{{resolved}} resolved, {{unresolved}} blocking issues still open.",newCommitsSinceReview:"{{count}} new commit since review. Run follow-up to check if issues are resolved.",newCommitsSinceReview_plural:"{{count}} new commits since review. Run follow-up to check if issues are resolved.",noBlockingIssues:"No blocking issues found. This PR can be merged.",findingsPostedWaiting:"{{count}} finding posted. Waiting for contributor to address issues.",findingsPostedWaiting_plural:"{{count}} findings posted. Waiting for contributor to address issues.",findingsPostedNoBlockers:"{{count}} finding posted. No blocking issues remain.",findingsPostedNoBlockers_plural:"{{count}} findings posted. No blocking issues remain.",needsAttention:"Needs Attention",findingsNeedPosting:"{{count}} finding need to be posted to GitHub.",findingsNeedPosting_plural:"{{count}} findings need to be posted to GitHub.",findingsFoundSelectPost:"{{count}} finding found. Select and post to GitHub.",findingsFoundSelectPost_plural:"{{count}} findings found. Select and post to GitHub.",reviewLogs:"Review Logs",followup:"Follow-up",initial:"Initial",rerunFollowup:"Re-run follow-up review",rerunReview:"Re-run review",loadingMore:"Loading more PRs...",scrollForMore:"Scroll for more",allPRsLoaded:"All PRs loaded",workflowsAwaitingApproval:"{{count}} Workflow Awaiting Approval",workflowsAwaitingApproval_plural:"{{count}} Workflows Awaiting Approval",blockedByWorkflows:"Blocked",workflowsAwaitingDescription:"This PR is from a fork and requires workflow approval before CI checks can run. Approve the workflows to continue.",viewOnGitHub:"View",approveWorkflow:"Approve",approveAllWorkflows:"Approve All Workflows",postCleanReview:"Post Clean Review",postingCleanReview:"Posting...",cleanReviewPosted:"Clean review posted",cleanReviewMessageTitle:"##  Auto Claude PR Review - PASSED",cleanReviewMessageStatus:"**Status:** All code is good",cleanReviewMessageFooter:"*This automated review found no issues. Generated by Auto Claude.*",failedPostCleanReview:"Failed to post clean review",viewErrorDetails:"View details",hideErrorDetails:"Hide details",postBlockedStatus:"Post Status",postingBlockedStatus:"Posting...",blockedStatusPosted:"Status posted to PR",blockedStatusMessageTitle:"##  Auto Claude PR Review",blockedStatusMessageFooter:"*This review identified blockers that must be resolved before merge. Generated by Auto Claude.*",failedPostBlockedStatus:"Failed to post status",branchSynced:"Branch synced ({{count}} commit from base)",branchSynced_plural:"Branch synced ({{count}} commits from base)",newCommitsOverlap:"{{count}} new commit ({{files}} finding file(s) modified)",newCommitsOverlap_plural:"{{count}} new commits ({{files}} finding file(s) modified)",newCommitsNoOverlap:"{{count}} new commit (no overlap with findings)",newCommitsNoOverlap_plural:"{{count}} new commits (no overlap with findings)",verifyChanges:"Verify Changes",verifyAnyway:"Verify",runFollowupAnyway:"Run follow-up verification even though no files overlap",logs:{agentActivity:"Agent Activity",showMore:"Show {{count}} more",hideMore:"Hide {{count}} more"}},BW={toggleExpand:"Toggle download details",downloading:"Downloading {{count}} model",downloading_plural:"Downloading {{count}} models",complete:"{{count}} download complete",complete_plural:"{{count}} downloads complete",failed:"{{count}} download failed",failed_plural:"{{count}} downloads failed",clearAll:"Clear all completed downloads",done:"Done",failedLabel:"Failed",starting:"Starting..."},zW={converting:"Converting...",convertToTask:"Convert to Auto-Build Task",dismissIdea:"Dismiss Idea",description:"Description",rationale:"Rationale",goToTask:"Go to Task",conversionFailed:"Conversion failed",conversionFailedDescription:"Failed to convert idea to task",conversionError:"Conversion error",conversionErrorDescription:"An error occurred while converting the idea"},$W={loadingMore:"Loading more...",scrollForMore:"Scroll for more",allLoaded:"All issues loaded"},HW={projectTab:TW,accessibility:PW,buttons:RW,labels:DW,time:IW,errors:MW,notification:LW,rateLimit:OW,prReview:FW,downloads:BW,ideation:zW,issues:$W},UW={project:"Project",tools:"Tools"},GW={kanban:"Kanban Board",terminals:"Agent Terminals",insights:"Insights",roadmap:"Roadmap",ideation:"Ideation",changelog:"Changelog",context:"Context",githubIssues:"GitHub Issues",githubPRs:"GitHub PRs",gitlabIssues:"GitLab Issues",gitlabMRs:"GitLab MRs",worktrees:"Worktrees",agentTools:"MCP Overview"},VW={settings:"Settings",help:"Help & Feedback",newTask:"New Task"},qW={settings:"Application Settings",help:"Help & Feedback"},WW={initializeToCreateTasks:"Initialize Auto Claude to create tasks"},KW={title:"Update Available",version:"Version {{version}} is ready",updateAndRestart:"Update and Restart",installAndRestart:"Install and Restart",downloading:"Downloading...",dismiss:"Dismiss",downloadError:"Failed to download update"},YW={checking:"Checking Claude Code...",upToDate:"Claude Code is up to date",updateAvailable:"Claude Code update available",notInstalled:"Claude Code not installed",error:"Error checking Claude Code",installed:"Installed",outdated:"Update available",missing:"Not installed",current:"Current",latest:"Latest",path:"Path",lastChecked:"Last checked",learnMore:"Learn more about Claude Code",learnMoreAriaLabel:"Learn more about Claude Code (opens in new window)",viewChangelog:"View Claude Code Changelog",viewChangelogAriaLabel:"View Claude Code Changelog (opens in new window)",updateWarningTitle:"Update Claude Code?",updateWarningDescription:"Updating will close all running Claude Code sessions. Any unsaved work in those sessions may be lost. Make sure to save your work before proceeding.",updateAnyway:"Update Anyway",switchVersion:"Switch Version",selectVersion:"Select version",loadingVersions:"Loading versions...",failedToLoadVersions:"Failed to load versions",installingVersion:"Installing version {{version}}...",rollbackWarningTitle:"Switch to version {{version}}?",rollbackWarningDescription:"Switching versions will close all running Claude Code sessions. Any unsaved work in those sessions may be lost. Make sure to save your work before proceeding.",switchAnyway:"Switch Anyway",currentVersion:"Current",switchInstallation:"Switch Installation",selectInstallation:"Select installation",loadingInstallations:"Loading installations...",failedToLoadInstallations:"Failed to load installations",activeInstallation:"Active",pathChangeWarningTitle:"Switch CLI installation?",pathChangeWarningDescription:"Switching CLI installations will use a different Claude Code binary. Any running sessions will continue using the previous installation until restarted.",switchInstallationConfirm:"Switch",versionUnknown:"version unknown"},XW={sections:UW,items:GW,actions:VW,tooltips:qW,messages:WW,updateBanner:KW,claudeCode:YW},ZW="Settings",QW={app:"App Settings",project:"Project Settings"},JW={appearance:{title:"Appearance",description:"Customize how Auto Claude looks"},display:{title:"Display",description:"Adjust the size of UI elements"},language:{title:"Language",description:"Choose your preferred language"},devtools:{title:"Developer Tools",description:"IDE and terminal preferences"},agent:{title:"Agent Settings",description:"Default model and framework"},paths:{title:"Paths",description:"CLI tools and framework paths"},integrations:{title:"Integrations",description:"API keys & Claude accounts"},"api-profiles":{title:"API Profiles",description:"Custom API endpoint profiles"},updates:{title:"Updates",description:"Auto Claude updates"},notifications:{title:"Notifications",description:"Alert preferences"},debug:{title:"Debug & Logs",description:"Troubleshooting tools"}},eK={title:"API Profiles",description:"Configure custom Anthropic-compatible API endpoints",addButton:"Add Profile",presets:{anthropic:"Anthropic",openrouter:"OpenRouter",groq:"Groq",glmGlobal:"GLM (Global)",glmChina:"GLM (China)"},fields:{name:"Name",preset:"Preset",baseUrl:"Base URL",apiKey:"API Key"},placeholders:{name:"My Custom API",preset:"Choose a provider preset",baseUrl:"https://api.anthropic.com",apiKey:"sk-ant-..."},hints:{preset:"Presets fill the base URL; you still need to paste your API key.",baseUrl:"Example: https://api.anthropic.com or http://localhost:8080"},validation:{nameRequired:"Name is required",baseUrlRequired:"Base URL is required",baseUrlInvalid:"Invalid URL format (must be http:// or https://)",apiKeyRequired:"API Key is required",apiKeyInvalid:"Invalid API Key format"},actions:{save:"Save Profile",saving:"Saving...",cancel:"Cancel",changeKey:"Change",cancelKeyChange:"Cancel"},testConnection:{label:"Test Connection",testing:"Testing...",success:"Connection Successful",failure:"Connection Failed"},models:{title:"Optional: Model Name Mappings",description:"Select models from your API provider. Leave blank to use defaults.",defaultLabel:"Default Model (Optional)",haikuLabel:"Haiku Model (Optional)",sonnetLabel:"Sonnet Model (Optional)",opusLabel:"Opus Model (Optional)",defaultPlaceholder:"e.g., claude-sonnet-4-5-20250929",haikuPlaceholder:"e.g., claude-haiku-4-5-20251001",sonnetPlaceholder:"e.g., claude-sonnet-4-5-20250929",opusPlaceholder:"e.g., claude-opus-4-5-20251101"},empty:{title:"No API profiles configured",description:"Create a profile to configure custom API endpoints for your builds.",action:"Create First Profile"},switchToOauth:{label:"Switch to OAuth",loading:"Switching..."},activeBadge:"Active",customModels:"Custom models: {{models}}",setActive:{label:"Set Active",loading:"Setting..."},tooltips:{edit:"Edit profile",deleteActive:"Switch to OAuth before deleting",deleteInactive:"Delete profile"},deleteAriaLabel:"Delete profile {{name}}",toast:{create:{title:"Profile created",description:'"{{name}}" has been added successfully.'},update:{title:"Profile updated",description:'"{{name}}" has been updated successfully.'},delete:{title:"Profile deleted",description:'"{{name}}" has been removed.',errorTitle:"Failed to delete profile",errorFallback:"An error occurred while deleting the profile."},switch:{oauthTitle:"Switched to OAuth",oauthDescription:"Now using OAuth authentication",profileTitle:"Profile activated",profileDescription:"Now using {{name}}",errorTitle:"Failed to switch authentication",errorFallback:"An error occurred while switching authentication method."}},dialog:{createTitle:"Add API Profile",editTitle:"Edit Profile",description:"Configure a custom Anthropic-compatible API endpoint for your builds.",deleteTitle:"Delete Profile?",deleteDescription:'Are you sure you want to delete "{{name}}"? This action cannot be undone.',cancel:"Cancel",delete:"Delete",deleting:"Deleting..."}},tK={placeholder:"Select a model or type manually",placeholderManual:"Enter model name (e.g., claude-sonnet-4-5-20250929)",searchPlaceholder:"Search models...",noResults:"No models match your search",discoveryNotAvailable:"Model discovery not available. Enter model name manually."},sK={label:"Interface Language",description:"Select the language for the application interface"},nK={presets:"Scale Presets",presetsDescription:"Quick scale options for common preferences",fineTune:"Fine-tune Scale",fineTuneDescription:"Adjust from 75% to 200% in 5% increments",default:"Default",comfortable:"Comfortable",large:"Large"},rK={otherAgentSettings:"Other Agent Settings",otherAgentSettingsDescription:"Additional agent configuration options",agentFramework:"Agent Framework",agentFrameworkDescription:"The coding framework used for autonomous tasks",agentFrameworkAutoClaude:"Auto Claude",aiTerminalNaming:"AI Terminal Naming",aiTerminalNamingDescription:"Automatically name terminals based on commands (uses Haiku)",featureModelSettings:"Feature Model Settings",featureModelSettingsDescription:"Model and thinking level for Insights, Ideation, and Roadmap",model:"Model",thinkingLevel:"Thinking Level",paths:"Paths",pathsDescription:"Configure executable and framework paths",pythonPath:"Python Path",pythonPathDescription:"Path to Python executable (leave empty for auto-detection)",pythonPathPlaceholder:"python3 (default)",gitPath:"Git Path",gitPathDescription:"Path to Git executable (leave empty for auto-detection)",gitPathPlaceholder:"git (default)",githubCLIPath:"GitHub CLI Path",githubCLIPathDescription:"Path to GitHub CLI (gh) executable (leave empty for auto-detection)",githubCLIPathPlaceholder:"gh (default)",claudePath:"Claude CLI Path",claudePathDescription:"Path to Claude CLI executable (leave empty for auto-detection)",claudePathPlaceholder:"claude (default)",detectedPath:"Auto-detected",detectedVersion:"Version",detectedSource:"Source",sourceUserConfig:"User Configuration",sourceVenv:"Virtual Environment",sourceHomebrew:"Homebrew",sourceNvm:"NVM",sourceSystemPath:"System PATH",sourceBundled:"Bundled",sourceFallback:"Fallback",notDetected:"Not detected",autoClaudePath:"Auto Claude Path",autoClaudePathDescription:"Relative path to auto-claude directory in projects",autoClaudePathPlaceholder:"auto-claude (default)",autoNameTerminals:"Automatically name terminals",autoNameTerminalsDescription:"Use AI to generate descriptive names for terminal tabs based on their activity"},iK={title:"Appearance",description:"Customize how Auto Claude looks",mode:"Mode",modeDescription:"Choose between light and dark themes",light:"Light",dark:"Dark",system:"System",colorTheme:"Color Theme",colorThemeDescription:"Choose your preferred color palette"},aK={title:"Developer Tools",description:"Configure your preferred IDE and terminal for working with worktrees",detecting:"Detecting installed tools...",detectAgain:"Detect Again",ide:{label:"Preferred IDE",description:"Auto Claude will open worktrees in this editor",placeholder:"Select IDE...",customPath:"Custom IDE Path",customPathPlaceholder:"/path/to/your/ide"},terminal:{label:"Preferred Terminal",description:"Auto Claude will open terminal sessions here",placeholder:"Select terminal...",customPath:"Custom Terminal Path",customPathPlaceholder:"/path/to/your/terminal"},detected:"Detected",notInstalled:"Not installed",detectedSummary:"Detected on your system:",noToolsDetected:"No additional tools detected (VS Code and system terminal will be used)",yoloMode:{label:"YOLO Mode",description:"Start Claude with --dangerously-skip-permissions flag, bypassing all safety prompts. Use with extreme caution.",warning:"This mode bypasses Claude's permission system. Only enable if you fully trust the code being executed."}},oK={title:"Updates",description:"Manage Auto Claude updates",appUpdateReady:"App Update Ready",newVersion:"New Version",released:"Released",downloading:"Downloading...",updateDownloaded:"Update downloaded! Click Install to restart and apply the update.",installAndRestart:"Install and Restart",downloadUpdate:"Download Update",version:"Version",loading:"Loading...",checkingForUpdates:"Checking for updates...",newVersionAvailable:"New version available:",latestVersion:"You're running the latest version.",viewRelease:"View full release on GitHub",unableToCheck:"Unable to check for updates",checkForUpdates:"Check for Updates",autoUpdateProjects:"Auto-Update Projects",autoUpdateProjectsDescription:"Automatically update Auto Claude in projects when a new version is available",betaUpdates:"Beta Updates",betaUpdatesDescription:"Receive pre-release beta versions with new features (may be less stable)",stableDowngradeAvailable:"Stable Version Available",stableDowngradeDescription:"You're currently on a beta version. Since you've disabled beta updates, you can switch to the latest stable release.",stableVersion:"Stable Version",downloadStableVersion:"Download Stable Version"},lK={title:"Notifications",description:"Configure default notification preferences",onTaskComplete:"On Task Complete",onTaskCompleteDescription:"Notify when a task finishes successfully",onTaskFailed:"On Task Failed",onTaskFailedDescription:"Notify when a task encounters an error",onReviewNeeded:"On Review Needed",onReviewNeededDescription:"Notify when QA requires your review",sound:"Sound",soundDescription:"Play sound with notifications"},cK={save:"Save Settings",rerunWizard:"Re-run Wizard",rerunWizardDescription:"Start the setup wizard again"},dK={general:{title:"General",description:"Auto-Build and agent config",useClaudeMd:"Use CLAUDE.md",useClaudeMdDescription:"Include CLAUDE.md instructions in agent context"},claude:{title:"Claude Auth",description:"Claude authentication"},linear:{title:"Linear",description:"Linear integration",integrationTitle:"Linear Integration",integrationDescription:"Connect to Linear for issue tracking and task import",syncDescription:"Sync with Linear for issue tracking"},github:{title:"GitHub",description:"GitHub issues sync",integrationTitle:"GitHub Integration",integrationDescription:"Connect to GitHub for issue tracking",syncDescription:"Sync with GitHub Issues"},gitlab:{title:"GitLab",description:"GitLab issues sync",integrationTitle:"GitLab Integration",integrationDescription:"Connect to GitLab for issue tracking",syncDescription:"Sync with GitLab Issues"},memory:{title:"Memory",description:"Graphiti memory backend",integrationTitle:"Memory",integrationDescription:"Configure persistent cross-session memory for agents",syncDescription:"Configure persistent memory"}},uK={label:"Agent Profile",title:"Default Agent Profile",sectionDescription:"Select a preset configuration for model and thinking level",profilesInfo:"Agent profiles provide preset configurations for Claude model and thinking level. When you create a new task, these settings will be used as defaults. You can always override them in the task creation wizard.",custom:"Custom",customConfiguration:"Custom Configuration",customDescription:"Choose model & thinking level",phaseConfiguration:"Phase Configuration",phaseConfigurationDescription:"Customize model and thinking level for each phase",clickToCustomize:"Click to customize",model:"Model",thinking:"Thinking",thinkingLevel:"Thinking Level",selectModel:"Select model",selectThinkingLevel:"Select thinking level",perPhaseOptimization:"(per-phase optimization)",resetToDefaults:"Reset to defaults",resetToProfileDefaults:"Reset to {{profile}} defaults",customized:"Customized",phaseConfigNote:"These settings will be used as defaults when creating new tasks with this profile. You can override them per-task in the task creation wizard.",phases:{spec:{label:"Spec Creation",description:"Discovery, requirements, context gathering"},planning:{label:"Planning",description:"Implementation planning and architecture"},coding:{label:"Coding",description:"Actual code implementation"},qa:{label:"QA Review",description:"Quality assurance and validation"}}},hK={roles:{backend:"Backend",frontend:"Frontend",mobile:"Mobile",shared:"Shared",apiGateway:"API Gateway",worker:"Worker",other:"Other"}},mK={title:"Integrations",description:"Manage Claude accounts and API keys",claudeAccounts:"Claude Accounts",claudeAccountsDescription:"Add multiple Claude subscriptions to automatically switch between them when you hit rate limits.",noAccountsYet:"No accounts configured yet",default:"Default",active:"Active",authenticated:"Authenticated",needsAuth:"Needs Auth",authenticate:"Authenticate",setActive:"Set Active",manualTokenEntry:"Manual Token Entry",runSetupToken:"Run claude setup-token to get your token",tokenPlaceholder:"sk-ant-oat01-...",emailPlaceholder:"Email (optional, for display)",saveToken:"Save Token",accountNamePlaceholder:"Account name (e.g., Work, Personal)",autoSwitching:"Automatic Account Switching",autoSwitchingDescription:"Automatically switch between Claude accounts to avoid interruptions. Configure proactive monitoring to switch before hitting limits.",enableAutoSwitching:"Enable automatic switching",masterSwitch:"Master switch for all auto-swap features",proactiveMonitoring:"Proactive Monitoring",proactiveDescription:"Check usage regularly and swap before hitting limits",checkUsageEvery:"Check usage every",seconds15:"15 seconds",seconds30:"30 seconds (recommended)",minute1:"1 minute",disabled:"Disabled",sessionThreshold:"Session usage threshold",sessionThresholdDescription:"Switch when session usage reaches this level (recommended: 95%)",weeklyThreshold:"Weekly usage threshold",weeklyThresholdDescription:"Switch when weekly usage reaches this level (recommended: 99%)",reactiveRecovery:"Reactive Recovery",reactiveDescription:"Auto-swap when unexpected rate limit is hit",apiKeys:"API Keys",apiKeysInfo:"Keys set here are used as defaults. Individual projects can override these in their settings.",openaiKey:"OpenAI API Key",openaiKeyDescription:"Required for Graphiti memory backend (embeddings)",toast:{authSuccess:"Profile Authenticated",authSuccessWithEmail:"Connected as {{email}}",authSuccessGeneric:"Authentication complete. You can now use this profile.",authStartFailed:"Authentication Failed",addProfileFailed:"Failed to Add Profile",tokenSaved:"Token Saved",tokenSavedDescription:"Your token has been saved successfully.",tokenSaveFailed:"Failed to Save Token",settingsUpdateFailed:"Failed to Update Settings",tryAgain:"Please try again."}},fK={title:"Debug & Logs",description:"Access logs and debug information for troubleshooting",errorReporting:{label:"Anonymous Error Reporting",description:"Send crash reports to help improve Auto Claude. No personal data or code is collected."},openLogsFolder:"Open Logs Folder",copyDebugInfo:"Copy Debug Info",copied:"Copied!",loadInfo:"Load Debug Info",systemInfo:"System Information",logsLocation:"Logs Location",recentErrors:"Recent Errors",noRecentErrors:"No recent errors",helpTitle:"Reporting Issues",helpText:'When reporting bugs, click "Copy Debug Info" to get system information and recent errors that help us diagnose the issue.'},pK={noProjectSelected:{title:"No Project Selected",description:"Select a project from the sidebar to configure its settings."}},gK={title:"MCP Server Overview",titleWithProject:"MCP Server Overview for {{projectName}}",description:"Configure which MCP servers are available for agents in this project",descriptionNoProject:"Select a project to configure MCP servers",serversEnabled:"{{count}} servers enabled",configuration:"MCP Server Configuration",configurationHint:"Disabled servers reduce context usage and startup time",noProjectSelected:"No Project Selected",noProjectSelectedDescription:"Select a project from the dropdown to view and configure MCP servers.",projectNotInitialized:"Project Not Initialized",projectNotInitializedDescription:"Initialize Auto Claude for this project to configure MCP servers.",browserAutomation:"Browser Automation (QA agents only)",alwaysEnabled:"always enabled",addServer:"Add Server",addMcpTo:"Add MCP Server to {{agent}}",addMcpDescription:"Select an MCP server to add to this agent",allMcpsAdded:"All available MCP servers are already added",added:"added",removed:"removed",remove:"Remove",restore:"Restore",noMcpServers:"No MCP servers",cannotRemove:"Cannot remove (required)",servers:{context7:{name:"Context7",description:"Documentation lookup for libraries"},graphiti:{name:"Graphiti Memory",description:"Knowledge graph for cross-session context",notConfigured:"Requires memory configuration (see Memory settings)"},linear:{name:"Linear",description:"Project management integration",notConfigured:"Requires Linear integration (see Linear settings)"},electron:{name:"Electron",description:"Desktop app automation via Chrome DevTools"},puppeteer:{name:"Puppeteer",description:"Web browser automation for testing"},autoClaude:{name:"Auto-Claude Tools",description:"Build progress tracking"}},customServers:"Custom Servers",addCustomServer:"Add Custom Server",editCustomServer:"Edit Custom Server",customServerDescription:"Add a command-based or HTTP-based MCP server",serverType:"Server Type",typeCommand:"Command (npx/npm)",typeHttp:"HTTP",serverName:"Name",serverNamePlaceholder:"My MCP Server",serverDescription:"Description",serverDescriptionPlaceholder:"What this server does",command:"Command",args:"Arguments",argsHint:"Space-separated arguments",url:"URL",headers:"Headers",headerName:"Header Name",headerValue:"Header Value",noCustomServers:"No custom servers configured. Add one to use with your agents.",errorNameRequired:"Server name is required",errorIdExists:"A server with this ID already exists",errorCommandRequired:"Command is required for command-based servers",errorUrlRequired:"URL is required for HTTP-based servers",testConnection:"Test",testing:"Testing...",authToken:"Authentication Token",authTokenPlaceholder:"Paste your API token or PAT here",authTokenHint:"Used as Bearer token in the Authorization header",advancedHeaders:"Additional Headers",status:{healthy:"Server is responding",unhealthy:"Server is not responding",needsAuth:"Authentication required",checking:"Checking...",unknown:"Status unknown"},hints:{github:"This looks like a GitHub MCP server. You'll need a Personal Access Token with appropriate scopes.",createGithubPat:"Create GitHub PAT",google:"This looks like a Google API. You'll need an OAuth token or API key.",createGoogleToken:"Create Google Credentials",anthropic:"This looks like an Anthropic API. You'll need an API key.",createAnthropicKey:"Create Anthropic API Key",openai:"This looks like an OpenAI API. You'll need an API key.",createOpenaiKey:"Create OpenAI API Key"}},xK={title:ZW,tabs:QW,sections:JW,apiProfiles:eK,modelSelect:tK,language:sK,scale:nK,general:rK,theme:iK,devtools:aK,updates:oK,notifications:lK,actions:cK,projectSections:dK,agentProfile:uK,workspace:hK,integrations:mK,debug:fK,projectSettings:pK,mcp:gK},vK="Refresh Tasks",bK={backlog:"Backlog",todo:"To Do",in_progress:"In Progress",review:"Review",prCreated:"PR Created",complete:"Complete",archived:"Archived"},yK={start:"Start",stop:"Stop",recover:"Recover",resume:"Resume",archive:"Archive",delete:"Delete",view:"View Details",viewPR:"View PR",moveTo:"Move to",taskActions:"Task actions"},wK={running:"Running",aiReview:"AI Review",needsReview:"Needs Review",pending:"Pending",stuck:"Stuck",incomplete:"Incomplete",recovering:"Recovering...",needsRecovery:"Needs Recovery",needsResume:"Needs Resume"},jK={completed:"Completed",hasErrors:"Has Errors",qaIssues:"QA Issues",approvePlan:"Approve Plan"},SK={archiveTask:"Archive task",archiveAllDone:"Archive all done tasks",viewPR:"Open pull request in browser"},_K={title:"Create New Task",description:"Describe what you want to build",placeholder:"Describe your task..."},NK={title:"No tasks yet",description:"Create your first task to get started"},CK={backlog:"Planning",in_progress:"In Progress",ai_review:"AI Review",human_review:"Human Review",done:"Done",pr_created:"PR Created"},kK={emptyBacklog:"No tasks planned",emptyBacklogHint:"Add a task to get started",emptyInProgress:"Nothing running",emptyInProgressHint:"Start a task from Backlog",emptyAiReview:"No tasks in review",emptyAiReviewHint:"AI will review completed tasks",emptyHumanReview:"Nothing to review",emptyHumanReviewHint:"Tasks await your approval here",emptyDone:"No completed tasks",emptyDoneHint:"Approved tasks appear here",emptyDefault:"No tasks",dropHere:"Drop here",showArchived:"Show archived",addTaskAriaLabel:"Add new task to backlog",closeTaskDetailsAriaLabel:"Close task details",editTask:"Edit task",cannotEditWhileRunning:"Cannot edit while task is running",worktreeCleanupTitle:"Worktree Cleanup",worktreeCleanupStaged:"This task has been staged and has a worktree. Would you like to clean up the worktree?",worktreeCleanupNotStaged:"This task has a worktree with changes that have not been merged. Delete the worktree to mark as done, or cancel to review the changes first.",keepWorktree:"Keep Worktree",deleteWorktree:"Delete Worktree & Mark Done",refreshTasks:"Refresh Tasks"},AK={phases:{idle:"Idle",planning:"Planning",coding:"Coding",reviewing:"Reviewing",fixing:"Fixing",complete:"Complete",failed:"Failed"},labels:{interrupted:"Interrupted",progress:"Progress",entry:"entry",entries:"entries"},shortPhases:{plan:"Plan",code:"Code",qa:"QA"}},EK={title:"Files",tab:"Files",noSpecPath:"No spec files available",noFiles:"No files found",loading:"Loading files...",loadingContent:"Loading content...",errorLoading:"Failed to load files",errorLoadingContent:"Failed to load file content",retry:"Retry",selectFile:"Select a file to view its contents",openInIDE:"Open in IDE"},TK={severity:"severity",pullRequest:"Pull Request"},PK={removeImageAriaLabel:"Remove image {{filename}}",pasteHint:"Tip: Paste screenshots directly with {{shortcut}} to add reference images."},RK={backgroundTaskTitle:"Task continues in background",backgroundTaskDescription:"The task is still running. You can reopen this dialog to monitor progress."},DK={createTitle:"Create New Task",createDescription:"Describe what you want to build. The AI will analyze your request and create a detailed specification.",descriptionPlaceholder:"Describe the feature, bug fix, or improvement you want to implement. Be as specific as possible about requirements, constraints, and expected behavior. Type @ to reference files.",draftRestored:"Draft restored",startFresh:"Start Fresh",hideFiles:"Hide Files",browseFiles:"Browse Files",creating:"Creating...",createTask:"Create Task",worktreeNotice:{title:"Isolated Workspace",description:"This task runs in an isolated git worktree. Your main branch stays safe until you choose to merge."},gitOptions:{title:"Git Options (optional)",baseBranchLabel:"Base Branch (optional)",useProjectDefault:"Use project default",useProjectDefaultWithBranch:"Use project default ({{branch}})",helpText:"Override the branch this task's worktree will be created from. Leave empty to use the project's configured default branch.",useWorktreeLabel:"Use isolated workspace (recommended)",useWorktreeDescription:"Creates changes in a separate git worktree for safe review before merging. Disable to build directly in your project (faster but riskier)."},errors:{createFailed:"Failed to create task. Please try again."}},IK={dragDropHint:"Drag & drop images or paste screenshots",imageAdded:"Image added successfully",maxImagesError:"Maximum of {{count}} images allowed",invalidTypeError:"Invalid image type. Allowed: {{types}}",removeImage:"Remove image",processingError:"Failed to process image"},MK={mergeTooltip:"Merges changes from the task's worktree branch back to your base branch. AI will resolve any conflicts. You can then choose whether to keep or remove the worktree."},LK={title:"Edit Task",description:"Update task details including title, description, classification, images, and settings. Changes will be saved to the spec files.",saveChanges:"Save Changes",errors:{updateFailed:"Failed to update task. Please try again."}},OK={description:"Description",descriptionPlaceholder:"Describe the feature, bug fix, or improvement you want to implement. Be as specific as possible about requirements, constraints, and expected behavior.",imageAddedSuccess:"Image added successfully!",taskTitle:"Task Title",titlePlaceholder:"Leave empty to auto-generate from description",titleHelpText:"A short, descriptive title will be generated automatically if left empty.",classificationOptional:"Classification (optional)",requireReviewLabel:"Require human review before coding",requireReviewDescription:"When enabled, you'll be prompted to review the spec and implementation plan before the coding phase begins. This allows you to approve, request changes, or provide feedback.",errors:{descriptionRequired:"Please provide a description",maxImagesReached:"Maximum of 5 images allowed",invalidImageType:"Invalid image type. Allowed: PNG, JPEG, GIF, WebP",processPasteFailed:"Failed to process pasted image",processDropFailed:"Failed to process dropped image"},classification:{category:"Category",selectCategory:"Select category",priority:"Priority",selectPriority:"Select priority",complexity:"Complexity",selectComplexity:"Select complexity",impact:"Impact",selectImpact:"Select impact",helpText:"These labels help organize and prioritize tasks. They're optional but useful for filtering.",values:{category:{feature:"Feature",bug_fix:"Bug Fix",refactoring:"Refactoring",documentation:"Docs",security:"Security"},priority:{low:"Low",medium:"Medium",high:"High",urgent:"Urgent"},complexity:{trivial:"Trivial",small:"Small",medium:"Medium",large:"Large",complex:"Complex"},impact:{low:"Low Impact",medium:"Medium Impact",high:"High Impact",critical:"Critical Impact"}}}},FK={untitled:"Untitled subtask"},BK={refreshTasks:vK,status:bK,actions:yK,labels:wK,reviewReason:jK,tooltips:SK,creation:_K,empty:NK,columns:CK,kanban:kK,execution:AK,files:EK,metadata:TK,images:PK,notifications:RK,wizard:DK,feedback:IK,review:MK,edit:LK,form:OK,subtasks:FK},zK={title:"Welcome to Auto Claude",subtitle:"Build software autonomously with AI-powered agents"},$K={newProject:"New Project",openProject:"Open Project"},HK={title:"Recent Projects",empty:"No projects yet",emptyDescription:"Create a new project or open an existing one to get started",openFolder:"Open Folder",openProjectAriaLabel:"Open project {{name}}"},UK={hero:zK,actions:$K,recentProjects:HK},GK={title:"Setup Wizard",description:"Configure your Auto Claude environment in a few simple steps",helpText:"This wizard will help you set up your environment in just a few steps. You can configure your Claude OAuth token, set up memory features, and create your first task."},VK={title:"Welcome to Auto Claude",subtitle:"Build software autonomously with AI-powered agents",getStarted:"Get Started",skip:"Skip Setup",features:{aiPowered:{title:"AI-Powered Development",description:"Generate code and build features using Claude Code agents"},specDriven:{title:"Spec-Driven Workflow",description:"Define tasks with clear specifications and let Auto Claude handle the implementation"},memory:{title:"Memory & Context",description:"Persistent memory across sessions with Graphiti"},parallel:{title:"Parallel Execution",description:"Run multiple agents in parallel for faster development cycles"}}},qK={title:"Claude Authentication",description:"Connect your Claude account to enable AI features",configureTitle:"Configure Claude Authentication",addAccountsDesc:"Add your Claude accounts to enable AI features",multiAccountInfo:"Add multiple Claude subscriptions to automatically switch between them when you hit rate limits.",noAccountsYet:"No accounts configured yet",badges:{default:"Default",active:"Active",authenticated:"Authenticated",needsAuth:"Needs Auth"},buttons:{authenticate:"Authenticate",setActive:"Set Active",rename:"Rename",delete:"Delete",add:"Add",adding:"Adding...",showToken:"Show Token",hideToken:"Hide Token",copyToken:"Copy Token",back:"Back",continue:"Continue",skip:"Skip"},labels:{accountName:"Account name",namePlaceholder:"Profile name (e.g., Work, Personal)",tokenLabel:"OAuth Token",tokenPlaceholder:"Enter token here",tokenHint:"Paste the token shown in your terminal after completing OAuth login."},keychainTitle:"Secure Storage",keychainDescription:`Your tokens are encrypted using your system's keychain. You may see a password prompt from macOS  click "Always Allow" to avoid seeing it again.`,toast:{authSuccess:"Profile authenticated successfully",authSuccessWithEmail:"Account: {{email}}",authSuccessGeneric:"Authentication complete. You can now use this profile.",authStartFailed:"Failed to start authentication",addProfileFailed:"Failed to add profile",tokenSaved:"Token saved",tokenSavedDescription:"Your token has been saved successfully.",tokenSaveFailed:"Failed to save token",tryAgain:"Please try again."}},WK={title:"Memory",description:"Configure persistent cross-session memory for agents",contextDescription:"Auto Claude Memory helps remember context across your coding sessions",enableMemory:"Enable Memory",enableMemoryDescription:"Persistent cross-session memory using LadybugDB (embedded database)",memoryDisabledInfo:"Memory is disabled. Session insights will be stored in local files only. Enable Memory for persistent cross-session context with semantic search.",enableAgentAccess:"Enable Agent Memory Access",enableAgentAccessDescription:"Allow agents to search and add to the knowledge graph via MCP",mcpServerUrl:"Graphiti MCP Server URL",mcpServerUrlDescription:"URL of the Graphiti MCP server for agent memory access",embeddingProvider:"Embedding Provider",embeddingProviderDescription:"Provider for semantic search (optional - keyword search works without)",selectEmbeddingModel:"Select Embedding Model",openaiApiKey:"OpenAI API Key",openaiApiKeyDescription:"Required for OpenAI embeddings",openaiGetKey:"Get your key from",voyageApiKey:"Voyage AI API Key",voyageApiKeyDescription:"Required for Voyage AI embeddings",googleApiKey:"Google AI API Key",googleApiKeyDescription:"Required for Google AI embeddings",azureConfig:"Azure OpenAI Configuration",azureApiKey:"API Key",azureBaseUrl:"Base URL",azureEmbeddingDeployment:"Embedding Deployment Name",memoryInfo:"Memory stores discoveries, patterns, and insights about your codebase so future sessions start with context already loaded. No Docker required - uses an embedded database.",learnMore:"Learn more about Memory",back:"Back",skip:"Skip",saving:"Saving...",saveAndContinue:"Save & Continue",providers:{ollama:"Ollama (Local - Free)",openai:"OpenAI",voyage:"Voyage AI",google:"Google AI",azure:"Azure OpenAI"}},KK={title:"You're All Set!",subtitle:"Auto Claude is ready to help you build amazing software",setupComplete:"Setup Complete",setupCompleteDescription:"Your environment is configured and ready. You can start creating tasks immediately or explore the application at your own pace.",whatsNext:"What's Next?",createTask:{title:"Create a Task",description:"Start by creating your first task to see Auto Claude in action.",action:"Open Task Creator"},customizeSettings:{title:"Customize Settings",description:"Fine-tune your preferences, configure integrations, or re-run this wizard.",action:"Open Settings"},exploreDocs:{title:"Explore Documentation",description:"Learn more about advanced features, best practices, and troubleshooting."},finish:"Finish & Start Building",rerunHint:"You can always re-run this wizard from Settings  Application"},YK={welcome:"Welcome",authChoice:"Auth Method",auth:"Auth",claudeCode:"CLI",devtools:"Dev Tools",privacy:"Privacy",memory:"Memory",done:"Done"},XK={title:"Help Improve Auto Claude",subtitle:"Anonymous error reporting helps us fix bugs faster",whatWeCollect:{title:"What we collect",crashReports:"Crash reports and error stack traces",errorMessages:"Error messages (with file paths anonymized)",appVersion:"App version and platform info"},whatWeNeverCollect:{title:"What we never collect",code:"Your code or project files",filenames:"Full file paths (usernames are masked)",apiKeys:"API keys or tokens",personalData:"Personal information or usage data"},toggle:{label:"Send anonymous error reports",description:"Help us identify and fix issues"}},ZK={title:"Claude Code CLI",description:"Install or update the Claude Code CLI to enable AI-powered features",detecting:"Checking Claude Code installation...",info:{title:"What is Claude Code?",description:"Claude Code is Anthropic's official CLI that powers Auto Claude's AI features. It provides secure authentication and direct access to Claude models."},status:{installed:"Installed",outdated:"Update Available",notFound:"Not Installed"},version:{current:"Current Version",latest:"Latest Version"},install:{button:"Install Claude Code",updating:"Update Claude Code",inProgress:"Installing...",success:"Installation command sent to terminal. Please complete the installation there.",instructions:"The installer will open in your terminal. Follow the prompts to complete installation."},learnMore:"Learn more about Claude Code"},QK={title:"Developer Tools",description:"Choose your preferred IDE and terminal for working with Auto Claude worktrees",detecting:"Detecting installed tools...",detectAgain:"Detect Again",whyConfigure:"Why configure these?",whyConfigureDescription:"When Auto Claude builds features in isolated worktrees, you can open them directly in your preferred IDE or terminal to test and review changes.",ide:{label:"Preferred IDE",description:"Auto Claude will open worktrees in this editor",customPath:"Custom IDE Path"},terminal:{label:"Preferred Terminal",description:"Auto Claude will open terminal sessions here",customPath:"Custom Terminal Path"},detectedSummary:"Detected on your system:",noToolsDetected:"No additional tools detected (VS Code and system terminal will be used)",custom:"Custom...",saveAndContinue:"Save & Continue"},JK={notInstalled:{title:"Ollama not installed",description:"Ollama provides free, local embedding models for semantic search. Install it with one click to enable this feature.",installSuccess:"Installation started in your terminal. Complete the installation there, then click Retry.",installButton:"Install Ollama",installing:"Installing...",retry:"Retry",learnMore:"Learn more",fallbackNote:"Memory will still work with keyword search even without Ollama."},notRunning:{title:"Ollama not running",description:"Ollama is installed but not running. Start Ollama to use local embedding models.",retry:"Retry",fallbackNote:"Memory will still work with keyword search even without embeddings."}},eY={wizard:GK,welcome:VK,oauth:qK,memory:WK,completion:KK,steps:YK,privacy:XK,claudeCode:ZK,devtools:QK,ollama:JK},tY={title:"Initialize Auto Claude",description:"This project doesn't have Auto Claude initialized. Would you like to set it up now?",willDo:"This will:",createFolder:"Create a .auto-claude folder in your project",copyFramework:"Copy the Auto Claude framework files",setupSpecs:"Set up the specs directory for your tasks",sourcePathNotConfigured:"Source path not configured",sourcePathNotConfiguredDescription:"Please set the Auto Claude source path in App Settings before initializing.",initFailed:"Initialization Failed",initFailedDescription:"Failed to initialize Auto Claude. Please try again."},sY={title:"Git Repository Required",description:"Auto Claude uses git to safely build features in isolated workspaces",notGitRepo:"This folder is not a git repository",noCommits:"Git repository has no commits",needsInit:"Git needs to be initialized before Auto Claude can manage your code.",needsCommit:"At least one commit is required for Auto Claude to create worktrees.",willSetup:"We'll set up git for you:",initRepo:"Initialize a new git repository",createCommit:"Create an initial commit with your current files",manual:"Prefer to do it manually?",settingUp:"Setting up Git",initializingRepo:"Initializing git repository and creating initial commit...",success:"Git Initialized",readyToUse:"Your project is now ready to use with Auto Claude!"},nY={connectTitle:"Connect to GitHub",connectDescription:"Auto Claude requires GitHub to manage your code branches and keep tasks up to date.",claudeTitle:"Connect to Claude AI",claudeDescription:"Auto Claude uses Claude AI for intelligent features like Roadmap generation, Task automation, and Ideation.",selectRepo:"Select Repository",repoDescription:"Auto Claude will use this repository for managing task branches and keeping your code up to date.",selectBranch:"Select Base Branch",branchDescription:"Choose which branch Auto Claude should use as the base for creating task branches.",whyBranch:"Why select a branch?",branchExplanation:"Auto Claude creates isolated workspaces for each task. Selecting the right base branch ensures your tasks start with the latest code from your main development line.",ready:"Auto Claude is ready to use! You can now create tasks that will be automatically based on the {{branchName}} branch.",createRepoAriaLabel:"Create new repository on GitHub",linkRepoAriaLabel:"Link to existing repository",goBackAriaLabel:"Go back to repository selection",selectOwnerAriaLabel:"Select {{owner}} as repository owner",selectOrgAriaLabel:"Select {{org}} as repository owner",selectVisibilityAriaLabel:"Set repository visibility to {{visibility}}"},rY={title:"Worktrees",description:"Manage isolated workspaces for your Auto Claude tasks",empty:"No Worktrees",emptyDescription:"Worktrees are created automatically when Auto Claude builds features. They provide isolated workspaces for each task.",merge:"Merge Worktree",mergeDescription:"Merge changes from this worktree into the base branch.",delete:"Delete Worktree?",deleteDescription:"This will permanently delete the worktree and all uncommitted changes. This action cannot be undone."},iY={title:"Complete Task",hasWorktree:'The task <strong>"{{taskTitle}}"</strong> still has an isolated workspace (worktree).',willDelete:"To mark this task as complete, the worktree and its associated branch will be deleted.",warning:"Make sure you have merged or saved any changes you want to keep before proceeding.",confirm:"Delete Worktree & Complete",completing:"Completing...",retry:"Try Again",errorTitle:"Cleanup Failed",errorDescription:"Failed to cleanup worktree. Please try again."},aY={title:"Auto Claude",projectInitialized:"Project is initialized."},oY={title:"Add Feature",description:"Add a new feature to your roadmap. Provide details about what you want to build and how it fits into your product strategy.",featureTitle:"Feature Title",featureTitlePlaceholder:"e.g., User Authentication, Dark Mode Support",featureDescription:"Description",featureDescriptionPlaceholder:"Describe what this feature does and why it's valuable to users.",rationale:"Rationale",optional:"optional",rationalePlaceholder:"Explain why this feature should be built and how it fits the product vision.",phase:"Phase",selectPhase:"Select phase",priority:"Priority",selectPriority:"Select priority",complexity:"Complexity",selectComplexity:"Select complexity",impact:"Impact",selectImpact:"Select impact",lowComplexity:"Low",mediumComplexity:"Medium",highComplexity:"High",lowImpact:"Low Impact",mediumImpact:"Medium Impact",highImpact:"High Impact",titleRequired:"Title is required",descriptionRequired:"Description is required",phaseRequired:"Please select a phase",cancel:"Cancel",adding:"Adding...",addFeature:"Add Feature",failedToAdd:"Failed to add feature. Please try again."},lY={title:"Add Project",description:"Choose how you'd like to add a project",openExisting:"Open Existing Folder",openExistingDescription:"Browse to an existing project on your computer",createNew:"Create New Project",createNewDescription:"Start fresh with a new project folder",createNewTitle:"Create New Project",createNewSubtitle:"Set up a new project folder",projectName:"Project Name",projectNamePlaceholder:"my-awesome-project",projectNameHelp:"This will be the folder name. Use lowercase with hyphens.",location:"Location",locationPlaceholder:"Select a folder...",willCreate:"Will create:",browse:"Browse",initGit:"Initialize git repository",back:"Back",creating:"Creating...",createProject:"Create Project",nameRequired:"Please enter a project name",locationRequired:"Please select a location",failedToOpen:"Failed to open project",failedToCreate:"Failed to create project",openExistingAriaLabel:"Open existing project folder",createNewAriaLabel:"Create new project"},cY={title:"Custom Model Configuration",description:"Configure the model and thinking level for this chat session.",model:"Model",thinkingLevel:"Thinking Level",cancel:"Cancel",apply:"Apply"},dY={title:"Remove Project?",description:'This will remove "{{projectName}}" from the app. Your files will be preserved on disk and you can re-add the project later.',cancel:"Cancel",remove:"Remove",error:"Failed to remove project"},uY={title:"App Update Available",description:"A new version of Auto Claude is ready to download",newVersion:"New Version",released:"Released",downloading:"Downloading...",downloadUpdate:"Download Update",installAndRestart:"Install and Restart",installLater:"Install Later",remindMeLater:"Remind Me Later",updateDownloaded:"Update downloaded successfully! Click Install to restart and apply the update.",downloadError:"Failed to download update",claudeCodeChangelog:"View Claude Code Changelog",claudeCodeChangelogAriaLabel:"View Claude Code Changelog (opens in new window)"},hY={initialize:tY,gitSetup:sY,githubSetup:nY,worktrees:rY,worktreeCleanup:iY,update:aY,addFeature:oY,addProject:lY,customModel:cY,removeProject:dY,appUpdate:uY},mY="GitLab Issues",fY={opened:"Open",closed:"Closed"},pY={simple:"Simple",standard:"Standard",complex:"Complex"},gY={open:"open",searchPlaceholder:"Search issues..."},xY={opened:"Open",closed:"Closed",all:"All"},vY={noMatch:"No issues match your search",selectIssue:"Select an issue to view details"},bY={title:"GitLab Not Connected",description:"Configure your GitLab token and project in project settings to sync issues.",openSettings:"Open Settings"},yY={notes:"notes",viewTask:"View Task",createTask:"Create Task",taskLinked:"Task Linked",taskId:"Task ID",description:"Description",noDescription:"No description provided.",assignees:"Assignees",milestone:"Milestone"},wY={title:"Create Task from Issue",issuePrefix:"Issue",description:"Create a task from this GitLab issue. The task will be added to your Kanban board in the Backlog column.",selectNotes:"Select Notes to Include",deselectAll:"Deselect All",selectAll:"Select All",willInclude:"The task will include:",includeTitle:"Issue title and description",includeLink:"Link back to the GitLab issue",includeLabels:"Labels and metadata from the issue",noNotes:"No notes (this issue has no notes)",failedToLoadNotes:"Failed to load notes",taskCreated:"Task created! View it in your Kanban board.",creating:"Creating...",cancel:"Cancel",done:"Done",close:"Close"},jY={enableIssues:"Enable GitLab Issues",enableIssuesDescription:"Sync issues from GitLab and create tasks automatically",instance:"GitLab Instance",instanceDescription:"Use https://gitlab.com or your self-hosted instance URL",connectedVia:"Connected via GitLab CLI",authenticatedAs:"Authenticated as",useDifferentToken:"Use Different Token",authentication:"GitLab Authentication",useManualToken:"Use Manual Token",authenticating:"Authenticating with glab CLI...",browserWindow:"A browser window should open for you to log in.",personalAccessToken:"Personal Access Token",useOAuth:"Use OAuth Instead",tokenScope:"Create a token with",scopeApi:"api",scopeFrom:"scope from",gitlabSettings:"GitLab Settings",project:"Project",enterManually:"Enter Manually",loadingProjects:"Loading projects...",selectProject:"Select a project...",searchProjects:"Search projects...",noMatchingProjects:"No matching projects",noProjectsFound:"No projects found",selected:"Selected",projectFormat:"Format:",projectFormatExample:"(e.g., gitlab-org/gitlab)",connectionStatus:"Connection Status",checking:"Checking...",connectedTo:"Connected to",notConnected:"Not connected",issuesAvailable:"Issues Available",issuesAvailableDescription:"Access GitLab Issues from the sidebar to view, investigate, and create tasks from issues.",defaultBranch:"Default Branch",defaultBranchDescription:"Base branch for creating task worktrees",loadingBranches:"Loading branches...",autoDetect:"Auto-detect (main/master)",searchBranches:"Search branches...",noMatchingBranches:"No matching branches",noBranchesFound:"No branches found",branchFromNote:"All new tasks will branch from",autoSyncOnLoad:"Auto-Sync on Load",autoSyncDescription:"Automatically fetch issues when the project loads",cli:{required:"GitLab CLI Required",notInstalled:"The GitLab CLI (glab) is required for OAuth authentication. Install it to use the 'Use OAuth' option.",installButton:"Install glab",installing:"Installing...",installSuccess:"Installation started in your terminal. Complete it and click Refresh.",refresh:"Refresh",learnMore:"Learn more",installed:"GitLab CLI installed:"}},SY={title:"GitLab Merge Requests",newMR:"New Merge Request",selectMR:"Select a merge request to view details",states:{opened:"Open",closed:"Closed",merged:"Merged",locked:"Locked"},filters:{opened:"Open",closed:"Closed",merged:"Merged",all:"All"}},_Y={runReview:"Run AI Review",reviewing:"Reviewing...",followupReview:"Follow-up Review",newCommits:"new commit",newCommitsPlural:"new commits",cancel:"Cancel",postFindings:"Post Findings",posting:"Posting...",postedTo:"Posted to GitLab",approve:"Approve",approving:"Approving...",merge:"Merge MR",merging:"Merging...",aiReviewResult:"AI Review Result",followupReviewResult:"Follow-up Review",description:"Description",noDescription:"No description provided.",labels:"Labels",status:{notReviewed:"Not Reviewed",notReviewedDesc:"Run an AI review to analyze this MR",reviewComplete:"Review Complete",reviewCompleteDesc:"finding(s) found. Select and post to GitLab.",waitingForChanges:"Waiting for Changes",waitingForChangesDesc:"finding(s) posted. Waiting for contributor to address issues.",readyToMerge:"Ready to Merge",readyToMergeDesc:"No blocking issues found. This MR can be merged.",needsAttention:"Needs Attention",needsAttentionDesc:"finding(s) need to be posted to GitLab.",readyForFollowup:"Ready for Follow-up",readyForFollowupDesc:"since review. Run follow-up to check if issues are resolved.",blockingIssues:"Blocking Issues",blockingIssuesDesc:"blocking issue(s) still open."},overallStatus:{approve:"Approve",requestChanges:"Changes Requested",comment:"Comment"},resolution:{resolved:"resolved",stillOpen:"still open",newIssue:"new issue",newIssues:"new issues"}},NY={summary:"selected",selectCriticalHigh:"Select Blocker/Required",selectAll:"Select All",clear:"Clear",noIssues:"No issues found! The code looks good.",suggestedFix:"Suggested fix:",posted:"Posted",severity:{critical:"Blocker",criticalDesc:"Must fix",high:"Required",highDesc:"Should fix",medium:"Recommended",mediumDesc:"Improve quality",low:"Suggestion",lowDesc:"Consider"},category:{security:"Security",quality:"Quality",style:"Style",test:"Test",docs:"Documentation",pattern:"Pattern",performance:"Performance",logic:"Logic"}},CY={title:mY,states:fY,complexity:pY,header:gY,filters:xY,empty:vY,notConnected:bY,detail:yY,investigation:wY,settings:jY,mergeRequests:SY,mrReview:_Y,findings:NY},kY={openTerminal:"Open terminal",openInbuilt:"Open in Inbuilt Terminal",openExternal:"Open in External Terminal"},AY={branchHasNewCommits:"{{branch}} branch has {{count}} new commit.",branchHasNewCommits_other:"{{branch}} branch has {{count}} new commits.",branchHasNewCommitsSinceWorktree:"The {{branch}} branch has {{count}} new commit since this worktree was created.",branchHasNewCommitsSinceWorktree_other:"The {{branch}} branch has {{count}} new commits since this worktree was created.",filesNeedMerging:"{{count}} file needs merging.",filesNeedMerging_other:"{{count}} files need merging.",filesNeedIntelligentMerging:"{{count}} file will need intelligent merging:",filesNeedIntelligentMerging_other:"{{count}} files will need intelligent merging:",branchHasNewCommitsSinceBuild:"{{branch}} branch has {{count}} new commit since this build started.",branchHasNewCommitsSinceBuild_other:"{{branch}} branch has {{count}} new commits since this build started.",filesNeedAIMergeDueToRenames:"{{count}} file needs AI merge due to {{renameCount}} file rename.",filesNeedAIMergeDueToRenames_other:"{{count}} files need AI merge due to {{renameCount}} file renames.",filesNeedAIMergeDueToRenamesPlural:"{{count}} file needs AI merge due to {{renameCount}} file renames.",filesNeedAIMergeDueToRenamesPlural_other:"{{count}} files need AI merge due to {{renameCount}} file renames.",fileRenamesDetected:"{{count}} file rename detected - AI will handle the merge.",fileRenamesDetected_other:"{{count}} file renames detected - AI will handle the merge.",filesRenamedOrMoved:"Files may have been renamed or moved - AI will handle the merge.",buttons:{stageWithAIMerge:"Stage with AI Merge",mergeWithAI:"Merge with AI",stageTo:"Stage to {{branch}}",mergeTo:"Merge to {{branch}}",resolving:"Resolving...",staging:"Staging...",merging:"Merging..."}},EY={title:"Create Pull Request",description:'Push branch and create a pull request for "{{taskTitle}}"',errors:{unknown:"An unknown error occurred while creating the pull request",invalidBranchName:"Branch name contains invalid characters. Use only letters, numbers, hyphens (-), underscores (_), and forward slashes (/).",emptyTitle:"Pull request title cannot be empty."},success:{created:"Pull request created successfully!",alreadyExists:"A pull request already exists for this branch"},actions:{retry:"Retry",creating:"Creating PR...",create:"Create Pull Request"},labels:{sourceBranch:"Source branch",targetBranch:"Target branch",commits:"Commits",changes:"Changes",prTitle:"PR Title (optional)",draftPR:"Create as draft PR",unknown:"Unknown"},hints:{targetBranch:"Leave empty to use the default branch",prTitle:"Leave empty to use the task title"}},TY={terminal:kY,merge:AY,pr:EY},PY={expand:"Expand terminal",collapse:"Collapse terminal"},RY={terminalTitle:"Auth: {{profileName}}",maxTerminalsReached:"Cannot open auth terminal: maximum terminals reached. Close a terminal first."},DY={create:"Worktree",createNew:"New Worktree",existing:"Terminal Worktrees",taskWorktrees:"Task Worktrees",otherWorktrees:"Others",createTitle:"Create Terminal Worktree",createDescription:"Create an isolated workspace for this terminal. All work will happen in the worktree directory.",name:"Worktree Name",namePlaceholder:"my-feature",nameRequired:"Worktree name is required",nameInvalid:"Name must start and end with a letter or number",nameHelp:"Lowercase letters, numbers, dashes, and underscores (spaces become hyphens)",associateTask:"Link to Task",selectTask:"Select a task...",noTask:"No task (standalone worktree)",createBranch:"Create Git Branch",branchHelp:"Creates branch: {{branch}}",baseBranch:"Base Branch",selectBaseBranch:"Select base branch...",searchBranch:"Search branches...",noBranchFound:"No branch found",useProjectDefault:"Use project default ({{branch}})",baseBranchHelp:"The branch to create the worktree from",openInIDE:"Open in IDE",maxReached:"Maximum of 12 terminal worktrees reached",alreadyExists:"A worktree with this name already exists",deleteTitle:"Delete Worktree?",deleteDescription:"This will permanently delete the worktree and its branch. Any uncommitted changes will be lost.",detached:"(detached)"},IY={expand:PY,auth:RY,worktree:DY},MY={parseImplementationPlan:"Failed to parse implementation_plan.json for {{specId}}: {{error}}",jsonError:{titleSuffix:"(JSON Error)",description:` JSON Parse Error: {{error}}

The implementation_plan.json file is malformed. Run the backend auto-fix or manually repair the file.`}},LY={task:MY},OY={settings:"Paramtres du projet",showArchived:"Afficher archivs",hideArchived:"Masquer archivs",showArchivedTasks:"Afficher les tches archives",hideArchivedTasks:"Masquer les tches archives",closeTab:"Fermer l'onglet",closeTabAriaLabel:"Fermer l'onglet (retire le projet de l'application)",addProjectAriaLabel:"Ajouter un projet"},FY={deleteFeatureAriaLabel:"Supprimer la fonctionnalit",closeFeatureDetailsAriaLabel:"Fermer les dtails de la fonctionnalit",regenerateRoadmapAriaLabel:"Rgnrer la feuille de route",repositoryOwnerAriaLabel:"Propritaire du dpt",repositoryVisibilityAriaLabel:"Visibilit du dpt",opensInNewWindow:"s'ouvre dans une nouvelle fentre",visitExternalLink:"Visiter {{name}} (s'ouvre dans une nouvelle fentre)",upgradeSubscriptionAriaLabel:"Mettre  niveau l'abonnement (s'ouvre dans une nouvelle fentre)",learnMoreAriaLabel:"En savoir plus (s'ouvre dans une nouvelle fentre)",toggleFolder:"Basculer le dossier {{name}}",expandFolder:"Dplier le dossier {{name}}",collapseFolder:"Replier le dossier {{name}}",newConversationAriaLabel:"Nouvelle conversation",saveEditAriaLabel:"Enregistrer",cancelEditAriaLabel:"Annuler",moreOptionsAriaLabel:"Plus d'options",closePanelAriaLabel:"Fermer le panneau",openOnGitHubAriaLabel:"Ouvrir sur GitHub (s'ouvre dans une nouvelle fentre)",openOnGitLabAriaLabel:"Ouvrir sur GitLab (s'ouvre dans une nouvelle fentre)",toggleShowArchivedAriaLabel:"Afficher/masquer les tches archives",clearSelectionAriaLabel:"Effacer la slection",selectAllAriaLabel:"Tout slectionner",showDismissedAriaLabel:"Afficher les rejetes",hideDismissedAriaLabel:"Masquer les rejetes",configureAriaLabel:"Configurer",addMoreAriaLabel:"Ajouter plus",dismissAllAriaLabel:"Rejeter toutes les ides",regenerateIdeasAriaLabel:"Rgnrer les ides",dismissAriaLabel:"Ignorer",browseFilesAriaLabel:"Parcourir les fichiers",renameAriaLabel:"Renommer",deleteAriaLabel:"Supprimer",refreshAriaLabel:"Actualiser",expandAriaLabel:"Dvelopper",collapseAriaLabel:"Rduire",selectIdeaAriaLabel:"Slectionner l'ide : {{title}}",convertToTaskAriaLabel:"Convertir en tche",goToTaskAriaLabel:"Aller  la tche",reAuthenticateProfileAriaLabel:"R-authentifier le profil",hideTokenEntryAriaLabel:"Masquer la saisie du jeton",enterTokenManuallyAriaLabel:"Saisir le jeton manuellement",renameProfileAriaLabel:"Renommer le profil",deleteProfileAriaLabel:"Supprimer le profil"},BY={save:"Enregistrer",cancel:"Annuler",skip:"Passer",next:"Suivant",back:"Retour",close:"Fermer",initialize:"Initialiser",delete:"Supprimer",confirm:"Confirmer",retry:"Ressayer",create:"Crer",createPR:"Crer PR",openPR:"Ouvrir la PR",open:"Ouvrir",start:"Dmarrer",stop:"Arrter",refresh:"Actualiser",refreshing:"Actualisation...",merge:"Fusionner",discard:"Abandonner",switch:"Changer",add:"Ajouter",gotIt:"Compris",continue:"Continuer",saving:"Enregistrement..."},zY={loading:"Chargement...",error:"Erreur",success:"Succs",initializing:"Initialisation...",saving:"Enregistrement...",creating:"Creation...",noData:"Aucune donne",optional:"Optionnel",required:"Requis",dismiss:"Ignorer"},$Y={justNow:" l'instant",minutesAgo:"Il y a {{count}} min",hoursAgo:"Il y a {{count}}h",daysAgo:"Il y a {{count}}j"},HY={generic:"Une erreur s'est produite",unknownError:"Une erreur inconnue s'est produite",operationFailed:"Opration choue",networkError:"Erreur rseau",notFound:"Non trouv",unauthorized:"Non autoris"},UY={accountSwitched:"Compte chang",swapFrom:"Passage de",swapTo:"",swapReason:"(changement {{reason}})"},GY={title:"Limite atteinte",resetsAt:"Rinitialisation {{time}}",hitLimit:"{{source}} a atteint la limite d'utilisation",clickToManage:"Cliquez pour grer ",modalTitle:"Limite d'utilisation Claude Code atteinte",modalDescription:"Vous avez atteint votre limite d'utilisation Claude Code pour cette priode.",profile:"Profil : {{name}}",autoSwitching:"Changement automatique vers {{name}}",autoSwitchingDescription:"Claude va redmarrer avec votre autre compte automatiquement",resetsTime:"Rinitialisation {{time}}",usageRestored:"Votre utilisation sera restaure  ce moment",switchAccount:"Changer de compte Claude",useAnotherAccount:"Utiliser un autre compte",recommended:"Recommand : {{name}} a plus de capacit disponible.",otherSubscriptions:"Vous avez d'autres abonnements Claude configurs. Changez pour continuer  travailler :",selectAccount:"Slectionner un compte...",switching:"Changement...",addNewAccount:"Ajouter un nouveau compte...",addAnotherSubscription:"Ajoutez un autre abonnement Claude pour basculer automatiquement quand vous atteignez les limites.",addAnotherAccount:"Ajouter un autre compte :",connectAccount:"Connecter un compte Claude :",accountNamePlaceholder:"Nom du compte (ex. Travail, Personnel)",willOpenLogin:"Cela ouvrira la connexion Claude pour authentifier le nouveau compte.",autoSwitchOnRateLimit:"Changement auto en cas de limite",upgradeTitle:"Passez  la version suprieure pour plus d'utilisation",upgradeDescription:"Mettez  niveau votre abonnement Claude pour des limites d'utilisation plus leves.",upgradeSubscription:"Mettre  niveau l'abonnement",sources:{changelog:"Changelog",task:"Tche",roadmap:"Feuille de route",ideation:"Idation",titleGenerator:"Gnrateur de titre",claude:"Claude"},toast:{authenticating:"Authentification de  {{profileName}} ",checkTerminal:"Vrifiez la section Terminaux Agent dans la barre latrale pour terminer la connexion OAuth.",authStartFailed:"chec du dmarrage de l'authentification",addProfileFailed:"chec de l'ajout du profil",tryAgain:"Veuillez ressayer."},sdk:{title:"Limite de dbit Claude Code",interrupted:"{{source}} a t interrompu en raison des limites d'utilisation.",proactiveSwap:" change proactif",reactiveSwap:" change ractif",proactiveSwapDesc:"Bascul automatiquement de {{from}} vers {{to}} avant d'atteindre la limite.",reactiveSwapDesc:"Limite atteinte sur {{from}}. Bascul automatiquement vers {{to}} et redmarr.",continueWithoutInterruption:"Votre travail a continu sans interruption.",rateLimitReached:"Limite atteinte",operationStopped:"L'opration a t arrte car {{account}} a atteint sa limite d'utilisation.",switchBelow:"Passez  un autre compte ci-dessous pour continuer.",addAccountToContinue:"Ajoutez un autre compte Claude pour continuer  travailler.",upgradeToProButton:"Passez  Pro pour des limites plus leves",resetsLabel:"Rinitialisation {{time}}",weeklyLimit:"Limite hebdomadaire - se rinitialise dans environ une semaine",sessionLimit:"Limite de session - se rinitialise dans quelques heures",switchAccountRetry:"Changer de compte et ressayer",retrying:"Nouvelle tentative...",retry:"Ressayer",autoSwitchRetryLabel:"Basculement auto et ressai en cas de limite",add:"Ajouter",whatHappened:"Ce qui s'est pass :",whatHappenedDesc:"L'opration {{source}} a t arrte car votre compte Claude ({{account}}) a atteint sa limite d'utilisation.",switchRetryOrAdd:"Vous pouvez passer  un autre compte et ressayer, ou ajouter plus de comptes ci-dessus.",addOrWait:"Ajoutez un autre compte Claude ci-dessus pour continuer  travailler, ou attendez la rinitialisation de la limite.",close:"Fermer"}},VY={reviewing:"En rvision",reviewed:"Rvis",approved:"Approuv",changesRequested:"Modifications demandes",commented:"Comment",readyForFollowup:"Prt pour suivi",readyToMerge:"Prt  fusionner",pendingPost:"En attente de publication",posted:"Publi",notReviewed:"Non rvis",allStatuses:"Tous les statuts",allContributors:"Tous les contributeurs",searchPlaceholder:"Rechercher des PRs...",contributors:"Contributeurs",contributorsSelected:"Contributeurs ({{count}})",status:"Statut",filters:"Filtres",clearFilters:"Effacer",clearSearch:"Effacer la recherche",searchContributors:"Rechercher des contributeurs...",selectedCount:"{{count}} slectionn(s)",noResultsFound:"Aucun rsultat trouv",reset:"Rinitialiser",pullRequests:"Pull Requests",open:"ouvert",selectPRToView:"Slectionnez une pull request pour voir les dtails",loadingPRs:"Chargement des pull requests...",noOpenPRs:"Aucune pull request ouverte",notConnected:"GitHub non connect",connectPrompt:"Connectez votre compte GitHub pour voir et rviser les pull requests.",openSettings:"Ouvrir les paramtres",runAIReview:"Lancer la rvision IA",reviewStarted:"Rvision commence",analysisInProgress:"Analyse IA en cours...",analysisComplete:"Analyse termine ({{count}} rsultats)",findingsPostedToGitHub:"Rsultats publis sur GitHub",newCommits:"{{count}} nouveaux commits",newCommit:"{{count}} nouveau commit",runFollowup:"Lancer le suivi",aiReviewInProgress:"Rvision IA en cours",waitingForChanges:"En attente de modifications",reviewComplete:"Rvision termine",reviewStatus:"Statut de rvision",files:"fichiers",filesChanged:"{{count}} fichiers modifis",clickToViewFiles:"Cliquez pour voir les fichiers modifis",loadingFiles:"Chargement des fichiers...",noFilesAvailable:"Liste des fichiers non disponible",posting:"Publication...",postingApproval:"Publication de l'approbation...",postFindings:"Publier {{count}} rsultat",postFindings_plural:"Publier {{count}} rsultats",approve:"Approuver",merge:"Fusionner",mergeViaGitHub:"Fusionner via GitHub CLI. Peut chouer si les rgles de protection de branche ncessitent des rvisions ou vrifications supplmentaires.",autoApprovePR:"Approuver PR",suggestions:"avec {{count}} suggestions",postedFindings:"{{count}} rsultat publi",postedFindings_plural:"{{count}} rsultats publis",resolved:"{{count}} rsolu",resolved_plural:"{{count}} rsolus",stillOpen:"{{count}} encore ouvert",stillOpen_plural:"{{count}} encore ouverts",newIssue:"{{count}} nouveau problme",newIssue_plural:"{{count}} nouveaux problmes",reviewFailed:"Rvision choue",description:"Description",noDescription:"Aucune description fournie.",followupReviewDetails:"Dtails de la rvision de suivi",aiAnalysisResults:"Rsultats de l'analyse IA",cancel:"Annuler",previousReview:"Rvision prcdente ({{count}} rsultats)",findingsPosted:"{{count}} publis",followupInProgress:"Analyse de suivi en cours...",severity:{critical:"Bloquant",high:"Requis",medium:"Recommand",low:"Suggestion",criticalDesc:" corriger",highDesc:" traiter",mediumDesc:"Amliore la qualit",lowDesc:" considrer"},category:{security:"Scurit",logic:"Logique",quality:"Qualit",performance:"Performance",style:"Style",documentation:"Documentation",testing:"Tests",other:"Autre"},state:{open:"Ouvert",closed:"Ferm",merged:"Fusionn"},selectCriticalHigh:"Slectionner Bloquant/Requis ({{count}})",selectAll:"Tout slectionner",clear:"Effacer",noIssuesFound:"Aucun problme trouv ! Le code est bon.",allFindingsPosted:"Tous les problmes ont t publis sur GitHub",findingsPostedCount:"{{count}} problme publi sur GitHub",findingsPostedCount_plural:"{{count}} problmes publis sur GitHub",selectedOfTotal:"{{selected}}/{{total}} slectionns",suggestedFix:"Correction suggre :",runAIReviewDesc:"Lancez une rvision IA pour analyser cette PR",newCommitsSinceFollowup:"{{count}} nouveau commit depuis le suivi. Lancez un autre suivi.",newCommitsSinceFollowup_plural:"{{count}} nouveaux commits depuis le suivi. Lancez un autre suivi.",allIssuesResolved:"{{count}} problme rsolu. Cette PR peut tre fusionne.",allIssuesResolved_plural:"Tous les {{count}} problmes rsolus. Cette PR peut tre fusionne.",nonBlockingSuggestions:"{{resolved}} rsolus. {{suggestions}} suggestion non bloquante restante.",nonBlockingSuggestions_plural:"{{resolved}} rsolus. {{suggestions}} suggestions non bloquantes restantes.",blockingIssues:"Problmes bloquants",blockingIssuesDesc:"{{resolved}} rsolus, {{unresolved}} problme bloquant encore ouvert.",blockingIssuesDesc_plural:"{{resolved}} rsolus, {{unresolved}} problmes bloquants encore ouverts.",newCommitsSinceReview:"{{count}} nouveau commit depuis la rvision. Lancez un suivi pour vrifier.",newCommitsSinceReview_plural:"{{count}} nouveaux commits depuis la rvision. Lancez un suivi pour vrifier.",branchSynced:"Branche synchronise ({{count}} commit de la base)",branchSynced_plural:"Branche synchronise ({{count}} commits de la base)",newCommitsOverlap:"{{count}} nouveau commit ({{files}} fichier(s) avec rsultats modifi(s))",newCommitsOverlap_plural:"{{count}} nouveaux commits ({{files}} fichier(s) avec rsultats modifi(s))",newCommitsNoOverlap:"{{count}} nouveau commit (aucun chevauchement avec les rsultats)",newCommitsNoOverlap_plural:"{{count}} nouveaux commits (aucun chevauchement avec les rsultats)",verifyChanges:"Vrifier les modifications",verifyAnyway:"Vrifier",runFollowupAnyway:"Lancer la vrification de suivi mme si aucun fichier ne chevauche",noBlockingIssues:"Aucun problme bloquant trouv. Cette PR peut tre fusionne.",findingsPostedWaiting:"{{count}} rsultat publi. En attente des modifications du contributeur.",findingsPostedWaiting_plural:"{{count}} rsultats publis. En attente des modifications du contributeur.",findingsPostedNoBlockers:"{{count}} rsultat publi. Aucun problme bloquant.",findingsPostedNoBlockers_plural:"{{count}} rsultats publis. Aucun problme bloquant.",needsAttention:"Ncessite attention",findingsNeedPosting:"{{count}} rsultat doit tre publi sur GitHub.",findingsNeedPosting_plural:"{{count}} rsultats doivent tre publis sur GitHub.",findingsFoundSelectPost:"{{count}} rsultat trouv. Slectionnez et publiez sur GitHub.",findingsFoundSelectPost_plural:"{{count}} rsultats trouvs. Slectionnez et publiez sur GitHub.",reviewLogs:"Journaux de rvision",followup:"Suivi",initial:"Initial",rerunFollowup:"Relancer la revue de suivi",rerunReview:"Relancer la revue",loadingMore:"Chargement des PRs...",scrollForMore:"Dfiler pour plus",allPRsLoaded:"Tous les PRs chargs",workflowsAwaitingApproval:"{{count}} workflow en attente d'approbation",workflowsAwaitingApproval_plural:"{{count}} workflows en attente d'approbation",blockedByWorkflows:"Bloqu",workflowsAwaitingDescription:"Cette PR provient d'un fork et ncessite l'approbation des workflows avant que les vrifications CI puissent s'excuter. Approuvez les workflows pour continuer.",viewOnGitHub:"Voir",approveWorkflow:"Approuver",approveAllWorkflows:"Approuver tous les workflows",postCleanReview:"Publier rvision propre",postingCleanReview:"Publication...",cleanReviewPosted:"Rvision propre publie",cleanReviewMessageTitle:"##  Auto Claude PR Review - PASSED",cleanReviewMessageStatus:"**Status:** All code is good",cleanReviewMessageFooter:"*This automated review found no issues. Generated by Auto Claude.*",failedPostCleanReview:"chec de la publication de la rvision",viewErrorDetails:"Voir les dtails",hideErrorDetails:"Masquer les dtails",postBlockedStatus:"Publier le statut",postingBlockedStatus:"Publication...",blockedStatusPosted:"Statut publi sur la PR",blockedStatusMessageTitle:"##  Auto Claude PR Review",blockedStatusMessageFooter:"*This review identified blockers that must be resolved before merge. Generated by Auto Claude.*",failedPostBlockedStatus:"chec de la publication du statut",logs:{agentActivity:"Activit des agents",showMore:"Afficher {{count}} de plus",hideMore:"Masquer {{count}}"}},qY={toggleExpand:"Afficher/masquer les dtails",downloading:"Tlchargement de {{count}} modle",downloading_plural:"Tlchargement de {{count}} modles",complete:"{{count}} tlchargement termin",complete_plural:"{{count}} tlchargements termins",failed:"{{count}} tlchargement chou",failed_plural:"{{count}} tlchargements chous",clearAll:"Effacer tous les tlchargements termins",done:"Termin",failedLabel:"chou",starting:"Dmarrage..."},WY={converting:"Conversion...",convertToTask:"Convertir en tche Auto-Build",dismissIdea:"Ignorer l'ide",description:"Description",rationale:"Justification",goToTask:"Aller  la tche",conversionFailed:"chec de la conversion",conversionFailedDescription:"Impossible de convertir l'ide en tche",conversionError:"Erreur de conversion",conversionErrorDescription:"Une erreur s'est produite lors de la conversion de l'ide"},KY={loadingMore:"Chargement...",scrollForMore:"Dfiler pour plus",allLoaded:"Toutes les issues charges"},YY={projectTab:OY,accessibility:FY,buttons:BY,labels:zY,time:$Y,errors:HY,notification:UY,rateLimit:GY,prReview:VY,downloads:qY,ideation:WY,issues:KY},XY={project:"Projet",tools:"Outils"},ZY={kanban:"Tableau Kanban",terminals:"Terminaux Agent",insights:"Insights",roadmap:"Feuille de route",ideation:"Idation",changelog:"Journal des modifications",context:"Contexte",githubIssues:"Issues GitHub",githubPRs:"PRs GitHub",gitlabIssues:"Issues GitLab",gitlabMRs:"MRs GitLab",worktrees:"Worktrees",agentTools:"Aperu MCP"},QY={settings:"Paramtres",help:"Aide & Feedback",newTask:"Nouvelle tche"},JY={settings:"Paramtres de l'application",help:"Aide & Feedback"},eX={initializeToCreateTasks:"Initialisez Auto Claude pour crer des tches"},tX={title:"Mise  jour disponible",version:"Version {{version}} est prte",updateAndRestart:"Mettre  jour et redmarrer",installAndRestart:"Installer et redmarrer",downloading:"Tlchargement...",dismiss:"Ignorer",downloadError:"chec du tlchargement de la mise  jour"},sX={checking:"Vrification de Claude Code...",upToDate:"Claude Code est  jour",updateAvailable:"Mise  jour Claude Code disponible",notInstalled:"Claude Code non install",error:"Erreur de vrification de Claude Code",installed:"Install",outdated:"Mise  jour disponible",missing:"Non install",current:"Actuelle",latest:"Dernire",path:"Chemin",lastChecked:"Dernire vrification",learnMore:"En savoir plus sur Claude Code",learnMoreAriaLabel:"En savoir plus sur Claude Code (s'ouvre dans une nouvelle fentre)",viewChangelog:"Voir le journal des modifications Claude Code",viewChangelogAriaLabel:"Voir le journal des modifications Claude Code (s'ouvre dans une nouvelle fentre)",updateWarningTitle:"Mettre  jour Claude Code ?",updateWarningDescription:"La mise  jour fermera toutes les sessions Claude Code en cours. Tout travail non sauvegard dans ces sessions pourrait tre perdu. Assurez-vous de sauvegarder votre travail avant de continuer.",updateAnyway:"Mettre  jour quand mme",switchVersion:"Changer de version",selectVersion:"Slectionner une version",loadingVersions:"Chargement des versions...",failedToLoadVersions:"chec du chargement des versions",installingVersion:"Installation de la version {{version}}...",rollbackWarningTitle:"Passer  la version {{version}} ?",rollbackWarningDescription:"Le changement de version fermera toutes les sessions Claude Code en cours. Tout travail non sauvegard dans ces sessions pourrait tre perdu. Assurez-vous de sauvegarder votre travail avant de continuer.",switchAnyway:"Changer quand mme",currentVersion:"Actuelle",switchInstallation:"Changer d'installation",selectInstallation:"Slectionner une installation",loadingInstallations:"Chargement des installations...",failedToLoadInstallations:"chec du chargement des installations",activeInstallation:"Active",pathChangeWarningTitle:"Changer d'installation CLI ?",pathChangeWarningDescription:"Le changement d'installation CLI utilisera un binaire Claude Code diffrent. Les sessions en cours continueront  utiliser l'installation prcdente jusqu' leur redmarrage.",switchInstallationConfirm:"Changer",versionUnknown:"version inconnue"},nX={sections:XY,items:ZY,actions:QY,tooltips:JY,messages:eX,updateBanner:tX,claudeCode:sX},rX="Paramtres",iX={app:"Paramtres de l'app",project:"Paramtres du projet"},aX={appearance:{title:"Apparence",description:"Personnalisez l'apparence de Auto Claude"},display:{title:"Affichage",description:"Ajustez la taille des lments de l'interface"},language:{title:"Langue",description:"Choisissez votre langue prfre"},devtools:{title:"Outils de dveloppement",description:"Prfrences IDE et terminal"},agent:{title:"Paramtres de l'agent",description:"Modle par dfaut et framework"},paths:{title:"Chemins",description:"Outils CLI et chemins framework"},integrations:{title:"Intgrations",description:"Cls API & comptes Claude"},"api-profiles":{title:"Profils API",description:"Profils d'endpoint API personnaliss"},updates:{title:"Mises  jour",description:"Mises  jour Auto Claude"},notifications:{title:"Notifications",description:"Prfrences d'alertes"},debug:{title:"Debug & Logs",description:"Outils de dpannage"}},oX={title:"Profils API",description:"Configurez des endpoints API compatibles Anthropic personnaliss",addButton:"Ajouter un profil",presets:{anthropic:"Anthropic",openrouter:"OpenRouter",groq:"Groq",glmGlobal:"GLM (Global)",glmChina:"GLM (China)"},fields:{name:"Nom",preset:"Prrglage",baseUrl:"URL de base",apiKey:"Cl API"},placeholders:{name:"Mon API personnalise",preset:"Choisir un prrglage de fournisseur",baseUrl:"https://api.anthropic.com",apiKey:"sk-ant-..."},hints:{preset:"Les prrglages remplissent l'URL de base ; vous devez toujours coller votre cl API.",baseUrl:"Exemple : https://api.anthropic.com ou http://localhost:8080"},validation:{nameRequired:"Le nom est requis",baseUrlRequired:"L'URL de base est requise",baseUrlInvalid:"Format d'URL invalide (doit tre http:// ou https://)",apiKeyRequired:"La cl API est requise",apiKeyInvalid:"Format de cl API invalide"},actions:{save:"Enregistrer le profil",saving:"Enregistrement...",cancel:"Annuler",changeKey:"Modifier",cancelKeyChange:"Annuler"},testConnection:{label:"Tester la connexion",testing:"Test en cours...",success:"Connexion russie",failure:"chec de la connexion"},models:{title:"Optionnel : correspondance des noms de modles",description:"Slectionnez des modles auprs de votre fournisseur d'API. Laissez vide pour utiliser les valeurs par dfaut.",defaultLabel:"Modle par dfaut (optionnel)",haikuLabel:"Modle Haiku (optionnel)",sonnetLabel:"Modle Sonnet (optionnel)",opusLabel:"Modle Opus (optionnel)",defaultPlaceholder:"ex. : claude-sonnet-4-5-20250929",haikuPlaceholder:"ex. : claude-haiku-4-5-20251001",sonnetPlaceholder:"ex. : claude-sonnet-4-5-20250929",opusPlaceholder:"ex. : claude-opus-4-5-20251101"},empty:{title:"Aucun profil API configur",description:"Crez un profil pour configurer des endpoints API personnaliss pour vos builds.",action:"Crer le premier profil"},switchToOauth:{label:"Passer  OAuth",loading:"Basculement..."},activeBadge:"Actif",customModels:"Modles personnaliss : {{models}}",setActive:{label:"Dfinir comme actif",loading:"Activation..."},tooltips:{edit:"Modifier le profil",deleteActive:"Passez  OAuth avant de supprimer",deleteInactive:"Supprimer le profil"},deleteAriaLabel:"Supprimer le profil {{name}}",toast:{create:{title:"Profil cr",description:'"{{name}}" a t ajout avec succs.'},update:{title:"Profil mis  jour",description:'"{{name}}" a t mis  jour avec succs.'},delete:{title:"Profil supprim",description:'"{{name}}" a t supprim.',errorTitle:"chec de la suppression du profil",errorFallback:"Une erreur s'est produite lors de la suppression du profil."},switch:{oauthTitle:"Pass  OAuth",oauthDescription:"Authentification OAuth utilise",profileTitle:"Profil activ",profileDescription:"Utilisation de {{name}}",errorTitle:"chec du changement d'authentification",errorFallback:"Une erreur s'est produite lors du changement de mthode d'authentification."}},dialog:{createTitle:"Ajouter un profil API",editTitle:"Modifier le profil",description:"Configurez un endpoint API compatible Anthropic personnalis pour vos builds.",deleteTitle:"Supprimer le profil ?",deleteDescription:'tes-vous sr de vouloir supprimer "{{name}}" ? Cette action est irrversible.',cancel:"Annuler",delete:"Supprimer",deleting:"Suppression..."}},lX={placeholder:"Slectionner un modle ou saisir manuellement",placeholderManual:"Saisir le nom du modle (ex. : claude-sonnet-4-5-20250929)",searchPlaceholder:"Rechercher des modles...",noResults:"Aucun modle ne correspond  votre recherche",discoveryNotAvailable:"Dcouverte de modles indisponible. Saisissez le nom du modle manuellement."},cX={label:"Langue de l'interface",description:"Slectionnez la langue de l'interface de l'application"},dX={presets:"Prrglages d'chelle",presetsDescription:"Options d'chelle rapides pour les prfrences courantes",fineTune:"Ajustement fin",fineTuneDescription:"Ajustez de 75%  200% par incrments de 5%",default:"Par dfaut",comfortable:"Confortable",large:"Grand"},uX={otherAgentSettings:"Autres paramtres de l'agent",otherAgentSettingsDescription:"Options de configuration supplmentaires de l'agent",agentFramework:"Framework de l'agent",agentFrameworkDescription:"Le framework de codage utilis pour les tches autonomes",agentFrameworkAutoClaude:"Auto Claude",aiTerminalNaming:"Nommage IA des terminaux",aiTerminalNamingDescription:"Nommer automatiquement les terminaux en fonction des commandes (utilise Haiku)",featureModelSettings:"Paramtres du modle de fonctionnalit",featureModelSettingsDescription:"Modle et niveau de rflexion pour Insights, Idation et Roadmap",model:"Modle",thinkingLevel:"Niveau de rflexion",paths:"Chemins",pathsDescription:"Configurer les chemins des excutables et du framework",pythonPath:"Chemin Python",pythonPathDescription:"Chemin vers l'excutable Python (laisser vide pour dtection automatique)",pythonPathPlaceholder:"python3 (par dfaut)",gitPath:"Chemin Git",gitPathDescription:"Chemin vers l'excutable Git (laisser vide pour dtection automatique)",gitPathPlaceholder:"git (par dfaut)",githubCLIPath:"Chemin GitHub CLI",githubCLIPathDescription:"Chemin vers l'excutable GitHub CLI (gh) (laisser vide pour dtection automatique)",githubCLIPathPlaceholder:"gh (par dfaut)",claudePath:"Chemin Claude CLI",claudePathDescription:"Chemin vers l'excutable Claude CLI (laisser vide pour dtection automatique)",claudePathPlaceholder:"claude (par dfaut)",detectedPath:"Dtect automatiquement",detectedVersion:"Version",detectedSource:"Source",sourceUserConfig:"Configuration utilisateur",sourceVenv:"Environnement virtuel",sourceHomebrew:"Homebrew",sourceNvm:"NVM",sourceSystemPath:"PATH systme",sourceBundled:"Intgr",sourceFallback:"Valeur par dfaut",notDetected:"Non dtect",autoClaudePath:"Chemin Auto Claude",autoClaudePathDescription:"Chemin relatif vers le rpertoire auto-claude dans les projets",autoClaudePathPlaceholder:"auto-claude (par dfaut)",autoNameTerminals:"Nommer automatiquement les terminaux",autoNameTerminalsDescription:"Utiliser l'IA pour gnrer des noms descriptifs pour les onglets de terminal en fonction de leur activit"},hX={title:"Apparence",description:"Personnalisez l'apparence de Auto Claude",mode:"Mode",modeDescription:"Choisir entre les thmes clair et sombre",light:"Clair",dark:"Sombre",system:"Systme",colorTheme:"Thme de couleur",colorThemeDescription:"Choisissez votre palette de couleurs prfre"},mX={title:"Outils de dveloppement",description:"Configurez votre IDE et terminal prfrs pour travailler avec les worktrees",detecting:"Dtection des outils installs...",detectAgain:"Dtecter  nouveau",ide:{label:"IDE prfr",description:"Auto Claude ouvrira les worktrees dans cet diteur",placeholder:"Slectionner un IDE...",customPath:"Chemin IDE personnalis",customPathPlaceholder:"/chemin/vers/votre/ide"},terminal:{label:"Terminal prfr",description:"Auto Claude ouvrira les sessions terminal ici",placeholder:"Slectionner un terminal...",customPath:"Chemin terminal personnalis",customPathPlaceholder:"/chemin/vers/votre/terminal"},detected:"Dtect",notInstalled:"Non install",detectedSummary:"Dtect sur votre systme :",noToolsDetected:"Aucun outil supplmentaire dtect (VS Code et le terminal systme seront utiliss)",yoloMode:{label:"Mode YOLO",description:"Dmarrer Claude avec le flag --dangerously-skip-permissions, contournant toutes les invites de scurit.  utiliser avec une extrme prudence.",warning:"Ce mode contourne le systme de permissions de Claude. N'activez que si vous faites entirement confiance au code excut."}},fX={title:"Mises  jour",description:"Grer les mises  jour de Auto Claude",appUpdateReady:"Mise  jour de l'app prte",newVersion:"Nouvelle version",released:"Publie le",downloading:"Tlchargement...",updateDownloaded:"Mise  jour tlcharge ! Cliquez sur Installer pour redmarrer et appliquer la mise  jour.",installAndRestart:"Installer et redmarrer",downloadUpdate:"Tlcharger la mise  jour",version:"Version",loading:"Chargement...",checkingForUpdates:"Vrification des mises  jour...",newVersionAvailable:"Nouvelle version disponible :",latestVersion:"Vous utilisez la dernire version.",viewRelease:"Voir la version complte sur GitHub",unableToCheck:"Impossible de vrifier les mises  jour",checkForUpdates:"Vrifier les mises  jour",autoUpdateProjects:"Mise  jour automatique des projets",autoUpdateProjectsDescription:"Mettre  jour automatiquement Auto Claude dans les projets quand une nouvelle version est disponible",betaUpdates:"Mises  jour bta",betaUpdatesDescription:"Recevoir les versions bta pr-release avec de nouvelles fonctionnalits (peut tre moins stable)",stableDowngradeAvailable:"Version stable disponible",stableDowngradeDescription:"Vous tes actuellement sur une version bta. Comme vous avez dsactiv les mises  jour bta, vous pouvez passer  la dernire version stable.",stableVersion:"Version stable",downloadStableVersion:"Tlcharger la version stable"},pX={title:"Notifications",description:"Configurer les prfrences de notification par dfaut",onTaskComplete:" la fin d'une tche",onTaskCompleteDescription:"Notifier quand une tche se termine avec succs",onTaskFailed:"En cas d'chec",onTaskFailedDescription:"Notifier quand une tche rencontre une erreur",onReviewNeeded:"Rvision requise",onReviewNeededDescription:"Notifier quand le QA ncessite votre rvision",sound:"Son",soundDescription:"Jouer un son avec les notifications"},gX={save:"Enregistrer les paramtres",rerunWizard:"Relancer l'assistant",rerunWizardDescription:"Redmarrer l'assistant de configuration"},xX={general:{title:"Gnral",description:"Auto-Build et configuration de l'agent",useClaudeMd:"Utiliser CLAUDE.md",useClaudeMdDescription:"Inclure les instructions CLAUDE.md dans le contexte de l'agent"},claude:{title:"Auth Claude",description:"Authentification Claude"},linear:{title:"Linear",description:"Intgration Linear",integrationTitle:"Intgration Linear",integrationDescription:"Se connecter  Linear pour le suivi des issues et l'import de tches",syncDescription:"Synchroniser avec Linear pour le suivi des issues"},github:{title:"GitHub",description:"Synchronisation issues GitHub",integrationTitle:"Intgration GitHub",integrationDescription:"Se connecter  GitHub pour le suivi des issues",syncDescription:"Synchroniser avec GitHub Issues"},gitlab:{title:"GitLab",description:"Synchronisation issues GitLab",integrationTitle:"Intgration GitLab",integrationDescription:"Se connecter  GitLab pour le suivi des issues",syncDescription:"Synchroniser avec GitLab Issues"},memory:{title:"Mmoire",description:"Backend mmoire Graphiti",integrationTitle:"Mmoire",integrationDescription:"Configurer la mmoire persistante inter-sessions pour les agents",syncDescription:"Configurer la mmoire persistante"}},vX={label:"Profil d'agent",title:"Profil d'agent par dfaut",sectionDescription:"Slectionnez une configuration prdfinie pour le modle et le niveau de rflexion",profilesInfo:"Les profils d'agent fournissent des configurations prdfinies pour le modle Claude et le niveau de rflexion. Quand vous crez une nouvelle tche, ces paramtres seront utiliss par dfaut. Vous pouvez toujours les modifier dans l'assistant de cration de tche.",custom:"Personnalis",customConfiguration:"Configuration personnalise",customDescription:"Choisir le modle et le niveau de rflexion",phaseConfiguration:"Configuration par phase",phaseConfigurationDescription:"Personnaliser le modle et le niveau de rflexion pour chaque phase",clickToCustomize:"Cliquer pour personnaliser",model:"Modle",thinking:"Rflexion",thinkingLevel:"Niveau de rflexion",selectModel:"Slectionner un modle",selectThinkingLevel:"Slectionner un niveau de rflexion",perPhaseOptimization:"(optimisation par phase)",resetToDefaults:"Rinitialiser par dfaut",resetToProfileDefaults:"Rinitialiser aux dfauts de {{profile}}",customized:"Personnalis",phaseConfigNote:"Ces paramtres seront utiliss par dfaut lors de la cration de nouvelles tches avec ce profil. Vous pouvez les modifier par tche dans l'assistant de cration.",phases:{spec:{label:"Cration de spec",description:"Dcouverte, exigences, collecte de contexte"},planning:{label:"Planification",description:"Planification de l'implmentation et architecture"},coding:{label:"Codage",description:"Implmentation du code"},qa:{label:"Rvision QA",description:"Assurance qualit et validation"}}},bX={roles:{backend:"Backend",frontend:"Frontend",mobile:"Mobile",shared:"Partag",apiGateway:"Passerelle API",worker:"Worker",other:"Autre"}},yX={title:"Intgrations",description:"Grer les comptes Claude et les cls API",claudeAccounts:"Comptes Claude",claudeAccountsDescription:"Ajoutez plusieurs abonnements Claude pour basculer automatiquement entre eux quand vous atteignez les limites.",noAccountsYet:"Aucun compte configur",default:"Par dfaut",active:"Actif",authenticated:"Authentifi",needsAuth:"Auth requise",authenticate:"Authentifier",setActive:"Dfinir actif",manualTokenEntry:"Saisie manuelle du token",runSetupToken:"Excutez claude setup-token pour obtenir votre token",tokenPlaceholder:"sk-ant-oat01-...",emailPlaceholder:"Email (optionnel, pour l'affichage)",saveToken:"Enregistrer le token",accountNamePlaceholder:"Nom du compte (ex: Travail, Personnel)",autoSwitching:"Basculement automatique de compte",autoSwitchingDescription:"Basculer automatiquement entre les comptes Claude pour viter les interruptions. Configurez la surveillance proactive pour changer avant d'atteindre les limites.",enableAutoSwitching:"Activer le basculement automatique",masterSwitch:"Interrupteur principal pour toutes les fonctionnalits auto-swap",proactiveMonitoring:"Surveillance proactive",proactiveDescription:"Vrifier l'utilisation rgulirement et changer avant d'atteindre les limites",checkUsageEvery:"Vrifier l'utilisation toutes les",seconds15:"15 secondes",seconds30:"30 secondes (recommand)",minute1:"1 minute",disabled:"Dsactiv",sessionThreshold:"Seuil d'utilisation de session",sessionThresholdDescription:"Changer quand l'utilisation de session atteint ce niveau (recommand: 95%)",weeklyThreshold:"Seuil d'utilisation hebdomadaire",weeklyThresholdDescription:"Changer quand l'utilisation hebdomadaire atteint ce niveau (recommand: 99%)",reactiveRecovery:"Rcupration ractive",reactiveDescription:"Basculer automatiquement quand une limite inattendue est atteinte",apiKeys:"Cls API",apiKeysInfo:"Les cls dfinies ici sont utilises par dfaut. Les projets individuels peuvent les remplacer dans leurs paramtres.",openaiKey:"Cl API OpenAI",openaiKeyDescription:"Requise pour le backend mmoire Graphiti (embeddings)",toast:{authSuccess:"Profil authentifi",authSuccessWithEmail:"Connect en tant que {{email}}",authSuccessGeneric:"Authentification termine. Vous pouvez maintenant utiliser ce profil.",authStartFailed:"chec de l'authentification",addProfileFailed:"chec de l'ajout du profil",tokenSaved:"Token enregistr",tokenSavedDescription:"Votre token a t enregistr avec succs.",tokenSaveFailed:"chec de l'enregistrement du token",settingsUpdateFailed:"chec de la mise  jour des paramtres",tryAgain:"Veuillez ressayer."}},wX={title:"Debug & Logs",description:"Accdez aux logs et informations de dbogage pour le dpannage",errorReporting:{label:"Rapports d'erreurs anonymes",description:"Envoyer des rapports de crash pour amliorer Auto Claude. Aucune donne personnelle ni code n'est collect."},openLogsFolder:"Ouvrir le dossier des logs",copyDebugInfo:"Copier les infos de dbogage",copied:"Copi !",loadInfo:"Charger les infos de dbogage",systemInfo:"Informations systme",logsLocation:"Emplacement des logs",recentErrors:"Erreurs rcentes",noRecentErrors:"Aucune erreur rcente",helpTitle:"Signaler des problmes",helpText:'Lors du signalement de bugs, cliquez sur "Copier les infos de dbogage" pour obtenir les informations systme et les erreurs rcentes qui nous aident  diagnostiquer le problme.'},jX={noProjectSelected:{title:"Aucun projet slectionn",description:"Slectionnez un projet dans la barre latrale pour configurer ses paramtres."}},SX={title:"Aperu des serveurs MCP",titleWithProject:"Aperu des serveurs MCP pour {{projectName}}",description:"Configurez quels serveurs MCP sont disponibles pour les agents dans ce projet",descriptionNoProject:"Slectionnez un projet pour configurer les serveurs MCP",serversEnabled:"{{count}} serveurs activs",configuration:"Configuration des serveurs MCP",configurationHint:"Les serveurs dsactivs rduisent l'utilisation du contexte et le temps de dmarrage",noProjectSelected:"Aucun projet slectionn",noProjectSelectedDescription:"Slectionnez un projet dans le menu droulant pour voir et configurer les serveurs MCP.",projectNotInitialized:"Projet non initialis",projectNotInitializedDescription:"Initialisez Auto Claude pour ce projet pour configurer les serveurs MCP.",browserAutomation:"Automatisation du navigateur (agents QA uniquement)",alwaysEnabled:"toujours activ",addServer:"Ajouter un serveur",addMcpTo:"Ajouter un serveur MCP  {{agent}}",addMcpDescription:"Slectionnez un serveur MCP  ajouter  cet agent",allMcpsAdded:"Tous les serveurs MCP disponibles sont dj ajouts",added:"ajout",removed:"supprim",remove:"Supprimer",restore:"Restaurer",noMcpServers:"Aucun serveur MCP",cannotRemove:"Impossible  supprimer (requis)",servers:{context7:{name:"Context7",description:"Recherche de documentation pour les bibliothques"},graphiti:{name:"Graphiti Memory",description:"Graphe de connaissances pour le contexte inter-sessions",notConfigured:"Ncessite la configuration mmoire (voir paramtres Mmoire)"},linear:{name:"Linear",description:"Intgration gestion de projet",notConfigured:"Ncessite l'intgration Linear (voir paramtres Linear)"},electron:{name:"Electron",description:"Automatisation d'applications desktop via Chrome DevTools"},puppeteer:{name:"Puppeteer",description:"Automatisation du navigateur web pour les tests"},autoClaude:{name:"Outils Auto-Claude",description:"Suivi de la progression du build"}},customServers:"Serveurs personnaliss",addCustomServer:"Ajouter un serveur personnalis",editCustomServer:"Modifier le serveur personnalis",customServerDescription:"Ajouter un serveur MCP bas sur une commande ou HTTP",serverType:"Type de serveur",typeCommand:"Commande (npx/npm)",typeHttp:"HTTP",serverName:"Nom",serverNamePlaceholder:"Mon serveur MCP",serverDescription:"Description",serverDescriptionPlaceholder:"Ce que fait ce serveur",command:"Commande",args:"Arguments",argsHint:"Arguments spars par des espaces",url:"URL",headers:"En-ttes",headerName:"Nom de l'en-tte",headerValue:"Valeur de l'en-tte",noCustomServers:"Aucun serveur personnalis configur. Ajoutez-en un pour l'utiliser avec vos agents.",errorNameRequired:"Le nom du serveur est requis",errorIdExists:"Un serveur avec cet ID existe dj",errorCommandRequired:"La commande est requise pour les serveurs bass sur commande",errorUrlRequired:"L'URL est requise pour les serveurs bass sur HTTP",testConnection:"Test",testing:"Test en cours...",authToken:"Jeton d'authentification",authTokenPlaceholder:"Collez votre jeton API ou PAT ici",authTokenHint:"Utilis comme jeton Bearer dans l'en-tte Authorization",advancedHeaders:"En-ttes supplmentaires",status:{healthy:"Le serveur rpond",unhealthy:"Le serveur ne rpond pas",needsAuth:"Authentification requise",checking:"Vrification...",unknown:"Statut inconnu"},hints:{github:"Ceci ressemble  un serveur MCP GitHub. Vous aurez besoin d'un Personal Access Token avec les scopes appropris.",createGithubPat:"Crer un PAT GitHub",google:"Ceci ressemble  une API Google. Vous aurez besoin d'un jeton OAuth ou d'une cl API.",createGoogleToken:"Crer des identifiants Google",anthropic:"Ceci ressemble  une API Anthropic. Vous aurez besoin d'une cl API.",createAnthropicKey:"Crer une cl API Anthropic",openai:"Ceci ressemble  une API OpenAI. Vous aurez besoin d'une cl API.",createOpenaiKey:"Crer une cl API OpenAI"}},_X={title:rX,tabs:iX,sections:aX,apiProfiles:oX,modelSelect:lX,language:cX,scale:dX,general:uX,theme:hX,devtools:mX,updates:fX,notifications:pX,actions:gX,projectSections:xX,agentProfile:vX,workspace:bX,integrations:yX,debug:wX,projectSettings:jX,mcp:SX},NX="Actualiser les tches",CX={backlog:"Backlog",todo:" faire",in_progress:"En cours",review:"Rvision",prCreated:"PR cre",complete:"Termin",archived:"Archiv"},kX={start:"Dmarrer",stop:"Arrter",recover:"Rcuprer",resume:"Reprendre",archive:"Archiver",delete:"Supprimer",view:"Voir les dtails",viewPR:"Voir la PR",moveTo:"Dplacer vers",taskActions:"Actions de la tche"},AX={running:"En cours",aiReview:"Rvision IA",needsReview:" rviser",pending:"En attente",stuck:"Bloqu",incomplete:"Incomplet",recovering:"Rcupration...",needsRecovery:"Rcupration requise",needsResume:"Reprise requise"},EX={completed:"Termin",hasErrors:"Contient des erreurs",qaIssues:"Problmes QA",approvePlan:"Approuver le plan"},TX={archiveTask:"Archiver la tche",archiveAllDone:"Archiver toutes les tches termines",viewPR:"Ouvrir la pull request dans le navigateur"},PX={title:"Crer une nouvelle tche",description:"Dcrivez ce que vous voulez construire",placeholder:"Dcrivez votre tche..."},RX={title:"Aucune tche",description:"Crez votre premire tche pour commencer"},DX={backlog:"Planification",in_progress:"En cours",ai_review:"Rvision IA",human_review:"Rvision humaine",done:"Termin",pr_created:"PR cre"},IX={emptyBacklog:"Aucune tche planifie",emptyBacklogHint:"Ajoutez une tche pour commencer",emptyInProgress:"Rien en cours",emptyInProgressHint:"Dmarrez une tche depuis le Backlog",emptyAiReview:"Aucune tche en rvision",emptyAiReviewHint:"L'IA rvisera les tches termines",emptyHumanReview:"Rien  rviser",emptyHumanReviewHint:"Les tches attendent votre approbation ici",emptyDone:"Aucune tche termine",emptyDoneHint:"Les tches approuves apparaissent ici",emptyDefault:"Aucune tche",dropHere:"Dposer ici",showArchived:"Afficher les archives",addTaskAriaLabel:"Ajouter une nouvelle tche au backlog",closeTaskDetailsAriaLabel:"Fermer les dtails de la tche",editTask:"Modifier la tche",cannotEditWhileRunning:"Impossible de modifier pendant l'excution",worktreeCleanupTitle:"Nettoyage du Worktree",worktreeCleanupStaged:"Cette tche a t prpare et possde un worktree. Voulez-vous nettoyer le worktree ?",worktreeCleanupNotStaged:"Cette tche possde un worktree avec des changements non fusionns. Supprimez le worktree pour marquer comme termin, ou annulez pour rviser les changements d'abord.",keepWorktree:"Garder le Worktree",deleteWorktree:"Supprimer le Worktree & Marquer Termin",refreshTasks:"Actualiser les tches"},MX={phases:{idle:"Inactif",planning:"Planification",coding:"Codage",reviewing:"Rvision",fixing:"Correction",complete:"Termin",failed:"chou"},labels:{interrupted:"Interrompu",progress:"Progression",entry:"entre",entries:"entres"},shortPhases:{plan:"Plan",code:"Code",qa:"QA"}},LX={title:"Fichiers",tab:"Fichiers",noSpecPath:"Aucun fichier de spcification disponible",noFiles:"Aucun fichier trouv",loading:"Chargement des fichiers...",loadingContent:"Chargement du contenu...",errorLoading:"chec du chargement des fichiers",errorLoadingContent:"chec du chargement du contenu du fichier",retry:"Ressayer",selectFile:"Slectionnez un fichier pour voir son contenu",openInIDE:"Ouvrir dans l'IDE"},OX={severity:"svrit",pullRequest:"Pull Request"},FX={removeImageAriaLabel:"Supprimer l'image {{filename}}",pasteHint:"Astuce : Collez des captures d'cran directement avec {{shortcut}} pour ajouter des images de rfrence."},BX={backgroundTaskTitle:"La tche continue en arrire-plan",backgroundTaskDescription:"La tche est toujours en cours. Vous pouvez rouvrir cette bote de dialogue pour suivre la progression."},zX={createTitle:"Crer une nouvelle tche",createDescription:"Dcrivez ce que vous voulez construire. L'IA analysera votre demande et crera une spcification dtaille.",descriptionPlaceholder:"Dcrivez la fonctionnalit, la correction de bug ou l'amlioration que vous souhaitez implmenter. Soyez aussi prcis que possible sur les exigences, les contraintes et le comportement attendu. Tapez @ pour rfrencer des fichiers.",draftRestored:"Brouillon restaur",startFresh:"Recommencer",hideFiles:"Masquer les fichiers",browseFiles:"Parcourir les fichiers",creating:"Cration...",createTask:"Crer la tche",worktreeNotice:{title:"Espace de travail isol",description:"Cette tche s'excute dans un worktree git isol. Votre branche principale reste protge jusqu' ce que vous choisissiez de fusionner."},gitOptions:{title:"Options Git (optionnel)",baseBranchLabel:"Branche de base (optionnel)",useProjectDefault:"Utiliser la branche par dfaut du projet",useProjectDefaultWithBranch:"Utiliser la branche par dfaut du projet ({{branch}})",helpText:"Remplacez la branche  partir de laquelle le worktree de cette tche sera cr. Laissez vide pour utiliser la branche par dfaut configure du projet.",useWorktreeLabel:"Utiliser un espace de travail isol (recommand)",useWorktreeDescription:"Cre les changements dans un worktree git spar pour une rvision scurise avant la fusion. Dsactivez pour travailler directement dans votre projet (plus rapide mais risqu)."},errors:{createFailed:"chec de la cration de la tche. Veuillez ressayer."}},$X={dragDropHint:"Glissez-dposez des images ou collez des captures d'cran",imageAdded:"Image ajoute avec succs",maxImagesError:"Maximum de {{count}} images autorises",invalidTypeError:"Type d'image invalide. Autoriss : {{types}}",removeImage:"Supprimer l'image",processingError:"chec du traitement de l'image"},HX={mergeTooltip:"Fusionne les changements de la branche worktree de la tche vers votre branche de base. L'IA rsoudra les conflits ventuels. Vous pourrez ensuite choisir de conserver ou de supprimer le worktree."},UX={title:"Modifier la tche",description:"Mettez  jour les dtails de la tche, y compris le titre, la description, la classification, les images et les paramtres. Les modifications seront enregistres dans les fichiers de spcification.",saveChanges:"Enregistrer les modifications",errors:{updateFailed:"chec de la mise  jour de la tche. Veuillez ressayer."}},GX={description:"Description",descriptionPlaceholder:"Dcrivez la fonctionnalit, la correction de bug ou l'amlioration que vous souhaitez implmenter. Soyez aussi prcis que possible sur les exigences, les contraintes et le comportement attendu.",imageAddedSuccess:"Image ajoute avec succs !",taskTitle:"Titre de la tche",titlePlaceholder:"Laissez vide pour gnrer automatiquement  partir de la description",titleHelpText:"Un titre court et descriptif sera gnr automatiquement s'il est laiss vide.",classificationOptional:"Classification (optionnel)",requireReviewLabel:"Exiger une rvision humaine avant le codage",requireReviewDescription:"Lorsque activ, vous serez invit  rviser la spcification et le plan d'implmentation avant le dbut de la phase de codage. Cela vous permet d'approuver, de demander des modifications ou de fournir des commentaires.",errors:{descriptionRequired:"Veuillez fournir une description",maxImagesReached:"Maximum de 5 images autoris",invalidImageType:"Type d'image non valide. Autoriss : PNG, JPEG, GIF, WebP",processPasteFailed:"chec du traitement de l'image colle",processDropFailed:"chec du traitement de l'image dpose"},classification:{category:"Catgorie",selectCategory:"Slectionner une catgorie",priority:"Priorit",selectPriority:"Slectionner une priorit",complexity:"Complexit",selectComplexity:"Slectionner une complexit",impact:"Impact",selectImpact:"Slectionner un impact",helpText:"Ces tiquettes aident  organiser et  prioriser les tches. Elles sont optionnelles mais utiles pour le filtrage.",values:{category:{feature:"Fonctionnalit",bug_fix:"Correction de bug",refactoring:"Refactoring",documentation:"Documentation",security:"Scurit"},priority:{low:"Basse",medium:"Moyenne",high:"Haute",urgent:"Urgente"},complexity:{trivial:"Triviale",small:"Petite",medium:"Moyenne",large:"Grande",complex:"Complexe"},impact:{low:"Impact faible",medium:"Impact moyen",high:"Impact lev",critical:"Impact critique"}}}},VX={untitled:"Sous-tche sans titre"},qX={refreshTasks:NX,status:CX,actions:kX,labels:AX,reviewReason:EX,tooltips:TX,creation:PX,empty:RX,columns:DX,kanban:IX,execution:MX,files:LX,metadata:OX,images:FX,notifications:BX,wizard:zX,feedback:$X,review:HX,edit:UX,form:GX,subtasks:VX},WX={title:"Bienvenue sur Auto Claude",subtitle:"Construisez des logiciels de manire autonome avec des agents IA"},KX={newProject:"Nouveau projet",openProject:"Ouvrir un projet"},YX={title:"Projets rcents",empty:"Aucun projet",emptyDescription:"Crez un nouveau projet ou ouvrez-en un existant pour commencer",openFolder:"Ouvrir le dossier",openProjectAriaLabel:"Ouvrir le projet {{name}}"},XX={hero:WX,actions:KX,recentProjects:YX},ZX={title:"Assistant de configuration",description:"Configurez votre environnement Auto Claude en quelques tapes simples",helpText:"Cet assistant vous aidera  configurer votre environnement en quelques tapes. Vous pouvez configurer votre token OAuth Claude, activer les fonctionnalits de mmoire et crer votre premire tche."},QX={title:"Bienvenue sur Auto Claude",subtitle:"Construisez des logiciels de manire autonome avec des agents IA",getStarted:"Commencer",skip:"Passer la configuration",features:{aiPowered:{title:"Dveloppement assist par IA",description:"Gnrez du code et construisez des fonctionnalits avec les agents Claude Code"},specDriven:{title:"Workflow bas sur les specs",description:"Dfinissez des tches avec des spcifications claires et laissez Auto Claude grer l'implmentation"},memory:{title:"Mmoire & Contexte",description:"Mmoire persistante entre les sessions avec Graphiti"},parallel:{title:"Excution parallle",description:"Excutez plusieurs agents en parallle pour des cycles de dveloppement plus rapides"}}},JX={title:"Authentification Claude",description:"Connectez votre compte Claude pour activer les fonctionnalits IA",configureTitle:"Configurer l'authentification Claude",addAccountsDesc:"Ajoutez vos comptes Claude pour activer les fonctionnalits IA",multiAccountInfo:"Ajoutez plusieurs abonnements Claude pour basculer automatiquement entre eux lorsque vous atteignez les limites.",noAccountsYet:"Aucun compte configur",badges:{default:"Par dfaut",active:"Actif",authenticated:"Authentifi",needsAuth:"Auth requise"},buttons:{authenticate:"Authentifier",setActive:"Dfinir actif",rename:"Renommer",delete:"Supprimer",add:"Ajouter",adding:"Ajout...",showToken:"Afficher le jeton",hideToken:"Masquer le jeton",copyToken:"Copier le jeton",back:"Retour",continue:"Continuer",skip:"Passer"},labels:{accountName:"Nom du compte",namePlaceholder:"Nom du profil (ex: Travail, Personnel)",tokenLabel:"Jeton OAuth",tokenPlaceholder:"Entrez le jeton ici",tokenHint:"Collez le jeton affich dans votre terminal aprs la connexion OAuth."},keychainTitle:"Stockage scuris",keychainDescription:"Vos jetons sont chiffrs  l'aide du trousseau de cls de votre systme. Une demande de mot de passe macOS peut apparatre  cliquez sur  Toujours autoriser  pour ne plus la revoir.",toast:{authSuccess:"Profil authentifi avec succs",authSuccessWithEmail:"Compte : {{email}}",authSuccessGeneric:"Authentification termine. Vous pouvez maintenant utiliser ce profil.",authStartFailed:"chec du dmarrage de l'authentification",addProfileFailed:"chec de l'ajout du profil",tokenSaved:"Jeton enregistr",tokenSavedDescription:"Votre jeton a t enregistr avec succs.",tokenSaveFailed:"chec de l'enregistrement du jeton",tryAgain:"Veuillez ressayer."}},eZ={title:"Mmoire",description:"Configurer la mmoire persistante entre sessions pour les agents",contextDescription:"La mmoire Auto Claude aide  retenir le contexte entre vos sessions de code",enableMemory:"Activer la mmoire",enableMemoryDescription:"Mmoire persistante entre sessions utilisant LadybugDB (base de donnes intgre)",memoryDisabledInfo:"La mmoire est dsactive. Les informations de session seront stockes uniquement dans des fichiers locaux. Activez la mmoire pour un contexte persistant entre sessions avec recherche smantique.",enableAgentAccess:"Activer l'accs mmoire des agents",enableAgentAccessDescription:"Permettre aux agents de rechercher et d'ajouter au graphe de connaissances via MCP",mcpServerUrl:"URL du serveur Graphiti MCP",mcpServerUrlDescription:"URL du serveur Graphiti MCP pour l'accs mmoire des agents",embeddingProvider:"Fournisseur d'embeddings",embeddingProviderDescription:"Fournisseur pour la recherche smantique (optionnel - la recherche par mots-cls fonctionne sans)",selectEmbeddingModel:"Slectionner le modle d'embedding",openaiApiKey:"Cl API OpenAI",openaiApiKeyDescription:"Requise pour les embeddings OpenAI",openaiGetKey:"Obtenez votre cl sur",voyageApiKey:"Cl API Voyage AI",voyageApiKeyDescription:"Requise pour les embeddings Voyage AI",googleApiKey:"Cl API Google AI",googleApiKeyDescription:"Requise pour les embeddings Google AI",azureConfig:"Configuration Azure OpenAI",azureApiKey:"Cl API",azureBaseUrl:"URL de base",azureEmbeddingDeployment:"Nom du dploiement d'embedding",memoryInfo:"La mmoire stocke les dcouvertes, motifs et informations sur votre codebase pour que les futures sessions dmarrent avec le contexte dj charg. Pas de Docker requis - utilise une base de donnes intgre.",learnMore:"En savoir plus sur la mmoire",back:"Retour",skip:"Passer",saving:"Enregistrement...",saveAndContinue:"Enregistrer et continuer",providers:{ollama:"Ollama (Local - Gratuit)",openai:"OpenAI",voyage:"Voyage AI",google:"Google AI",azure:"Azure OpenAI"}},tZ={title:"Vous tes prt !",subtitle:"Auto Claude est prt  vous aider  construire des logiciels incroyables",setupComplete:"Configuration termine",setupCompleteDescription:"Votre environnement est configur et prt. Vous pouvez commencer  crer des tches immdiatement ou explorer l'application  votre rythme.",whatsNext:"Et maintenant ?",createTask:{title:"Crer une tche",description:"Commencez par crer votre premire tche pour voir Auto Claude en action.",action:"Ouvrir le crateur de tches"},customizeSettings:{title:"Personnaliser les paramtres",description:"Affinez vos prfrences, configurez les intgrations ou relancez cet assistant.",action:"Ouvrir les paramtres"},exploreDocs:{title:"Explorer la documentation",description:"En savoir plus sur les fonctionnalits avances, les bonnes pratiques et le dpannage."},finish:"Terminer et commencer  construire",rerunHint:"Vous pouvez toujours relancer cet assistant depuis Paramtres  Application"},sZ={welcome:"Bienvenue",authChoice:"Mthode d'auth",auth:"Auth",claudeCode:"CLI",devtools:"Outils dev",privacy:"Confidentialit",memory:"Mmoire",done:"Termin"},nZ={title:"Aidez  amliorer Auto Claude",subtitle:"Les rapports d'erreurs anonymes nous aident  corriger les bugs plus rapidement",whatWeCollect:{title:"Ce que nous collectons",crashReports:"Rapports de crash et traces d'erreurs",errorMessages:"Messages d'erreur (avec chemins de fichiers anonymiss)",appVersion:"Version de l'app et informations systme"},whatWeNeverCollect:{title:"Ce que nous ne collectons jamais",code:"Votre code ou fichiers de projet",filenames:"Chemins de fichiers complets (noms d'utilisateur masqus)",apiKeys:"Cls API ou jetons",personalData:"Informations personnelles ou donnes d'utilisation"},toggle:{label:"Envoyer des rapports d'erreurs anonymes",description:"Aidez-nous  identifier et corriger les problmes"}},rZ={title:"Claude Code CLI",description:"Installez ou mettez  jour le CLI Claude Code pour activer les fonctionnalits IA",detecting:"Vrification de l'installation de Claude Code...",info:{title:"Qu'est-ce que Claude Code ?",description:"Claude Code est le CLI officiel d'Anthropic qui alimente les fonctionnalits IA d'Auto Claude. Il fournit une authentification scurise et un accs direct aux modles Claude."},status:{installed:"Install",outdated:"Mise  jour disponible",notFound:"Non install"},version:{current:"Version actuelle",latest:"Dernire version"},install:{button:"Installer Claude Code",updating:"Mettre  jour Claude Code",inProgress:"Installation...",success:"Commande d'installation envoye au terminal. Veuillez terminer l'installation l-bas.",instructions:"L'installateur s'ouvrira dans votre terminal. Suivez les instructions pour terminer l'installation."},learnMore:"En savoir plus sur Claude Code"},iZ={title:"Outils de dveloppement",description:"Choisissez votre IDE et terminal prfrs pour travailler avec les worktrees Auto Claude",detecting:"Dtection des outils installs...",detectAgain:"Dtecter  nouveau",whyConfigure:"Pourquoi configurer ceci ?",whyConfigureDescription:"Quand Auto Claude construit des fonctionnalits dans des worktrees isols, vous pouvez les ouvrir directement dans votre IDE ou terminal prfr pour tester et rviser les changements.",ide:{label:"IDE prfr",description:"Auto Claude ouvrira les worktrees dans cet diteur",customPath:"Chemin IDE personnalis"},terminal:{label:"Terminal prfr",description:"Auto Claude ouvrira les sessions terminal ici",customPath:"Chemin terminal personnalis"},detectedSummary:"Dtect sur votre systme :",noToolsDetected:"Aucun outil supplmentaire dtect (VS Code et le terminal systme seront utiliss)",custom:"Personnalis...",saveAndContinue:"Enregistrer et continuer"},aZ={notInstalled:{title:"Ollama non install",description:"Ollama fournit des modles d'embeddings locaux gratuits pour la recherche smantique. Installez-le en un clic pour activer cette fonctionnalit.",installSuccess:"Installation lance dans votre terminal. Terminez l'installation l-bas, puis cliquez sur Ressayer.",installButton:"Installer Ollama",installing:"Installation...",retry:"Ressayer",learnMore:"En savoir plus",fallbackNote:"La mmoire fonctionnera toujours avec la recherche par mots-cls mme sans Ollama."},notRunning:{title:"Ollama non dmarr",description:"Ollama est install mais non dmarr. Lancez Ollama pour utiliser les modles d'embeddings locaux.",retry:"Ressayer",fallbackNote:"La mmoire fonctionnera toujours avec la recherche par mots-cls mme sans embeddings."}},oZ={wizard:ZX,welcome:QX,oauth:JX,memory:eZ,completion:tZ,steps:sZ,privacy:nZ,claudeCode:rZ,devtools:iZ,ollama:aZ},lZ={title:"Initialiser Auto Claude",description:"Ce projet n'a pas Auto Claude initialis. Voulez-vous le configurer maintenant ?",willDo:"Ceci va :",createFolder:"Crer un dossier .auto-claude dans votre projet",copyFramework:"Copier les fichiers du framework Auto Claude",setupSpecs:"Configurer le rpertoire des spcifications pour vos tches",sourcePathNotConfigured:"Chemin source non configur",sourcePathNotConfiguredDescription:"Veuillez dfinir le chemin source Auto Claude dans les paramtres de l'application avant d'initialiser.",initFailed:"chec de l'initialisation",initFailedDescription:"chec de l'initialisation de Auto Claude. Veuillez ressayer."},cZ={title:"Dpt Git requis",description:"Auto Claude utilise git pour construire des fonctionnalits en toute scurit dans des espaces de travail isols",notGitRepo:"Ce dossier n'est pas un dpt git",noCommits:"Le dpt git n'a pas de commits",needsInit:"Git doit tre initialis avant que Auto Claude puisse grer votre code.",needsCommit:"Au moins un commit est requis pour que Auto Claude puisse crer des worktrees.",willSetup:"Nous allons configurer git pour vous :",initRepo:"Initialiser un nouveau dpt git",createCommit:"Crer un commit initial avec vos fichiers actuels",manual:"Prfrez-vous le faire manuellement ?",settingUp:"Configuration de Git",initializingRepo:"Initialisation du dpt git et cration du commit initial...",success:"Git initialis",readyToUse:"Votre projet est maintenant prt  tre utilis avec Auto Claude !"},dZ={connectTitle:"Connecter  GitHub",connectDescription:"Auto Claude ncessite GitHub pour grer vos branches de code et maintenir les tches  jour.",claudeTitle:"Connecter  Claude AI",claudeDescription:"Auto Claude utilise Claude AI pour des fonctionnalits intelligentes comme la gnration de feuille de route, l'automatisation des tches et l'idation.",selectRepo:"Slectionner le dpt",repoDescription:"Auto Claude utilisera ce dpt pour grer les branches de tches et maintenir votre code  jour.",selectBranch:"Slectionner la branche de base",branchDescription:"Choisissez quelle branche Auto Claude doit utiliser comme base pour crer les branches de tches.",whyBranch:"Pourquoi slectionner une branche ?",branchExplanation:"Auto Claude cre des espaces de travail isols pour chaque tche. Slectionner la bonne branche de base garantit que vos tches dmarrent avec le code le plus rcent de votre ligne de dveloppement principale.",ready:"Auto Claude est prt  l'emploi ! Vous pouvez maintenant crer des tches qui seront automatiquement bases sur la branche {{branchName}}.",createRepoAriaLabel:"Crer un nouveau dpt sur GitHub",linkRepoAriaLabel:"Lier  un dpt existant",goBackAriaLabel:"Retourner  la slection du dpt",selectOwnerAriaLabel:"Slectionner {{owner}} comme propritaire du dpt",selectOrgAriaLabel:"Slectionner {{org}} comme propritaire du dpt",selectVisibilityAriaLabel:"Dfinir la visibilit du dpt sur {{visibility}}"},uZ={title:"Worktrees",description:"Grez les espaces de travail isols pour vos tches Auto Claude",empty:"Aucun worktree",emptyDescription:"Les worktrees sont crs automatiquement quand Auto Claude construit des fonctionnalits. Ils fournissent des espaces de travail isols pour chaque tche.",merge:"Fusionner le worktree",mergeDescription:"Fusionner les modifications de ce worktree dans la branche de base.",delete:"Supprimer le worktree ?",deleteDescription:"Ceci supprimera dfinitivement le worktree et toutes les modifications non committes. Cette action est irrversible."},hZ={title:"Terminer la tche",hasWorktree:'La tche <strong>"{{taskTitle}}"</strong> a encore un espace de travail isol (worktree).',willDelete:"Pour marquer cette tche comme termine, le worktree et sa branche associe seront supprims.",warning:"Assurez-vous d'avoir fusionn ou sauvegard les modifications que vous souhaitez conserver avant de continuer.",confirm:"Supprimer le worktree et terminer",completing:"Finalisation...",retry:"Ressayer",errorTitle:"chec du nettoyage",errorDescription:"chec du nettoyage du worktree. Veuillez ressayer."},mZ={title:"Auto Claude",projectInitialized:"Le projet est initialis."},fZ={title:"Ajouter une fonctionnalit",description:"Ajoutez une nouvelle fonctionnalit  votre feuille de route. Fournissez des dtails sur ce que vous voulez construire et comment cela s'intgre dans votre stratgie produit.",featureTitle:"Titre de la fonctionnalit",featureTitlePlaceholder:"ex. Authentification utilisateur, Mode sombre",featureDescription:"Description",featureDescriptionPlaceholder:"Dcrivez ce que fait cette fonctionnalit et pourquoi elle est utile aux utilisateurs.",rationale:"Justification",optional:"optionnel",rationalePlaceholder:"Expliquez pourquoi cette fonctionnalit devrait tre construite et comment elle s'intgre dans la vision produit.",phase:"Phase",selectPhase:"Slectionner une phase",priority:"Priorit",selectPriority:"Slectionner une priorit",complexity:"Complexit",selectComplexity:"Slectionner la complexit",impact:"Impact",selectImpact:"Slectionner l'impact",lowComplexity:"Faible",mediumComplexity:"Moyen",highComplexity:"lev",lowImpact:"Impact faible",mediumImpact:"Impact moyen",highImpact:"Impact lev",titleRequired:"Le titre est requis",descriptionRequired:"La description est requise",phaseRequired:"Veuillez slectionner une phase",cancel:"Annuler",adding:"Ajout en cours...",addFeature:"Ajouter la fonctionnalit",failedToAdd:"chec de l'ajout de la fonctionnalit. Veuillez ressayer."},pZ={title:"Ajouter un projet",description:"Choisissez comment vous souhaitez ajouter un projet",openExisting:"Ouvrir un dossier existant",openExistingDescription:"Parcourir vers un projet existant sur votre ordinateur",createNew:"Crer un nouveau projet",createNewDescription:"Commencer avec un nouveau dossier de projet",createNewTitle:"Crer un nouveau projet",createNewSubtitle:"Configurer un nouveau dossier de projet",projectName:"Nom du projet",projectNamePlaceholder:"mon-super-projet",projectNameHelp:"Ce sera le nom du dossier. Utilisez des minuscules avec des tirets.",location:"Emplacement",locationPlaceholder:"Slectionner un dossier...",willCreate:"Va crer :",browse:"Parcourir",initGit:"Initialiser un dpt git",back:"Retour",creating:"Cration en cours...",createProject:"Crer le projet",nameRequired:"Veuillez entrer un nom de projet",locationRequired:"Veuillez slectionner un emplacement",failedToOpen:"chec de l'ouverture du projet",failedToCreate:"chec de la cration du projet",openExistingAriaLabel:"Ouvrir un dossier de projet existant",createNewAriaLabel:"Crer un nouveau projet"},gZ={title:"Configuration du modle personnalis",description:"Configurez le modle et le niveau de rflexion pour cette session de chat.",model:"Modle",thinkingLevel:"Niveau de rflexion",cancel:"Annuler",apply:"Appliquer"},xZ={title:"Retirer le projet ?",description:`Ceci va retirer "{{projectName}}" de l'application. Vos fichiers seront prservs sur le disque et vous pourrez r-ajouter le projet plus tard.`,cancel:"Annuler",remove:"Retirer",error:"chec de la suppression du projet"},vZ={title:"Mise  jour de l'application disponible",description:"Une nouvelle version d'Auto Claude est prte  tre tlcharge",newVersion:"Nouvelle version",released:"Publie",downloading:"Tlchargement...",downloadUpdate:"Tlcharger la mise  jour",installAndRestart:"Installer et redmarrer",installLater:"Installer plus tard",remindMeLater:"Me rappeler plus tard",updateDownloaded:"Mise  jour tlcharge avec succs ! Cliquez sur Installer pour redmarrer et appliquer la mise  jour.",downloadError:"chec du tlchargement de la mise  jour",claudeCodeChangelog:"Voir le journal des modifications Claude Code",claudeCodeChangelogAriaLabel:"Voir le journal des modifications Claude Code (s'ouvre dans une nouvelle fentre)"},bZ={initialize:lZ,gitSetup:cZ,githubSetup:dZ,worktrees:uZ,worktreeCleanup:hZ,update:mZ,addFeature:fZ,addProject:pZ,customModel:gZ,removeProject:xZ,appUpdate:vZ},yZ="Issues GitLab",wZ={opened:"Ouvert",closed:"Ferm"},jZ={simple:"Simple",standard:"Standard",complex:"Complexe"},SZ={open:"ouvertes",searchPlaceholder:"Rechercher des issues..."},_Z={opened:"Ouvertes",closed:"Fermes",all:"Toutes"},NZ={noMatch:"Aucune issue ne correspond  votre recherche",selectIssue:"Slectionnez une issue pour voir les dtails"},CZ={title:"GitLab non connect",description:"Configurez votre token GitLab et le projet dans les paramtres du projet pour synchroniser les issues.",openSettings:"Ouvrir les paramtres"},kZ={notes:"notes",viewTask:"Voir la tche",createTask:"Crer une tche",taskLinked:"Tche lie",taskId:"ID de tche",description:"Description",noDescription:"Aucune description fournie.",assignees:"Assigns",milestone:"Jalon"},AZ={title:"Crer une tche  partir de l'issue",issuePrefix:"Issue",description:"Crez une tche  partir de cette issue GitLab. La tche sera ajoute  votre tableau Kanban dans la colonne Backlog.",selectNotes:"Slectionner les notes  inclure",deselectAll:"Tout dslectionner",selectAll:"Tout slectionner",willInclude:"La tche inclura :",includeTitle:"Titre et description de l'issue",includeLink:"Lien vers l'issue GitLab",includeLabels:"Labels et mtadonnes de l'issue",noNotes:"Pas de notes (cette issue n'a pas de notes)",failedToLoadNotes:"chec du chargement des notes",taskCreated:"Tche cre ! Consultez-la dans votre tableau Kanban.",creating:"Cration...",cancel:"Annuler",done:"Termin",close:"Fermer"},EZ={enableIssues:"Activer les issues GitLab",enableIssuesDescription:"Synchroniser les issues depuis GitLab et crer des tches automatiquement",instance:"Instance GitLab",instanceDescription:"Utilisez https://gitlab.com ou l'URL de votre instance auto-hberge",connectedVia:"Connect via GitLab CLI",authenticatedAs:"Authentifi en tant que",useDifferentToken:"Utiliser un autre token",authentication:"Authentification GitLab",useManualToken:"Utiliser un token manuel",authenticating:"Authentification avec glab CLI...",browserWindow:"Une fentre de navigateur devrait s'ouvrir pour vous connecter.",personalAccessToken:"Token d'accs personnel",useOAuth:"Utiliser OAuth  la place",tokenScope:"Crez un token avec le scope",scopeApi:"api",scopeFrom:"depuis",gitlabSettings:"Paramtres GitLab",project:"Projet",enterManually:"Saisir manuellement",loadingProjects:"Chargement des projets...",selectProject:"Slectionner un projet...",searchProjects:"Rechercher des projets...",noMatchingProjects:"Aucun projet correspondant",noProjectsFound:"Aucun projet trouv",selected:"Slectionn",projectFormat:"Format :",projectFormatExample:"(ex: gitlab-org/gitlab)",connectionStatus:"tat de la connexion",checking:"Vrification...",connectedTo:"Connect ",notConnected:"Non connect",issuesAvailable:"Issues disponibles",issuesAvailableDescription:"Accdez aux issues GitLab depuis la barre latrale pour les consulter, investiguer et crer des tches.",defaultBranch:"Branche par dfaut",defaultBranchDescription:"Branche de base pour crer les worktrees de tches",loadingBranches:"Chargement des branches...",autoDetect:"Auto-dtection (main/master)",searchBranches:"Rechercher des branches...",noMatchingBranches:"Aucune branche correspondante",noBranchesFound:"Aucune branche trouve",branchFromNote:"Toutes les nouvelles tches partiront de",autoSyncOnLoad:"Sync auto au chargement",autoSyncDescription:"Rcuprer automatiquement les issues au chargement du projet",cli:{required:"GitLab CLI requis",notInstalled:"La CLI GitLab (glab) est requise pour l'authentification OAuth. Installez-la pour utiliser l'option 'Utiliser OAuth'.",installButton:"Installer glab",installing:"Installation...",installSuccess:"Installation dmarre dans votre terminal. Terminez-la et cliquez sur Actualiser.",refresh:"Actualiser",learnMore:"En savoir plus",installed:"GitLab CLI install :"}},TZ={title:"Merge Requests GitLab",newMR:"Nouvelle Merge Request",selectMR:"Slectionnez une merge request pour voir les dtails",states:{opened:"Ouverte",closed:"Ferme",merged:"Fusionne",locked:"Verrouille"},filters:{opened:"Ouvertes",closed:"Fermes",merged:"Fusionnes",all:"Toutes"}},PZ={runReview:"Lancer la revue IA",reviewing:"Analyse en cours...",followupReview:"Revue de suivi",newCommits:"nouveau commit",newCommitsPlural:"nouveaux commits",cancel:"Annuler",postFindings:"Publier les rsultats",posting:"Publication...",postedTo:"Publi sur GitLab",approve:"Approuver",approving:"Approbation...",merge:"Fusionner la MR",merging:"Fusion...",aiReviewResult:"Rsultat de la revue IA",followupReviewResult:"Revue de suivi",description:"Description",noDescription:"Aucune description fournie.",labels:"Labels",status:{notReviewed:"Non analyse",notReviewedDesc:"Lancez une revue IA pour analyser cette MR",reviewComplete:"Revue termine",reviewCompleteDesc:"problme(s) trouv(s). Slectionnez et publiez sur GitLab.",waitingForChanges:"En attente de modifications",waitingForChangesDesc:"rsultat(s) publi(s). En attente des corrections du contributeur.",readyToMerge:"Prte  fusionner",readyToMergeDesc:"Aucun problme bloquant. Cette MR peut tre fusionne.",needsAttention:"Attention requise",needsAttentionDesc:"rsultat(s)  publier sur GitLab.",readyForFollowup:"Prte pour suivi",readyForFollowupDesc:"depuis la revue. Lancez un suivi pour vrifier si les problmes sont rsolus.",blockingIssues:"Problmes bloquants",blockingIssuesDesc:"problme(s) bloquant(s) encore ouvert(s)."},overallStatus:{approve:"Approuver",requestChanges:"Modifications demandes",comment:"Commentaire"},severity:{critical:"Bloquant",criticalDesc:" corriger",high:"Requis",highDesc:" traiter",medium:"Recommand",mediumDesc:"Amliore la qualit",low:"Suggestion",lowDesc:" considrer"},resolution:{resolved:"rsolu(s)",stillOpen:"encore ouvert(s)",newIssue:"nouveau problme",newIssues:"nouveaux problmes"}},RZ={summary:"slectionn(s)",selectCriticalHigh:"Slectionner Bloquant/Requis",selectAll:"Tout slectionner",clear:"Effacer",noIssues:"Aucun problme trouv ! Le code est bon.",suggestedFix:"Correction suggre :",posted:"Publi",severity:{critical:"Bloquant",criticalDesc:" corriger",high:"Requis",highDesc:" traiter",medium:"Recommand",mediumDesc:"Amliore la qualit",low:"Suggestion",lowDesc:" considrer"},category:{security:"Scurit",quality:"Qualit",style:"Style",test:"Test",docs:"Documentation",pattern:"Pattern",performance:"Performance",logic:"Logique"}},DZ={title:yZ,states:wZ,complexity:jZ,header:SZ,filters:_Z,empty:NZ,notConnected:CZ,detail:kZ,investigation:AZ,settings:EZ,mergeRequests:TZ,mrReview:PZ,findings:RZ},IZ={openTerminal:"Ouvrir le terminal",openInbuilt:"Ouvrir dans le terminal intgr",openExternal:"Ouvrir dans le terminal externe"},MZ={branchHasNewCommits:"La branche {{branch}} a {{count}} nouveau commit.",branchHasNewCommits_other:"La branche {{branch}} a {{count}} nouveaux commits.",branchHasNewCommitsSinceWorktree:"La branche {{branch}} a {{count}} nouveau commit depuis la cration de ce worktree.",branchHasNewCommitsSinceWorktree_other:"La branche {{branch}} a {{count}} nouveaux commits depuis la cration de ce worktree.",filesNeedMerging:"{{count}} fichier ncessite une fusion.",filesNeedMerging_other:"{{count}} fichiers ncessitent une fusion.",filesNeedIntelligentMerging:"{{count}} fichier ncessitera une fusion intelligente :",filesNeedIntelligentMerging_other:"{{count}} fichiers ncessiteront une fusion intelligente :",branchHasNewCommitsSinceBuild:"La branche {{branch}} a {{count}} nouveau commit depuis le dbut de ce build.",branchHasNewCommitsSinceBuild_other:"La branche {{branch}} a {{count}} nouveaux commits depuis le dbut de ce build.",filesNeedAIMergeDueToRenames:"{{count}} fichier ncessite une fusion IA en raison de {{renameCount}} renommage de fichier.",filesNeedAIMergeDueToRenames_other:"{{count}} fichiers ncessitent une fusion IA en raison de {{renameCount}} renommage de fichier.",filesNeedAIMergeDueToRenamesPlural:"{{count}} fichier ncessite une fusion IA en raison de {{renameCount}} renommages de fichiers.",filesNeedAIMergeDueToRenamesPlural_other:"{{count}} fichiers ncessitent une fusion IA en raison de {{renameCount}} renommages de fichiers.",fileRenamesDetected:"{{count}} renommage de fichier dtect - l'IA grera la fusion.",fileRenamesDetected_other:"{{count}} renommages de fichiers dtects - l'IA grera la fusion.",filesRenamedOrMoved:"Des fichiers ont peut-tre t renomms ou dplacs - l'IA grera la fusion.",buttons:{stageWithAIMerge:"Prparer avec fusion IA",mergeWithAI:"Fusionner avec IA",stageTo:"Prparer vers {{branch}}",mergeTo:"Fusionner vers {{branch}}",resolving:"Rsolution...",staging:"Prparation...",merging:"Fusion..."}},LZ={title:"Crer une Pull Request",description:'Pousser la branche et crer une pull request pour "{{taskTitle}}"',errors:{unknown:"Une erreur inconnue s'est produite lors de la cration de la pull request",invalidBranchName:"Le nom de branche contient des caractres invalides. Utilisez uniquement des lettres, chiffres, tirets (-), underscores (_) et barres obliques (/).",emptyTitle:"Le titre de la pull request ne peut pas tre vide."},success:{created:"Pull request cre avec succs !",alreadyExists:"Une pull request existe dj pour cette branche"},actions:{retry:"Ressayer",creating:"Cration en cours...",create:"Crer la Pull Request"},labels:{sourceBranch:"Branche source",targetBranch:"Branche cible",commits:"Commits",changes:"Modifications",prTitle:"Titre de la PR (optionnel)",draftPR:"Crer comme brouillon",unknown:"Inconnu"},hints:{targetBranch:"Laissez vide pour utiliser la branche par dfaut",prTitle:"Laissez vide pour utiliser le titre de la tche"}},OZ={terminal:IZ,merge:MZ,pr:LZ},FZ={expand:"Agrandir le terminal",collapse:"Reduire le terminal"},BZ={terminalTitle:"Auth: {{profileName}}",maxTerminalsReached:"Impossible d'ouvrir le terminal d'auth: nombre maximum de terminaux atteint. Fermez un terminal d'abord."},zZ={create:"Worktree",createNew:"Nouveau Worktree",existing:"Worktrees Terminal",taskWorktrees:"Worktrees de Taches",otherWorktrees:"Autres",createTitle:"Creer un Worktree Terminal",createDescription:"Creer un espace de travail isole pour ce terminal. Tout le travail se fera dans le repertoire du worktree.",name:"Nom du Worktree",namePlaceholder:"ma-fonctionnalite",nameRequired:"Le nom du worktree est requis",nameInvalid:"Le nom doit commencer et se terminer par une lettre ou un chiffre",nameHelp:"Lettres minuscules, chiffres, tirets et underscores (les espaces deviennent des tirets)",associateTask:"Lier a une Tache",selectTask:"Selectionner une tache...",noTask:"Pas de tache (worktree autonome)",createBranch:"Creer une Branche Git",branchHelp:"Cree la branche: {{branch}}",baseBranch:"Branche de Base",selectBaseBranch:"Selectionner la branche de base...",searchBranch:"Rechercher des branches...",noBranchFound:"Aucune branche trouvee",useProjectDefault:"Utiliser la valeur par defaut du projet ({{branch}})",baseBranchHelp:"La branche a partir de laquelle creer le worktree",openInIDE:"Ouvrir dans IDE",maxReached:"Maximum de 12 worktrees terminal atteint",alreadyExists:"Un worktree avec ce nom existe deja",deleteTitle:"Supprimer le Worktree?",deleteDescription:"Ceci supprimera definitivement le worktree et sa branche. Les modifications non committes seront perdues.",detached:"(dtach)"},$Z={expand:FZ,auth:BZ,worktree:zZ},HZ={parseImplementationPlan:"chec de l'analyse du fichier implementation_plan.json pour {{specId}} : {{error}}",jsonError:{titleSuffix:"(Erreur JSON)",description:` Erreur d'analyse JSON : {{error}}

Le fichier implementation_plan.json est malform. Excutez la correction automatique du backend ou rparez le fichier manuellement.`}},UZ={task:HZ},GZ="common",VZ={en:{common:HW,navigation:XW,settings:xK,tasks:BK,welcome:UK,onboarding:eY,dialogs:hY,gitlab:CY,taskReview:TY,terminal:IY,errors:LY},fr:{common:YY,navigation:nX,settings:_X,tasks:qX,welcome:XX,onboarding:oZ,dialogs:bZ,gitlab:DZ,taskReview:OZ,terminal:$Z,errors:UZ}};Jr.use(wW).init({resources:VZ,lng:"en",fallbackLng:"en",defaultNS:GZ,ns:["common","navigation","settings","tasks","welcome","onboarding","dialogs","gitlab","taskReview","terminal","errors"],interpolation:{escapeValue:!1},react:{useSuspense:!1}});const Gt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Is=globalThis,Jc="10.29.0";function Fb(){return Bb(Is),Is}function Bb(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Jc,t[Jc]=t[Jc]||{}}function vh(e,t,s=Is){const r=s.__SENTRY__=s.__SENTRY__||{},i=r[Jc]=r[Jc]||{};return i[e]||(i[e]=t())}const qZ=["debug","info","warn","error","log","assert","trace"],WZ="Sentry Logger ",$v={};function bh(e){if(!("console"in Is))return e();const t=Is.console,s={},r=Object.keys($v);r.forEach(i=>{const a=$v[i];s[i]=t[i],t[i]=a});try{return e()}finally{r.forEach(i=>{t[i]=s[i]})}}function KZ(){$C().enabled=!0}function YZ(){$C().enabled=!1}function W5(){return $C().enabled}function XZ(...e){zC("log",...e)}function ZZ(...e){zC("warn",...e)}function QZ(...e){zC("error",...e)}function zC(e,...t){Gt&&W5()&&bh(()=>{Is.console[e](`${WZ}[${e}]:`,...t)})}function $C(){return Gt?vh("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const St={enable:KZ,disable:YZ,isEnabled:W5,log:XZ,warn:ZZ,error:QZ},K5=50,rc="?",qP=/\(error: (.*)\)/,WP=/captureMessage|captureException/;function Y5(...e){const t=e.sort((s,r)=>s[0]-r[0]).map(s=>s[1]);return(s,r=0,i=0)=>{const a=[],o=s.split(`
`);for(let l=r;l<o.length;l++){let u=o[l];u.length>1024&&(u=u.slice(0,1024));const d=qP.test(u)?u.replace(qP,"$1"):u;if(!d.match(/\S*Error: /)){for(const m of t){const f=m(d);if(f){a.push(f);break}}if(a.length>=K5+i)break}}return X5(a.slice(i))}}function JZ(e){return Array.isArray(e)?Y5(...e):e}function X5(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(xx(t).function||"")&&t.pop(),t.reverse(),WP.test(xx(t).function||"")&&(t.pop(),WP.test(xx(t).function||"")&&t.pop()),t.slice(0,K5).map(s=>({...s,filename:s.filename||xx(t).filename,function:s.function||rc}))}function xx(e){return e[e.length-1]||{}}const Ej="<anonymous>";function ic(e){try{return!e||typeof e!="function"?Ej:e.name||Ej}catch{return Ej}}function KP(e){const t=e.exception;if(t){const s=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&s.push(...r.stacktrace.frames)}),s}catch{return}}}function Z5(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const av={},YP={};function yd(e,t){av[e]=av[e]||[],av[e].push(t)}function wd(e,t){if(!YP[e]){YP[e]=!0;try{t()}catch(s){Gt&&St.error(`Error while instrumenting ${e}`,s)}}}function Ea(e,t){const s=e&&av[e];if(s)for(const r of s)try{r(t)}catch(i){Gt&&St.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${ic(r)}
Error:`,i)}}let Tj=null;function eQ(e){const t="error";yd(t,e),wd(t,tQ)}function tQ(){Tj=Is.onerror,Is.onerror=function(e,t,s,r,i){return Ea("error",{column:r,error:i,line:s,msg:e,url:t}),Tj?Tj.apply(this,arguments):!1},Is.onerror.__SENTRY_INSTRUMENTED__=!0}let Pj=null;function sQ(e){const t="unhandledrejection";yd(t,e),wd(t,nQ)}function nQ(){Pj=Is.onunhandledrejection,Is.onunhandledrejection=function(e){return Ea("unhandledrejection",e),Pj?Pj.apply(this,arguments):!0},Is.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Q5=Object.prototype.toString;function HC(e){switch(Q5.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ac(e,Error)}}function yh(e,t){return Q5.call(e)===`[object ${t}]`}function J5(e){return yh(e,"ErrorEvent")}function XP(e){return yh(e,"DOMError")}function rQ(e){return yh(e,"DOMException")}function rl(e){return yh(e,"String")}function UC(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function zb(e){return e===null||UC(e)||typeof e!="object"&&typeof e!="function"}function Bf(e){return yh(e,"Object")}function $b(e){return typeof Event<"u"&&ac(e,Event)}function iQ(e){return typeof Element<"u"&&ac(e,Element)}function aQ(e){return yh(e,"RegExp")}function vp(e){return!!(e?.then&&typeof e.then=="function")}function oQ(e){return Bf(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ac(e,t){try{return e instanceof t}catch{return!1}}function e3(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function lQ(e){return typeof Request<"u"&&ac(e,Request)}const GC=Is,cQ=80;function t3(e,t={}){if(!e)return"<unknown>";try{let s=e;const r=5,i=[];let a=0,o=0;const l=" > ",u=l.length;let d;const m=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||cQ;for(;s&&a++<r&&(d=dQ(s,m),!(d==="html"||a>1&&o+i.length*u+d.length>=f));)i.push(d),o+=d.length,s=s.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function dQ(e,t){const s=e,r=[];if(!s?.tagName)return"";if(GC.HTMLElement&&s instanceof HTMLElement&&s.dataset){if(s.dataset.sentryComponent)return s.dataset.sentryComponent;if(s.dataset.sentryElement)return s.dataset.sentryElement}r.push(s.tagName.toLowerCase());const i=t?.length?t.filter(o=>s.getAttribute(o)).map(o=>[o,s.getAttribute(o)]):null;if(i?.length)i.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{s.id&&r.push(`#${s.id}`);const o=s.className;if(o&&rl(o)){const l=o.split(/\s+/);for(const u of l)r.push(`.${u}`)}}const a=["aria-label","type","name","title","alt"];for(const o of a){const l=s.getAttribute(o);l&&r.push(`[${o}="${l}"]`)}return r.join("")}function VC(){try{return GC.document.location.href}catch{return""}}function uQ(e){if(!GC.HTMLElement)return null;let t=e;const s=5;for(let r=0;r<s;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Ri(e,t,s){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const i=s(r);typeof i=="function"&&s3(i,r);try{e[t]=i}catch{Gt&&St.log(`Failed to replace method "${t}" in object`,e)}}function cd(e,t,s){try{Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0})}catch{Gt&&St.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function s3(e,t){try{const s=t.prototype||{};e.prototype=t.prototype=s,cd(e,"__sentry_original__",t)}catch{}}function qC(e){return e.__sentry_original__}function n3(e){if(HC(e))return{message:e.message,name:e.name,stack:e.stack,...QP(e)};if($b(e)){const t={type:e.type,target:ZP(e.target),currentTarget:ZP(e.currentTarget),...QP(e)};return typeof CustomEvent<"u"&&ac(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function ZP(e){try{return iQ(e)?t3(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function QP(e){if(typeof e=="object"&&e!==null){const t={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}else return{}}function hQ(e){const t=Object.keys(n3(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function b_(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function JP(e,t){if(!Array.isArray(e))return"";const s=[];for(let r=0;r<e.length;r++){const i=e[r];try{e3(i)?s.push(Z5(i)):s.push(String(i))}catch{s.push("[value cannot be serialized]")}}return s.join(t)}function ov(e,t,s=!1){return rl(e)?aQ(t)?t.test(e):rl(t)?s?e===t:e.includes(t):!1:!1}function Hb(e,t=[],s=!1){return t.some(r=>ov(e,r,s))}function mQ(){const e=Is;return e.crypto||e.msCrypto}let Rj;function fQ(){return Math.random()*16}function Mi(e=mQ()){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Rj||(Rj="10000000100040008000"+1e11),Rj.replace(/[018]/g,t=>(t^(fQ()&15)>>t/4).toString(16))}function r3(e){return e.exception?.values?.[0]}function Wc(e){const{message:t,event_id:s}=e;if(t)return t;const r=r3(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||s||"<unknown>":s||"<unknown>"}function y_(e,t,s){const r=e.exception=e.exception||{},i=r.values=r.values||[],a=i[0]=i[0]||{};a.value||(a.value=t||""),a.type||(a.type="Error")}function Qu(e,t){const s=r3(e);if(!s)return;const r={type:"generic",handled:!0},i=s.mechanism;if(s.mechanism={...r,...i,...t},t&&"data"in t){const a={...i?.data,...t.data};s.mechanism.data=a}}function eR(e){if(pQ(e))return!0;try{cd(e,"__sentry_captured__",!0)}catch{}return!1}function pQ(e){try{return e.__sentry_captured__}catch{}}const i3=1e3;function bp(){return Date.now()/i3}function gQ(){const{performance:e}=Is;if(!e?.now||!e.timeOrigin)return bp;const t=e.timeOrigin;return()=>(t+e.now())/i3}let tR;function il(){return(tR??(tR=gQ()))()}function xQ(e){const t=il(),s={sid:Mi(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>bQ(s)};return e&&Ju(s,e),s}function Ju(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||il(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Mi()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const s=e.timestamp-e.started;e.duration=s>=0?s:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function vQ(e,t){let s={};e.status==="ok"&&(s={status:"exited"}),Ju(e,s)}function bQ(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function yp(e,t,s=2){if(!t||typeof t!="object"||s<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=yp(r[i],t[i],s-1));return r}function sR(){return Mi()}function a3(){return Mi().substring(16)}const w_="_sentrySpan";function nR(e,t){t?cd(e,w_,t):delete e[w_]}function rR(e){return e[w_]}const yQ=100;class al{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:sR(),sampleRand:Math.random()}}clone(){const t=new al;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,nR(t,rR(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Ju(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,s){return this.setTags({[t]:s})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,s){return this.setAttributes({[t]:s})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,s){return this._extra={...this._extra,[t]:s},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t,r=s instanceof al?s.getScopeData():Bf(s)?t:void 0,{tags:i,attributes:a,extra:o,user:l,contexts:u,level:d,fingerprint:m=[],propagationContext:f}=r||{};return this._tags={...this._tags,...i},this._attributes={...this._attributes,...a},this._extra={...this._extra,...o},this._contexts={...this._contexts,...u},l&&Object.keys(l).length&&(this._user=l),d&&(this._level=d),m.length&&(this._fingerprint=m),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,nR(this,void 0),this._attachments=[],this.setPropagationContext({traceId:sR(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,s){const r=typeof s=="number"?s:yQ;if(r<=0)return this;const i={timestamp:bp(),...t,message:t.message?b_(t.message,2048):t.message};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:rR(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=yp(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const r=s?.event_id||Mi();if(!this._client)return Gt&&St.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...s,event_id:r},this),r}captureMessage(t,s,r){const i=r?.event_id||Mi();if(!this._client)return Gt&&St.warn("No client configured on scope - will not capture message!"),i;const a=r?.syntheticException??new Error(t);return this._client.captureMessage(t,s,{originalException:t,syntheticException:a,...r,event_id:i},this),i}captureEvent(t,s){const r=s?.event_id||Mi();return this._client?(this._client.captureEvent(t,{...s,event_id:r},this),r):(Gt&&St.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function wQ(){return vh("defaultCurrentScope",()=>new al)}function jQ(){return vh("defaultIsolationScope",()=>new al)}class SQ{constructor(t,s){let r;t?r=t:r=new al;let i;s?i=s:i=new al,this._stack=[{scope:r}],this._isolationScope=i}withScope(t){const s=this._pushScope();let r;try{r=t(s)}catch(i){throw this._popScope(),i}return vp(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function eh(){const e=Fb(),t=Bb(e);return t.stack=t.stack||new SQ(wQ(),jQ())}function _Q(e){return eh().withScope(e)}function NQ(e,t){const s=eh();return s.withScope(()=>(s.getStackTop().scope=e,t(e)))}function iR(e){return eh().withScope(()=>e(eh().getIsolationScope()))}function CQ(){return{withIsolationScope:iR,withScope:_Q,withSetScope:NQ,withSetIsolationScope:(e,t)=>iR(t),getCurrentScope:()=>eh().getScope(),getIsolationScope:()=>eh().getIsolationScope()}}function WC(e){const t=Bb(e);return t.acs?t.acs:CQ()}function vo(){const e=Fb();return WC(e).getCurrentScope()}function jd(){const e=Fb();return WC(e).getIsolationScope()}function KC(){return vh("globalScope",()=>new al)}function o3(...e){const t=Fb(),s=WC(t);if(e.length===2){const[r,i]=e;return r?s.withSetScope(r,i):s.withScope(i)}return s.withScope(e[0])}function Or(){return vo().getClient()}function kQ(e){const t=e.getPropagationContext(),{traceId:s,parentSpanId:r,propagationSpanId:i}=t,a={trace_id:s,span_id:i||a3()};return r&&(a.parent_span_id=r),a}const AQ="sentry.source",EQ="sentry.sample_rate",TQ="sentry.previous_trace_sample_rate",PQ="sentry.op",RQ="sentry.origin",l3="sentry.profile_id",c3="sentry.exclusive_time",DQ=0,IQ=1,MQ="_sentryScope",LQ="_sentryIsolationScope";function OQ(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function d3(e){const t=e;return{scope:t[MQ],isolationScope:OQ(t[LQ])}}const FQ="sentry-",BQ=/^sentry-/;function zQ(e){const t=$Q(e);if(!t)return;const s=Object.entries(t).reduce((r,[i,a])=>{if(i.match(BQ)){const o=i.slice(FQ.length);r[o]=a}return r},{});if(Object.keys(s).length>0)return s}function $Q(e){if(!(!e||!rl(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,s)=>{const r=aR(s);return Object.entries(r).forEach(([i,a])=>{t[i]=a}),t},{}):aR(e)}function aR(e){return e.split(",").map(t=>{const s=t.indexOf("=");if(s===-1)return[];const r=t.slice(0,s),i=t.slice(s+1);return[r,i].map(a=>{try{return decodeURIComponent(a.trim())}catch{return}})}).reduce((t,[s,r])=>(s&&r&&(t[s]=r),t),{})}const HQ=/^o(\d+)\./,UQ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function GQ(e){return e==="http"||e==="https"}function wp(e,t=!1){const{host:s,path:r,pass:i,port:a,projectId:o,protocol:l,publicKey:u}=e;return`${l}://${u}${t&&i?`:${i}`:""}@${s}${a?`:${a}`:""}/${r&&`${r}/`}${o}`}function VQ(e){const t=UQ.exec(e);if(!t){bh(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[s,r,i="",a="",o="",l=""]=t.slice(1);let u="",d=l;const m=d.split("/");if(m.length>1&&(u=m.slice(0,-1).join("/"),d=m.pop()),d){const f=d.match(/^\d+/);f&&(d=f[0])}return u3({host:a,pass:i,path:u,projectId:d,port:o,protocol:s,publicKey:r})}function u3(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function qQ(e){if(!Gt)return!0;const{port:t,projectId:s,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(St.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:s.match(/^\d+$/)?GQ(r)?t&&isNaN(parseInt(t,10))?(St.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(St.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(St.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),!1)}function WQ(e){return e.match(HQ)?.[1]}function KQ(e){const t=e.getOptions(),{host:s}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):s&&(r=WQ(s)),r}function YQ(e){const t=typeof e=="string"?VQ(e):u3(e);if(!(!t||!qQ(t)))return t}function XQ(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const h3=1;let oR=!1;function ZQ(e){const{spanId:t,traceId:s,isRemote:r}=e.spanContext(),i=r?t:YC(e).parent_span_id,a=d3(e).scope,o=r?a?.getPropagationContext().propagationSpanId||a3():t;return{parent_span_id:i,span_id:o,trace_id:s}}function QQ(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:s,traceFlags:r,...i},attributes:a})=>({span_id:t,trace_id:s,sampled:r===h3,attributes:a,...i}))}function lR(e){return typeof e=="number"?cR(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?cR(e.getTime()):il()}function cR(e){return e>9999999999?e/1e3:e}function YC(e){if(eJ(e))return e.getSpanJSON();const{spanId:t,traceId:s}=e.spanContext();if(JQ(e)){const{attributes:r,startTime:i,name:a,endTime:o,status:l,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:s,data:r,description:a,parent_span_id:d,start_timestamp:lR(i),timestamp:lR(o)||void 0,status:sJ(l),op:r[PQ],origin:r[RQ],links:QQ(u)}}return{span_id:t,trace_id:s,start_timestamp:0,data:{}}}function JQ(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function eJ(e){return typeof e.getSpanJSON=="function"}function tJ(e){const{traceFlags:t}=e.spanContext();return t===h3}function sJ(e){if(!(!e||e.code===DQ))return e.code===IQ?"ok":e.message||"internal_error"}const nJ="_sentryRootSpan";function m3(e){return e[nJ]||e}function dR(){oR||(bh(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),oR=!0)}function rJ(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=Or()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function uR(e){St.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function hR(e,t){if(!t?.length||!e.description)return!1;for(const s of t){if(aJ(s)){if(ov(e.description,s))return Gt&&uR(e),!0;continue}if(!s.name&&!s.op)continue;const r=s.name?ov(e.description,s.name):!0,i=s.op?e.op&&ov(e.op,s.op):!0;if(r&&i)return Gt&&uR(e),!0}return!1}function iJ(e,t){const s=t.parent_span_id,r=t.span_id;if(s)for(const i of e)i.parent_span_id===r&&(i.parent_span_id=s)}function aJ(e){return typeof e=="string"||e instanceof RegExp}const XC="production",oJ="_frozenDsc";function f3(e,t){const s=t.getOptions(),{publicKey:r}=t.getDsn()||{},i={environment:s.environment||XC,release:s.release,public_key:r,trace_id:e,org_id:KQ(t)};return t.emit("createDsc",i),i}function lJ(e,t){const s=t.getPropagationContext();return s.dsc||f3(s.traceId,e)}function cJ(e){const t=Or();if(!t)return{};const s=m3(e),r=YC(s),i=r.data,a=s.spanContext().traceState,o=a?.get("sentry.sample_rate")??i[EQ]??i[TQ];function l(y){return(typeof o=="number"||typeof o=="string")&&(y.sample_rate=`${o}`),y}const u=s[oJ];if(u)return l(u);const d=a?.get("sentry.dsc"),m=d&&zQ(d);if(m)return l(m);const f=f3(e.spanContext().traceId,t),x=i[AQ],v=r.description;return x!=="url"&&v&&(f.transaction=v),rJ()&&(f.sampled=String(tJ(s)),f.sample_rand=a?.get("sentry.sample_rand")??d3(s).scope?.getPropagationContext().sampleRand.toString()),l(f),t.emit("createDsc",f,s),f}function Za(e,t=100,s=1/0){try{return j_("",e,t,s)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function p3(e,t=3,s=100*1024){const r=Za(e,t);return mJ(r)>s?p3(e,t-1,s):r}function j_(e,t,s=1/0,r=1/0,i=fJ()){const[a,o]=i;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const l=dJ(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const u=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:s;if(u===0)return l.replace("object ","");if(a(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const v=d.toJSON();return j_("",v,u-1,r,i)}catch{}const m=Array.isArray(t)?[]:{};let f=0;const x=n3(t);for(const v in x){if(!Object.prototype.hasOwnProperty.call(x,v))continue;if(f>=r){m[v]="[MaxProperties ~]";break}const y=x[v];m[v]=j_(v,y,u-1,r,i),f++}return o(t),m}function dJ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(e3(t))return Z5(t);if(oQ(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${ic(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const s=uJ(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}}function uJ(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function hJ(e){return~-encodeURI(e).split(/%..|./).length}function mJ(e){return hJ(JSON.stringify(e))}function fJ(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function s(r){e.delete(r)}return[t,s]}function wh(e,t=[]){return[e,t]}function pJ(e,t){const[s,r]=e;return[s,[...r,t]]}function mR(e,t){const s=e[1];for(const r of s){const i=r[0].type;if(t(r,i))return!0}return!1}function S_(e){const t=Bb(Is);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function gJ(e){const[t,s]=e;let r=JSON.stringify(t);function i(a){typeof r=="string"?r=typeof a=="string"?r+a:[S_(r),a]:r.push(typeof a=="string"?S_(a):a)}for(const a of s){const[o,l]=a;if(i(`
${JSON.stringify(o)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(Za(l))}i(u)}}return typeof r=="string"?r:xJ(r)}function xJ(e){const t=e.reduce((i,a)=>i+a.length,0),s=new Uint8Array(t);let r=0;for(const i of e)s.set(i,r),r+=i.length;return s}function vJ(e){const t=typeof e.data=="string"?S_(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const bJ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function fR(e){return bJ[e]}function g3(e){if(!e?.sdk)return;const{name:t,version:s}=e.sdk;return{name:t,version:s}}function yJ(e,t,s,r){const i=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!s&&r&&{dsn:wp(r)},...i&&{trace:i}}}function wJ(e,t){if(!t)return e;const s=e.sdk||{};return e.sdk={...s,name:s.name||t.name,version:s.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function jJ(e,t,s,r){const i=g3(s),a={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:wp(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return wh(a,[o])}function SJ(e,t,s,r){const i=g3(s),a=e.type&&e.type!=="replay_event"?e.type:"event";wJ(e,s?.sdk);const o=yJ(e,i,r,t);return delete e.sdkProcessingMetadata,wh(o,[[{type:a},e]])}const Dj=0,pR=1,gR=2;function Ub(e){return new zf(t=>{t(e)})}function ZC(e){return new zf((t,s)=>{s(e)})}class zf{constructor(t){this._state=Dj,this._handlers=[],this._runExecutor(t)}then(t,s){return new zf((r,i)=>{this._handlers.push([!1,a=>{if(!t)r(a);else try{r(t(a))}catch(o){i(o)}},a=>{if(!s)i(a);else try{r(s(a))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new zf((s,r)=>{let i,a;return this.then(o=>{a=!1,i=o,t&&t()},o=>{a=!0,i=o,t&&t()}).then(()=>{if(a){r(i);return}s(i)})})}_executeHandlers(){if(this._state===Dj)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===pR&&s[1](this._value),this._state===gR&&s[2](this._value),s[0]=!0)})}_runExecutor(t){const s=(a,o)=>{if(this._state===Dj){if(vp(o)){o.then(r,i);return}this._state=a,this._value=o,this._executeHandlers()}},r=a=>{s(pR,a)},i=a=>{s(gR,a)};try{t(r,i)}catch(a){i(a)}}}function _J(e,t,s,r=0){try{const i=__(t,s,e,r);return vp(i)?i:Ub(i)}catch(i){return ZC(i)}}function __(e,t,s,r){const i=s[r];if(!e||!i)return e;const a=i({...e},t);return Gt&&a===null&&St.log(`Event processor "${i.id||"?"}" dropped event`),vp(a)?a.then(o=>__(o,t,s,r+1)):__(a,t,s,r+1)}function NJ(e,t){const{fingerprint:s,span:r,breadcrumbs:i,sdkProcessingMetadata:a}=t;CJ(e,t),r&&EJ(e,r),TJ(e,s),kJ(e,i),AJ(e,a)}function Hv(e,t){const{extra:s,tags:r,user:i,contexts:a,level:o,sdkProcessingMetadata:l,breadcrumbs:u,fingerprint:d,eventProcessors:m,attachments:f,propagationContext:x,transactionName:v,span:y}=t;vx(e,"extra",s),vx(e,"tags",r),vx(e,"user",i),vx(e,"contexts",a),e.sdkProcessingMetadata=yp(e.sdkProcessingMetadata,l,2),o&&(e.level=o),v&&(e.transactionName=v),y&&(e.span=y),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),m.length&&(e.eventProcessors=[...e.eventProcessors,...m]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...x}}function vx(e,t,s){e[t]=yp(e[t],s,1)}function CJ(e,t){const{extra:s,tags:r,user:i,contexts:a,level:o,transactionName:l}=t;Object.keys(s).length&&(e.extra={...s,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(i).length&&(e.user={...i,...e.user}),Object.keys(a).length&&(e.contexts={...a,...e.contexts}),o&&(e.level=o),l&&e.type!=="transaction"&&(e.transaction=l)}function kJ(e,t){const s=[...e.breadcrumbs||[],...t];e.breadcrumbs=s.length?s:void 0}function AJ(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function EJ(e,t){e.contexts={trace:ZQ(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:cJ(t),...e.sdkProcessingMetadata};const s=m3(t),r=YC(s).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function TJ(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Oc,xR,vR,Hl;function PJ(e){const t=Is._sentryDebugIds,s=Is._debugIds;if(!t&&!s)return{};const r=t?Object.keys(t):[],i=s?Object.keys(s):[];if(Hl&&r.length===xR&&i.length===vR)return Hl;xR=r.length,vR=i.length,Hl={},Oc||(Oc={});const a=(o,l)=>{for(const u of o){const d=l[u],m=Oc?.[u];if(m&&Hl&&d)Hl[m[0]]=d,Oc&&(Oc[u]=[m[0],d]);else if(d){const f=e(u);for(let x=f.length-1;x>=0;x--){const y=f[x]?.filename;if(y&&Hl&&Oc){Hl[y]=d,Oc[u]=[y,d];break}}}}};return t&&a(r,t),s&&a(i,s),Hl}function RJ(e,t,s,r,i,a){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=e,u={...t,event_id:t.event_id||s.event_id||Mi(),timestamp:t.timestamp||bp()},d=s.integrations||e.integrations.map(S=>S.name);DJ(u,e),LJ(u,d),i&&i.emit("applyFrameMetadata",t),t.type===void 0&&IJ(u,e.stackParser);const m=FJ(r,s.captureContext);s.mechanism&&Qu(u,s.mechanism);const f=i?i.getEventProcessors():[],x=KC().getScopeData();if(a){const S=a.getScopeData();Hv(x,S)}if(m){const S=m.getScopeData();Hv(x,S)}const v=[...s.attachments||[],...x.attachments];v.length&&(s.attachments=v),NJ(u,x);const y=[...f,...x.eventProcessors];return _J(y,u,s).then(S=>(S&&MJ(S),typeof o=="number"&&o>0?OJ(S,o,l):S))}function DJ(e,t){const{environment:s,release:r,dist:i,maxValueLength:a}=t;e.environment=e.environment||s||XC,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i);const o=e.request;o?.url&&a&&(o.url=b_(o.url,a)),a&&e.exception?.values?.forEach(l=>{l.value&&(l.value=b_(l.value,a))})}function IJ(e,t){const s=PJ(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(i=>{i.filename&&(i.debug_id=s[i.filename])})})}function MJ(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const s=e.debug_meta.images;Object.entries(t).forEach(([r,i])=>{s.push({type:"sourcemap",code_file:r,debug_id:i})})}function LJ(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function OJ(e,t,s){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:Za(i.data,t,s)}}))},...e.user&&{user:Za(e.user,t,s)},...e.contexts&&{contexts:Za(e.contexts,t,s)},...e.extra&&{extra:Za(e.extra,t,s)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Za(e.contexts.trace.data,t,s))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:Za(i.data,t,s)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Za(e.contexts.flags,3,s)),r}function FJ(e,t){if(!t)return e;const s=e?e.clone():new al;return s.update(t),s}function N_(e,t){return vo().captureException(e,void 0)}function x3(e,t){return vo().captureEvent(e,t)}function bR(e){const t=jd(),s=vo(),{userAgent:r}=Is.navigator||{},i=xQ({user:s.getUser()||t.getUser(),...r&&{userAgent:r},...e}),a=t.getSession();return a?.status==="ok"&&Ju(a,{status:"exited"}),v3(),t.setSession(i),i}function v3(){const e=jd(),s=vo().getSession()||e.getSession();s&&vQ(s),b3(),e.setSession()}function b3(){const e=jd(),t=Or(),s=e.getSession();s&&t&&t.captureSession(s)}function yR(e=!1){if(e){v3();return}b3()}const BJ="7";function zJ(e){const t=e.protocol?`${e.protocol}:`:"",s=e.port?`:${e.port}`:"";return`${t}//${e.host}${s}${e.path?`/${e.path}`:""}/api/`}function $J(e){return`${zJ(e)}${e.projectId}/envelope/`}function HJ(e,t){const s={sentry_version:BJ};return e.publicKey&&(s.sentry_key=e.publicKey),t&&(s.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(s).toString()}function UJ(e,t,s){return t||`${$J(e)}?${HJ(e,s)}`}const wR=[];function GJ(e){const t={};return e.forEach(s=>{const{name:r}=s,i=t[r];i&&!i.isDefaultInstance&&s.isDefaultInstance||(t[r]=s)}),Object.values(t)}function VJ(e){const t=e.defaultIntegrations||[],s=e.integrations;t.forEach(i=>{i.isDefaultInstance=!0});let r;if(Array.isArray(s))r=[...t,...s];else if(typeof s=="function"){const i=s(t);r=Array.isArray(i)?i:[i]}else r=t;return GJ(r)}function qJ(e,t){const s={};return t.forEach(r=>{r&&y3(e,r,s)}),s}function jR(e,t){for(const s of t)s?.afterAllSetup&&s.afterAllSetup(e)}function y3(e,t,s){if(s[t.name]){Gt&&St.log(`Integration skipped because it was already installed: ${t.name}`);return}if(s[t.name]=t,!wR.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),wR.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,a)=>r(i,a,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((a,o)=>r(a,o,e),{id:t.name});e.addEventProcessor(i)}Gt&&St.log(`Integration installed: ${t.name}`)}function WJ(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function KJ(e,t,s,r){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),s&&r&&(i.dsn=wp(r)),wh(i,[WJ(e)])}function w3(e,t){const s=t??YJ(e)??[];if(s.length===0)return;const r=e.getOptions(),i=KJ(s,r._metadata,r.tunnel,e.getDsn());j3().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function YJ(e){return j3().get(e)}function j3(){return vh("clientToLogBufferMap",()=>new WeakMap)}function XJ(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function ZJ(e,t,s,r){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),s&&r&&(i.dsn=wp(r)),wh(i,[XJ(e)])}function S3(e,t){const s=t??QJ(e)??[];if(s.length===0)return;const r=e.getOptions(),i=ZJ(s,r._metadata,r.tunnel,e.getDsn());_3().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(i)}function QJ(e){return _3().get(e)}function _3(){return vh("clientToMetricBufferMap",()=>new WeakMap)}const QC=Symbol.for("SentryBufferFullError");function JC(e=100){const t=new Set;function s(){return t.size<e}function r(o){t.delete(o)}function i(o){if(!s())return ZC(QC);const l=o();return t.add(l),l.then(()=>r(l),()=>r(l)),l}function a(o){if(!t.size)return Ub(!0);const l=Promise.allSettled(Array.from(t)).then(()=>!0);if(!o)return l;const u=[l,new Promise(d=>setTimeout(()=>d(!1),o))];return Promise.race(u)}return{get $(){return Array.from(t)},add:i,drain:a}}const JJ=60*1e3;function eee(e,t=Date.now()){const s=parseInt(`${e}`,10);if(!isNaN(s))return s*1e3;const r=Date.parse(`${e}`);return isNaN(r)?JJ:r-t}function tee(e,t){return e[t]||e.all||0}function see(e,t,s=Date.now()){return tee(e,t)>s}function nee(e,{statusCode:t,headers:s},r=Date.now()){const i={...e},a=s?.["x-sentry-rate-limits"],o=s?.["retry-after"];if(a)for(const l of a.trim().split(",")){const[u,d,,,m]=l.split(":",5),f=parseInt(u,10),x=(isNaN(f)?60:f)*1e3;if(!d)i.all=r+x;else for(const v of d.split(";"))v==="metric_bucket"?(!m||m.split(";").includes("custom"))&&(i[v]=r+x):i[v]=r+x}else o?i.all=r+eee(o,r):t===429&&(i.all=r+60*1e3);return i}const N3=64;function C3(e,t,s=JC(e.bufferSize||N3)){let r={};const i=o=>s.drain(o);function a(o){const l=[];if(mR(o,(f,x)=>{const v=fR(x);see(r,v)?e.recordDroppedEvent("ratelimit_backoff",v):l.push(f)}),l.length===0)return Promise.resolve({});const u=wh(o[0],l),d=f=>{mR(u,(x,v)=>{e.recordDroppedEvent(f,fR(v))})},m=()=>t({body:gJ(u)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&Gt&&St.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),r=nee(r,f),f),f=>{throw d("network_error"),Gt&&St.error("Encountered error running transport request:",f),f});return s.add(m).then(f=>f,f=>{if(f===QC)return Gt&&St.error("Skipped sending event because buffer is full."),d("queue_overflow"),Promise.resolve({});throw f})}return{send:a,flush:i}}function ree(e,t,s){const r=[{type:"client_report"},{timestamp:bp(),discarded_events:e}];return wh(t?{dsn:t}:{},[r])}function k3(e){const t=[];e.message&&t.push(e.message);try{const s=e.exception.values[e.exception.values.length-1];s?.value&&(t.push(s.value),s.type&&t.push(`${s.type}: ${s.value}`))}catch{}return t}function iee(e){const{trace_id:t,parent_span_id:s,span_id:r,status:i,origin:a,data:o,op:l}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:l,parent_span_id:s,span_id:r??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:a,profile_id:o?.[l3],exclusive_time:o?.[c3],measurements:e.measurements,is_segment:!0}}function aee(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[l3]:e.profile_id},...e.exclusive_time&&{[c3]:e.exclusive_time}}}},measurements:e.measurements}}const SR="Not capturing exception because it's already been captured.",_R="Discarded session because of missing or non-string release",A3=Symbol.for("SentryInternalError"),E3=Symbol.for("SentryDoNotSendEventError"),oee=5e3;function lv(e){return{message:e,[A3]:!0}}function Ij(e){return{message:e,[E3]:!0}}function NR(e){return!!e&&typeof e=="object"&&A3 in e}function CR(e){return!!e&&typeof e=="object"&&E3 in e}function kR(e,t,s,r,i){let a=0,o,l=!1;e.on(s,()=>{a=0,clearTimeout(o),l=!1}),e.on(t,u=>{a+=r(u),a>=8e5?i(e):l||(l=!0,o=setTimeout(()=>{i(e)},oee))}),e.on("flush",()=>{i(e)})}class lee{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=JC(t.transportOptions?.bufferSize??N3),t.dsn?this._dsn=YQ(t.dsn):Gt&&St.warn("No DSN provided, client will not send events."),this._dsn){const r=UJ(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&kR(this,"afterCaptureLog","flushLogs",hee,w3),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&kR(this,"afterCaptureMetric","flushMetrics",uee,S3)}captureException(t,s,r){const i=Mi();if(eR(t))return Gt&&St.log(SR),i;const a={event_id:i,...s};return this._process(()=>this.eventFromException(t,a).then(o=>this._captureEvent(o,a,r)).then(o=>o),"error"),a.event_id}captureMessage(t,s,r,i){const a={event_id:Mi(),...r},o=UC(t)?t:String(t),l=zb(t),u=l?this.eventFromMessage(o,s,a):this.eventFromException(t,a);return this._process(()=>u.then(d=>this._captureEvent(d,a,i)),l?"unknown":"error"),a.event_id}captureEvent(t,s,r){const i=Mi();if(s?.originalException&&eR(s.originalException))return Gt&&St.log(SR),i;const a={event_id:i,...s},o=t.sdkProcessingMetadata||{},l=o.capturedSpanScope,u=o.capturedSpanIsolationScope,d=AR(t.type);return this._process(()=>this._captureEvent(t,a,l||r,u),d),a.event_id}captureSession(t){this.sendSession(t),Ju(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const s=this._transport;if(!s)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),i=await s.flush(t);return r&&i}async close(t){const s=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),s}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const s=this._integrations[t.name];y3(this,t,this._integrations),s||jR(this,[t])}sendEvent(t,s={}){this.emit("beforeSendEvent",t,s);let r=SJ(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of s.attachments||[])r=pJ(r,vJ(i));this.sendEnvelope(r).then(i=>this.emit("afterSendEvent",t,i))}sendSession(t){const{release:s,environment:r=XC}=this._options;if("aggregates"in t){const a=t.attrs||{};if(!a.release&&!s){Gt&&St.warn(_R);return}a.release=a.release||s,a.environment=a.environment||r,t.attrs=a}else{if(!t.release&&!s){Gt&&St.warn(_R);return}t.release=t.release||s,t.environment=t.environment||r}this.emit("beforeSendSession",t);const i=jJ(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(i)}recordDroppedEvent(t,s,r=1){if(this._options.sendClientReports){const i=`${t}:${s}`;Gt&&St.log(`Recording outcome: "${i}"${r>1?` (${r} times)`:""}`),this._outcomes[i]=(this._outcomes[i]||0)+r}}on(t,s){const r=this._hooks[t]=this._hooks[t]||new Set,i=(...a)=>s(...a);return r.add(i),()=>{r.delete(i)}}emit(t,...s){const r=this._hooks[t];r&&r.forEach(i=>i(...s))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(s){return Gt&&St.error("Error while sending envelope:",s),{}}return Gt&&St.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=qJ(this,t),jR(this,t)}_updateSessionFromEvent(t,s){let r=s.level==="fatal",i=!1;const a=s.exception?.values;if(a){i=!0,r=!1;for(const u of a)if(u.mechanism?.handled===!1){r=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(Ju(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let s=0;for(;!t||s<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;s++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,s,r,i){const a=this.getOptions(),o=Object.keys(this._integrations);return!s.integrations&&o?.length&&(s.integrations=o),this.emit("preprocessEvent",t,s),t.type||i.setLastEventId(t.event_id||s.event_id),RJ(a,t,s,r,this,i).then(l=>{if(l===null)return l;this.emit("postprocessEvent",l,s),l.contexts={trace:kQ(r),...l.contexts};const u=lJ(this,r);return l.sdkProcessingMetadata={dynamicSamplingContext:u,...l.sdkProcessingMetadata},l})}_captureEvent(t,s={},r=vo(),i=jd()){return Gt&&C_(t)&&St.log(`Captured error event \`${k3(t)[0]||"<unknown>"}\``),this._processEvent(t,s,r,i).then(a=>a.event_id,a=>{Gt&&(CR(a)?St.log(a.message):NR(a)?St.warn(a.message):St.warn(a))})}_processEvent(t,s,r,i){const a=this.getOptions(),{sampleRate:o}=a,l=T3(t),u=C_(t),m=`before send for type \`${t.type||"error"}\``,f=typeof o>"u"?void 0:XQ(o);if(u&&typeof f=="number"&&Math.random()>f)return this.recordDroppedEvent("sample_rate","error"),ZC(Ij(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const x=AR(t.type);return this._prepareEvent(t,s,r,i).then(v=>{if(v===null)throw this.recordDroppedEvent("event_processor",x),Ij("An event processor returned `null`, will not send event.");if(s.data&&s.data.__sentry__===!0)return v;const w=dee(this,a,v,s);return cee(w,m)}).then(v=>{if(v===null){if(this.recordDroppedEvent("before_send",x),l){const C=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",C)}throw Ij(`${m} returned \`null\`, will not send event.`)}const y=r.getSession()||i.getSession();if(u&&y&&this._updateSessionFromEvent(y,v),l){const S=v.sdkProcessingMetadata?.spanCountBeforeProcessing||0,C=v.spans?v.spans.length:0,_=S-C;_>0&&this.recordDroppedEvent("before_send","span",_)}const w=v.transaction_info;if(l&&w&&v.transaction!==t.transaction){const S="custom";v.transaction_info={...w,source:S}}return this.sendEvent(v,s),v}).then(null,v=>{throw CR(v)||NR(v)?v:(this.captureException(v,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:v}),lv(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${v}`))})}_process(t,s){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===QC&&this.recordDroppedEvent("queue_overflow",s),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([s,r])=>{const[i,a]=s.split(":");return{reason:i,category:a,quantity:r}})}_flushOutcomes(){Gt&&St.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Gt&&St.log("No outcomes to send");return}if(!this._dsn){Gt&&St.log("No dsn provided, will not send outcomes");return}Gt&&St.log("Sending outcomes:",t);const s=ree(t,this._options.tunnel&&wp(this._dsn));this.sendEnvelope(s)}}function AR(e){return e==="replay_event"?"replay":e||"error"}function cee(e,t){const s=`${t} must return \`null\` or a valid event.`;if(vp(e))return e.then(r=>{if(!Bf(r)&&r!==null)throw lv(s);return r},r=>{throw lv(`${t} rejected with ${r}`)});if(!Bf(e)&&e!==null)throw lv(s);return e}function dee(e,t,s,r){const{beforeSend:i,beforeSendTransaction:a,beforeSendSpan:o,ignoreSpans:l}=t;let u=s;if(C_(u)&&i)return i(u,r);if(T3(u)){if(o||l){const d=iee(u);if(l?.length&&hR(d,l))return null;if(o){const m=o(d);m?u=yp(s,aee(m)):dR()}if(u.spans){const m=[],f=u.spans;for(const v of f){if(l?.length&&hR(v,l)){iJ(f,v);continue}if(o){const y=o(v);y?m.push(y):(dR(),m.push(v))}else m.push(v)}const x=u.spans.length-m.length;x&&e.recordDroppedEvent("before_send","span",x),u.spans=m}}if(a){if(u.spans){const d=u.spans.length;u.sdkProcessingMetadata={...s.sdkProcessingMetadata,spanCountBeforeProcessing:d}}return a(u,r)}}return u}function C_(e){return e.type===void 0}function T3(e){return e.type==="transaction"}function uee(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+P3(e.attributes)}function hee(e){let t=0;return e.message&&(t+=e.message.length*2),t+P3(e.attributes)}function P3(e){if(!e)return 0;let t=0;return Object.values(e).forEach(s=>{Array.isArray(s)?t+=s.length*ER(s[0]):zb(s)?t+=ER(s):t+=100}),t}function ER(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function mee(e,t){t.debug===!0&&(Gt?St.enable():bh(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),vo().update(t.initialScope);const r=new e(t);return fee(r),r.init(),r}function fee(e){vo().setClient(e)}function Mj(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const s=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:s,hash:r,relative:t[5]+s+r}}function pee(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function gee(e,t,s=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:s.map(a=>({name:`${r}:@sentry/${a}`,version:Jc})),version:Jc}),e._metadata=i}const xee=100;function dd(e,t){const s=Or(),r=jd();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:a=xee}=s.getOptions();if(a<=0)return;const l={timestamp:bp(),...e},u=i?bh(()=>i(l,t)):l;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,t),r.addBreadcrumb(u,a))}let TR;const vee="FunctionToString",PR=new WeakMap,bee=(()=>({name:vee,setupOnce(){TR=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=qC(this),s=PR.has(Or())&&t!==void 0?t:this;return TR.apply(s,e)}}catch{}},setup(e){PR.set(e,!0)}})),yee=bee,wee=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],jee="EventFilters",See=(e={})=>{let t;return{name:jee,setup(s){const r=s.getOptions();t=RR(e,r)},processEvent(s,r,i){if(!t){const a=i.getOptions();t=RR(e,a)}return Nee(s,t)?null:s}}},_ee=((e={})=>({...See(e),name:"InboundFilters"}));function RR(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:wee],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Nee(e,t){if(e.type){if(e.type==="transaction"&&kee(e,t.ignoreTransactions))return Gt&&St.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Wc(e)}`),!0}else{if(Cee(e,t.ignoreErrors))return Gt&&St.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Wc(e)}`),!0;if(Pee(e))return Gt&&St.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Wc(e)}`),!0;if(Aee(e,t.denyUrls))return Gt&&St.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Wc(e)}.
Url: ${Uv(e)}`),!0;if(!Eee(e,t.allowUrls))return Gt&&St.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Wc(e)}.
Url: ${Uv(e)}`),!0}return!1}function Cee(e,t){return t?.length?k3(e).some(s=>Hb(s,t)):!1}function kee(e,t){if(!t?.length)return!1;const s=e.transaction;return s?Hb(s,t):!1}function Aee(e,t){if(!t?.length)return!1;const s=Uv(e);return s?Hb(s,t):!1}function Eee(e,t){if(!t?.length)return!0;const s=Uv(e);return s?Hb(s,t):!0}function Tee(e=[]){for(let t=e.length-1;t>=0;t--){const s=e[t];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}function Uv(e){try{const s=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return s?Tee(s):null}catch{return Gt&&St.error(`Cannot extract url for event ${Wc(e)}`),null}}function Pee(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function Ree(e,t,s,r,i,a){if(!i.exception?.values||!a||!ac(a.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=k_(e,t,r,a.originalException,s,i.exception.values,o,0))}function k_(e,t,s,r,i,a,o,l){if(a.length>=s+1)return a;let u=[...a];if(ac(r[i],Error)){DR(o,l);const d=e(t,r[i]),m=u.length;IR(d,i,m,l),u=k_(e,t,s,r[i],i,[d,...u],d,m)}return Array.isArray(r.errors)&&r.errors.forEach((d,m)=>{if(ac(d,Error)){DR(o,l);const f=e(t,d),x=u.length;IR(f,`errors[${m}]`,x,l),u=k_(e,t,s,d,i,[f,...u],f,x)}}),u}function DR(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function IR(e,t,s,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:s,parent_id:r}}function Dee(e){const t="console";yd(t,e),wd(t,Iee)}function Iee(){"console"in Is&&qZ.forEach(function(e){e in Is.console&&Ri(Is.console,e,function(t){return $v[e]=t,function(...s){Ea("console",{args:s,level:e}),$v[e]?.apply(Is.console,s)}})})}function Mee(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const Lee="Dedupe",Oee=(()=>{let e;return{name:Lee,processEvent(t){if(t.type)return t;try{if(Bee(t,e))return Gt&&St.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),Fee=Oee;function Bee(e,t){return t?!!(zee(e,t)||$ee(e,t)):!1}function zee(e,t){const s=e.message,r=t.message;return!(!s&&!r||s&&!r||!s&&r||s!==r||!D3(e,t)||!R3(e,t))}function $ee(e,t){const s=MR(t),r=MR(e);return!(!s||!r||s.type!==r.type||s.value!==r.value||!D3(e,t)||!R3(e,t))}function R3(e,t){let s=KP(e),r=KP(t);if(!s&&!r)return!0;if(s&&!r||!s&&r||(s=s,r=r,r.length!==s.length))return!1;for(let i=0;i<r.length;i++){const a=r[i],o=s[i];if(a.filename!==o.filename||a.lineno!==o.lineno||a.colno!==o.colno||a.function!==o.function)return!1}return!0}function D3(e,t){let s=e.fingerprint,r=t.fingerprint;if(!s&&!r)return!0;if(s&&!r||!s&&r)return!1;s=s,r=r;try{return s.join("")===r.join("")}catch{return!1}}function MR(e){return e.exception?.values?.[0]}function I3(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const $f=Is;function Hee(){return"history"in $f&&!!$f.history}function Uee(){if(!("fetch"in $f))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function A_(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Gee(){if(typeof EdgeRuntime=="string")return!0;if(!Uee())return!1;if(A_($f.fetch))return!0;let e=!1;const t=$f.document;if(t&&typeof t.createElement=="function")try{const s=t.createElement("iframe");s.hidden=!0,t.head.appendChild(s),s.contentWindow?.fetch&&(e=A_(s.contentWindow.fetch)),t.head.removeChild(s)}catch(s){Gt&&St.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return e}function Vee(e,t){const s="fetch";yd(s,e),wd(s,()=>qee(void 0,t))}function qee(e,t=!1){t&&!Gee()||Ri(Is,"fetch",function(s){return function(...r){const i=new Error,{method:a,url:o}=Wee(r),l={args:r,fetchData:{method:a,url:o},startTimestamp:il()*1e3,virtualError:i,headers:Kee(r)};return Ea("fetch",{...l}),s.apply(Is,r).then(async u=>(Ea("fetch",{...l,endTimestamp:il()*1e3,response:u}),u),u=>{if(Ea("fetch",{...l,endTimestamp:il()*1e3,error:u}),HC(u)&&u.stack===void 0&&(u.stack=i.stack,cd(u,"framesToPop",1)),u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(l.fetchData.url);u.message=`${u.message} (${d.host})`}catch{}throw u})}})}function E_(e,t){return!!e&&typeof e=="object"&&!!e[t]}function LR(e){return typeof e=="string"?e:e?E_(e,"url")?e.url:e.toString?e.toString():"":""}function Wee(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[s,r]=e;return{url:LR(s),method:E_(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:LR(t),method:E_(t,"method")?String(t.method).toUpperCase():"GET"}}function Kee(e){const[t,s]=e;try{if(typeof s=="object"&&s!==null&&"headers"in s&&s.headers)return new Headers(s.headers);if(lQ(t))return new Headers(t.headers)}catch{}}function Yee(){return"npm"}function Xee(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&e!==void 0&&!e.includes("node_modules/")}function Zee(e){const t=/^\s*[-]{4,}$/,s=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/,r=/at (?:async )?(.+?) \(data:(.*?),/;return i=>{const a=i.match(r);if(a)return{filename:`<data:${a[2]}>`,function:a[1]};const o=i.match(s);if(o){let l,u,d,m,f;if(o[1]){d=o[1];let y=d.lastIndexOf(".");if(d[y-1]==="."&&y--,y>0){l=d.slice(0,y),u=d.slice(y+1);const w=l.indexOf(".Module");w>0&&(d=d.slice(w+1),l=l.slice(0,w))}m=void 0}u&&(m=l,f=u),u==="<anonymous>"&&(f=void 0,d=void 0),d===void 0&&(f=f||rc,d=m?`${m}.${f}`:f);let x=o[2]?.startsWith("file://")?o[2].slice(7):o[2];const v=o[5]==="native";return x?.match(/\/[A-Z]:/)&&(x=x.slice(1)),!x&&o[5]&&!v&&(x=o[5]),{filename:x?decodeURI(x):void 0,module:void 0,function:d,lineno:OR(o[3]),colno:OR(o[4]),in_app:Xee(x||"",v)}}if(i.match(t))return{filename:i}}}function Qee(e){return[90,Zee()]}function OR(e){return parseInt(e||"",10)||void 0}var FR;(function(e){e[e.Classic=1]="Classic",e[e.Protocol=2]="Protocol",e[e.Both=3]="Both"})(FR||(FR={}));function Jee(e){return{createUrl:t=>`${e}://${t}/sentry_key`,urlMatches:function(t,s){return t.startsWith(this.createUrl(s))},createKey:t=>`${e}.${t}`,namespace:e}}const ete="sentry-electron-renderer-id";function tte(e){const t=Jee(e);if(window.__SENTRY_IPC__?.[t.namespace])return window.__SENTRY_IPC__[t.namespace];{St.log("IPC was not configured in preload script, falling back to custom protocol and fetch");const s=window.__SENTRY_RENDERER_ID__=Mi(),r={[ete]:s};return{sendRendererStart:()=>{fetch(t.createUrl("start"),{method:"POST",body:"",headers:r}).catch(()=>{console.error(`Sentry SDK failed to establish connection with the Electron main process.
  - Ensure you have initialized the SDK in the main process
  - If your renderers use custom sessions, be sure to set 'getSessions' in the main process options
  - If you are bundling your main process code and using Electron < v5, you'll need to manually configure a preload script`)})},sendScope:i=>{fetch(t.createUrl("scope"),{method:"POST",body:i,headers:r}).catch(()=>{})},sendEnvelope:i=>{fetch(t.createUrl("envelope"),{method:"POST",body:i,headers:r}).catch(()=>{})},sendStatus:i=>{fetch(t.createUrl("status"),{method:"POST",body:JSON.stringify({status:i}),headers:r}).catch(()=>{})},sendStructuredLog:i=>{fetch(t.createUrl("structured-log"),{method:"POST",body:JSON.stringify(i),headers:r}).catch(()=>{})},sendMetric:i=>{fetch(t.createUrl("metric"),{method:"POST",body:JSON.stringify(i),headers:r}).catch(()=>{})}}}}let bx;function M3(e=Or()){if(!e)throw new Error("Could not find client, make sure to call Sentry.init before getIPC");bx||(bx=new WeakMap);const t=bx.get(e);if(t)return t;const s=e.getOptions().ipcNamespace,r=tte(s);return bx.set(e,r),r.sendRendererStart(),r}const bn=Is;let T_=0;function L3(){return T_>0}function ste(){T_++,setTimeout(()=>{T_--})}function th(e,t={}){function s(i){return typeof i=="function"}if(!s(e))return e;try{const i=e.__sentry_wrapped__;if(i)return typeof i=="function"?i:e;if(qC(e))return e}catch{return e}const r=function(...i){try{const a=i.map(o=>th(o,t));return e.apply(this,a)}catch(a){throw ste(),o3(o=>{o.addEventProcessor(l=>(t.mechanism&&(y_(l,void 0),Qu(l,t.mechanism)),l.extra={...l.extra,arguments:i},l)),N_(a)}),a}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}s3(r,e),cd(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function nte(){const e=VC(),{referrer:t}=bn.document||{},{userAgent:s}=bn.navigator||{},r={...t&&{Referer:t},...s&&{"User-Agent":s}};return{url:e,headers:r}}function e1(e,t){const s=t1(e,t),r={type:lte(t),value:cte(t)};return s.length&&(r.stacktrace={frames:s}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function rte(e,t,s,r){const a=Or()?.getOptions().normalizeDepth,o=fte(t),l={__serialized__:p3(t,a)};if(o)return{exception:{values:[e1(e,o)]},extra:l};const u={exception:{values:[{type:$b(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:hte(t,{isUnhandledRejection:r})}]},extra:l};if(s){const d=t1(e,s);d.length&&(u.exception.values[0].stacktrace={frames:d})}return u}function Lj(e,t){return{exception:{values:[e1(e,t)]}}}function t1(e,t){const s=t.stacktrace||t.stack||"",r=ate(t),i=ote(t);try{return e(s,r,i)}catch{}return[]}const ite=/Minified React error #\d+;/i;function ate(e){return e&&ite.test(e.message)?1:0}function ote(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function O3(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function lte(e){const t=e?.name;return!t&&O3(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function cte(e){const t=e?.message;return O3(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function dte(e,t,s,r){const i=s?.syntheticException||void 0,a=s1(e,t,i,r);return Qu(a),a.level="error",s?.event_id&&(a.event_id=s.event_id),Ub(a)}function ute(e,t,s="info",r,i){const a=r?.syntheticException||void 0,o=P_(e,t,a,i);return o.level=s,r?.event_id&&(o.event_id=r.event_id),Ub(o)}function s1(e,t,s,r,i){let a;if(J5(t)&&t.error)return Lj(e,t.error);if(XP(t)||rQ(t)){const o=t;if("stack"in t)a=Lj(e,t);else{const l=o.name||(XP(o)?"DOMError":"DOMException"),u=o.message?`${l}: ${o.message}`:l;a=P_(e,u,s,r),y_(a,u)}return"code"in o&&(a.tags={...a.tags,"DOMException.code":`${o.code}`}),a}return HC(t)?Lj(e,t):Bf(t)||$b(t)?(a=rte(e,t,s,i),Qu(a,{synthetic:!0}),a):(a=P_(e,t,s,r),y_(a,`${t}`),Qu(a,{synthetic:!0}),a)}function P_(e,t,s,r){const i={};if(r&&s){const a=t1(e,s);a.length&&(i.exception={values:[{value:t,stacktrace:{frames:a}}]}),Qu(i,{synthetic:!0})}if(UC(t)){const{__sentry_template_string__:a,__sentry_template_values__:o}=t;return i.logentry={message:a,params:o},i}return i.message=t,i}function hte(e,{isUnhandledRejection:t}){const s=hQ(e),r=t?"promise rejection":"exception";return J5(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:$b(e)?`Event \`${mte(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${s}`}function mte(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function fte(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const s=e[t];if(s instanceof Error)return s}}class pte extends lee{constructor(t){const s=gte(t),r=bn.SENTRY_SDK_SOURCE||Yee();gee(s,"browser",["browser"],r),s._metadata?.sdk&&(s._metadata.sdk.settings={infer_ip:s.sendDefaultPii?"auto":"never",...s._metadata.sdk.settings}),super(s);const{sendDefaultPii:i,sendClientReports:a,enableLogs:o,_experiments:l,enableMetrics:u}=this._options,d=u??l?.enableMetrics??!0;bn.document&&(a||o||d)&&bn.document.addEventListener("visibilitychange",()=>{bn.document.visibilityState==="hidden"&&(a&&this._flushOutcomes(),o&&w3(this),d&&S3(this))}),i&&this.on("beforeSendSession",pee)}eventFromException(t,s){return dte(this._options.stackParser,t,s,this._options.attachStacktrace)}eventFromMessage(t,s="info",r){return ute(this._options.stackParser,t,s,r,this._options.attachStacktrace)}_prepareEvent(t,s,r,i){return t.platform=t.platform||"javascript",super._prepareEvent(t,s,r,i)}}function gte(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:bn.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const xte=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Vr=Is,vte=1e3;let BR,R_,D_;function bte(e){yd("dom",e),wd("dom",yte)}function yte(){if(!Vr.document)return;const e=Ea.bind(null,"dom"),t=zR(e,!0);Vr.document.addEventListener("click",t,!1),Vr.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(s=>{const i=Vr[s]?.prototype;i?.hasOwnProperty?.("addEventListener")&&(Ri(i,"addEventListener",function(a){return function(o,l,u){if(o==="click"||o=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},m=d[o]=d[o]||{refCount:0};if(!m.handler){const f=zR(e);m.handler=f,a.call(this,o,f,u)}m.refCount++}catch{}return a.call(this,o,l,u)}}),Ri(i,"removeEventListener",function(a){return function(o,l,u){if(o==="click"||o=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},m=d[o];m&&(m.refCount--,m.refCount<=0&&(a.call(this,o,m.handler,u),m.handler=void 0,delete d[o]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,o,l,u)}}))})}function wte(e){if(e.type!==R_)return!1;try{if(!e.target||e.target._sentryId!==D_)return!1}catch{}return!0}function jte(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function zR(e,t=!1){return s=>{if(!s||s._sentryCaptured)return;const r=Ste(s);if(jte(s.type,r))return;cd(s,"_sentryCaptured",!0),r&&!r._sentryId&&cd(r,"_sentryId",Mi());const i=s.type==="keypress"?"input":s.type;wte(s)||(e({event:s,name:i,global:t}),R_=s.type,D_=r?r._sentryId:void 0),clearTimeout(BR),BR=Vr.setTimeout(()=>{D_=void 0,R_=void 0},vte)}}function Ste(e){try{return e.target}catch{return null}}let yx;function F3(e){const t="history";yd(t,e),wd(t,_te)}function _te(){if(Vr.addEventListener("popstate",()=>{const t=Vr.location.href,s=yx;if(yx=t,s===t)return;Ea("history",{from:s,to:t})}),!Hee())return;function e(t){return function(...s){const r=s.length>2?s[2]:void 0;if(r){const i=yx,a=Nte(String(r));if(yx=a,i===a)return t.apply(this,s);Ea("history",{from:i,to:a})}return t.apply(this,s)}}Ri(Vr.history,"pushState",e),Ri(Vr.history,"replaceState",e)}function Nte(e){try{return new URL(e,Vr.location.origin).toString()}catch{return e}}const cv={};function Cte(e){const t=cv[e];if(t)return t;let s=Vr[e];if(A_(s))return cv[e]=s.bind(Vr);const r=Vr.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const a=i.contentWindow;a?.[e]&&(s=a[e]),r.head.removeChild(i)}catch(i){xte&&St.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,i)}return s&&(cv[e]=s.bind(Vr))}function kte(e){cv[e]=void 0}const df="__sentry_xhr_v3__";function Ate(e){yd("xhr",e),wd("xhr",Ete)}function Ete(){if(!Vr.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,s,r){const i=new Error,a=il()*1e3,o=rl(r[0])?r[0].toUpperCase():void 0,l=Tte(r[1]);if(!o||!l)return t.apply(s,r);s[df]={method:o,url:l,request_headers:{}},o==="POST"&&l.match(/sentry_key/)&&(s.__sentry_own_request__=!0);const u=()=>{const d=s[df];if(d&&s.readyState===4){try{d.status_code=s.status}catch{}const m={endTimestamp:il()*1e3,startTimestamp:a,xhr:s,virtualError:i};Ea("xhr",m)}};return"onreadystatechange"in s&&typeof s.onreadystatechange=="function"?s.onreadystatechange=new Proxy(s.onreadystatechange,{apply(d,m,f){return u(),d.apply(m,f)}}):s.addEventListener("readystatechange",u),s.setRequestHeader=new Proxy(s.setRequestHeader,{apply(d,m,f){const[x,v]=f,y=m[df];return y&&rl(x)&&rl(v)&&(y.request_headers[x.toLowerCase()]=v),d.apply(m,f)}}),t.apply(s,r)}}),e.send=new Proxy(e.send,{apply(t,s,r){const i=s[df];if(!i)return t.apply(s,r);r[0]!==void 0&&(i.body=r[0]);const a={startTimestamp:il()*1e3,xhr:s};return Ea("xhr",a),t.apply(s,r)}})}function Tte(e){if(rl(e))return e;try{return e.toString()}catch{}}const Pte=40;function Rte(e,t=Cte("fetch")){let s=0,r=0;async function i(a){const o=a.body.length;s+=o,r++;const l={body:a.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:s<=6e4&&r<15,...e.fetchOptions};try{const u=await t(e.url,l);return{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}}catch(u){throw kte("fetch"),u}finally{s-=o,r--}}return C3(e,i,JC(e.bufferSize||Pte))}const Gb=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Dte=30,Ite=50;function I_(e,t,s,r){const i={filename:e,function:t==="<anonymous>"?rc:t,in_app:!0};return s!==void 0&&(i.lineno=s),r!==void 0&&(i.colno=r),i}const Mte=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Lte=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ote=/\((\S*)(?::(\d+))(?::(\d+))\)/,Fte=/at (.+?) ?\(data:(.+?),/,Bte=e=>{const t=e.match(Fte);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const s=Mte.exec(e);if(s){const[,i,a,o]=s;return I_(i,rc,+a,+o)}const r=Lte.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const l=Ote.exec(r[2]);l&&(r[2]=l[1],r[3]=l[2],r[4]=l[3])}const[a,o]=z3(r[1]||rc,r[2]);return I_(o,a,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},B3=[Dte,Bte],zte=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$te=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Hte=e=>{const t=zte.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const a=$te.exec(t[3]);a&&(t[1]=t[1]||"eval",t[3]=a[1],t[4]=a[2],t[5]="")}let r=t[3],i=t[1]||rc;return[i,r]=z3(i,r),I_(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ute=[Ite,Hte],Gte=[B3,Ute],Vte=Y5(...Gte),z3=(e,t)=>{const s=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return s||r?[e.indexOf("@")!==-1?e.split("@")[0]:rc,s?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},wx=1024,qte="Breadcrumbs",Wte=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:qte,setup(s){t.console&&Dee(Zte(s)),t.dom&&bte(Xte(s,t.dom)),t.xhr&&Ate(Qte(s)),t.fetch&&Vee(Jte(s)),t.history&&F3(ese(s)),t.sentry&&s.on("beforeSendEvent",Yte(s))}}}),Kte=Wte;function Yte(e){return function(s){Or()===e&&dd({category:`sentry.${s.type==="transaction"?"transaction":"event"}`,event_id:s.event_id,level:s.level,message:Wc(s)},{event:s})}}function Xte(e,t){return function(r){if(Or()!==e)return;let i,a,o=typeof t=="object"?t.serializeAttribute:void 0,l=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;l&&l>wx&&(Gb&&St.warn(`\`dom.maxStringLength\` cannot exceed ${wx}, but a value of ${l} was configured. Sentry will use ${wx} instead.`),l=wx),typeof o=="string"&&(o=[o]);try{const d=r.event,m=tse(d)?d.target:d;i=t3(m,{keyAttrs:o,maxStringLength:l}),a=uQ(m)}catch{i="<unknown>"}if(i.length===0)return;const u={category:`ui.${r.name}`,message:i};a&&(u.data={"ui.component_name":a}),dd(u,{event:r.event,name:r.name,global:r.global})}}function Zte(e){return function(s){if(Or()!==e)return;const r={category:"console",data:{arguments:s.args,logger:"console"},level:Mee(s.level),message:JP(s.args," ")};if(s.level==="assert")if(s.args[0]===!1)r.message=`Assertion failed: ${JP(s.args.slice(1)," ")||"console.assert"}`,r.data.arguments=s.args.slice(1);else return;dd(r,{input:s.args,level:s.level})}}function Qte(e){return function(s){if(Or()!==e)return;const{startTimestamp:r,endTimestamp:i}=s,a=s.xhr[df];if(!r||!i||!a)return;const{method:o,url:l,status_code:u,body:d}=a,m={method:o,url:l,status_code:u},f={xhr:s.xhr,input:d,startTimestamp:r,endTimestamp:i},x={category:"xhr",data:m,type:"http",level:I3(u)};e.emit("beforeOutgoingRequestBreadcrumb",x,f),dd(x,f)}}function Jte(e){return function(s){if(Or()!==e)return;const{startTimestamp:r,endTimestamp:i}=s;if(i&&!(s.fetchData.url.match(/sentry_key/)&&s.fetchData.method==="POST"))if(s.fetchData.method,s.fetchData.url,s.error){const a=s.fetchData,o={data:s.error,input:s.args,startTimestamp:r,endTimestamp:i},l={category:"fetch",data:a,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",l,o),dd(l,o)}else{const a=s.response,o={...s.fetchData,status_code:a?.status};s.fetchData.request_body_size,s.fetchData.response_body_size,a?.status;const l={input:s.args,response:a,startTimestamp:r,endTimestamp:i},u={category:"fetch",data:o,type:"http",level:I3(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",u,l),dd(u,l)}}}function ese(e){return function(s){if(Or()!==e)return;let r=s.from,i=s.to;const a=Mj(bn.location.href);let o=r?Mj(r):void 0;const l=Mj(i);o?.path||(o=a),a.protocol===l.protocol&&a.host===l.host&&(i=l.relative),a.protocol===o.protocol&&a.host===o.host&&(r=o.relative),dd({category:"navigation",data:{from:r,to:i}})}}function tse(e){return!!e&&!!e.target}const sse=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],nse="BrowserApiErrors",rse=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:nse,setupOnce(){t.setTimeout&&Ri(bn,"setTimeout",$R),t.setInterval&&Ri(bn,"setInterval",$R),t.requestAnimationFrame&&Ri(bn,"requestAnimationFrame",ase),t.XMLHttpRequest&&"XMLHttpRequest"in bn&&Ri(XMLHttpRequest.prototype,"send",ose);const s=t.eventTarget;s&&(Array.isArray(s)?s:sse).forEach(i=>lse(i,t))}}}),ise=rse;function $R(e){return function(...t){const s=t[0];return t[0]=th(s,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${ic(e)}`}}),e.apply(this,t)}}function ase(e){return function(t){return e.apply(this,[th(t,{mechanism:{data:{handler:ic(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function ose(e){return function(...t){const s=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in s&&typeof s[i]=="function"&&Ri(s,i,function(a){const o={mechanism:{data:{handler:ic(a)},handled:!1,type:`auto.browser.browserapierrors.xhr.${i}`}},l=qC(a);return l&&(o.mechanism.data.handler=ic(l)),th(a,o)})}),e.apply(this,t)}}function lse(e,t){const r=bn[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Ri(r,"addEventListener",function(i){return function(a,o,l){try{cse(o)&&(o.handleEvent=th(o.handleEvent,{mechanism:{data:{handler:ic(o),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&dse(this,a,o),i.apply(this,[a,th(o,{mechanism:{data:{handler:ic(o),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),l])}}),Ri(r,"removeEventListener",function(i){return function(a,o,l){try{const u=o.__sentry_wrapped__;u&&i.call(this,a,u,l)}catch{}return i.call(this,a,o,l)}}))}function cse(e){return typeof e.handleEvent=="function"}function dse(e,t,s){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,s)}const use=()=>({name:"BrowserSession",setupOnce(){if(typeof bn.document>"u"){Gb&&St.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}bR({ignoreDuration:!0}),yR(),F3(({from:e,to:t})=>{e!==void 0&&e!==t&&(bR({ignoreDuration:!0}),yR())})}}),hse="GlobalHandlers",mse=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:hse,setupOnce(){Error.stackTraceLimit=50},setup(s){t.onerror&&(pse(s),HR("onerror")),t.onunhandledrejection&&(gse(s),HR("onunhandledrejection"))}}}),fse=mse;function pse(e){eQ(t=>{const{stackParser:s,attachStacktrace:r}=$3();if(Or()!==e||L3())return;const{msg:i,url:a,line:o,column:l,error:u}=t,d=bse(s1(s,u||i,void 0,r,!1),a,o,l);d.level="error",x3(d,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function gse(e){sQ(t=>{const{stackParser:s,attachStacktrace:r}=$3();if(Or()!==e||L3())return;const i=xse(t),a=zb(i)?vse(i):s1(s,i,void 0,r,!0);a.level="error",x3(a,{originalException:i,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function xse(e){if(zb(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function vse(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function bse(e,t,s,r){const i=e.exception=e.exception||{},a=i.values=i.values||[],o=a[0]=a[0]||{},l=o.stacktrace=o.stacktrace||{},u=l.frames=l.frames||[],d=r,m=s,f=yse(t)??VC();return u.length===0&&u.push({colno:d,filename:f,function:rc,in_app:!0,lineno:m}),e}function HR(e){Gb&&St.log(`Global Handler attached: ${e}`)}function $3(){return Or()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function yse(e){if(!(!rl(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),s=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${s}${r?",base64":""}>`}return e}}const wse=()=>({name:"HttpContext",preprocessEvent(e){if(!bn.navigator&&!bn.location&&!bn.document)return;const t=nte(),s={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:s}}}),jse="cause",Sse=5,_se="LinkedErrors",Nse=((e={})=>{const t=e.limit||Sse,s=e.key||jse;return{name:_se,preprocessEvent(r,i,a){const o=a.getOptions();Ree(e1,o.stackParser,s,t,r,i)}}}),Cse=Nse;function kse(){return Ase()?(Gb&&bh(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function Ase(){if(typeof bn.window>"u")return!1;const e=bn;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const s=VC(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(bn===bn.top&&r.some(a=>s.startsWith(`${a}://`)))}function H3(e){return[_ee(),yee(),ise(),Kte(),fse(),Cse(),Fee(),wse(),use()]}function Ese(e={}){const t=!e.skipBrowserExtensionCheck&&kse();let s=e.defaultIntegrations==null?H3():e.defaultIntegrations;const r={...e,enabled:t?!1:e.enabled,stackParser:JZ(e.stackParser||Vte),integrations:VJ({integrations:e.integrations,defaultIntegrations:s}),transport:e.transport||Rte};return mee(pte,r)}function Oj(){const e=KC().getScopeData(),t=jd().getScopeData(),s=vo().getScopeData();return Hv(e,t),Hv(e,s),e.eventProcessors=[],e}function Tse(e){jd().addScopeListener(t=>{const s=Oj();e(s,t)}),vo().addScopeListener(t=>{const s=Oj();e(s,t)}),KC().addScopeListener(t=>{const s=Oj();e(s,t)})}const Pse=()=>({name:"ScopeToMain",setup(e){const t=M3(e);Tse((s,r)=>{t.sendScope(JSON.stringify(Za(s,20,2e3))),r.clearBreadcrumbs(),r.clearAttachments()})}});function Rse(e){let t;return C3(e,async s=>(t||(t=M3()),t.sendEnvelope(s.body),{statusCode:200}))}const Dse=50,[,Ise]=B3,[,Mse]=Qee(),Lse=(e,t=0)=>{const s=[];for(const r of e.split(`
`).slice(t)){const i=Ise(r),a=Mse(r);if(i&&a?.in_app!==!1?s.push(i):a&&(a.module===void 0&&delete a.module,s.push(a)),s.length>=Dse)break}return X5(s)};function Ose(e){return[...H3().filter(t=>t.name!=="BrowserSession"),Pse()]}function Fse(e={},t=Ese){if(window?.__SENTRY__RENDERER_INIT__){St.warn(`The browser SDK has already been initialized.
If init has been called in the preload and contextIsolation is disabled, is not required to call init in the renderer`);return}window.__SENTRY__RENDERER_INIT__=!0,e.sendClientReports=!1,e.defaultIntegrations===void 0&&(e.defaultIntegrations=Ose()),e.stackParser===void 0&&(e.stackParser=Lse),e.ipcNamespace===void 0&&(e.ipcNamespace="sentry-ipc"),e.dsn===void 0&&(e.dsn="https://12345@dummy.dsn/12345"),e.transport===void 0&&(e.transport=Rse),delete e.initialScope,t(e)}const UR=e=>{let t;const s=new Set,r=(d,m)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const x=t;t=m??(typeof f!="object"||f===null)?f:Object.assign({},t,f),s.forEach(v=>v(t,x))}},i=()=>t,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(s.add(d),()=>s.delete(d))},u=t=e(r,i,l);return l},Bse=(e=>e?UR(e):UR),zse=e=>e;function $se(e,t=zse){const s=Vt.useSyncExternalStore(e.subscribe,Vt.useCallback(()=>t(e.getState()),[e,t]),Vt.useCallback(()=>t(e.getInitialState()),[e,t]));return Vt.useDebugValue(s),s}const GR=e=>{const t=Bse(e),s=r=>$se(t,r);return Object.assign(s,t),s},Gn=(e=>e?GR(e):GR),Hse=1,Use=1e6;let Fj=0;function Gse(){return Fj=(Fj+1)%Number.MAX_SAFE_INTEGER,Fj.toString()}const Bj=new Map,VR=e=>{if(Bj.has(e))return;const t=setTimeout(()=>{Bj.delete(e),Sf({type:"REMOVE_TOAST",toastId:e})},Use);Bj.set(e,t)},Vse=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Hse)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?VR(s):e.toasts.forEach(r=>{VR(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)}}},dv=[];let uv={toasts:[]};function Sf(e){uv=Vse(uv,e),dv.forEach(t=>{t(uv)})}function ed({...e}){const t=Gse(),s=i=>Sf({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Sf({type:"DISMISS_TOAST",toastId:t});return Sf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:s}}function bo(){const[e,t]=p.useState(uv);return p.useEffect(()=>(dv.push(t),()=>{const s=dv.indexOf(t);s>-1&&dv.splice(s,1)}),[]),{...e,toast:ed,dismiss:s=>Sf({type:"DISMISS_TOAST",toastId:s})}}const cs=Gn(e=>({settings:L5,isLoading:!0,error:null,profiles:[],activeProfileId:null,profilesLoading:!1,profilesError:null,isTestingConnection:!1,testConnectionResult:null,modelsLoading:!1,modelsError:null,discoveredModels:new Map,setSettings:t=>e({settings:t}),updateSettings:t=>e(s=>({settings:{...s.settings,...t}})),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setProfiles:(t,s)=>e({profiles:t,activeProfileId:s}),setProfilesLoading:t=>e({profilesLoading:t}),setProfilesError:t=>e({profilesError:t}),saveProfile:async t=>{e({profilesLoading:!0,profilesError:null});try{const s=await window.electronAPI.saveAPIProfile(t);if(s.success&&s.data){try{const r=await window.electronAPI.getAPIProfiles();r.success&&r.data?e({profiles:r.data.profiles,activeProfileId:r.data.activeProfileId,profilesLoading:!1}):e(i=>({profiles:[...i.profiles,s.data],profilesLoading:!1}))}catch{e(r=>({profiles:[...r.profiles,s.data],profilesLoading:!1}))}return!0}return e({profilesError:s.error||"Failed to save profile",profilesLoading:!1}),!1}catch(s){return e({profilesError:s instanceof Error?s.message:"Failed to save profile",profilesLoading:!1}),!1}},updateProfile:async t=>{e({profilesLoading:!0,profilesError:null});try{const s=await window.electronAPI.updateAPIProfile(t);return s.success&&s.data?(e(r=>({profiles:r.profiles.map(i=>i.id===s.data.id?s.data:i),profilesLoading:!1})),!0):(e({profilesError:s.error||"Failed to update profile",profilesLoading:!1}),!1)}catch(s){return e({profilesError:s instanceof Error?s.message:"Failed to update profile",profilesLoading:!1}),!1}},deleteProfile:async t=>{e({profilesLoading:!0,profilesError:null});try{const s=await window.electronAPI.deleteAPIProfile(t);return s.success?(e(r=>({profiles:r.profiles.filter(i=>i.id!==t),activeProfileId:r.activeProfileId===t?null:r.activeProfileId,profilesLoading:!1})),!0):(e({profilesError:s.error||"Failed to delete profile",profilesLoading:!1}),!1)}catch(s){return e({profilesError:s instanceof Error?s.message:"Failed to delete profile",profilesLoading:!1}),!1}},setActiveProfile:async t=>{e({profilesLoading:!0,profilesError:null});try{const s=await window.electronAPI.setActiveAPIProfile(t);return s.success?(e({activeProfileId:t,profilesLoading:!1}),!0):(e({profilesError:s.error||"Failed to set active profile",profilesLoading:!1}),!1)}catch(s){return e({profilesError:s instanceof Error?s.message:"Failed to set active profile",profilesLoading:!1}),!1}},testConnection:async(t,s,r)=>{e({isTestingConnection:!0,testConnectionResult:null});try{const i=await window.electronAPI.testConnection(t,s,r);if(i.success&&i.data)return e({testConnectionResult:i.data,isTestingConnection:!1}),i.data.success&&ed({title:"Connection successful",description:"Your API credentials are valid."}),i.data;const a={success:!1,errorType:"unknown",message:i.error||"Failed to test connection"};return e({testConnectionResult:a,isTestingConnection:!1}),ed({variant:"destructive",title:"Connection test failed",description:i.error||"Failed to test connection"}),a}catch(i){const a={success:!1,errorType:"unknown",message:i instanceof Error?i.message:"Failed to test connection"};return e({testConnectionResult:a,isTestingConnection:!1}),ed({variant:"destructive",title:"Connection test failed",description:i instanceof Error?i.message:"Failed to test connection"}),a}},discoverModels:async(t,s,r)=>{console.log("[settings-store] discoverModels called with:",{baseUrl:t,apiKey:`${s.slice(-4)}`});const i=`${t}::${s.slice(-4)}`,o=cs.getState().discoveredModels.get(i);if(o)return console.log("[settings-store] Returning cached models"),o;e({modelsLoading:!0,modelsError:null});try{console.log("[settings-store] Calling window.electronAPI.discoverModels...");const l=await window.electronAPI.discoverModels(t,s,r);if(console.log("[settings-store] discoverModels result:",l),l.success&&l.data){const u=l.data.models;return e(d=>({discoveredModels:new Map(d.discoveredModels).set(i,u),modelsLoading:!1})),u}return e({modelsError:l.error||"Failed to discover models",modelsLoading:!1}),null}catch(l){return e({modelsError:l instanceof Error?l.message:"Failed to discover models",modelsLoading:!1}),null}}}));function qse(e){if(e.onboardingCompleted!==void 0)return e;const t=!!e.globalClaudeOAuthToken,s=!!e.autoBuildPath;return t||s?{...e,onboardingCompleted:!0}:{...e,onboardingCompleted:!1}}async function U3(){const e=cs.getState();e.setLoading(!0);try{const t=await window.electronAPI.getSettings();if(t.success&&t.data){const s=qse(t.data);e.setSettings(s),s.onboardingCompleted!==t.data.onboardingCompleted&&await window.electronAPI.saveSettings({onboardingCompleted:s.onboardingCompleted}),Yse()}}catch(t){e.setError(t instanceof Error?t.message:"Failed to load settings")}finally{e.setLoading(!1)}}async function Ql(e){const t=cs.getState();try{return(await window.electronAPI.saveSettings(e)).success?(t.updateSettings(e),!0):!1}catch{return!1}}async function Wse(){const e=cs.getState();e.setProfilesLoading(!0);try{const t=await window.electronAPI.getAPIProfiles();t.success&&t.data&&e.setProfiles(t.data.profiles,t.data.activeProfileId)}catch(t){e.setProfilesError(t instanceof Error?t.message:"Failed to load profiles")}finally{e.setProfilesLoading(!1)}}function Zo(e){return e&&(e=e.replace(/\/Users\/[^/]+(?=\/|$)/g,"/Users/***"),e=e.replace(/[A-Z]:\\Users\\[^\\]+(?=\\|$)/gi,t=>`${t[0]}:\\Users\\***`),e=e.replace(/\/home\/[^/]+(?=\/|$)/g,"/home/***"),e)}function Ru(e){if(e==null)return e;if(typeof e=="string")return Zo(e);if(Array.isArray(e))return e.map(Ru);if(typeof e=="object"){const t={};for(const s of Object.keys(e))t[s]=Ru(e[s]);return t}return e}function Kse(e){if(e.exception?.values)for(const t of e.exception.values){if(t.stacktrace?.frames)for(const s of t.stacktrace.frames)s.filename&&(s.filename=Zo(s.filename)),s.abs_path&&(s.abs_path=Zo(s.abs_path));t.value&&(t.value=Zo(t.value))}if(e.breadcrumbs)for(const t of e.breadcrumbs)t.message&&(t.message=Zo(t.message)),t.data&&(t.data=Ru(t.data));if(e.message&&(e.message=Zo(e.message)),e.tags)for(const t of Object.keys(e.tags))typeof e.tags[t]=="string"&&(e.tags[t]=Zo(e.tags[t]));if(e.contexts)for(const t of Object.keys(e.contexts)){const s=e.contexts[t];s&&typeof s=="object"&&(e.contexts[t]=Ru(s))}if(e.extra&&(e.extra=Ru(e.extra)),e.user&&(e.user={}),e.request){if(e.request.url&&(e.request.url=Zo(e.request.url)),e.request.headers)for(const t of Object.keys(e.request.headers))typeof e.request.headers[t]=="string"&&(e.request.headers[t]=Zo(e.request.headers[t]));e.request.data&&(e.request.data=Ru(e.request.data))}return e}let G3=!1,V3=!1;function Yse(){G3=!0,console.log("[Sentry] Settings loaded, error reporting ready")}async function Xse(){if(!(typeof window<"u"&&!!window.electronAPI)){console.log("[Sentry] Not in Electron environment, skipping initialization");return}let t={dsn:"",tracesSampleRate:0,profilesSampleRate:0};try{t=await window.electronAPI.getSentryConfig()}catch(r){console.warn("[Sentry] Failed to get config from main process:",r)}if(!(t.dsn.length>0)){console.log("[Sentry] No DSN configured - error reporting disabled in renderer");return}Fse({dsn:t.dsn,beforeSend(r){if(!G3)return console.log("[Sentry] Settings not loaded yet, dropping event"),null;try{if(!(cs.getState().settings.sentryEnabled??!0))return null}catch(i){return console.error("[Sentry] Failed to read settings, dropping event:",i),null}return Kse(r)},tracesSampleRate:t.tracesSampleRate,profilesSampleRate:t.profilesSampleRate,enabled:!0}),V3=!0,console.log(`[Sentry] Renderer initialized (traces: ${t.tracesSampleRate}, profiles: ${t.profilesSampleRate})`)}function q3(e){console.log(`[Sentry] Notifying main process: ${e?"enabled":"disabled"}`);try{window.electronAPI?.notifySentryStateChanged?.(e)}catch(t){console.error("[Sentry] Failed to notify main process:",t)}}function Zse(e,t){if(!V3){console.error("[Sentry] Not initialized, error not captured:",e);return}t?o3(s=>{s.setContext("additional",t),N_(e)}):N_(e)}var zj={exports:{}},Um={},$j={exports:{}},Hj={};var qR;function Qse(){return qR||(qR=1,(function(e){function t(I,V){var B=I.length;I.push(V);e:for(;0<B;){var K=B-1>>>1,L=I[K];if(0<i(L,V))I[K]=V,I[B]=L,B=K;else break e}}function s(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var V=I[0],B=I.pop();if(B!==V){I[0]=B;e:for(var K=0,L=I.length,G=L>>>1;K<G;){var Y=2*(K+1)-1,q=I[Y],Q=Y+1,se=I[Q];if(0>i(q,B))Q<L&&0>i(se,q)?(I[K]=se,I[Q]=B,K=Q):(I[K]=q,I[Y]=B,K=Y);else if(Q<L&&0>i(se,B))I[K]=se,I[Q]=B,K=Q;else break e}}return V}function i(I,V){var B=I.sortIndex-V.sortIndex;return B!==0?B:I.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],m=1,f=null,x=3,v=!1,y=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function T(I){for(var V=s(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=I)r(d),V.sortIndex=V.expirationTime,t(u,V);else break;V=s(d)}}function E(I){if(w=!1,T(I),!y)if(s(u)!==null)y=!0,A||(A=!0,F());else{var V=s(d);V!==null&&H(E,V.startTime-I)}}var A=!1,R=-1,D=5,M=-1;function P(){return S?!0:!(e.unstable_now()-M<D)}function O(){if(S=!1,A){var I=e.unstable_now();M=I;var V=!0;try{e:{y=!1,w&&(w=!1,_(R),R=-1),v=!0;var B=x;try{t:{for(T(I),f=s(u);f!==null&&!(f.expirationTime>I&&P());){var K=f.callback;if(typeof K=="function"){f.callback=null,x=f.priorityLevel;var L=K(f.expirationTime<=I);if(I=e.unstable_now(),typeof L=="function"){f.callback=L,T(I),V=!0;break t}f===s(u)&&r(u),T(I)}else r(u);f=s(u)}if(f!==null)V=!0;else{var G=s(d);G!==null&&H(E,G.startTime-I),V=!1}}break e}finally{f=null,x=B,v=!1}V=void 0}}finally{V?F():A=!1}}}var F;if(typeof j=="function")F=function(){j(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,z=$.port2;$.port1.onmessage=O,F=function(){z.postMessage(null)}}else F=function(){C(O,0)};function H(I,V){R=C(function(){I(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(I){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var B=x;x=V;try{return I()}finally{x=B}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var B=x;x=I;try{return V()}finally{x=B}},e.unstable_scheduleCallback=function(I,V,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,I){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=B+L,I={id:m++,callback:V,priorityLevel:I,startTime:B,expirationTime:L,sortIndex:-1},B>K?(I.sortIndex=B,t(d,I),s(u)===null&&I===s(d)&&(w?(_(R),R=-1):w=!0,H(E,B-K))):(I.sortIndex=L,t(u,I),y||v||(y=!0,A||(A=!0,F()))),I},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(I){var V=x;return function(){var B=x;x=V;try{return I.apply(this,arguments)}finally{x=B}}}})(Hj)),Hj}var WR;function Jse(){return WR||(WR=1,$j.exports=Qse()),$j.exports}var Uj={exports:{}},kr={};var KR;function ene(){if(KR)return kr;KR=1;var e=Lb();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,d,m){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:u,containerInfo:d,implementation:m}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kr.createPortal=function(u,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return a(u,d,null,m)},kr.flushSync=function(u){var d=o.T,m=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=m,r.d.f()}},kr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},kr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},kr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var m=d.as,f=l(m,d.crossOrigin),x=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:x,fetchPriority:v}):m==="script"&&r.d.X(u,{crossOrigin:f,integrity:x,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},kr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,f=l(m,d.crossOrigin);r.d.L(u,m,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kr.preloadModule=function(u,d){if(typeof u=="string")if(d){var m=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},kr.requestFormReset=function(u){r.d.r(u)},kr.unstable_batchedUpdates=function(u,d){return u(d)},kr.useFormState=function(u,d,m){return o.H.useFormState(u,d,m)},kr.useFormStatus=function(){return o.H.useHostTransitionStatus()},kr.version="19.2.3",kr}var YR;function W3(){if(YR)return Uj.exports;YR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Uj.exports=ene(),Uj.exports}var XR;function tne(){if(XR)return Um;XR=1;var e=Jse(),t=Lb(),s=W3();function r(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function a(c){var h=c,g=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(g=h.return),c=h.return;while(c)}return h.tag===3?g:null}function o(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function l(c){if(c.tag===31){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function u(c){if(a(c)!==c)throw Error(r(188))}function d(c){var h=c.alternate;if(!h){if(h=a(c),h===null)throw Error(r(188));return h!==c?null:c}for(var g=c,b=h;;){var N=g.return;if(N===null)break;var k=N.alternate;if(k===null){if(b=N.return,b!==null){g=b;continue}break}if(N.child===k.child){for(k=N.child;k;){if(k===g)return u(N),c;if(k===b)return u(N),h;k=k.sibling}throw Error(r(188))}if(g.return!==b.return)g=N,b=k;else{for(var U=!1,X=N.child;X;){if(X===g){U=!0,g=N,b=k;break}if(X===b){U=!0,b=N,g=k;break}X=X.sibling}if(!U){for(X=k.child;X;){if(X===g){U=!0,g=k,b=N;break}if(X===b){U=!0,b=k,g=N;break}X=X.sibling}if(!U)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:h}function m(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=m(c),h!==null)return h;c=c.sibling}return null}var f=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),j=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=O&&c[O]||c["@@iterator"],typeof c=="function"?c:null)}var $=Symbol.for("react.client.reference");function z(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===$?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case j:return c.displayName||"Context";case _:return(c._context.displayName||"Context")+".Consumer";case T:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case R:return h=c.displayName||null,h!==null?h:z(c.type)||"Memo";case D:h=c._payload,c=c._init;try{return z(c(h))}catch{}}return null}var H=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},K=[],L=-1;function G(c){return{current:c}}function Y(c){0>L||(c.current=K[L],K[L]=null,L--)}function q(c,h){L++,K[L]=c.current,c.current=h}var Q=G(null),se=G(null),te=G(null),ee=G(null);function pe(c,h){switch(q(te,h),q(se,c),q(Q,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?UT(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=UT(h),c=GT(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Y(Q),q(Q,c)}function fe(){Y(Q),Y(se),Y(te)}function re(c){c.memoizedState!==null&&q(ee,c);var h=Q.current,g=GT(h,c.type);h!==g&&(q(se,c),q(Q,g))}function Z(c){se.current===c&&(Y(Q),Y(se)),ee.current===c&&(Y(ee),Lm._currentValue=B)}var ie,ce;function He(c){if(ie===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);ie=h&&h[1]||"",ce=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+c+ce}var tt=!1;function he(c,h){if(!c||tt)return"";tt=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(h){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(_e){var ye=_e}Reflect.construct(c,[],Te)}else{try{Te.call()}catch(_e){ye=_e}c.call(Te.prototype)}}else{try{throw Error()}catch(_e){ye=_e}(Te=c())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(_e){if(_e&&ye&&typeof _e.stack=="string")return[_e.stack,ye.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=b.DetermineComponentFrameRoot(),U=k[0],X=k[1];if(U&&X){var ne=U.split(`
`),xe=X.split(`
`);for(N=b=0;b<ne.length&&!ne[b].includes("DetermineComponentFrameRoot");)b++;for(;N<xe.length&&!xe[N].includes("DetermineComponentFrameRoot");)N++;if(b===ne.length||N===xe.length)for(b=ne.length-1,N=xe.length-1;1<=b&&0<=N&&ne[b]!==xe[N];)N--;for(;1<=b&&0<=N;b--,N--)if(ne[b]!==xe[N]){if(b!==1||N!==1)do if(b--,N--,0>N||ne[b]!==xe[N]){var ke=`
`+ne[b].replace(" at new "," at ");return c.displayName&&ke.includes("<anonymous>")&&(ke=ke.replace("<anonymous>",c.displayName)),ke}while(1<=b&&0<=N);break}}}finally{tt=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?He(g):""}function Ne(c,h){switch(c.tag){case 26:case 27:case 5:return He(c.type);case 16:return He("Lazy");case 13:return c.child!==h&&h!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return he(c.type,!1);case 11:return he(c.type.render,!1);case 1:return he(c.type,!0);case 31:return He("Activity");default:return""}}function Ve(c){try{var h="",g=null;do h+=Ne(c,g),g=c,c=c.return;while(c);return h}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var qe=Object.prototype.hasOwnProperty,Ze=e.unstable_scheduleCallback,Ae=e.unstable_cancelCallback,De=e.unstable_shouldYield,je=e.unstable_requestPaint,Ce=e.unstable_now,It=e.unstable_getCurrentPriorityLevel,be=e.unstable_ImmediatePriority,ve=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,nt=e.unstable_LowPriority,jt=e.unstable_IdlePriority,ps=e.log,tn=e.unstable_setDisableYieldValue,Lt=null,ds=null;function gs(c){if(typeof ps=="function"&&tn(c),ds&&typeof ds.setStrictMode=="function")try{ds.setStrictMode(Lt,c)}catch{}}var Ft=Math.clz32?Math.clz32:us,Be=Math.log,st=Math.LN2;function us(c){return c>>>=0,c===0?32:31-(Be(c)/st|0)|0}var ue=256,xs=262144,kt=4194304;function me(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ze(c,h,g){var b=c.pendingLanes;if(b===0)return 0;var N=0,k=c.suspendedLanes,U=c.pingedLanes;c=c.warmLanes;var X=b&134217727;return X!==0?(b=X&~k,b!==0?N=me(b):(U&=X,U!==0?N=me(U):g||(g=X&~c,g!==0&&(N=me(g))))):(X=b&~k,X!==0?N=me(X):U!==0?N=me(U):g||(g=b&~c,g!==0&&(N=me(g)))),N===0?0:h!==0&&h!==N&&(h&k)===0&&(k=N&-N,g=h&-h,k>=g||k===32&&(g&4194048)!==0)?h:N}function ct(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function Rt(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jt(){var c=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),c}function vs(c){for(var h=[],g=0;31>g;g++)h.push(c);return h}function Hs(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Ge(c,h,g,b,N,k){var U=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var X=c.entanglements,ne=c.expirationTimes,xe=c.hiddenUpdates;for(g=U&~g;0<g;){var ke=31-Ft(g),Te=1<<ke;X[ke]=0,ne[ke]=-1;var ye=xe[ke];if(ye!==null)for(xe[ke]=null,ke=0;ke<ye.length;ke++){var _e=ye[ke];_e!==null&&(_e.lane&=-536870913)}g&=~Te}b!==0&&Ie(c,b,0),k!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=k&~(U&~h))}function Ie(c,h,g){c.pendingLanes|=h,c.suspendedLanes&=~h;var b=31-Ft(h);c.entangledLanes|=h,c.entanglements[b]=c.entanglements[b]|1073741824|g&261930}function Je(c,h){var g=c.entangledLanes|=h;for(c=c.entanglements;g;){var b=31-Ft(g),N=1<<b;N&h|c[b]&h&&(c[b]|=h),g&=~N}}function ut(c,h){var g=h&-h;return g=(g&42)!==0?1:gt(g),(g&(c.suspendedLanes|h))!==0?0:g}function gt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Cr(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Vn(){var c=V.p;return c!==0?c:(c=window.event,c===void 0?32:mP(c.type))}function ri(c,h){var g=V.p;try{return V.p=c,h()}finally{V.p=g}}var Br=Math.random().toString(36).slice(2),_s="__reactFiber$"+Br,qn="__reactProps$"+Br,Ao="__reactContainer$"+Br,Xh="__reactEvents$"+Br,Pd="__reactListeners$"+Br,MV="__reactHandles$"+Br,TA="__reactResources$"+Br,Zh="__reactMarker$"+Br;function uw(c){delete c[_s],delete c[qn],delete c[Xh],delete c[Pd],delete c[MV]}function Rd(c){var h=c[_s];if(h)return h;for(var g=c.parentNode;g;){if(h=g[Ao]||g[_s]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(c=ZT(c);c!==null;){if(g=c[_s])return g;c=ZT(c)}return h}c=g,g=c.parentNode}return null}function Dd(c){if(c=c[_s]||c[Ao]){var h=c.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return c}return null}function Qh(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(r(33))}function Id(c){var h=c[TA];return h||(h=c[TA]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Wn(c){c[Zh]=!0}var PA=new Set,RA={};function yc(c,h){Md(c,h),Md(c+"Capture",h)}function Md(c,h){for(RA[c]=h,c=0;c<h.length;c++)PA.add(h[c])}var LV=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),DA={},IA={};function OV(c){return qe.call(IA,c)?!0:qe.call(DA,c)?!1:LV.test(c)?IA[c]=!0:(DA[c]=!0,!1)}function sg(c,h,g){if(OV(h))if(g===null)c.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var b=h.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+g)}}function ng(c,h,g){if(g===null)c.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+g)}}function Eo(c,h,g,b){if(b===null)c.removeAttribute(g);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(g);return}c.setAttributeNS(h,g,""+b)}}function Gi(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function MA(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function FV(c,h,g){var b=Object.getOwnPropertyDescriptor(c.constructor.prototype,h);if(!c.hasOwnProperty(h)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var N=b.get,k=b.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return N.call(this)},set:function(U){g=""+U,k.call(this,U)}}),Object.defineProperty(c,h,{enumerable:b.enumerable}),{getValue:function(){return g},setValue:function(U){g=""+U},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function hw(c){if(!c._valueTracker){var h=MA(c)?"checked":"value";c._valueTracker=FV(c,h,""+c[h])}}function LA(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var g=h.getValue(),b="";return c&&(b=MA(c)?c.checked?"true":"false":c.value),c=b,c!==g?(h.setValue(c),!0):!1}function rg(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var BV=/[\n"\\]/g;function Vi(c){return c.replace(BV,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function mw(c,h,g,b,N,k,U,X){c.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?c.type=U:c.removeAttribute("type"),h!=null?U==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+Gi(h)):c.value!==""+Gi(h)&&(c.value=""+Gi(h)):U!=="submit"&&U!=="reset"||c.removeAttribute("value"),h!=null?fw(c,U,Gi(h)):g!=null?fw(c,U,Gi(g)):b!=null&&c.removeAttribute("value"),N==null&&k!=null&&(c.defaultChecked=!!k),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?c.name=""+Gi(X):c.removeAttribute("name")}function OA(c,h,g,b,N,k,U,X){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(c.type=k),h!=null||g!=null){if(!(k!=="submit"&&k!=="reset"||h!=null)){hw(c);return}g=g!=null?""+Gi(g):"",h=h!=null?""+Gi(h):g,X||h===c.value||(c.value=h),c.defaultValue=h}b=b??N,b=typeof b!="function"&&typeof b!="symbol"&&!!b,c.checked=X?c.checked:!!b,c.defaultChecked=!!b,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(c.name=U),hw(c)}function fw(c,h,g){h==="number"&&rg(c.ownerDocument)===c||c.defaultValue===""+g||(c.defaultValue=""+g)}function Ld(c,h,g,b){if(c=c.options,h){h={};for(var N=0;N<g.length;N++)h["$"+g[N]]=!0;for(g=0;g<c.length;g++)N=h.hasOwnProperty("$"+c[g].value),c[g].selected!==N&&(c[g].selected=N),N&&b&&(c[g].defaultSelected=!0)}else{for(g=""+Gi(g),h=null,N=0;N<c.length;N++){if(c[N].value===g){c[N].selected=!0,b&&(c[N].defaultSelected=!0);return}h!==null||c[N].disabled||(h=c[N])}h!==null&&(h.selected=!0)}}function FA(c,h,g){if(h!=null&&(h=""+Gi(h),h!==c.value&&(c.value=h),g==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=g!=null?""+Gi(g):""}function BA(c,h,g,b){if(h==null){if(b!=null){if(g!=null)throw Error(r(92));if(H(b)){if(1<b.length)throw Error(r(93));b=b[0]}g=b}g==null&&(g=""),h=g}g=Gi(h),c.defaultValue=g,b=c.textContent,b===g&&b!==""&&b!==null&&(c.value=b),hw(c)}function Od(c,h){if(h){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=h;return}}c.textContent=h}var zV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zA(c,h,g){var b=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?b?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":b?c.setProperty(h,g):typeof g!="number"||g===0||zV.has(h)?h==="float"?c.cssFloat=g:c[h]=(""+g).trim():c[h]=g+"px"}function $A(c,h,g){if(h!=null&&typeof h!="object")throw Error(r(62));if(c=c.style,g!=null){for(var b in g)!g.hasOwnProperty(b)||h!=null&&h.hasOwnProperty(b)||(b.indexOf("--")===0?c.setProperty(b,""):b==="float"?c.cssFloat="":c[b]="");for(var N in h)b=h[N],h.hasOwnProperty(N)&&g[N]!==b&&zA(c,N,b)}else for(var k in h)h.hasOwnProperty(k)&&zA(c,k,h[k])}function pw(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $V=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ig(c){return HV.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function To(){}var gw=null;function xw(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Fd=null,Bd=null;function HA(c){var h=Dd(c);if(h&&(c=h.stateNode)){var g=c[qn]||null;e:switch(c=h.stateNode,h.type){case"input":if(mw(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Vi(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var b=g[h];if(b!==c&&b.form===c.form){var N=b[qn]||null;if(!N)throw Error(r(90));mw(b,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(h=0;h<g.length;h++)b=g[h],b.form===c.form&&LA(b)}break e;case"textarea":FA(c,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&Ld(c,!!g.multiple,h,!1)}}}var vw=!1;function UA(c,h,g){if(vw)return c(h,g);vw=!0;try{var b=c(h);return b}finally{if(vw=!1,(Fd!==null||Bd!==null)&&(qg(),Fd&&(h=Fd,c=Bd,Bd=Fd=null,HA(h),c)))for(h=0;h<c.length;h++)HA(c[h])}}function Jh(c,h){var g=c.stateNode;if(g===null)return null;var b=g[qn]||null;if(b===null)return null;g=b[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,h,typeof g));return g}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bw=!1;if(Po)try{var em={};Object.defineProperty(em,"passive",{get:function(){bw=!0}}),window.addEventListener("test",em,em),window.removeEventListener("test",em,em)}catch{bw=!1}var bl=null,yw=null,ag=null;function GA(){if(ag)return ag;var c,h=yw,g=h.length,b,N="value"in bl?bl.value:bl.textContent,k=N.length;for(c=0;c<g&&h[c]===N[c];c++);var U=g-c;for(b=1;b<=U&&h[g-b]===N[k-b];b++);return ag=N.slice(c,1<b?1-b:void 0)}function og(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function lg(){return!0}function VA(){return!1}function ii(c){function h(g,b,N,k,U){this._reactName=g,this._targetInst=N,this.type=b,this.nativeEvent=k,this.target=U,this.currentTarget=null;for(var X in c)c.hasOwnProperty(X)&&(g=c[X],this[X]=g?g(k):k[X]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?lg:VA,this.isPropagationStopped=VA,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),h}var wc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cg=ii(wc),tm=f({},wc,{view:0,detail:0}),UV=ii(tm),ww,jw,sm,dg=f({},tm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_w,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==sm&&(sm&&c.type==="mousemove"?(ww=c.screenX-sm.screenX,jw=c.screenY-sm.screenY):jw=ww=0,sm=c),ww)},movementY:function(c){return"movementY"in c?c.movementY:jw}}),qA=ii(dg),GV=f({},dg,{dataTransfer:0}),VV=ii(GV),qV=f({},tm,{relatedTarget:0}),Sw=ii(qV),WV=f({},wc,{animationName:0,elapsedTime:0,pseudoElement:0}),KV=ii(WV),YV=f({},wc,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),XV=ii(YV),ZV=f({},wc,{data:0}),WA=ii(ZV),QV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t7(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=e7[c])?!!h[c]:!1}function _w(){return t7}var s7=f({},tm,{key:function(c){if(c.key){var h=QV[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=og(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?JV[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_w,charCode:function(c){return c.type==="keypress"?og(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?og(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),n7=ii(s7),r7=f({},dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KA=ii(r7),i7=f({},tm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_w}),a7=ii(i7),o7=f({},wc,{propertyName:0,elapsedTime:0,pseudoElement:0}),l7=ii(o7),c7=f({},dg,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),d7=ii(c7),u7=f({},wc,{newState:0,oldState:0}),h7=ii(u7),m7=[9,13,27,32],Nw=Po&&"CompositionEvent"in window,nm=null;Po&&"documentMode"in document&&(nm=document.documentMode);var f7=Po&&"TextEvent"in window&&!nm,YA=Po&&(!Nw||nm&&8<nm&&11>=nm),XA=" ",ZA=!1;function QA(c,h){switch(c){case"keyup":return m7.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JA(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var zd=!1;function p7(c,h){switch(c){case"compositionend":return JA(h);case"keypress":return h.which!==32?null:(ZA=!0,XA);case"textInput":return c=h.data,c===XA&&ZA?null:c;default:return null}}function g7(c,h){if(zd)return c==="compositionend"||!Nw&&QA(c,h)?(c=GA(),ag=yw=bl=null,zd=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return YA&&h.locale!=="ko"?null:h.data;default:return null}}var x7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function e2(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!x7[c.type]:h==="textarea"}function t2(c,h,g,b){Fd?Bd?Bd.push(b):Bd=[b]:Fd=b,h=Jg(h,"onChange"),0<h.length&&(g=new cg("onChange","change",null,g,b),c.push({event:g,listeners:h}))}var rm=null,im=null;function v7(c){OT(c,0)}function ug(c){var h=Qh(c);if(LA(h))return c}function s2(c,h){if(c==="change")return h}var n2=!1;if(Po){var Cw;if(Po){var kw="oninput"in document;if(!kw){var r2=document.createElement("div");r2.setAttribute("oninput","return;"),kw=typeof r2.oninput=="function"}Cw=kw}else Cw=!1;n2=Cw&&(!document.documentMode||9<document.documentMode)}function i2(){rm&&(rm.detachEvent("onpropertychange",a2),im=rm=null)}function a2(c){if(c.propertyName==="value"&&ug(im)){var h=[];t2(h,im,c,xw(c)),UA(v7,h)}}function b7(c,h,g){c==="focusin"?(i2(),rm=h,im=g,rm.attachEvent("onpropertychange",a2)):c==="focusout"&&i2()}function y7(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return ug(im)}function w7(c,h){if(c==="click")return ug(h)}function j7(c,h){if(c==="input"||c==="change")return ug(h)}function S7(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var yi=typeof Object.is=="function"?Object.is:S7;function am(c,h){if(yi(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var g=Object.keys(c),b=Object.keys(h);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var N=g[b];if(!qe.call(h,N)||!yi(c[N],h[N]))return!1}return!0}function o2(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function l2(c,h){var g=o2(c);c=0;for(var b;g;){if(g.nodeType===3){if(b=c+g.textContent.length,c<=h&&b>=h)return{node:g,offset:h-c};c=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=o2(g)}}function c2(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?c2(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function d2(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=rg(c.document);h instanceof c.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)c=h.contentWindow;else break;h=rg(c.document)}return h}function Aw(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var _7=Po&&"documentMode"in document&&11>=document.documentMode,$d=null,Ew=null,om=null,Tw=!1;function u2(c,h,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Tw||$d==null||$d!==rg(b)||(b=$d,"selectionStart"in b&&Aw(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),om&&am(om,b)||(om=b,b=Jg(Ew,"onSelect"),0<b.length&&(h=new cg("onSelect","select",null,h,g),c.push({event:h,listeners:b}),h.target=$d)))}function jc(c,h){var g={};return g[c.toLowerCase()]=h.toLowerCase(),g["Webkit"+c]="webkit"+h,g["Moz"+c]="moz"+h,g}var Hd={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionrun:jc("Transition","TransitionRun"),transitionstart:jc("Transition","TransitionStart"),transitioncancel:jc("Transition","TransitionCancel"),transitionend:jc("Transition","TransitionEnd")},Pw={},h2={};Po&&(h2=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function Sc(c){if(Pw[c])return Pw[c];if(!Hd[c])return c;var h=Hd[c],g;for(g in h)if(h.hasOwnProperty(g)&&g in h2)return Pw[c]=h[g];return c}var m2=Sc("animationend"),f2=Sc("animationiteration"),p2=Sc("animationstart"),N7=Sc("transitionrun"),C7=Sc("transitionstart"),k7=Sc("transitioncancel"),g2=Sc("transitionend"),x2=new Map,Rw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rw.push("scrollEnd");function ba(c,h){x2.set(c,h),yc(h,[c])}var hg=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},qi=[],Ud=0,Dw=0;function mg(){for(var c=Ud,h=Dw=Ud=0;h<c;){var g=qi[h];qi[h++]=null;var b=qi[h];qi[h++]=null;var N=qi[h];qi[h++]=null;var k=qi[h];if(qi[h++]=null,b!==null&&N!==null){var U=b.pending;U===null?N.next=N:(N.next=U.next,U.next=N),b.pending=N}k!==0&&v2(g,N,k)}}function fg(c,h,g,b){qi[Ud++]=c,qi[Ud++]=h,qi[Ud++]=g,qi[Ud++]=b,Dw|=b,c.lanes|=b,c=c.alternate,c!==null&&(c.lanes|=b)}function Iw(c,h,g,b){return fg(c,h,g,b),pg(c)}function _c(c,h){return fg(c,null,null,h),pg(c)}function v2(c,h,g){c.lanes|=g;var b=c.alternate;b!==null&&(b.lanes|=g);for(var N=!1,k=c.return;k!==null;)k.childLanes|=g,b=k.alternate,b!==null&&(b.childLanes|=g),k.tag===22&&(c=k.stateNode,c===null||c._visibility&1||(N=!0)),c=k,k=k.return;return c.tag===3?(k=c.stateNode,N&&h!==null&&(N=31-Ft(g),c=k.hiddenUpdates,b=c[N],b===null?c[N]=[h]:b.push(h),h.lane=g|536870912),k):null}function pg(c){if(50<Em)throw Em=0,U0=null,Error(r(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var Gd={};function A7(c,h,g,b){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(c,h,g,b){return new A7(c,h,g,b)}function Mw(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Ro(c,h){var g=c.alternate;return g===null?(g=wi(c.tag,h,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=h,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&65011712,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,h=c.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function b2(c,h){c.flags&=65011714;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,h=g.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function gg(c,h,g,b,N,k){var U=0;if(b=c,typeof c=="function")Mw(c)&&(U=1);else if(typeof c=="string")U=D9(c,g,Q.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=wi(31,g,h,N),c.elementType=M,c.lanes=k,c;case w:return Nc(g.children,N,k,h);case S:U=8,N|=24;break;case C:return c=wi(12,g,h,N|2),c.elementType=C,c.lanes=k,c;case E:return c=wi(13,g,h,N),c.elementType=E,c.lanes=k,c;case A:return c=wi(19,g,h,N),c.elementType=A,c.lanes=k,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case j:U=10;break e;case _:U=9;break e;case T:U=11;break e;case R:U=14;break e;case D:U=16,b=null;break e}U=29,g=Error(r(130,c===null?"null":typeof c,"")),b=null}return h=wi(U,g,h,N),h.elementType=c,h.type=b,h.lanes=k,h}function Nc(c,h,g,b){return c=wi(7,c,b,h),c.lanes=g,c}function Lw(c,h,g){return c=wi(6,c,null,h),c.lanes=g,c}function y2(c){var h=wi(18,null,null,0);return h.stateNode=c,h}function Ow(c,h,g){return h=wi(4,c.children!==null?c.children:[],c.key,h),h.lanes=g,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var w2=new WeakMap;function Wi(c,h){if(typeof c=="object"&&c!==null){var g=w2.get(c);return g!==void 0?g:(h={value:c,source:h,stack:Ve(h)},w2.set(c,h),h)}return{value:c,source:h,stack:Ve(h)}}var Vd=[],qd=0,xg=null,lm=0,Ki=[],Yi=0,yl=null,Ha=1,Ua="";function Do(c,h){Vd[qd++]=lm,Vd[qd++]=xg,xg=c,lm=h}function j2(c,h,g){Ki[Yi++]=Ha,Ki[Yi++]=Ua,Ki[Yi++]=yl,yl=c;var b=Ha;c=Ua;var N=32-Ft(b)-1;b&=~(1<<N),g+=1;var k=32-Ft(h)+N;if(30<k){var U=N-N%5;k=(b&(1<<U)-1).toString(32),b>>=U,N-=U,Ha=1<<32-Ft(h)+N|g<<N|b,Ua=k+c}else Ha=1<<k|g<<N|b,Ua=c}function Fw(c){c.return!==null&&(Do(c,1),j2(c,1,0))}function Bw(c){for(;c===xg;)xg=Vd[--qd],Vd[qd]=null,lm=Vd[--qd],Vd[qd]=null;for(;c===yl;)yl=Ki[--Yi],Ki[Yi]=null,Ua=Ki[--Yi],Ki[Yi]=null,Ha=Ki[--Yi],Ki[Yi]=null}function S2(c,h){Ki[Yi++]=Ha,Ki[Yi++]=Ua,Ki[Yi++]=yl,Ha=h.id,Ua=h.overflow,yl=c}var mr=null,Us=null,is=!1,wl=null,Xi=!1,zw=Error(r(519));function jl(c){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cm(Wi(h,c)),zw}function _2(c){var h=c.stateNode,g=c.type,b=c.memoizedProps;switch(h[_s]=c,h[qn]=b,g){case"dialog":ts("cancel",h),ts("close",h);break;case"iframe":case"object":case"embed":ts("load",h);break;case"video":case"audio":for(g=0;g<Pm.length;g++)ts(Pm[g],h);break;case"source":ts("error",h);break;case"img":case"image":case"link":ts("error",h),ts("load",h);break;case"details":ts("toggle",h);break;case"input":ts("invalid",h),OA(h,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":ts("invalid",h);break;case"textarea":ts("invalid",h),BA(h,b.value,b.defaultValue,b.children)}g=b.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||b.suppressHydrationWarning===!0||$T(h.textContent,g)?(b.popover!=null&&(ts("beforetoggle",h),ts("toggle",h)),b.onScroll!=null&&ts("scroll",h),b.onScrollEnd!=null&&ts("scrollend",h),b.onClick!=null&&(h.onclick=To),h=!0):h=!1,h||jl(c,!0)}function N2(c){for(mr=c.return;mr;)switch(mr.tag){case 5:case 31:case 13:Xi=!1;return;case 27:case 3:Xi=!0;return;default:mr=mr.return}}function Wd(c){if(c!==mr)return!1;if(!is)return N2(c),is=!0,!1;var h=c.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=c.type,g=!(g!=="form"&&g!=="button")||rj(c.type,c.memoizedProps)),g=!g),g&&Us&&jl(c),N2(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));Us=XT(c)}else if(h===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));Us=XT(c)}else h===27?(h=Us,Ll(c.type)?(c=cj,cj=null,Us=c):Us=h):Us=mr?Qi(c.stateNode.nextSibling):null;return!0}function Cc(){Us=mr=null,is=!1}function $w(){var c=wl;return c!==null&&(ci===null?ci=c:ci.push.apply(ci,c),wl=null),c}function cm(c){wl===null?wl=[c]:wl.push(c)}var Hw=G(null),kc=null,Io=null;function Sl(c,h,g){q(Hw,h._currentValue),h._currentValue=g}function Mo(c){c._currentValue=Hw.current,Y(Hw)}function Uw(c,h,g){for(;c!==null;){var b=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,b!==null&&(b.childLanes|=h)):b!==null&&(b.childLanes&h)!==h&&(b.childLanes|=h),c===g)break;c=c.return}}function Gw(c,h,g,b){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var k=N.dependencies;if(k!==null){var U=N.child;k=k.firstContext;e:for(;k!==null;){var X=k;k=N;for(var ne=0;ne<h.length;ne++)if(X.context===h[ne]){k.lanes|=g,X=k.alternate,X!==null&&(X.lanes|=g),Uw(k.return,g,c),b||(U=null);break e}k=X.next}}else if(N.tag===18){if(U=N.return,U===null)throw Error(r(341));U.lanes|=g,k=U.alternate,k!==null&&(k.lanes|=g),Uw(U,g,c),U=null}else U=N.child;if(U!==null)U.return=N;else for(U=N;U!==null;){if(U===c){U=null;break}if(N=U.sibling,N!==null){N.return=U.return,U=N;break}U=U.return}N=U}}function Kd(c,h,g,b){c=null;for(var N=h,k=!1;N!==null;){if(!k){if((N.flags&524288)!==0)k=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var U=N.alternate;if(U===null)throw Error(r(387));if(U=U.memoizedProps,U!==null){var X=N.type;yi(N.pendingProps.value,U.value)||(c!==null?c.push(X):c=[X])}}else if(N===ee.current){if(U=N.alternate,U===null)throw Error(r(387));U.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(Lm):c=[Lm])}N=N.return}c!==null&&Gw(h,c,g,b),h.flags|=262144}function vg(c){for(c=c.firstContext;c!==null;){if(!yi(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Ac(c){kc=c,Io=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function fr(c){return C2(kc,c)}function bg(c,h){return kc===null&&Ac(c),C2(c,h)}function C2(c,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},Io===null){if(c===null)throw Error(r(308));Io=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Io=Io.next=h;return g}var E7=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(g,b){c.push(b)}};this.abort=function(){h.aborted=!0,c.forEach(function(g){return g()})}},T7=e.unstable_scheduleCallback,P7=e.unstable_NormalPriority,Sn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vw(){return{controller:new E7,data:new Map,refCount:0}}function dm(c){c.refCount--,c.refCount===0&&T7(P7,function(){c.controller.abort()})}var um=null,qw=0,Yd=0,Xd=null;function R7(c,h){if(um===null){var g=um=[];qw=0,Yd=Y0(),Xd={status:"pending",value:void 0,then:function(b){g.push(b)}}}return qw++,h.then(k2,k2),h}function k2(){if(--qw===0&&um!==null){Xd!==null&&(Xd.status="fulfilled");var c=um;um=null,Yd=0,Xd=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function D7(c,h){var g=[],b={status:"pending",value:null,reason:null,then:function(N){g.push(N)}};return c.then(function(){b.status="fulfilled",b.value=h;for(var N=0;N<g.length;N++)(0,g[N])(h)},function(N){for(b.status="rejected",b.reason=N,N=0;N<g.length;N++)(0,g[N])(void 0)}),b}var A2=I.S;I.S=function(c,h){uT=Ce(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&R7(c,h),A2!==null&&A2(c,h)};var Ec=G(null);function Ww(){var c=Ec.current;return c!==null?c:Ls.pooledCache}function yg(c,h){h===null?q(Ec,Ec.current):q(Ec,h.pool)}function E2(){var c=Ww();return c===null?null:{parent:Sn._currentValue,pool:c}}var Zd=Error(r(460)),Kw=Error(r(474)),wg=Error(r(542)),jg={then:function(){}};function T2(c){return c=c.status,c==="fulfilled"||c==="rejected"}function P2(c,h,g){switch(g=c[g],g===void 0?c.push(h):g!==h&&(h.then(To,To),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,D2(c),c;default:if(typeof h.status=="string")h.then(To,To);else{if(c=Ls,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=h,c.status="pending",c.then(function(b){if(h.status==="pending"){var N=h;N.status="fulfilled",N.value=b}},function(b){if(h.status==="pending"){var N=h;N.status="rejected",N.reason=b}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,D2(c),c}throw Pc=h,Zd}}function Tc(c){try{var h=c._init;return h(c._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Pc=g,Zd):g}}var Pc=null;function R2(){if(Pc===null)throw Error(r(459));var c=Pc;return Pc=null,c}function D2(c){if(c===Zd||c===wg)throw Error(r(483))}var Qd=null,hm=0;function Sg(c){var h=hm;return hm+=1,Qd===null&&(Qd=[]),P2(Qd,c,h)}function mm(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function _g(c,h){throw h.$$typeof===x?Error(r(525)):(c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function I2(c){function h(de,ae){if(c){var ge=de.deletions;ge===null?(de.deletions=[ae],de.flags|=16):ge.push(ae)}}function g(de,ae){if(!c)return null;for(;ae!==null;)h(de,ae),ae=ae.sibling;return null}function b(de){for(var ae=new Map;de!==null;)de.key!==null?ae.set(de.key,de):ae.set(de.index,de),de=de.sibling;return ae}function N(de,ae){return de=Ro(de,ae),de.index=0,de.sibling=null,de}function k(de,ae,ge){return de.index=ge,c?(ge=de.alternate,ge!==null?(ge=ge.index,ge<ae?(de.flags|=67108866,ae):ge):(de.flags|=67108866,ae)):(de.flags|=1048576,ae)}function U(de){return c&&de.alternate===null&&(de.flags|=67108866),de}function X(de,ae,ge,Ee){return ae===null||ae.tag!==6?(ae=Lw(ge,de.mode,Ee),ae.return=de,ae):(ae=N(ae,ge),ae.return=de,ae)}function ne(de,ae,ge,Ee){var ht=ge.type;return ht===w?ke(de,ae,ge.props.children,Ee,ge.key):ae!==null&&(ae.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===D&&Tc(ht)===ae.type)?(ae=N(ae,ge.props),mm(ae,ge),ae.return=de,ae):(ae=gg(ge.type,ge.key,ge.props,null,de.mode,Ee),mm(ae,ge),ae.return=de,ae)}function xe(de,ae,ge,Ee){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==ge.containerInfo||ae.stateNode.implementation!==ge.implementation?(ae=Ow(ge,de.mode,Ee),ae.return=de,ae):(ae=N(ae,ge.children||[]),ae.return=de,ae)}function ke(de,ae,ge,Ee,ht){return ae===null||ae.tag!==7?(ae=Nc(ge,de.mode,Ee,ht),ae.return=de,ae):(ae=N(ae,ge),ae.return=de,ae)}function Te(de,ae,ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=Lw(""+ae,de.mode,ge),ae.return=de,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return ge=gg(ae.type,ae.key,ae.props,null,de.mode,ge),mm(ge,ae),ge.return=de,ge;case y:return ae=Ow(ae,de.mode,ge),ae.return=de,ae;case D:return ae=Tc(ae),Te(de,ae,ge)}if(H(ae)||F(ae))return ae=Nc(ae,de.mode,ge,null),ae.return=de,ae;if(typeof ae.then=="function")return Te(de,Sg(ae),ge);if(ae.$$typeof===j)return Te(de,bg(de,ae),ge);_g(de,ae)}return null}function ye(de,ae,ge,Ee){var ht=ae!==null?ae.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ht!==null?null:X(de,ae,""+ge,Ee);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return ge.key===ht?ne(de,ae,ge,Ee):null;case y:return ge.key===ht?xe(de,ae,ge,Ee):null;case D:return ge=Tc(ge),ye(de,ae,ge,Ee)}if(H(ge)||F(ge))return ht!==null?null:ke(de,ae,ge,Ee,null);if(typeof ge.then=="function")return ye(de,ae,Sg(ge),Ee);if(ge.$$typeof===j)return ye(de,ae,bg(de,ge),Ee);_g(de,ge)}return null}function _e(de,ae,ge,Ee,ht){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return de=de.get(ge)||null,X(ae,de,""+Ee,ht);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case v:return de=de.get(Ee.key===null?ge:Ee.key)||null,ne(ae,de,Ee,ht);case y:return de=de.get(Ee.key===null?ge:Ee.key)||null,xe(ae,de,Ee,ht);case D:return Ee=Tc(Ee),_e(de,ae,ge,Ee,ht)}if(H(Ee)||F(Ee))return de=de.get(ge)||null,ke(ae,de,Ee,ht,null);if(typeof Ee.then=="function")return _e(de,ae,ge,Sg(Ee),ht);if(Ee.$$typeof===j)return _e(de,ae,ge,bg(ae,Ee),ht);_g(ae,Ee)}return null}function rt(de,ae,ge,Ee){for(var ht=null,bs=null,dt=ae,$t=ae=0,rs=null;dt!==null&&$t<ge.length;$t++){dt.index>$t?(rs=dt,dt=null):rs=dt.sibling;var ys=ye(de,dt,ge[$t],Ee);if(ys===null){dt===null&&(dt=rs);break}c&&dt&&ys.alternate===null&&h(de,dt),ae=k(ys,ae,$t),bs===null?ht=ys:bs.sibling=ys,bs=ys,dt=rs}if($t===ge.length)return g(de,dt),is&&Do(de,$t),ht;if(dt===null){for(;$t<ge.length;$t++)dt=Te(de,ge[$t],Ee),dt!==null&&(ae=k(dt,ae,$t),bs===null?ht=dt:bs.sibling=dt,bs=dt);return is&&Do(de,$t),ht}for(dt=b(dt);$t<ge.length;$t++)rs=_e(dt,de,$t,ge[$t],Ee),rs!==null&&(c&&rs.alternate!==null&&dt.delete(rs.key===null?$t:rs.key),ae=k(rs,ae,$t),bs===null?ht=rs:bs.sibling=rs,bs=rs);return c&&dt.forEach(function($l){return h(de,$l)}),is&&Do(de,$t),ht}function vt(de,ae,ge,Ee){if(ge==null)throw Error(r(151));for(var ht=null,bs=null,dt=ae,$t=ae=0,rs=null,ys=ge.next();dt!==null&&!ys.done;$t++,ys=ge.next()){dt.index>$t?(rs=dt,dt=null):rs=dt.sibling;var $l=ye(de,dt,ys.value,Ee);if($l===null){dt===null&&(dt=rs);break}c&&dt&&$l.alternate===null&&h(de,dt),ae=k($l,ae,$t),bs===null?ht=$l:bs.sibling=$l,bs=$l,dt=rs}if(ys.done)return g(de,dt),is&&Do(de,$t),ht;if(dt===null){for(;!ys.done;$t++,ys=ge.next())ys=Te(de,ys.value,Ee),ys!==null&&(ae=k(ys,ae,$t),bs===null?ht=ys:bs.sibling=ys,bs=ys);return is&&Do(de,$t),ht}for(dt=b(dt);!ys.done;$t++,ys=ge.next())ys=_e(dt,de,$t,ys.value,Ee),ys!==null&&(c&&ys.alternate!==null&&dt.delete(ys.key===null?$t:ys.key),ae=k(ys,ae,$t),bs===null?ht=ys:bs.sibling=ys,bs=ys);return c&&dt.forEach(function(G9){return h(de,G9)}),is&&Do(de,$t),ht}function Ps(de,ae,ge,Ee){if(typeof ge=="object"&&ge!==null&&ge.type===w&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:e:{for(var ht=ge.key;ae!==null;){if(ae.key===ht){if(ht=ge.type,ht===w){if(ae.tag===7){g(de,ae.sibling),Ee=N(ae,ge.props.children),Ee.return=de,de=Ee;break e}}else if(ae.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===D&&Tc(ht)===ae.type){g(de,ae.sibling),Ee=N(ae,ge.props),mm(Ee,ge),Ee.return=de,de=Ee;break e}g(de,ae);break}else h(de,ae);ae=ae.sibling}ge.type===w?(Ee=Nc(ge.props.children,de.mode,Ee,ge.key),Ee.return=de,de=Ee):(Ee=gg(ge.type,ge.key,ge.props,null,de.mode,Ee),mm(Ee,ge),Ee.return=de,de=Ee)}return U(de);case y:e:{for(ht=ge.key;ae!==null;){if(ae.key===ht)if(ae.tag===4&&ae.stateNode.containerInfo===ge.containerInfo&&ae.stateNode.implementation===ge.implementation){g(de,ae.sibling),Ee=N(ae,ge.children||[]),Ee.return=de,de=Ee;break e}else{g(de,ae);break}else h(de,ae);ae=ae.sibling}Ee=Ow(ge,de.mode,Ee),Ee.return=de,de=Ee}return U(de);case D:return ge=Tc(ge),Ps(de,ae,ge,Ee)}if(H(ge))return rt(de,ae,ge,Ee);if(F(ge)){if(ht=F(ge),typeof ht!="function")throw Error(r(150));return ge=ht.call(ge),vt(de,ae,ge,Ee)}if(typeof ge.then=="function")return Ps(de,ae,Sg(ge),Ee);if(ge.$$typeof===j)return Ps(de,ae,bg(de,ge),Ee);_g(de,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ae!==null&&ae.tag===6?(g(de,ae.sibling),Ee=N(ae,ge),Ee.return=de,de=Ee):(g(de,ae),Ee=Lw(ge,de.mode,Ee),Ee.return=de,de=Ee),U(de)):g(de,ae)}return function(de,ae,ge,Ee){try{hm=0;var ht=Ps(de,ae,ge,Ee);return Qd=null,ht}catch(dt){if(dt===Zd||dt===wg)throw dt;var bs=wi(29,dt,null,de.mode);return bs.lanes=Ee,bs.return=de,bs}}}var Rc=I2(!0),M2=I2(!1),_l=!1;function Yw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xw(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Nl(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Cl(c,h,g){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(js&2)!==0){var N=b.pending;return N===null?h.next=h:(h.next=N.next,N.next=h),b.pending=h,h=pg(c),v2(c,null,g),h}return fg(c,b,h,g),pg(c)}function fm(c,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var b=h.lanes;b&=c.pendingLanes,g|=b,h.lanes=g,Je(c,g)}}function Zw(c,h){var g=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var N=null,k=null;if(g=g.firstBaseUpdate,g!==null){do{var U={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};k===null?N=k=U:k=k.next=U,g=g.next}while(g!==null);k===null?N=k=h:k=k.next=h}else N=k=h;g={baseState:b.baseState,firstBaseUpdate:N,lastBaseUpdate:k,shared:b.shared,callbacks:b.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=h:c.next=h,g.lastBaseUpdate=h}var Qw=!1;function pm(){if(Qw){var c=Xd;if(c!==null)throw c}}function gm(c,h,g,b){Qw=!1;var N=c.updateQueue;_l=!1;var k=N.firstBaseUpdate,U=N.lastBaseUpdate,X=N.shared.pending;if(X!==null){N.shared.pending=null;var ne=X,xe=ne.next;ne.next=null,U===null?k=xe:U.next=xe,U=ne;var ke=c.alternate;ke!==null&&(ke=ke.updateQueue,X=ke.lastBaseUpdate,X!==U&&(X===null?ke.firstBaseUpdate=xe:X.next=xe,ke.lastBaseUpdate=ne))}if(k!==null){var Te=N.baseState;U=0,ke=xe=ne=null,X=k;do{var ye=X.lane&-536870913,_e=ye!==X.lane;if(_e?(ns&ye)===ye:(b&ye)===ye){ye!==0&&ye===Yd&&(Qw=!0),ke!==null&&(ke=ke.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var rt=c,vt=X;ye=h;var Ps=g;switch(vt.tag){case 1:if(rt=vt.payload,typeof rt=="function"){Te=rt.call(Ps,Te,ye);break e}Te=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=vt.payload,ye=typeof rt=="function"?rt.call(Ps,Te,ye):rt,ye==null)break e;Te=f({},Te,ye);break e;case 2:_l=!0}}ye=X.callback,ye!==null&&(c.flags|=64,_e&&(c.flags|=8192),_e=N.callbacks,_e===null?N.callbacks=[ye]:_e.push(ye))}else _e={lane:ye,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ke===null?(xe=ke=_e,ne=Te):ke=ke.next=_e,U|=ye;if(X=X.next,X===null){if(X=N.shared.pending,X===null)break;_e=X,X=_e.next,_e.next=null,N.lastBaseUpdate=_e,N.shared.pending=null}}while(!0);ke===null&&(ne=Te),N.baseState=ne,N.firstBaseUpdate=xe,N.lastBaseUpdate=ke,k===null&&(N.shared.lanes=0),Pl|=U,c.lanes=U,c.memoizedState=Te}}function L2(c,h){if(typeof c!="function")throw Error(r(191,c));c.call(h)}function O2(c,h){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)L2(g[c],h)}var Jd=G(null),Ng=G(0);function F2(c,h){c=Go,q(Ng,c),q(Jd,h),Go=c|h.baseLanes}function Jw(){q(Ng,Go),q(Jd,Jd.current)}function e0(){Go=Ng.current,Y(Jd),Y(Ng)}var ji=G(null),Zi=null;function kl(c){var h=c.alternate;q(pn,pn.current&1),q(ji,c),Zi===null&&(h===null||Jd.current!==null||h.memoizedState!==null)&&(Zi=c)}function t0(c){q(pn,pn.current),q(ji,c),Zi===null&&(Zi=c)}function B2(c){c.tag===22?(q(pn,pn.current),q(ji,c),Zi===null&&(Zi=c)):Al()}function Al(){q(pn,pn.current),q(ji,ji.current)}function Si(c){Y(ji),Zi===c&&(Zi=null),Y(pn)}var pn=G(0);function Cg(c){for(var h=c;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||oj(g)||lj(g)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Lo=0,Bt=null,Es=null,_n=null,kg=!1,eu=!1,Dc=!1,Ag=0,xm=0,tu=null,I7=0;function cn(){throw Error(r(321))}function s0(c,h){if(h===null)return!1;for(var g=0;g<h.length&&g<c.length;g++)if(!yi(c[g],h[g]))return!1;return!0}function n0(c,h,g,b,N,k){return Lo=k,Bt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,I.H=c===null||c.memoizedState===null?jE:v0,Dc=!1,k=g(b,N),Dc=!1,eu&&(k=$2(h,g,b,N)),z2(c),k}function z2(c){I.H=ym;var h=Es!==null&&Es.next!==null;if(Lo=0,_n=Es=Bt=null,kg=!1,xm=0,tu=null,h)throw Error(r(300));c===null||Nn||(c=c.dependencies,c!==null&&vg(c)&&(Nn=!0))}function $2(c,h,g,b){Bt=c;var N=0;do{if(eu&&(tu=null),xm=0,eu=!1,25<=N)throw Error(r(301));if(N+=1,_n=Es=null,c.updateQueue!=null){var k=c.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}I.H=SE,k=h(g,b)}while(eu);return k}function M7(){var c=I.H,h=c.useState()[0];return h=typeof h.then=="function"?vm(h):h,c=c.useState()[0],(Es!==null?Es.memoizedState:null)!==c&&(Bt.flags|=1024),h}function r0(){var c=Ag!==0;return Ag=0,c}function i0(c,h,g){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~g}function a0(c){if(kg){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}kg=!1}Lo=0,_n=Es=Bt=null,eu=!1,xm=Ag=0,tu=null}function zr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Bt.memoizedState=_n=c:_n=_n.next=c,_n}function gn(){if(Es===null){var c=Bt.alternate;c=c!==null?c.memoizedState:null}else c=Es.next;var h=_n===null?Bt.memoizedState:_n.next;if(h!==null)_n=h,Es=c;else{if(c===null)throw Bt.alternate===null?Error(r(467)):Error(r(310));Es=c,c={memoizedState:Es.memoizedState,baseState:Es.baseState,baseQueue:Es.baseQueue,queue:Es.queue,next:null},_n===null?Bt.memoizedState=_n=c:_n=_n.next=c}return _n}function Eg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vm(c){var h=xm;return xm+=1,tu===null&&(tu=[]),c=P2(tu,c,h),h=Bt,(_n===null?h.memoizedState:_n.next)===null&&(h=h.alternate,I.H=h===null||h.memoizedState===null?jE:v0),c}function Tg(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return vm(c);if(c.$$typeof===j)return fr(c)}throw Error(r(438,String(c)))}function o0(c){var h=null,g=Bt.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var b=Bt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(h={data:b.data.map(function(N){return N.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=Eg(),Bt.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(c),b=0;b<c;b++)g[b]=P;return h.index++,g}function Oo(c,h){return typeof h=="function"?h(c):h}function Pg(c){var h=gn();return l0(h,Es,c)}function l0(c,h,g){var b=c.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=g;var N=c.baseQueue,k=b.pending;if(k!==null){if(N!==null){var U=N.next;N.next=k.next,k.next=U}h.baseQueue=N=k,b.pending=null}if(k=c.baseState,N===null)c.memoizedState=k;else{h=N.next;var X=U=null,ne=null,xe=h,ke=!1;do{var Te=xe.lane&-536870913;if(Te!==xe.lane?(ns&Te)===Te:(Lo&Te)===Te){var ye=xe.revertLane;if(ye===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Te===Yd&&(ke=!0);else if((Lo&ye)===ye){xe=xe.next,ye===Yd&&(ke=!0);continue}else Te={lane:0,revertLane:xe.revertLane,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ne===null?(X=ne=Te,U=k):ne=ne.next=Te,Bt.lanes|=ye,Pl|=ye;Te=xe.action,Dc&&g(k,Te),k=xe.hasEagerState?xe.eagerState:g(k,Te)}else ye={lane:Te,revertLane:xe.revertLane,gesture:xe.gesture,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ne===null?(X=ne=ye,U=k):ne=ne.next=ye,Bt.lanes|=Te,Pl|=Te;xe=xe.next}while(xe!==null&&xe!==h);if(ne===null?U=k:ne.next=X,!yi(k,c.memoizedState)&&(Nn=!0,ke&&(g=Xd,g!==null)))throw g;c.memoizedState=k,c.baseState=U,c.baseQueue=ne,b.lastRenderedState=k}return N===null&&(b.lanes=0),[c.memoizedState,b.dispatch]}function c0(c){var h=gn(),g=h.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var b=g.dispatch,N=g.pending,k=h.memoizedState;if(N!==null){g.pending=null;var U=N=N.next;do k=c(k,U.action),U=U.next;while(U!==N);yi(k,h.memoizedState)||(Nn=!0),h.memoizedState=k,h.baseQueue===null&&(h.baseState=k),g.lastRenderedState=k}return[k,b]}function H2(c,h,g){var b=Bt,N=gn(),k=is;if(k){if(g===void 0)throw Error(r(407));g=g()}else g=h();var U=!yi((Es||N).memoizedState,g);if(U&&(N.memoizedState=g,Nn=!0),N=N.queue,h0(V2.bind(null,b,N,c),[c]),N.getSnapshot!==h||U||_n!==null&&_n.memoizedState.tag&1){if(b.flags|=2048,su(9,{destroy:void 0},G2.bind(null,b,N,g,h),null),Ls===null)throw Error(r(349));k||(Lo&127)!==0||U2(b,h,g)}return g}function U2(c,h,g){c.flags|=16384,c={getSnapshot:h,value:g},h=Bt.updateQueue,h===null?(h=Eg(),Bt.updateQueue=h,h.stores=[c]):(g=h.stores,g===null?h.stores=[c]:g.push(c))}function G2(c,h,g,b){h.value=g,h.getSnapshot=b,q2(h)&&W2(c)}function V2(c,h,g){return g(function(){q2(h)&&W2(c)})}function q2(c){var h=c.getSnapshot;c=c.value;try{var g=h();return!yi(c,g)}catch{return!0}}function W2(c){var h=_c(c,2);h!==null&&di(h,c,2)}function d0(c){var h=zr();if(typeof c=="function"){var g=c;if(c=g(),Dc){gs(!0);try{g()}finally{gs(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:c},h}function K2(c,h,g,b){return c.baseState=g,l0(c,Es,typeof b=="function"?b:Oo)}function L7(c,h,g,b,N){if(Ig(c))throw Error(r(485));if(c=h.action,c!==null){var k={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){k.listeners.push(U)}};I.T!==null?g(!0):k.isTransition=!1,b(k),g=h.pending,g===null?(k.next=h.pending=k,Y2(h,k)):(k.next=g.next,h.pending=g.next=k)}}function Y2(c,h){var g=h.action,b=h.payload,N=c.state;if(h.isTransition){var k=I.T,U={};I.T=U;try{var X=g(N,b),ne=I.S;ne!==null&&ne(U,X),X2(c,h,X)}catch(xe){u0(c,h,xe)}finally{k!==null&&U.types!==null&&(k.types=U.types),I.T=k}}else try{k=g(N,b),X2(c,h,k)}catch(xe){u0(c,h,xe)}}function X2(c,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(b){Z2(c,h,b)},function(b){return u0(c,h,b)}):Z2(c,h,g)}function Z2(c,h,g){h.status="fulfilled",h.value=g,Q2(h),c.state=g,h=c.pending,h!==null&&(g=h.next,g===h?c.pending=null:(g=g.next,h.next=g,Y2(c,g)))}function u0(c,h,g){var b=c.pending;if(c.pending=null,b!==null){b=b.next;do h.status="rejected",h.reason=g,Q2(h),h=h.next;while(h!==b)}c.action=null}function Q2(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function J2(c,h){return h}function eE(c,h){if(is){var g=Ls.formState;if(g!==null){e:{var b=Bt;if(is){if(Us){t:{for(var N=Us,k=Xi;N.nodeType!==8;){if(!k){N=null;break t}if(N=Qi(N.nextSibling),N===null){N=null;break t}}k=N.data,N=k==="F!"||k==="F"?N:null}if(N){Us=Qi(N.nextSibling),b=N.data==="F!";break e}}jl(b)}b=!1}b&&(h=g[0])}}return g=zr(),g.memoizedState=g.baseState=h,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J2,lastRenderedState:h},g.queue=b,g=bE.bind(null,Bt,b),b.dispatch=g,b=d0(!1),k=x0.bind(null,Bt,!1,b.queue),b=zr(),N={state:h,dispatch:null,action:c,pending:null},b.queue=N,g=L7.bind(null,Bt,N,k,g),N.dispatch=g,b.memoizedState=c,[h,g,!1]}function tE(c){var h=gn();return sE(h,Es,c)}function sE(c,h,g){if(h=l0(c,h,J2)[0],c=Pg(Oo)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var b=vm(h)}catch(U){throw U===Zd?wg:U}else b=h;h=gn();var N=h.queue,k=N.dispatch;return g!==h.memoizedState&&(Bt.flags|=2048,su(9,{destroy:void 0},O7.bind(null,N,g),null)),[b,k,c]}function O7(c,h){c.action=h}function nE(c){var h=gn(),g=Es;if(g!==null)return sE(h,g,c);gn(),h=h.memoizedState,g=gn();var b=g.queue.dispatch;return g.memoizedState=c,[h,b,!1]}function su(c,h,g,b){return c={tag:c,create:g,deps:b,inst:h,next:null},h=Bt.updateQueue,h===null&&(h=Eg(),Bt.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=c.next=c:(b=g.next,g.next=c,c.next=b,h.lastEffect=c),c}function rE(){return gn().memoizedState}function Rg(c,h,g,b){var N=zr();Bt.flags|=c,N.memoizedState=su(1|h,{destroy:void 0},g,b===void 0?null:b)}function Dg(c,h,g,b){var N=gn();b=b===void 0?null:b;var k=N.memoizedState.inst;Es!==null&&b!==null&&s0(b,Es.memoizedState.deps)?N.memoizedState=su(h,k,g,b):(Bt.flags|=c,N.memoizedState=su(1|h,k,g,b))}function iE(c,h){Rg(8390656,8,c,h)}function h0(c,h){Dg(2048,8,c,h)}function F7(c){Bt.flags|=4;var h=Bt.updateQueue;if(h===null)h=Eg(),Bt.updateQueue=h,h.events=[c];else{var g=h.events;g===null?h.events=[c]:g.push(c)}}function aE(c){var h=gn().memoizedState;return F7({ref:h,nextImpl:c}),function(){if((js&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function oE(c,h){return Dg(4,2,c,h)}function lE(c,h){return Dg(4,4,c,h)}function cE(c,h){if(typeof h=="function"){c=c();var g=h(c);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function dE(c,h,g){g=g!=null?g.concat([c]):null,Dg(4,4,cE.bind(null,h,c),g)}function m0(){}function uE(c,h){var g=gn();h=h===void 0?null:h;var b=g.memoizedState;return h!==null&&s0(h,b[1])?b[0]:(g.memoizedState=[c,h],c)}function hE(c,h){var g=gn();h=h===void 0?null:h;var b=g.memoizedState;if(h!==null&&s0(h,b[1]))return b[0];if(b=c(),Dc){gs(!0);try{c()}finally{gs(!1)}}return g.memoizedState=[b,h],b}function f0(c,h,g){return g===void 0||(Lo&1073741824)!==0&&(ns&261930)===0?c.memoizedState=h:(c.memoizedState=g,c=mT(),Bt.lanes|=c,Pl|=c,g)}function mE(c,h,g,b){return yi(g,h)?g:Jd.current!==null?(c=f0(c,g,b),yi(c,h)||(Nn=!0),c):(Lo&42)===0||(Lo&1073741824)!==0&&(ns&261930)===0?(Nn=!0,c.memoizedState=g):(c=mT(),Bt.lanes|=c,Pl|=c,h)}function fE(c,h,g,b,N){var k=V.p;V.p=k!==0&&8>k?k:8;var U=I.T,X={};I.T=X,x0(c,!1,h,g);try{var ne=N(),xe=I.S;if(xe!==null&&xe(X,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ke=D7(ne,b);bm(c,h,ke,Ci(c))}else bm(c,h,b,Ci(c))}catch(Te){bm(c,h,{then:function(){},status:"rejected",reason:Te},Ci())}finally{V.p=k,U!==null&&X.types!==null&&(U.types=X.types),I.T=U}}function B7(){}function p0(c,h,g,b){if(c.tag!==5)throw Error(r(476));var N=pE(c).queue;fE(c,N,h,B,g===null?B7:function(){return gE(c),g(b)})}function pE(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:B},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:g},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function gE(c){var h=pE(c);h.next===null&&(h=c.alternate.memoizedState),bm(c,h.next.queue,{},Ci())}function g0(){return fr(Lm)}function xE(){return gn().memoizedState}function vE(){return gn().memoizedState}function z7(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var g=Ci();c=Nl(g);var b=Cl(h,c,g);b!==null&&(di(b,h,g),fm(b,h,g)),h={cache:Vw()},c.payload=h;return}h=h.return}}function $7(c,h,g){var b=Ci();g={lane:b,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ig(c)?yE(h,g):(g=Iw(c,h,g,b),g!==null&&(di(g,c,b),wE(g,h,b)))}function bE(c,h,g){var b=Ci();bm(c,h,g,b)}function bm(c,h,g,b){var N={lane:b,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Ig(c))yE(h,N);else{var k=c.alternate;if(c.lanes===0&&(k===null||k.lanes===0)&&(k=h.lastRenderedReducer,k!==null))try{var U=h.lastRenderedState,X=k(U,g);if(N.hasEagerState=!0,N.eagerState=X,yi(X,U))return fg(c,h,N,0),Ls===null&&mg(),!1}catch{}if(g=Iw(c,h,N,b),g!==null)return di(g,c,b),wE(g,h,b),!0}return!1}function x0(c,h,g,b){if(b={lane:2,revertLane:Y0(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},Ig(c)){if(h)throw Error(r(479))}else h=Iw(c,g,b,2),h!==null&&di(h,c,2)}function Ig(c){var h=c.alternate;return c===Bt||h!==null&&h===Bt}function yE(c,h){eu=kg=!0;var g=c.pending;g===null?h.next=h:(h.next=g.next,g.next=h),c.pending=h}function wE(c,h,g){if((g&4194048)!==0){var b=h.lanes;b&=c.pendingLanes,g|=b,h.lanes=g,Je(c,g)}}var ym={readContext:fr,use:Tg,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};ym.useEffectEvent=cn;var jE={readContext:fr,use:Tg,useCallback:function(c,h){return zr().memoizedState=[c,h===void 0?null:h],c},useContext:fr,useEffect:iE,useImperativeHandle:function(c,h,g){g=g!=null?g.concat([c]):null,Rg(4194308,4,cE.bind(null,h,c),g)},useLayoutEffect:function(c,h){return Rg(4194308,4,c,h)},useInsertionEffect:function(c,h){Rg(4,2,c,h)},useMemo:function(c,h){var g=zr();h=h===void 0?null:h;var b=c();if(Dc){gs(!0);try{c()}finally{gs(!1)}}return g.memoizedState=[b,h],b},useReducer:function(c,h,g){var b=zr();if(g!==void 0){var N=g(h);if(Dc){gs(!0);try{g(h)}finally{gs(!1)}}}else N=h;return b.memoizedState=b.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},b.queue=c,c=c.dispatch=$7.bind(null,Bt,c),[b.memoizedState,c]},useRef:function(c){var h=zr();return c={current:c},h.memoizedState=c},useState:function(c){c=d0(c);var h=c.queue,g=bE.bind(null,Bt,h);return h.dispatch=g,[c.memoizedState,g]},useDebugValue:m0,useDeferredValue:function(c,h){var g=zr();return f0(g,c,h)},useTransition:function(){var c=d0(!1);return c=fE.bind(null,Bt,c.queue,!0,!1),zr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,g){var b=Bt,N=zr();if(is){if(g===void 0)throw Error(r(407));g=g()}else{if(g=h(),Ls===null)throw Error(r(349));(ns&127)!==0||U2(b,h,g)}N.memoizedState=g;var k={value:g,getSnapshot:h};return N.queue=k,iE(V2.bind(null,b,k,c),[c]),b.flags|=2048,su(9,{destroy:void 0},G2.bind(null,b,k,g,h),null),g},useId:function(){var c=zr(),h=Ls.identifierPrefix;if(is){var g=Ua,b=Ha;g=(b&~(1<<32-Ft(b)-1)).toString(32)+g,h="_"+h+"R_"+g,g=Ag++,0<g&&(h+="H"+g.toString(32)),h+="_"}else g=I7++,h="_"+h+"r_"+g.toString(32)+"_";return c.memoizedState=h},useHostTransitionStatus:g0,useFormState:eE,useActionState:eE,useOptimistic:function(c){var h=zr();h.memoizedState=h.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=x0.bind(null,Bt,!0,g),g.dispatch=h,[c,h]},useMemoCache:o0,useCacheRefresh:function(){return zr().memoizedState=z7.bind(null,Bt)},useEffectEvent:function(c){var h=zr(),g={impl:c};return h.memoizedState=g,function(){if((js&2)!==0)throw Error(r(440));return g.impl.apply(void 0,arguments)}}},v0={readContext:fr,use:Tg,useCallback:uE,useContext:fr,useEffect:h0,useImperativeHandle:dE,useInsertionEffect:oE,useLayoutEffect:lE,useMemo:hE,useReducer:Pg,useRef:rE,useState:function(){return Pg(Oo)},useDebugValue:m0,useDeferredValue:function(c,h){var g=gn();return mE(g,Es.memoizedState,c,h)},useTransition:function(){var c=Pg(Oo)[0],h=gn().memoizedState;return[typeof c=="boolean"?c:vm(c),h]},useSyncExternalStore:H2,useId:xE,useHostTransitionStatus:g0,useFormState:tE,useActionState:tE,useOptimistic:function(c,h){var g=gn();return K2(g,Es,c,h)},useMemoCache:o0,useCacheRefresh:vE};v0.useEffectEvent=aE;var SE={readContext:fr,use:Tg,useCallback:uE,useContext:fr,useEffect:h0,useImperativeHandle:dE,useInsertionEffect:oE,useLayoutEffect:lE,useMemo:hE,useReducer:c0,useRef:rE,useState:function(){return c0(Oo)},useDebugValue:m0,useDeferredValue:function(c,h){var g=gn();return Es===null?f0(g,c,h):mE(g,Es.memoizedState,c,h)},useTransition:function(){var c=c0(Oo)[0],h=gn().memoizedState;return[typeof c=="boolean"?c:vm(c),h]},useSyncExternalStore:H2,useId:xE,useHostTransitionStatus:g0,useFormState:nE,useActionState:nE,useOptimistic:function(c,h){var g=gn();return Es!==null?K2(g,Es,c,h):(g.baseState=c,[c,g.queue.dispatch])},useMemoCache:o0,useCacheRefresh:vE};SE.useEffectEvent=aE;function b0(c,h,g,b){h=c.memoizedState,g=g(b,h),g=g==null?h:f({},h,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var y0={enqueueSetState:function(c,h,g){c=c._reactInternals;var b=Ci(),N=Nl(b);N.payload=h,g!=null&&(N.callback=g),h=Cl(c,N,b),h!==null&&(di(h,c,b),fm(h,c,b))},enqueueReplaceState:function(c,h,g){c=c._reactInternals;var b=Ci(),N=Nl(b);N.tag=1,N.payload=h,g!=null&&(N.callback=g),h=Cl(c,N,b),h!==null&&(di(h,c,b),fm(h,c,b))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var g=Ci(),b=Nl(g);b.tag=2,h!=null&&(b.callback=h),h=Cl(c,b,g),h!==null&&(di(h,c,g),fm(h,c,g))}};function _E(c,h,g,b,N,k,U){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,k,U):h.prototype&&h.prototype.isPureReactComponent?!am(g,b)||!am(N,k):!0}function NE(c,h,g,b){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,b),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,b),h.state!==c&&y0.enqueueReplaceState(h,h.state,null)}function Ic(c,h){var g=h;if("ref"in h){g={};for(var b in h)b!=="ref"&&(g[b]=h[b])}if(c=c.defaultProps){g===h&&(g=f({},g));for(var N in c)g[N]===void 0&&(g[N]=c[N])}return g}function CE(c){hg(c)}function kE(c){console.error(c)}function AE(c){hg(c)}function Mg(c,h){try{var g=c.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(b){setTimeout(function(){throw b})}}function EE(c,h,g){try{var b=c.onCaughtError;b(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function w0(c,h,g){return g=Nl(g),g.tag=3,g.payload={element:null},g.callback=function(){Mg(c,h)},g}function TE(c){return c=Nl(c),c.tag=3,c}function PE(c,h,g,b){var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var k=b.value;c.payload=function(){return N(k)},c.callback=function(){EE(h,g,b)}}var U=g.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(c.callback=function(){EE(h,g,b),typeof N!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var X=b.stack;this.componentDidCatch(b.value,{componentStack:X!==null?X:""})})}function H7(c,h,g,b,N){if(g.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(h=g.alternate,h!==null&&Kd(h,g,N,!0),g=ji.current,g!==null){switch(g.tag){case 31:case 13:return Zi===null?Wg():g.alternate===null&&dn===0&&(dn=3),g.flags&=-257,g.flags|=65536,g.lanes=N,b===jg?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([b]):h.add(b),q0(c,b,N)),!1;case 22:return g.flags|=65536,b===jg?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([b])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([b]):g.add(b)),q0(c,b,N)),!1}throw Error(r(435,g.tag))}return q0(c,b,N),Wg(),!1}if(is)return h=ji.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=N,b!==zw&&(c=Error(r(422),{cause:b}),cm(Wi(c,g)))):(b!==zw&&(h=Error(r(423),{cause:b}),cm(Wi(h,g))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,b=Wi(b,g),N=w0(c.stateNode,b,N),Zw(c,N),dn!==4&&(dn=2)),!1;var k=Error(r(520),{cause:b});if(k=Wi(k,g),Am===null?Am=[k]:Am.push(k),dn!==4&&(dn=2),h===null)return!0;b=Wi(b,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,c=N&-N,g.lanes|=c,c=w0(g.stateNode,b,c),Zw(g,c),!1;case 1:if(h=g.type,k=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Rl===null||!Rl.has(k))))return g.flags|=65536,N&=-N,g.lanes|=N,N=TE(N),PE(N,c,g,b),Zw(g,N),!1}g=g.return}while(g!==null);return!1}var j0=Error(r(461)),Nn=!1;function pr(c,h,g,b){h.child=c===null?M2(h,null,g,b):Rc(h,c.child,g,b)}function RE(c,h,g,b,N){g=g.render;var k=h.ref;if("ref"in b){var U={};for(var X in b)X!=="ref"&&(U[X]=b[X])}else U=b;return Ac(h),b=n0(c,h,g,U,k,N),X=r0(),c!==null&&!Nn?(i0(c,h,N),Fo(c,h,N)):(is&&X&&Fw(h),h.flags|=1,pr(c,h,b,N),h.child)}function DE(c,h,g,b,N){if(c===null){var k=g.type;return typeof k=="function"&&!Mw(k)&&k.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=k,IE(c,h,k,b,N)):(c=gg(g.type,null,b,h,h.mode,N),c.ref=h.ref,c.return=h,h.child=c)}if(k=c.child,!T0(c,N)){var U=k.memoizedProps;if(g=g.compare,g=g!==null?g:am,g(U,b)&&c.ref===h.ref)return Fo(c,h,N)}return h.flags|=1,c=Ro(k,b),c.ref=h.ref,c.return=h,h.child=c}function IE(c,h,g,b,N){if(c!==null){var k=c.memoizedProps;if(am(k,b)&&c.ref===h.ref)if(Nn=!1,h.pendingProps=b=k,T0(c,N))(c.flags&131072)!==0&&(Nn=!0);else return h.lanes=c.lanes,Fo(c,h,N)}return S0(c,h,g,b,N)}function ME(c,h,g,b){var N=b.children,k=c!==null?c.memoizedState:null;if(c===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((h.flags&128)!==0){if(k=k!==null?k.baseLanes|g:g,c!==null){for(b=h.child=c.child,N=0;b!==null;)N=N|b.lanes|b.childLanes,b=b.sibling;b=N&~k}else b=0,h.child=null;return LE(c,h,k,g,b)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&yg(h,k!==null?k.cachePool:null),k!==null?F2(h,k):Jw(),B2(h);else return b=h.lanes=536870912,LE(c,h,k!==null?k.baseLanes|g:g,g,b)}else k!==null?(yg(h,k.cachePool),F2(h,k),Al(),h.memoizedState=null):(c!==null&&yg(h,null),Jw(),Al());return pr(c,h,N,g),h.child}function wm(c,h){return c!==null&&c.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function LE(c,h,g,b,N){var k=Ww();return k=k===null?null:{parent:Sn._currentValue,pool:k},h.memoizedState={baseLanes:g,cachePool:k},c!==null&&yg(h,null),Jw(),B2(h),c!==null&&Kd(c,h,b,!0),h.childLanes=N,null}function Lg(c,h){return h=Fg({mode:h.mode,children:h.children},c.mode),h.ref=c.ref,c.child=h,h.return=c,h}function OE(c,h,g){return Rc(h,c.child,null,g),c=Lg(h,h.pendingProps),c.flags|=2,Si(h),h.memoizedState=null,c}function U7(c,h,g){var b=h.pendingProps,N=(h.flags&128)!==0;if(h.flags&=-129,c===null){if(is){if(b.mode==="hidden")return c=Lg(h,b),h.lanes=536870912,wm(null,c);if(t0(h),(c=Us)?(c=YT(c,Xi),c=c!==null&&c.data==="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:yl!==null?{id:Ha,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},g=y2(c),g.return=h,h.child=g,mr=h,Us=null)):c=null,c===null)throw jl(h);return h.lanes=536870912,null}return Lg(h,b)}var k=c.memoizedState;if(k!==null){var U=k.dehydrated;if(t0(h),N)if(h.flags&256)h.flags&=-257,h=OE(c,h,g);else if(h.memoizedState!==null)h.child=c.child,h.flags|=128,h=null;else throw Error(r(558));else if(Nn||Kd(c,h,g,!1),N=(g&c.childLanes)!==0,Nn||N){if(b=Ls,b!==null&&(U=ut(b,g),U!==0&&U!==k.retryLane))throw k.retryLane=U,_c(c,U),di(b,c,U),j0;Wg(),h=OE(c,h,g)}else c=k.treeContext,Us=Qi(U.nextSibling),mr=h,is=!0,wl=null,Xi=!1,c!==null&&S2(h,c),h=Lg(h,b),h.flags|=4096;return h}return c=Ro(c.child,{mode:b.mode,children:b.children}),c.ref=h.ref,h.child=c,c.return=h,c}function Og(c,h){var g=h.ref;if(g===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(c===null||c.ref!==g)&&(h.flags|=4194816)}}function S0(c,h,g,b,N){return Ac(h),g=n0(c,h,g,b,void 0,N),b=r0(),c!==null&&!Nn?(i0(c,h,N),Fo(c,h,N)):(is&&b&&Fw(h),h.flags|=1,pr(c,h,g,N),h.child)}function FE(c,h,g,b,N,k){return Ac(h),h.updateQueue=null,g=$2(h,b,g,N),z2(c),b=r0(),c!==null&&!Nn?(i0(c,h,k),Fo(c,h,k)):(is&&b&&Fw(h),h.flags|=1,pr(c,h,g,k),h.child)}function BE(c,h,g,b,N){if(Ac(h),h.stateNode===null){var k=Gd,U=g.contextType;typeof U=="object"&&U!==null&&(k=fr(U)),k=new g(b,k),h.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=y0,h.stateNode=k,k._reactInternals=h,k=h.stateNode,k.props=b,k.state=h.memoizedState,k.refs={},Yw(h),U=g.contextType,k.context=typeof U=="object"&&U!==null?fr(U):Gd,k.state=h.memoizedState,U=g.getDerivedStateFromProps,typeof U=="function"&&(b0(h,g,U,b),k.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(U=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),U!==k.state&&y0.enqueueReplaceState(k,k.state,null),gm(h,b,k,N),pm(),k.state=h.memoizedState),typeof k.componentDidMount=="function"&&(h.flags|=4194308),b=!0}else if(c===null){k=h.stateNode;var X=h.memoizedProps,ne=Ic(g,X);k.props=ne;var xe=k.context,ke=g.contextType;U=Gd,typeof ke=="object"&&ke!==null&&(U=fr(ke));var Te=g.getDerivedStateFromProps;ke=typeof Te=="function"||typeof k.getSnapshotBeforeUpdate=="function",X=h.pendingProps!==X,ke||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(X||xe!==U)&&NE(h,k,b,U),_l=!1;var ye=h.memoizedState;k.state=ye,gm(h,b,k,N),pm(),xe=h.memoizedState,X||ye!==xe||_l?(typeof Te=="function"&&(b0(h,g,Te,b),xe=h.memoizedState),(ne=_l||_E(h,g,ne,b,ye,xe,U))?(ke||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(h.flags|=4194308)):(typeof k.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=b,h.memoizedState=xe),k.props=b,k.state=xe,k.context=U,b=ne):(typeof k.componentDidMount=="function"&&(h.flags|=4194308),b=!1)}else{k=h.stateNode,Xw(c,h),U=h.memoizedProps,ke=Ic(g,U),k.props=ke,Te=h.pendingProps,ye=k.context,xe=g.contextType,ne=Gd,typeof xe=="object"&&xe!==null&&(ne=fr(xe)),X=g.getDerivedStateFromProps,(xe=typeof X=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(U!==Te||ye!==ne)&&NE(h,k,b,ne),_l=!1,ye=h.memoizedState,k.state=ye,gm(h,b,k,N),pm();var _e=h.memoizedState;U!==Te||ye!==_e||_l||c!==null&&c.dependencies!==null&&vg(c.dependencies)?(typeof X=="function"&&(b0(h,g,X,b),_e=h.memoizedState),(ke=_l||_E(h,g,ke,b,ye,_e,ne)||c!==null&&c.dependencies!==null&&vg(c.dependencies))?(xe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(b,_e,ne),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(b,_e,ne)),typeof k.componentDidUpdate=="function"&&(h.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof k.componentDidUpdate!="function"||U===c.memoizedProps&&ye===c.memoizedState||(h.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||U===c.memoizedProps&&ye===c.memoizedState||(h.flags|=1024),h.memoizedProps=b,h.memoizedState=_e),k.props=b,k.state=_e,k.context=ne,b=ke):(typeof k.componentDidUpdate!="function"||U===c.memoizedProps&&ye===c.memoizedState||(h.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||U===c.memoizedProps&&ye===c.memoizedState||(h.flags|=1024),b=!1)}return k=b,Og(c,h),b=(h.flags&128)!==0,k||b?(k=h.stateNode,g=b&&typeof g.getDerivedStateFromError!="function"?null:k.render(),h.flags|=1,c!==null&&b?(h.child=Rc(h,c.child,null,N),h.child=Rc(h,null,g,N)):pr(c,h,g,N),h.memoizedState=k.state,c=h.child):c=Fo(c,h,N),c}function zE(c,h,g,b){return Cc(),h.flags|=256,pr(c,h,g,b),h.child}var _0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function N0(c){return{baseLanes:c,cachePool:E2()}}function C0(c,h,g){return c=c!==null?c.childLanes&~g:0,h&&(c|=Ni),c}function $E(c,h,g){var b=h.pendingProps,N=!1,k=(h.flags&128)!==0,U;if((U=k)||(U=c!==null&&c.memoizedState===null?!1:(pn.current&2)!==0),U&&(N=!0,h.flags&=-129),U=(h.flags&32)!==0,h.flags&=-33,c===null){if(is){if(N?kl(h):Al(),(c=Us)?(c=YT(c,Xi),c=c!==null&&c.data!=="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:yl!==null?{id:Ha,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},g=y2(c),g.return=h,h.child=g,mr=h,Us=null)):c=null,c===null)throw jl(h);return lj(c)?h.lanes=32:h.lanes=536870912,null}var X=b.children;return b=b.fallback,N?(Al(),N=h.mode,X=Fg({mode:"hidden",children:X},N),b=Nc(b,N,g,null),X.return=h,b.return=h,X.sibling=b,h.child=X,b=h.child,b.memoizedState=N0(g),b.childLanes=C0(c,U,g),h.memoizedState=_0,wm(null,b)):(kl(h),k0(h,X))}var ne=c.memoizedState;if(ne!==null&&(X=ne.dehydrated,X!==null)){if(k)h.flags&256?(kl(h),h.flags&=-257,h=A0(c,h,g)):h.memoizedState!==null?(Al(),h.child=c.child,h.flags|=128,h=null):(Al(),X=b.fallback,N=h.mode,b=Fg({mode:"visible",children:b.children},N),X=Nc(X,N,g,null),X.flags|=2,b.return=h,X.return=h,b.sibling=X,h.child=b,Rc(h,c.child,null,g),b=h.child,b.memoizedState=N0(g),b.childLanes=C0(c,U,g),h.memoizedState=_0,h=wm(null,b));else if(kl(h),lj(X)){if(U=X.nextSibling&&X.nextSibling.dataset,U)var xe=U.dgst;U=xe,b=Error(r(419)),b.stack="",b.digest=U,cm({value:b,source:null,stack:null}),h=A0(c,h,g)}else if(Nn||Kd(c,h,g,!1),U=(g&c.childLanes)!==0,Nn||U){if(U=Ls,U!==null&&(b=ut(U,g),b!==0&&b!==ne.retryLane))throw ne.retryLane=b,_c(c,b),di(U,c,b),j0;oj(X)||Wg(),h=A0(c,h,g)}else oj(X)?(h.flags|=192,h.child=c.child,h=null):(c=ne.treeContext,Us=Qi(X.nextSibling),mr=h,is=!0,wl=null,Xi=!1,c!==null&&S2(h,c),h=k0(h,b.children),h.flags|=4096);return h}return N?(Al(),X=b.fallback,N=h.mode,ne=c.child,xe=ne.sibling,b=Ro(ne,{mode:"hidden",children:b.children}),b.subtreeFlags=ne.subtreeFlags&65011712,xe!==null?X=Ro(xe,X):(X=Nc(X,N,g,null),X.flags|=2),X.return=h,b.return=h,b.sibling=X,h.child=b,wm(null,b),b=h.child,X=c.child.memoizedState,X===null?X=N0(g):(N=X.cachePool,N!==null?(ne=Sn._currentValue,N=N.parent!==ne?{parent:ne,pool:ne}:N):N=E2(),X={baseLanes:X.baseLanes|g,cachePool:N}),b.memoizedState=X,b.childLanes=C0(c,U,g),h.memoizedState=_0,wm(c.child,b)):(kl(h),g=c.child,c=g.sibling,g=Ro(g,{mode:"visible",children:b.children}),g.return=h,g.sibling=null,c!==null&&(U=h.deletions,U===null?(h.deletions=[c],h.flags|=16):U.push(c)),h.child=g,h.memoizedState=null,g)}function k0(c,h){return h=Fg({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Fg(c,h){return c=wi(22,c,null,h),c.lanes=0,c}function A0(c,h,g){return Rc(h,c.child,null,g),c=k0(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function HE(c,h,g){c.lanes|=h;var b=c.alternate;b!==null&&(b.lanes|=h),Uw(c.return,h,g)}function E0(c,h,g,b,N,k){var U=c.memoizedState;U===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:N,treeForkCount:k}:(U.isBackwards=h,U.rendering=null,U.renderingStartTime=0,U.last=b,U.tail=g,U.tailMode=N,U.treeForkCount=k)}function UE(c,h,g){var b=h.pendingProps,N=b.revealOrder,k=b.tail;b=b.children;var U=pn.current,X=(U&2)!==0;if(X?(U=U&1|2,h.flags|=128):U&=1,q(pn,U),pr(c,h,b,g),b=is?lm:0,!X&&c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&HE(c,g,h);else if(c.tag===19)HE(c,g,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(N){case"forwards":for(g=h.child,N=null;g!==null;)c=g.alternate,c!==null&&Cg(c)===null&&(N=g),g=g.sibling;g=N,g===null?(N=h.child,h.child=null):(N=g.sibling,g.sibling=null),E0(h,!1,N,g,k,b);break;case"backwards":case"unstable_legacy-backwards":for(g=null,N=h.child,h.child=null;N!==null;){if(c=N.alternate,c!==null&&Cg(c)===null){h.child=N;break}c=N.sibling,N.sibling=g,g=N,N=c}E0(h,!0,g,null,k,b);break;case"together":E0(h,!1,null,null,void 0,b);break;default:h.memoizedState=null}return h.child}function Fo(c,h,g){if(c!==null&&(h.dependencies=c.dependencies),Pl|=h.lanes,(g&h.childLanes)===0)if(c!==null){if(Kd(c,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,g=Ro(c,c.pendingProps),h.child=g,g.return=h;c.sibling!==null;)c=c.sibling,g=g.sibling=Ro(c,c.pendingProps),g.return=h;g.sibling=null}return h.child}function T0(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&vg(c)))}function G7(c,h,g){switch(h.tag){case 3:pe(h,h.stateNode.containerInfo),Sl(h,Sn,c.memoizedState.cache),Cc();break;case 27:case 5:re(h);break;case 4:pe(h,h.stateNode.containerInfo);break;case 10:Sl(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,t0(h),null;break;case 13:var b=h.memoizedState;if(b!==null)return b.dehydrated!==null?(kl(h),h.flags|=128,null):(g&h.child.childLanes)!==0?$E(c,h,g):(kl(h),c=Fo(c,h,g),c!==null?c.sibling:null);kl(h);break;case 19:var N=(c.flags&128)!==0;if(b=(g&h.childLanes)!==0,b||(Kd(c,h,g,!1),b=(g&h.childLanes)!==0),N){if(b)return UE(c,h,g);h.flags|=128}if(N=h.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),q(pn,pn.current),b)break;return null;case 22:return h.lanes=0,ME(c,h,g,h.pendingProps);case 24:Sl(h,Sn,c.memoizedState.cache)}return Fo(c,h,g)}function GE(c,h,g){if(c!==null)if(c.memoizedProps!==h.pendingProps)Nn=!0;else{if(!T0(c,g)&&(h.flags&128)===0)return Nn=!1,G7(c,h,g);Nn=(c.flags&131072)!==0}else Nn=!1,is&&(h.flags&1048576)!==0&&j2(h,lm,h.index);switch(h.lanes=0,h.tag){case 16:e:{var b=h.pendingProps;if(c=Tc(h.elementType),h.type=c,typeof c=="function")Mw(c)?(b=Ic(c,b),h.tag=1,h=BE(null,h,c,b,g)):(h.tag=0,h=S0(null,h,c,b,g));else{if(c!=null){var N=c.$$typeof;if(N===T){h.tag=11,h=RE(null,h,c,b,g);break e}else if(N===R){h.tag=14,h=DE(null,h,c,b,g);break e}}throw h=z(c)||c,Error(r(306,h,""))}}return h;case 0:return S0(c,h,h.type,h.pendingProps,g);case 1:return b=h.type,N=Ic(b,h.pendingProps),BE(c,h,b,N,g);case 3:e:{if(pe(h,h.stateNode.containerInfo),c===null)throw Error(r(387));b=h.pendingProps;var k=h.memoizedState;N=k.element,Xw(c,h),gm(h,b,null,g);var U=h.memoizedState;if(b=U.cache,Sl(h,Sn,b),b!==k.cache&&Gw(h,[Sn],g,!0),pm(),b=U.element,k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:U.cache},h.updateQueue.baseState=k,h.memoizedState=k,h.flags&256){h=zE(c,h,b,g);break e}else if(b!==N){N=Wi(Error(r(424)),h),cm(N),h=zE(c,h,b,g);break e}else for(c=h.stateNode.containerInfo,c.nodeType===9?c=c.body:c=c.nodeName==="HTML"?c.ownerDocument.body:c,Us=Qi(c.firstChild),mr=h,is=!0,wl=null,Xi=!0,g=M2(h,null,b,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Cc(),b===N){h=Fo(c,h,g);break e}pr(c,h,b,g)}h=h.child}return h;case 26:return Og(c,h),c===null?(g=tP(h.type,null,h.pendingProps,null))?h.memoizedState=g:is||(g=h.type,c=h.pendingProps,b=ex(te.current).createElement(g),b[_s]=h,b[qn]=c,gr(b,g,c),Wn(b),h.stateNode=b):h.memoizedState=tP(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return re(h),c===null&&is&&(b=h.stateNode=QT(h.type,h.pendingProps,te.current),mr=h,Xi=!0,N=Us,Ll(h.type)?(cj=N,Us=Qi(b.firstChild)):Us=N),pr(c,h,h.pendingProps.children,g),Og(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&is&&((N=b=Us)&&(b=y9(b,h.type,h.pendingProps,Xi),b!==null?(h.stateNode=b,mr=h,Us=Qi(b.firstChild),Xi=!1,N=!0):N=!1),N||jl(h)),re(h),N=h.type,k=h.pendingProps,U=c!==null?c.memoizedProps:null,b=k.children,rj(N,k)?b=null:U!==null&&rj(N,U)&&(h.flags|=32),h.memoizedState!==null&&(N=n0(c,h,M7,null,null,g),Lm._currentValue=N),Og(c,h),pr(c,h,b,g),h.child;case 6:return c===null&&is&&((c=g=Us)&&(g=w9(g,h.pendingProps,Xi),g!==null?(h.stateNode=g,mr=h,Us=null,c=!0):c=!1),c||jl(h)),null;case 13:return $E(c,h,g);case 4:return pe(h,h.stateNode.containerInfo),b=h.pendingProps,c===null?h.child=Rc(h,null,b,g):pr(c,h,b,g),h.child;case 11:return RE(c,h,h.type,h.pendingProps,g);case 7:return pr(c,h,h.pendingProps,g),h.child;case 8:return pr(c,h,h.pendingProps.children,g),h.child;case 12:return pr(c,h,h.pendingProps.children,g),h.child;case 10:return b=h.pendingProps,Sl(h,h.type,b.value),pr(c,h,b.children,g),h.child;case 9:return N=h.type._context,b=h.pendingProps.children,Ac(h),N=fr(N),b=b(N),h.flags|=1,pr(c,h,b,g),h.child;case 14:return DE(c,h,h.type,h.pendingProps,g);case 15:return IE(c,h,h.type,h.pendingProps,g);case 19:return UE(c,h,g);case 31:return U7(c,h,g);case 22:return ME(c,h,g,h.pendingProps);case 24:return Ac(h),b=fr(Sn),c===null?(N=Ww(),N===null&&(N=Ls,k=Vw(),N.pooledCache=k,k.refCount++,k!==null&&(N.pooledCacheLanes|=g),N=k),h.memoizedState={parent:b,cache:N},Yw(h),Sl(h,Sn,N)):((c.lanes&g)!==0&&(Xw(c,h),gm(h,null,null,g),pm()),N=c.memoizedState,k=h.memoizedState,N.parent!==b?(N={parent:b,cache:b},h.memoizedState=N,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=N),Sl(h,Sn,b)):(b=k.cache,Sl(h,Sn,b),b!==N.cache&&Gw(h,[Sn],g,!0))),pr(c,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Bo(c){c.flags|=4}function P0(c,h,g,b,N){if((h=(c.mode&32)!==0)&&(h=!1),h){if(c.flags|=16777216,(N&335544128)===N)if(c.stateNode.complete)c.flags|=8192;else if(xT())c.flags|=8192;else throw Pc=jg,Kw}else c.flags&=-16777217}function VE(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!aP(h))if(xT())c.flags|=8192;else throw Pc=jg,Kw}function Bg(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?Jt():536870912,c.lanes|=h,au|=h)}function jm(c,h){if(!is)switch(c.tailMode){case"hidden":h=c.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function Gs(c){var h=c.alternate!==null&&c.alternate.child===c.child,g=0,b=0;if(h)for(var N=c.child;N!==null;)g|=N.lanes|N.childLanes,b|=N.subtreeFlags&65011712,b|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)g|=N.lanes|N.childLanes,b|=N.subtreeFlags,b|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=b,c.childLanes=g,h}function V7(c,h,g){var b=h.pendingProps;switch(Bw(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(h),null;case 1:return Gs(h),null;case 3:return g=h.stateNode,b=null,c!==null&&(b=c.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),Mo(Sn),fe(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(Wd(h)?Bo(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,$w())),Gs(h),null;case 26:var N=h.type,k=h.memoizedState;return c===null?(Bo(h),k!==null?(Gs(h),VE(h,k)):(Gs(h),P0(h,N,null,b,g))):k?k!==c.memoizedState?(Bo(h),Gs(h),VE(h,k)):(Gs(h),h.flags&=-16777217):(c=c.memoizedProps,c!==b&&Bo(h),Gs(h),P0(h,N,c,b,g)),null;case 27:if(Z(h),g=te.current,N=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==b&&Bo(h);else{if(!b){if(h.stateNode===null)throw Error(r(166));return Gs(h),null}c=Q.current,Wd(h)?_2(h):(c=QT(N,b,g),h.stateNode=c,Bo(h))}return Gs(h),null;case 5:if(Z(h),N=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==b&&Bo(h);else{if(!b){if(h.stateNode===null)throw Error(r(166));return Gs(h),null}if(k=Q.current,Wd(h))_2(h);else{var U=ex(te.current);switch(k){case 1:k=U.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:k=U.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":k=U.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":k=U.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":k=U.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof b.is=="string"?U.createElement("select",{is:b.is}):U.createElement("select"),b.multiple?k.multiple=!0:b.size&&(k.size=b.size);break;default:k=typeof b.is=="string"?U.createElement(N,{is:b.is}):U.createElement(N)}}k[_s]=h,k[qn]=b;e:for(U=h.child;U!==null;){if(U.tag===5||U.tag===6)k.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===h)break e;for(;U.sibling===null;){if(U.return===null||U.return===h)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}h.stateNode=k;e:switch(gr(k,N,b),N){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Bo(h)}}return Gs(h),P0(h,h.type,c===null?null:c.memoizedProps,h.pendingProps,g),null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==b&&Bo(h);else{if(typeof b!="string"&&h.stateNode===null)throw Error(r(166));if(c=te.current,Wd(h)){if(c=h.stateNode,g=h.memoizedProps,b=null,N=mr,N!==null)switch(N.tag){case 27:case 5:b=N.memoizedProps}c[_s]=h,c=!!(c.nodeValue===g||b!==null&&b.suppressHydrationWarning===!0||$T(c.nodeValue,g)),c||jl(h,!0)}else c=ex(c).createTextNode(b),c[_s]=h,h.stateNode=c}return Gs(h),null;case 31:if(g=h.memoizedState,c===null||c.memoizedState!==null){if(b=Wd(h),g!==null){if(c===null){if(!b)throw Error(r(318));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(557));c[_s]=h}else Cc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Gs(h),c=!1}else g=$w(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=g),c=!0;if(!c)return h.flags&256?(Si(h),h):(Si(h),null);if((h.flags&128)!==0)throw Error(r(558))}return Gs(h),null;case 13:if(b=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=Wd(h),b!==null&&b.dehydrated!==null){if(c===null){if(!N)throw Error(r(318));if(N=h.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[_s]=h}else Cc(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Gs(h),N=!1}else N=$w(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return h.flags&256?(Si(h),h):(Si(h),null)}return Si(h),(h.flags&128)!==0?(h.lanes=g,h):(g=b!==null,c=c!==null&&c.memoizedState!==null,g&&(b=h.child,N=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(N=b.alternate.memoizedState.cachePool.pool),k=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(k=b.memoizedState.cachePool.pool),k!==N&&(b.flags|=2048)),g!==c&&g&&(h.child.flags|=8192),Bg(h,h.updateQueue),Gs(h),null);case 4:return fe(),c===null&&J0(h.stateNode.containerInfo),Gs(h),null;case 10:return Mo(h.type),Gs(h),null;case 19:if(Y(pn),b=h.memoizedState,b===null)return Gs(h),null;if(N=(h.flags&128)!==0,k=b.rendering,k===null)if(N)jm(b,!1);else{if(dn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(k=Cg(c),k!==null){for(h.flags|=128,jm(b,!1),c=k.updateQueue,h.updateQueue=c,Bg(h,c),h.subtreeFlags=0,c=g,g=h.child;g!==null;)b2(g,c),g=g.sibling;return q(pn,pn.current&1|2),is&&Do(h,b.treeForkCount),h.child}c=c.sibling}b.tail!==null&&Ce()>Gg&&(h.flags|=128,N=!0,jm(b,!1),h.lanes=4194304)}else{if(!N)if(c=Cg(k),c!==null){if(h.flags|=128,N=!0,c=c.updateQueue,h.updateQueue=c,Bg(h,c),jm(b,!0),b.tail===null&&b.tailMode==="hidden"&&!k.alternate&&!is)return Gs(h),null}else 2*Ce()-b.renderingStartTime>Gg&&g!==536870912&&(h.flags|=128,N=!0,jm(b,!1),h.lanes=4194304);b.isBackwards?(k.sibling=h.child,h.child=k):(c=b.last,c!==null?c.sibling=k:h.child=k,b.last=k)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Ce(),c.sibling=null,g=pn.current,q(pn,N?g&1|2:g&1),is&&Do(h,b.treeForkCount),c):(Gs(h),null);case 22:case 23:return Si(h),e0(),b=h.memoizedState!==null,c!==null?c.memoizedState!==null!==b&&(h.flags|=8192):b&&(h.flags|=8192),b?(g&536870912)!==0&&(h.flags&128)===0&&(Gs(h),h.subtreeFlags&6&&(h.flags|=8192)):Gs(h),g=h.updateQueue,g!==null&&Bg(h,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),b=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==g&&(h.flags|=2048),c!==null&&Y(Ec),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),Mo(Sn),Gs(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function q7(c,h){switch(Bw(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Mo(Sn),fe(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Z(h),null;case 31:if(h.memoizedState!==null){if(Si(h),h.alternate===null)throw Error(r(340));Cc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 13:if(Si(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Cc()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Y(pn),null;case 4:return fe(),null;case 10:return Mo(h.type),null;case 22:case 23:return Si(h),e0(),c!==null&&Y(Ec),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return Mo(Sn),null;case 25:return null;default:return null}}function qE(c,h){switch(Bw(h),h.tag){case 3:Mo(Sn),fe();break;case 26:case 27:case 5:Z(h);break;case 4:fe();break;case 31:h.memoizedState!==null&&Si(h);break;case 13:Si(h);break;case 19:Y(pn);break;case 10:Mo(h.type);break;case 22:case 23:Si(h),e0(),c!==null&&Y(Ec);break;case 24:Mo(Sn)}}function Sm(c,h){try{var g=h.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var N=b.next;g=N;do{if((g.tag&c)===c){b=void 0;var k=g.create,U=g.inst;b=k(),U.destroy=b}g=g.next}while(g!==N)}}catch(X){Cs(h,h.return,X)}}function El(c,h,g){try{var b=h.updateQueue,N=b!==null?b.lastEffect:null;if(N!==null){var k=N.next;b=k;do{if((b.tag&c)===c){var U=b.inst,X=U.destroy;if(X!==void 0){U.destroy=void 0,N=h;var ne=g,xe=X;try{xe()}catch(ke){Cs(N,ne,ke)}}}b=b.next}while(b!==k)}}catch(ke){Cs(h,h.return,ke)}}function WE(c){var h=c.updateQueue;if(h!==null){var g=c.stateNode;try{O2(h,g)}catch(b){Cs(c,c.return,b)}}}function KE(c,h,g){g.props=Ic(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(b){Cs(c,h,b)}}function _m(c,h){try{var g=c.ref;if(g!==null){switch(c.tag){case 26:case 27:case 5:var b=c.stateNode;break;case 30:b=c.stateNode;break;default:b=c.stateNode}typeof g=="function"?c.refCleanup=g(b):g.current=b}}catch(N){Cs(c,h,N)}}function Ga(c,h){var g=c.ref,b=c.refCleanup;if(g!==null)if(typeof b=="function")try{b()}catch(N){Cs(c,h,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(N){Cs(c,h,N)}else g.current=null}function YE(c){var h=c.type,g=c.memoizedProps,b=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&b.focus();break e;case"img":g.src?b.src=g.src:g.srcSet&&(b.srcset=g.srcSet)}}catch(N){Cs(c,c.return,N)}}function R0(c,h,g){try{var b=c.stateNode;f9(b,c.type,g,h),b[qn]=h}catch(N){Cs(c,c.return,N)}}function XE(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Ll(c.type)||c.tag===4}function D0(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||XE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Ll(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function I0(c,h,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(c,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(c),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=To));else if(b!==4&&(b===27&&Ll(c.type)&&(g=c.stateNode,h=null),c=c.child,c!==null))for(I0(c,h,g),c=c.sibling;c!==null;)I0(c,h,g),c=c.sibling}function zg(c,h,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,h?g.insertBefore(c,h):g.appendChild(c);else if(b!==4&&(b===27&&Ll(c.type)&&(g=c.stateNode),c=c.child,c!==null))for(zg(c,h,g),c=c.sibling;c!==null;)zg(c,h,g),c=c.sibling}function ZE(c){var h=c.stateNode,g=c.memoizedProps;try{for(var b=c.type,N=h.attributes;N.length;)h.removeAttributeNode(N[0]);gr(h,b,g),h[_s]=c,h[qn]=g}catch(k){Cs(c,c.return,k)}}var zo=!1,Cn=!1,M0=!1,QE=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function W7(c,h){if(c=c.containerInfo,sj=ox,c=d2(c),Aw(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var N=b.anchorOffset,k=b.focusNode;b=b.focusOffset;try{g.nodeType,k.nodeType}catch{g=null;break e}var U=0,X=-1,ne=-1,xe=0,ke=0,Te=c,ye=null;t:for(;;){for(var _e;Te!==g||N!==0&&Te.nodeType!==3||(X=U+N),Te!==k||b!==0&&Te.nodeType!==3||(ne=U+b),Te.nodeType===3&&(U+=Te.nodeValue.length),(_e=Te.firstChild)!==null;)ye=Te,Te=_e;for(;;){if(Te===c)break t;if(ye===g&&++xe===N&&(X=U),ye===k&&++ke===b&&(ne=U),(_e=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=_e}g=X===-1||ne===-1?null:{start:X,end:ne}}else g=null}g=g||{start:0,end:0}}else g=null;for(nj={focusedElem:c,selectionRange:g},ox=!1,Kn=h;Kn!==null;)if(h=Kn,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,Kn=c;else for(;Kn!==null;){switch(h=Kn,k=h.alternate,c=h.flags,h.tag){case 0:if((c&4)!==0&&(c=h.updateQueue,c=c!==null?c.events:null,c!==null))for(g=0;g<c.length;g++)N=c[g],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&k!==null){c=void 0,g=h,N=k.memoizedProps,k=k.memoizedState,b=g.stateNode;try{var rt=Ic(g.type,N);c=b.getSnapshotBeforeUpdate(rt,k),b.__reactInternalSnapshotBeforeUpdate=c}catch(vt){Cs(g,g.return,vt)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,g=c.nodeType,g===9)aj(c);else if(g===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":aj(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=h.sibling,c!==null){c.return=h.return,Kn=c;break}Kn=h.return}}function JE(c,h,g){var b=g.flags;switch(g.tag){case 0:case 11:case 15:Ho(c,g),b&4&&Sm(5,g);break;case 1:if(Ho(c,g),b&4)if(c=g.stateNode,h===null)try{c.componentDidMount()}catch(U){Cs(g,g.return,U)}else{var N=Ic(g.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(N,h,c.__reactInternalSnapshotBeforeUpdate)}catch(U){Cs(g,g.return,U)}}b&64&&WE(g),b&512&&_m(g,g.return);break;case 3:if(Ho(c,g),b&64&&(c=g.updateQueue,c!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{O2(c,h)}catch(U){Cs(g,g.return,U)}}break;case 27:h===null&&b&4&&ZE(g);case 26:case 5:Ho(c,g),h===null&&b&4&&YE(g),b&512&&_m(g,g.return);break;case 12:Ho(c,g);break;case 31:Ho(c,g),b&4&&sT(c,g);break;case 13:Ho(c,g),b&4&&nT(c,g),b&64&&(c=g.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(g=s9.bind(null,g),j9(c,g))));break;case 22:if(b=g.memoizedState!==null||zo,!b){h=h!==null&&h.memoizedState!==null||Cn,N=zo;var k=Cn;zo=b,(Cn=h)&&!k?Uo(c,g,(g.subtreeFlags&8772)!==0):Ho(c,g),zo=N,Cn=k}break;case 30:break;default:Ho(c,g)}}function eT(c){var h=c.alternate;h!==null&&(c.alternate=null,eT(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&uw(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Xs=null,ai=!1;function $o(c,h,g){for(g=g.child;g!==null;)tT(c,h,g),g=g.sibling}function tT(c,h,g){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(Lt,g)}catch{}switch(g.tag){case 26:Cn||Ga(g,h),$o(c,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Cn||Ga(g,h);var b=Xs,N=ai;Ll(g.type)&&(Xs=g.stateNode,ai=!1),$o(c,h,g),Dm(g.stateNode),Xs=b,ai=N;break;case 5:Cn||Ga(g,h);case 6:if(b=Xs,N=ai,Xs=null,$o(c,h,g),Xs=b,ai=N,Xs!==null)if(ai)try{(Xs.nodeType===9?Xs.body:Xs.nodeName==="HTML"?Xs.ownerDocument.body:Xs).removeChild(g.stateNode)}catch(k){Cs(g,h,k)}else try{Xs.removeChild(g.stateNode)}catch(k){Cs(g,h,k)}break;case 18:Xs!==null&&(ai?(c=Xs,WT(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,g.stateNode),fu(c)):WT(Xs,g.stateNode));break;case 4:b=Xs,N=ai,Xs=g.stateNode.containerInfo,ai=!0,$o(c,h,g),Xs=b,ai=N;break;case 0:case 11:case 14:case 15:El(2,g,h),Cn||El(4,g,h),$o(c,h,g);break;case 1:Cn||(Ga(g,h),b=g.stateNode,typeof b.componentWillUnmount=="function"&&KE(g,h,b)),$o(c,h,g);break;case 21:$o(c,h,g);break;case 22:Cn=(b=Cn)||g.memoizedState!==null,$o(c,h,g),Cn=b;break;default:$o(c,h,g)}}function sT(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{fu(c)}catch(g){Cs(h,h.return,g)}}}function nT(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{fu(c)}catch(g){Cs(h,h.return,g)}}function K7(c){switch(c.tag){case 31:case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new QE),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new QE),h;default:throw Error(r(435,c.tag))}}function $g(c,h){var g=K7(c);h.forEach(function(b){if(!g.has(b)){g.add(b);var N=n9.bind(null,c,b);b.then(N,N)}})}function oi(c,h){var g=h.deletions;if(g!==null)for(var b=0;b<g.length;b++){var N=g[b],k=c,U=h,X=U;e:for(;X!==null;){switch(X.tag){case 27:if(Ll(X.type)){Xs=X.stateNode,ai=!1;break e}break;case 5:Xs=X.stateNode,ai=!1;break e;case 3:case 4:Xs=X.stateNode.containerInfo,ai=!0;break e}X=X.return}if(Xs===null)throw Error(r(160));tT(k,U,N),Xs=null,ai=!1,k=N.alternate,k!==null&&(k.return=null),N.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)rT(h,c),h=h.sibling}var ya=null;function rT(c,h){var g=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:oi(h,c),li(c),b&4&&(El(3,c,c.return),Sm(3,c),El(5,c,c.return));break;case 1:oi(h,c),li(c),b&512&&(Cn||g===null||Ga(g,g.return)),b&64&&zo&&(c=c.updateQueue,c!==null&&(b=c.callbacks,b!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?b:g.concat(b))));break;case 26:var N=ya;if(oi(h,c),li(c),b&512&&(Cn||g===null||Ga(g,g.return)),b&4){var k=g!==null?g.memoizedState:null;if(b=c.memoizedState,g===null)if(b===null)if(c.stateNode===null){e:{b=c.type,g=c.memoizedProps,N=N.ownerDocument||N;t:switch(b){case"title":k=N.getElementsByTagName("title")[0],(!k||k[Zh]||k[_s]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=N.createElement(b),N.head.insertBefore(k,N.querySelector("head > title"))),gr(k,b,g),k[_s]=c,Wn(k),b=k;break e;case"link":var U=rP("link","href",N).get(b+(g.href||""));if(U){for(var X=0;X<U.length;X++)if(k=U[X],k.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&k.getAttribute("rel")===(g.rel==null?null:g.rel)&&k.getAttribute("title")===(g.title==null?null:g.title)&&k.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){U.splice(X,1);break t}}k=N.createElement(b),gr(k,b,g),N.head.appendChild(k);break;case"meta":if(U=rP("meta","content",N).get(b+(g.content||""))){for(X=0;X<U.length;X++)if(k=U[X],k.getAttribute("content")===(g.content==null?null:""+g.content)&&k.getAttribute("name")===(g.name==null?null:g.name)&&k.getAttribute("property")===(g.property==null?null:g.property)&&k.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&k.getAttribute("charset")===(g.charSet==null?null:g.charSet)){U.splice(X,1);break t}}k=N.createElement(b),gr(k,b,g),N.head.appendChild(k);break;default:throw Error(r(468,b))}k[_s]=c,Wn(k),b=k}c.stateNode=b}else iP(N,c.type,c.stateNode);else c.stateNode=nP(N,b,c.memoizedProps);else k!==b?(k===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):k.count--,b===null?iP(N,c.type,c.stateNode):nP(N,b,c.memoizedProps)):b===null&&c.stateNode!==null&&R0(c,c.memoizedProps,g.memoizedProps)}break;case 27:oi(h,c),li(c),b&512&&(Cn||g===null||Ga(g,g.return)),g!==null&&b&4&&R0(c,c.memoizedProps,g.memoizedProps);break;case 5:if(oi(h,c),li(c),b&512&&(Cn||g===null||Ga(g,g.return)),c.flags&32){N=c.stateNode;try{Od(N,"")}catch(rt){Cs(c,c.return,rt)}}b&4&&c.stateNode!=null&&(N=c.memoizedProps,R0(c,N,g!==null?g.memoizedProps:N)),b&1024&&(M0=!0);break;case 6:if(oi(h,c),li(c),b&4){if(c.stateNode===null)throw Error(r(162));b=c.memoizedProps,g=c.stateNode;try{g.nodeValue=b}catch(rt){Cs(c,c.return,rt)}}break;case 3:if(nx=null,N=ya,ya=tx(h.containerInfo),oi(h,c),ya=N,li(c),b&4&&g!==null&&g.memoizedState.isDehydrated)try{fu(h.containerInfo)}catch(rt){Cs(c,c.return,rt)}M0&&(M0=!1,iT(c));break;case 4:b=ya,ya=tx(c.stateNode.containerInfo),oi(h,c),li(c),ya=b;break;case 12:oi(h,c),li(c);break;case 31:oi(h,c),li(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,$g(c,b)));break;case 13:oi(h,c),li(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Ug=Ce()),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,$g(c,b)));break;case 22:N=c.memoizedState!==null;var ne=g!==null&&g.memoizedState!==null,xe=zo,ke=Cn;if(zo=xe||N,Cn=ke||ne,oi(h,c),Cn=ke,zo=xe,li(c),b&8192)e:for(h=c.stateNode,h._visibility=N?h._visibility&-2:h._visibility|1,N&&(g===null||ne||zo||Cn||Mc(c)),g=null,h=c;;){if(h.tag===5||h.tag===26){if(g===null){ne=g=h;try{if(k=ne.stateNode,N)U=k.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{X=ne.stateNode;var Te=ne.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;X.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(rt){Cs(ne,ne.return,rt)}}}else if(h.tag===6){if(g===null){ne=h;try{ne.stateNode.nodeValue=N?"":ne.memoizedProps}catch(rt){Cs(ne,ne.return,rt)}}}else if(h.tag===18){if(g===null){ne=h;try{var _e=ne.stateNode;N?KT(_e,!0):KT(ne.stateNode,!1)}catch(rt){Cs(ne,ne.return,rt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}b&4&&(b=c.updateQueue,b!==null&&(g=b.retryQueue,g!==null&&(b.retryQueue=null,$g(c,g))));break;case 19:oi(h,c),li(c),b&4&&(b=c.updateQueue,b!==null&&(c.updateQueue=null,$g(c,b)));break;case 30:break;case 21:break;default:oi(h,c),li(c)}}function li(c){var h=c.flags;if(h&2){try{for(var g,b=c.return;b!==null;){if(XE(b)){g=b;break}b=b.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var N=g.stateNode,k=D0(c);zg(c,k,N);break;case 5:var U=g.stateNode;g.flags&32&&(Od(U,""),g.flags&=-33);var X=D0(c);zg(c,X,U);break;case 3:case 4:var ne=g.stateNode.containerInfo,xe=D0(c);I0(c,xe,ne);break;default:throw Error(r(161))}}catch(ke){Cs(c,c.return,ke)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function iT(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;iT(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function Ho(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)JE(c,h.alternate,h),h=h.sibling}function Mc(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:El(4,h,h.return),Mc(h);break;case 1:Ga(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&KE(h,h.return,g),Mc(h);break;case 27:Dm(h.stateNode);case 26:case 5:Ga(h,h.return),Mc(h);break;case 22:h.memoizedState===null&&Mc(h);break;case 30:Mc(h);break;default:Mc(h)}c=c.sibling}}function Uo(c,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var b=h.alternate,N=c,k=h,U=k.flags;switch(k.tag){case 0:case 11:case 15:Uo(N,k,g),Sm(4,k);break;case 1:if(Uo(N,k,g),b=k,N=b.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(xe){Cs(b,b.return,xe)}if(b=k,N=b.updateQueue,N!==null){var X=b.stateNode;try{var ne=N.shared.hiddenCallbacks;if(ne!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ne.length;N++)L2(ne[N],X)}catch(xe){Cs(b,b.return,xe)}}g&&U&64&&WE(k),_m(k,k.return);break;case 27:ZE(k);case 26:case 5:Uo(N,k,g),g&&b===null&&U&4&&YE(k),_m(k,k.return);break;case 12:Uo(N,k,g);break;case 31:Uo(N,k,g),g&&U&4&&sT(N,k);break;case 13:Uo(N,k,g),g&&U&4&&nT(N,k);break;case 22:k.memoizedState===null&&Uo(N,k,g),_m(k,k.return);break;case 30:break;default:Uo(N,k,g)}h=h.sibling}}function L0(c,h){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&dm(g))}function O0(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&dm(c))}function wa(c,h,g,b){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)aT(c,h,g,b),h=h.sibling}function aT(c,h,g,b){var N=h.flags;switch(h.tag){case 0:case 11:case 15:wa(c,h,g,b),N&2048&&Sm(9,h);break;case 1:wa(c,h,g,b);break;case 3:wa(c,h,g,b),N&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&dm(c)));break;case 12:if(N&2048){wa(c,h,g,b),c=h.stateNode;try{var k=h.memoizedProps,U=k.id,X=k.onPostCommit;typeof X=="function"&&X(U,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ne){Cs(h,h.return,ne)}}else wa(c,h,g,b);break;case 31:wa(c,h,g,b);break;case 13:wa(c,h,g,b);break;case 23:break;case 22:k=h.stateNode,U=h.alternate,h.memoizedState!==null?k._visibility&2?wa(c,h,g,b):Nm(c,h):k._visibility&2?wa(c,h,g,b):(k._visibility|=2,nu(c,h,g,b,(h.subtreeFlags&10256)!==0||!1)),N&2048&&L0(U,h);break;case 24:wa(c,h,g,b),N&2048&&O0(h.alternate,h);break;default:wa(c,h,g,b)}}function nu(c,h,g,b,N){for(N=N&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var k=c,U=h,X=g,ne=b,xe=U.flags;switch(U.tag){case 0:case 11:case 15:nu(k,U,X,ne,N),Sm(8,U);break;case 23:break;case 22:var ke=U.stateNode;U.memoizedState!==null?ke._visibility&2?nu(k,U,X,ne,N):Nm(k,U):(ke._visibility|=2,nu(k,U,X,ne,N)),N&&xe&2048&&L0(U.alternate,U);break;case 24:nu(k,U,X,ne,N),N&&xe&2048&&O0(U.alternate,U);break;default:nu(k,U,X,ne,N)}h=h.sibling}}function Nm(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=c,b=h,N=b.flags;switch(b.tag){case 22:Nm(g,b),N&2048&&L0(b.alternate,b);break;case 24:Nm(g,b),N&2048&&O0(b.alternate,b);break;default:Nm(g,b)}h=h.sibling}}var Cm=8192;function ru(c,h,g){if(c.subtreeFlags&Cm)for(c=c.child;c!==null;)oT(c,h,g),c=c.sibling}function oT(c,h,g){switch(c.tag){case 26:ru(c,h,g),c.flags&Cm&&c.memoizedState!==null&&I9(g,ya,c.memoizedState,c.memoizedProps);break;case 5:ru(c,h,g);break;case 3:case 4:var b=ya;ya=tx(c.stateNode.containerInfo),ru(c,h,g),ya=b;break;case 22:c.memoizedState===null&&(b=c.alternate,b!==null&&b.memoizedState!==null?(b=Cm,Cm=16777216,ru(c,h,g),Cm=b):ru(c,h,g));break;default:ru(c,h,g)}}function lT(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function km(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var b=h[g];Kn=b,dT(b,c)}lT(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)cT(c),c=c.sibling}function cT(c){switch(c.tag){case 0:case 11:case 15:km(c),c.flags&2048&&El(9,c,c.return);break;case 3:km(c);break;case 12:km(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,Hg(c)):km(c);break;default:km(c)}}function Hg(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var b=h[g];Kn=b,dT(b,c)}lT(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:El(8,h,h.return),Hg(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,Hg(h));break;default:Hg(h)}c=c.sibling}}function dT(c,h){for(;Kn!==null;){var g=Kn;switch(g.tag){case 0:case 11:case 15:El(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var b=g.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:dm(g.memoizedState.cache)}if(b=g.child,b!==null)b.return=g,Kn=b;else e:for(g=c;Kn!==null;){b=Kn;var N=b.sibling,k=b.return;if(eT(b),b===g){Kn=null;break e}if(N!==null){N.return=k,Kn=N;break e}Kn=k}}}var Y7={getCacheForType:function(c){var h=fr(Sn),g=h.data.get(c);return g===void 0&&(g=c(),h.data.set(c,g)),g},cacheSignal:function(){return fr(Sn).controller.signal}},X7=typeof WeakMap=="function"?WeakMap:Map,js=0,Ls=null,es=null,ns=0,Ns=0,_i=null,Tl=!1,iu=!1,F0=!1,Go=0,dn=0,Pl=0,Lc=0,B0=0,Ni=0,au=0,Am=null,ci=null,z0=!1,Ug=0,uT=0,Gg=1/0,Vg=null,Rl=null,In=0,Dl=null,ou=null,Vo=0,$0=0,H0=null,hT=null,Em=0,U0=null;function Ci(){return(js&2)!==0&&ns!==0?ns&-ns:I.T!==null?Y0():Vn()}function mT(){if(Ni===0)if((ns&536870912)===0||is){var c=xs;xs<<=1,(xs&3932160)===0&&(xs=262144),Ni=c}else Ni=536870912;return c=ji.current,c!==null&&(c.flags|=32),Ni}function di(c,h,g){(c===Ls&&(Ns===2||Ns===9)||c.cancelPendingCommit!==null)&&(lu(c,0),Il(c,ns,Ni,!1)),Hs(c,g),((js&2)===0||c!==Ls)&&(c===Ls&&((js&2)===0&&(Lc|=g),dn===4&&Il(c,ns,Ni,!1)),Va(c))}function fT(c,h,g){if((js&6)!==0)throw Error(r(327));var b=!g&&(h&127)===0&&(h&c.expiredLanes)===0||ct(c,h),N=b?J7(c,h):V0(c,h,!0),k=b;do{if(N===0){iu&&!b&&Il(c,h,0,!1);break}else{if(g=c.current.alternate,k&&!Z7(g)){N=V0(c,h,!1),k=!1;continue}if(N===2){if(k=h,c.errorRecoveryDisabledLanes&k)var U=0;else U=c.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){h=U;e:{var X=c;N=Am;var ne=X.current.memoizedState.isDehydrated;if(ne&&(lu(X,U).flags|=256),U=V0(X,U,!1),U!==2){if(F0&&!ne){X.errorRecoveryDisabledLanes|=k,Lc|=k,N=4;break e}k=ci,ci=N,k!==null&&(ci===null?ci=k:ci.push.apply(ci,k))}N=U}if(k=!1,N!==2)continue}}if(N===1){lu(c,0),Il(c,h,0,!0);break}e:{switch(b=c,k=N,k){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Il(b,h,Ni,!Tl);break e;case 2:ci=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(N=Ug+300-Ce(),10<N)){if(Il(b,h,Ni,!Tl),ze(b,0,!0)!==0)break e;Vo=h,b.timeoutHandle=VT(pT.bind(null,b,g,ci,Vg,z0,h,Ni,Lc,au,Tl,k,"Throttled",-0,0),N);break e}pT(b,g,ci,Vg,z0,h,Ni,Lc,au,Tl,k,null,-0,0)}}break}while(!0);Va(c)}function pT(c,h,g,b,N,k,U,X,ne,xe,ke,Te,ye,_e){if(c.timeoutHandle=-1,Te=h.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:To},oT(h,k,Te);var rt=(k&62914560)===k?Ug-Ce():(k&4194048)===k?uT-Ce():0;if(rt=M9(Te,rt),rt!==null){Vo=k,c.cancelPendingCommit=rt(ST.bind(null,c,h,k,g,b,N,U,X,ne,ke,Te,null,ye,_e)),Il(c,k,U,!xe);return}}ST(c,h,k,g,b,N,U,X,ne)}function Z7(c){for(var h=c;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var b=0;b<g.length;b++){var N=g[b],k=N.getSnapshot;N=N.value;try{if(!yi(k(),N))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Il(c,h,g,b){h&=~B0,h&=~Lc,c.suspendedLanes|=h,c.pingedLanes&=~h,b&&(c.warmLanes|=h),b=c.expirationTimes;for(var N=h;0<N;){var k=31-Ft(N),U=1<<k;b[k]=-1,N&=~U}g!==0&&Ie(c,g,h)}function qg(){return(js&6)===0?(Tm(0),!1):!0}function G0(){if(es!==null){if(Ns===0)var c=es.return;else c=es,Io=kc=null,a0(c),Qd=null,hm=0,c=es;for(;c!==null;)qE(c.alternate,c),c=c.return;es=null}}function lu(c,h){var g=c.timeoutHandle;g!==-1&&(c.timeoutHandle=-1,x9(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),Vo=0,G0(),Ls=c,es=g=Ro(c.current,null),ns=h,Ns=0,_i=null,Tl=!1,iu=ct(c,h),F0=!1,au=Ni=B0=Lc=Pl=dn=0,ci=Am=null,z0=!1,(h&8)!==0&&(h|=h&32);var b=c.entangledLanes;if(b!==0)for(c=c.entanglements,b&=h;0<b;){var N=31-Ft(b),k=1<<N;h|=c[N],b&=~k}return Go=h,mg(),g}function gT(c,h){Bt=null,I.H=ym,h===Zd||h===wg?(h=R2(),Ns=3):h===Kw?(h=R2(),Ns=4):Ns=h===j0?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,_i=h,es===null&&(dn=1,Mg(c,Wi(h,c.current)))}function xT(){var c=ji.current;return c===null?!0:(ns&4194048)===ns?Zi===null:(ns&62914560)===ns||(ns&536870912)!==0?c===Zi:!1}function vT(){var c=I.H;return I.H=ym,c===null?ym:c}function bT(){var c=I.A;return I.A=Y7,c}function Wg(){dn=4,Tl||(ns&4194048)!==ns&&ji.current!==null||(iu=!0),(Pl&134217727)===0&&(Lc&134217727)===0||Ls===null||Il(Ls,ns,Ni,!1)}function V0(c,h,g){var b=js;js|=2;var N=vT(),k=bT();(Ls!==c||ns!==h)&&(Vg=null,lu(c,h)),h=!1;var U=dn;e:do try{if(Ns!==0&&es!==null){var X=es,ne=_i;switch(Ns){case 8:G0(),U=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(h=!0);var xe=Ns;if(Ns=0,_i=null,cu(c,X,ne,xe),g&&iu){U=0;break e}break;default:xe=Ns,Ns=0,_i=null,cu(c,X,ne,xe)}}Q7(),U=dn;break}catch(ke){gT(c,ke)}while(!0);return h&&c.shellSuspendCounter++,Io=kc=null,js=b,I.H=N,I.A=k,es===null&&(Ls=null,ns=0,mg()),U}function Q7(){for(;es!==null;)yT(es)}function J7(c,h){var g=js;js|=2;var b=vT(),N=bT();Ls!==c||ns!==h?(Vg=null,Gg=Ce()+500,lu(c,h)):iu=ct(c,h);e:do try{if(Ns!==0&&es!==null){h=es;var k=_i;t:switch(Ns){case 1:Ns=0,_i=null,cu(c,h,k,1);break;case 2:case 9:if(T2(k)){Ns=0,_i=null,wT(h);break}h=function(){Ns!==2&&Ns!==9||Ls!==c||(Ns=7),Va(c)},k.then(h,h);break e;case 3:Ns=7;break e;case 4:Ns=5;break e;case 7:T2(k)?(Ns=0,_i=null,wT(h)):(Ns=0,_i=null,cu(c,h,k,7));break;case 5:var U=null;switch(es.tag){case 26:U=es.memoizedState;case 5:case 27:var X=es;if(U?aP(U):X.stateNode.complete){Ns=0,_i=null;var ne=X.sibling;if(ne!==null)es=ne;else{var xe=X.return;xe!==null?(es=xe,Kg(xe)):es=null}break t}}Ns=0,_i=null,cu(c,h,k,5);break;case 6:Ns=0,_i=null,cu(c,h,k,6);break;case 8:G0(),dn=6;break e;default:throw Error(r(462))}}e9();break}catch(ke){gT(c,ke)}while(!0);return Io=kc=null,I.H=b,I.A=N,js=g,es!==null?0:(Ls=null,ns=0,mg(),dn)}function e9(){for(;es!==null&&!De();)yT(es)}function yT(c){var h=GE(c.alternate,c,Go);c.memoizedProps=c.pendingProps,h===null?Kg(c):es=h}function wT(c){var h=c,g=h.alternate;switch(h.tag){case 15:case 0:h=FE(g,h,h.pendingProps,h.type,void 0,ns);break;case 11:h=FE(g,h,h.pendingProps,h.type.render,h.ref,ns);break;case 5:a0(h);default:qE(g,h),h=es=b2(h,Go),h=GE(g,h,Go)}c.memoizedProps=c.pendingProps,h===null?Kg(c):es=h}function cu(c,h,g,b){Io=kc=null,a0(h),Qd=null,hm=0;var N=h.return;try{if(H7(c,N,h,g,ns)){dn=1,Mg(c,Wi(g,c.current)),es=null;return}}catch(k){if(N!==null)throw es=N,k;dn=1,Mg(c,Wi(g,c.current)),es=null;return}h.flags&32768?(is||b===1?c=!0:iu||(ns&536870912)!==0?c=!1:(Tl=c=!0,(b===2||b===9||b===3||b===6)&&(b=ji.current,b!==null&&b.tag===13&&(b.flags|=16384))),jT(h,c)):Kg(h)}function Kg(c){var h=c;do{if((h.flags&32768)!==0){jT(h,Tl);return}c=h.return;var g=V7(h.alternate,h,Go);if(g!==null){es=g;return}if(h=h.sibling,h!==null){es=h;return}es=h=c}while(h!==null);dn===0&&(dn=5)}function jT(c,h){do{var g=q7(c.alternate,c);if(g!==null){g.flags&=32767,es=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(c=c.sibling,c!==null)){es=c;return}es=c=g}while(c!==null);dn=6,es=null}function ST(c,h,g,b,N,k,U,X,ne){c.cancelPendingCommit=null;do Yg();while(In!==0);if((js&6)!==0)throw Error(r(327));if(h!==null){if(h===c.current)throw Error(r(177));if(k=h.lanes|h.childLanes,k|=Dw,Ge(c,g,k,U,X,ne),c===Ls&&(es=Ls=null,ns=0),ou=h,Dl=c,Vo=g,$0=k,H0=N,hT=b,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,r9(Me,function(){return AT(),null})):(c.callbackNode=null,c.callbackPriority=0),b=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||b){b=I.T,I.T=null,N=V.p,V.p=2,U=js,js|=4;try{W7(c,h,g)}finally{js=U,V.p=N,I.T=b}}In=1,_T(),NT(),CT()}}function _T(){if(In===1){In=0;var c=Dl,h=ou,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=I.T,I.T=null;var b=V.p;V.p=2;var N=js;js|=4;try{rT(h,c);var k=nj,U=d2(c.containerInfo),X=k.focusedElem,ne=k.selectionRange;if(U!==X&&X&&X.ownerDocument&&c2(X.ownerDocument.documentElement,X)){if(ne!==null&&Aw(X)){var xe=ne.start,ke=ne.end;if(ke===void 0&&(ke=xe),"selectionStart"in X)X.selectionStart=xe,X.selectionEnd=Math.min(ke,X.value.length);else{var Te=X.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var _e=ye.getSelection(),rt=X.textContent.length,vt=Math.min(ne.start,rt),Ps=ne.end===void 0?vt:Math.min(ne.end,rt);!_e.extend&&vt>Ps&&(U=Ps,Ps=vt,vt=U);var de=l2(X,vt),ae=l2(X,Ps);if(de&&ae&&(_e.rangeCount!==1||_e.anchorNode!==de.node||_e.anchorOffset!==de.offset||_e.focusNode!==ae.node||_e.focusOffset!==ae.offset)){var ge=Te.createRange();ge.setStart(de.node,de.offset),_e.removeAllRanges(),vt>Ps?(_e.addRange(ge),_e.extend(ae.node,ae.offset)):(ge.setEnd(ae.node,ae.offset),_e.addRange(ge))}}}}for(Te=[],_e=X;_e=_e.parentNode;)_e.nodeType===1&&Te.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<Te.length;X++){var Ee=Te[X];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}ox=!!sj,nj=sj=null}finally{js=N,V.p=b,I.T=g}}c.current=h,In=2}}function NT(){if(In===2){In=0;var c=Dl,h=ou,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=I.T,I.T=null;var b=V.p;V.p=2;var N=js;js|=4;try{JE(c,h.alternate,h)}finally{js=N,V.p=b,I.T=g}}In=3}}function CT(){if(In===4||In===3){In=0,je();var c=Dl,h=ou,g=Vo,b=hT;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?In=5:(In=0,ou=Dl=null,kT(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(Rl=null),Cr(g),h=h.stateNode,ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(Lt,h,void 0,(h.current.flags&128)===128)}catch{}if(b!==null){h=I.T,N=V.p,V.p=2,I.T=null;try{for(var k=c.onRecoverableError,U=0;U<b.length;U++){var X=b[U];k(X.value,{componentStack:X.stack})}}finally{I.T=h,V.p=N}}(Vo&3)!==0&&Yg(),Va(c),N=c.pendingLanes,(g&261930)!==0&&(N&42)!==0?c===U0?Em++:(Em=0,U0=c):Em=0,Tm(0)}}function kT(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,dm(h)))}function Yg(){return _T(),NT(),CT(),AT()}function AT(){if(In!==5)return!1;var c=Dl,h=$0;$0=0;var g=Cr(Vo),b=I.T,N=V.p;try{V.p=32>g?32:g,I.T=null,g=H0,H0=null;var k=Dl,U=Vo;if(In=0,ou=Dl=null,Vo=0,(js&6)!==0)throw Error(r(331));var X=js;if(js|=4,cT(k.current),aT(k,k.current,U,g),js=X,Tm(0,!1),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(Lt,k)}catch{}return!0}finally{V.p=N,I.T=b,kT(c,h)}}function ET(c,h,g){h=Wi(g,h),h=w0(c.stateNode,h,2),c=Cl(c,h,2),c!==null&&(Hs(c,2),Va(c))}function Cs(c,h,g){if(c.tag===3)ET(c,c,g);else for(;h!==null;){if(h.tag===3){ET(h,c,g);break}else if(h.tag===1){var b=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Rl===null||!Rl.has(b))){c=Wi(g,c),g=TE(2),b=Cl(h,g,2),b!==null&&(PE(g,b,h,c),Hs(b,2),Va(b));break}}h=h.return}}function q0(c,h,g){var b=c.pingCache;if(b===null){b=c.pingCache=new X7;var N=new Set;b.set(h,N)}else N=b.get(h),N===void 0&&(N=new Set,b.set(h,N));N.has(g)||(F0=!0,N.add(g),c=t9.bind(null,c,h,g),h.then(c,c))}function t9(c,h,g){var b=c.pingCache;b!==null&&b.delete(h),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,Ls===c&&(ns&g)===g&&(dn===4||dn===3&&(ns&62914560)===ns&&300>Ce()-Ug?(js&2)===0&&lu(c,0):B0|=g,au===ns&&(au=0)),Va(c)}function TT(c,h){h===0&&(h=Jt()),c=_c(c,h),c!==null&&(Hs(c,h),Va(c))}function s9(c){var h=c.memoizedState,g=0;h!==null&&(g=h.retryLane),TT(c,g)}function n9(c,h){var g=0;switch(c.tag){case 31:case 13:var b=c.stateNode,N=c.memoizedState;N!==null&&(g=N.retryLane);break;case 19:b=c.stateNode;break;case 22:b=c.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(h),TT(c,g)}function r9(c,h){return Ze(c,h)}var Xg=null,du=null,W0=!1,Zg=!1,K0=!1,Ml=0;function Va(c){c!==du&&c.next===null&&(du===null?Xg=du=c:du=du.next=c),Zg=!0,W0||(W0=!0,a9())}function Tm(c,h){if(!K0&&Zg){K0=!0;do for(var g=!1,b=Xg;b!==null;){if(c!==0){var N=b.pendingLanes;if(N===0)var k=0;else{var U=b.suspendedLanes,X=b.pingedLanes;k=(1<<31-Ft(42|c)+1)-1,k&=N&~(U&~X),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(g=!0,IT(b,k))}else k=ns,k=ze(b,b===Ls?k:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(k&3)===0||ct(b,k)||(g=!0,IT(b,k));b=b.next}while(g);K0=!1}}function i9(){PT()}function PT(){Zg=W0=!1;var c=0;Ml!==0&&g9()&&(c=Ml);for(var h=Ce(),g=null,b=Xg;b!==null;){var N=b.next,k=RT(b,h);k===0?(b.next=null,g===null?Xg=N:g.next=N,N===null&&(du=g)):(g=b,(c!==0||(k&3)!==0)&&(Zg=!0)),b=N}In!==0&&In!==5||Tm(c),Ml!==0&&(Ml=0)}function RT(c,h){for(var g=c.suspendedLanes,b=c.pingedLanes,N=c.expirationTimes,k=c.pendingLanes&-62914561;0<k;){var U=31-Ft(k),X=1<<U,ne=N[U];ne===-1?((X&g)===0||(X&b)!==0)&&(N[U]=Rt(X,h)):ne<=h&&(c.expiredLanes|=X),k&=~X}if(h=Ls,g=ns,g=ze(c,c===h?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),b=c.callbackNode,g===0||c===h&&(Ns===2||Ns===9)||c.cancelPendingCommit!==null)return b!==null&&b!==null&&Ae(b),c.callbackNode=null,c.callbackPriority=0;if((g&3)===0||ct(c,g)){if(h=g&-g,h===c.callbackPriority)return h;switch(b!==null&&Ae(b),Cr(g)){case 2:case 8:g=ve;break;case 32:g=Me;break;case 268435456:g=jt;break;default:g=Me}return b=DT.bind(null,c),g=Ze(g,b),c.callbackPriority=h,c.callbackNode=g,h}return b!==null&&b!==null&&Ae(b),c.callbackPriority=2,c.callbackNode=null,2}function DT(c,h){if(In!==0&&In!==5)return c.callbackNode=null,c.callbackPriority=0,null;var g=c.callbackNode;if(Yg()&&c.callbackNode!==g)return null;var b=ns;return b=ze(c,c===Ls?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),b===0?null:(fT(c,b,h),RT(c,Ce()),c.callbackNode!=null&&c.callbackNode===g?DT.bind(null,c):null)}function IT(c,h){if(Yg())return null;fT(c,h,!0)}function a9(){v9(function(){(js&6)!==0?Ze(be,i9):PT()})}function Y0(){if(Ml===0){var c=Yd;c===0&&(c=ue,ue<<=1,(ue&261888)===0&&(ue=256)),Ml=c}return Ml}function MT(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ig(""+c)}function LT(c,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,c.id&&g.setAttribute("form",c.id),h.parentNode.insertBefore(g,h),c=new FormData(c),g.parentNode.removeChild(g),c}function o9(c,h,g,b,N){if(h==="submit"&&g&&g.stateNode===N){var k=MT((N[qn]||null).action),U=b.submitter;U&&(h=(h=U[qn]||null)?MT(h.formAction):U.getAttribute("formAction"),h!==null&&(k=h,U=null));var X=new cg("action","action",null,b,N);c.push({event:X,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Ml!==0){var ne=U?LT(N,U):new FormData(N);p0(g,{pending:!0,data:ne,method:N.method,action:k},null,ne)}}else typeof k=="function"&&(X.preventDefault(),ne=U?LT(N,U):new FormData(N),p0(g,{pending:!0,data:ne,method:N.method,action:k},k,ne))},currentTarget:N}]})}}for(var X0=0;X0<Rw.length;X0++){var Z0=Rw[X0],l9=Z0.toLowerCase(),c9=Z0[0].toUpperCase()+Z0.slice(1);ba(l9,"on"+c9)}ba(m2,"onAnimationEnd"),ba(f2,"onAnimationIteration"),ba(p2,"onAnimationStart"),ba("dblclick","onDoubleClick"),ba("focusin","onFocus"),ba("focusout","onBlur"),ba(N7,"onTransitionRun"),ba(C7,"onTransitionStart"),ba(k7,"onTransitionCancel"),ba(g2,"onTransitionEnd"),Md("onMouseEnter",["mouseout","mouseover"]),Md("onMouseLeave",["mouseout","mouseover"]),Md("onPointerEnter",["pointerout","pointerover"]),Md("onPointerLeave",["pointerout","pointerover"]),yc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yc("onBeforeInput",["compositionend","keypress","textInput","paste"]),yc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pm));function OT(c,h){h=(h&4)!==0;for(var g=0;g<c.length;g++){var b=c[g],N=b.event;b=b.listeners;e:{var k=void 0;if(h)for(var U=b.length-1;0<=U;U--){var X=b[U],ne=X.instance,xe=X.currentTarget;if(X=X.listener,ne!==k&&N.isPropagationStopped())break e;k=X,N.currentTarget=xe;try{k(N)}catch(ke){hg(ke)}N.currentTarget=null,k=ne}else for(U=0;U<b.length;U++){if(X=b[U],ne=X.instance,xe=X.currentTarget,X=X.listener,ne!==k&&N.isPropagationStopped())break e;k=X,N.currentTarget=xe;try{k(N)}catch(ke){hg(ke)}N.currentTarget=null,k=ne}}}}function ts(c,h){var g=h[Xh];g===void 0&&(g=h[Xh]=new Set);var b=c+"__bubble";g.has(b)||(FT(h,c,2,!1),g.add(b))}function Q0(c,h,g){var b=0;h&&(b|=4),FT(g,c,b,h)}var Qg="_reactListening"+Math.random().toString(36).slice(2);function J0(c){if(!c[Qg]){c[Qg]=!0,PA.forEach(function(g){g!=="selectionchange"&&(d9.has(g)||Q0(g,!1,c),Q0(g,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Qg]||(h[Qg]=!0,Q0("selectionchange",!1,h))}}function FT(c,h,g,b){switch(mP(h)){case 2:var N=F9;break;case 8:N=B9;break;default:N=fj}g=N.bind(null,h,g,c),N=void 0,!bw||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(N=!0),b?N!==void 0?c.addEventListener(h,g,{capture:!0,passive:N}):c.addEventListener(h,g,!0):N!==void 0?c.addEventListener(h,g,{passive:N}):c.addEventListener(h,g,!1)}function ej(c,h,g,b,N){var k=b;if((h&1)===0&&(h&2)===0&&b!==null)e:for(;;){if(b===null)return;var U=b.tag;if(U===3||U===4){var X=b.stateNode.containerInfo;if(X===N)break;if(U===4)for(U=b.return;U!==null;){var ne=U.tag;if((ne===3||ne===4)&&U.stateNode.containerInfo===N)return;U=U.return}for(;X!==null;){if(U=Rd(X),U===null)return;if(ne=U.tag,ne===5||ne===6||ne===26||ne===27){b=k=U;continue e}X=X.parentNode}}b=b.return}UA(function(){var xe=k,ke=xw(g),Te=[];e:{var ye=x2.get(c);if(ye!==void 0){var _e=cg,rt=c;switch(c){case"keypress":if(og(g)===0)break e;case"keydown":case"keyup":_e=n7;break;case"focusin":rt="focus",_e=Sw;break;case"focusout":rt="blur",_e=Sw;break;case"beforeblur":case"afterblur":_e=Sw;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=qA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=VV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=a7;break;case m2:case f2:case p2:_e=KV;break;case g2:_e=l7;break;case"scroll":case"scrollend":_e=UV;break;case"wheel":_e=d7;break;case"copy":case"cut":case"paste":_e=XV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=KA;break;case"toggle":case"beforetoggle":_e=h7}var vt=(h&4)!==0,Ps=!vt&&(c==="scroll"||c==="scrollend"),de=vt?ye!==null?ye+"Capture":null:ye;vt=[];for(var ae=xe,ge;ae!==null;){var Ee=ae;if(ge=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ge===null||de===null||(Ee=Jh(ae,de),Ee!=null&&vt.push(Rm(ae,Ee,ge))),Ps)break;ae=ae.return}0<vt.length&&(ye=new _e(ye,rt,null,g,ke),Te.push({event:ye,listeners:vt}))}}if((h&7)===0){e:{if(ye=c==="mouseover"||c==="pointerover",_e=c==="mouseout"||c==="pointerout",ye&&g!==gw&&(rt=g.relatedTarget||g.fromElement)&&(Rd(rt)||rt[Ao]))break e;if((_e||ye)&&(ye=ke.window===ke?ke:(ye=ke.ownerDocument)?ye.defaultView||ye.parentWindow:window,_e?(rt=g.relatedTarget||g.toElement,_e=xe,rt=rt?Rd(rt):null,rt!==null&&(Ps=a(rt),vt=rt.tag,rt!==Ps||vt!==5&&vt!==27&&vt!==6)&&(rt=null)):(_e=null,rt=xe),_e!==rt)){if(vt=qA,Ee="onMouseLeave",de="onMouseEnter",ae="mouse",(c==="pointerout"||c==="pointerover")&&(vt=KA,Ee="onPointerLeave",de="onPointerEnter",ae="pointer"),Ps=_e==null?ye:Qh(_e),ge=rt==null?ye:Qh(rt),ye=new vt(Ee,ae+"leave",_e,g,ke),ye.target=Ps,ye.relatedTarget=ge,Ee=null,Rd(ke)===xe&&(vt=new vt(de,ae+"enter",rt,g,ke),vt.target=ge,vt.relatedTarget=Ps,Ee=vt),Ps=Ee,_e&&rt)t:{for(vt=u9,de=_e,ae=rt,ge=0,Ee=de;Ee;Ee=vt(Ee))ge++;Ee=0;for(var ht=ae;ht;ht=vt(ht))Ee++;for(;0<ge-Ee;)de=vt(de),ge--;for(;0<Ee-ge;)ae=vt(ae),Ee--;for(;ge--;){if(de===ae||ae!==null&&de===ae.alternate){vt=de;break t}de=vt(de),ae=vt(ae)}vt=null}else vt=null;_e!==null&&BT(Te,ye,_e,vt,!1),rt!==null&&Ps!==null&&BT(Te,Ps,rt,vt,!0)}}e:{if(ye=xe?Qh(xe):window,_e=ye.nodeName&&ye.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ye.type==="file")var bs=s2;else if(e2(ye))if(n2)bs=j7;else{bs=y7;var dt=b7}else _e=ye.nodeName,!_e||_e.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?xe&&pw(xe.elementType)&&(bs=s2):bs=w7;if(bs&&(bs=bs(c,xe))){t2(Te,bs,g,ke);break e}dt&&dt(c,ye,xe),c==="focusout"&&xe&&ye.type==="number"&&xe.memoizedProps.value!=null&&fw(ye,"number",ye.value)}switch(dt=xe?Qh(xe):window,c){case"focusin":(e2(dt)||dt.contentEditable==="true")&&($d=dt,Ew=xe,om=null);break;case"focusout":om=Ew=$d=null;break;case"mousedown":Tw=!0;break;case"contextmenu":case"mouseup":case"dragend":Tw=!1,u2(Te,g,ke);break;case"selectionchange":if(_7)break;case"keydown":case"keyup":u2(Te,g,ke)}var $t;if(Nw)e:{switch(c){case"compositionstart":var rs="onCompositionStart";break e;case"compositionend":rs="onCompositionEnd";break e;case"compositionupdate":rs="onCompositionUpdate";break e}rs=void 0}else zd?QA(c,g)&&(rs="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(rs="onCompositionStart");rs&&(YA&&g.locale!=="ko"&&(zd||rs!=="onCompositionStart"?rs==="onCompositionEnd"&&zd&&($t=GA()):(bl=ke,yw="value"in bl?bl.value:bl.textContent,zd=!0)),dt=Jg(xe,rs),0<dt.length&&(rs=new WA(rs,c,null,g,ke),Te.push({event:rs,listeners:dt}),$t?rs.data=$t:($t=JA(g),$t!==null&&(rs.data=$t)))),($t=f7?p7(c,g):g7(c,g))&&(rs=Jg(xe,"onBeforeInput"),0<rs.length&&(dt=new WA("onBeforeInput","beforeinput",null,g,ke),Te.push({event:dt,listeners:rs}),dt.data=$t)),o9(Te,c,xe,g,ke)}OT(Te,h)})}function Rm(c,h,g){return{instance:c,listener:h,currentTarget:g}}function Jg(c,h){for(var g=h+"Capture",b=[];c!==null;){var N=c,k=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||k===null||(N=Jh(c,g),N!=null&&b.unshift(Rm(c,N,k)),N=Jh(c,h),N!=null&&b.push(Rm(c,N,k))),c.tag===3)return b;c=c.return}return[]}function u9(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function BT(c,h,g,b,N){for(var k=h._reactName,U=[];g!==null&&g!==b;){var X=g,ne=X.alternate,xe=X.stateNode;if(X=X.tag,ne!==null&&ne===b)break;X!==5&&X!==26&&X!==27||xe===null||(ne=xe,N?(xe=Jh(g,k),xe!=null&&U.unshift(Rm(g,xe,ne))):N||(xe=Jh(g,k),xe!=null&&U.push(Rm(g,xe,ne)))),g=g.return}U.length!==0&&c.push({event:h,listeners:U})}var h9=/\r\n?/g,m9=/\u0000|\uFFFD/g;function zT(c){return(typeof c=="string"?c:""+c).replace(h9,`
`).replace(m9,"")}function $T(c,h){return h=zT(h),zT(c)===h}function Ts(c,h,g,b,N,k){switch(g){case"children":typeof b=="string"?h==="body"||h==="textarea"&&b===""||Od(c,b):(typeof b=="number"||typeof b=="bigint")&&h!=="body"&&Od(c,""+b);break;case"className":ng(c,"class",b);break;case"tabIndex":ng(c,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":ng(c,g,b);break;case"style":$A(c,b,k);break;case"data":if(h!=="object"){ng(c,"data",b);break}case"src":case"href":if(b===""&&(h!=="a"||g!=="href")){c.removeAttribute(g);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){c.removeAttribute(g);break}b=ig(""+b),c.setAttribute(g,b);break;case"action":case"formAction":if(typeof b=="function"){c.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(g==="formAction"?(h!=="input"&&Ts(c,h,"name",N.name,N,null),Ts(c,h,"formEncType",N.formEncType,N,null),Ts(c,h,"formMethod",N.formMethod,N,null),Ts(c,h,"formTarget",N.formTarget,N,null)):(Ts(c,h,"encType",N.encType,N,null),Ts(c,h,"method",N.method,N,null),Ts(c,h,"target",N.target,N,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){c.removeAttribute(g);break}b=ig(""+b),c.setAttribute(g,b);break;case"onClick":b!=null&&(c.onclick=To);break;case"onScroll":b!=null&&ts("scroll",c);break;case"onScrollEnd":b!=null&&ts("scrollend",c);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"multiple":c.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":c.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){c.removeAttribute("xlink:href");break}g=ig(""+b),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(g,""+b):c.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(g,""):c.removeAttribute(g);break;case"capture":case"download":b===!0?c.setAttribute(g,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?c.setAttribute(g,b):c.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?c.setAttribute(g,b):c.removeAttribute(g);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?c.removeAttribute(g):c.setAttribute(g,b);break;case"popover":ts("beforetoggle",c),ts("toggle",c),sg(c,"popover",b);break;case"xlinkActuate":Eo(c,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Eo(c,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Eo(c,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Eo(c,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Eo(c,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Eo(c,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Eo(c,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Eo(c,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Eo(c,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":sg(c,"is",b);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=$V.get(g)||g,sg(c,g,b))}}function tj(c,h,g,b,N,k){switch(g){case"style":$A(c,b,k);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(g=b.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"children":typeof b=="string"?Od(c,b):(typeof b=="number"||typeof b=="bigint")&&Od(c,""+b);break;case"onScroll":b!=null&&ts("scroll",c);break;case"onScrollEnd":b!=null&&ts("scrollend",c);break;case"onClick":b!=null&&(c.onclick=To);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!RA.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(N=g.endsWith("Capture"),h=g.slice(2,N?g.length-7:void 0),k=c[qn]||null,k=k!=null?k[g]:null,typeof k=="function"&&c.removeEventListener(h,k,N),typeof b=="function")){typeof k!="function"&&k!==null&&(g in c?c[g]=null:c.hasAttribute(g)&&c.removeAttribute(g)),c.addEventListener(h,b,N);break e}g in c?c[g]=b:b===!0?c.setAttribute(g,""):sg(c,g,b)}}}function gr(c,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ts("error",c),ts("load",c);var b=!1,N=!1,k;for(k in g)if(g.hasOwnProperty(k)){var U=g[k];if(U!=null)switch(k){case"src":b=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Ts(c,h,k,U,g,null)}}N&&Ts(c,h,"srcSet",g.srcSet,g,null),b&&Ts(c,h,"src",g.src,g,null);return;case"input":ts("invalid",c);var X=k=U=N=null,ne=null,xe=null;for(b in g)if(g.hasOwnProperty(b)){var ke=g[b];if(ke!=null)switch(b){case"name":N=ke;break;case"type":U=ke;break;case"checked":ne=ke;break;case"defaultChecked":xe=ke;break;case"value":k=ke;break;case"defaultValue":X=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,h));break;default:Ts(c,h,b,ke,g,null)}}OA(c,k,X,ne,xe,U,N,!1);return;case"select":ts("invalid",c),b=U=k=null;for(N in g)if(g.hasOwnProperty(N)&&(X=g[N],X!=null))switch(N){case"value":k=X;break;case"defaultValue":U=X;break;case"multiple":b=X;default:Ts(c,h,N,X,g,null)}h=k,g=U,c.multiple=!!b,h!=null?Ld(c,!!b,h,!1):g!=null&&Ld(c,!!b,g,!0);return;case"textarea":ts("invalid",c),k=N=b=null;for(U in g)if(g.hasOwnProperty(U)&&(X=g[U],X!=null))switch(U){case"value":b=X;break;case"defaultValue":N=X;break;case"children":k=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:Ts(c,h,U,X,g,null)}BA(c,b,N,k);return;case"option":for(ne in g)g.hasOwnProperty(ne)&&(b=g[ne],b!=null)&&(ne==="selected"?c.selected=b&&typeof b!="function"&&typeof b!="symbol":Ts(c,h,ne,b,g,null));return;case"dialog":ts("beforetoggle",c),ts("toggle",c),ts("cancel",c),ts("close",c);break;case"iframe":case"object":ts("load",c);break;case"video":case"audio":for(b=0;b<Pm.length;b++)ts(Pm[b],c);break;case"image":ts("error",c),ts("load",c);break;case"details":ts("toggle",c);break;case"embed":case"source":case"link":ts("error",c),ts("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in g)if(g.hasOwnProperty(xe)&&(b=g[xe],b!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:Ts(c,h,xe,b,g,null)}return;default:if(pw(h)){for(ke in g)g.hasOwnProperty(ke)&&(b=g[ke],b!==void 0&&tj(c,h,ke,b,g,void 0));return}}for(X in g)g.hasOwnProperty(X)&&(b=g[X],b!=null&&Ts(c,h,X,b,g,null))}function f9(c,h,g,b){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,k=null,U=null,X=null,ne=null,xe=null,ke=null;for(_e in g){var Te=g[_e];if(g.hasOwnProperty(_e)&&Te!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":ne=Te;default:b.hasOwnProperty(_e)||Ts(c,h,_e,null,b,Te)}}for(var ye in b){var _e=b[ye];if(Te=g[ye],b.hasOwnProperty(ye)&&(_e!=null||Te!=null))switch(ye){case"type":k=_e;break;case"name":N=_e;break;case"checked":xe=_e;break;case"defaultChecked":ke=_e;break;case"value":U=_e;break;case"defaultValue":X=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,h));break;default:_e!==Te&&Ts(c,h,ye,_e,b,Te)}}mw(c,U,X,ne,xe,ke,k,N);return;case"select":_e=U=X=ye=null;for(k in g)if(ne=g[k],g.hasOwnProperty(k)&&ne!=null)switch(k){case"value":break;case"multiple":_e=ne;default:b.hasOwnProperty(k)||Ts(c,h,k,null,b,ne)}for(N in b)if(k=b[N],ne=g[N],b.hasOwnProperty(N)&&(k!=null||ne!=null))switch(N){case"value":ye=k;break;case"defaultValue":X=k;break;case"multiple":U=k;default:k!==ne&&Ts(c,h,N,k,b,ne)}h=X,g=U,b=_e,ye!=null?Ld(c,!!g,ye,!1):!!b!=!!g&&(h!=null?Ld(c,!!g,h,!0):Ld(c,!!g,g?[]:"",!1));return;case"textarea":_e=ye=null;for(X in g)if(N=g[X],g.hasOwnProperty(X)&&N!=null&&!b.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Ts(c,h,X,null,b,N)}for(U in b)if(N=b[U],k=g[U],b.hasOwnProperty(U)&&(N!=null||k!=null))switch(U){case"value":ye=N;break;case"defaultValue":_e=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==k&&Ts(c,h,U,N,b,k)}FA(c,ye,_e);return;case"option":for(var rt in g)ye=g[rt],g.hasOwnProperty(rt)&&ye!=null&&!b.hasOwnProperty(rt)&&(rt==="selected"?c.selected=!1:Ts(c,h,rt,null,b,ye));for(ne in b)ye=b[ne],_e=g[ne],b.hasOwnProperty(ne)&&ye!==_e&&(ye!=null||_e!=null)&&(ne==="selected"?c.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":Ts(c,h,ne,ye,b,_e));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in g)ye=g[vt],g.hasOwnProperty(vt)&&ye!=null&&!b.hasOwnProperty(vt)&&Ts(c,h,vt,null,b,ye);for(xe in b)if(ye=b[xe],_e=g[xe],b.hasOwnProperty(xe)&&ye!==_e&&(ye!=null||_e!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,h));break;default:Ts(c,h,xe,ye,b,_e)}return;default:if(pw(h)){for(var Ps in g)ye=g[Ps],g.hasOwnProperty(Ps)&&ye!==void 0&&!b.hasOwnProperty(Ps)&&tj(c,h,Ps,void 0,b,ye);for(ke in b)ye=b[ke],_e=g[ke],!b.hasOwnProperty(ke)||ye===_e||ye===void 0&&_e===void 0||tj(c,h,ke,ye,b,_e);return}}for(var de in g)ye=g[de],g.hasOwnProperty(de)&&ye!=null&&!b.hasOwnProperty(de)&&Ts(c,h,de,null,b,ye);for(Te in b)ye=b[Te],_e=g[Te],!b.hasOwnProperty(Te)||ye===_e||ye==null&&_e==null||Ts(c,h,Te,ye,b,_e)}function HT(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p9(){if(typeof performance.getEntriesByType=="function"){for(var c=0,h=0,g=performance.getEntriesByType("resource"),b=0;b<g.length;b++){var N=g[b],k=N.transferSize,U=N.initiatorType,X=N.duration;if(k&&X&&HT(U)){for(U=0,X=N.responseEnd,b+=1;b<g.length;b++){var ne=g[b],xe=ne.startTime;if(xe>X)break;var ke=ne.transferSize,Te=ne.initiatorType;ke&&HT(Te)&&(ne=ne.responseEnd,U+=ke*(ne<X?1:(X-xe)/(ne-xe)))}if(--b,h+=8*(k+U)/(N.duration/1e3),c++,10<c)break}}if(0<c)return h/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var sj=null,nj=null;function ex(c){return c.nodeType===9?c:c.ownerDocument}function UT(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GT(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function rj(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var ij=null;function g9(){var c=window.event;return c&&c.type==="popstate"?c===ij?!1:(ij=c,!0):(ij=null,!1)}var VT=typeof setTimeout=="function"?setTimeout:void 0,x9=typeof clearTimeout=="function"?clearTimeout:void 0,qT=typeof Promise=="function"?Promise:void 0,v9=typeof queueMicrotask=="function"?queueMicrotask:typeof qT<"u"?function(c){return qT.resolve(null).then(c).catch(b9)}:VT;function b9(c){setTimeout(function(){throw c})}function Ll(c){return c==="head"}function WT(c,h){var g=h,b=0;do{var N=g.nextSibling;if(c.removeChild(g),N&&N.nodeType===8)if(g=N.data,g==="/$"||g==="/&"){if(b===0){c.removeChild(N),fu(h);return}b--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")b++;else if(g==="html")Dm(c.ownerDocument.documentElement);else if(g==="head"){g=c.ownerDocument.head,Dm(g);for(var k=g.firstChild;k;){var U=k.nextSibling,X=k.nodeName;k[Zh]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&k.rel.toLowerCase()==="stylesheet"||g.removeChild(k),k=U}}else g==="body"&&Dm(c.ownerDocument.body);g=N}while(g);fu(h)}function KT(c,h){var g=c;c=0;do{var b=g.nextSibling;if(g.nodeType===1?h?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(h?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),b&&b.nodeType===8)if(g=b.data,g==="/$"){if(c===0)break;c--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||c++;g=b}while(g)}function aj(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":aj(g),uw(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}c.removeChild(g)}}function y9(c,h,g,b){for(;c.nodeType===1;){var N=g;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!b&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(b){if(!c[Zh])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(k=c.getAttribute("rel"),k==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(k!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(k=c.getAttribute("src"),(k!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&k&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var k=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===k)return c}else return c;if(c=Qi(c.nextSibling),c===null)break}return null}function w9(c,h,g){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!g||(c=Qi(c.nextSibling),c===null))return null;return c}function YT(c,h){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!h||(c=Qi(c.nextSibling),c===null))return null;return c}function oj(c){return c.data==="$?"||c.data==="$~"}function lj(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function j9(c,h){var g=c.ownerDocument;if(c.data==="$~")c._reactRetry=h;else if(c.data!=="$?"||g.readyState!=="loading")h();else{var b=function(){h(),g.removeEventListener("DOMContentLoaded",b)};g.addEventListener("DOMContentLoaded",b),c._reactRetry=b}}function Qi(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return c}var cj=null;function XT(c){c=c.nextSibling;for(var h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"||g==="/&"){if(h===0)return Qi(c.nextSibling);h--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||h++}c=c.nextSibling}return null}function ZT(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(h===0)return c;h--}else g!=="/$"&&g!=="/&"||h++}c=c.previousSibling}return null}function QT(c,h,g){switch(h=ex(g),c){case"html":if(c=h.documentElement,!c)throw Error(r(452));return c;case"head":if(c=h.head,!c)throw Error(r(453));return c;case"body":if(c=h.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Dm(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);uw(c)}var Ji=new Map,JT=new Set;function tx(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var qo=V.d;V.d={f:S9,r:_9,D:N9,C:C9,L:k9,m:A9,X:T9,S:E9,M:P9};function S9(){var c=qo.f(),h=qg();return c||h}function _9(c){var h=Dd(c);h!==null&&h.tag===5&&h.type==="form"?gE(h):qo.r(c)}var uu=typeof document>"u"?null:document;function eP(c,h,g){var b=uu;if(b&&typeof h=="string"&&h){var N=Vi(h);N='link[rel="'+c+'"][href="'+N+'"]',typeof g=="string"&&(N+='[crossorigin="'+g+'"]'),JT.has(N)||(JT.add(N),c={rel:c,crossOrigin:g,href:h},b.querySelector(N)===null&&(h=b.createElement("link"),gr(h,"link",c),Wn(h),b.head.appendChild(h)))}}function N9(c){qo.D(c),eP("dns-prefetch",c,null)}function C9(c,h){qo.C(c,h),eP("preconnect",c,h)}function k9(c,h,g){qo.L(c,h,g);var b=uu;if(b&&c&&h){var N='link[rel="preload"][as="'+Vi(h)+'"]';h==="image"&&g&&g.imageSrcSet?(N+='[imagesrcset="'+Vi(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(N+='[imagesizes="'+Vi(g.imageSizes)+'"]')):N+='[href="'+Vi(c)+'"]';var k=N;switch(h){case"style":k=hu(c);break;case"script":k=mu(c)}Ji.has(k)||(c=f({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:c,as:h},g),Ji.set(k,c),b.querySelector(N)!==null||h==="style"&&b.querySelector(Im(k))||h==="script"&&b.querySelector(Mm(k))||(h=b.createElement("link"),gr(h,"link",c),Wn(h),b.head.appendChild(h)))}}function A9(c,h){qo.m(c,h);var g=uu;if(g&&c){var b=h&&typeof h.as=="string"?h.as:"script",N='link[rel="modulepreload"][as="'+Vi(b)+'"][href="'+Vi(c)+'"]',k=N;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=mu(c)}if(!Ji.has(k)&&(c=f({rel:"modulepreload",href:c},h),Ji.set(k,c),g.querySelector(N)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Mm(k)))return}b=g.createElement("link"),gr(b,"link",c),Wn(b),g.head.appendChild(b)}}}function E9(c,h,g){qo.S(c,h,g);var b=uu;if(b&&c){var N=Id(b).hoistableStyles,k=hu(c);h=h||"default";var U=N.get(k);if(!U){var X={loading:0,preload:null};if(U=b.querySelector(Im(k)))X.loading=5;else{c=f({rel:"stylesheet",href:c,"data-precedence":h},g),(g=Ji.get(k))&&dj(c,g);var ne=U=b.createElement("link");Wn(ne),gr(ne,"link",c),ne._p=new Promise(function(xe,ke){ne.onload=xe,ne.onerror=ke}),ne.addEventListener("load",function(){X.loading|=1}),ne.addEventListener("error",function(){X.loading|=2}),X.loading|=4,sx(U,h,b)}U={type:"stylesheet",instance:U,count:1,state:X},N.set(k,U)}}}function T9(c,h){qo.X(c,h);var g=uu;if(g&&c){var b=Id(g).hoistableScripts,N=mu(c),k=b.get(N);k||(k=g.querySelector(Mm(N)),k||(c=f({src:c,async:!0},h),(h=Ji.get(N))&&uj(c,h),k=g.createElement("script"),Wn(k),gr(k,"link",c),g.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},b.set(N,k))}}function P9(c,h){qo.M(c,h);var g=uu;if(g&&c){var b=Id(g).hoistableScripts,N=mu(c),k=b.get(N);k||(k=g.querySelector(Mm(N)),k||(c=f({src:c,async:!0,type:"module"},h),(h=Ji.get(N))&&uj(c,h),k=g.createElement("script"),Wn(k),gr(k,"link",c),g.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},b.set(N,k))}}function tP(c,h,g,b){var N=(N=te.current)?tx(N):null;if(!N)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=hu(g.href),g=Id(N).hoistableStyles,b=g.get(h),b||(b={type:"style",instance:null,count:0,state:null},g.set(h,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){c=hu(g.href);var k=Id(N).hoistableStyles,U=k.get(c);if(U||(N=N.ownerDocument||N,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(c,U),(k=N.querySelector(Im(c)))&&!k._p&&(U.instance=k,U.state.loading=5),Ji.has(c)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Ji.set(c,g),k||R9(N,c,g,U.state))),h&&b===null)throw Error(r(528,""));return U}if(h&&b!==null)throw Error(r(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=mu(g),g=Id(N).hoistableScripts,b=g.get(h),b||(b={type:"script",instance:null,count:0,state:null},g.set(h,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function hu(c){return'href="'+Vi(c)+'"'}function Im(c){return'link[rel="stylesheet"]['+c+"]"}function sP(c){return f({},c,{"data-precedence":c.precedence,precedence:null})}function R9(c,h,g,b){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?b.loading=1:(h=c.createElement("link"),b.preload=h,h.addEventListener("load",function(){return b.loading|=1}),h.addEventListener("error",function(){return b.loading|=2}),gr(h,"link",g),Wn(h),c.head.appendChild(h))}function mu(c){return'[src="'+Vi(c)+'"]'}function Mm(c){return"script[async]"+c}function nP(c,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var b=c.querySelector('style[data-href~="'+Vi(g.href)+'"]');if(b)return h.instance=b,Wn(b),b;var N=f({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return b=(c.ownerDocument||c).createElement("style"),Wn(b),gr(b,"style",N),sx(b,g.precedence,c),h.instance=b;case"stylesheet":N=hu(g.href);var k=c.querySelector(Im(N));if(k)return h.state.loading|=4,h.instance=k,Wn(k),k;b=sP(g),(N=Ji.get(N))&&dj(b,N),k=(c.ownerDocument||c).createElement("link"),Wn(k);var U=k;return U._p=new Promise(function(X,ne){U.onload=X,U.onerror=ne}),gr(k,"link",b),h.state.loading|=4,sx(k,g.precedence,c),h.instance=k;case"script":return k=mu(g.src),(N=c.querySelector(Mm(k)))?(h.instance=N,Wn(N),N):(b=g,(N=Ji.get(k))&&(b=f({},g),uj(b,N)),c=c.ownerDocument||c,N=c.createElement("script"),Wn(N),gr(N,"link",b),c.head.appendChild(N),h.instance=N);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(b=h.instance,h.state.loading|=4,sx(b,g.precedence,c));return h.instance}function sx(c,h,g){for(var b=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=b.length?b[b.length-1]:null,k=N,U=0;U<b.length;U++){var X=b[U];if(X.dataset.precedence===h)k=X;else if(k!==N)break}k?k.parentNode.insertBefore(c,k.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(c,h.firstChild))}function dj(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function uj(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var nx=null;function rP(c,h,g){if(nx===null){var b=new Map,N=nx=new Map;N.set(g,b)}else N=nx,b=N.get(g),b||(b=new Map,N.set(g,b));if(b.has(c))return b;for(b.set(c,null),g=g.getElementsByTagName(c),N=0;N<g.length;N++){var k=g[N];if(!(k[Zh]||k[_s]||c==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var U=k.getAttribute(h)||"";U=c+U;var X=b.get(U);X?X.push(k):b.set(U,[k])}}return b}function iP(c,h,g){c=c.ownerDocument||c,c.head.insertBefore(g,h==="title"?c.querySelector("head > title"):null)}function D9(c,h,g){if(g===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(c=h.disabled,typeof h.precedence=="string"&&c==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function aP(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function I9(c,h,g,b){if(g.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var N=hu(b.href),k=h.querySelector(Im(N));if(k){h=k._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(c.count++,c=rx.bind(c),h.then(c,c)),g.state.loading|=4,g.instance=k,Wn(k);return}k=h.ownerDocument||h,b=sP(b),(N=Ji.get(N))&&dj(b,N),k=k.createElement("link"),Wn(k);var U=k;U._p=new Promise(function(X,ne){U.onload=X,U.onerror=ne}),gr(k,"link",b),g.instance=k}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(g,h),(h=g.state.preload)&&(g.state.loading&3)===0&&(c.count++,g=rx.bind(c),h.addEventListener("load",g),h.addEventListener("error",g))}}var hj=0;function M9(c,h){return c.stylesheets&&c.count===0&&ax(c,c.stylesheets),0<c.count||0<c.imgCount?function(g){var b=setTimeout(function(){if(c.stylesheets&&ax(c,c.stylesheets),c.unsuspend){var k=c.unsuspend;c.unsuspend=null,k()}},6e4+h);0<c.imgBytes&&hj===0&&(hj=62500*p9());var N=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&ax(c,c.stylesheets),c.unsuspend)){var k=c.unsuspend;c.unsuspend=null,k()}},(c.imgBytes>hj?50:800)+h);return c.unsuspend=g,function(){c.unsuspend=null,clearTimeout(b),clearTimeout(N)}}:null}function rx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ax(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var ix=null;function ax(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,ix=new Map,h.forEach(L9,c),ix=null,rx.call(c))}function L9(c,h){if(!(h.state.loading&4)){var g=ix.get(c);if(g)var b=g.get(null);else{g=new Map,ix.set(c,g);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<N.length;k++){var U=N[k];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(g.set(U.dataset.precedence,U),b=U)}b&&g.set(null,b)}N=h.instance,U=N.getAttribute("data-precedence"),k=g.get(U)||b,k===b&&g.set(null,N),g.set(U,N),this.count++,b=rx.bind(this),N.addEventListener("load",b),N.addEventListener("error",b),k?k.parentNode.insertBefore(N,k.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),h.state.loading|=4}}var Lm={$$typeof:j,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function O9(c,h,g,b,N,k,U,X,ne){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.hiddenUpdates=vs(null),this.identifierPrefix=b,this.onUncaughtError=N,this.onCaughtError=k,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function oP(c,h,g,b,N,k,U,X,ne,xe,ke,Te){return c=new O9(c,h,g,U,ne,xe,ke,Te,X),h=1,k===!0&&(h|=24),k=wi(3,null,null,h),c.current=k,k.stateNode=c,h=Vw(),h.refCount++,c.pooledCache=h,h.refCount++,k.memoizedState={element:b,isDehydrated:g,cache:h},Yw(k),c}function lP(c){return c?(c=Gd,c):Gd}function cP(c,h,g,b,N,k){N=lP(N),b.context===null?b.context=N:b.pendingContext=N,b=Nl(h),b.payload={element:g},k=k===void 0?null:k,k!==null&&(b.callback=k),g=Cl(c,b,h),g!==null&&(di(g,c,h),fm(g,c,h))}function dP(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<h?g:h}}function mj(c,h){dP(c,h),(c=c.alternate)&&dP(c,h)}function uP(c){if(c.tag===13||c.tag===31){var h=_c(c,67108864);h!==null&&di(h,c,67108864),mj(c,67108864)}}function hP(c){if(c.tag===13||c.tag===31){var h=Ci();h=gt(h);var g=_c(c,h);g!==null&&di(g,c,h),mj(c,h)}}var ox=!0;function F9(c,h,g,b){var N=I.T;I.T=null;var k=V.p;try{V.p=2,fj(c,h,g,b)}finally{V.p=k,I.T=N}}function B9(c,h,g,b){var N=I.T;I.T=null;var k=V.p;try{V.p=8,fj(c,h,g,b)}finally{V.p=k,I.T=N}}function fj(c,h,g,b){if(ox){var N=pj(b);if(N===null)ej(c,h,b,lx,g),fP(c,b);else if($9(N,c,h,g,b))b.stopPropagation();else if(fP(c,b),h&4&&-1<z9.indexOf(c)){for(;N!==null;){var k=Dd(N);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var U=me(k.pendingLanes);if(U!==0){var X=k;for(X.pendingLanes|=2,X.entangledLanes|=2;U;){var ne=1<<31-Ft(U);X.entanglements[1]|=ne,U&=~ne}Va(k),(js&6)===0&&(Gg=Ce()+500,Tm(0))}}break;case 31:case 13:X=_c(k,2),X!==null&&di(X,k,2),qg(),mj(k,2)}if(k=pj(b),k===null&&ej(c,h,b,lx,g),k===N)break;N=k}N!==null&&b.stopPropagation()}else ej(c,h,b,null,g)}}function pj(c){return c=xw(c),gj(c)}var lx=null;function gj(c){if(lx=null,c=Rd(c),c!==null){var h=a(c);if(h===null)c=null;else{var g=h.tag;if(g===13){if(c=o(h),c!==null)return c;c=null}else if(g===31){if(c=l(h),c!==null)return c;c=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return lx=c,null}function mP(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(It()){case be:return 2;case ve:return 8;case Me:case nt:return 32;case jt:return 268435456;default:return 32}default:return 32}}var xj=!1,Ol=null,Fl=null,Bl=null,Om=new Map,Fm=new Map,zl=[],z9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fP(c,h){switch(c){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":Fl=null;break;case"mouseover":case"mouseout":Bl=null;break;case"pointerover":case"pointerout":Om.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fm.delete(h.pointerId)}}function Bm(c,h,g,b,N,k){return c===null||c.nativeEvent!==k?(c={blockedOn:h,domEventName:g,eventSystemFlags:b,nativeEvent:k,targetContainers:[N]},h!==null&&(h=Dd(h),h!==null&&uP(h)),c):(c.eventSystemFlags|=b,h=c.targetContainers,N!==null&&h.indexOf(N)===-1&&h.push(N),c)}function $9(c,h,g,b,N){switch(h){case"focusin":return Ol=Bm(Ol,c,h,g,b,N),!0;case"dragenter":return Fl=Bm(Fl,c,h,g,b,N),!0;case"mouseover":return Bl=Bm(Bl,c,h,g,b,N),!0;case"pointerover":var k=N.pointerId;return Om.set(k,Bm(Om.get(k)||null,c,h,g,b,N)),!0;case"gotpointercapture":return k=N.pointerId,Fm.set(k,Bm(Fm.get(k)||null,c,h,g,b,N)),!0}return!1}function pP(c){var h=Rd(c.target);if(h!==null){var g=a(h);if(g!==null){if(h=g.tag,h===13){if(h=o(g),h!==null){c.blockedOn=h,ri(c.priority,function(){hP(g)});return}}else if(h===31){if(h=l(g),h!==null){c.blockedOn=h,ri(c.priority,function(){hP(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function cx(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var g=pj(c.nativeEvent);if(g===null){g=c.nativeEvent;var b=new g.constructor(g.type,g);gw=b,g.target.dispatchEvent(b),gw=null}else return h=Dd(g),h!==null&&uP(h),c.blockedOn=g,!1;h.shift()}return!0}function gP(c,h,g){cx(c)&&g.delete(h)}function H9(){xj=!1,Ol!==null&&cx(Ol)&&(Ol=null),Fl!==null&&cx(Fl)&&(Fl=null),Bl!==null&&cx(Bl)&&(Bl=null),Om.forEach(gP),Fm.forEach(gP)}function dx(c,h){c.blockedOn===h&&(c.blockedOn=null,xj||(xj=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,H9)))}var ux=null;function xP(c){ux!==c&&(ux=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ux===c&&(ux=null);for(var h=0;h<c.length;h+=3){var g=c[h],b=c[h+1],N=c[h+2];if(typeof b!="function"){if(gj(b||g)===null)continue;break}var k=Dd(g);k!==null&&(c.splice(h,3),h-=3,p0(k,{pending:!0,data:N,method:g.method,action:b},b,N))}}))}function fu(c){function h(ne){return dx(ne,c)}Ol!==null&&dx(Ol,c),Fl!==null&&dx(Fl,c),Bl!==null&&dx(Bl,c),Om.forEach(h),Fm.forEach(h);for(var g=0;g<zl.length;g++){var b=zl[g];b.blockedOn===c&&(b.blockedOn=null)}for(;0<zl.length&&(g=zl[0],g.blockedOn===null);)pP(g),g.blockedOn===null&&zl.shift();if(g=(c.ownerDocument||c).$$reactFormReplay,g!=null)for(b=0;b<g.length;b+=3){var N=g[b],k=g[b+1],U=N[qn]||null;if(typeof k=="function")U||xP(g);else if(U){var X=null;if(k&&k.hasAttribute("formAction")){if(N=k,U=k[qn]||null)X=U.formAction;else if(gj(N)!==null)continue}else X=U.action;typeof X=="function"?g[b+1]=X:(g.splice(b,3),b-=3),xP(g)}}}function vP(){function c(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(U){return N=U})},focusReset:"manual",scroll:"manual"})}function h(){N!==null&&(N(),N=null),b||setTimeout(g,20)}function g(){if(!b&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,N=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(g,100),function(){b=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),N!==null&&(N(),N=null)}}}function vj(c){this._internalRoot=c}hx.prototype.render=vj.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));var g=h.current,b=Ci();cP(g,b,c,h,null,null)},hx.prototype.unmount=vj.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;cP(c.current,2,null,c,null,null),qg(),h[Ao]=null}};function hx(c){this._internalRoot=c}hx.prototype.unstable_scheduleHydration=function(c){if(c){var h=Vn();c={blockedOn:null,target:c,priority:h};for(var g=0;g<zl.length&&h!==0&&h<zl[g].priority;g++);zl.splice(g,0,c),g===0&&pP(c)}};var bP=t.version;if(bP!=="19.2.3")throw Error(r(527,bP,"19.2.3"));V.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=d(h),c=c!==null?m(c):null,c=c===null?null:c.stateNode,c};var U9={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mx.isDisabled&&mx.supportsFiber)try{Lt=mx.inject(U9),ds=mx}catch{}}return Um.createRoot=function(c,h){if(!i(c))throw Error(r(299));var g=!1,b="",N=CE,k=kE,U=AE;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(N=h.onUncaughtError),h.onCaughtError!==void 0&&(k=h.onCaughtError),h.onRecoverableError!==void 0&&(U=h.onRecoverableError)),h=oP(c,1,!1,null,null,g,b,null,N,k,U,vP),c[Ao]=h.current,J0(c),new vj(h)},Um.hydrateRoot=function(c,h,g){if(!i(c))throw Error(r(299));var b=!1,N="",k=CE,U=kE,X=AE,ne=null;return g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onUncaughtError!==void 0&&(k=g.onUncaughtError),g.onCaughtError!==void 0&&(U=g.onCaughtError),g.onRecoverableError!==void 0&&(X=g.onRecoverableError),g.formState!==void 0&&(ne=g.formState)),h=oP(c,1,!0,h,g??null,b,N,ne,k,U,X,vP),h.context=lP(null),g=h.current,b=Ci(),b=gt(b),N=Nl(b),N.callback=null,Cl(g,N,b),g=b,h.current.lanes=g,Hs(h,g),Va(h),c[Ao]=h.current,J0(c),new hx(h)},Um.version="19.2.3",Um}var ZR;function sne(){if(ZR)return zj.exports;ZR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zj.exports=tne(),zj.exports}var nne=sne();const rne=gh(nne);const ine=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ane=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,r)=>r?r.toUpperCase():s.toLowerCase()),QR=e=>{const t=ane(e);return t.charAt(0).toUpperCase()+t.slice(1)},K3=(...e)=>e.filter((t,s,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===s).join(" ").trim(),one=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var lne={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cne=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},u)=>p.createElement("svg",{ref:u,...lne,width:t,height:t,stroke:e,strokeWidth:r?Number(s)*24/Number(t):s,className:K3("lucide",i),...!a&&!one(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,m])=>p.createElement(d,m)),...Array.isArray(a)?a:[a]]));const Se=(e,t)=>{const s=p.forwardRef(({className:r,...i},a)=>p.createElement(cne,{ref:a,iconNode:t,className:K3(`lucide-${ine(QR(e))}`,`lucide-${e}`,r),...i}));return s.displayName=QR(e),s};const dne=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Vb=Se("activity",dne);const une=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],td=Se("archive",une);const hne=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],Gj=Se("arrow-down-to-line",hne);const mne=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fne=Se("arrow-left",mne);const pne=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],n1=Se("arrow-right",pne);const gne=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xne=Se("bell",gne);const vne=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],jp=Se("book-open",vne);const bne=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],sd=Se("bot",bne);const yne=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],wne=Se("box",yne);const jne=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Sne=Se("brain-circuit",jne);const _ne=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Bi=Se("brain",_ne);const Nne=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],jh=Se("bug",Nne);const Cne=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],kne=Se("building",Cne);const Ane=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Y3=Se("calendar",Ane);const Ene=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Tne=Se("chart-column",Ene);const Pne=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Ja=Se("check-check",Pne);const Rne=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Pt=Se("check",Rne);const Dne=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bt=Se("chevron-down",Dne);const Ine=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xt=Se("chevron-right",Ine);const Mne=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Hi=Se("chevron-up",Mne);const Lne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ke=Se("circle-alert",Lne);const One=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ys=Se("circle-check-big",One);const Fne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xe=Se("circle-check",Fne);const Bne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],zne=Se("circle-dot",Bne);const $ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hne=Se("circle-question-mark",$ne);const Une=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],yn=Se("circle-x",Une);const Gne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yo=Se("circle",Gne);const Vne=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],X3=Se("clipboard-list",Vne);const qne=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cr=Se("clock",qne);const Wne=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],qb=Se("code-xml",Wne);const Kne=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],lr=Se("code",Kne);const Yne=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],Xne=Se("cog",Yne);const Zne=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],sh=Se("copy",Zne);const Qne=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Jne=Se("cpu",Qne);const ere=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],tre=Se("credit-card",ere);const sre=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],oc=Se("database",sre);const nre=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],jn=Se("download",nre);const rre=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Z3=Se("ellipsis-vertical",rre);const ire=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Zt=Se("external-link",ire);const are=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],nr=Se("eye-off",are);const ore=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ws=Se("eye",ore);const lre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Q3=Se("file-braces",lre);const cre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],J3=Se("file-check",cre);const dre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],Ms=Se("file-code",dre);const ure=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M9 10h6",key:"9gxzsh"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"M9 17h6",key:"r8uit2"}]],r1=Se("file-diff",ure);const hre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],mre=Se("file-down",hre);const fre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],pre=Se("file-image",fre);const gre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$n=Se("file-text",gre);const xre=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],i1=Se("file",xre);const vre=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],bre=Se("flask-conical",vre);const yre=[["path",{d:"M18 19a5 5 0 0 1-5-5v8",key:"sz5oeg"}],["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]],wre=Se("folder-git-2",yre);const jre=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],Hf=Se("folder-git",jre);const Sre=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Xr=Se("folder-open",Sre);const _re=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],eO=Se("folder-plus",_re);const Nre=[["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.9-1.9",key:"1g2n9r"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}]],a1=Se("folder-search",Nre);const Cre=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],ol=Se("folder-tree",Cre);const kre=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"m9.5 10.5 5 5",key:"ra9qjz"}],["path",{d:"m14.5 10.5-5 5",key:"l2rkpq"}]],Gv=Se("folder-x",kre);const Are=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Uf=Se("folder",Are);const Ere=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Wb=Se("funnel",Ere);const Tre=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Sp=Se("gauge",Tre);const Pre=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],an=Se("git-branch",Pre);const Rre=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Kb=Se("git-commit-horizontal",Rre);const Dre=[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]],Ire=Se("git-fork",Dre);const Mre=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],ua=Se("git-merge",Mre);const Lre=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],Js=Se("git-pull-request",Lre);const Ore=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],qr=Se("github",Ore);const Fre=[["path",{d:"m22 13.29-3.33-10a.42.42 0 0 0-.14-.18.38.38 0 0 0-.22-.11.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18l-2.26 6.67H8.32L6.1 3.26a.42.42 0 0 0-.1-.18.38.38 0 0 0-.26-.08.39.39 0 0 0-.23.07.42.42 0 0 0-.14.18L2 13.29a.74.74 0 0 0 .27.83L12 21l9.69-6.88a.71.71 0 0 0 .31-.83Z",key:"148pdi"}]],Yb=Se("gitlab",Fre);const Bre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wn=Se("globe",Bre);const zre=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 12h18",key:"1i2n21"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]],$re=Se("grid-2x2",zre);const Hre=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ure=Se("grip-vertical",Hre);const Gre=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],tO=Se("hard-drive",Gre);const Vre=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],M_=Se("history",Vre);const qre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ec=Se("image",qre);const Wre=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],JR=Se("import",Wre);const Kre=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],L_=Se("inbox",Kre);const Yre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_r=Se("info",Yre);const Xre=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],sO=Se("key-round",Xre);const Zre=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],io=Se("key",Zre);const Qre=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_f=Se("layers",Qre);const Jre=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],eie=Se("layout-grid",Jre);const tie=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],zi=Se("lightbulb",tie);const sie=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],eD=Se("link",sie);const nie=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],Xb=Se("list-checks",nie);const rie=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Uu=Se("list-todo",rie);const iie=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],we=Se("loader-circle",iie);const aie=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ll=Se("lock",aie);const oie=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Zb=Se("log-in",oie);const lie=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cie=Se("mail",lie);const die=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],o1=Se("map",die);const uie=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],hie=Se("maximize-2",uie);const mie=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Sh=Se("message-circle",mie);const fie=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],nh=Se("message-square",fie);const pie=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],gie=Se("minimize-2",pie);const xie=[["path",{d:"M5 12h14",key:"1ays0h"}]],Qb=Se("minus",xie);const vie=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],_h=Se("monitor",vie);const bie=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],yie=Se("moon",bie);const wie=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jb=Se("package",wie);const jie=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_p=Se("palette",jie);const Sie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],_ie=Se("panel-left-close",Sie);const Nie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Cie=Se("panel-left",Nie);const kie=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],Aie=Se("party-popper",kie);const Eie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],fl=Se("pencil",Eie);const Tie=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Zr=Se("play",Tie);const Pie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fs=Se("plus",Pie);const Rie=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Die=Se("radio",Rie);const Iie=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],We=Se("refresh-cw",Iie);const Mie=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Vj=Se("rocket",Mie);const Lie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],wo=Se("rotate-ccw",Lie);const Oie=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Fie=Se("route",Oie);const Bie=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nO=Se("save",Bie);const zie=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],rh=Se("scale",zie);const $ie=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Nr=Se("search",$ie);const Hie=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Np=Se("send",Hie);const Uie=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],so=Se("server",Uie);const Gie=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ey=Se("settings",Gie);const Vie=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Sd=Se("settings-2",Vie);const qie=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],xa=Se("shield",qie);const Wie=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Vv=Se("sliders-vertical",Wie);const Kie=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Yie=Se("smartphone",Kie);const Xie=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qt=Se("sparkles",Xie);const Zie=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_d=Se("square-check-big",Zie);const Qie=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]],rO=Se("square-minus",Qie);const Jie=[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]],iO=Se("square-terminal",Jie);const eae=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jo=Se("square",eae);const tae=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ih=Se("star",tae);const sae=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],nae=Se("sun",sae);const rae=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],qv=Se("tag",rae);const iae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ah=Se("target",iae);const aae=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],dr=Se("terminal",aae);const oae=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],aO=Se("test-tube",oae);const lae=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],cae=Se("thumbs-up",lae);const dae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],or=Se("trash-2",dae);const uae=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gi=Se("trending-up",uae);const hae=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tt=Se("triangle-alert",hae);const mae=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qr=Se("user",mae);const fae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Oa=Se("users",fae);const pae=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Wv=Se("wand-sparkles",pae);const gae=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],xae=Se("wifi",gae);const vae=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],uo=Se("wrench",vae);const bae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ss=Se("x",bae);const yae=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vi=Se("zap",yae);const wae=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],jae=Se("zoom-in",wae);const Sae=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],_ae=Se("zoom-out",Sae);var tD={};const oO=()=>typeof process<"u"&&tD?tD.DEBUG==="true":!1,ir=(...e)=>{oO()&&console.warn(...e)},yr=(...e)=>{oO()&&console.error(...e)};var Di=W3();const Nae=gh(Di);function Cae(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return p.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const ty=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Nh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function l1(e){return"nodeType"in e}function ei(e){var t,s;return e?Nh(e)?e:l1(e)&&(t=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function c1(e){const{Document:t}=ei(e);return e instanceof t}function Cp(e){return Nh(e)?!1:e instanceof ei(e).HTMLElement}function lO(e){return e instanceof ei(e).SVGElement}function Ch(e){return e?Nh(e)?e.document:l1(e)?c1(e)?e:Cp(e)||lO(e)?e.ownerDocument:document:document:document}const Pa=ty?p.useLayoutEffect:p.useEffect;function sy(e){const t=p.useRef(e);return Pa(()=>{t.current=e}),p.useCallback(function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function kae(){const e=p.useRef(null),t=p.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),s=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,s]}function Gf(e,t){t===void 0&&(t=[e]);const s=p.useRef(e);return Pa(()=>{s.current!==e&&(s.current=e)},t),s}function kp(e,t){const s=p.useRef();return p.useMemo(()=>{const r=e(s.current);return s.current=r,r},[...t])}function Kv(e){const t=sy(e),s=p.useRef(null),r=p.useCallback(i=>{i!==s.current&&t?.(i,s.current),s.current=i},[]);return[s,r]}function Yv(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let qj={};function Ap(e,t){return p.useMemo(()=>{if(t)return t;const s=qj[e]==null?0:qj[e]+1;return qj[e]=s,e+"-"+s},[e,t])}function cO(e){return function(t){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((a,o)=>{const l=Object.entries(o);for(const[u,d]of l){const m=a[u];m!=null&&(a[u]=m+e*d)}return a},{...t})}}const Gu=cO(1),Vf=cO(-1);function Aae(e){return"clientX"in e&&"clientY"in e}function ny(e){if(!e)return!1;const{KeyboardEvent:t}=ei(e.target);return t&&e instanceof t}function Eae(e){if(!e)return!1;const{TouchEvent:t}=ei(e.target);return t&&e instanceof t}function Xv(e){if(Eae(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:s}=e.touches[0];return{x:t,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:s}=e.changedTouches[0];return{x:t,y:s}}}return Aae(e)?{x:e.clientX,y:e.clientY}:null}const Ra=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:s}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:s}=e;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Ra.Translate.toString(e),Ra.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:s,easing:r}=e;return t+" "+s+"ms "+r}}}),sD="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Tae(e){return e.matches(sD)?e:e.querySelector(sD)}const Pae={display:"none"};function Rae(e){let{id:t,value:s}=e;return Vt.createElement("div",{id:t,style:Pae},s)}function Dae(e){let{id:t,announcement:s,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Vt.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},s)}function Iae(){const[e,t]=p.useState("");return{announce:p.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const dO=p.createContext(null);function Mae(e){const t=p.useContext(dO);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Lae(){const[e]=p.useState(()=>new Set),t=p.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[p.useCallback(r=>{let{type:i,event:a}=r;e.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,a)})},[e]),t]}const Oae={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fae={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Bae(e){let{announcements:t=Fae,container:s,hiddenTextDescribedById:r,screenReaderInstructions:i=Oae}=e;const{announce:a,announcement:o}=Iae(),l=Ap("DndLiveRegion"),[u,d]=p.useState(!1);if(p.useEffect(()=>{d(!0)},[]),Mae(p.useMemo(()=>({onDragStart(f){let{active:x}=f;a(t.onDragStart({active:x}))},onDragMove(f){let{active:x,over:v}=f;t.onDragMove&&a(t.onDragMove({active:x,over:v}))},onDragOver(f){let{active:x,over:v}=f;a(t.onDragOver({active:x,over:v}))},onDragEnd(f){let{active:x,over:v}=f;a(t.onDragEnd({active:x,over:v}))},onDragCancel(f){let{active:x,over:v}=f;a(t.onDragCancel({active:x,over:v}))}}),[a,t])),!u)return null;const m=Vt.createElement(Vt.Fragment,null,Vt.createElement(Rae,{id:r,value:i.draggable}),Vt.createElement(Dae,{id:l,announcement:o}));return s?Di.createPortal(m,s):m}var Bn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Bn||(Bn={}));function Zv(){}function ud(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ry(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return p.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Da=Object.freeze({x:0,y:0});function uO(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function zae(e,t){const s=Xv(e);if(!s)return"0 0";const r={x:(s.x-t.left)/t.width*100,y:(s.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function hO(e,t){let{data:{value:s}}=e,{data:{value:r}}=t;return s-r}function $ae(e,t){let{data:{value:s}}=e,{data:{value:r}}=t;return r-s}function nD(e){let{left:t,top:s,height:r,width:i}=e;return[{x:t,y:s},{x:t+i,y:s},{x:t,y:s+r},{x:t+i,y:s+r}]}function mO(e,t){if(!e||e.length===0)return null;const[s]=e;return s[t]}function rD(e,t,s){return t===void 0&&(t=e.left),s===void 0&&(s=e.top),{x:t+e.width*.5,y:s+e.height*.5}}const fO=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:r}=e;const i=rD(t,t.left,t.top),a=[];for(const o of r){const{id:l}=o,u=s.get(l);if(u){const d=uO(rD(u),i);a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(hO)},d1=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:r}=e;const i=nD(t),a=[];for(const o of r){const{id:l}=o,u=s.get(l);if(u){const d=nD(u),m=i.reduce((x,v,y)=>x+uO(d[y],v),0),f=Number((m/4).toFixed(4));a.push({id:l,data:{droppableContainer:o,value:f}})}}return a.sort(hO)};function Hae(e,t){const s=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=i-r,l=a-s;if(r<i&&s<a){const u=t.width*t.height,d=e.width*e.height,m=o*l,f=m/(u+d-m);return Number(f.toFixed(4))}return 0}const Uae=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:r}=e;const i=[];for(const a of r){const{id:o}=a,l=s.get(o);if(l){const u=Hae(l,t);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort($ae)};function Gae(e,t,s){return{...e,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function pO(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Da}function Vae(e){return function(s){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...s})}}const qae=Vae(1);function gO(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Wae(e,t,s){const r=gO(t);if(!r)return e;const{scaleX:i,scaleY:a,x:o,y:l}=r,u=e.left-o-(1-i)*parseFloat(s),d=e.top-l-(1-a)*parseFloat(s.slice(s.indexOf(" ")+1)),m=i?e.width/i:e.width,f=a?e.height/a:e.height;return{width:m,height:f,top:d,right:u+m,bottom:d+f,left:u}}const Kae={ignoreTransform:!1};function kh(e,t){t===void 0&&(t=Kae);let s=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:m}=ei(e).getComputedStyle(e);d&&(s=Wae(s,d,m))}const{top:r,left:i,width:a,height:o,bottom:l,right:u}=s;return{top:r,left:i,width:a,height:o,bottom:l,right:u}}function iD(e){return kh(e,{ignoreTransform:!0})}function Yae(e){const t=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function Xae(e,t){return t===void 0&&(t=ei(e).getComputedStyle(e)),t.position==="fixed"}function Zae(e,t){t===void 0&&(t=ei(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?s.test(a):!1})}function iy(e,t){const s=[];function r(i){if(t!=null&&s.length>=t||!i)return s;if(c1(i)&&i.scrollingElement!=null&&!s.includes(i.scrollingElement))return s.push(i.scrollingElement),s;if(!Cp(i)||lO(i)||s.includes(i))return s;const a=ei(e).getComputedStyle(i);return i!==e&&Zae(i,a)&&s.push(i),Xae(i,a)?s:r(i.parentNode)}return e?r(e):s}function xO(e){const[t]=iy(e,1);return t??null}function Wj(e){return!ty||!e?null:Nh(e)?e:l1(e)?c1(e)||e===Ch(e).scrollingElement?window:Cp(e)?e:null:null}function vO(e){return Nh(e)?e.scrollX:e.scrollLeft}function bO(e){return Nh(e)?e.scrollY:e.scrollTop}function O_(e){return{x:vO(e),y:bO(e)}}var Xn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Xn||(Xn={}));function yO(e){return!ty||!e?!1:e===document.scrollingElement}function wO(e){const t={x:0,y:0},s=yO(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:a,isBottom:o,isRight:l,maxScroll:r,minScroll:t}}const Qae={x:.2,y:.2};function Jae(e,t,s,r,i){let{top:a,left:o,right:l,bottom:u}=s;r===void 0&&(r=10),i===void 0&&(i=Qae);const{isTop:d,isBottom:m,isLeft:f,isRight:x}=wO(e),v={x:0,y:0},y={x:0,y:0},w={height:t.height*i.y,width:t.width*i.x};return!d&&a<=t.top+w.height?(v.y=Xn.Backward,y.y=r*Math.abs((t.top+w.height-a)/w.height)):!m&&u>=t.bottom-w.height&&(v.y=Xn.Forward,y.y=r*Math.abs((t.bottom-w.height-u)/w.height)),!x&&l>=t.right-w.width?(v.x=Xn.Forward,y.x=r*Math.abs((t.right-w.width-l)/w.width)):!f&&o<=t.left+w.width&&(v.x=Xn.Backward,y.x=r*Math.abs((t.left+w.width-o)/w.width)),{direction:v,speed:y}}function eoe(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:t,left:s,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:s,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function jO(e){return e.reduce((t,s)=>Gu(t,O_(s)),Da)}function toe(e){return e.reduce((t,s)=>t+vO(s),0)}function soe(e){return e.reduce((t,s)=>t+bO(s),0)}function SO(e,t){if(t===void 0&&(t=kh),!e)return;const{top:s,left:r,bottom:i,right:a}=t(e);xO(e)&&(i<=0||a<=0||s>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const noe=[["x",["left","right"],toe],["y",["top","bottom"],soe]];class u1{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=iy(s),i=jO(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,o,l]of noe)for(const u of o)Object.defineProperty(this,u,{get:()=>{const d=l(r),m=i[a]-d;return this.rect[u]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Nf{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...s)})},this.target=t}add(t,s,r){var i;(i=this.target)==null||i.addEventListener(t,s,r),this.listeners.push([t,s,r])}}function roe(e){const{EventTarget:t}=ei(e);return e instanceof t?e:Ch(e)}function Kj(e,t){const s=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(s**2+r**2)>t:"x"in t&&"y"in t?s>t.x&&r>t.y:"x"in t?s>t.x:"y"in t?r>t.y:!1}var ra;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ra||(ra={}));function aD(e){e.preventDefault()}function ioe(e){e.stopPropagation()}var as;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(as||(as={}));const _O={start:[as.Space,as.Enter],cancel:[as.Esc],end:[as.Space,as.Enter,as.Tab]},aoe=(e,t)=>{let{currentCoordinates:s}=t;switch(e.code){case as.Right:return{...s,x:s.x+25};case as.Left:return{...s,x:s.x-25};case as.Down:return{...s,y:s.y+25};case as.Up:return{...s,y:s.y-25}}};class Ep{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new Nf(Ch(s)),this.windowListeners=new Nf(ei(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ra.Resize,this.handleCancel),this.windowListeners.add(ra.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ra.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,r=t.node.current;r&&SO(r),s(Da)}handleKeyDown(t){if(ny(t)){const{active:s,context:r,options:i}=this.props,{keyboardCodes:a=_O,coordinateGetter:o=aoe,scrollBehavior:l="smooth"}=i,{code:u}=t;if(a.end.includes(u)){this.handleEnd(t);return}if(a.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,m=d?{x:d.left,y:d.top}:Da;this.referenceCoordinates||(this.referenceCoordinates=m);const f=o(t,{active:s,context:r.current,currentCoordinates:m});if(f){const x=Vf(f,m),v={x:0,y:0},{scrollableAncestors:y}=r.current;for(const w of y){const S=t.code,{isTop:C,isRight:_,isLeft:j,isBottom:T,maxScroll:E,minScroll:A}=wO(w),R=eoe(w),D={x:Math.min(S===as.Right?R.right-R.width/2:R.right,Math.max(S===as.Right?R.left:R.left+R.width/2,f.x)),y:Math.min(S===as.Down?R.bottom-R.height/2:R.bottom,Math.max(S===as.Down?R.top:R.top+R.height/2,f.y))},M=S===as.Right&&!_||S===as.Left&&!j,P=S===as.Down&&!T||S===as.Up&&!C;if(M&&D.x!==f.x){const O=w.scrollLeft+x.x,F=S===as.Right&&O<=E.x||S===as.Left&&O>=A.x;if(F&&!x.y){w.scrollTo({left:O,behavior:l});return}F?v.x=w.scrollLeft-O:v.x=S===as.Right?w.scrollLeft-E.x:w.scrollLeft-A.x,v.x&&w.scrollBy({left:-v.x,behavior:l});break}else if(P&&D.y!==f.y){const O=w.scrollTop+x.y,F=S===as.Down&&O<=E.y||S===as.Up&&O>=A.y;if(F&&!x.x){w.scrollTo({top:O,behavior:l});return}F?v.y=w.scrollTop-O:v.y=S===as.Down?w.scrollTop-E.y:w.scrollTop-A.y,v.y&&w.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(t,Gu(Vf(f,this.referenceCoordinates),v))}}}handleMove(t,s){const{onMove:r}=this.props;t.preventDefault(),r(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ep.activators=[{eventName:"onKeyDown",handler:(e,t,s)=>{let{keyboardCodes:r=_O,onActivation:i}=t,{active:a}=s;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function oD(e){return!!(e&&"distance"in e)}function lD(e){return!!(e&&"delay"in e)}class h1{constructor(t,s,r){var i;r===void 0&&(r=roe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:a}=t,{target:o}=a;this.props=t,this.events=s,this.document=Ch(o),this.documentListeners=new Nf(this.document),this.listeners=new Nf(r),this.windowListeners=new Nf(ei(o)),this.initialCoordinates=(i=Xv(a))!=null?i:Da,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ra.Resize,this.handleCancel),this.windowListeners.add(ra.DragStart,aD),this.windowListeners.add(ra.VisibilityChange,this.handleCancel),this.windowListeners.add(ra.ContextMenu,aD),this.documentListeners.add(ra.Keydown,this.handleKeydown),s){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lD(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(oD(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(ra.Click,ioe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ra.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:r,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!i)return;const u=(s=Xv(t))!=null?s:Da,d=Vf(i,u);if(!r&&l){if(oD(l)){if(l.tolerance!=null&&Kj(d,l.tolerance))return this.handleCancel();if(Kj(d,l.distance))return this.handleStart()}if(lD(l)&&Kj(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===as.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ooe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ah extends h1{constructor(t){const{event:s}=t,r=Ch(s.target);super(t,ooe,r)}}Ah.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:r}=t;return!s.isPrimary||s.button!==0?!1:(r?.({event:s}),!0)}}];const loe={move:{name:"mousemove"},end:{name:"mouseup"}};var F_;(function(e){e[e.RightClick=2]="RightClick"})(F_||(F_={}));class coe extends h1{constructor(t){super(t,loe,Ch(t.event.target))}}coe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:r}=t;return s.button===F_.RightClick?!1:(r?.({event:s}),!0)}}];const Yj={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class doe extends h1{constructor(t){super(t,Yj)}static setup(){return window.addEventListener(Yj.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Yj.move.name,t)};function t(){}}}doe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:r}=t;const{touches:i}=s;return i.length>1?!1:(r?.({event:s}),!0)}}];var Cf;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Cf||(Cf={}));var Qv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qv||(Qv={}));function uoe(e){let{acceleration:t,activator:s=Cf.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:o=5,order:l=Qv.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:m,delta:f,threshold:x}=e;const v=moe({delta:f,disabled:!a}),[y,w]=kae(),S=p.useRef({x:0,y:0}),C=p.useRef({x:0,y:0}),_=p.useMemo(()=>{switch(s){case Cf.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Cf.DraggableRect:return i}},[s,i,u]),j=p.useRef(null),T=p.useCallback(()=>{const A=j.current;if(!A)return;const R=S.current.x*C.current.x,D=S.current.y*C.current.y;A.scrollBy(R,D)},[]),E=p.useMemo(()=>l===Qv.TreeOrder?[...d].reverse():d,[l,d]);p.useEffect(()=>{if(!a||!d.length||!_){w();return}for(const A of E){if(r?.(A)===!1)continue;const R=d.indexOf(A),D=m[R];if(!D)continue;const{direction:M,speed:P}=Jae(A,D,_,t,x);for(const O of["x","y"])v[O][M[O]]||(P[O]=0,M[O]=0);if(P.x>0||P.y>0){w(),j.current=A,y(T,o),S.current=P,C.current=M;return}}S.current={x:0,y:0},C.current={x:0,y:0},w()},[t,T,r,w,a,o,JSON.stringify(_),JSON.stringify(v),y,d,E,m,JSON.stringify(x)])}const hoe={x:{[Xn.Backward]:!1,[Xn.Forward]:!1},y:{[Xn.Backward]:!1,[Xn.Forward]:!1}};function moe(e){let{delta:t,disabled:s}=e;const r=Yv(t);return kp(i=>{if(s||!r||!i)return hoe;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Xn.Backward]:i.x[Xn.Backward]||a.x===-1,[Xn.Forward]:i.x[Xn.Forward]||a.x===1},y:{[Xn.Backward]:i.y[Xn.Backward]||a.y===-1,[Xn.Forward]:i.y[Xn.Forward]||a.y===1}}},[s,t,r])}function foe(e,t){const s=t!=null?e.get(t):void 0,r=s?s.node.current:null;return kp(i=>{var a;return t==null?null:(a=r??i)!=null?a:null},[r,t])}function poe(e,t){return p.useMemo(()=>e.reduce((s,r)=>{const{sensor:i}=r,a=i.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...s,...a]},[]),[e,t])}var qf;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(qf||(qf={}));var B_;(function(e){e.Optimized="optimized"})(B_||(B_={}));const cD=new Map;function goe(e,t){let{dragging:s,dependencies:r,config:i}=t;const[a,o]=p.useState(null),{frequency:l,measure:u,strategy:d}=i,m=p.useRef(e),f=S(),x=Gf(f),v=p.useCallback(function(C){C===void 0&&(C=[]),!x.current&&o(_=>_===null?C:_.concat(C.filter(j=>!_.includes(j))))},[x]),y=p.useRef(null),w=kp(C=>{if(f&&!s)return cD;if(!C||C===cD||m.current!==e||a!=null){const _=new Map;for(let j of e){if(!j)continue;if(a&&a.length>0&&!a.includes(j.id)&&j.rect.current){_.set(j.id,j.rect.current);continue}const T=j.node.current,E=T?new u1(u(T),T):null;j.rect.current=E,E&&_.set(j.id,E)}return _}return C},[e,a,s,f,u]);return p.useEffect(()=>{m.current=e},[e]),p.useEffect(()=>{f||v()},[s,f]),p.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),p.useEffect(()=>{f||typeof l!="number"||y.current!==null||(y.current=setTimeout(()=>{v(),y.current=null},l))},[l,f,v,...r]),{droppableRects:w,measureDroppableContainers:v,measuringScheduled:a!=null};function S(){switch(d){case qf.Always:return!1;case qf.BeforeDragging:return s;default:return!s}}}function m1(e,t){return kp(s=>e?s||(typeof t=="function"?t(e):e):null,[t,e])}function xoe(e,t){return m1(e,t)}function voe(e){let{callback:t,disabled:s}=e;const r=sy(t),i=p.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,s]);return p.useEffect(()=>()=>i?.disconnect(),[i]),i}function ay(e){let{callback:t,disabled:s}=e;const r=sy(t),i=p.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[s]);return p.useEffect(()=>()=>i?.disconnect(),[i]),i}function boe(e){return new u1(kh(e),e)}function dD(e,t,s){t===void 0&&(t=boe);const[r,i]=p.useState(null);function a(){i(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??s)!=null?d:null}const m=t(e);return JSON.stringify(u)===JSON.stringify(m)?u:m})}const o=voe({callback(u){if(e)for(const d of u){const{type:m,target:f}=d;if(m==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),l=ay({callback:a});return Pa(()=>{a(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),r}function yoe(e){const t=m1(e);return pO(e,t)}const uD=[];function woe(e){const t=p.useRef(e),s=kp(r=>e?r&&r!==uD&&e&&t.current&&e.parentNode===t.current.parentNode?r:iy(e):uD,[e]);return p.useEffect(()=>{t.current=e},[e]),s}function joe(e){const[t,s]=p.useState(null),r=p.useRef(e),i=p.useCallback(a=>{const o=Wj(a.target);o&&s(l=>l?(l.set(o,O_(o)),new Map(l)):null)},[]);return p.useEffect(()=>{const a=r.current;if(e!==a){o(a);const l=e.map(u=>{const d=Wj(u);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,O_(d)]):null}).filter(u=>u!=null);s(l.length?new Map(l):null),r.current=e}return()=>{o(e),o(a)};function o(l){l.forEach(u=>{const d=Wj(u);d?.removeEventListener("scroll",i)})}},[i,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,o)=>Gu(a,o),Da):jO(e):Da,[e,t])}function hD(e,t){t===void 0&&(t=[]);const s=p.useRef(null);return p.useEffect(()=>{s.current=null},t),p.useEffect(()=>{const r=e!==Da;r&&!s.current&&(s.current=e),!r&&s.current&&(s.current=null)},[e]),s.current?Vf(e,s.current):Da}function Soe(e){p.useEffect(()=>{if(!ty)return;const t=e.map(s=>{let{sensor:r}=s;return r.setup==null?void 0:r.setup()});return()=>{for(const s of t)s?.()}},e.map(t=>{let{sensor:s}=t;return s}))}function _oe(e,t){return p.useMemo(()=>e.reduce((s,r)=>{let{eventName:i,handler:a}=r;return s[i]=o=>{a(o,t)},s},{}),[e,t])}function NO(e){return p.useMemo(()=>e?Yae(e):null,[e])}const mD=[];function Noe(e,t){t===void 0&&(t=kh);const[s]=e,r=NO(s?ei(s):null),[i,a]=p.useState(mD);function o(){a(()=>e.length?e.map(u=>yO(u)?r:new u1(t(u),u)):mD)}const l=ay({callback:o});return Pa(()=>{l?.disconnect(),o(),e.forEach(u=>l?.observe(u))},[e]),i}function CO(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Cp(t)?t:e}function Coe(e){let{measure:t}=e;const[s,r]=p.useState(null),i=p.useCallback(d=>{for(const{target:m}of d)if(Cp(m)){r(f=>{const x=t(m);return f?{...f,width:x.width,height:x.height}:x});break}},[t]),a=ay({callback:i}),o=p.useCallback(d=>{const m=CO(d);a?.disconnect(),m&&a?.observe(m),r(m?t(m):null)},[t,a]),[l,u]=Kv(o);return p.useMemo(()=>({nodeRef:l,rect:s,setRef:u}),[s,l,u])}const koe=[{sensor:Ah,options:{}},{sensor:Ep,options:{}}],Aoe={current:{}},hv={draggable:{measure:iD},droppable:{measure:iD,strategy:qf.WhileDragging,frequency:B_.Optimized},dragOverlay:{measure:kh}};class kf extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,r;return(s=(r=this.get(t))==null?void 0:r.node.current)!=null?s:void 0}}const Eoe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new kf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Zv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:hv,measureDroppableContainers:Zv,windowRect:null,measuringScheduled:!1},kO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Zv,draggableNodes:new Map,over:null,measureDroppableContainers:Zv},Tp=p.createContext(kO),AO=p.createContext(Eoe);function Toe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new kf}}}function Poe(e,t){switch(t.type){case Bn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Bn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Bn.DragEnd:case Bn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Bn.RegisterDroppable:{const{element:s}=t,{id:r}=s,i=new kf(e.droppable.containers);return i.set(r,s),{...e,droppable:{...e.droppable,containers:i}}}case Bn.SetDroppableDisabled:{const{id:s,key:r,disabled:i}=t,a=e.droppable.containers.get(s);if(!a||r!==a.key)return e;const o=new kf(e.droppable.containers);return o.set(s,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case Bn.UnregisterDroppable:{const{id:s,key:r}=t,i=e.droppable.containers.get(s);if(!i||r!==i.key)return e;const a=new kf(e.droppable.containers);return a.delete(s),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Roe(e){let{disabled:t}=e;const{active:s,activatorEvent:r,draggableNodes:i}=p.useContext(Tp),a=Yv(r),o=Yv(s?.id);return p.useEffect(()=>{if(!t&&!r&&a&&o!=null){if(!ny(a)||document.activeElement===a.target)return;const l=i.get(o);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const m of[u.current,d.current]){if(!m)continue;const f=Tae(m);if(f){f.focus();break}}})}},[r,t,i,o,a]),null}function EO(e,t){let{transform:s,...r}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...r}),s):s}function Doe(e){return p.useMemo(()=>({draggable:{...hv.draggable,...e?.draggable},droppable:{...hv.droppable,...e?.droppable},dragOverlay:{...hv.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Ioe(e){let{activeNode:t,measure:s,initialRect:r,config:i=!0}=e;const a=p.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Pa(()=>{if(!o&&!l||!t){a.current=!1;return}if(a.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const m=s(d),f=pO(m,r);if(o||(f.x=0),l||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const x=xO(d);x&&x.scrollBy({top:f.y,left:f.x})}},[t,o,l,r,s])}const oy=p.createContext({...Da,scaleX:1,scaleY:1});var Xl;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xl||(Xl={}));const ly=p.memo(function(t){var s,r,i,a;let{id:o,accessibility:l,autoScroll:u=!0,children:d,sensors:m=koe,collisionDetection:f=Uae,measuring:x,modifiers:v,...y}=t;const w=p.useReducer(Poe,void 0,Toe),[S,C]=w,[_,j]=Lae(),[T,E]=p.useState(Xl.Uninitialized),A=T===Xl.Initialized,{draggable:{active:R,nodes:D,translate:M},droppable:{containers:P}}=S,O=R!=null?D.get(R):null,F=p.useRef({initial:null,translated:null}),$=p.useMemo(()=>{var kt;return R!=null?{id:R,data:(kt=O?.data)!=null?kt:Aoe,rect:F}:null},[R,O]),z=p.useRef(null),[H,I]=p.useState(null),[V,B]=p.useState(null),K=Gf(y,Object.values(y)),L=Ap("DndDescribedBy",o),G=p.useMemo(()=>P.getEnabled(),[P]),Y=Doe(x),{droppableRects:q,measureDroppableContainers:Q,measuringScheduled:se}=goe(G,{dragging:A,dependencies:[M.x,M.y],config:Y.droppable}),te=foe(D,R),ee=p.useMemo(()=>V?Xv(V):null,[V]),pe=xs(),fe=xoe(te,Y.draggable.measure);Ioe({activeNode:R!=null?D.get(R):null,config:pe.layoutShiftCompensation,initialRect:fe,measure:Y.draggable.measure});const re=dD(te,Y.draggable.measure,fe),Z=dD(te?te.parentElement:null),ie=p.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ce=P.getNodeFor((s=ie.current.over)==null?void 0:s.id),He=Coe({measure:Y.dragOverlay.measure}),tt=(r=He.nodeRef.current)!=null?r:te,he=A?(i=He.rect)!=null?i:re:null,Ne=!!(He.nodeRef.current&&He.rect),Ve=yoe(Ne?null:re),qe=NO(tt?ei(tt):null),Ze=woe(A?ce??te:null),Ae=Noe(Ze),De=EO(v,{transform:{x:M.x-Ve.x,y:M.y-Ve.y,scaleX:1,scaleY:1},activatorEvent:V,active:$,activeNodeRect:re,containerNodeRect:Z,draggingNodeRect:he,over:ie.current.over,overlayNodeRect:He.rect,scrollableAncestors:Ze,scrollableAncestorRects:Ae,windowRect:qe}),je=ee?Gu(ee,M):null,Ce=joe(Ze),It=hD(Ce),be=hD(Ce,[re]),ve=Gu(De,It),Me=he?qae(he,De):null,nt=$&&Me?f({active:$,collisionRect:Me,droppableRects:q,droppableContainers:G,pointerCoordinates:je}):null,jt=mO(nt,"id"),[ps,tn]=p.useState(null),Lt=Ne?De:Gu(De,be),ds=Gae(Lt,(a=ps?.rect)!=null?a:null,re),gs=p.useRef(null),Ft=p.useCallback((kt,me)=>{let{sensor:ze,options:ct}=me;if(z.current==null)return;const Rt=D.get(z.current);if(!Rt)return;const Jt=kt.nativeEvent,vs=new ze({active:z.current,activeNode:Rt,event:Jt,options:ct,context:ie,onAbort(Ge){if(!D.get(Ge))return;const{onDragAbort:Je}=K.current,ut={id:Ge};Je?.(ut),_({type:"onDragAbort",event:ut})},onPending(Ge,Ie,Je,ut){if(!D.get(Ge))return;const{onDragPending:Cr}=K.current,Vn={id:Ge,constraint:Ie,initialCoordinates:Je,offset:ut};Cr?.(Vn),_({type:"onDragPending",event:Vn})},onStart(Ge){const Ie=z.current;if(Ie==null)return;const Je=D.get(Ie);if(!Je)return;const{onDragStart:ut}=K.current,gt={activatorEvent:Jt,active:{id:Ie,data:Je.data,rect:F}};Di.unstable_batchedUpdates(()=>{ut?.(gt),E(Xl.Initializing),C({type:Bn.DragStart,initialCoordinates:Ge,active:Ie}),_({type:"onDragStart",event:gt}),I(gs.current),B(Jt)})},onMove(Ge){C({type:Bn.DragMove,coordinates:Ge})},onEnd:Hs(Bn.DragEnd),onCancel:Hs(Bn.DragCancel)});gs.current=vs;function Hs(Ge){return async function(){const{active:Je,collisions:ut,over:gt,scrollAdjustedTranslate:Cr}=ie.current;let Vn=null;if(Je&&Cr){const{cancelDrop:ri}=K.current;Vn={activatorEvent:Jt,active:Je,collisions:ut,delta:Cr,over:gt},Ge===Bn.DragEnd&&typeof ri=="function"&&await Promise.resolve(ri(Vn))&&(Ge=Bn.DragCancel)}z.current=null,Di.unstable_batchedUpdates(()=>{C({type:Ge}),E(Xl.Uninitialized),tn(null),I(null),B(null),gs.current=null;const ri=Ge===Bn.DragEnd?"onDragEnd":"onDragCancel";if(Vn){const Br=K.current[ri];Br?.(Vn),_({type:ri,event:Vn})}})}}},[D]),Be=p.useCallback((kt,me)=>(ze,ct)=>{const Rt=ze.nativeEvent,Jt=D.get(ct);if(z.current!==null||!Jt||Rt.dndKit||Rt.defaultPrevented)return;const vs={active:Jt};kt(ze,me.options,vs)===!0&&(Rt.dndKit={capturedBy:me.sensor},z.current=ct,Ft(ze,me))},[D,Ft]),st=poe(m,Be);Soe(m),Pa(()=>{re&&T===Xl.Initializing&&E(Xl.Initialized)},[re,T]),p.useEffect(()=>{const{onDragMove:kt}=K.current,{active:me,activatorEvent:ze,collisions:ct,over:Rt}=ie.current;if(!me||!ze)return;const Jt={active:me,activatorEvent:ze,collisions:ct,delta:{x:ve.x,y:ve.y},over:Rt};Di.unstable_batchedUpdates(()=>{kt?.(Jt),_({type:"onDragMove",event:Jt})})},[ve.x,ve.y]),p.useEffect(()=>{const{active:kt,activatorEvent:me,collisions:ze,droppableContainers:ct,scrollAdjustedTranslate:Rt}=ie.current;if(!kt||z.current==null||!me||!Rt)return;const{onDragOver:Jt}=K.current,vs=ct.get(jt),Hs=vs&&vs.rect.current?{id:vs.id,rect:vs.rect.current,data:vs.data,disabled:vs.disabled}:null,Ge={active:kt,activatorEvent:me,collisions:ze,delta:{x:Rt.x,y:Rt.y},over:Hs};Di.unstable_batchedUpdates(()=>{tn(Hs),Jt?.(Ge),_({type:"onDragOver",event:Ge})})},[jt]),Pa(()=>{ie.current={activatorEvent:V,active:$,activeNode:te,collisionRect:Me,collisions:nt,droppableRects:q,draggableNodes:D,draggingNode:tt,draggingNodeRect:he,droppableContainers:P,over:ps,scrollableAncestors:Ze,scrollAdjustedTranslate:ve},F.current={initial:he,translated:Me}},[$,te,nt,Me,D,tt,he,q,P,ps,Ze,ve]),uoe({...pe,delta:M,draggingRect:Me,pointerCoordinates:je,scrollableAncestors:Ze,scrollableAncestorRects:Ae});const us=p.useMemo(()=>({active:$,activeNode:te,activeNodeRect:re,activatorEvent:V,collisions:nt,containerNodeRect:Z,dragOverlay:He,draggableNodes:D,droppableContainers:P,droppableRects:q,over:ps,measureDroppableContainers:Q,scrollableAncestors:Ze,scrollableAncestorRects:Ae,measuringConfiguration:Y,measuringScheduled:se,windowRect:qe}),[$,te,re,V,nt,Z,He,D,P,q,ps,Q,Ze,Ae,Y,se,qe]),ue=p.useMemo(()=>({activatorEvent:V,activators:st,active:$,activeNodeRect:re,ariaDescribedById:{draggable:L},dispatch:C,draggableNodes:D,over:ps,measureDroppableContainers:Q}),[V,st,$,re,C,L,D,ps,Q]);return Vt.createElement(dO.Provider,{value:j},Vt.createElement(Tp.Provider,{value:ue},Vt.createElement(AO.Provider,{value:us},Vt.createElement(oy.Provider,{value:ds},d)),Vt.createElement(Roe,{disabled:l?.restoreFocus===!1})),Vt.createElement(Bae,{...l,hiddenTextDescribedById:L}));function xs(){const kt=H?.autoScrollEnabled===!1,me=typeof u=="object"?u.enabled===!1:u===!1,ze=A&&!kt&&!me;return typeof u=="object"?{...u,enabled:ze}:{enabled:ze}}}),Moe=p.createContext(null),fD="button",Loe="Draggable";function Ooe(e){let{id:t,data:s,disabled:r=!1,attributes:i}=e;const a=Ap(Loe),{activators:o,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:m,draggableNodes:f,over:x}=p.useContext(Tp),{role:v=fD,roleDescription:y="draggable",tabIndex:w=0}=i??{},S=u?.id===t,C=p.useContext(S?oy:Moe),[_,j]=Kv(),[T,E]=Kv(),A=_oe(o,t),R=Gf(s);Pa(()=>(f.set(t,{id:t,key:a,node:_,activatorNode:T,data:R}),()=>{const M=f.get(t);M&&M.key===a&&f.delete(t)}),[f,t]);const D=p.useMemo(()=>({role:v,tabIndex:w,"aria-disabled":r,"aria-pressed":S&&v===fD?!0:void 0,"aria-roledescription":y,"aria-describedby":m.draggable}),[r,v,w,S,y,m.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:D,isDragging:S,listeners:r?void 0:A,node:_,over:x,setNodeRef:j,setActivatorNodeRef:E,transform:C}}function f1(){return p.useContext(AO)}const Foe="Droppable",Boe={timeout:25};function cy(e){let{data:t,disabled:s=!1,id:r,resizeObserverConfig:i}=e;const a=Ap(Foe),{active:o,dispatch:l,over:u,measureDroppableContainers:d}=p.useContext(Tp),m=p.useRef({disabled:s}),f=p.useRef(!1),x=p.useRef(null),v=p.useRef(null),{disabled:y,updateMeasurementsFor:w,timeout:S}={...Boe,...i},C=Gf(w??r),_=p.useCallback(()=>{if(!f.current){f.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),v.current=null},S)},[S]),j=ay({callback:_,disabled:y||!o}),T=p.useCallback((D,M)=>{j&&(M&&(j.unobserve(M),f.current=!1),D&&j.observe(D))},[j]),[E,A]=Kv(T),R=Gf(t);return p.useEffect(()=>{!j||!E.current||(j.disconnect(),f.current=!1,j.observe(E.current))},[E,j]),p.useEffect(()=>(l({type:Bn.RegisterDroppable,element:{id:r,key:a,disabled:s,node:E,rect:x,data:R}}),()=>l({type:Bn.UnregisterDroppable,key:a,id:r})),[r]),p.useEffect(()=>{s!==m.current.disabled&&(l({type:Bn.SetDroppableDisabled,id:r,key:a,disabled:s}),m.current.disabled=s)},[r,a,s,l]),{active:o,rect:x,isOver:u?.id===r,node:E,over:u,setNodeRef:A}}function zoe(e){let{animation:t,children:s}=e;const[r,i]=p.useState(null),[a,o]=p.useState(null),l=Yv(s);return!s&&!r&&l&&i(l),Pa(()=>{if(!a)return;const u=r?.key,d=r?.props.id;if(u==null||d==null){i(null);return}Promise.resolve(t(d,a)).then(()=>{i(null)})},[t,r,a]),Vt.createElement(Vt.Fragment,null,s,r?p.cloneElement(r,{ref:o}):null)}const $oe={x:0,y:0,scaleX:1,scaleY:1};function Hoe(e){let{children:t}=e;return Vt.createElement(Tp.Provider,{value:kO},Vt.createElement(oy.Provider,{value:$oe},t))}const Uoe={position:"fixed",touchAction:"none"},Goe=e=>ny(e)?"transform 250ms ease":void 0,Voe=p.forwardRef((e,t)=>{let{as:s,activatorEvent:r,adjustScale:i,children:a,className:o,rect:l,style:u,transform:d,transition:m=Goe}=e;if(!l)return null;const f=i?d:{...d,scaleX:1,scaleY:1},x={...Uoe,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ra.Transform.toString(f),transformOrigin:i&&r?zae(r,l):void 0,transition:typeof m=="function"?m(r):m,...u};return Vt.createElement(s,{className:o,style:x,ref:t},a)}),qoe=e=>t=>{let{active:s,dragOverlay:r}=t;const i={},{styles:a,className:o}=e;if(a!=null&&a.active)for(const[l,u]of Object.entries(a.active))u!==void 0&&(i[l]=s.node.style.getPropertyValue(l),s.node.style.setProperty(l,u));if(a!=null&&a.dragOverlay)for(const[l,u]of Object.entries(a.dragOverlay))u!==void 0&&r.node.style.setProperty(l,u);return o!=null&&o.active&&s.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[u,d]of Object.entries(i))s.node.style.setProperty(u,d);o!=null&&o.active&&s.node.classList.remove(o.active)}},Woe=e=>{let{transform:{initial:t,final:s}}=e;return[{transform:Ra.Transform.toString(t)},{transform:Ra.Transform.toString(s)}]},Koe={duration:250,easing:"ease",keyframes:Woe,sideEffects:qoe({styles:{active:{opacity:"0"}}})};function Yoe(e){let{config:t,draggableNodes:s,droppableContainers:r,measuringConfiguration:i}=e;return sy((a,o)=>{if(t===null)return;const l=s.get(a);if(!l)return;const u=l.node.current;if(!u)return;const d=CO(o);if(!d)return;const{transform:m}=ei(o).getComputedStyle(o),f=gO(m);if(!f)return;const x=typeof t=="function"?t:Xoe(t);return SO(u,i.draggable.measure),x({active:{id:a,data:l.data,node:u,rect:i.draggable.measure(u)},draggableNodes:s,dragOverlay:{node:o,rect:i.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:i,transform:f})})}function Xoe(e){const{duration:t,easing:s,sideEffects:r,keyframes:i}={...Koe,...e};return a=>{let{active:o,dragOverlay:l,transform:u,...d}=a;if(!t)return;const m={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/l.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/l.rect.height:1},x={x:u.x-m.x,y:u.y-m.y,...f},v=i({...d,active:o,dragOverlay:l,transform:{initial:u,final:x}}),[y]=v,w=v[v.length-1];if(JSON.stringify(y)===JSON.stringify(w))return;const S=r?.({active:o,dragOverlay:l,...d}),C=l.node.animate(v,{duration:t,easing:s,fill:"forwards"});return new Promise(_=>{C.onfinish=()=>{S?.(),_()}})}}let pD=0;function Zoe(e){return p.useMemo(()=>{if(e!=null)return pD++,pD},[e])}const dy=Vt.memo(e=>{let{adjustScale:t=!1,children:s,dropAnimation:r,style:i,transition:a,modifiers:o,wrapperElement:l="div",className:u,zIndex:d=999}=e;const{activatorEvent:m,active:f,activeNodeRect:x,containerNodeRect:v,draggableNodes:y,droppableContainers:w,dragOverlay:S,over:C,measuringConfiguration:_,scrollableAncestors:j,scrollableAncestorRects:T,windowRect:E}=f1(),A=p.useContext(oy),R=Zoe(f?.id),D=EO(o,{activatorEvent:m,active:f,activeNodeRect:x,containerNodeRect:v,draggingNodeRect:S.rect,over:C,overlayNodeRect:S.rect,scrollableAncestors:j,scrollableAncestorRects:T,transform:A,windowRect:E}),M=m1(x),P=Yoe({config:r,draggableNodes:y,droppableContainers:w,measuringConfiguration:_}),O=M?S.setRef:void 0;return Vt.createElement(Hoe,null,Vt.createElement(zoe,{animation:P},f&&R?Vt.createElement(Voe,{key:R,id:f.id,ref:O,as:l,activatorEvent:m,adjustScale:t,className:u,transition:a,rect:M,style:{zIndex:d,...i},transform:D},s):null))});function p1(e,t,s){const r=e.slice();return r.splice(s<0?r.length+s:s,0,r.splice(t,1)[0]),r}function Qoe(e,t){return e.reduce((s,r,i)=>{const a=t.get(r);return a&&(s[i]=a),s},Array(e.length))}function jx(e){return e!==null&&e>=0}function Joe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function ele(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Sx={scaleX:1,scaleY:1},tle=e=>{var t;let{rects:s,activeNodeRect:r,activeIndex:i,overIndex:a,index:o}=e;const l=(t=s[i])!=null?t:r;if(!l)return null;const u=sle(s,o,i);if(o===i){const d=s[a];return d?{x:i<a?d.left+d.width-(l.left+l.width):d.left-l.left,y:0,...Sx}:null}return o>i&&o<=a?{x:-l.width-u,y:0,...Sx}:o<i&&o>=a?{x:l.width+u,y:0,...Sx}:{x:0,y:0,...Sx}};function sle(e,t,s){const r=e[t],i=e[t-1],a=e[t+1];return!r||!i&&!a?0:s<t?i?r.left-(i.left+i.width):a.left-(r.left+r.width):a?a.left-(r.left+r.width):r.left-(i.left+i.width)}const g1=e=>{let{rects:t,activeIndex:s,overIndex:r,index:i}=e;const a=p1(t,r,s),o=t[i],l=a[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},_x={scaleX:1,scaleY:1},TO=e=>{var t;let{activeIndex:s,activeNodeRect:r,index:i,rects:a,overIndex:o}=e;const l=(t=a[s])!=null?t:r;if(!l)return null;if(i===s){const d=a[o];return d?{x:0,y:s<o?d.top+d.height-(l.top+l.height):d.top-l.top,..._x}:null}const u=nle(a,i,s);return i>s&&i<=o?{x:0,y:-l.height-u,..._x}:i<s&&i>=o?{x:0,y:l.height+u,..._x}:{x:0,y:0,..._x}};function nle(e,t,s){const r=e[t],i=e[t-1],a=e[t+1];return r?s<t?i?r.top-(i.top+i.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const PO="Sortable",RO=Vt.createContext({activeIndex:-1,containerId:PO,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:g1,disabled:{draggable:!1,droppable:!1}});function uy(e){let{children:t,id:s,items:r,strategy:i=g1,disabled:a=!1}=e;const{active:o,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:m}=f1(),f=Ap(PO,s),x=l.rect!==null,v=p.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),y=o!=null,w=o?v.indexOf(o.id):-1,S=d?v.indexOf(d.id):-1,C=p.useRef(v),_=!Joe(v,C.current),j=S!==-1&&w===-1||_,T=ele(a);Pa(()=>{_&&y&&m(v)},[_,v,y,m]),p.useEffect(()=>{C.current=v},[v]);const E=p.useMemo(()=>({activeIndex:w,containerId:f,disabled:T,disableTransforms:j,items:v,overIndex:S,useDragOverlay:x,sortedRects:Qoe(v,u),strategy:i}),[w,f,T.draggable,T.droppable,j,v,S,u,x,i]);return Vt.createElement(RO.Provider,{value:E},t)}const rle=e=>{let{id:t,items:s,activeIndex:r,overIndex:i}=e;return p1(s,r,i).indexOf(t)},ile=e=>{let{containerId:t,isSorting:s,wasDragging:r,index:i,items:a,newIndex:o,previousItems:l,previousContainerId:u,transition:d}=e;return!d||!r||l!==a&&i===o?!1:s?!0:o!==i&&t===u},ale={duration:200,easing:"ease"},DO="transform",ole=Ra.Transition.toString({property:DO,duration:0,easing:"linear"}),lle={roleDescription:"sortable"};function cle(e){let{disabled:t,index:s,node:r,rect:i}=e;const[a,o]=p.useState(null),l=p.useRef(s);return Pa(()=>{if(!t&&s!==l.current&&r.current){const u=i.current;if(u){const d=kh(r.current,{ignoreTransform:!0}),m={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(m.x||m.y)&&o(m)}}s!==l.current&&(l.current=s)},[t,s,r,i]),p.useEffect(()=>{a&&o(null)},[a]),a}function hy(e){let{animateLayoutChanges:t=ile,attributes:s,disabled:r,data:i,getNewIndex:a=rle,id:o,strategy:l,resizeObserverConfig:u,transition:d=ale}=e;const{items:m,containerId:f,activeIndex:x,disabled:v,disableTransforms:y,sortedRects:w,overIndex:S,useDragOverlay:C,strategy:_}=p.useContext(RO),j=dle(r,v),T=m.indexOf(o),E=p.useMemo(()=>({sortable:{containerId:f,index:T,items:m},...i}),[f,i,T,m]),A=p.useMemo(()=>m.slice(m.indexOf(o)),[m,o]),{rect:R,node:D,isOver:M,setNodeRef:P}=cy({id:o,data:E,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...u}}),{active:O,activatorEvent:F,activeNodeRect:$,attributes:z,setNodeRef:H,listeners:I,isDragging:V,over:B,setActivatorNodeRef:K,transform:L}=Ooe({id:o,data:E,attributes:{...lle,...s},disabled:j.draggable}),G=Cae(P,H),Y=!!O,q=Y&&!y&&jx(x)&&jx(S),Q=!C&&V,se=Q&&q?L:null,ee=q?se??(l??_)({rects:w,activeNodeRect:$,activeIndex:x,overIndex:S,index:T}):null,pe=jx(x)&&jx(S)?a({id:o,items:m,activeIndex:x,overIndex:S}):T,fe=O?.id,re=p.useRef({activeId:fe,items:m,newIndex:pe,containerId:f}),Z=m!==re.current.items,ie=t({active:O,containerId:f,isDragging:V,isSorting:Y,id:o,index:T,items:m,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:d,wasDragging:re.current.activeId!=null}),ce=cle({disabled:!ie,index:T,node:D,rect:R});return p.useEffect(()=>{Y&&re.current.newIndex!==pe&&(re.current.newIndex=pe),f!==re.current.containerId&&(re.current.containerId=f),m!==re.current.items&&(re.current.items=m)},[Y,pe,f,m]),p.useEffect(()=>{if(fe===re.current.activeId)return;if(fe!=null&&re.current.activeId==null){re.current.activeId=fe;return}const tt=setTimeout(()=>{re.current.activeId=fe},50);return()=>clearTimeout(tt)},[fe]),{active:O,activeIndex:x,attributes:z,data:E,rect:R,index:T,newIndex:pe,items:m,isOver:M,isSorting:Y,isDragging:V,listeners:I,node:D,overIndex:S,over:B,setNodeRef:G,setActivatorNodeRef:K,setDroppableNodeRef:P,setDraggableNodeRef:H,transform:ce??ee,transition:He()};function He(){if(ce||Z&&re.current.newIndex===T)return ole;if(!(Q&&!ny(F)||!d)&&(Y||ie))return Ra.Transition.toString({...d,property:DO})}}function dle(e,t){var s,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(s=e?.draggable)!=null?s:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function Jv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const ule=[as.Down,as.Right,as.Up,as.Left],x1=(e,t)=>{let{context:{active:s,collisionRect:r,droppableRects:i,droppableContainers:a,over:o,scrollableAncestors:l}}=t;if(ule.includes(e.code)){if(e.preventDefault(),!s||!r)return;const u=[];a.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const x=i.get(f.id);if(x)switch(e.code){case as.Down:r.top<x.top&&u.push(f);break;case as.Up:r.top>x.top&&u.push(f);break;case as.Left:r.left>x.left&&u.push(f);break;case as.Right:r.left<x.left&&u.push(f);break}});const d=d1({collisionRect:r,droppableRects:i,droppableContainers:u});let m=mO(d,"id");if(m===o?.id&&d.length>1&&(m=d[1].id),m!=null){const f=a.get(s.id),x=a.get(m),v=x?i.get(x.id):null,y=x?.node.current;if(y&&v&&f&&x){const S=iy(y).some((A,R)=>l[R]!==A),C=IO(f,x),_=hle(f,x),j=S||!C?{x:0,y:0}:{x:_?r.width-v.width:0,y:_?r.height-v.height:0},T={x:v.left,y:v.top};return j.x&&j.y?T:Vf(T,j)}}}};function IO(e,t){return!Jv(e)||!Jv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function hle(e,t){return!Jv(e)||!Jv(t)||!IO(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function Fe(e,t,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e?.(i),s===!1||!i.defaultPrevented)return t?.(i)}}function gD(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function So(...e){return t=>{let s=!1;const r=e.map(i=>{const a=gD(i,t);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():gD(e[i],null)}}}}function Ct(...e){return p.useCallback(So(...e),e)}function mle(e,t){const s=p.createContext(t),r=a=>{const{children:o,...l}=a,u=p.useMemo(()=>l,Object.values(l));return n.jsx(s.Provider,{value:u,children:o})};r.displayName=e+"Provider";function i(a){const o=p.useContext(s);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function ur(e,t=[]){let s=[];function r(a,o){const l=p.createContext(o),u=s.length;s=[...s,o];const d=f=>{const{scope:x,children:v,...y}=f,w=x?.[e]?.[u]||l,S=p.useMemo(()=>y,Object.values(y));return n.jsx(w.Provider,{value:S,children:v})};d.displayName=a+"Provider";function m(f,x){const v=x?.[e]?.[u]||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,m]}const i=()=>{const a=s.map(o=>p.createContext(o));return function(l){const u=l?.[e]||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return i.scopeName=e,[r,fle(i,...t)]}function fle(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const f=u(a)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}function ple(e){const t=gle(e),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),u=l.find(vle);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function gle(e){const t=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=yle(i),l=ble(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xle=Symbol("radix.slottable");function vle(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===xle}function ble(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function yle(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var wle=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ot=wle.reduce((e,t)=>{const s=ple(`Primitive.${t}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,u=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function v1(e,t){e&&Di.flushSync(()=>e.dispatchEvent(t))}function vn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...s)=>t.current?.(...s),[])}function jle(e,t=globalThis?.document){const s=vn(e);p.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[s,t])}var Sle="DismissableLayer",z_="dismissableLayer.update",_le="dismissableLayer.pointerDownOutside",Nle="dismissableLayer.focusOutside",xD,MO=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nd=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...u}=e,d=p.useContext(MO),[m,f]=p.useState(null),x=m?.ownerDocument??globalThis?.document,[,v]=p.useState({}),y=Ct(t,R=>f(R)),w=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(S),_=m?w.indexOf(m):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,T=_>=C,E=kle(R=>{const D=R.target,M=[...d.branches].some(P=>P.contains(D));!T||M||(i?.(R),o?.(R),R.defaultPrevented||l?.())},x),A=Ale(R=>{const D=R.target;[...d.branches].some(P=>P.contains(D))||(a?.(R),o?.(R),R.defaultPrevented||l?.())},x);return jle(R=>{_===d.layers.size-1&&(r?.(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},x),p.useEffect(()=>{if(m)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(xD=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(m)),d.layers.add(m),vD(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=xD)}},[m,x,s,d]),p.useEffect(()=>()=>{m&&(d.layers.delete(m),d.layersWithOutsidePointerEventsDisabled.delete(m),vD())},[m,d]),p.useEffect(()=>{const R=()=>v({});return document.addEventListener(z_,R),()=>document.removeEventListener(z_,R)},[]),n.jsx(ot.div,{...u,ref:y,style:{pointerEvents:j?T?"auto":"none":void 0,...e.style},onFocusCapture:Fe(e.onFocusCapture,A.onFocusCapture),onBlurCapture:Fe(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:Fe(e.onPointerDownCapture,E.onPointerDownCapture)})});Nd.displayName=Sle;var Cle="DismissableLayerBranch",LO=p.forwardRef((e,t)=>{const s=p.useContext(MO),r=p.useRef(null),i=Ct(t,r);return p.useEffect(()=>{const a=r.current;if(a)return s.branches.add(a),()=>{s.branches.delete(a)}},[s.branches]),n.jsx(ot.div,{...e,ref:i})});LO.displayName=Cle;function kle(e,t=globalThis?.document){const s=vn(e),r=p.useRef(!1),i=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let u=function(){OO(_le,s,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=u,t.addEventListener("click",i.current,{once:!0})):u()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}function Ale(e,t=globalThis?.document){const s=vn(e),r=p.useRef(!1);return p.useEffect(()=>{const i=a=>{a.target&&!r.current&&OO(Nle,s,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vD(){const e=new CustomEvent(z_);document.dispatchEvent(e)}function OO(e,t,s,{discrete:r}){const i=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),r?v1(i,a):i.dispatchEvent(a)}var Ele=Nd,Tle=LO,Hn=globalThis?.document?p.useLayoutEffect:()=>{},Ple=OC[" useId ".trim().toString()]||(()=>{}),Rle=0;function Li(e){const[t,s]=p.useState(Ple());return Hn(()=>{s(r=>r??String(Rle++))},[e]),t?`radix-${t}`:""}const Dle=["top","right","bottom","left"],lc=Math.min,Pi=Math.max,eb=Math.round,Nx=Math.floor,ao=e=>({x:e,y:e}),Ile={left:"right",right:"left",bottom:"top",top:"bottom"},Mle={start:"end",end:"start"};function $_(e,t,s){return Pi(e,lc(t,s))}function cl(e,t){return typeof e=="function"?e(t):e}function dl(e){return e.split("-")[0]}function Eh(e){return e.split("-")[1]}function b1(e){return e==="x"?"y":"x"}function y1(e){return e==="y"?"height":"width"}const Lle=new Set(["top","bottom"]);function no(e){return Lle.has(dl(e))?"y":"x"}function w1(e){return b1(no(e))}function Ole(e,t,s){s===void 0&&(s=!1);const r=Eh(e),i=w1(e),a=y1(i);let o=i==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=tb(o)),[o,tb(o)]}function Fle(e){const t=tb(e);return[H_(e),t,H_(t)]}function H_(e){return e.replace(/start|end/g,t=>Mle[t])}const bD=["left","right"],yD=["right","left"],Ble=["top","bottom"],zle=["bottom","top"];function $le(e,t,s){switch(e){case"top":case"bottom":return s?t?yD:bD:t?bD:yD;case"left":case"right":return t?Ble:zle;default:return[]}}function Hle(e,t,s,r){const i=Eh(e);let a=$le(dl(e),s==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(H_)))),a}function tb(e){return e.replace(/left|right|bottom|top/g,t=>Ile[t])}function Ule(e){return{top:0,right:0,bottom:0,left:0,...e}}function FO(e){return typeof e!="number"?Ule(e):{top:e,right:e,bottom:e,left:e}}function sb(e){const{x:t,y:s,width:r,height:i}=e;return{width:r,height:i,top:s,left:t,right:t+r,bottom:s+i,x:t,y:s}}function wD(e,t,s){let{reference:r,floating:i}=e;const a=no(t),o=w1(t),l=y1(o),u=dl(t),d=a==="y",m=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,x=r[l]/2-i[l]/2;let v;switch(u){case"top":v={x:m,y:r.y-i.height};break;case"bottom":v={x:m,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-i.width,y:f};break;default:v={x:r.x,y:r.y}}switch(Eh(t)){case"start":v[o]-=x*(s&&d?-1:1);break;case"end":v[o]+=x*(s&&d?-1:1);break}return v}const Gle=async(e,t,s)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=s,l=a.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:m,y:f}=wD(d,r,u),x=r,v={},y=0;for(let w=0;w<l.length;w++){const{name:S,fn:C}=l[w],{x:_,y:j,data:T,reset:E}=await C({x:m,y:f,initialPlacement:r,placement:x,strategy:i,middlewareData:v,rects:d,platform:o,elements:{reference:e,floating:t}});m=_??m,f=j??f,v={...v,[S]:{...v[S],...T}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(x=E.placement),E.rects&&(d=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:m,y:f}=wD(d,x,u)),w=-1)}return{x:m,y:f,placement:x,strategy:i,middlewareData:v}};async function Wf(e,t){var s;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:x=!1,padding:v=0}=cl(t,e),y=FO(v),S=l[x?f==="floating"?"reference":"floating":f],C=sb(await a.getClippingRect({element:(s=await(a.isElement==null?void 0:a.isElement(S)))==null||s?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:m,strategy:u})),_=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),T=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},E=sb(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:_,offsetParent:j,strategy:u}):_);return{top:(C.top-E.top+y.top)/T.y,bottom:(E.bottom-C.bottom+y.bottom)/T.y,left:(C.left-E.left+y.left)/T.x,right:(E.right-C.right+y.right)/T.x}}const Vle=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:u}=t,{element:d,padding:m=0}=cl(e,t)||{};if(d==null)return{};const f=FO(m),x={x:s,y:r},v=w1(i),y=y1(v),w=await o.getDimensions(d),S=v==="y",C=S?"top":"left",_=S?"bottom":"right",j=S?"clientHeight":"clientWidth",T=a.reference[y]+a.reference[v]-x[v]-a.floating[y],E=x[v]-a.reference[v],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let R=A?A[j]:0;(!R||!await(o.isElement==null?void 0:o.isElement(A)))&&(R=l.floating[j]||a.floating[y]);const D=T/2-E/2,M=R/2-w[y]/2-1,P=lc(f[C],M),O=lc(f[_],M),F=P,$=R-w[y]-O,z=R/2-w[y]/2+D,H=$_(F,z,$),I=!u.arrow&&Eh(i)!=null&&z!==H&&a.reference[y]/2-(z<F?P:O)-w[y]/2<0,V=I?z<F?z-F:z-$:0;return{[v]:x[v]+V,data:{[v]:H,centerOffset:z-H-V,...I&&{alignmentOffset:V}},reset:I}}}),qle=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:u,elements:d}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:x,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:w=!0,...S}=cl(e,t);if((s=a.arrow)!=null&&s.alignmentOffset)return{};const C=dl(i),_=no(l),j=dl(l)===l,T=await(u.isRTL==null?void 0:u.isRTL(d.floating)),E=x||(j||!w?[tb(l)]:Fle(l)),A=y!=="none";!x&&A&&E.push(...Hle(l,w,y,T));const R=[l,...E],D=await Wf(t,S),M=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&M.push(D[C]),f){const z=Ole(i,o,T);M.push(D[z[0]],D[z[1]])}if(P=[...P,{placement:i,overflows:M}],!M.every(z=>z<=0)){var O,F;const z=(((O=a.flip)==null?void 0:O.index)||0)+1,H=R[z];if(H&&(!(f==="alignment"?_!==no(H):!1)||P.every(B=>no(B.placement)===_?B.overflows[0]>0:!0)))return{data:{index:z,overflows:P},reset:{placement:H}};let I=(F=P.filter(V=>V.overflows[0]<=0).sort((V,B)=>V.overflows[1]-B.overflows[1])[0])==null?void 0:F.placement;if(!I)switch(v){case"bestFit":{var $;const V=($=P.filter(B=>{if(A){const K=no(B.placement);return K===_||K==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(K=>K>0).reduce((K,L)=>K+L,0)]).sort((B,K)=>B[1]-K[1])[0])==null?void 0:$[0];V&&(I=V);break}case"initialPlacement":I=l;break}if(i!==I)return{reset:{placement:I}}}return{}}}};function jD(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function SD(e){return Dle.some(t=>e[t]>=0)}const Wle=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:s}=t,{strategy:r="referenceHidden",...i}=cl(e,t);switch(r){case"referenceHidden":{const a=await Wf(t,{...i,elementContext:"reference"}),o=jD(a,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:SD(o)}}}case"escaped":{const a=await Wf(t,{...i,altBoundary:!0}),o=jD(a,s.floating);return{data:{escapedOffsets:o,escaped:SD(o)}}}default:return{}}}}},BO=new Set(["left","top"]);async function Kle(e,t){const{placement:s,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=dl(s),l=Eh(s),u=no(s)==="y",d=BO.has(o)?-1:1,m=a&&u?-1:1,f=cl(t,e);let{mainAxis:x,crossAxis:v,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(v=l==="end"?y*-1:y),u?{x:v*m,y:x*d}:{x:x*d,y:v*m}}const Yle=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,r;const{x:i,y:a,placement:o,middlewareData:l}=t,u=await Kle(t,e);return o===((s=l.offset)==null?void 0:s.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:a+u.y,data:{...u,placement:o}}}}},Xle=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:S=>{let{x:C,y:_}=S;return{x:C,y:_}}},...u}=cl(e,t),d={x:s,y:r},m=await Wf(t,u),f=no(dl(i)),x=b1(f);let v=d[x],y=d[f];if(a){const S=x==="y"?"top":"left",C=x==="y"?"bottom":"right",_=v+m[S],j=v-m[C];v=$_(_,v,j)}if(o){const S=f==="y"?"top":"left",C=f==="y"?"bottom":"right",_=y+m[S],j=y-m[C];y=$_(_,y,j)}const w=l.fn({...t,[x]:v,[f]:y});return{...w,data:{x:w.x-s,y:w.y-r,enabled:{[x]:a,[f]:o}}}}}},Zle=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:s,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:u=!0,crossAxis:d=!0}=cl(e,t),m={x:s,y:r},f=no(i),x=b1(f);let v=m[x],y=m[f];const w=cl(l,t),S=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const j=x==="y"?"height":"width",T=a.reference[x]-a.floating[j]+S.mainAxis,E=a.reference[x]+a.reference[j]-S.mainAxis;v<T?v=T:v>E&&(v=E)}if(d){var C,_;const j=x==="y"?"width":"height",T=BO.has(dl(i)),E=a.reference[f]-a.floating[j]+(T&&((C=o.offset)==null?void 0:C[f])||0)+(T?0:S.crossAxis),A=a.reference[f]+a.reference[j]+(T?0:((_=o.offset)==null?void 0:_[f])||0)-(T?S.crossAxis:0);y<E?y=E:y>A&&(y=A)}return{[x]:v,[f]:y}}}},Qle=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var s,r;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:u=()=>{},...d}=cl(e,t),m=await Wf(t,d),f=dl(i),x=Eh(i),v=no(i)==="y",{width:y,height:w}=a.floating;let S,C;f==="top"||f==="bottom"?(S=f,C=x===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(C=f,S=x==="end"?"top":"bottom");const _=w-m.top-m.bottom,j=y-m.left-m.right,T=lc(w-m[S],_),E=lc(y-m[C],j),A=!t.middlewareData.shift;let R=T,D=E;if((s=t.middlewareData.shift)!=null&&s.enabled.x&&(D=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=_),A&&!x){const P=Pi(m.left,0),O=Pi(m.right,0),F=Pi(m.top,0),$=Pi(m.bottom,0);v?D=y-2*(P!==0||O!==0?P+O:Pi(m.left,m.right)):R=w-2*(F!==0||$!==0?F+$:Pi(m.top,m.bottom))}await u({...t,availableWidth:D,availableHeight:R});const M=await o.getDimensions(l.floating);return y!==M.width||w!==M.height?{reset:{rects:!0}}:{}}}};function my(){return typeof window<"u"}function Th(e){return zO(e)?(e.nodeName||"").toLowerCase():"#document"}function Oi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function _o(e){var t;return(t=(zO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zO(e){return my()?e instanceof Node||e instanceof Oi(e).Node:!1}function Ia(e){return my()?e instanceof Element||e instanceof Oi(e).Element:!1}function ho(e){return my()?e instanceof HTMLElement||e instanceof Oi(e).HTMLElement:!1}function _D(e){return!my()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oi(e).ShadowRoot}const Jle=new Set(["inline","contents"]);function Pp(e){const{overflow:t,overflowX:s,overflowY:r,display:i}=Ma(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!Jle.has(i)}const ece=new Set(["table","td","th"]);function tce(e){return ece.has(Th(e))}const sce=[":popover-open",":modal"];function fy(e){return sce.some(t=>{try{return e.matches(t)}catch{return!1}})}const nce=["transform","translate","scale","rotate","perspective"],rce=["transform","translate","scale","rotate","perspective","filter"],ice=["paint","layout","strict","content"];function j1(e){const t=S1(),s=Ia(e)?Ma(e):e;return nce.some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||rce.some(r=>(s.willChange||"").includes(r))||ice.some(r=>(s.contain||"").includes(r))}function ace(e){let t=cc(e);for(;ho(t)&&!oh(t);){if(j1(t))return t;if(fy(t))return null;t=cc(t)}return null}function S1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oce=new Set(["html","body","#document"]);function oh(e){return oce.has(Th(e))}function Ma(e){return Oi(e).getComputedStyle(e)}function py(e){return Ia(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function cc(e){if(Th(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_D(e)&&e.host||_o(e);return _D(t)?t.host:t}function $O(e){const t=cc(e);return oh(t)?e.ownerDocument?e.ownerDocument.body:e.body:ho(t)&&Pp(t)?t:$O(t)}function Kf(e,t,s){var r;t===void 0&&(t=[]),s===void 0&&(s=!0);const i=$O(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=Oi(i);if(a){const l=U_(o);return t.concat(o,o.visualViewport||[],Pp(i)?i:[],l&&s?Kf(l):[])}return t.concat(i,Kf(i,[],s))}function U_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function HO(e){const t=Ma(e);let s=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ho(e),a=i?e.offsetWidth:s,o=i?e.offsetHeight:r,l=eb(s)!==a||eb(r)!==o;return l&&(s=a,r=o),{width:s,height:r,$:l}}function _1(e){return Ia(e)?e:e.contextElement}function Vu(e){const t=_1(e);if(!ho(t))return ao(1);const s=t.getBoundingClientRect(),{width:r,height:i,$:a}=HO(t);let o=(a?eb(s.width):s.width)/r,l=(a?eb(s.height):s.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const lce=ao(0);function UO(e){const t=Oi(e);return!S1()||!t.visualViewport?lce:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cce(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==Oi(e)?!1:t}function hd(e,t,s,r){t===void 0&&(t=!1),s===void 0&&(s=!1);const i=e.getBoundingClientRect(),a=_1(e);let o=ao(1);t&&(r?Ia(r)&&(o=Vu(r)):o=Vu(e));const l=cce(a,s,r)?UO(a):ao(0);let u=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,m=i.width/o.x,f=i.height/o.y;if(a){const x=Oi(a),v=r&&Ia(r)?Oi(r):r;let y=x,w=U_(y);for(;w&&r&&v!==y;){const S=Vu(w),C=w.getBoundingClientRect(),_=Ma(w),j=C.left+(w.clientLeft+parseFloat(_.paddingLeft))*S.x,T=C.top+(w.clientTop+parseFloat(_.paddingTop))*S.y;u*=S.x,d*=S.y,m*=S.x,f*=S.y,u+=j,d+=T,y=Oi(w),w=U_(y)}}return sb({width:m,height:f,x:u,y:d})}function gy(e,t){const s=py(e).scrollLeft;return t?t.left+s:hd(_o(e)).left+s}function GO(e,t){const s=e.getBoundingClientRect(),r=s.left+t.scrollLeft-gy(e,s),i=s.top+t.scrollTop;return{x:r,y:i}}function dce(e){let{elements:t,rect:s,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=_o(r),l=t?fy(t.floating):!1;if(r===o||l&&a)return s;let u={scrollLeft:0,scrollTop:0},d=ao(1);const m=ao(0),f=ho(r);if((f||!f&&!a)&&((Th(r)!=="body"||Pp(o))&&(u=py(r)),ho(r))){const v=hd(r);d=Vu(r),m.x=v.x+r.clientLeft,m.y=v.y+r.clientTop}const x=o&&!f&&!a?GO(o,u):ao(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-u.scrollLeft*d.x+m.x+x.x,y:s.y*d.y-u.scrollTop*d.y+m.y+x.y}}function uce(e){return Array.from(e.getClientRects())}function hce(e){const t=_o(e),s=py(e),r=e.ownerDocument.body,i=Pi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Pi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-s.scrollLeft+gy(e);const l=-s.scrollTop;return Ma(r).direction==="rtl"&&(o+=Pi(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}const ND=25;function mce(e,t){const s=Oi(e),r=_o(e),i=s.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,u=0;if(i){a=i.width,o=i.height;const m=S1();(!m||m&&t==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}const d=gy(r);if(d<=0){const m=r.ownerDocument,f=m.body,x=getComputedStyle(f),v=m.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,y=Math.abs(r.clientWidth-f.clientWidth-v);y<=ND&&(a-=y)}else d<=ND&&(a+=d);return{width:a,height:o,x:l,y:u}}const fce=new Set(["absolute","fixed"]);function pce(e,t){const s=hd(e,!0,t==="fixed"),r=s.top+e.clientTop,i=s.left+e.clientLeft,a=ho(e)?Vu(e):ao(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,u=i*a.x,d=r*a.y;return{width:o,height:l,x:u,y:d}}function CD(e,t,s){let r;if(t==="viewport")r=mce(e,s);else if(t==="document")r=hce(_o(e));else if(Ia(t))r=pce(t,s);else{const i=UO(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return sb(r)}function VO(e,t){const s=cc(e);return s===t||!Ia(s)||oh(s)?!1:Ma(s).position==="fixed"||VO(s,t)}function gce(e,t){const s=t.get(e);if(s)return s;let r=Kf(e,[],!1).filter(l=>Ia(l)&&Th(l)!=="body"),i=null;const a=Ma(e).position==="fixed";let o=a?cc(e):e;for(;Ia(o)&&!oh(o);){const l=Ma(o),u=j1(o);!u&&l.position==="fixed"&&(i=null),(a?!u&&!i:!u&&l.position==="static"&&!!i&&fce.has(i.position)||Pp(o)&&!u&&VO(e,o))?r=r.filter(m=>m!==o):i=l,o=cc(o)}return t.set(e,r),r}function xce(e){let{element:t,boundary:s,rootBoundary:r,strategy:i}=e;const o=[...s==="clippingAncestors"?fy(t)?[]:gce(t,this._c):[].concat(s),r],l=o[0],u=o.reduce((d,m)=>{const f=CD(t,m,i);return d.top=Pi(f.top,d.top),d.right=lc(f.right,d.right),d.bottom=lc(f.bottom,d.bottom),d.left=Pi(f.left,d.left),d},CD(t,l,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function vce(e){const{width:t,height:s}=HO(e);return{width:t,height:s}}function bce(e,t,s){const r=ho(t),i=_o(t),a=s==="fixed",o=hd(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const u=ao(0);function d(){u.x=gy(i)}if(r||!r&&!a)if((Th(t)!=="body"||Pp(i))&&(l=py(t)),r){const v=hd(t,!0,a,t);u.x=v.x+t.clientLeft,u.y=v.y+t.clientTop}else i&&d();a&&!r&&i&&d();const m=i&&!r&&!a?GO(i,l):ao(0),f=o.left+l.scrollLeft-u.x-m.x,x=o.top+l.scrollTop-u.y-m.y;return{x:f,y:x,width:o.width,height:o.height}}function Xj(e){return Ma(e).position==="static"}function kD(e,t){if(!ho(e)||Ma(e).position==="fixed")return null;if(t)return t(e);let s=e.offsetParent;return _o(e)===s&&(s=s.ownerDocument.body),s}function qO(e,t){const s=Oi(e);if(fy(e))return s;if(!ho(e)){let i=cc(e);for(;i&&!oh(i);){if(Ia(i)&&!Xj(i))return i;i=cc(i)}return s}let r=kD(e,t);for(;r&&tce(r)&&Xj(r);)r=kD(r,t);return r&&oh(r)&&Xj(r)&&!j1(r)?s:r||ace(e)||s}const yce=async function(e){const t=this.getOffsetParent||qO,s=this.getDimensions,r=await s(e.floating);return{reference:bce(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wce(e){return Ma(e).direction==="rtl"}const jce={convertOffsetParentRelativeRectToViewportRelativeRect:dce,getDocumentElement:_o,getClippingRect:xce,getOffsetParent:qO,getElementRects:yce,getClientRects:uce,getDimensions:vce,getScale:Vu,isElement:Ia,isRTL:wce};function WO(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Sce(e,t){let s=null,r;const i=_o(e);function a(){var l;clearTimeout(r),(l=s)==null||l.disconnect(),s=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),a();const d=e.getBoundingClientRect(),{left:m,top:f,width:x,height:v}=d;if(l||t(),!x||!v)return;const y=Nx(f),w=Nx(i.clientWidth-(m+x)),S=Nx(i.clientHeight-(f+v)),C=Nx(m),j={rootMargin:-y+"px "+-w+"px "+-S+"px "+-C+"px",threshold:Pi(0,lc(1,u))||1};let T=!0;function E(A){const R=A[0].intersectionRatio;if(R!==u){if(!T)return o();R?o(!1,R):r=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!WO(d,e.getBoundingClientRect())&&o(),T=!1}try{s=new IntersectionObserver(E,{...j,root:i.ownerDocument})}catch{s=new IntersectionObserver(E,j)}s.observe(e)}return o(!0),a}function _ce(e,t,s,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=_1(e),m=i||a?[...d?Kf(d):[],...Kf(t)]:[];m.forEach(C=>{i&&C.addEventListener("scroll",s,{passive:!0}),a&&C.addEventListener("resize",s)});const f=d&&l?Sce(d,s):null;let x=-1,v=null;o&&(v=new ResizeObserver(C=>{let[_]=C;_&&_.target===d&&v&&(v.unobserve(t),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var j;(j=v)==null||j.observe(t)})),s()}),d&&!u&&v.observe(d),v.observe(t));let y,w=u?hd(e):null;u&&S();function S(){const C=hd(e);w&&!WO(w,C)&&s(),w=C,y=requestAnimationFrame(S)}return s(),()=>{var C;m.forEach(_=>{i&&_.removeEventListener("scroll",s),a&&_.removeEventListener("resize",s)}),f?.(),(C=v)==null||C.disconnect(),v=null,u&&cancelAnimationFrame(y)}}const Nce=Yle,Cce=Xle,kce=qle,Ace=Qle,Ece=Wle,AD=Vle,Tce=Zle,Pce=(e,t,s)=>{const r=new Map,i={platform:jce,...s},a={...i.platform,_c:r};return Gle(e,t,{...i,platform:a})};var Rce=typeof document<"u",Dce=function(){},mv=Rce?p.useLayoutEffect:Dce;function nb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(r=s;r--!==0;)if(!nb(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),s=i.length,s!==Object.keys(t).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=s;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!nb(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function KO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ED(e,t){const s=KO(e);return Math.round(t*s)/s}function Zj(e){const t=p.useRef(e);return mv(()=>{t.current=e}),t}function Ice(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:u,open:d}=e,[m,f]=p.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[x,v]=p.useState(r);nb(x,r)||v(r);const[y,w]=p.useState(null),[S,C]=p.useState(null),_=p.useCallback(B=>{B!==A.current&&(A.current=B,w(B))},[]),j=p.useCallback(B=>{B!==R.current&&(R.current=B,C(B))},[]),T=a||y,E=o||S,A=p.useRef(null),R=p.useRef(null),D=p.useRef(m),M=u!=null,P=Zj(u),O=Zj(i),F=Zj(d),$=p.useCallback(()=>{if(!A.current||!R.current)return;const B={placement:t,strategy:s,middleware:x};O.current&&(B.platform=O.current),Pce(A.current,R.current,B).then(K=>{const L={...K,isPositioned:F.current!==!1};z.current&&!nb(D.current,L)&&(D.current=L,Di.flushSync(()=>{f(L)}))})},[x,t,s,O,F]);mv(()=>{d===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[d]);const z=p.useRef(!1);mv(()=>(z.current=!0,()=>{z.current=!1}),[]),mv(()=>{if(T&&(A.current=T),E&&(R.current=E),T&&E){if(P.current)return P.current(T,E,$);$()}},[T,E,$,P,M]);const H=p.useMemo(()=>({reference:A,floating:R,setReference:_,setFloating:j}),[_,j]),I=p.useMemo(()=>({reference:T,floating:E}),[T,E]),V=p.useMemo(()=>{const B={position:s,left:0,top:0};if(!I.floating)return B;const K=ED(I.floating,m.x),L=ED(I.floating,m.y);return l?{...B,transform:"translate("+K+"px, "+L+"px)",...KO(I.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:K,top:L}},[s,l,I.floating,m.x,m.y]);return p.useMemo(()=>({...m,update:$,refs:H,elements:I,floatingStyles:V}),[m,$,H,I,V])}const Mce=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:r,padding:i}=typeof e=="function"?e(s):e;return r&&t(r)?r.current!=null?AD({element:r.current,padding:i}).fn(s):{}:r?AD({element:r,padding:i}).fn(s):{}}}},Lce=(e,t)=>({...Nce(e),options:[e,t]}),Oce=(e,t)=>({...Cce(e),options:[e,t]}),Fce=(e,t)=>({...Tce(e),options:[e,t]}),Bce=(e,t)=>({...kce(e),options:[e,t]}),zce=(e,t)=>({...Ace(e),options:[e,t]}),$ce=(e,t)=>({...Ece(e),options:[e,t]}),Hce=(e,t)=>({...Mce(e),options:[e,t]});var Uce="Arrow",YO=p.forwardRef((e,t)=>{const{children:s,width:r=10,height:i=5,...a}=e;return n.jsx(ot.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});YO.displayName=Uce;var Gce=YO;function xy(e){const[t,s]=p.useState(void 0);return Hn(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;s({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else s(void 0)},[e]),t}var N1="Popper",[XO,fc]=ur(N1),[Vce,ZO]=XO(N1),QO=e=>{const{__scopePopper:t,children:s}=e,[r,i]=p.useState(null);return n.jsx(Vce,{scope:t,anchor:r,onAnchorChange:i,children:s})};QO.displayName=N1;var JO="PopperAnchor",eF=p.forwardRef((e,t)=>{const{__scopePopper:s,virtualRef:r,...i}=e,a=ZO(JO,s),o=p.useRef(null),l=Ct(t,o),u=p.useRef(null);return p.useEffect(()=>{const d=u.current;u.current=r?.current||o.current,d!==u.current&&a.onAnchorChange(u.current)}),r?null:n.jsx(ot.div,{...i,ref:l})});eF.displayName=JO;var C1="PopperContent",[qce,Wce]=XO(C1),tF=p.forwardRef((e,t)=>{const{__scopePopper:s,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:m=0,sticky:f="partial",hideWhenDetached:x=!1,updatePositionStrategy:v="optimized",onPlaced:y,...w}=e,S=ZO(C1,s),[C,_]=p.useState(null),j=Ct(t,ee=>_(ee)),[T,E]=p.useState(null),A=xy(T),R=A?.width??0,D=A?.height??0,M=r+(a!=="center"?"-"+a:""),P=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},O=Array.isArray(d)?d:[d],F=O.length>0,$={padding:P,boundary:O.filter(Yce),altBoundary:F},{refs:z,floatingStyles:H,placement:I,isPositioned:V,middlewareData:B}=Ice({strategy:"fixed",placement:M,whileElementsMounted:(...ee)=>_ce(...ee,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[Lce({mainAxis:i+D,alignmentAxis:o}),u&&Oce({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Fce():void 0,...$}),u&&Bce({...$}),zce({...$,apply:({elements:ee,rects:pe,availableWidth:fe,availableHeight:re})=>{const{width:Z,height:ie}=pe.reference,ce=ee.floating.style;ce.setProperty("--radix-popper-available-width",`${fe}px`),ce.setProperty("--radix-popper-available-height",`${re}px`),ce.setProperty("--radix-popper-anchor-width",`${Z}px`),ce.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),T&&Hce({element:T,padding:l}),Xce({arrowWidth:R,arrowHeight:D}),x&&$ce({strategy:"referenceHidden",...$})]}),[K,L]=rF(I),G=vn(y);Hn(()=>{V&&G?.()},[V,G]);const Y=B.arrow?.x,q=B.arrow?.y,Q=B.arrow?.centerOffset!==0,[se,te]=p.useState();return Hn(()=>{C&&te(window.getComputedStyle(C).zIndex)},[C]),n.jsx("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[B.transformOrigin?.x,B.transformOrigin?.y].join(" "),...B.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(qce,{scope:s,placedSide:K,onArrowChange:E,arrowX:Y,arrowY:q,shouldHideArrow:Q,children:n.jsx(ot.div,{"data-side":K,"data-align":L,...w,ref:j,style:{...w.style,animation:V?void 0:"none"}})})})});tF.displayName=C1;var sF="PopperArrow",Kce={top:"bottom",right:"left",bottom:"top",left:"right"},nF=p.forwardRef(function(t,s){const{__scopePopper:r,...i}=t,a=Wce(sF,r),o=Kce[a.placedSide];return n.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:n.jsx(Gce,{...i,ref:s,style:{...i.style,display:"block"}})})});nF.displayName=sF;function Yce(e){return e!==null}var Xce=e=>({name:"transformOrigin",options:e,fn(t){const{placement:s,rects:r,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[d,m]=rF(s),f={start:"0%",center:"50%",end:"100%"}[m],x=(i.arrow?.x??0)+l/2,v=(i.arrow?.y??0)+u/2;let y="",w="";return d==="bottom"?(y=o?f:`${x}px`,w=`${-u}px`):d==="top"?(y=o?f:`${x}px`,w=`${r.floating.height+u}px`):d==="right"?(y=`${-u}px`,w=o?f:`${v}px`):d==="left"&&(y=`${r.floating.width+u}px`,w=o?f:`${v}px`),{data:{x:y,y:w}}}});function rF(e){const[t,s="center"]=e.split("-");return[t,s]}var vy=QO,Rp=eF,by=tF,yy=nF,Zce="Portal",Ph=p.forwardRef((e,t)=>{const{container:s,...r}=e,[i,a]=p.useState(!1);Hn(()=>a(!0),[]);const o=s||i&&globalThis?.document?.body;return o?Nae.createPortal(n.jsx(ot.div,{...r,ref:t}),o):null});Ph.displayName=Zce;function Qce(e,t){return p.useReducer((s,r)=>t[s][r]??s,e)}var Dn=e=>{const{present:t,children:s}=e,r=Jce(t),i=typeof s=="function"?s({present:r.isPresent}):p.Children.only(s),a=Ct(r.ref,ede(i));return typeof s=="function"||r.isPresent?p.cloneElement(i,{ref:a}):null};Dn.displayName="Presence";function Jce(e){const[t,s]=p.useState(),r=p.useRef(null),i=p.useRef(e),a=p.useRef("none"),o=e?"mounted":"unmounted",[l,u]=Qce(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Cx(r.current);a.current=l==="mounted"?d:"none"},[l]),Hn(()=>{const d=r.current,m=i.current;if(m!==e){const x=a.current,v=Cx(d);e?u("MOUNT"):v==="none"||d?.display==="none"?u("UNMOUNT"):u(m&&x!==v?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),Hn(()=>{if(t){let d;const m=t.ownerDocument.defaultView??window,f=v=>{const w=Cx(r.current).includes(CSS.escape(v.animationName));if(v.target===t&&w&&(u("ANIMATION_END"),!i.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",d=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},x=v=>{v.target===t&&(a.current=Cx(r.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{m.clearTimeout(d),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{r.current=d?getComputedStyle(d):null,s(d)},[])}}function Cx(e){return e?.animationName||"none"}function ede(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var tde=Symbol("radix.slottable");function sde(e){const t=({children:s})=>n.jsx(n.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=tde,t}var nde=OC[" useInsertionEffect ".trim().toString()]||Hn;function $i({prop:e,defaultProp:t,onChange:s=()=>{},caller:r}){const[i,a,o]=rde({defaultProp:t,onChange:s}),l=e!==void 0,u=l?e:i;{const m=p.useRef(e!==void 0);p.useEffect(()=>{const f=m.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,r])}const d=p.useCallback(m=>{if(l){const f=ide(m)?m(e):m;f!==e&&o.current?.(f)}else a(m)},[l,e,a,o]);return[u,d]}function rde({defaultProp:e,onChange:t}){const[s,r]=p.useState(e),i=p.useRef(s),a=p.useRef(t);return nde(()=>{a.current=t},[t]),p.useEffect(()=>{i.current!==s&&(a.current?.(s),i.current=s)},[s,i]),[s,r,a]}function ide(e){return typeof e=="function"}var iF=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ade="VisuallyHidden",wy=p.forwardRef((e,t)=>n.jsx(ot.span,{...e,ref:t,style:{...iF,...e.style}}));wy.displayName=ade;var ode=wy,[jy]=ur("Tooltip",[fc]),Sy=fc(),aF="TooltipProvider",lde=700,G_="tooltip.open",[cde,k1]=jy(aF),oF=e=>{const{__scopeTooltip:t,delayDuration:s=lde,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,o=p.useRef(!0),l=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),n.jsx(cde,{scope:t,isOpenDelayedRef:o,delayDuration:s,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};oF.displayName=aF;var Yf="Tooltip",[dde,_y]=jy(Yf),lF=e=>{const{__scopeTooltip:t,children:s,open:r,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,u=k1(Yf,e.__scopeTooltip),d=Sy(t),[m,f]=p.useState(null),x=Li(),v=p.useRef(0),y=o??u.disableHoverableContent,w=l??u.delayDuration,S=p.useRef(!1),[C,_]=$i({prop:r,defaultProp:i??!1,onChange:R=>{R?(u.onOpen(),document.dispatchEvent(new CustomEvent(G_))):u.onClose(),a?.(R)},caller:Yf}),j=p.useMemo(()=>C?S.current?"delayed-open":"instant-open":"closed",[C]),T=p.useCallback(()=>{window.clearTimeout(v.current),v.current=0,S.current=!1,_(!0)},[_]),E=p.useCallback(()=>{window.clearTimeout(v.current),v.current=0,_(!1)},[_]),A=p.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{S.current=!0,_(!0),v.current=0},w)},[w,_]);return p.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),n.jsx(vy,{...d,children:n.jsx(dde,{scope:t,contentId:x,open:C,stateAttribute:j,trigger:m,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{u.isOpenDelayedRef.current?A():T()},[u.isOpenDelayedRef,A,T]),onTriggerLeave:p.useCallback(()=>{y?E():(window.clearTimeout(v.current),v.current=0)},[E,y]),onOpen:T,onClose:E,disableHoverableContent:y,children:s})})};lF.displayName=Yf;var V_="TooltipTrigger",cF=p.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,i=_y(V_,s),a=k1(V_,s),o=Sy(s),l=p.useRef(null),u=Ct(t,l,i.onTriggerChange),d=p.useRef(!1),m=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(Rp,{asChild:!0,...o,children:n.jsx(ot.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:Fe(e.onPointerMove,x=>{x.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),m.current=!0)}),onPointerLeave:Fe(e.onPointerLeave,()=>{i.onTriggerLeave(),m.current=!1}),onPointerDown:Fe(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Fe(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:Fe(e.onBlur,i.onClose),onClick:Fe(e.onClick,i.onClose)})})});cF.displayName=V_;var ude="TooltipPortal",[LLe,hde]=jy(ude,{forceMount:void 0}),lh="TooltipContent",dF=p.forwardRef((e,t)=>{const s=hde(lh,e.__scopeTooltip),{forceMount:r=s.forceMount,side:i="top",...a}=e,o=_y(lh,e.__scopeTooltip);return n.jsx(Dn,{present:r||o.open,children:o.disableHoverableContent?n.jsx(uF,{side:i,...a,ref:t}):n.jsx(mde,{side:i,...a,ref:t})})}),mde=p.forwardRef((e,t)=>{const s=_y(lh,e.__scopeTooltip),r=k1(lh,e.__scopeTooltip),i=p.useRef(null),a=Ct(t,i),[o,l]=p.useState(null),{trigger:u,onClose:d}=s,m=i.current,{onPointerInTransitChange:f}=r,x=p.useCallback(()=>{l(null),f(!1)},[f]),v=p.useCallback((y,w)=>{const S=y.currentTarget,C={x:y.clientX,y:y.clientY},_=vde(C,S.getBoundingClientRect()),j=bde(C,_),T=yde(w.getBoundingClientRect()),E=jde([...j,...T]);l(E),f(!0)},[f]);return p.useEffect(()=>()=>x(),[x]),p.useEffect(()=>{if(u&&m){const y=S=>v(S,m),w=S=>v(S,u);return u.addEventListener("pointerleave",y),m.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",y),m.removeEventListener("pointerleave",w)}}},[u,m,v,x]),p.useEffect(()=>{if(o){const y=w=>{const S=w.target,C={x:w.clientX,y:w.clientY},_=u?.contains(S)||m?.contains(S),j=!wde(C,o);_?x():j&&(x(),d())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[u,m,o,d,x]),n.jsx(uF,{...e,ref:a})}),[fde,pde]=jy(Yf,{isInside:!1}),gde=sde("TooltipContent"),uF=p.forwardRef((e,t)=>{const{__scopeTooltip:s,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,u=_y(lh,s),d=Sy(s),{onClose:m}=u;return p.useEffect(()=>(document.addEventListener(G_,m),()=>document.removeEventListener(G_,m)),[m]),p.useEffect(()=>{if(u.trigger){const f=x=>{x.target?.contains(u.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,m]),n.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:n.jsxs(by,{"data-state":u.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(gde,{children:r}),n.jsx(fde,{scope:s,isInside:!0,children:n.jsx(ode,{id:u.contentId,role:"tooltip",children:i||r})})]})})});dF.displayName=lh;var hF="TooltipArrow",xde=p.forwardRef((e,t)=>{const{__scopeTooltip:s,...r}=e,i=Sy(s);return pde(hF,s).isInside?null:n.jsx(yy,{...i,...r,ref:t})});xde.displayName=hF;function vde(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,r,i,a)){case a:return"left";case i:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function bde(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s});break}return r}function yde(e){const{top:t,right:s,bottom:r,left:i}=e;return[{x:i,y:t},{x:s,y:t},{x:s,y:r},{x:i,y:r}]}function wde(e,t){const{x:s,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],u=t[o],d=l.x,m=l.y,f=u.x,x=u.y;m>r!=x>r&&s<(f-d)*(r-m)/(x-m)+d&&(i=!i)}return i}function jde(e){const t=e.slice();return t.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),Sde(t)}function Sde(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;s.length>=2;){const a=s[s.length-1],o=s[s.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))s.pop();else break}s.push(i)}return s.pop(),t.length===1&&s.length===1&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}var _de=oF,Nde=lF,Cde=cF,mF=dF;function fF(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=fF(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function pF(){for(var e,t,s=0,r="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=fF(e))&&(r&&(r+=" "),r+=t);return r}const kde=(e,t)=>{const s=new Array(e.length+t.length);for(let r=0;r<e.length;r++)s[r]=e[r];for(let r=0;r<t.length;r++)s[e.length+r]=t[r];return s},Ade=(e,t)=>({classGroupId:e,validator:t}),gF=(e=new Map,t=null,s)=>({nextPart:e,validators:t,classGroupId:s}),rb="-",TD=[],Ede="arbitrary..",Tde=e=>{const t=Rde(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Pde(o);const l=o.split(rb),u=l[0]===""&&l.length>1?1:0;return xF(l,u,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const u=r[o],d=s[o];return u?d?kde(d,u):u:d||TD}return s[o]||TD}}},xF=(e,t,s)=>{if(e.length-t===0)return s.classGroupId;const i=e[t],a=s.nextPart.get(i);if(a){const d=xF(e,t+1,a);if(d)return d}const o=s.validators;if(o===null)return;const l=t===0?e.join(rb):e.slice(t).join(rb),u=o.length;for(let d=0;d<u;d++){const m=o[d];if(m.validator(l))return m.classGroupId}},Pde=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),s=t.indexOf(":"),r=t.slice(0,s);return r?Ede+r:void 0})(),Rde=e=>{const{theme:t,classGroups:s}=e;return Dde(s,t)},Dde=(e,t)=>{const s=gF();for(const r in e){const i=e[r];A1(i,s,r,t)}return s},A1=(e,t,s,r)=>{const i=e.length;for(let a=0;a<i;a++){const o=e[a];Ide(o,t,s,r)}},Ide=(e,t,s,r)=>{if(typeof e=="string"){Mde(e,t,s);return}if(typeof e=="function"){Lde(e,t,s,r);return}Ode(e,t,s,r)},Mde=(e,t,s)=>{const r=e===""?t:vF(t,e);r.classGroupId=s},Lde=(e,t,s,r)=>{if(Fde(e)){A1(e(r),t,s,r);return}t.validators===null&&(t.validators=[]),t.validators.push(Ade(s,e))},Ode=(e,t,s,r)=>{const i=Object.entries(e),a=i.length;for(let o=0;o<a;o++){const[l,u]=i[o];A1(u,vF(t,l),s,r)}},vF=(e,t)=>{let s=e;const r=t.split(rb),i=r.length;for(let a=0;a<i;a++){const o=r[a];let l=s.nextPart.get(o);l||(l=gF(),s.nextPart.set(o,l)),s=l}return s},Fde=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Bde=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=Object.create(null),r=Object.create(null);const i=(a,o)=>{s[a]=o,t++,t>e&&(t=0,r=s,s=Object.create(null))};return{get(a){let o=s[a];if(o!==void 0)return o;if((o=r[a])!==void 0)return i(a,o),o},set(a,o){a in s?s[a]=o:i(a,o)}}},q_="!",PD=":",zde=[],RD=(e,t,s,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:s,maybePostfixModifierPosition:r,isExternal:i}),$de=e=>{const{prefix:t,experimentalParseClassName:s}=e;let r=i=>{const a=[];let o=0,l=0,u=0,d;const m=i.length;for(let w=0;w<m;w++){const S=i[w];if(o===0&&l===0){if(S===PD){a.push(i.slice(u,w)),u=w+1;continue}if(S==="/"){d=w;continue}}S==="["?o++:S==="]"?o--:S==="("?l++:S===")"&&l--}const f=a.length===0?i:i.slice(u);let x=f,v=!1;f.endsWith(q_)?(x=f.slice(0,-1),v=!0):f.startsWith(q_)&&(x=f.slice(1),v=!0);const y=d&&d>u?d-u:void 0;return RD(a,v,x,y)};if(t){const i=t+PD,a=r;r=o=>o.startsWith(i)?a(o.slice(i.length)):RD(zde,!1,o,void 0,!0)}if(s){const i=r;r=a=>s({className:a,parseClassName:i})}return r},Hde=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((s,r)=>{t.set(s,1e6+r)}),s=>{const r=[];let i=[];for(let a=0;a<s.length;a++){const o=s[a],l=o[0]==="[",u=t.has(o);l||u?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},Ude=e=>({cache:Bde(e.cacheSize),parseClassName:$de(e),sortModifiers:Hde(e),...Tde(e)}),Gde=/\s+/,Vde=(e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=t,o=[],l=e.trim().split(Gde);let u="";for(let d=l.length-1;d>=0;d-=1){const m=l[d],{isExternal:f,modifiers:x,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:w}=s(m);if(f){u=m+(u.length>0?" "+u:u);continue}let S=!!w,C=r(S?y.substring(0,w):y);if(!C){if(!S){u=m+(u.length>0?" "+u:u);continue}if(C=r(y),!C){u=m+(u.length>0?" "+u:u);continue}S=!1}const _=x.length===0?"":x.length===1?x[0]:a(x).join(":"),j=v?_+q_:_,T=j+C;if(o.indexOf(T)>-1)continue;o.push(T);const E=i(C,S);for(let A=0;A<E.length;++A){const R=E[A];o.push(j+R)}u=m+(u.length>0?" "+u:u)}return u},qde=(...e)=>{let t=0,s,r,i="";for(;t<e.length;)(s=e[t++])&&(r=bF(s))&&(i&&(i+=" "),i+=r);return i},bF=e=>{if(typeof e=="string")return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=bF(e[r]))&&(s&&(s+=" "),s+=t);return s},Wde=(e,...t)=>{let s,r,i,a;const o=u=>{const d=t.reduce((m,f)=>f(m),e());return s=Ude(d),r=s.cache.get,i=s.cache.set,a=l,l(u)},l=u=>{const d=r(u);if(d)return d;const m=Vde(u,s);return i(u,m),m};return a=o,(...u)=>a(qde(...u))},Kde=[],Mn=e=>{const t=s=>s[e]||Kde;return t.isThemeGetter=!0,t},yF=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,wF=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Yde=/^\d+\/\d+$/,Xde=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zde=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Qde=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Jde=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eue=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gu=e=>Yde.test(e),Wt=e=>!!e&&!Number.isNaN(Number(e)),Ul=e=>!!e&&Number.isInteger(Number(e)),Qj=e=>e.endsWith("%")&&Wt(e.slice(0,-1)),Wo=e=>Xde.test(e),tue=()=>!0,sue=e=>Zde.test(e)&&!Qde.test(e),jF=()=>!1,nue=e=>Jde.test(e),rue=e=>eue.test(e),iue=e=>!it(e)&&!at(e),aue=e=>Rh(e,NF,jF),it=e=>yF.test(e),Fc=e=>Rh(e,CF,sue),Jj=e=>Rh(e,uue,Wt),DD=e=>Rh(e,SF,jF),oue=e=>Rh(e,_F,rue),kx=e=>Rh(e,kF,nue),at=e=>wF.test(e),Gm=e=>Dh(e,CF),lue=e=>Dh(e,hue),ID=e=>Dh(e,SF),cue=e=>Dh(e,NF),due=e=>Dh(e,_F),Ax=e=>Dh(e,kF,!0),Rh=(e,t,s)=>{const r=yF.exec(e);return r?r[1]?t(r[1]):s(r[2]):!1},Dh=(e,t,s=!1)=>{const r=wF.exec(e);return r?r[1]?t(r[1]):s:!1},SF=e=>e==="position"||e==="percentage",_F=e=>e==="image"||e==="url",NF=e=>e==="length"||e==="size"||e==="bg-size",CF=e=>e==="length",uue=e=>e==="number",hue=e=>e==="family-name",kF=e=>e==="shadow",mue=()=>{const e=Mn("color"),t=Mn("font"),s=Mn("text"),r=Mn("font-weight"),i=Mn("tracking"),a=Mn("leading"),o=Mn("breakpoint"),l=Mn("container"),u=Mn("spacing"),d=Mn("radius"),m=Mn("shadow"),f=Mn("inset-shadow"),x=Mn("text-shadow"),v=Mn("drop-shadow"),y=Mn("blur"),w=Mn("perspective"),S=Mn("aspect"),C=Mn("ease"),_=Mn("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...T(),at,it],A=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],D=()=>[at,it,u],M=()=>[gu,"full","auto",...D()],P=()=>[Ul,"none","subgrid",at,it],O=()=>["auto",{span:["full",Ul,at,it]},Ul,at,it],F=()=>[Ul,"auto",at,it],$=()=>["auto","min","max","fr",at,it],z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...D()],V=()=>[gu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],B=()=>[e,at,it],K=()=>[...T(),ID,DD,{position:[at,it]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],G=()=>["auto","cover","contain",cue,aue,{size:[at,it]}],Y=()=>[Qj,Gm,Fc],q=()=>["","none","full",d,at,it],Q=()=>["",Wt,Gm,Fc],se=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[Wt,Qj,ID,DD],pe=()=>["","none",y,at,it],fe=()=>["none",Wt,at,it],re=()=>["none",Wt,at,it],Z=()=>[Wt,at,it],ie=()=>[gu,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Wo],breakpoint:[Wo],color:[tue],container:[Wo],"drop-shadow":[Wo],ease:["in","out","in-out"],font:[iue],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Wo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Wo],shadow:[Wo],spacing:["px",Wt],text:[Wo],"text-shadow":[Wo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gu,it,at,S]}],container:["container"],columns:[{columns:[Wt,it,at,l]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Ul,"auto",at,it]}],basis:[{basis:[gu,"full","auto",l,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Wt,gu,"auto","initial","none",it]}],grow:[{grow:["",Wt,at,it]}],shrink:[{shrink:["",Wt,at,it]}],order:[{order:[Ul,"first","last","none",at,it]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[l,"screen",...V()]}],"min-w":[{"min-w":[l,"screen","none",...V()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",s,Gm,Fc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,at,Jj]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Qj,it]}],"font-family":[{font:[lue,it,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,at,it]}],"line-clamp":[{"line-clamp":[Wt,"none",at,Jj]}],leading:[{leading:[a,...D()]}],"list-image":[{"list-image":["none",at,it]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",at,it]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Wt,"from-font","auto",at,Fc]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Wt,"auto",at,it]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",at,it]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",at,it]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:G()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ul,at,it],radial:["",at,it],conic:[Ul,at,it]},due,oue]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:Q()}],"border-w-x":[{"border-x":Q()}],"border-w-y":[{"border-y":Q()}],"border-w-s":[{"border-s":Q()}],"border-w-e":[{"border-e":Q()}],"border-w-t":[{"border-t":Q()}],"border-w-r":[{"border-r":Q()}],"border-w-b":[{"border-b":Q()}],"border-w-l":[{"border-l":Q()}],"divide-x":[{"divide-x":Q()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Q()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...se(),"hidden","none"]}],"divide-style":[{divide:[...se(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Wt,at,it]}],"outline-w":[{outline:["",Wt,Gm,Fc]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",m,Ax,kx]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",f,Ax,kx]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:Q()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Wt,Fc]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":Q()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",x,Ax,kx]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Wt,at,it]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Wt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[at,it]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[Wt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:G()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",at,it]}],filter:[{filter:["","none",at,it]}],blur:[{blur:pe()}],brightness:[{brightness:[Wt,at,it]}],contrast:[{contrast:[Wt,at,it]}],"drop-shadow":[{"drop-shadow":["","none",v,Ax,kx]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Wt,at,it]}],"hue-rotate":[{"hue-rotate":[Wt,at,it]}],invert:[{invert:["",Wt,at,it]}],saturate:[{saturate:[Wt,at,it]}],sepia:[{sepia:["",Wt,at,it]}],"backdrop-filter":[{"backdrop-filter":["","none",at,it]}],"backdrop-blur":[{"backdrop-blur":pe()}],"backdrop-brightness":[{"backdrop-brightness":[Wt,at,it]}],"backdrop-contrast":[{"backdrop-contrast":[Wt,at,it]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Wt,at,it]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Wt,at,it]}],"backdrop-invert":[{"backdrop-invert":["",Wt,at,it]}],"backdrop-opacity":[{"backdrop-opacity":[Wt,at,it]}],"backdrop-saturate":[{"backdrop-saturate":[Wt,at,it]}],"backdrop-sepia":[{"backdrop-sepia":["",Wt,at,it]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",at,it]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Wt,"initial",at,it]}],ease:[{ease:["linear","initial",C,at,it]}],delay:[{delay:[Wt,at,it]}],animate:[{animate:["none",_,at,it]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,at,it]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:fe()}],"rotate-x":[{"rotate-x":fe()}],"rotate-y":[{"rotate-y":fe()}],"rotate-z":[{"rotate-z":fe()}],scale:[{scale:re()}],"scale-x":[{"scale-x":re()}],"scale-y":[{"scale-y":re()}],"scale-z":[{"scale-z":re()}],"scale-3d":["scale-3d"],skew:[{skew:Z()}],"skew-x":[{"skew-x":Z()}],"skew-y":[{"skew-y":Z()}],transform:[{transform:[at,it,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ie()}],"translate-x":[{"translate-x":ie()}],"translate-y":[{"translate-y":ie()}],"translate-z":[{"translate-z":ie()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",at,it]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",at,it]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Wt,Gm,Fc,Jj]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},fue=Wde(mue);function J(...e){return fue(pF(e))}function AF(e){if(e.length===0)return 0;const t=e.filter(s=>s.status==="completed").length;return Math.round(t/e.length*100)}function W_(e){const s=new Date().getTime()-new Date(e).getTime(),r=Math.floor(s/6e4),i=Math.floor(r/60),a=Math.floor(i/24);return r<1?"just now":r<60?`${r}m ago`:i<24?`${i}h ago`:a<7?`${a}d ago`:new Date(e).toLocaleDateString()}function MD(e,t=200){if(!e)return"";let s=e.replace(/^#{1,6}\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/__([^_]+)__/g,"$1").replace(/_([^_]+)_/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/!\[([^\]]*)\]\([^)]+\)/g,"").replace(/^[-*_]{3,}$/gm,"").replace(/^>\s*/gm,"").replace(/^[\s]*[-*+]\s+/gm,"").replace(/^[\s]*\d+\.\s+/gm,"").replace(/\[[ x]\]\s*/gi,"").replace(/\n+/g," ").replace(/\s+/g," ").trim();return t>0&&s.length>t&&(s=s.substring(0,t).trim()+"..."),s}const ul=_de,ft=Nde,pt=Cde,mt=p.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(mF,{ref:r,sideOffset:t,className:J("z-50 overflow-hidden rounded-lg border border-border bg-card px-3 py-1.5 text-sm text-foreground shadow-lg","animate-in fade-in-0 zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));mt.displayName=mF.displayName;var pue=Symbol.for("react.lazy"),ib=OC[" use ".trim().toString()];function gue(e){return typeof e=="object"&&e!==null&&"then"in e}function EF(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===pue&&"_payload"in e&&gue(e._payload)}function E1(e){const t=vue(e),s=p.forwardRef((r,i)=>{let{children:a,...o}=r;EF(a)&&typeof ib=="function"&&(a=ib(a._payload));const l=p.Children.toArray(a),u=l.find(yue);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}var xue=E1("Slot");function vue(e){const t=p.forwardRef((s,r)=>{let{children:i,...a}=s;if(EF(i)&&typeof ib=="function"&&(i=ib(i._payload)),p.isValidElement(i)){const o=jue(i),l=wue(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bue=Symbol("radix.slottable");function yue(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bue}function wue(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function jue(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}const LD=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,OD=pF,Ny=(e,t)=>s=>{var r;if(t?.variants==null)return OD(e,s?.class,s?.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const m=s?.[d],f=a?.[d];if(m===null)return null;const x=LD(m)||LD(f);return i[d][x]}),l=s&&Object.entries(s).reduce((d,m)=>{let[f,x]=m;return x===void 0||(d[f]=x),d},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,m)=>{let{class:f,className:x,...v}=m;return Object.entries(v).every(y=>{let[w,S]=y;return Array.isArray(S)?S.includes({...a,...l}[w]):{...a,...l}[w]===S})?[...d,f,x]:d},[]);return OD(e,o,u,s?.class,s?.className)},T1=Ny("inline-flex items-center justify-center whitespace-nowrap font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:scale-[0.98]",outline:"border border-border bg-transparent hover:bg-accent hover:text-accent-foreground active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:scale-[0.98]",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-[var(--success)] text-[var(--success-foreground)] hover:bg-[var(--success)]/90 active:scale-[0.98]",warning:"bg-warning text-warning-foreground hover:bg-warning/90 active:scale-[0.98]",info:"bg-info text-info-foreground hover:bg-info/90 active:scale-[0.98]"},size:{default:"h-10 px-4 py-2 text-sm rounded-lg",sm:"h-8 px-3 text-xs rounded-md",lg:"h-12 px-6 text-base rounded-lg",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),W=p.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},a)=>{const o=r?xue:"button";return n.jsx(o,{className:J(T1({variant:t,size:s,className:e})),ref:a,...i})});W.displayName="Button";function FD(e){const t=Sue(e),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),u=l.find(Nue);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function Sue(e){const t=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=kue(i),l=Cue(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _ue=Symbol("radix.slottable");function Nue(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_ue}function Cue(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function kue(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function Cy(e){const t=e+"CollectionProvider",[s,r]=ur(t),[i,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:S,children:C}=w,_=Vt.useRef(null),j=Vt.useRef(new Map).current;return n.jsx(i,{scope:S,itemMap:j,collectionRef:_,children:C})};o.displayName=t;const l=e+"CollectionSlot",u=FD(l),d=Vt.forwardRef((w,S)=>{const{scope:C,children:_}=w,j=a(l,C),T=Ct(S,j.collectionRef);return n.jsx(u,{ref:T,children:_})});d.displayName=l;const m=e+"CollectionItemSlot",f="data-radix-collection-item",x=FD(m),v=Vt.forwardRef((w,S)=>{const{scope:C,children:_,...j}=w,T=Vt.useRef(null),E=Ct(S,T),A=a(m,C);return Vt.useEffect(()=>(A.itemMap.set(T,{ref:T,...j}),()=>{A.itemMap.delete(T)})),n.jsx(x,{[f]:"",ref:E,children:_})});v.displayName=m;function y(w){const S=a(e+"CollectionConsumer",w);return Vt.useCallback(()=>{const _=S.collectionRef.current;if(!_)return[];const j=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(S.itemMap.values()).sort((A,R)=>j.indexOf(A.ref.current)-j.indexOf(R.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:d,ItemSlot:v},y,r]}var P1="ToastProvider",[R1,Aue,Eue]=Cy("Toast"),[TF]=ur("Toast",[Eue]),[Tue,ky]=TF(P1),PF=e=>{const{__scopeToast:t,label:s="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,u]=p.useState(null),[d,m]=p.useState(0),f=p.useRef(!1),x=p.useRef(!1);return s.trim()||console.error(`Invalid prop \`label\` supplied to \`${P1}\`. Expected non-empty \`string\`.`),n.jsx(R1.Provider,{scope:t,children:n.jsx(Tue,{scope:t,label:s,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:u,onToastAdd:p.useCallback(()=>m(v=>v+1),[]),onToastRemove:p.useCallback(()=>m(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:x,children:o})})};PF.displayName=P1;var RF="ToastViewport",Pue=["F8"],K_="toast.viewportPause",Y_="toast.viewportResume",DF=p.forwardRef((e,t)=>{const{__scopeToast:s,hotkey:r=Pue,label:i="Notifications ({hotkey})",...a}=e,o=ky(RF,s),l=Aue(s),u=p.useRef(null),d=p.useRef(null),m=p.useRef(null),f=p.useRef(null),x=Ct(t,f,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;p.useEffect(()=>{const S=C=>{r.length!==0&&r.every(j=>C[j]||C.code===j)&&f.current?.focus()};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[r]),p.useEffect(()=>{const S=u.current,C=f.current;if(y&&S&&C){const _=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(K_);C.dispatchEvent(A),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(Y_);C.dispatchEvent(A),o.isClosePausedRef.current=!1}},T=A=>{!S.contains(A.relatedTarget)&&j()},E=()=>{S.contains(document.activeElement)||j()};return S.addEventListener("focusin",_),S.addEventListener("focusout",T),S.addEventListener("pointermove",_),S.addEventListener("pointerleave",E),window.addEventListener("blur",_),window.addEventListener("focus",j),()=>{S.removeEventListener("focusin",_),S.removeEventListener("focusout",T),S.removeEventListener("pointermove",_),S.removeEventListener("pointerleave",E),window.removeEventListener("blur",_),window.removeEventListener("focus",j)}}},[y,o.isClosePausedRef]);const w=p.useCallback(({tabbingDirection:S})=>{const _=l().map(j=>{const T=j.ref.current,E=[T,...Gue(T)];return S==="forwards"?E:E.reverse()});return(S==="forwards"?_.reverse():_).flat()},[l]);return p.useEffect(()=>{const S=f.current;if(S){const C=_=>{const j=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!j){const E=document.activeElement,A=_.shiftKey;if(_.target===S&&A){d.current?.focus();return}const M=w({tabbingDirection:A?"backwards":"forwards"}),P=M.findIndex(O=>O===E);eS(M.slice(P+1))?_.preventDefault():A?d.current?.focus():m.current?.focus()}};return S.addEventListener("keydown",C),()=>S.removeEventListener("keydown",C)}},[l,w]),n.jsxs(Tle,{ref:u,role:"region","aria-label":i.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&n.jsx(X_,{ref:d,onFocusFromOutsideViewport:()=>{const S=w({tabbingDirection:"forwards"});eS(S)}}),n.jsx(R1.Slot,{scope:s,children:n.jsx(ot.ol,{tabIndex:-1,...a,ref:x})}),y&&n.jsx(X_,{ref:m,onFocusFromOutsideViewport:()=>{const S=w({tabbingDirection:"backwards"});eS(S)}})]})});DF.displayName=RF;var IF="ToastFocusProxy",X_=p.forwardRef((e,t)=>{const{__scopeToast:s,onFocusFromOutsideViewport:r,...i}=e,a=ky(IF,s);return n.jsx(wy,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!a.viewport?.contains(l)&&r()}})});X_.displayName=IF;var Dp="Toast",Rue="toast.swipeStart",Due="toast.swipeMove",Iue="toast.swipeCancel",Mue="toast.swipeEnd",MF=p.forwardRef((e,t)=>{const{forceMount:s,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[l,u]=$i({prop:r,defaultProp:i??!0,onChange:a,caller:Dp});return n.jsx(Dn,{present:s||l,children:n.jsx(Fue,{open:l,...o,ref:t,onClose:()=>u(!1),onPause:vn(e.onPause),onResume:vn(e.onResume),onSwipeStart:Fe(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Fe(e.onSwipeMove,d=>{const{x:m,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Fe(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Fe(e.onSwipeEnd,d=>{const{x:m,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${m}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),u(!1)})})})});MF.displayName=Dp;var[Lue,Oue]=TF(Dp,{onClose(){}}),Fue=p.forwardRef((e,t)=>{const{__scopeToast:s,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:u,onResume:d,onSwipeStart:m,onSwipeMove:f,onSwipeCancel:x,onSwipeEnd:v,...y}=e,w=ky(Dp,s),[S,C]=p.useState(null),_=Ct(t,z=>C(z)),j=p.useRef(null),T=p.useRef(null),E=i||w.duration,A=p.useRef(0),R=p.useRef(E),D=p.useRef(0),{onToastAdd:M,onToastRemove:P}=w,O=vn(()=>{S?.contains(document.activeElement)&&w.viewport?.focus(),o()}),F=p.useCallback(z=>{!z||z===1/0||(window.clearTimeout(D.current),A.current=new Date().getTime(),D.current=window.setTimeout(O,z))},[O]);p.useEffect(()=>{const z=w.viewport;if(z){const H=()=>{F(R.current),d?.()},I=()=>{const V=new Date().getTime()-A.current;R.current=R.current-V,window.clearTimeout(D.current),u?.()};return z.addEventListener(K_,I),z.addEventListener(Y_,H),()=>{z.removeEventListener(K_,I),z.removeEventListener(Y_,H)}}},[w.viewport,E,u,d,F]),p.useEffect(()=>{a&&!w.isClosePausedRef.current&&F(E)},[a,E,w.isClosePausedRef,F]),p.useEffect(()=>(M(),()=>P()),[M,P]);const $=p.useMemo(()=>S?HF(S):null,[S]);return w.viewport?n.jsxs(n.Fragment,{children:[$&&n.jsx(Bue,{__scopeToast:s,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:$}),n.jsx(Lue,{scope:s,onClose:O,children:Di.createPortal(n.jsx(R1.ItemSlot,{scope:s,children:n.jsx(Ele,{asChild:!0,onEscapeKeyDown:Fe(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||O(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(ot.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":w.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Fe(e.onKeyDown,z=>{z.key==="Escape"&&(l?.(z.nativeEvent),z.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Fe(e.onPointerDown,z=>{z.button===0&&(j.current={x:z.clientX,y:z.clientY})}),onPointerMove:Fe(e.onPointerMove,z=>{if(!j.current)return;const H=z.clientX-j.current.x,I=z.clientY-j.current.y,V=!!T.current,B=["left","right"].includes(w.swipeDirection),K=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,L=B?K(0,H):0,G=B?0:K(0,I),Y=z.pointerType==="touch"?10:2,q={x:L,y:G},Q={originalEvent:z,delta:q};V?(T.current=q,Ex(Due,f,Q,{discrete:!1})):BD(q,w.swipeDirection,Y)?(T.current=q,Ex(Rue,m,Q,{discrete:!1}),z.target.setPointerCapture(z.pointerId)):(Math.abs(H)>Y||Math.abs(I)>Y)&&(j.current=null)}),onPointerUp:Fe(e.onPointerUp,z=>{const H=T.current,I=z.target;if(I.hasPointerCapture(z.pointerId)&&I.releasePointerCapture(z.pointerId),T.current=null,j.current=null,H){const V=z.currentTarget,B={originalEvent:z,delta:H};BD(H,w.swipeDirection,w.swipeThreshold)?Ex(Mue,v,B,{discrete:!0}):Ex(Iue,x,B,{discrete:!0}),V.addEventListener("click",K=>K.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Bue=e=>{const{__scopeToast:t,children:s,...r}=e,i=ky(Dp,t),[a,o]=p.useState(!1),[l,u]=p.useState(!1);return Hue(()=>o(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(Ph,{asChild:!0,children:n.jsx(wy,{...r,children:a&&n.jsxs(n.Fragment,{children:[i.label," ",s]})})})},zue="ToastTitle",LF=p.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e;return n.jsx(ot.div,{...r,ref:t})});LF.displayName=zue;var $ue="ToastDescription",OF=p.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e;return n.jsx(ot.div,{...r,ref:t})});OF.displayName=$ue;var FF="ToastAction",BF=p.forwardRef((e,t)=>{const{altText:s,...r}=e;return s.trim()?n.jsx($F,{altText:s,asChild:!0,children:n.jsx(D1,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${FF}\`. Expected non-empty \`string\`.`),null)});BF.displayName=FF;var zF="ToastClose",D1=p.forwardRef((e,t)=>{const{__scopeToast:s,...r}=e,i=Oue(zF,s);return n.jsx($F,{asChild:!0,children:n.jsx(ot.button,{type:"button",...r,ref:t,onClick:Fe(e.onClick,i.onClose)})})});D1.displayName=zF;var $F=p.forwardRef((e,t)=>{const{__scopeToast:s,altText:r,...i}=e;return n.jsx(ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function HF(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Uue(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...HF(r))}}),t}function Ex(e,t,s,{discrete:r}){const i=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&i.addEventListener(e,t,{once:!0}),r?v1(i,a):i.dispatchEvent(a)}var BD=(e,t,s=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>s:!a&&i>s};function Hue(e=()=>{}){const t=vn(e);Hn(()=>{let s=0,r=0;return s=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(s),window.cancelAnimationFrame(r)}},[t])}function Uue(e){return e.nodeType===e.ELEMENT_NODE}function Gue(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function eS(e){const t=document.activeElement;return e.some(s=>s===t?!0:(s.focus(),document.activeElement!==t))}var Vue=PF,UF=DF,GF=MF,VF=LF,qF=OF,WF=BF,KF=D1;const que=Vue,YF=p.forwardRef(({className:e,...t},s)=>n.jsx(UF,{ref:s,className:J("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));YF.displayName=UF.displayName;const Wue=Ny("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-card text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),XF=p.forwardRef(({className:e,variant:t,...s},r)=>n.jsx(GF,{ref:r,className:J(Wue({variant:t}),e),...s}));XF.displayName=GF.displayName;const Kue=p.forwardRef(({className:e,...t},s)=>n.jsx(WF,{ref:s,className:J("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Kue.displayName=WF.displayName;const ZF=p.forwardRef(({className:e,...t},s)=>n.jsx(KF,{ref:s,className:J("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Ss,{className:"h-4 w-4"})}));ZF.displayName=KF.displayName;const QF=p.forwardRef(({className:e,...t},s)=>n.jsx(VF,{ref:s,className:J("text-sm font-semibold",e),...t}));QF.displayName=VF.displayName;const JF=p.forwardRef(({className:e,...t},s)=>n.jsx(qF,{ref:s,className:J("text-sm opacity-90",e),...t}));JF.displayName=qF.displayName;function Yue(){const{toasts:e}=bo();return n.jsxs(que,{children:[e.map(function({id:t,title:s,description:r,action:i,...a}){return n.jsxs(XF,{...a,children:[n.jsxs("div",{className:"grid gap-1",children:[s&&n.jsx(QF,{children:s}),r&&n.jsx(JF,{children:r})]}),i,n.jsx(ZF,{})]},t)}),n.jsx(YF,{})]})}var tS="focusScope.autoFocusOnMount",sS="focusScope.autoFocusOnUnmount",zD={bubbles:!1,cancelable:!0},Xue="FocusScope",Ip=p.forwardRef((e,t)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,u]=p.useState(null),d=vn(i),m=vn(a),f=p.useRef(null),x=Ct(t,w=>u(w)),v=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let w=function(j){if(v.paused||!l)return;const T=j.target;l.contains(T)?f.current=T:Kl(f.current,{select:!0})},S=function(j){if(v.paused||!l)return;const T=j.relatedTarget;T!==null&&(l.contains(T)||Kl(f.current,{select:!0}))},C=function(j){if(document.activeElement===document.body)for(const E of j)E.removedNodes.length>0&&Kl(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",S);const _=new MutationObserver(C);return l&&_.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",S),_.disconnect()}}},[r,l,v.paused]),p.useEffect(()=>{if(l){HD.add(v);const w=document.activeElement;if(!l.contains(w)){const C=new CustomEvent(tS,zD);l.addEventListener(tS,d),l.dispatchEvent(C),C.defaultPrevented||(Zue(she(eB(l)),{select:!0}),document.activeElement===w&&Kl(l))}return()=>{l.removeEventListener(tS,d),setTimeout(()=>{const C=new CustomEvent(sS,zD);l.addEventListener(sS,m),l.dispatchEvent(C),C.defaultPrevented||Kl(w??document.body,{select:!0}),l.removeEventListener(sS,m),HD.remove(v)},0)}}},[l,d,m,v]);const y=p.useCallback(w=>{if(!s&&!r||v.paused)return;const S=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(S&&C){const _=w.currentTarget,[j,T]=Que(_);j&&T?!w.shiftKey&&C===T?(w.preventDefault(),s&&Kl(j,{select:!0})):w.shiftKey&&C===j&&(w.preventDefault(),s&&Kl(T,{select:!0})):C===_&&w.preventDefault()}},[s,r,v.paused]);return n.jsx(ot.div,{tabIndex:-1,...o,ref:x,onKeyDown:y})});Ip.displayName=Xue;function Zue(e,{select:t=!1}={}){const s=document.activeElement;for(const r of e)if(Kl(r,{select:t}),document.activeElement!==s)return}function Que(e){const t=eB(e),s=$D(t,e),r=$D(t.reverse(),e);return[s,r]}function eB(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function $D(e,t){for(const s of e)if(!Jue(s,{upTo:t}))return s}function Jue(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ehe(e){return e instanceof HTMLInputElement&&"select"in e}function Kl(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&ehe(e)&&t&&e.select()}}var HD=the();function the(){let e=[];return{add(t){const s=e[0];t!==s&&s?.pause(),e=UD(e,t),e.unshift(t)},remove(t){e=UD(e,t),e[0]?.resume()}}}function UD(e,t){const s=[...e],r=s.indexOf(t);return r!==-1&&s.splice(r,1),s}function she(e){return e.filter(t=>t.tagName!=="A")}var nS=0;function Ay(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??GD()),document.body.insertAdjacentElement("beforeend",e[1]??GD()),nS++,()=>{nS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),nS--}},[])}function GD(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var eo=function(){return eo=Object.assign||function(t){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},eo.apply(this,arguments)};function tB(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]]);return s}function nhe(e,t,s){if(s||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var fv="right-scroll-bar-position",pv="width-before-scroll-bar",rhe="with-scroll-bars-hidden",ihe="--removed-body-scroll-bar-size";function rS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ahe(e,t){var s=p.useState(function(){return{value:e,callback:t,facade:{get current(){return s.value},set current(r){var i=s.value;i!==r&&(s.value=r,s.callback(r,i))}}}})[0];return s.callback=t,s.facade}var ohe=typeof window<"u"?p.useLayoutEffect:p.useEffect,VD=new WeakMap;function lhe(e,t){var s=ahe(null,function(r){return e.forEach(function(i){return rS(i,r)})});return ohe(function(){var r=VD.get(s);if(r){var i=new Set(r),a=new Set(e),o=s.current;i.forEach(function(l){a.has(l)||rS(l,null)}),a.forEach(function(l){i.has(l)||rS(l,o)})}VD.set(s,e)},[e]),s}function che(e){return e}function dhe(e,t){t===void 0&&(t=che);var s=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(a){var o=t(a,r);return s.push(o),function(){s=s.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;s.length;){var o=s;s=[],o.forEach(a)}s={push:function(l){return a(l)},filter:function(){return s}}},assignMedium:function(a){r=!0;var o=[];if(s.length){var l=s;s=[],l.forEach(a),o=s}var u=function(){var m=o;o=[],m.forEach(a)},d=function(){return Promise.resolve().then(u)};d(),s={push:function(m){o.push(m),d()},filter:function(m){return o=o.filter(m),s}}}};return i}function uhe(e){e===void 0&&(e={});var t=dhe(null);return t.options=eo({async:!0,ssr:!1},e),t}var sB=function(e){var t=e.sideCar,s=tB(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,eo({},s))};sB.isSideCarExport=!0;function hhe(e,t){return e.useMedium(t),sB}var nB=uhe(),iS=function(){},Ey=p.forwardRef(function(e,t){var s=p.useRef(null),r=p.useState({onScrollCapture:iS,onWheelCapture:iS,onTouchMoveCapture:iS}),i=r[0],a=r[1],o=e.forwardProps,l=e.children,u=e.className,d=e.removeScrollBar,m=e.enabled,f=e.shards,x=e.sideCar,v=e.noRelative,y=e.noIsolation,w=e.inert,S=e.allowPinchZoom,C=e.as,_=C===void 0?"div":C,j=e.gapMode,T=tB(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=x,A=lhe([s,t]),R=eo(eo({},T),i);return p.createElement(p.Fragment,null,m&&p.createElement(E,{sideCar:nB,removeScrollBar:d,shards:f,noRelative:v,noIsolation:y,inert:w,setCallbacks:a,allowPinchZoom:!!S,lockRef:s,gapMode:j}),o?p.cloneElement(p.Children.only(l),eo(eo({},R),{ref:A})):p.createElement(_,eo({},R,{className:u,ref:A}),l))});Ey.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ey.classNames={fullWidth:pv,zeroRight:fv};var mhe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fhe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=mhe();return t&&e.setAttribute("nonce",t),e}function phe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ghe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xhe=function(){var e=0,t=null;return{add:function(s){e==0&&(t=fhe())&&(phe(t,s),ghe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vhe=function(){var e=xhe();return function(t,s){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},rB=function(){var e=vhe(),t=function(s){var r=s.styles,i=s.dynamic;return e(r,i),null};return t},bhe={left:0,top:0,right:0,gap:0},aS=function(e){return parseInt(e||"",10)||0},yhe=function(e){var t=window.getComputedStyle(document.body),s=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[aS(s),aS(r),aS(i)]},whe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return bhe;var t=yhe(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-s+t[2]-t[0])}},jhe=rB(),qu="data-scroll-locked",She=function(e,t,s,r){var i=e.left,a=e.top,o=e.right,l=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(rhe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(qu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(pv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(pv," .").concat(pv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qu,`] {
    `).concat(ihe,": ").concat(l,`px;
  }
`)},qD=function(){var e=parseInt(document.body.getAttribute(qu)||"0",10);return isFinite(e)?e:0},_he=function(){p.useEffect(function(){return document.body.setAttribute(qu,(qD()+1).toString()),function(){var e=qD()-1;e<=0?document.body.removeAttribute(qu):document.body.setAttribute(qu,e.toString())}},[])},Nhe=function(e){var t=e.noRelative,s=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;_he();var a=p.useMemo(function(){return whe(i)},[i]);return p.createElement(jhe,{styles:She(a,!t,i,s?"":"!important")})},Z_=!1;if(typeof window<"u")try{var Tx=Object.defineProperty({},"passive",{get:function(){return Z_=!0,!0}});window.addEventListener("test",Tx,Tx),window.removeEventListener("test",Tx,Tx)}catch{Z_=!1}var xu=Z_?{passive:!1}:!1,Che=function(e){return e.tagName==="TEXTAREA"},iB=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[t]!=="hidden"&&!(s.overflowY===s.overflowX&&!Che(e)&&s[t]==="visible")},khe=function(e){return iB(e,"overflowY")},Ahe=function(e){return iB(e,"overflowX")},WD=function(e,t){var s=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=aB(e,r);if(i){var a=oB(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},Ehe=function(e){var t=e.scrollTop,s=e.scrollHeight,r=e.clientHeight;return[t,s,r]},The=function(e){var t=e.scrollLeft,s=e.scrollWidth,r=e.clientWidth;return[t,s,r]},aB=function(e,t){return e==="v"?khe(t):Ahe(t)},oB=function(e,t){return e==="v"?Ehe(t):The(t)},Phe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Rhe=function(e,t,s,r,i){var a=Phe(e,window.getComputedStyle(t).direction),o=a*r,l=s.target,u=t.contains(l),d=!1,m=o>0,f=0,x=0;do{if(!l)break;var v=oB(e,l),y=v[0],w=v[1],S=v[2],C=w-S-a*y;(y||C)&&aB(e,l)&&(f+=C,x+=y);var _=l.parentNode;l=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return(m&&Math.abs(f)<1||!m&&Math.abs(x)<1)&&(d=!0),d},Px=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},KD=function(e){return[e.deltaX,e.deltaY]},YD=function(e){return e&&"current"in e?e.current:e},Dhe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ihe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Mhe=0,vu=[];function Lhe(e){var t=p.useRef([]),s=p.useRef([0,0]),r=p.useRef(),i=p.useState(Mhe++)[0],a=p.useState(rB)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var w=nhe([e.lockRef.current],(e.shards||[]).map(YD),!0).filter(Boolean);return w.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(w,S){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var C=Px(w),_=s.current,j="deltaX"in w?w.deltaX:_[0]-C[0],T="deltaY"in w?w.deltaY:_[1]-C[1],E,A=w.target,R=Math.abs(j)>Math.abs(T)?"h":"v";if("touches"in w&&R==="h"&&A.type==="range")return!1;var D=window.getSelection(),M=D&&D.anchorNode,P=M?M===A||M.contains(A):!1;if(P)return!1;var O=WD(R,A);if(!O)return!0;if(O?E=R:(E=R==="v"?"h":"v",O=WD(R,A)),!O)return!1;if(!r.current&&"changedTouches"in w&&(j||T)&&(r.current=E),!E)return!0;var F=r.current||E;return Rhe(F,S,w,F==="h"?j:T)},[]),u=p.useCallback(function(w){var S=w;if(!(!vu.length||vu[vu.length-1]!==a)){var C="deltaY"in S?KD(S):Px(S),_=t.current.filter(function(E){return E.name===S.type&&(E.target===S.target||S.target===E.shadowParent)&&Dhe(E.delta,C)})[0];if(_&&_.should){S.cancelable&&S.preventDefault();return}if(!_){var j=(o.current.shards||[]).map(YD).filter(Boolean).filter(function(E){return E.contains(S.target)}),T=j.length>0?l(S,j[0]):!o.current.noIsolation;T&&S.cancelable&&S.preventDefault()}}},[]),d=p.useCallback(function(w,S,C,_){var j={name:w,delta:S,target:C,should:_,shadowParent:Ohe(C)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(T){return T!==j})},1)},[]),m=p.useCallback(function(w){s.current=Px(w),r.current=void 0},[]),f=p.useCallback(function(w){d(w.type,KD(w),w.target,l(w,e.lockRef.current))},[]),x=p.useCallback(function(w){d(w.type,Px(w),w.target,l(w,e.lockRef.current))},[]);p.useEffect(function(){return vu.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:x}),document.addEventListener("wheel",u,xu),document.addEventListener("touchmove",u,xu),document.addEventListener("touchstart",m,xu),function(){vu=vu.filter(function(w){return w!==a}),document.removeEventListener("wheel",u,xu),document.removeEventListener("touchmove",u,xu),document.removeEventListener("touchstart",m,xu)}},[]);var v=e.removeScrollBar,y=e.inert;return p.createElement(p.Fragment,null,y?p.createElement(a,{styles:Ihe(i)}):null,v?p.createElement(Nhe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ohe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Fhe=hhe(nB,Lhe);var Mp=p.forwardRef(function(e,t){return p.createElement(Ey,eo({},e,{ref:t,sideCar:Fhe}))});Mp.classNames=Ey.classNames;var Bhe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bu=new WeakMap,Rx=new WeakMap,Dx={},oS=0,lB=function(e){return e&&(e.host||lB(e.parentNode))},zhe=function(e,t){return t.map(function(s){if(e.contains(s))return s;var r=lB(s);return r&&e.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},$he=function(e,t,s,r){var i=zhe(t,Array.isArray(e)?e:[e]);Dx[s]||(Dx[s]=new WeakMap);var a=Dx[s],o=[],l=new Set,u=new Set(i),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};i.forEach(d);var m=function(f){!f||u.has(f)||Array.prototype.forEach.call(f.children,function(x){if(l.has(x))m(x);else try{var v=x.getAttribute(r),y=v!==null&&v!=="false",w=(bu.get(x)||0)+1,S=(a.get(x)||0)+1;bu.set(x,w),a.set(x,S),o.push(x),w===1&&y&&Rx.set(x,!0),S===1&&x.setAttribute(s,"true"),y||x.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",x,C)}})};return m(t),l.clear(),oS++,function(){o.forEach(function(f){var x=bu.get(f)-1,v=a.get(f)-1;bu.set(f,x),a.set(f,v),x||(Rx.has(f)||f.removeAttribute(r),Rx.delete(f)),v||f.removeAttribute(s)}),oS--,oS||(bu=new WeakMap,bu=new WeakMap,Rx=new WeakMap,Dx={})}},Ty=function(e,t,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=Bhe(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),$he(r,i,s,"aria-hidden")):function(){return null}};function Hhe(e){const t=Uhe(e),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),u=l.find(Vhe);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function Uhe(e){const t=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=Whe(i),l=qhe(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ghe=Symbol("radix.slottable");function Vhe(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ghe}function qhe(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function Whe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Py="Dialog",[cB,dB]=ur(Py),[Khe,Fa]=cB(Py),uB=e=>{const{__scopeDialog:t,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=p.useRef(null),u=p.useRef(null),[d,m]=$i({prop:r,defaultProp:i??!1,onChange:a,caller:Py});return n.jsx(Khe,{scope:t,triggerRef:l,contentRef:u,contentId:Li(),titleId:Li(),descriptionId:Li(),open:d,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(f=>!f),[m]),modal:o,children:s})};uB.displayName=Py;var hB="DialogTrigger",mB=p.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Fa(hB,s),a=Ct(t,i.triggerRef);return n.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":L1(i.open),...r,ref:a,onClick:Fe(e.onClick,i.onOpenToggle)})});mB.displayName=hB;var I1="DialogPortal",[Yhe,fB]=cB(I1,{forceMount:void 0}),pB=e=>{const{__scopeDialog:t,forceMount:s,children:r,container:i}=e,a=Fa(I1,t);return n.jsx(Yhe,{scope:t,forceMount:s,children:p.Children.map(r,o=>n.jsx(Dn,{present:s||a.open,children:n.jsx(Ph,{asChild:!0,container:i,children:o})}))})};pB.displayName=I1;var ab="DialogOverlay",gB=p.forwardRef((e,t)=>{const s=fB(ab,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=Fa(ab,e.__scopeDialog);return a.modal?n.jsx(Dn,{present:r||a.open,children:n.jsx(Zhe,{...i,ref:t})}):null});gB.displayName=ab;var Xhe=Hhe("DialogOverlay.RemoveScroll"),Zhe=p.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Fa(ab,s);return n.jsx(Mp,{as:Xhe,allowPinchZoom:!0,shards:[i.contentRef],children:n.jsx(ot.div,{"data-state":L1(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),md="DialogContent",xB=p.forwardRef((e,t)=>{const s=fB(md,e.__scopeDialog),{forceMount:r=s.forceMount,...i}=e,a=Fa(md,e.__scopeDialog);return n.jsx(Dn,{present:r||a.open,children:a.modal?n.jsx(Qhe,{...i,ref:t}):n.jsx(Jhe,{...i,ref:t})})});xB.displayName=md;var Qhe=p.forwardRef((e,t)=>{const s=Fa(md,e.__scopeDialog),r=p.useRef(null),i=Ct(t,s.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return Ty(a)},[]),n.jsx(vB,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(e.onCloseAutoFocus,a=>{a.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Fe(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:Fe(e.onFocusOutside,a=>a.preventDefault())})}),Jhe=p.forwardRef((e,t)=>{const s=Fa(md,e.__scopeDialog),r=p.useRef(!1),i=p.useRef(!1);return n.jsx(vB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||s.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;s.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),vB=p.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Fa(md,s),u=p.useRef(null),d=Ct(t,u);return Ay(),n.jsxs(n.Fragment,{children:[n.jsx(Ip,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(Nd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":L1(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(tme,{titleId:l.titleId}),n.jsx(nme,{contentRef:u,descriptionId:l.descriptionId})]})]})}),M1="DialogTitle",bB=p.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Fa(M1,s);return n.jsx(ot.h2,{id:i.titleId,...r,ref:t})});bB.displayName=M1;var yB="DialogDescription",wB=p.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Fa(yB,s);return n.jsx(ot.p,{id:i.descriptionId,...r,ref:t})});wB.displayName=yB;var jB="DialogClose",SB=p.forwardRef((e,t)=>{const{__scopeDialog:s,...r}=e,i=Fa(jB,s);return n.jsx(ot.button,{type:"button",...r,ref:t,onClick:Fe(e.onClick,()=>i.onOpenChange(!1))})});SB.displayName=jB;function L1(e){return e?"open":"closed"}var _B="DialogTitleWarning",[eme,NB]=mle(_B,{contentName:md,titleName:M1,docsSlug:"dialog"}),tme=({titleId:e})=>{const t=NB(_B),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},sme="DialogDescriptionWarning",nme=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NB(sme).contentName}}.`;return p.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},Lp=uB,rme=mB,Op=pB,Ih=gB,Mh=xB,Lh=bB,Oh=wB,Fh=SB;const $s=Lp,ime=Op,CB=p.forwardRef(({className:e,...t},s)=>n.jsx(Ih,{ref:s,className:J("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));CB.displayName=Ih.displayName;const Bs=p.forwardRef(({className:e,children:t,hideCloseButton:s,...r},i)=>n.jsxs(ime,{children:[n.jsx(CB,{}),n.jsxs(Mh,{ref:i,className:J("fixed left-[50%] top-[50%] z-50 w-full max-w-lg max-h-[90vh]","translate-x-[-50%] translate-y-[-50%]","bg-card border border-border rounded-2xl p-6","shadow-xl","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","duration-200 overflow-hidden flex flex-col",e),...r,children:[t,!s&&n.jsxs(Fh,{className:J("absolute right-4 top-4 rounded-lg p-1 z-10","text-muted-foreground hover:text-foreground","hover:bg-accent transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background","disabled:pointer-events-none"),children:[n.jsx(Ss,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Bs.displayName=Mh.displayName;const os=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",e),...t});os.displayName="DialogHeader";const As=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 mt-6",e),...t});As.displayName="DialogFooter";const ls=p.forwardRef(({className:e,...t},s)=>n.jsx(Lh,{ref:s,className:J("text-lg font-semibold leading-none tracking-tight text-foreground",e),...t}));ls.displayName=Lh.displayName;const ws=p.forwardRef(({className:e,...t},s)=>n.jsx(Oh,{ref:s,className:J("text-sm text-muted-foreground",e),...t}));ws.displayName=Oh.displayName;var ame=p.createContext(void 0);function Bh(e){const t=p.useContext(ame);return e||t||"ltr"}function Q_(e,[t,s]){return Math.min(s,Math.max(t,e))}function ome(e,t){return p.useReducer((s,r)=>t[s][r]??s,e)}var O1="ScrollArea",[kB]=ur(O1),[lme,va]=kB(O1),AB=p.forwardRef((e,t)=>{const{__scopeScrollArea:s,type:r="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,u]=p.useState(null),[d,m]=p.useState(null),[f,x]=p.useState(null),[v,y]=p.useState(null),[w,S]=p.useState(null),[C,_]=p.useState(0),[j,T]=p.useState(0),[E,A]=p.useState(!1),[R,D]=p.useState(!1),M=Ct(t,O=>u(O)),P=Bh(i);return n.jsx(lme,{scope:s,type:r,dir:P,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:m,content:f,onContentChange:x,scrollbarX:v,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:A,scrollbarY:w,onScrollbarYChange:S,scrollbarYEnabled:R,onScrollbarYEnabledChange:D,onCornerWidthChange:_,onCornerHeightChange:T,children:n.jsx(ot.div,{dir:P,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});AB.displayName=O1;var EB="ScrollAreaViewport",TB=p.forwardRef((e,t)=>{const{__scopeScrollArea:s,children:r,nonce:i,...a}=e,o=va(EB,s),l=p.useRef(null),u=Ct(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),n.jsx(ot.div,{"data-radix-scroll-area-viewport":"",...a,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});TB.displayName=EB;var No="ScrollAreaScrollbar",F1=p.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=va(No,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?n.jsx(cme,{...r,ref:t,forceMount:s}):i.type==="scroll"?n.jsx(dme,{...r,ref:t,forceMount:s}):i.type==="auto"?n.jsx(PB,{...r,ref:t,forceMount:s}):i.type==="always"?n.jsx(B1,{...r,ref:t}):null});F1.displayName=No;var cme=p.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=va(No,e.__scopeScrollArea),[a,o]=p.useState(!1);return p.useEffect(()=>{const l=i.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),o(!0)},m=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",m)}}},[i.scrollArea,i.scrollHideDelay]),n.jsx(Dn,{present:s||a,children:n.jsx(PB,{"data-state":a?"visible":"hidden",...r,ref:t})})}),dme=p.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=va(No,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Dy(()=>u("SCROLL_END"),100),[l,u]=ome("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,u]),p.useEffect(()=>{const d=i.viewport,m=a?"scrollLeft":"scrollTop";if(d){let f=d[m];const x=()=>{const v=d[m];f!==v&&(u("SCROLL"),o()),f=v};return d.addEventListener("scroll",x),()=>d.removeEventListener("scroll",x)}},[i.viewport,a,u,o]),n.jsx(Dn,{present:s||l!=="hidden",children:n.jsx(B1,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Fe(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Fe(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),PB=p.forwardRef((e,t)=>{const s=va(No,e.__scopeScrollArea),{forceMount:r,...i}=e,[a,o]=p.useState(!1),l=e.orientation==="horizontal",u=Dy(()=>{if(s.viewport){const d=s.viewport.offsetWidth<s.viewport.scrollWidth,m=s.viewport.offsetHeight<s.viewport.scrollHeight;o(l?d:m)}},10);return ch(s.viewport,u),ch(s.content,u),n.jsx(Dn,{present:r||a,children:n.jsx(B1,{"data-state":a?"visible":"hidden",...i,ref:t})})}),B1=p.forwardRef((e,t)=>{const{orientation:s="vertical",...r}=e,i=va(No,e.__scopeScrollArea),a=p.useRef(null),o=p.useRef(0),[l,u]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=LB(l.viewport,l.content),m={...r,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:x=>a.current=x,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:x=>o.current=x};function f(x,v){return gme(x,o.current,l,v)}return s==="horizontal"?n.jsx(ume,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const x=i.viewport.scrollLeft,v=XD(x,l,i.dir);a.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:x=>{i.viewport&&(i.viewport.scrollLeft=x)},onDragScroll:x=>{i.viewport&&(i.viewport.scrollLeft=f(x,i.dir))}}):s==="vertical"?n.jsx(hme,{...m,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const x=i.viewport.scrollTop,v=XD(x,l);a.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:x=>{i.viewport&&(i.viewport.scrollTop=x)},onDragScroll:x=>{i.viewport&&(i.viewport.scrollTop=f(x))}}):null}),ume=p.forwardRef((e,t)=>{const{sizes:s,onSizesChange:r,...i}=e,a=va(No,e.__scopeScrollArea),[o,l]=p.useState(),u=p.useRef(null),d=Ct(t,u,a.onScrollbarXChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),n.jsx(DB,{"data-orientation":"horizontal",...i,ref:d,sizes:s,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ry(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.x),onDragScroll:m=>e.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(a.viewport){const x=a.viewport.scrollLeft+m.deltaX;e.onWheelScroll(x),FB(x,f)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:lb(o.paddingLeft),paddingEnd:lb(o.paddingRight)}})}})}),hme=p.forwardRef((e,t)=>{const{sizes:s,onSizesChange:r,...i}=e,a=va(No,e.__scopeScrollArea),[o,l]=p.useState(),u=p.useRef(null),d=Ct(t,u,a.onScrollbarYChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),n.jsx(DB,{"data-orientation":"vertical",...i,ref:d,sizes:s,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ry(s)+"px",...e.style},onThumbPointerDown:m=>e.onThumbPointerDown(m.y),onDragScroll:m=>e.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(a.viewport){const x=a.viewport.scrollTop+m.deltaY;e.onWheelScroll(x),FB(x,f)&&m.preventDefault()}},onResize:()=>{u.current&&a.viewport&&o&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:lb(o.paddingTop),paddingEnd:lb(o.paddingBottom)}})}})}),[mme,RB]=kB(No),DB=p.forwardRef((e,t)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:m,onResize:f,...x}=e,v=va(No,s),[y,w]=p.useState(null),S=Ct(t,M=>w(M)),C=p.useRef(null),_=p.useRef(""),j=v.viewport,T=r.content-r.viewport,E=vn(m),A=vn(u),R=Dy(f,10);function D(M){if(C.current){const P=M.clientX-C.current.left,O=M.clientY-C.current.top;d({x:P,y:O})}}return p.useEffect(()=>{const M=P=>{const O=P.target;y?.contains(O)&&E(P,T)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[j,y,T,E]),p.useEffect(A,[r,A]),ch(y,R),ch(v.content,R),n.jsx(mme,{scope:s,scrollbar:y,hasThumb:i,onThumbChange:vn(a),onThumbPointerUp:vn(o),onThumbPositionChange:A,onThumbPointerDown:vn(l),children:n.jsx(ot.div,{...x,ref:S,style:{position:"absolute",...x.style},onPointerDown:Fe(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),C.current=y.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),D(M))}),onPointerMove:Fe(e.onPointerMove,D),onPointerUp:Fe(e.onPointerUp,M=>{const P=M.target;P.hasPointerCapture(M.pointerId)&&P.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=_.current,v.viewport&&(v.viewport.style.scrollBehavior=""),C.current=null})})})}),ob="ScrollAreaThumb",IB=p.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=RB(ob,e.__scopeScrollArea);return n.jsx(Dn,{present:s||i.hasThumb,children:n.jsx(fme,{ref:t,...r})})}),fme=p.forwardRef((e,t)=>{const{__scopeScrollArea:s,style:r,...i}=e,a=va(ob,s),o=RB(ob,s),{onThumbPositionChange:l}=o,u=Ct(t,f=>o.onThumbChange(f)),d=p.useRef(void 0),m=Dy(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const f=a.viewport;if(f){const x=()=>{if(m(),!d.current){const v=xme(f,l);d.current=v,l()}};return l(),f.addEventListener("scroll",x),()=>f.removeEventListener("scroll",x)}},[a.viewport,m,l]),n.jsx(ot.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(e.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),y=f.clientX-v.left,w=f.clientY-v.top;o.onThumbPointerDown({x:y,y:w})}),onPointerUp:Fe(e.onPointerUp,o.onThumbPointerUp)})});IB.displayName=ob;var z1="ScrollAreaCorner",MB=p.forwardRef((e,t)=>{const s=va(z1,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?n.jsx(pme,{...e,ref:t}):null});MB.displayName=z1;var pme=p.forwardRef((e,t)=>{const{__scopeScrollArea:s,...r}=e,i=va(z1,s),[a,o]=p.useState(0),[l,u]=p.useState(0),d=!!(a&&l);return ch(i.scrollbarX,()=>{const m=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(m),u(m)}),ch(i.scrollbarY,()=>{const m=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(m),o(m)}),d?n.jsx(ot.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function lb(e){return e?parseInt(e,10):0}function LB(e,t){const s=e/t;return isNaN(s)?0:s}function Ry(e){const t=LB(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-s)*t;return Math.max(r,18)}function gme(e,t,s,r="ltr"){const i=Ry(s),a=i/2,o=t||a,l=i-o,u=s.scrollbar.paddingStart+o,d=s.scrollbar.size-s.scrollbar.paddingEnd-l,m=s.content-s.viewport,f=r==="ltr"?[0,m]:[m*-1,0];return OB([u,d],f)(e)}function XD(e,t,s="ltr"){const r=Ry(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-r,u=s==="ltr"?[0,o]:[o*-1,0],d=Q_(e,u);return OB([0,o],[0,l])(d)}function OB(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}function FB(e,t){return e>0&&e<t}var xme=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return(function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=s.left!==a.left,l=s.top!==a.top;(o||l)&&t(),s=a,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)};function Dy(e,t){const s=vn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function ch(e,t){const s=vn(t);Hn(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,s])}var BB=AB,vme=TB,bme=MB;const zt=p.forwardRef(({className:e,children:t,viewportClassName:s,...r},i)=>n.jsxs(BB,{ref:i,className:J("relative overflow-hidden",e),...r,children:[n.jsx(vme,{className:J("h-full w-full rounded-[inherit]",s),children:t}),n.jsx(zB,{}),n.jsx(bme,{})]}));zt.displayName=BB.displayName;const zB=p.forwardRef(({className:e,orientation:t="vertical",...s},r)=>n.jsx(F1,{ref:r,orientation:t,className:J("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:n.jsx(IB,{className:"relative flex-1 rounded-full bg-border"})}));zB.displayName=F1.displayName;var yme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wme=yme.reduce((e,t)=>{const s=E1(`Primitive.${t}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,u=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),jme="Separator",ZD="horizontal",Sme=["horizontal","vertical"],$B=p.forwardRef((e,t)=>{const{decorative:s,orientation:r=ZD,...i}=e,a=_me(r)?r:ZD,l=s?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return n.jsx(wme.div,{"data-orientation":a,...l,...i,ref:t})});$B.displayName=jme;function _me(e){return Sme.includes(e)}var HB=$B;const Rn=p.forwardRef(({className:e,orientation:t="horizontal",decorative:s=!0,...r},i)=>n.jsx(HB,{ref:i,decorative:s,orientation:t,className:J("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Rn.displayName=HB.displayName;const gv="lastSelectedProjectId";let lS=null;const Ot=Gn((e,t)=>({projects:[],selectedProjectId:null,isLoading:!1,error:null,openProjectIds:[],activeProjectId:null,tabOrder:[],setProjects:s=>e({projects:s}),addProject:s=>e(r=>({projects:[...r.projects,s]})),removeProject:s=>e(r=>{const i=r.selectedProjectId===s;return i&&localStorage.removeItem(gv),{projects:r.projects.filter(a=>a.id!==s),selectedProjectId:i?null:r.selectedProjectId}}),updateProject:(s,r)=>e(i=>({projects:i.projects.map(a=>a.id===s?{...a,...r}:a)})),selectProject:s=>{s?localStorage.setItem(gv,s):localStorage.removeItem(gv),e({selectedProjectId:s})},setLoading:s=>e({isLoading:s}),setError:s=>e({error:s}),openProjectTab:s=>{const r=t();if(console.log("[ProjectStore] openProjectTab called:",{projectId:s,currentOpenProjectIds:r.openProjectIds,currentTabOrder:r.tabOrder}),r.openProjectIds.includes(s))console.log("[ProjectStore] Project already open, just activating"),t().setActiveProject(s);else{const i=[...r.openProjectIds,s],a=r.tabOrder.includes(s)?r.tabOrder:[...r.tabOrder,s];console.log("[ProjectStore] Adding new tab:",{newOpenProjectIds:i,newTabOrder:a}),e({openProjectIds:i,tabOrder:a,activeProjectId:s}),uf()}},closeProjectTab:s=>{const r=t(),i=r.openProjectIds.filter(l=>l!==s),a=r.tabOrder.filter(l=>l!==s);let o=r.activeProjectId;if(r.activeProjectId===s){const l=a.length>0?a:[];o=l.length>0?l[0]:null}e({openProjectIds:i,tabOrder:a,activeProjectId:o}),uf()},setActiveProject:s=>{e({activeProjectId:s}),t().selectProject(s),uf()},reorderTabs:(s,r)=>{const a=[...t().tabOrder],[o]=a.splice(s,1);a.splice(r,0,o),e({tabOrder:a}),uf()},restoreTabState:()=>{console.log("[ProjectStore] restoreTabState called - now handled by IPC")},getSelectedProject:()=>{const s=t();return s.projects.find(r=>r.id===s.selectedProjectId)},getOpenProjects:()=>{const s=t();return s.projects.filter(r=>s.openProjectIds.includes(r.id))},getActiveProject:()=>{const s=t();return s.projects.find(r=>r.id===s.activeProjectId)},getProjectTabs:()=>{const s=t(),r=s.tabOrder.map(a=>s.projects.find(o=>o.id===a)).filter(Boolean),i=s.projects.filter(a=>s.openProjectIds.includes(a.id)&&!s.tabOrder.includes(a.id));return[...r,...i]}}));function uf(){lS&&clearTimeout(lS),lS=setTimeout(async()=>{const e=Ot.getState(),t={openProjectIds:e.openProjectIds,activeProjectId:e.activeProjectId,tabOrder:e.tabOrder};console.log("[ProjectStore] Saving tab state to main process:",t);try{await window.electronAPI.saveTabState(t)}catch(s){console.error("[ProjectStore] Failed to save tab state:",s)}},100)}async function QD(){const e=Ot.getState();e.setLoading(!0),e.setError(null);try{const t=await window.electronAPI.getTabState();console.log("[ProjectStore] Loaded tab state from main process:",t.data),t.success&&t.data&&Ot.setState({openProjectIds:t.data.openProjectIds||[],activeProjectId:t.data.activeProjectId||null,tabOrder:t.data.tabOrder||[]});const s=await window.electronAPI.getProjects();if(console.log("[ProjectStore] getProjects result:",{success:s.success,projectCount:s.data?.length,projectIds:s.data?.map(r=>r.id)}),s.success&&s.data){e.setProjects(s.data);const r=Ot.getState(),i=r.openProjectIds.filter(u=>s.data?.some(d=>d.id===u)??!1),a=r.tabOrder.filter(u=>s.data?.some(d=>d.id===u)??!1),o=r.activeProjectId&&s.data?.some(u=>u.id===r.activeProjectId)?r.activeProjectId:null;console.log("[ProjectStore] Tab state cleanup:",{originalOpenProjectIds:r.openProjectIds,validOpenProjectIds:i,originalTabOrder:r.tabOrder,validTabOrder:a,originalActiveProjectId:r.activeProjectId,validActiveProjectId:o}),i.length!==r.openProjectIds.length||a.length!==r.tabOrder.length||o!==r.activeProjectId?(console.log("[ProjectStore] Updating cleaned tab state"),Ot.setState({openProjectIds:i,tabOrder:a,activeProjectId:o}),uf()):console.log("[ProjectStore] Tab state is valid, no cleanup needed");const l=Ot.getState();if(!l.selectedProjectId&&s.data.length>0){const u=localStorage.getItem(gv);u&&s.data.some(m=>m.id===u)?e.selectProject(u):l.activeProjectId?e.selectProject(l.activeProjectId):e.selectProject(s.data[0].id)}}else e.setError(s.error||"Failed to load projects")}catch(t){e.setError(t instanceof Error?t.message:"Unknown error")}finally{e.setLoading(!1)}}async function J_(e){const t=Ot.getState();try{const s=await window.electronAPI.addProject(e);return s.success&&s.data?(t.addProject(s.data),t.selectProject(s.data.id),t.openProjectTab(s.data.id),s.data):(t.setError(s.error||"Failed to add project"),null)}catch(s){return t.setError(s instanceof Error?s.message:"Unknown error"),null}}async function UB(e){const t=Ot.getState();try{return(await window.electronAPI.removeProject(e)).success?(t.removeProject(e),t.openProjectIds.includes(e)&&t.closeProjectTab(e),!0):!1}catch{return!1}}async function Nme(e,t){const s=Ot.getState();try{if((await window.electronAPI.updateProjectSettings(e,t)).success){const i=s.projects.find(a=>a.id===e);return i&&s.updateProject(e,{settings:{...i.settings,...t}}),!0}return!1}catch{return!1}}async function JD(e){try{const t=await window.electronAPI.checkProjectVersion(e);return t.success&&t.data?t.data:null}catch{return null}}async function $1(e){const t=Ot.getState();try{console.log("[ProjectStore] initializeProject called for:",e);const s=await window.electronAPI.initializeProject(e);return console.log("[ProjectStore] IPC result:",s),s.success&&s.data?(console.log("[ProjectStore] IPC succeeded, result.data:",s.data),s.data.success?(console.log("[ProjectStore] Updating project autoBuildPath to .auto-claude"),t.updateProject(e,{autoBuildPath:".auto-claude"})):console.log("[ProjectStore] result.data.success is false, not updating project"),s.data):(console.log("[ProjectStore] IPC failed or no data, setting error"),t.setError(s.error||"Failed to initialize project"),null)}catch(s){return console.error("[ProjectStore] Exception during initializeProject:",s),t.setError(s instanceof Error?s.message:"Unknown error"),null}}const Oe=p.forwardRef(({className:e,type:t,...s},r)=>n.jsx("input",{type:t,className:J("flex h-10 w-full rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200","file:border-0 file:bg-transparent file:text-sm file:font-medium",e),ref:r,...s}));Oe.displayName="Input";const Cme=Ny("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),le=p.forwardRef(({className:e,...t},s)=>n.jsx("label",{ref:s,className:J(Cme(),e),...t}));le.displayName="Label";function H1({open:e,onOpenChange:t,onProjectAdded:s}){const{t:r}=Re("dialogs"),[i,a]=p.useState("choose"),[o,l]=p.useState(""),[u,d]=p.useState(""),[m,f]=p.useState(!0),[x,v]=p.useState(!1),[y,w]=p.useState(null);p.useEffect(()=>{e&&(a("choose"),l(""),d(""),f(!0),w(null))},[e]),p.useEffect(()=>{(async()=>{try{const A=await window.electronAPI.getDefaultProjectLocation();A&&d(A)}catch{}})()},[]);const S=async()=>{try{const E=await window.electronAPI.selectDirectory();if(E){const A=await J_(E);if(A){try{const R=await window.electronAPI.detectMainBranch(E);R.success&&R.data&&await window.electronAPI.updateProjectSettings(A.id,{mainBranch:R.data})}catch{}s?.(A,!A.autoBuildPath),t(!1)}}}catch(E){w(E instanceof Error?E.message:r("addProject.failedToOpen"))}},C=async()=>{try{const E=await window.electronAPI.selectDirectory();E&&d(E)}catch{}},_=async()=>{if(!o.trim()){w(r("addProject.nameRequired"));return}if(!u.trim()){w(r("addProject.locationRequired"));return}v(!0),w(null);try{const E=await window.electronAPI.createProjectFolder(u,o.trim(),m);if(!E.success||!E.data){w(E.error||"Failed to create project folder");return}const A=await J_(E.data.path);if(A){if(m)try{const R=await window.electronAPI.detectMainBranch(E.data.path);R.success&&R.data&&await window.electronAPI.updateProjectSettings(A.id,{mainBranch:R.data})}catch{}s?.(A,!0),t(!1)}}catch(E){w(E instanceof Error?E.message:r("addProject.failedToCreate"))}finally{v(!1)}},j=()=>n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsx(ls,{children:r("addProject.title")}),n.jsx(ws,{children:r("addProject.description")})]}),n.jsxs("div",{className:"py-4 space-y-3",children:[n.jsxs("button",{onClick:S,className:J("w-full flex items-center gap-4 p-4 rounded-xl border border-border","bg-card hover:bg-accent hover:border-accent transition-all duration-200","text-left group"),"aria-label":r("addProject.openExistingAriaLabel"),children:[n.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-primary/10",children:n.jsx(Xr,{className:"h-6 w-6 text-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-foreground",children:r("addProject.openExisting")}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:r("addProject.openExistingDescription")})]}),n.jsx(Xt,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]}),n.jsxs("button",{onClick:()=>a("create-form"),className:J("w-full flex items-center gap-4 p-4 rounded-xl border border-border","bg-card hover:bg-accent hover:border-accent transition-all duration-200","text-left group"),"aria-label":r("addProject.createNewAriaLabel"),children:[n.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-success/10",children:n.jsx(eO,{className:"h-6 w-6 text-success"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-foreground",children:r("addProject.createNew")}),n.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:r("addProject.createNewDescription")})]}),n.jsx(Xt,{className:"h-5 w-5 text-muted-foreground group-hover:text-foreground transition-colors"})]})]}),y&&n.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg p-3 mt-2",role:"alert",children:y})]}),T=()=>n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsx(ls,{children:r("addProject.createNewTitle")}),n.jsx(ws,{children:r("addProject.createNewSubtitle")})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"project-name",children:r("addProject.projectName")}),n.jsx(Oe,{id:"project-name",placeholder:r("addProject.projectNamePlaceholder"),value:o,onChange:E=>l(E.target.value),autoFocus:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("addProject.projectNameHelp")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"project-location",children:r("addProject.location")}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{id:"project-location",placeholder:r("addProject.locationPlaceholder"),value:u,onChange:E=>d(E.target.value),className:"flex-1"}),n.jsx(W,{variant:"outline",onClick:C,children:r("addProject.browse")})]}),u&&o&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[r("addProject.willCreate")," ",n.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded",children:[u,"/",o]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"init-git",checked:m,onChange:E=>f(E.target.checked),className:"h-4 w-4 rounded border-border bg-background"}),n.jsx(le,{htmlFor:"init-git",className:"text-sm font-normal cursor-pointer",children:r("addProject.initGit")})]}),y&&n.jsx("div",{className:"text-sm text-destructive bg-destructive/10 rounded-lg p-3",role:"alert",children:y})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:()=>a("choose"),disabled:x,children:r("addProject.back")}),n.jsx(W,{onClick:_,disabled:x,children:r(x?"addProject.creating":"addProject.createProject")})]})]});return n.jsx($s,{open:e,onOpenChange:t,children:n.jsx(Bs,{className:"sm:max-w-md",children:i==="choose"?j():T()})})}function kme({open:e,onOpenChange:t,project:s,gitStatus:r,onGitInitialized:i,onSkip:a}){const{t:o}=Re("dialogs"),[l,u]=p.useState(!1),[d,m]=p.useState(null),[f,x]=p.useState("info"),v=r&&!r.isGitRepo;r&&r.isGitRepo&&r.hasCommits;const y=async()=>{if(s){u(!0),m(null),x("initializing");try{const j=await window.electronAPI.initializeGit(s.path);j.success?(x("success"),setTimeout(()=>{i(),t(!1),x("info")},1500)):(m(j.error||"Failed to initialize git"),x("info"))}catch(j){m(j instanceof Error?j.message:"Failed to initialize git"),x("info")}finally{u(!1)}}},w=()=>{a?.(),t(!1)},S=()=>n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(wre,{className:"h-5 w-5 text-primary"}),o("gitSetup.title")]}),n.jsx(ws,{children:o("gitSetup.description")})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsx("div",{className:"rounded-lg bg-muted p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-warning mt-0.5 shrink-0"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium text-sm",children:o(v?"gitSetup.notGitRepo":"gitSetup.noCommits")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:o(v?"gitSetup.needsInit":"gitSetup.needsCommit")})]})]})}),n.jsxs("div",{className:"rounded-lg border border-border p-4",children:[n.jsx("p",{className:"font-medium text-sm mb-3",children:o("gitSetup.willSetup")}),n.jsxs("ul",{className:"space-y-2",children:[v&&n.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(an,{className:"h-4 w-4 text-primary"}),o("gitSetup.initRepo")]}),n.jsxs("li",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Xe,{className:"h-4 w-4 text-primary"}),o("gitSetup.createCommit")]})]})]}),n.jsxs("details",{className:"text-sm",children:[n.jsx("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:o("gitSetup.manual")}),n.jsxs("div",{className:"mt-3 rounded-lg bg-muted/50 p-3 font-mono text-xs space-y-1",children:[n.jsx("p",{className:"text-muted-foreground",children:"Open a terminal in your project folder and run:"}),v&&n.jsx("p",{children:"git init"}),n.jsx("p",{children:"git add ."}),n.jsx("p",{children:'git commit -m "Initial commit"'})]})]}),d&&n.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/20 p-3 text-sm text-destructive",children:d})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:w,children:"Skip for now"}),n.jsxs(W,{onClick:y,disabled:l,children:[n.jsx(an,{className:"mr-2 h-4 w-4"}),"Initialize Git"]})]})]}),C=()=>n.jsxs(n.Fragment,{children:[n.jsx(os,{children:n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(we,{className:"h-5 w-5 animate-spin text-primary"}),o("gitSetup.settingUp")]})}),n.jsx("div",{className:"py-8 flex flex-col items-center justify-center",children:n.jsxs("div",{className:"space-y-3 text-center",children:[n.jsx(dr,{className:"h-12 w-12 text-muted-foreground mx-auto"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:o("gitSetup.initializingRepo")})]})})]}),_=()=>n.jsxs(n.Fragment,{children:[n.jsx(os,{children:n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Xe,{className:"h-5 w-5 text-success"}),o("gitSetup.success")]})}),n.jsx("div",{className:"py-8 flex flex-col items-center justify-center",children:n.jsxs("div",{className:"space-y-3 text-center",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-success/10 flex items-center justify-center mx-auto",children:n.jsx(Xe,{className:"h-8 w-8 text-success"})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:o("gitSetup.readyToUse")})]})})]});return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"sm:max-w-md",children:[f==="info"&&S(),f==="initializing"&&C(),f==="success"&&_()]})})}const Xf=Gn((e,t)=>({isModalOpen:!1,rateLimitInfo:null,isSDKModalOpen:!1,sdkRateLimitInfo:null,hasPendingRateLimit:!1,pendingRateLimitType:null,showRateLimitModal:s=>{e({isModalOpen:!0,rateLimitInfo:s,hasPendingRateLimit:!0,pendingRateLimitType:"terminal"})},hideRateLimitModal:()=>{e({isModalOpen:!1})},showSDKRateLimitModal:s=>{e({isSDKModalOpen:!0,sdkRateLimitInfo:s,hasPendingRateLimit:!0,pendingRateLimitType:"sdk"})},hideSDKRateLimitModal:()=>{e({isSDKModalOpen:!1})},reopenRateLimitModal:()=>{const s=t();s.pendingRateLimitType==="terminal"&&s.rateLimitInfo?e({isModalOpen:!0}):s.pendingRateLimitType==="sdk"&&s.sdkRateLimitInfo&&e({isSDKModalOpen:!0})},clearPendingRateLimit:()=>{e({hasPendingRateLimit:!1,pendingRateLimitType:null,rateLimitInfo:null,sdkRateLimitInfo:null})}}));function Ame(){const{t:e}=Re("common"),{hasPendingRateLimit:t,pendingRateLimitType:s,rateLimitInfo:r,sdkRateLimitInfo:i,reopenRateLimitModal:a,clearPendingRateLimit:o}=Xf();if(!t)return null;const l=s==="terminal"?r?.resetTime:i?.resetTime,u=s==="sdk"?i?.source:null,d=u?Eme(u,e):e("rateLimit.sources.claude");return n.jsx("div",{className:"mx-3 mb-3",children:n.jsxs("div",{className:"relative flex items-start gap-2 rounded-lg border border-warning/50 bg-warning/10 p-3 cursor-pointer hover:bg-warning/20 transition-colors",onClick:a,role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),a())},children:[n.jsx(Tt,{className:"h-4 w-4 text-warning mt-0.5 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs font-medium text-warning",children:e("rateLimit.title")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 truncate",children:l?e("rateLimit.resetsAt",{time:l}):e("rateLimit.hitLimit",{source:d})}),n.jsx("p",{className:"text-xs text-primary mt-1",children:e("rateLimit.clickToManage")})]}),n.jsxs(W,{variant:"ghost",size:"icon",className:"h-5 w-5 shrink-0 hover:bg-warning/20",onClick:m=>{m.stopPropagation(),o()},children:[n.jsx(Ss,{className:"h-3 w-3"}),n.jsx("span",{className:"sr-only",children:e("labels.dismiss")})]})]})})}function Eme(e,t){switch(e){case"changelog":return t("rateLimit.sources.changelog");case"task":return t("rateLimit.sources.task");case"roadmap":return t("rateLimit.sources.roadmap");case"ideation":return t("rateLimit.sources.ideation");case"title-generator":return t("rateLimit.sources.titleGenerator");default:return t("rateLimit.sources.claude")}}function Tme(e){const t=Pme(e),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),u=l.find(Dme);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function Pme(e){const t=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=Mme(i),l=Ime(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Rme=Symbol("radix.slottable");function Dme(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Rme}function Ime(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function Mme(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Iy="Popover",[GB]=ur(Iy,[fc]),Fp=fc(),[Lme,pc]=GB(Iy),VB=e=>{const{__scopePopover:t,children:s,open:r,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,l=Fp(t),u=p.useRef(null),[d,m]=p.useState(!1),[f,x]=$i({prop:r,defaultProp:i??!1,onChange:a,caller:Iy});return n.jsx(vy,{...l,children:n.jsx(Lme,{scope:t,contentId:Li(),triggerRef:u,open:f,onOpenChange:x,onOpenToggle:p.useCallback(()=>x(v=>!v),[x]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>m(!0),[]),onCustomAnchorRemove:p.useCallback(()=>m(!1),[]),modal:o,children:s})})};VB.displayName=Iy;var qB="PopoverAnchor",Ome=p.forwardRef((e,t)=>{const{__scopePopover:s,...r}=e,i=pc(qB,s),a=Fp(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return p.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(Rp,{...a,...r,ref:t})});Ome.displayName=qB;var WB="PopoverTrigger",KB=p.forwardRef((e,t)=>{const{__scopePopover:s,...r}=e,i=pc(WB,s),a=Fp(s),o=Ct(t,i.triggerRef),l=n.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":JB(i.open),...r,ref:o,onClick:Fe(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:n.jsx(Rp,{asChild:!0,...a,children:l})});KB.displayName=WB;var U1="PopoverPortal",[Fme,Bme]=GB(U1,{forceMount:void 0}),YB=e=>{const{__scopePopover:t,forceMount:s,children:r,container:i}=e,a=pc(U1,t);return n.jsx(Fme,{scope:t,forceMount:s,children:n.jsx(Dn,{present:s||a.open,children:n.jsx(Ph,{asChild:!0,container:i,children:r})})})};YB.displayName=U1;var dh="PopoverContent",XB=p.forwardRef((e,t)=>{const s=Bme(dh,e.__scopePopover),{forceMount:r=s.forceMount,...i}=e,a=pc(dh,e.__scopePopover);return n.jsx(Dn,{present:r||a.open,children:a.modal?n.jsx($me,{...i,ref:t}):n.jsx(Hme,{...i,ref:t})})});XB.displayName=dh;var zme=Tme("PopoverContent.RemoveScroll"),$me=p.forwardRef((e,t)=>{const s=pc(dh,e.__scopePopover),r=p.useRef(null),i=Ct(t,r),a=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return Ty(o)},[]),n.jsx(Mp,{as:zme,allowPinchZoom:!0,children:n.jsx(ZB,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(e.onCloseAutoFocus,o=>{o.preventDefault(),a.current||s.triggerRef.current?.focus()}),onPointerDownOutside:Fe(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Fe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Hme=p.forwardRef((e,t)=>{const s=pc(dh,e.__scopePopover),r=p.useRef(!1),i=p.useRef(!1);return n.jsx(ZB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||s.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;s.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),ZB=p.forwardRef((e,t)=>{const{__scopePopover:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:m,...f}=e,x=pc(dh,s),v=Fp(s);return Ay(),n.jsx(Ip,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:n.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>x.onOpenChange(!1),children:n.jsx(by,{"data-state":JB(x.open),role:"dialog",id:x.contentId,...v,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),QB="PopoverClose",Ume=p.forwardRef((e,t)=>{const{__scopePopover:s,...r}=e,i=pc(QB,s);return n.jsx(ot.button,{type:"button",...r,ref:t,onClick:Fe(e.onClick,()=>i.onOpenChange(!1))})});Ume.displayName=QB;var Gme="PopoverArrow",Vme=p.forwardRef((e,t)=>{const{__scopePopover:s,...r}=e,i=Fp(s);return n.jsx(yy,{...i,...r,ref:t})});Vme.displayName=Gme;function JB(e){return e?"open":"closed"}var qme=VB,Wme=KB,Kme=YB,ez=XB;const tz=qme,sz=Wme,G1=p.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},i)=>n.jsx(Kme,{children:n.jsx(ez,{ref:i,align:t,sideOffset:s,className:J("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));G1.displayName=ez.displayName;var Yme=Symbol("radix.slottable");function Xme(e){const t=({children:s})=>n.jsx(n.Fragment,{children:s});return t.displayName=`${e}.Slottable`,t.__radixId=Yme,t}var nz="AlertDialog",[Zme]=ur(nz,[dB]),pl=dB(),rz=e=>{const{__scopeAlertDialog:t,...s}=e,r=pl(t);return n.jsx(Lp,{...r,...s,modal:!0})};rz.displayName=nz;var Qme="AlertDialogTrigger",Jme=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=pl(s);return n.jsx(rme,{...i,...r,ref:t})});Jme.displayName=Qme;var efe="AlertDialogPortal",iz=e=>{const{__scopeAlertDialog:t,...s}=e,r=pl(t);return n.jsx(Op,{...r,...s})};iz.displayName=efe;var tfe="AlertDialogOverlay",az=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=pl(s);return n.jsx(Ih,{...i,...r,ref:t})});az.displayName=tfe;var Wu="AlertDialogContent",[sfe,nfe]=Zme(Wu),rfe=Xme("AlertDialogContent"),oz=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,children:r,...i}=e,a=pl(s),o=p.useRef(null),l=Ct(t,o),u=p.useRef(null);return n.jsx(eme,{contentName:Wu,titleName:lz,docsSlug:"alert-dialog",children:n.jsx(sfe,{scope:s,cancelRef:u,children:n.jsxs(Mh,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:Fe(i.onOpenAutoFocus,d=>{d.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(rfe,{children:r}),n.jsx(afe,{contentRef:o})]})})})});oz.displayName=Wu;var lz="AlertDialogTitle",cz=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=pl(s);return n.jsx(Lh,{...i,...r,ref:t})});cz.displayName=lz;var dz="AlertDialogDescription",uz=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=pl(s);return n.jsx(Oh,{...i,...r,ref:t})});uz.displayName=dz;var ife="AlertDialogAction",hz=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,i=pl(s);return n.jsx(Fh,{...i,...r,ref:t})});hz.displayName=ife;var mz="AlertDialogCancel",fz=p.forwardRef((e,t)=>{const{__scopeAlertDialog:s,...r}=e,{cancelRef:i}=nfe(mz,s),a=pl(s),o=Ct(t,i);return n.jsx(Fh,{...a,...r,ref:o})});fz.displayName=mz;var afe=({contentRef:e})=>{const t=`\`${Wu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Wu}\` by passing a \`${dz}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Wu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ofe=rz,lfe=iz,pz=az,gz=oz,xz=hz,vz=fz,bz=cz,yz=uz;const Kr=ofe,cfe=lfe,wz=p.forwardRef(({className:e,...t},s)=>n.jsx(pz,{className:J("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));wz.displayName=pz.displayName;const Rr=p.forwardRef(({className:e,...t},s)=>n.jsxs(cfe,{children:[n.jsx(wz,{}),n.jsx(gz,{ref:s,className:J("fixed left-[50%] top-[50%] z-50 w-full max-w-lg max-h-[90vh]","translate-x-[-50%] translate-y-[-50%]","bg-card border border-border rounded-2xl p-6","shadow-xl","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%]","data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]","duration-200",e),...t})]}));Rr.displayName=gz.displayName;const Dr=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col space-y-2 text-center sm:text-left",e),...t});Dr.displayName="AlertDialogHeader";const Ir=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 mt-6",e),...t});Ir.displayName="AlertDialogFooter";const Mr=p.forwardRef(({className:e,...t},s)=>n.jsx(bz,{ref:s,className:J("text-lg font-semibold text-foreground",e),...t}));Mr.displayName=bz.displayName;const Lr=p.forwardRef(({className:e,...t},s)=>n.jsx(yz,{ref:s,className:J("text-sm text-muted-foreground",e),...t}));Lr.displayName=yz.displayName;const pi=p.forwardRef(({className:e,...t},s)=>n.jsx(xz,{ref:s,className:J(T1(),e),...t}));pi.displayName=xz.displayName;const Yr=p.forwardRef(({className:e,...t},s)=>n.jsx(vz,{ref:s,className:J(T1({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Yr.displayName=vz.displayName;function dfe(e){const t=ufe(e),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),u=l.find(mfe);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function ufe(e){const t=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=pfe(i),l=ffe(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var hfe=Symbol("radix.slottable");function mfe(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hfe}function ffe(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function pfe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function My(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var gfe=[" ","Enter","ArrowUp","ArrowDown"],xfe=[" ","Enter"],fd="Select",[Ly,Oy,vfe]=Cy(fd),[zh]=ur(fd,[vfe,fc]),Fy=fc(),[bfe,gc]=zh(fd),[yfe,wfe]=zh(fd),jz=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:u,dir:d,name:m,autoComplete:f,disabled:x,required:v,form:y}=e,w=Fy(t),[S,C]=p.useState(null),[_,j]=p.useState(null),[T,E]=p.useState(!1),A=Bh(d),[R,D]=$i({prop:r,defaultProp:i??!1,onChange:a,caller:fd}),[M,P]=$i({prop:o,defaultProp:l,onChange:u,caller:fd}),O=p.useRef(null),F=S?y||!!S.closest("form"):!0,[$,z]=p.useState(new Set),H=Array.from($).map(I=>I.props.value).join(";");return n.jsx(vy,{...w,children:n.jsxs(bfe,{required:v,scope:t,trigger:S,onTriggerChange:C,valueNode:_,onValueNodeChange:j,valueNodeHasChildren:T,onValueNodeHasChildrenChange:E,contentId:Li(),value:M,onValueChange:P,open:R,onOpenChange:D,dir:A,triggerPointerDownPosRef:O,disabled:x,children:[n.jsx(Ly.Provider,{scope:t,children:n.jsx(yfe,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(I=>{z(V=>new Set(V).add(I))},[]),onNativeOptionRemove:p.useCallback(I=>{z(V=>{const B=new Set(V);return B.delete(I),B})},[]),children:s})}),F?n.jsxs(qz,{"aria-hidden":!0,required:v,tabIndex:-1,name:m,autoComplete:f,value:M,onChange:I=>P(I.target.value),disabled:x,form:y,children:[M===void 0?n.jsx("option",{value:""}):null,Array.from($)]},H):null]})})};jz.displayName=fd;var Sz="SelectTrigger",_z=p.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:r=!1,...i}=e,a=Fy(s),o=gc(Sz,s),l=o.disabled||r,u=Ct(t,o.onTriggerChange),d=Oy(s),m=p.useRef("touch"),[f,x,v]=Kz(w=>{const S=d().filter(j=>!j.disabled),C=S.find(j=>j.value===o.value),_=Yz(S,w,C);_!==void 0&&o.onValueChange(_.value)}),y=w=>{l||(o.onOpenChange(!0),v()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return n.jsx(Rp,{asChild:!0,...a,children:n.jsx(ot.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Wz(o.value)?"":void 0,...i,ref:u,onClick:Fe(i.onClick,w=>{w.currentTarget.focus(),m.current!=="mouse"&&y(w)}),onPointerDown:Fe(i.onPointerDown,w=>{m.current=w.pointerType;const S=w.target;S.hasPointerCapture(w.pointerId)&&S.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(y(w),w.preventDefault())}),onKeyDown:Fe(i.onKeyDown,w=>{const S=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&x(w.key),!(S&&w.key===" ")&&gfe.includes(w.key)&&(y(),w.preventDefault())})})})});_z.displayName=Sz;var Nz="SelectValue",Cz=p.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:i,children:a,placeholder:o="",...l}=e,u=gc(Nz,s),{onValueNodeHasChildrenChange:d}=u,m=a!==void 0,f=Ct(t,u.onValueNodeChange);return Hn(()=>{d(m)},[d,m]),n.jsx(ot.span,{...l,ref:f,style:{pointerEvents:"none"},children:Wz(u.value)?n.jsx(n.Fragment,{children:o}):a})});Cz.displayName=Nz;var jfe="SelectIcon",kz=p.forwardRef((e,t)=>{const{__scopeSelect:s,children:r,...i}=e;return n.jsx(ot.span,{"aria-hidden":!0,...i,ref:t,children:r||""})});kz.displayName=jfe;var Sfe="SelectPortal",Az=e=>n.jsx(Ph,{asChild:!0,...e});Az.displayName=Sfe;var pd="SelectContent",Ez=p.forwardRef((e,t)=>{const s=gc(pd,e.__scopeSelect),[r,i]=p.useState();if(Hn(()=>{i(new DocumentFragment)},[]),!s.open){const a=r;return a?Di.createPortal(n.jsx(Tz,{scope:e.__scopeSelect,children:n.jsx(Ly.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),a):null}return n.jsx(Pz,{...e,ref:t})});Ez.displayName=pd;var _a=10,[Tz,xc]=zh(pd),_fe="SelectContentImpl",Nfe=dfe("SelectContent.RemoveScroll"),Pz=p.forwardRef((e,t)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:u,align:d,alignOffset:m,arrowPadding:f,collisionBoundary:x,collisionPadding:v,sticky:y,hideWhenDetached:w,avoidCollisions:S,...C}=e,_=gc(pd,s),[j,T]=p.useState(null),[E,A]=p.useState(null),R=Ct(t,ee=>T(ee)),[D,M]=p.useState(null),[P,O]=p.useState(null),F=Oy(s),[$,z]=p.useState(!1),H=p.useRef(!1);p.useEffect(()=>{if(j)return Ty(j)},[j]),Ay();const I=p.useCallback(ee=>{const[pe,...fe]=F().map(ie=>ie.ref.current),[re]=fe.slice(-1),Z=document.activeElement;for(const ie of ee)if(ie===Z||(ie?.scrollIntoView({block:"nearest"}),ie===pe&&E&&(E.scrollTop=0),ie===re&&E&&(E.scrollTop=E.scrollHeight),ie?.focus(),document.activeElement!==Z))return},[F,E]),V=p.useCallback(()=>I([D,j]),[I,D,j]);p.useEffect(()=>{$&&V()},[$,V]);const{onOpenChange:B,triggerPointerDownPosRef:K}=_;p.useEffect(()=>{if(j){let ee={x:0,y:0};const pe=re=>{ee={x:Math.abs(Math.round(re.pageX)-(K.current?.x??0)),y:Math.abs(Math.round(re.pageY)-(K.current?.y??0))}},fe=re=>{ee.x<=10&&ee.y<=10?re.preventDefault():j.contains(re.target)||B(!1),document.removeEventListener("pointermove",pe),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",fe,{capture:!0})}}},[j,B,K]),p.useEffect(()=>{const ee=()=>B(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[B]);const[L,G]=Kz(ee=>{const pe=F().filter(Z=>!Z.disabled),fe=pe.find(Z=>Z.ref.current===document.activeElement),re=Yz(pe,ee,fe);re&&setTimeout(()=>re.ref.current.focus())}),Y=p.useCallback((ee,pe,fe)=>{const re=!H.current&&!fe;(_.value!==void 0&&_.value===pe||re)&&(M(ee),re&&(H.current=!0))},[_.value]),q=p.useCallback(()=>j?.focus(),[j]),Q=p.useCallback((ee,pe,fe)=>{const re=!H.current&&!fe;(_.value!==void 0&&_.value===pe||re)&&O(ee)},[_.value]),se=r==="popper"?eN:Rz,te=se===eN?{side:l,sideOffset:u,align:d,alignOffset:m,arrowPadding:f,collisionBoundary:x,collisionPadding:v,sticky:y,hideWhenDetached:w,avoidCollisions:S}:{};return n.jsx(Tz,{scope:s,content:j,viewport:E,onViewportChange:A,itemRefCallback:Y,selectedItem:D,onItemLeave:q,itemTextRefCallback:Q,focusSelectedItem:V,selectedItemText:P,position:r,isPositioned:$,searchRef:L,children:n.jsx(Mp,{as:Nfe,allowPinchZoom:!0,children:n.jsx(Ip,{asChild:!0,trapped:_.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:Fe(i,ee=>{_.trigger?.focus({preventScroll:!0}),ee.preventDefault()}),children:n.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:n.jsx(se,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ee=>ee.preventDefault(),...C,...te,onPlaced:()=>z(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Fe(C.onKeyDown,ee=>{const pe=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!pe&&ee.key.length===1&&G(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let re=F().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const Z=ee.target,ie=re.indexOf(Z);re=re.slice(ie+1)}setTimeout(()=>I(re)),ee.preventDefault()}})})})})})})});Pz.displayName=_fe;var Cfe="SelectItemAlignedPosition",Rz=p.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:r,...i}=e,a=gc(pd,s),o=xc(pd,s),[l,u]=p.useState(null),[d,m]=p.useState(null),f=Ct(t,R=>m(R)),x=Oy(s),v=p.useRef(!1),y=p.useRef(!0),{viewport:w,selectedItem:S,selectedItemText:C,focusSelectedItem:_}=o,j=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&w&&S&&C){const R=a.trigger.getBoundingClientRect(),D=d.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),P=C.getBoundingClientRect();if(a.dir!=="rtl"){const Z=P.left-D.left,ie=M.left-Z,ce=R.left-ie,He=R.width+ce,tt=Math.max(He,D.width),he=window.innerWidth-_a,Ne=Q_(ie,[_a,Math.max(_a,he-tt)]);l.style.minWidth=He+"px",l.style.left=Ne+"px"}else{const Z=D.right-P.right,ie=window.innerWidth-M.right-Z,ce=window.innerWidth-R.right-ie,He=R.width+ce,tt=Math.max(He,D.width),he=window.innerWidth-_a,Ne=Q_(ie,[_a,Math.max(_a,he-tt)]);l.style.minWidth=He+"px",l.style.right=Ne+"px"}const O=x(),F=window.innerHeight-_a*2,$=w.scrollHeight,z=window.getComputedStyle(d),H=parseInt(z.borderTopWidth,10),I=parseInt(z.paddingTop,10),V=parseInt(z.borderBottomWidth,10),B=parseInt(z.paddingBottom,10),K=H+I+$+B+V,L=Math.min(S.offsetHeight*5,K),G=window.getComputedStyle(w),Y=parseInt(G.paddingTop,10),q=parseInt(G.paddingBottom,10),Q=R.top+R.height/2-_a,se=F-Q,te=S.offsetHeight/2,ee=S.offsetTop+te,pe=H+I+ee,fe=K-pe;if(pe<=Q){const Z=O.length>0&&S===O[O.length-1].ref.current;l.style.bottom="0px";const ie=d.clientHeight-w.offsetTop-w.offsetHeight,ce=Math.max(se,te+(Z?q:0)+ie+V),He=pe+ce;l.style.height=He+"px"}else{const Z=O.length>0&&S===O[0].ref.current;l.style.top="0px";const ce=Math.max(Q,H+w.offsetTop+(Z?Y:0)+te)+fe;l.style.height=ce+"px",w.scrollTop=pe-Q+w.offsetTop}l.style.margin=`${_a}px 0`,l.style.minHeight=L+"px",l.style.maxHeight=F+"px",r?.(),requestAnimationFrame(()=>v.current=!0)}},[x,a.trigger,a.valueNode,l,d,w,S,C,a.dir,r]);Hn(()=>j(),[j]);const[T,E]=p.useState();Hn(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const A=p.useCallback(R=>{R&&y.current===!0&&(j(),_?.(),y.current=!1)},[j,_]);return n.jsx(Afe,{scope:s,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:A,children:n.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:n.jsx(ot.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Rz.displayName=Cfe;var kfe="SelectPopperPosition",eN=p.forwardRef((e,t)=>{const{__scopeSelect:s,align:r="start",collisionPadding:i=_a,...a}=e,o=Fy(s);return n.jsx(by,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eN.displayName=kfe;var[Afe,V1]=zh(pd,{}),tN="SelectViewport",Dz=p.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:r,...i}=e,a=xc(tN,s),o=V1(tN,s),l=Ct(t,a.onViewportChange),u=p.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx(Ly.Slot,{scope:s,children:n.jsx(ot.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Fe(i.onScroll,d=>{const m=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:x}=o;if(x?.current&&f){const v=Math.abs(u.current-m.scrollTop);if(v>0){const y=window.innerHeight-_a*2,w=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),C=Math.max(w,S);if(C<y){const _=C+v,j=Math.min(y,_),T=_-j;f.style.height=j+"px",f.style.bottom==="0px"&&(m.scrollTop=T>0?T:0,f.style.justifyContent="flex-end")}}}u.current=m.scrollTop})})})]})});Dz.displayName=tN;var Iz="SelectGroup",[Efe,Tfe]=zh(Iz),Pfe=p.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=Li();return n.jsx(Efe,{scope:s,id:i,children:n.jsx(ot.div,{role:"group","aria-labelledby":i,...r,ref:t})})});Pfe.displayName=Iz;var Mz="SelectLabel",Lz=p.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=Tfe(Mz,s);return n.jsx(ot.div,{id:i.id,...r,ref:t})});Lz.displayName=Mz;var cb="SelectItem",[Rfe,Oz]=zh(cb),Fz=p.forwardRef((e,t)=>{const{__scopeSelect:s,value:r,disabled:i=!1,textValue:a,...o}=e,l=gc(cb,s),u=xc(cb,s),d=l.value===r,[m,f]=p.useState(a??""),[x,v]=p.useState(!1),y=Ct(t,_=>u.itemRefCallback?.(_,r,i)),w=Li(),S=p.useRef("touch"),C=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(Rfe,{scope:s,value:r,disabled:i,textId:w,isSelected:d,onItemTextChange:p.useCallback(_=>{f(j=>j||(_?.textContent??"").trim())},[]),children:n.jsx(Ly.ItemSlot,{scope:s,value:r,disabled:i,textValue:m,children:n.jsx(ot.div,{role:"option","aria-labelledby":w,"data-highlighted":x?"":void 0,"aria-selected":d&&x,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:y,onFocus:Fe(o.onFocus,()=>v(!0)),onBlur:Fe(o.onBlur,()=>v(!1)),onClick:Fe(o.onClick,()=>{S.current!=="mouse"&&C()}),onPointerUp:Fe(o.onPointerUp,()=>{S.current==="mouse"&&C()}),onPointerDown:Fe(o.onPointerDown,_=>{S.current=_.pointerType}),onPointerMove:Fe(o.onPointerMove,_=>{S.current=_.pointerType,i?u.onItemLeave?.():S.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(o.onPointerLeave,_=>{_.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:Fe(o.onKeyDown,_=>{u.searchRef?.current!==""&&_.key===" "||(xfe.includes(_.key)&&C(),_.key===" "&&_.preventDefault())})})})})});Fz.displayName=cb;var hf="SelectItemText",Bz=p.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:i,...a}=e,o=gc(hf,s),l=xc(hf,s),u=Oz(hf,s),d=wfe(hf,s),[m,f]=p.useState(null),x=Ct(t,C=>f(C),u.onItemTextChange,C=>l.itemTextRefCallback?.(C,u.value,u.disabled)),v=m?.textContent,y=p.useMemo(()=>n.jsx("option",{value:u.value,disabled:u.disabled,children:v},u.value),[u.disabled,u.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:S}=d;return Hn(()=>(w(y),()=>S(y)),[w,S,y]),n.jsxs(n.Fragment,{children:[n.jsx(ot.span,{id:u.textId,...a,ref:x}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Di.createPortal(a.children,o.valueNode):null]})});Bz.displayName=hf;var zz="SelectItemIndicator",$z=p.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return Oz(zz,s).isSelected?n.jsx(ot.span,{"aria-hidden":!0,...r,ref:t}):null});$z.displayName=zz;var sN="SelectScrollUpButton",Hz=p.forwardRef((e,t)=>{const s=xc(sN,e.__scopeSelect),r=V1(sN,e.__scopeSelect),[i,a]=p.useState(!1),o=Ct(t,r.onScrollButtonChange);return Hn(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=u.scrollTop>0;a(d)};const u=s.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),i?n.jsx(Gz,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=s;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});Hz.displayName=sN;var nN="SelectScrollDownButton",Uz=p.forwardRef((e,t)=>{const s=xc(nN,e.__scopeSelect),r=V1(nN,e.__scopeSelect),[i,a]=p.useState(!1),o=Ct(t,r.onScrollButtonChange);return Hn(()=>{if(s.viewport&&s.isPositioned){let l=function(){const d=u.scrollHeight-u.clientHeight,m=Math.ceil(u.scrollTop)<d;a(m)};const u=s.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[s.viewport,s.isPositioned]),i?n.jsx(Gz,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=s;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});Uz.displayName=nN;var Gz=p.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:r,...i}=e,a=xc("SelectScrollButton",s),o=p.useRef(null),l=Oy(s),u=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>u(),[u]),Hn(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),n.jsx(ot.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:Fe(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Fe(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Fe(i.onPointerLeave,()=>{u()})})}),Dfe="SelectSeparator",Vz=p.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return n.jsx(ot.div,{"aria-hidden":!0,...r,ref:t})});Vz.displayName=Dfe;var rN="SelectArrow",Ife=p.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,i=Fy(s),a=gc(rN,s),o=xc(rN,s);return a.open&&o.position==="popper"?n.jsx(yy,{...i,...r,ref:t}):null});Ife.displayName=rN;var Mfe="SelectBubbleInput",qz=p.forwardRef(({__scopeSelect:e,value:t,...s},r)=>{const i=p.useRef(null),a=Ct(r,i),o=My(t);return p.useEffect(()=>{const l=i.current;if(!l)return;const u=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&m){const f=new Event("change",{bubbles:!0});m.call(l,t),l.dispatchEvent(f)}},[o,t]),n.jsx(ot.select,{...s,style:{...iF,...s.style},ref:a,defaultValue:t})});qz.displayName=Mfe;function Wz(e){return e===""||e===void 0}function Kz(e){const t=vn(e),s=p.useRef(""),r=p.useRef(0),i=p.useCallback(o=>{const l=s.current+o;t(l),(function u(d){s.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))})(l)},[t]),a=p.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,i,a]}function Yz(e,t,s){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=Lfe(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const u=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return u!==s?u:void 0}function Lfe(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Ofe=jz,Xz=_z,Ffe=Cz,Bfe=kz,zfe=Az,Zz=Ez,$fe=Dz,Qz=Lz,Jz=Fz,Hfe=Bz,Ufe=$z,e6=Hz,t6=Uz,s6=Vz;const _t=Ofe,Nt=Ffe,yt=p.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(Xz,{ref:r,className:J("flex h-10 w-full items-center justify-between rounded-lg","border border-border bg-card px-3 py-2 text-sm","text-foreground placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200","[&>span]:line-clamp-1",e),...s,children:[t,n.jsx(Bfe,{asChild:!0,children:n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})})]}));yt.displayName=Xz.displayName;const n6=p.forwardRef(({className:e,...t},s)=>n.jsx(e6,{ref:s,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"})}));n6.displayName=e6.displayName;const r6=p.forwardRef(({className:e,...t},s)=>n.jsx(t6,{ref:s,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})}));r6.displayName=t6.displayName;const wt=p.forwardRef(({className:e,children:t,position:s="popper",...r},i)=>n.jsx(zfe,{children:n.jsxs(Zz,{ref:i,className:J("relative z-50 max-h-96 min-w-[8rem] overflow-hidden","rounded-lg border border-border bg-card text-foreground shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2","data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[n.jsx(n6,{}),n.jsx($fe,{className:J("p-1 max-h-[300px] overflow-y-auto",s==="popper"&&"w-full min-w-(--radix-select-trigger-width)"),children:t}),n.jsx(r6,{})]})}));wt.displayName=Zz.displayName;const Gfe=p.forwardRef(({className:e,...t},s)=>n.jsx(Qz,{ref:s,className:J("py-1.5 pl-8 pr-2 text-sm font-semibold text-muted-foreground",e),...t}));Gfe.displayName=Qz.displayName;const et=p.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(Jz,{ref:r,className:J("relative flex w-full cursor-default select-none items-center","rounded-md py-2 pl-8 pr-2 text-sm outline-none","focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","transition-colors duration-150",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Ufe,{children:n.jsx(Pt,{className:"h-4 w-4 text-primary"})})}),n.jsx(Hfe,{children:t})]}));et.displayName=Jz.displayName;const Vfe=p.forwardRef(({className:e,...t},s)=>n.jsx(s6,{ref:s,className:J("-mx-1 my-1 h-px bg-border",e),...t}));Vfe.displayName=s6.displayName;const qfe=1440*60*1e3,cS=5e3;function Wfe({className:e}){const{t}=Re(["common","navigation"]),[s,r]=p.useState("loading"),[i,a]=p.useState(null),[o,l]=p.useState(!1),[u,d]=p.useState(null),[m,f]=p.useState(!1),[x,v]=p.useState(!1),[y,w]=p.useState([]),[S,C]=p.useState(!1),[_,j]=p.useState(null),[T,E]=p.useState(null),[A,R]=p.useState(!1),[D,M]=p.useState(null),[P,O]=p.useState([]),[F,$]=p.useState(!1),[z,H]=p.useState(null),[I,V]=p.useState(null),[B,K]=p.useState(!1),L=p.useCallback(async()=>{try{if(!window.electronAPI?.checkClaudeCodeVersion){r("error");return}const ce=await window.electronAPI.checkClaudeCodeVersion();ce.success&&ce.data?(a(ce.data),d(new Date),ce.data.installed?ce.data.isOutdated?r("outdated"):r("installed"):r("not-found")):r("error")}catch(ce){console.error("Failed to check Claude Code version:",ce),r("error")}},[]),G=p.useCallback(async()=>{if(window.electronAPI?.getClaudeCodeVersions){C(!0),j(null);try{const ce=await window.electronAPI.getClaudeCodeVersions();ce.success&&ce.data?w(ce.data.versions):j(ce.error||"Failed to load versions")}catch(ce){console.error("Failed to fetch versions:",ce),j("Failed to load versions")}finally{C(!1)}}},[]),Y=p.useCallback(async()=>{if(window.electronAPI?.getClaudeCodeInstallations){$(!0),H(null);try{const ce=await window.electronAPI.getClaudeCodeInstallations();ce.success&&ce.data?O(ce.data.installations):H(ce.error||"Failed to load installations")}catch(ce){console.error("Failed to fetch installations:",ce),H("Failed to load installations")}finally{$(!1)}}},[]);p.useEffect(()=>{L();const ce=setInterval(()=>{L()},qfe);return()=>clearInterval(ce)},[L]),p.useEffect(()=>{m&&i?.installed&&y.length===0&&G()},[m,i?.installed,y.length,G]),p.useEffect(()=>{m&&P.length===0&&Y()},[m,P.length,Y]);const q=async()=>{l(!0),v(!1),M(null);try{if(!window.electronAPI?.installClaudeCode){M("Installation not available");return}const ce=await window.electronAPI.installClaudeCode();ce.success?setTimeout(()=>{L()},cS):M(ce.error||"Installation failed")}catch(ce){console.error("Failed to install Claude Code:",ce),M(ce instanceof Error?ce.message:"Installation failed")}finally{l(!1)}},Q=async()=>{if(T){l(!0),R(!1),M(null);try{if(!window.electronAPI?.installClaudeCodeVersion){M("Version switching not available");return}const ce=await window.electronAPI.installClaudeCodeVersion(T);ce.success?setTimeout(()=>{L()},cS):M(ce.error||"Failed to switch version")}catch(ce){console.error("Failed to switch Claude Code version:",ce),M(ce instanceof Error?ce.message:"Failed to switch version")}finally{l(!1),E(null)}}},se=async()=>{if(I){l(!0),K(!1),M(null);try{if(!window.electronAPI?.setClaudeCodeActivePath){M("Path switching not available");return}const ce=await window.electronAPI.setClaudeCodeActivePath(I);ce.success?setTimeout(()=>{L(),Y()},cS):M(ce.error||"Failed to switch CLI path")}catch(ce){console.error("Failed to switch Claude CLI path:",ce),M(ce instanceof Error?ce.message:"Failed to switch CLI path")}finally{l(!1),V(null)}}},te=()=>{s==="outdated"?v(!0):q()},ee=ce=>{P.find(tt=>tt.path===ce)?.isActive||(M(null),V(ce),K(!0))},pe=ce=>ce.replace(/^v/,""),fe=ce=>{const He=pe(ce),tt=i?.installed?pe(i.installed):"";He!==tt&&(M(null),E(ce),R(!0))},re=()=>{switch(s){case"installed":return"bg-green-500";case"outdated":return"bg-yellow-500";case"not-found":case"error":return"bg-destructive";default:return"bg-muted-foreground"}},Z=()=>{switch(s){case"loading":return n.jsx(we,{className:"h-3 w-3 animate-spin"});case"installed":return n.jsx(Pt,{className:"h-3 w-3"});case"outdated":return n.jsx(Tt,{className:"h-3 w-3"});case"not-found":return n.jsx(Ss,{className:"h-3 w-3"});case"error":return n.jsx(Tt,{className:"h-3 w-3"})}},ie=()=>{switch(s){case"loading":return t("navigation:claudeCode.checking","Checking Claude Code...");case"installed":return t("navigation:claudeCode.upToDate","Claude Code is up to date");case"outdated":return t("navigation:claudeCode.updateAvailable","Claude Code update available");case"not-found":return t("navigation:claudeCode.notInstalled","Claude Code not installed");case"error":return t("navigation:claudeCode.error","Error checking Claude Code")}};return n.jsxs(tz,{open:m,onOpenChange:f,children:[n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(sz,{asChild:!0,children:n.jsxs(W,{variant:"ghost",size:"sm",className:J("w-full justify-start gap-2 text-xs",s==="not-found"||s==="error"?"text-destructive":"",s==="outdated"?"text-yellow-600 dark:text-yellow-500":"",e),children:[n.jsxs("div",{className:"relative",children:[n.jsx(dr,{className:"h-4 w-4"}),n.jsx("span",{className:J("absolute -bottom-0.5 -right-0.5 h-2 w-2 rounded-full",re())})]}),n.jsx("span",{className:"truncate",children:"Claude Code"}),s==="outdated"&&n.jsx("span",{className:"ml-auto text-[10px] bg-yellow-500/20 text-yellow-600 dark:text-yellow-400 px-1.5 py-0.5 rounded",children:t("common:update","Update")}),s==="not-found"&&n.jsx("span",{className:"ml-auto text-[10px] bg-destructive/20 text-destructive px-1.5 py-0.5 rounded",children:t("common:install","Install")})]})})}),n.jsx(mt,{side:"right",children:ie()})]}),n.jsx(G1,{side:"right",align:"end",className:"w-72",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/10",children:n.jsx(dr,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium",children:"Claude Code CLI"}),n.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[Z(),s==="installed"&&t("navigation:claudeCode.installed","Installed"),s==="outdated"&&t("navigation:claudeCode.outdated","Update available"),s==="not-found"&&t("navigation:claudeCode.missing","Not installed"),s==="loading"&&t("navigation:claudeCode.checking","Checking..."),s==="error"&&t("navigation:claudeCode.error","Error")]})]})]}),i&&s!=="loading"&&n.jsxs("div",{className:"text-xs space-y-1 p-2 bg-muted rounded-md",children:[i.installed&&n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:[t("navigation:claudeCode.current","Current"),":"]}),n.jsx("span",{className:"font-mono",children:i.installed})]}),i.latest&&i.latest!=="unknown"&&n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:[t("navigation:claudeCode.latest","Latest"),":"]}),n.jsx("span",{className:"font-mono",children:i.latest})]}),i.path&&n.jsxs("div",{className:"flex justify-between items-center gap-2",children:[n.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[n.jsx(Xr,{className:"h-3 w-3"}),t("navigation:claudeCode.path","Path"),":"]}),n.jsx("span",{className:"font-mono text-[10px] truncate max-w-[140px]",title:i.path,children:i.path})]}),u&&n.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[n.jsxs("span",{children:[t("navigation:claudeCode.lastChecked","Last checked"),":"]}),n.jsx("span",{children:u.toLocaleTimeString()})]})]}),n.jsxs("div",{className:"flex gap-2",children:[(s==="not-found"||s==="outdated")&&n.jsxs(W,{size:"sm",className:"flex-1 gap-1",onClick:te,disabled:o,children:[o?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(jn,{className:"h-3 w-3"}),s==="outdated"?t("common:update","Update"):t("common:install","Install")]}),n.jsxs(W,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>L(),disabled:s==="loading",children:[n.jsx(We,{className:J("h-3 w-3",s==="loading"&&"animate-spin")}),t("common:refresh","Refresh")]})]}),D&&n.jsxs("div",{className:"text-xs p-2 bg-destructive/10 text-destructive rounded-md flex items-center gap-2",children:[n.jsx(Tt,{className:"h-3 w-3 shrink-0"}),n.jsx("span",{children:D})]}),i?.installed&&n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-xs text-muted-foreground",children:t("navigation:claudeCode.switchVersion","Switch Version")}),n.jsxs(_t,{value:T||"",onValueChange:fe,disabled:S||o,children:[n.jsx(yt,{className:"h-8 text-xs",children:n.jsx(Nt,{placeholder:S?t("navigation:claudeCode.loadingVersions","Loading versions..."):_?t("navigation:claudeCode.failedToLoadVersions","Failed to load versions"):t("navigation:claudeCode.selectVersion","Select version")})}),n.jsx(wt,{children:y.map(ce=>{const He=pe(ce)===pe(i.installed||"");return n.jsxs(et,{value:ce,className:"text-xs",disabled:He,children:[n.jsx("span",{className:"font-mono",children:ce}),He&&n.jsxs("span",{className:"ml-2 text-muted-foreground",children:["(",t("navigation:claudeCode.currentVersion","Current"),")"]})]},ce)})})]})]}),P.length>1&&n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-xs text-muted-foreground",children:t("navigation:claudeCode.switchInstallation","Switch Installation")}),n.jsxs(_t,{value:I||"",onValueChange:ee,disabled:F||o,children:[n.jsx(yt,{className:"h-8 text-xs",children:n.jsx(Nt,{placeholder:F?t("navigation:claudeCode.loadingInstallations","Loading installations..."):z?t("navigation:claudeCode.failedToLoadInstallations","Failed to load installations"):t("navigation:claudeCode.selectInstallation","Select installation")})}),n.jsx(wt,{children:P.map(ce=>n.jsx(et,{value:ce.path,className:"text-xs",disabled:ce.isActive,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-mono text-[10px] truncate max-w-[180px]",title:ce.path,children:ce.path.split(/[/\\]/).slice(-2).join("/")||ce.path}),n.jsxs("span",{className:"text-muted-foreground text-[9px]",children:[ce.version?`v${ce.version}`:t("navigation:claudeCode.versionUnknown","version unknown")," (",ce.source,")",ce.isActive&&` - ${t("navigation:claudeCode.activeInstallation","Active")}`]})]})},ce.path))})]})]}),n.jsxs(W,{variant:"link",size:"sm",className:"w-full text-xs text-muted-foreground gap-1",onClick:()=>window.electronAPI?.openExternal?.("https://claude.ai/code"),"aria-label":t("navigation:claudeCode.learnMoreAriaLabel","Learn more about Claude Code (opens in new window)"),children:[t("navigation:claudeCode.learnMore","Learn more about Claude Code"),n.jsx(Zt,{className:"h-3 w-3","aria-hidden":"true"})]}),n.jsxs(W,{variant:"link",size:"sm",className:"w-full text-xs text-muted-foreground gap-1",onClick:()=>window.electronAPI?.openExternal?.("https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md"),"aria-label":t("navigation:claudeCode.viewChangelogAriaLabel","View Claude Code Changelog (opens in new window)"),children:[t("navigation:claudeCode.viewChangelog","View Claude Code Changelog"),n.jsx(Zt,{className:"h-3 w-3","aria-hidden":"true"})]})]})}),n.jsx(Kr,{open:x,onOpenChange:v,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:t("navigation:claudeCode.updateWarningTitle","Update Claude Code?")}),n.jsx(Lr,{children:t("navigation:claudeCode.updateWarningDescription","Updating will close all running Claude Code sessions. Any unsaved work in those sessions may be lost. Make sure to save your work before proceeding.")})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{children:t("common:cancel","Cancel")}),n.jsx(pi,{onClick:q,children:t("navigation:claudeCode.updateAnyway","Update Anyway")})]})]})}),n.jsx(Kr,{open:A,onOpenChange:R,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:t("navigation:claudeCode.rollbackWarningTitle","Switch to version {{version}}?",{version:T})}),n.jsx(Lr,{children:t("navigation:claudeCode.rollbackWarningDescription","Switching versions will close all running Claude Code sessions. Any unsaved work in those sessions may be lost. Make sure to save your work before proceeding.")})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{onClick:()=>E(null),children:t("common:cancel","Cancel")}),n.jsx(pi,{onClick:Q,children:t("navigation:claudeCode.switchAnyway","Switch Anyway")})]})]})}),n.jsx(Kr,{open:B,onOpenChange:K,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:t("navigation:claudeCode.pathChangeWarningTitle","Switch CLI installation?")}),n.jsxs(Lr,{children:[t("navigation:claudeCode.pathChangeWarningDescription","Switching CLI installations will use a different Claude Code binary. Any running sessions will continue using the previous installation until restarted."),n.jsx("span",{className:"block mt-2 font-mono text-xs break-all",children:I})]})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{onClick:()=>V(null),children:t("common:cancel","Cancel")}),n.jsx(pi,{onClick:se,children:t("navigation:claudeCode.switchInstallationConfirm","Switch")})]})]})})]})}const Kfe=300*1e3;function Yfe({className:e}){const{t}=Re(["navigation","common"]),[s,r]=p.useState(null),[i,a]=p.useState(!1),[o,l]=p.useState(!1),[u,d]=p.useState(null),[m,f]=p.useState(!1),[x,v]=p.useState(null),y=p.useRef(null),w=p.useCallback(async()=>{try{if(!window.electronAPI?.checkAppUpdate)return;const _=await window.electronAPI.checkAppUpdate();if(_.success&&_.data){const j=_.data.version;y.current!==j&&(a(!1),f(!1),y.current=j),r({version:j,releaseNotes:_.data.releaseNotes,releaseDate:_.data.releaseDate})}}catch{}},[]);p.useEffect(()=>{(async()=>{try{if(!window.electronAPI?.getDownloadedAppUpdate)return;const j=await window.electronAPI.getDownloadedAppUpdate();j.success&&j.data&&(y.current=j.data.version,r({version:j.data.version,releaseNotes:j.data.releaseNotes,releaseDate:j.data.releaseDate}),f(!0))}catch{}})()},[]),p.useEffect(()=>{w();const _=setInterval(()=>{w()},Kfe);return()=>clearInterval(_)},[w]),p.useEffect(()=>window.electronAPI?.onAppUpdateAvailable?window.electronAPI.onAppUpdateAvailable(j=>{y.current!==j.version&&(a(!1),y.current=j.version),r(j),l(!1),f(!1),d(null),v(null)}):void 0,[]),p.useEffect(()=>window.electronAPI?.onAppUpdateProgress?window.electronAPI.onAppUpdateProgress(j=>{d(j)}):void 0,[]),p.useEffect(()=>window.electronAPI?.onAppUpdateDownloaded?window.electronAPI.onAppUpdateDownloaded(()=>{l(!1),f(!0),d(null)}):void 0,[]);const S=async()=>{if(m){window.electronAPI?.installAppUpdate?.();return}l(!0),v(null);try{if(!window.electronAPI?.downloadAppUpdate){v(t("navigation:updateBanner.downloadError")),l(!1);return}const _=await window.electronAPI.downloadAppUpdate();_.success||(v(_.error||t("navigation:updateBanner.downloadError")),l(!1))}catch{v(t("navigation:updateBanner.downloadError")),l(!1)}},C=()=>{a(!0)};return!s||i?null:n.jsxs("div",{className:J("mx-3 mb-3 rounded-lg border border-info/30 bg-info/10 p-3",e),children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-4 w-4 text-info shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-foreground",children:t("navigation:updateBanner.title")})]}),n.jsx("button",{type:"button",onClick:C,className:"text-muted-foreground hover:text-foreground transition-colors","aria-label":t("navigation:updateBanner.dismiss"),children:n.jsx(Ss,{className:"h-3.5 w-3.5"})})]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:t("navigation:updateBanner.version",{version:s.version})}),o&&u&&n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground mb-1",children:[n.jsx("span",{children:t("navigation:updateBanner.downloading")}),n.jsxs("span",{children:[Math.round(u.percent),"%"]})]}),n.jsx("div",{className:"h-1 w-full bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-info transition-all duration-300",style:{width:`${u.percent}%`}})})]}),x&&n.jsx("p",{className:"text-[10px] text-destructive mb-2",children:x}),n.jsx(W,{size:"sm",className:"w-full h-7 text-xs gap-1.5",onClick:S,disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-3 w-3 animate-spin"}),t("navigation:updateBanner.downloading")]}):m?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-3 w-3"}),t("navigation:updateBanner.installAndRestart")]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"h-3 w-3"}),t("navigation:updateBanner.updateAndRestart")]})})]})}const Xfe=[{id:"kanban",labelKey:"navigation:items.kanban",icon:eie,shortcut:"K"},{id:"terminals",labelKey:"navigation:items.terminals",icon:dr,shortcut:"A"},{id:"insights",labelKey:"navigation:items.insights",icon:Qt,shortcut:"N"},{id:"roadmap",labelKey:"navigation:items.roadmap",icon:o1,shortcut:"D"},{id:"ideation",labelKey:"navigation:items.ideation",icon:zi,shortcut:"I"},{id:"changelog",labelKey:"navigation:items.changelog",icon:$n,shortcut:"L"},{id:"context",labelKey:"navigation:items.context",icon:jp,shortcut:"C"},{id:"agent-tools",labelKey:"navigation:items.agentTools",icon:uo,shortcut:"M"},{id:"worktrees",labelKey:"navigation:items.worktrees",icon:an,shortcut:"W"}],Zfe=[{id:"github-issues",labelKey:"navigation:items.githubIssues",icon:qr,shortcut:"G"},{id:"github-prs",labelKey:"navigation:items.githubPRs",icon:Js,shortcut:"P"}],Qfe=[{id:"gitlab-issues",labelKey:"navigation:items.gitlabIssues",icon:Yb,shortcut:"B"},{id:"gitlab-merge-requests",labelKey:"navigation:items.gitlabMRs",icon:ua,shortcut:"R"}];function Jfe({onSettingsClick:e,onNewTaskClick:t,activeView:s="kanban",onViewChange:r}){const{t:i}=Re(["navigation","dialogs","common"]),a=Ot(z=>z.projects),o=Ot(z=>z.selectedProjectId);Ot(z=>z.selectProject);const l=cs(z=>z.settings),[u,d]=p.useState(!1),[m,f]=p.useState(!1),[x,v]=p.useState(!1),[y,w]=p.useState(null),[S,C]=p.useState(null),[_,j]=p.useState(!1),[T,E]=p.useState(null),A=a.find(z=>z.id===o);p.useEffect(()=>{(async()=>{if(A?.autoBuildPath)try{const H=await window.electronAPI.getProjectEnv(A.id);H.success&&H.data?E(H.data):E(null)}catch{E(null)}else E(null)})()},[A?.id,A?.autoBuildPath]);const R=p.useMemo(()=>{const z=[...Xfe];return T?.githubEnabled&&z.push(...Zfe),T?.gitlabEnabled&&z.push(...Qfe),z},[T?.githubEnabled,T?.gitlabEnabled]);p.useEffect(()=>{const z=H=>{if(H.target instanceof HTMLInputElement||H.target instanceof HTMLTextAreaElement||H.target instanceof HTMLSelectElement||H.target?.isContentEditable||!o||H.metaKey||H.ctrlKey||H.altKey)return;const I=H.key.toUpperCase(),V=R.find(B=>B.shortcut===I);V&&(H.preventDefault(),r?.(V.id))};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[o,r,R]),p.useEffect(()=>{(async()=>{if(A)try{const H=await window.electronAPI.checkGitStatus(A.path);H.success&&H.data&&(w(H.data),(!H.data.isGitRepo||!H.data.hasCommits)&&v(!0))}catch(H){console.error("Failed to check git status:",H)}else w(null)})()},[A]);const D=(z,H)=>{H&&(C(z),f(!0))},M=async()=>{if(!S)return;const z=S.id;j(!0);try{(await $1(z))?.success&&(C(null),f(!1))}finally{j(!1)}},P=()=>{f(!1),C(null)},O=async()=>{if(A)try{const z=await window.electronAPI.checkGitStatus(A.path);z.success&&z.data&&w(z.data)}catch(z){console.error("Failed to refresh git status:",z)}},F=z=>{r?.(z)},$=z=>{const H=s===z.id,I=z.icon;return n.jsxs("button",{onClick:()=>F(z.id),disabled:!o,"aria-keyshortcuts":z.shortcut,className:J("flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-all duration-200","hover:bg-accent hover:text-accent-foreground","disabled:pointer-events-none disabled:opacity-50",H&&"bg-accent text-accent-foreground"),children:[n.jsx(I,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{className:"flex-1 text-left",children:i(z.labelKey)}),z.shortcut&&n.jsx("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-1 rounded-md border border-border bg-secondary px-1.5 font-mono text-[10px] font-medium text-muted-foreground sm:flex",children:z.shortcut})]},z.id)};return n.jsxs(ul,{children:[n.jsxs("div",{className:"flex h-full w-64 flex-col bg-sidebar border-r border-border",children:[n.jsx("div",{className:"electron-drag flex h-14 items-center px-4 pt-6",children:n.jsx("span",{className:"electron-no-drag text-lg font-bold text-primary",children:"Auto Claude"})}),n.jsx(Rn,{className:"mt-2"}),n.jsx(Rn,{}),n.jsx(zt,{className:"flex-1",children:n.jsx("div",{className:"px-3 py-4",children:n.jsxs("div",{children:[n.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:i("sections.project")}),n.jsx("nav",{className:"space-y-1",children:R.map($)})]})})}),n.jsx(Rn,{}),n.jsx(Ame,{}),n.jsx(Yfe,{}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsx(Wfe,{}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"ghost",size:"sm",className:"flex-1 justify-start gap-2",onClick:e,children:[n.jsx(ey,{className:"h-4 w-4"}),i("actions.settings")]})}),n.jsx(mt,{side:"top",children:i("tooltips.settings")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>window.open("https://github.com/AndyMik90/Auto-Claude/issues","_blank"),"aria-label":i("tooltips.help"),children:n.jsx(Hne,{className:"h-4 w-4"})})}),n.jsx(mt,{side:"top",children:i("tooltips.help")})]})]}),n.jsxs(W,{className:"w-full",onClick:t,disabled:!o||!A?.autoBuildPath,children:[n.jsx(fs,{className:"mr-2 h-4 w-4"}),i("actions.newTask")]}),A&&!A.autoBuildPath&&n.jsx("p",{className:"mt-2 text-xs text-muted-foreground text-center",children:i("messages.initializeToCreateTasks")})]})]}),n.jsx($s,{open:m,onOpenChange:z=>{!z&&!_&&P()},children:n.jsxs(Bs,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-5 w-5"}),i("dialogs:initialize.title")]}),n.jsx(ws,{children:i("dialogs:initialize.description")})]}),n.jsxs("div",{className:"py-4",children:[n.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[n.jsx("p",{className:"font-medium mb-2",children:i("dialogs:initialize.willDo")}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[n.jsx("li",{children:i("dialogs:initialize.createFolder")}),n.jsx("li",{children:i("dialogs:initialize.copyFramework")}),n.jsx("li",{children:i("dialogs:initialize.setupSpecs")})]})]}),!l.autoBuildPath&&n.jsx("div",{className:"mt-4 rounded-lg border border-warning/50 bg-warning/10 p-4 text-sm",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-warning mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-warning",children:i("dialogs:initialize.sourcePathNotConfigured")}),n.jsx("p",{className:"text-muted-foreground mt-1",children:i("dialogs:initialize.sourcePathNotConfiguredDescription")})]})]})})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:P,disabled:_,children:i("common:buttons.skip")}),n.jsx(W,{onClick:M,disabled:_||!l.autoBuildPath,children:_?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),i("common:labels.initializing")]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),i("common:buttons.initialize")]})})]})]})}),n.jsx(H1,{open:u,onOpenChange:d,onProjectAdded:D}),n.jsx(kme,{open:x,onOpenChange:v,project:A||null,gitStatus:y,onGitInitialized:O})]})}const i6=p.createContext(null);function epe({children:e}){const[t,s]=p.useState(!1),r=p.useCallback(o=>{s(o)},[]),i=p.useCallback(()=>{s(o=>!o)},[]),a=p.useMemo(()=>({showArchived:t,setShowArchived:r,toggleShowArchived:i}),[t,r,i]);return n.jsx(i6.Provider,{value:a,children:e})}function a6(){const e=p.useContext(i6);if(!e)throw new Error("useViewState must be used within a ViewStateProvider");return e}const Le=p.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:J("rounded-xl border border-border bg-card text-card-foreground transition-all duration-200",e),...t}));Le.displayName="Card";const on=p.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:J("flex flex-col space-y-1.5 p-6",e),...t}));on.displayName="CardHeader";const ln=p.forwardRef(({className:e,...t},s)=>n.jsx("h3",{ref:s,className:J("text-xl font-semibold leading-none tracking-tight",e),...t}));ln.displayName="CardTitle";const db=p.forwardRef(({className:e,...t},s)=>n.jsx("p",{ref:s,className:J("text-sm text-muted-foreground",e),...t}));db.displayName="CardDescription";const Ye=p.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:J("p-6 pt-0",e),...t}));Ye.displayName="CardContent";const tpe=p.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,className:J("flex items-center p-6 pt-0",e),...t}));tpe.displayName="CardFooter";const spe=Ny("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"border-transparent bg-success/10 text-success",warning:"border-transparent bg-warning/10 text-warning",info:"border-transparent bg-info/10 text-info",purple:"border-transparent bg-purple-500/10 text-purple-400",muted:"border-transparent bg-muted text-muted-foreground"}},defaultVariants:{variant:"default"}});function oe({className:e,variant:t,...s}){return n.jsx("div",{className:J(spe({variant:t}),e),...s})}var dS="rovingFocusGroup.onEntryFocus",npe={bubbles:!1,cancelable:!0},Bp="RovingFocusGroup",[iN,o6,rpe]=Cy(Bp),[ipe,$h]=ur(Bp,[rpe]),[ape,ope]=ipe(Bp),l6=p.forwardRef((e,t)=>n.jsx(iN.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(iN.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(lpe,{...e,ref:t})})}));l6.displayName=Bp;var lpe=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:m=!1,...f}=e,x=p.useRef(null),v=Ct(t,x),y=Bh(a),[w,S]=$i({prop:o,defaultProp:l??null,onChange:u,caller:Bp}),[C,_]=p.useState(!1),j=vn(d),T=o6(s),E=p.useRef(!1),[A,R]=p.useState(0);return p.useEffect(()=>{const D=x.current;if(D)return D.addEventListener(dS,j),()=>D.removeEventListener(dS,j)},[j]),n.jsx(ape,{scope:s,orientation:r,dir:y,loop:i,currentTabStopId:w,onItemFocus:p.useCallback(D=>S(D),[S]),onItemShiftTab:p.useCallback(()=>_(!0),[]),onFocusableItemAdd:p.useCallback(()=>R(D=>D+1),[]),onFocusableItemRemove:p.useCallback(()=>R(D=>D-1),[]),children:n.jsx(ot.div,{tabIndex:C||A===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...e.style},onMouseDown:Fe(e.onMouseDown,()=>{E.current=!0}),onFocus:Fe(e.onFocus,D=>{const M=!E.current;if(D.target===D.currentTarget&&M&&!C){const P=new CustomEvent(dS,npe);if(D.currentTarget.dispatchEvent(P),!P.defaultPrevented){const O=T().filter(I=>I.focusable),F=O.find(I=>I.active),$=O.find(I=>I.id===w),H=[F,$,...O].filter(Boolean).map(I=>I.ref.current);u6(H,m)}}E.current=!1}),onBlur:Fe(e.onBlur,()=>_(!1))})})}),c6="RovingFocusGroupItem",d6=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:i=!1,tabStopId:a,children:o,...l}=e,u=Li(),d=a||u,m=ope(c6,s),f=m.currentTabStopId===d,x=o6(s),{onFocusableItemAdd:v,onFocusableItemRemove:y,currentTabStopId:w}=m;return p.useEffect(()=>{if(r)return v(),()=>y()},[r,v,y]),n.jsx(iN.ItemSlot,{scope:s,id:d,focusable:r,active:i,children:n.jsx(ot.span,{tabIndex:f?0:-1,"data-orientation":m.orientation,...l,ref:t,onMouseDown:Fe(e.onMouseDown,S=>{r?m.onItemFocus(d):S.preventDefault()}),onFocus:Fe(e.onFocus,()=>m.onItemFocus(d)),onKeyDown:Fe(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){m.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const C=upe(S,m.orientation,m.dir);if(C!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let j=x().filter(T=>T.focusable).map(T=>T.ref.current);if(C==="last")j.reverse();else if(C==="prev"||C==="next"){C==="prev"&&j.reverse();const T=j.indexOf(S.currentTarget);j=m.loop?hpe(j,T+1):j.slice(T+1)}setTimeout(()=>u6(j))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:w!=null}):o})})});d6.displayName=c6;var cpe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dpe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function upe(e,t,s){const r=dpe(e.key,s);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return cpe[r]}function u6(e,t=!1){const s=document.activeElement;for(const r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}function hpe(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var q1=l6,W1=d6;function mpe(e){const t=fpe(e),s=p.forwardRef((r,i)=>{const{children:a,...o}=r,l=p.Children.toArray(a),u=l.find(gpe);if(u){const d=u.props.children,m=l.map(f=>f===u?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:i,children:p.isValidElement(d)?p.cloneElement(d,void 0,m):null})}return n.jsx(t,{...o,ref:i,children:a})});return s.displayName=`${e}.Slot`,s}function fpe(e){const t=p.forwardRef((s,r)=>{const{children:i,...a}=s;if(p.isValidElement(i)){const o=vpe(i),l=xpe(a,i.props);return i.type!==p.Fragment&&(l.ref=r?So(r,o):o),p.cloneElement(i,l)}return p.Children.count(i)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ppe=Symbol("radix.slottable");function gpe(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ppe}function xpe(e,t){const s={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...l)=>{const u=a(...l);return i(...l),u}:i&&(s[r]=i):r==="style"?s[r]={...i,...a}:r==="className"&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...e,...s}}function vpe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var aN=["Enter"," "],bpe=["ArrowDown","PageUp","Home"],h6=["ArrowUp","PageDown","End"],ype=[...bpe,...h6],wpe={ltr:[...aN,"ArrowRight"],rtl:[...aN,"ArrowLeft"]},jpe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},zp="Menu",[Zf,Spe,_pe]=Cy(zp),[Cd,m6]=ur(zp,[_pe,fc,$h]),By=fc(),f6=$h(),[Npe,kd]=Cd(zp),[Cpe,$p]=Cd(zp),p6=e=>{const{__scopeMenu:t,open:s=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,l=By(t),[u,d]=p.useState(null),m=p.useRef(!1),f=vn(a),x=Bh(i);return p.useEffect(()=>{const v=()=>{m.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>m.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),n.jsx(vy,{...l,children:n.jsx(Npe,{scope:t,open:s,onOpenChange:f,content:u,onContentChange:d,children:n.jsx(Cpe,{scope:t,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:m,dir:x,modal:o,children:r})})})};p6.displayName=zp;var kpe="MenuAnchor",K1=p.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,i=By(s);return n.jsx(Rp,{...i,...r,ref:t})});K1.displayName=kpe;var Y1="MenuPortal",[Ape,g6]=Cd(Y1,{forceMount:void 0}),x6=e=>{const{__scopeMenu:t,forceMount:s,children:r,container:i}=e,a=kd(Y1,t);return n.jsx(Ape,{scope:t,forceMount:s,children:n.jsx(Dn,{present:s||a.open,children:n.jsx(Ph,{asChild:!0,container:i,children:r})})})};x6.displayName=Y1;var ha="MenuContent",[Epe,X1]=Cd(ha),v6=p.forwardRef((e,t)=>{const s=g6(ha,e.__scopeMenu),{forceMount:r=s.forceMount,...i}=e,a=kd(ha,e.__scopeMenu),o=$p(ha,e.__scopeMenu);return n.jsx(Zf.Provider,{scope:e.__scopeMenu,children:n.jsx(Dn,{present:r||a.open,children:n.jsx(Zf.Slot,{scope:e.__scopeMenu,children:o.modal?n.jsx(Tpe,{...i,ref:t}):n.jsx(Ppe,{...i,ref:t})})})})}),Tpe=p.forwardRef((e,t)=>{const s=kd(ha,e.__scopeMenu),r=p.useRef(null),i=Ct(t,r);return p.useEffect(()=>{const a=r.current;if(a)return Ty(a)},[]),n.jsx(Z1,{...e,ref:i,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:Fe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),Ppe=p.forwardRef((e,t)=>{const s=kd(ha,e.__scopeMenu);return n.jsx(Z1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)})}),Rpe=mpe("MenuContent.ScrollLock"),Z1=p.forwardRef((e,t)=>{const{__scopeMenu:s,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:x,onDismiss:v,disableOutsideScroll:y,...w}=e,S=kd(ha,s),C=$p(ha,s),_=By(s),j=f6(s),T=Spe(s),[E,A]=p.useState(null),R=p.useRef(null),D=Ct(t,R,S.onContentChange),M=p.useRef(0),P=p.useRef(""),O=p.useRef(0),F=p.useRef(null),$=p.useRef("right"),z=p.useRef(0),H=y?Mp:p.Fragment,I=y?{as:Rpe,allowPinchZoom:!0}:void 0,V=K=>{const L=P.current+K,G=T().filter(ee=>!ee.disabled),Y=document.activeElement,q=G.find(ee=>ee.ref.current===Y)?.textValue,Q=G.map(ee=>ee.textValue),se=Gpe(Q,L,q),te=G.find(ee=>ee.textValue===se)?.ref.current;(function ee(pe){P.current=pe,window.clearTimeout(M.current),pe!==""&&(M.current=window.setTimeout(()=>ee(""),1e3))})(L),te&&setTimeout(()=>te.focus())};p.useEffect(()=>()=>window.clearTimeout(M.current),[]),Ay();const B=p.useCallback(K=>$.current===F.current?.side&&qpe(K,F.current?.area),[]);return n.jsx(Epe,{scope:s,searchRef:P,onItemEnter:p.useCallback(K=>{B(K)&&K.preventDefault()},[B]),onItemLeave:p.useCallback(K=>{B(K)||(R.current?.focus(),A(null))},[B]),onTriggerLeave:p.useCallback(K=>{B(K)&&K.preventDefault()},[B]),pointerGraceTimerRef:O,onPointerGraceIntentChange:p.useCallback(K=>{F.current=K},[]),children:n.jsx(H,{...I,children:n.jsx(Ip,{asChild:!0,trapped:i,onMountAutoFocus:Fe(a,K=>{K.preventDefault(),R.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:n.jsx(Nd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:f,onInteractOutside:x,onDismiss:v,children:n.jsx(q1,{asChild:!0,...j,dir:C.dir,orientation:"vertical",loop:r,currentTabStopId:E,onCurrentTabStopIdChange:A,onEntryFocus:Fe(u,K=>{C.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:n.jsx(by,{role:"menu","aria-orientation":"vertical","data-state":I6(S.open),"data-radix-menu-content":"",dir:C.dir,..._,...w,ref:D,style:{outline:"none",...w.style},onKeyDown:Fe(w.onKeyDown,K=>{const G=K.target.closest("[data-radix-menu-content]")===K.currentTarget,Y=K.ctrlKey||K.altKey||K.metaKey,q=K.key.length===1;G&&(K.key==="Tab"&&K.preventDefault(),!Y&&q&&V(K.key));const Q=R.current;if(K.target!==Q||!ype.includes(K.key))return;K.preventDefault();const te=T().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);h6.includes(K.key)&&te.reverse(),Hpe(te)}),onBlur:Fe(e.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(M.current),P.current="")}),onPointerMove:Fe(e.onPointerMove,Qf(K=>{const L=K.target,G=z.current!==K.clientX;if(K.currentTarget.contains(L)&&G){const Y=K.clientX>z.current?"right":"left";$.current=Y,z.current=K.clientX}}))})})})})})})});v6.displayName=ha;var Dpe="MenuGroup",Q1=p.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(ot.div,{role:"group",...r,ref:t})});Q1.displayName=Dpe;var Ipe="MenuLabel",b6=p.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(ot.div,{...r,ref:t})});b6.displayName=Ipe;var ub="MenuItem",eI="menu.itemSelect",zy=p.forwardRef((e,t)=>{const{disabled:s=!1,onSelect:r,...i}=e,a=p.useRef(null),o=$p(ub,e.__scopeMenu),l=X1(ub,e.__scopeMenu),u=Ct(t,a),d=p.useRef(!1),m=()=>{const f=a.current;if(!s&&f){const x=new CustomEvent(eI,{bubbles:!0,cancelable:!0});f.addEventListener(eI,v=>r?.(v),{once:!0}),v1(f,x),x.defaultPrevented?d.current=!1:o.onClose()}};return n.jsx(y6,{...i,ref:u,disabled:s,onClick:Fe(e.onClick,m),onPointerDown:f=>{e.onPointerDown?.(f),d.current=!0},onPointerUp:Fe(e.onPointerUp,f=>{d.current||f.currentTarget?.click()}),onKeyDown:Fe(e.onKeyDown,f=>{const x=l.searchRef.current!=="";s||x&&f.key===" "||aN.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});zy.displayName=ub;var y6=p.forwardRef((e,t)=>{const{__scopeMenu:s,disabled:r=!1,textValue:i,...a}=e,o=X1(ub,s),l=f6(s),u=p.useRef(null),d=Ct(t,u),[m,f]=p.useState(!1),[x,v]=p.useState("");return p.useEffect(()=>{const y=u.current;y&&v((y.textContent??"").trim())},[a.children]),n.jsx(Zf.ItemSlot,{scope:s,disabled:r,textValue:i??x,children:n.jsx(W1,{asChild:!0,...l,focusable:!r,children:n.jsx(ot.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Fe(e.onPointerMove,Qf(y=>{r?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(e.onPointerLeave,Qf(y=>o.onItemLeave(y))),onFocus:Fe(e.onFocus,()=>f(!0)),onBlur:Fe(e.onBlur,()=>f(!1))})})})}),Mpe="MenuCheckboxItem",w6=p.forwardRef((e,t)=>{const{checked:s=!1,onCheckedChange:r,...i}=e;return n.jsx(C6,{scope:e.__scopeMenu,checked:s,children:n.jsx(zy,{role:"menuitemcheckbox","aria-checked":hb(s)?"mixed":s,...i,ref:t,"data-state":ek(s),onSelect:Fe(i.onSelect,()=>r?.(hb(s)?!0:!s),{checkForDefaultPrevented:!1})})})});w6.displayName=Mpe;var j6="MenuRadioGroup",[Lpe,Ope]=Cd(j6,{value:void 0,onValueChange:()=>{}}),S6=p.forwardRef((e,t)=>{const{value:s,onValueChange:r,...i}=e,a=vn(r);return n.jsx(Lpe,{scope:e.__scopeMenu,value:s,onValueChange:a,children:n.jsx(Q1,{...i,ref:t})})});S6.displayName=j6;var _6="MenuRadioItem",N6=p.forwardRef((e,t)=>{const{value:s,...r}=e,i=Ope(_6,e.__scopeMenu),a=s===i.value;return n.jsx(C6,{scope:e.__scopeMenu,checked:a,children:n.jsx(zy,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":ek(a),onSelect:Fe(r.onSelect,()=>i.onValueChange?.(s),{checkForDefaultPrevented:!1})})})});N6.displayName=_6;var J1="MenuItemIndicator",[C6,Fpe]=Cd(J1,{checked:!1}),k6=p.forwardRef((e,t)=>{const{__scopeMenu:s,forceMount:r,...i}=e,a=Fpe(J1,s);return n.jsx(Dn,{present:r||hb(a.checked)||a.checked===!0,children:n.jsx(ot.span,{...i,ref:t,"data-state":ek(a.checked)})})});k6.displayName=J1;var Bpe="MenuSeparator",A6=p.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e;return n.jsx(ot.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});A6.displayName=Bpe;var zpe="MenuArrow",E6=p.forwardRef((e,t)=>{const{__scopeMenu:s,...r}=e,i=By(s);return n.jsx(yy,{...i,...r,ref:t})});E6.displayName=zpe;var $pe="MenuSub",[OLe,T6]=Cd($pe),mf="MenuSubTrigger",P6=p.forwardRef((e,t)=>{const s=kd(mf,e.__scopeMenu),r=$p(mf,e.__scopeMenu),i=T6(mf,e.__scopeMenu),a=X1(mf,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=a,d={__scopeMenu:e.__scopeMenu},m=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>m,[m]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),u(null)}},[l,u]),n.jsx(K1,{asChild:!0,...d,children:n.jsx(y6,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":i.contentId,"data-state":I6(s.open),...e,ref:So(t,i.onTriggerChange),onClick:f=>{e.onClick?.(f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:Fe(e.onPointerMove,Qf(f=>{a.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!s.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{s.onOpenChange(!0),m()},100))})),onPointerLeave:Fe(e.onPointerLeave,Qf(f=>{m();const x=s.content?.getBoundingClientRect();if(x){const v=s.content?.dataset.side,y=v==="right",w=y?-5:5,S=x[y?"left":"right"],C=x[y?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+w,y:f.clientY},{x:S,y:x.top},{x:C,y:x.top},{x:C,y:x.bottom},{x:S,y:x.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(e.onKeyDown,f=>{const x=a.searchRef.current!=="";e.disabled||x&&f.key===" "||wpe[r.dir].includes(f.key)&&(s.onOpenChange(!0),s.content?.focus(),f.preventDefault())})})})});P6.displayName=mf;var R6="MenuSubContent",D6=p.forwardRef((e,t)=>{const s=g6(ha,e.__scopeMenu),{forceMount:r=s.forceMount,...i}=e,a=kd(ha,e.__scopeMenu),o=$p(ha,e.__scopeMenu),l=T6(R6,e.__scopeMenu),u=p.useRef(null),d=Ct(t,u);return n.jsx(Zf.Provider,{scope:e.__scopeMenu,children:n.jsx(Dn,{present:r||a.open,children:n.jsx(Zf.Slot,{scope:e.__scopeMenu,children:n.jsx(Z1,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{o.isUsingKeyboardRef.current&&u.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:Fe(e.onFocusOutside,m=>{m.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Fe(e.onEscapeKeyDown,m=>{o.onClose(),m.preventDefault()}),onKeyDown:Fe(e.onKeyDown,m=>{const f=m.currentTarget.contains(m.target),x=jpe[o.dir].includes(m.key);f&&x&&(a.onOpenChange(!1),l.trigger?.focus(),m.preventDefault())})})})})})});D6.displayName=R6;function I6(e){return e?"open":"closed"}function hb(e){return e==="indeterminate"}function ek(e){return hb(e)?"indeterminate":e?"checked":"unchecked"}function Hpe(e){const t=document.activeElement;for(const s of e)if(s===t||(s.focus(),document.activeElement!==t))return}function Upe(e,t){return e.map((s,r)=>e[(t+r)%e.length])}function Gpe(e,t,s){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=s?e.indexOf(s):-1;let o=Upe(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==s));const u=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return u!==s?u:void 0}function Vpe(e,t){const{x:s,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],u=t[o],d=l.x,m=l.y,f=u.x,x=u.y;m>r!=x>r&&s<(f-d)*(r-m)/(x-m)+d&&(i=!i)}return i}function qpe(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return Vpe(s,t)}function Qf(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Wpe=p6,Kpe=K1,Ype=x6,Xpe=v6,Zpe=Q1,Qpe=b6,Jpe=zy,ege=w6,tge=S6,sge=N6,nge=k6,rge=A6,ige=E6,age=P6,oge=D6,$y="DropdownMenu",[lge]=ur($y,[m6]),ti=m6(),[cge,M6]=lge($y),L6=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,u=ti(t),d=p.useRef(null),[m,f]=$i({prop:i,defaultProp:a??!1,onChange:o,caller:$y});return n.jsx(cge,{scope:t,triggerId:Li(),triggerRef:d,contentId:Li(),open:m,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(x=>!x),[f]),modal:l,children:n.jsx(Wpe,{...u,open:m,onOpenChange:f,dir:r,modal:l,children:s})})};L6.displayName=$y;var O6="DropdownMenuTrigger",F6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...i}=e,a=M6(O6,s),o=ti(s);return n.jsx(Kpe,{asChild:!0,...o,children:n.jsx(ot.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:So(t,a.triggerRef),onPointerDown:Fe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Fe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});F6.displayName=O6;var dge="DropdownMenuPortal",B6=e=>{const{__scopeDropdownMenu:t,...s}=e,r=ti(t);return n.jsx(Ype,{...r,...s})};B6.displayName=dge;var z6="DropdownMenuContent",$6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=M6(z6,s),a=ti(s),o=p.useRef(!1);return n.jsx(Xpe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:Fe(e.onCloseAutoFocus,l=>{o.current||i.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Fe(e.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,m=u.button===2||d;(!i.modal||m)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});$6.displayName=z6;var uge="DropdownMenuGroup",hge=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(Zpe,{...i,...r,ref:t})});hge.displayName=uge;var mge="DropdownMenuLabel",H6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(Qpe,{...i,...r,ref:t})});H6.displayName=mge;var fge="DropdownMenuItem",U6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(Jpe,{...i,...r,ref:t})});U6.displayName=fge;var pge="DropdownMenuCheckboxItem",G6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(ege,{...i,...r,ref:t})});G6.displayName=pge;var gge="DropdownMenuRadioGroup",xge=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(tge,{...i,...r,ref:t})});xge.displayName=gge;var vge="DropdownMenuRadioItem",V6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(sge,{...i,...r,ref:t})});V6.displayName=vge;var bge="DropdownMenuItemIndicator",q6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(nge,{...i,...r,ref:t})});q6.displayName=bge;var yge="DropdownMenuSeparator",W6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(rge,{...i,...r,ref:t})});W6.displayName=yge;var wge="DropdownMenuArrow",jge=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(ige,{...i,...r,ref:t})});jge.displayName=wge;var Sge="DropdownMenuSubTrigger",K6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(age,{...i,...r,ref:t})});K6.displayName=Sge;var _ge="DropdownMenuSubContent",Y6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,i=ti(s);return n.jsx(oge,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Y6.displayName=_ge;var Nge=L6,Cge=F6,kge=B6,X6=$6,Z6=H6,Q6=U6,J6=G6,e$=V6,t$=q6,s$=W6,n$=K6,r$=Y6;const mo=Nge,fo=Cge,Age=p.forwardRef(({className:e,inset:t,children:s,...r},i)=>n.jsxs(n$,{ref:i,className:J("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,n.jsx(Xt,{className:"ml-auto h-4 w-4"})]}));Age.displayName=n$.displayName;const Ege=p.forwardRef(({className:e,...t},s)=>n.jsx(r$,{ref:s,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Ege.displayName=r$.displayName;const La=p.forwardRef(({className:e,sideOffset:t=4,collisionPadding:s=8,...r},i)=>n.jsx(kge,{children:n.jsx(X6,{ref:i,sideOffset:t,collisionPadding:s,className:J("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","max-h-[var(--radix-dropdown-menu-content-available-height,400px)]","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));La.displayName=X6.displayName;const Pn=p.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(Q6,{ref:r,className:J("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));Pn.displayName=Q6.displayName;const Tge=p.forwardRef(({className:e,children:t,checked:s,...r},i)=>n.jsxs(J6,{ref:i,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(t$,{children:n.jsx(Pt,{className:"h-4 w-4"})})}),t]}));Tge.displayName=J6.displayName;const Pge=p.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(e$,{ref:r,className:J("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(t$,{children:n.jsx(yo,{className:"h-2 w-2 fill-current"})})}),t]}));Pge.displayName=e$.displayName;const tk=p.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(Z6,{ref:r,className:J("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));tk.displayName=Z6.displayName;const ma=p.forwardRef(({className:e,...t},s)=>n.jsx(s$,{ref:s,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));ma.displayName=s$.displayName;const sk=p.createContext({});function nk(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const rk=typeof window<"u",i$=rk?p.useLayoutEffect:p.useEffect,Hy=p.createContext(null);function ik(e,t){e.indexOf(t)===-1&&e.push(t)}function ak(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}const hl=(e,t,s)=>s>t?t:s<e?e:s;let ok=()=>{};const ml={},a$=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function o$(e){return typeof e=="object"&&e!==null}const l$=e=>/^0[^.\s]+$/u.test(e);function lk(e){let t;return()=>(t===void 0&&(t=e()),t)}const fa=e=>e,Rge=(e,t)=>s=>t(e(s)),Hp=(...e)=>e.reduce(Rge),Jf=(e,t,s)=>{const r=t-e;return r===0?1:(s-e)/r};class ck{constructor(){this.subscriptions=[]}add(t){return ik(this.subscriptions,t),()=>ak(this.subscriptions,t)}notify(t,s,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,s,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oo=e=>e*1e3,da=e=>e/1e3;function c$(e,t){return t?e*(1e3/t):0}const d$=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,Dge=1e-7,Ige=12;function Mge(e,t,s,r,i){let a,o,l=0;do o=t+(s-t)/2,a=d$(o,r,i)-e,a>0?s=o:t=o;while(Math.abs(a)>Dge&&++l<Ige);return o}function Up(e,t,s,r){if(e===t&&s===r)return fa;const i=a=>Mge(a,0,1,e,s);return a=>a===0||a===1?a:d$(i(a),t,r)}const u$=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,h$=e=>t=>1-e(1-t),m$=Up(.33,1.53,.69,.99),dk=h$(m$),f$=u$(dk),p$=e=>(e*=2)<1?.5*dk(e):.5*(2-Math.pow(2,-10*(e-1))),uk=e=>1-Math.sin(Math.acos(e)),g$=h$(uk),x$=u$(uk),Lge=Up(.42,0,1,1),Oge=Up(0,0,.58,1),v$=Up(.42,0,.58,1),Fge=e=>Array.isArray(e)&&typeof e[0]!="number",b$=e=>Array.isArray(e)&&typeof e[0]=="number",Bge={linear:fa,easeIn:Lge,easeInOut:v$,easeOut:Oge,circIn:uk,circInOut:x$,circOut:g$,backIn:dk,backInOut:f$,backOut:m$,anticipate:p$},zge=e=>typeof e=="string",tI=e=>{if(b$(e)){ok(e.length===4);const[t,s,r,i]=e;return Up(t,s,r,i)}else if(zge(e))return Bge[e];return e},Ix=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function $ge(e,t){let s=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(m){o.has(m)&&(d.schedule(m),e()),m(l)}const d={schedule:(m,f=!1,x=!1)=>{const y=x&&i?s:r;return f&&o.add(m),y.has(m)||y.add(m),m},cancel:m=>{r.delete(m),o.delete(m)},process:m=>{if(l=m,i){a=!0;return}i=!0,[s,r]=[r,s],s.forEach(u),s.clear(),i=!1,a&&(a=!1,d.process(m))}};return d}const Hge=40;function y$(e,t){let s=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=Ix.reduce((j,T)=>(j[T]=$ge(a),j),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:m,update:f,preRender:x,render:v,postRender:y}=o,w=()=>{const j=ml.useManualTiming?i.timestamp:performance.now();s=!1,ml.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(j-i.timestamp,Hge),1)),i.timestamp=j,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),m.process(i),f.process(i),x.process(i),v.process(i),y.process(i),i.isProcessing=!1,s&&t&&(r=!1,e(w))},S=()=>{s=!0,r=!0,i.isProcessing||e(w)};return{schedule:Ix.reduce((j,T)=>{const E=o[T];return j[T]=(A,R=!1,D=!1)=>(s||S(),E.schedule(A,R,D)),j},{}),cancel:j=>{for(let T=0;T<Ix.length;T++)o[Ix[T]].cancel(j)},state:i,steps:o}}const{schedule:Qs,cancel:dc,state:br,steps:uS}=y$(typeof requestAnimationFrame<"u"?requestAnimationFrame:fa,!0);let xv;function Uge(){xv=void 0}const mi={now:()=>(xv===void 0&&mi.set(br.isProcessing||ml.useManualTiming?br.timestamp:performance.now()),xv),set:e=>{xv=e,queueMicrotask(Uge)}},w$=e=>t=>typeof t=="string"&&t.startsWith(e),j$=w$("--"),Gge=w$("var(--"),hk=e=>Gge(e)?Vge.test(e.split("/*")[0].trim()):!1,Vge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hh={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ep={...Hh,transform:e=>hl(0,1,e)},Mx={...Hh,default:1},Af=e=>Math.round(e*1e5)/1e5,mk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function qge(e){return e==null}const Wge=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fk=(e,t)=>s=>!!(typeof s=="string"&&Wge.test(s)&&s.startsWith(e)||t&&!qge(s)&&Object.prototype.hasOwnProperty.call(s,t)),S$=(e,t,s)=>r=>{if(typeof r!="string")return r;const[i,a,o,l]=r.match(mk);return{[e]:parseFloat(i),[t]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Kge=e=>hl(0,255,e),hS={...Hh,transform:e=>Math.round(Kge(e))},Yc={test:fk("rgb","red"),parse:S$("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:r=1})=>"rgba("+hS.transform(e)+", "+hS.transform(t)+", "+hS.transform(s)+", "+Af(ep.transform(r))+")"};function Yge(e){let t="",s="",r="",i="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,s+=s,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const oN={test:fk("#"),parse:Yge,transform:Yc.transform},Gp=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Yl=Gp("deg"),lo=Gp("%"),At=Gp("px"),Xge=Gp("vh"),Zge=Gp("vw"),sI={...lo,parse:e=>lo.parse(e)/100,transform:e=>lo.transform(e*100)},Du={test:fk("hsl","hue"),parse:S$("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:r=1})=>"hsla("+Math.round(e)+", "+lo.transform(Af(t))+", "+lo.transform(Af(s))+", "+Af(ep.transform(r))+")"},En={test:e=>Yc.test(e)||oN.test(e)||Du.test(e),parse:e=>Yc.test(e)?Yc.parse(e):Du.test(e)?Du.parse(e):oN.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Yc.transform(e):Du.transform(e),getAnimatableNone:e=>{const t=En.parse(e);return t.alpha=0,En.transform(t)}},Qge=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jge(e){return isNaN(e)&&typeof e=="string"&&(e.match(mk)?.length||0)+(e.match(Qge)?.length||0)>0}const _$="number",N$="color",exe="var",txe="var(",nI="${}",sxe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tp(e){const t=e.toString(),s=[],r={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(sxe,u=>(En.test(u)?(r.color.push(a),i.push(N$),s.push(En.parse(u))):u.startsWith(txe)?(r.var.push(a),i.push(exe),s.push(u)):(r.number.push(a),i.push(_$),s.push(parseFloat(u))),++a,nI)).split(nI);return{values:s,split:l,indexes:r,types:i}}function C$(e){return tp(e).values}function k$(e){const{split:t,types:s}=tp(e),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const l=s[o];l===_$?a+=Af(i[o]):l===N$?a+=En.transform(i[o]):a+=i[o]}return a}}const nxe=e=>typeof e=="number"?0:En.test(e)?En.getAnimatableNone(e):e;function rxe(e){const t=C$(e);return k$(e)(t.map(nxe))}const uc={test:Jge,parse:C$,createTransformer:k$,getAnimatableNone:rxe};function mS(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function ixe({hue:e,saturation:t,lightness:s,alpha:r}){e/=360,t/=100,s/=100;let i=0,a=0,o=0;if(!t)i=a=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,u=2*s-l;i=mS(u,l,e+1/3),a=mS(u,l,e),o=mS(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function mb(e,t){return s=>s>0?t:e}const rn=(e,t,s)=>e+(t-e)*s,fS=(e,t,s)=>{const r=e*e,i=s*(t*t-r)+r;return i<0?0:Math.sqrt(i)},axe=[oN,Yc,Du],oxe=e=>axe.find(t=>t.test(e));function rI(e){const t=oxe(e);if(!t)return!1;let s=t.parse(e);return t===Du&&(s=ixe(s)),s}const iI=(e,t)=>{const s=rI(e),r=rI(t);if(!s||!r)return mb(e,t);const i={...s};return a=>(i.red=fS(s.red,r.red,a),i.green=fS(s.green,r.green,a),i.blue=fS(s.blue,r.blue,a),i.alpha=rn(s.alpha,r.alpha,a),Yc.transform(i))},lN=new Set(["none","hidden"]);function lxe(e,t){return lN.has(e)?s=>s<=0?e:t:s=>s>=1?t:e}function cxe(e,t){return s=>rn(e,t,s)}function pk(e){return typeof e=="number"?cxe:typeof e=="string"?hk(e)?mb:En.test(e)?iI:hxe:Array.isArray(e)?A$:typeof e=="object"?En.test(e)?iI:dxe:mb}function A$(e,t){const s=[...e],r=s.length,i=e.map((a,o)=>pk(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)s[o]=i[o](a);return s}}function dxe(e,t){const s={...e,...t},r={};for(const i in s)e[i]!==void 0&&t[i]!==void 0&&(r[i]=pk(e[i])(e[i],t[i]));return i=>{for(const a in r)s[a]=r[a](i);return s}}function uxe(e,t){const s=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],o=e.indexes[a][r[a]],l=e.values[o]??0;s[i]=l,r[a]++}return s}const hxe=(e,t)=>{const s=uc.createTransformer(t),r=tp(e),i=tp(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?lN.has(e)&&!i.values.length||lN.has(t)&&!r.values.length?lxe(e,t):Hp(A$(uxe(r,i),i.values),s):mb(e,t)};function E$(e,t,s){return typeof e=="number"&&typeof t=="number"&&typeof s=="number"?rn(e,t,s):pk(e)(e,t)}const mxe=e=>{const t=({timestamp:s})=>e(s);return{start:(s=!0)=>Qs.update(t,s),stop:()=>dc(t),now:()=>br.isProcessing?br.timestamp:mi.now()}},T$=(e,t,s=10)=>{let r="";const i=Math.max(Math.round(t/s),2);for(let a=0;a<i;a++)r+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fb=2e4;function gk(e){let t=0;const s=50;let r=e.next(t);for(;!r.done&&t<fb;)t+=s,r=e.next(t);return t>=fb?1/0:t}function fxe(e,t=100,s){const r=s({...e,keyframes:[0,t]}),i=Math.min(gk(r),fb);return{type:"keyframes",ease:a=>r.next(i*a).value/t,duration:da(i)}}const pxe=5;function P$(e,t,s){const r=Math.max(t-pxe,0);return c$(s-e(r),t-r)}const un={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pS=.001;function gxe({duration:e=un.duration,bounce:t=un.bounce,velocity:s=un.velocity,mass:r=un.mass}){let i,a,o=1-t;o=hl(un.minDamping,un.maxDamping,o),e=hl(un.minDuration,un.maxDuration,da(e)),o<1?(i=d=>{const m=d*o,f=m*e,x=m-s,v=cN(d,o),y=Math.exp(-f);return pS-x/v*y},a=d=>{const f=d*o*e,x=f*s+s,v=Math.pow(o,2)*Math.pow(d,2)*e,y=Math.exp(-f),w=cN(Math.pow(d,2),o);return(-i(d)+pS>0?-1:1)*((x-v)*y)/w}):(i=d=>{const m=Math.exp(-d*e),f=(d-s)*e+1;return-pS+m*f},a=d=>{const m=Math.exp(-d*e),f=(s-d)*(e*e);return m*f});const l=5/e,u=vxe(i,a,l);if(e=oo(e),isNaN(u))return{stiffness:un.stiffness,damping:un.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const xxe=12;function vxe(e,t,s){let r=s;for(let i=1;i<xxe;i++)r=r-e(r)/t(r);return r}function cN(e,t){return e*Math.sqrt(1-t*t)}const bxe=["duration","bounce"],yxe=["stiffness","damping","mass"];function aI(e,t){return t.some(s=>e[s]!==void 0)}function wxe(e){let t={velocity:un.velocity,stiffness:un.stiffness,damping:un.damping,mass:un.mass,isResolvedFromDuration:!1,...e};if(!aI(e,yxe)&&aI(e,bxe))if(e.visualDuration){const s=e.visualDuration,r=2*Math.PI/(s*1.2),i=r*r,a=2*hl(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:un.mass,stiffness:i,damping:a}}else{const s=gxe(e);t={...t,...s,mass:un.mass},t.isResolvedFromDuration=!0}return t}function pb(e=un.visualDuration,t=un.bounce){const s=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:d,mass:m,duration:f,velocity:x,isResolvedFromDuration:v}=wxe({...s,velocity:-da(s.velocity||0)}),y=x||0,w=d/(2*Math.sqrt(u*m)),S=o-a,C=da(Math.sqrt(u/m)),_=Math.abs(S)<5;r||(r=_?un.restSpeed.granular:un.restSpeed.default),i||(i=_?un.restDelta.granular:un.restDelta.default);let j;if(w<1){const E=cN(C,w);j=A=>{const R=Math.exp(-w*C*A);return o-R*((y+w*C*S)/E*Math.sin(E*A)+S*Math.cos(E*A))}}else if(w===1)j=E=>o-Math.exp(-C*E)*(S+(y+C*S)*E);else{const E=C*Math.sqrt(w*w-1);j=A=>{const R=Math.exp(-w*C*A),D=Math.min(E*A,300);return o-R*((y+w*C*S)*Math.sinh(D)+E*S*Math.cosh(D))/E}}const T={calculatedDuration:v&&f||null,next:E=>{const A=j(E);if(v)l.done=E>=f;else{let R=E===0?y:0;w<1&&(R=E===0?oo(y):P$(j,E,A));const D=Math.abs(R)<=r,M=Math.abs(o-A)<=i;l.done=D&&M}return l.value=l.done?o:A,l},toString:()=>{const E=Math.min(gk(T),fb),A=T$(R=>T.next(E*R).value,E,30);return E+"ms "+A},toTransition:()=>{}};return T}pb.applyToOptions=e=>{const t=fxe(e,100,pb);return e.ease=t.ease,e.duration=oo(t.duration),e.type="keyframes",e};function dN({keyframes:e,velocity:t=0,power:s=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:m}){const f=e[0],x={done:!1,value:f},v=D=>l!==void 0&&D<l||u!==void 0&&D>u,y=D=>l===void 0?u:u===void 0||Math.abs(l-D)<Math.abs(u-D)?l:u;let w=s*t;const S=f+w,C=o===void 0?S:o(S);C!==S&&(w=C-f);const _=D=>-w*Math.exp(-D/r),j=D=>C+_(D),T=D=>{const M=_(D),P=j(D);x.done=Math.abs(M)<=d,x.value=x.done?C:P};let E,A;const R=D=>{v(x.value)&&(E=D,A=pb({keyframes:[x.value,y(x.value)],velocity:P$(j,D,x.value),damping:i,stiffness:a,restDelta:d,restSpeed:m}))};return R(0),{calculatedDuration:null,next:D=>{let M=!1;return!A&&E===void 0&&(M=!0,T(D),R(D)),E!==void 0&&D>=E?A.next(D-E):(!M&&T(D),x)}}}function jxe(e,t,s){const r=[],i=s||ml.mix||E$,a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||fa:t;l=Hp(u,l)}r.push(l)}return r}function Sxe(e,t,{clamp:s=!0,ease:r,mixer:i}={}){const a=e.length;if(ok(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=jxe(t,r,i),u=l.length,d=m=>{if(o&&m<e[0])return t[0];let f=0;if(u>1)for(;f<e.length-2&&!(m<e[f+1]);f++);const x=Jf(e[f],e[f+1],m);return l[f](x)};return s?m=>d(hl(e[0],e[a-1],m)):d}function _xe(e,t){const s=e[e.length-1];for(let r=1;r<=t;r++){const i=Jf(0,t,r);e.push(rn(s,1,i))}}function Nxe(e){const t=[0];return _xe(t,e.length-1),t}function Cxe(e,t){return e.map(s=>s*t)}function kxe(e,t){return e.map(()=>t||v$).splice(0,e.length-1)}function Ef({duration:e=300,keyframes:t,times:s,ease:r="easeInOut"}){const i=Fge(r)?r.map(tI):tI(r),a={done:!1,value:t[0]},o=Cxe(s&&s.length===t.length?s:Nxe(t),e),l=Sxe(o,t,{ease:Array.isArray(i)?i:kxe(t,i)});return{calculatedDuration:e,next:u=>(a.value=l(u),a.done=u>=e,a)}}const Axe=e=>e!==null;function xk(e,{repeat:t,repeatType:s="loop"},r,i=1){const a=e.filter(Axe),l=i<0||t&&s!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Exe={decay:dN,inertia:dN,tween:Ef,keyframes:Ef,spring:pb};function R$(e){typeof e.type=="string"&&(e.type=Exe[e.type])}class vk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,s){return this.finished.then(t,s)}}const Txe=e=>e/100;class bk extends vk{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==mi.now()&&this.tick(mi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;R$(t);const{type:s=Ef,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=t;let{keyframes:l}=t;const u=s||Ef;u!==Ef&&typeof l[0]!="number"&&(this.mixKeyframes=Hp(Txe,E$(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=gk(d));const{calculatedDuration:m}=d;this.calculatedDuration=m,this.resolvedDuration=m+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const s=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(t,s=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:m,repeat:f,repeatType:x,repeatDelay:v,type:y,onUpdate:w,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),s?this.currentTime=t:this.updateTime(t);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let j=this.currentTime,T=r;if(f){const D=Math.min(this.currentTime,i)/l;let M=Math.floor(D),P=D%1;!P&&D>=1&&(P=1),P===1&&M--,M=Math.min(M,f+1),M%2&&(x==="reverse"?(P=1-P,v&&(P-=v/l)):x==="mirror"&&(T=o)),j=hl(0,1,P)*l}const E=_?{done:!1,value:m[0]}:T.next(j);a&&(E.value=a(E.value));let{done:A}=E;!_&&u!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return R&&y!==dN&&(E.value=xk(m,this.options,S,this.speed)),w&&w(E.value),R&&this.finish(),E}then(t,s){return this.finished.then(t,s)}get duration(){return da(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+da(t)}get time(){return da(this.currentTime)}set time(t){t=oo(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(mi.now());const s=this.playbackSpeed!==t;this.playbackSpeed=t,s&&(this.time=da(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=mxe,startTime:s}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Pxe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Xc=e=>e*180/Math.PI,uN=e=>{const t=Xc(Math.atan2(e[1],e[0]));return hN(t)},Rxe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:uN,rotateZ:uN,skewX:e=>Xc(Math.atan(e[1])),skewY:e=>Xc(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},hN=e=>(e=e%360,e<0&&(e+=360),e),oI=uN,lI=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),cI=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Dxe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lI,scaleY:cI,scale:e=>(lI(e)+cI(e))/2,rotateX:e=>hN(Xc(Math.atan2(e[6],e[5]))),rotateY:e=>hN(Xc(Math.atan2(-e[2],e[0]))),rotateZ:oI,rotate:oI,skewX:e=>Xc(Math.atan(e[4])),skewY:e=>Xc(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function mN(e){return e.includes("scale")?1:0}function fN(e,t){if(!e||e==="none")return mN(t);const s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(s)r=Dxe,i=s;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Rxe,i=l}if(!i)return mN(t);const a=r[t],o=i[1].split(",").map(Mxe);return typeof a=="function"?a(o):o[a]}const Ixe=(e,t)=>{const{transform:s="none"}=getComputedStyle(e);return fN(s,t)};function Mxe(e){return parseFloat(e.trim())}const Uh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gh=new Set(Uh),dI=e=>e===Hh||e===At,Lxe=new Set(["x","y","z"]),Oxe=Uh.filter(e=>!Lxe.has(e));function Fxe(e){const t=[];return Oxe.forEach(s=>{const r=e.getValue(s);r!==void 0&&(t.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),t}const nd={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>fN(t,"x"),y:(e,{transform:t})=>fN(t,"y")};nd.translateX=nd.x;nd.translateY=nd.y;const rd=new Set;let pN=!1,gN=!1,xN=!1;function D$(){if(gN){const e=Array.from(rd).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),s=new Map;t.forEach(r=>{const i=Fxe(r);i.length&&(s.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=s.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gN=!1,pN=!1,rd.forEach(e=>e.complete(xN)),rd.clear()}function I$(){rd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(gN=!0)})}function Bxe(){xN=!0,I$(),D$(),xN=!1}class yk{constructor(t,s,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=s,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(rd.add(this),pN||(pN=!0,Qs.read(I$),Qs.resolveKeyframes(D$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:s,element:r,motionValue:i}=this;if(t[0]===null){const a=i?.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&s){const l=r.readValue(s,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}Pxe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),rd.delete(this)}cancel(){this.state==="scheduled"&&(rd.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zxe=e=>e.startsWith("--");function $xe(e,t,s){zxe(t)?e.style.setProperty(t,s):e.style[t]=s}const Hxe=lk(()=>window.ScrollTimeline!==void 0),Uxe={};function Gxe(e,t){const s=lk(e);return()=>Uxe[t]??s()}const M$=Gxe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ff=([e,t,s,r])=>`cubic-bezier(${e}, ${t}, ${s}, ${r})`,uI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ff([0,.65,.55,1]),circOut:ff([.55,0,1,.45]),backIn:ff([.31,.01,.66,-.59]),backOut:ff([.33,1.53,.69,.99])};function L$(e,t){if(e)return typeof e=="function"?M$()?T$(e,t):"ease-out":b$(e)?ff(e):Array.isArray(e)?e.map(s=>L$(s,t)||uI.easeOut):uI[e]}function Vxe(e,t,s,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const m={[t]:s};u&&(m.offset=u);const f=L$(l,i);Array.isArray(f)&&(m.easing=f);const x={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return d&&(x.pseudoElement=d),e.animate(m,x)}function O$(e){return typeof e=="function"&&"applyToOptions"in e}function qxe({type:e,...t}){return O$(e)&&M$()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Wxe extends vk{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:s,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,ok(typeof t.type!="string");const d=qxe(t);this.animation=Vxe(s,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=xk(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):$xe(s,r,m),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return da(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+da(t)}get time(){return da(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=oo(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Hxe()?(this.animation.timeline=t,fa):s(this)}}const F$={anticipate:p$,backInOut:f$,circInOut:x$};function Kxe(e){return e in F$}function Yxe(e){typeof e.ease=="string"&&Kxe(e.ease)&&(e.ease=F$[e.ease])}const hI=10;class Xxe extends Wxe{constructor(t){Yxe(t),R$(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:s,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!s)return;if(t!==void 0){s.set(t);return}const l=new bk({...o,autoplay:!1}),u=oo(this.finishedTime??this.time);s.setWithVelocity(l.sample(u-hI).value,l.sample(u).value,hI),l.stop()}}const mI=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(uc.test(e)||e==="0")&&!e.startsWith("url("));function Zxe(e){const t=e[0];if(e.length===1)return!0;for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}function Qxe(e,t,s,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=mI(i,t),l=mI(a,t);return!o||!l?!1:Zxe(e)||(s==="spring"||O$(s))&&r}function vN(e){e.duration=0,e.type="keyframes"}const Jxe=new Set(["opacity","clipPath","filter","transform"]),eve=lk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tve(e){const{motionValue:t,name:s,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return eve()&&s&&Jxe.has(s)&&(s!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const sve=40;class nve extends vk{constructor({autoplay:t=!0,delay:s=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:m,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mi.now();const x={autoplay:t,delay:s,type:r,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:d,element:m,...f},v=m?.KeyframeResolver||yk;this.keyframeResolver=new v(l,(y,w,S)=>this.onKeyframesResolved(y,w,x,!S),u,d,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,s,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:m}=r;this.resolvedAt=mi.now(),Qxe(t,a,o,l)||((ml.instantAnimations||!u)&&m?.(xk(t,r,s)),t[0]=t[t.length-1],vN(r),r.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>sve?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:t},v=!d&&tve(x)?new Xxe({...x,element:x.motionValue.owner.current}):new bk(x);v.finished.then(()=>this.notifyFinished()).catch(fa),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,s){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Bxe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const rve=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ive(e){const t=rve.exec(e);if(!t)return[,];const[,s,r,i]=t;return[`--${s??r}`,i]}function B$(e,t,s=1){const[r,i]=ive(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return a$(o)?parseFloat(o):o}return hk(i)?B$(i,t,s+1):i}function wk(e,t){return e?.[t]??e?.default??e}const z$=new Set(["width","height","top","left","right","bottom",...Uh]),ave={test:e=>e==="auto",parse:e=>e},$$=e=>t=>t.test(e),H$=[Hh,At,lo,Yl,Zge,Xge,ave],fI=e=>H$.find($$(e));function ove(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||l$(e):!0}const lve=new Set(["brightness","contrast","saturate","opacity"]);function cve(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=s.match(mk)||[];if(!r)return e;const i=s.replace(r,"");let a=lve.has(t)?1:0;return r!==s&&(a*=100),t+"("+a+i+")"}const dve=/\b([a-z-]*)\(.*?\)/gu,bN={...uc,getAnimatableNone:e=>{const t=e.match(dve);return t?t.map(cve).join(" "):e}},pI={...Hh,transform:Math.round},uve={rotate:Yl,rotateX:Yl,rotateY:Yl,rotateZ:Yl,scale:Mx,scaleX:Mx,scaleY:Mx,scaleZ:Mx,skew:Yl,skewX:Yl,skewY:Yl,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:ep,originX:sI,originY:sI,originZ:At},jk={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...uve,zIndex:pI,fillOpacity:ep,strokeOpacity:ep,numOctaves:pI},hve={...jk,color:En,backgroundColor:En,outlineColor:En,fill:En,stroke:En,borderColor:En,borderTopColor:En,borderRightColor:En,borderBottomColor:En,borderLeftColor:En,filter:bN,WebkitFilter:bN},U$=e=>hve[e];function G$(e,t){let s=U$(e);return s!==bN&&(s=uc),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const mve=new Set(["auto","none","0"]);function fve(e,t,s){let r=0,i;for(;r<e.length&&!i;){const a=e[r];typeof a=="string"&&!mve.has(a)&&tp(a).values.length&&(i=e[r]),r++}if(i&&s)for(const a of t)e[a]=G$(s,i)}class pve extends yk{constructor(t,s,r,i,a){super(t,s,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),hk(d))){const m=B$(d,s.current);m!==void 0&&(t[u]=m),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!z$.has(r)||t.length!==2)return;const[i,a]=t,o=fI(i),l=fI(a);if(o!==l)if(dI(o)&&dI(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else nd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:s}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||ove(t[i]))&&r.push(i);r.length&&fve(t,r,s)}measureInitialState(){const{element:t,unresolvedKeyframes:s,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nd[r](t.measureViewportBox(),window.getComputedStyle(t.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:s,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(s);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=nd[s](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function gve(e,t,s){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=s?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const V$=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function q$(e){return o$(e)&&"offsetHeight"in e}const gI=30,xve=e=>!isNaN(parseFloat(e));class vve{constructor(t,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=mi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=s.owner}setCurrent(t){this.current=t,this.updatedAt=mi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=xve(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new ck);const r=this.events[t].add(s);return t==="change"?()=>{r(),Qs.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,s=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gI)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,gI);return c$(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function uh(e,t){return new vve(e,t)}const{schedule:Sk}=y$(queueMicrotask,!1),Na={x:!1,y:!1};function W$(){return Na.x||Na.y}function bve(e){return e==="x"||e==="y"?Na[e]?null:(Na[e]=!0,()=>{Na[e]=!1}):Na.x||Na.y?null:(Na.x=Na.y=!0,()=>{Na.x=Na.y=!1})}function K$(e,t){const s=gve(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[s,i,()=>r.abort()]}function xI(e){return!(e.pointerType==="touch"||W$())}function yve(e,t,s={}){const[r,i,a]=K$(e,s),o=l=>{if(!xI(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const m=f=>{xI(f)&&(d(f),u.removeEventListener("pointerleave",m))};u.addEventListener("pointerleave",m,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),a}const Y$=(e,t)=>t?e===t?!0:Y$(e,t.parentElement):!1,_k=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,wve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jve(e){return wve.has(e.tagName)||e.tabIndex!==-1}const vv=new WeakSet;function vI(e){return t=>{t.key==="Enter"&&e(t)}}function gS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Sve=(e,t)=>{const s=e.currentTarget;if(!s)return;const r=vI(()=>{if(vv.has(s))return;gS(s,"down");const i=vI(()=>{gS(s,"up")}),a=()=>gS(s,"cancel");s.addEventListener("keyup",i,t),s.addEventListener("blur",a,t)});s.addEventListener("keydown",r,t),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),t)};function bI(e){return _k(e)&&!W$()}function _ve(e,t,s={}){const[r,i,a]=K$(e,s),o=l=>{const u=l.currentTarget;if(!bI(l))return;vv.add(u);const d=t(u,l),m=(v,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",x),vv.has(u)&&vv.delete(u),bI(v)&&typeof d=="function"&&d(v,{success:y})},f=v=>{m(v,u===window||u===document||s.useGlobalTarget||Y$(u,v.target))},x=v=>{m(v,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",x,i)};return r.forEach(l=>{(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),q$(l)&&(l.addEventListener("focus",d=>Sve(d,i)),!jve(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function X$(e){return o$(e)&&"ownerSVGElement"in e}function Nve(e){return X$(e)&&e.tagName==="svg"}const Tr=e=>!!(e&&e.getVelocity),Cve=[...H$,En,uc],kve=e=>Cve.find($$(e)),Nk=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function yI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ave(...e){return t=>{let s=!1;const r=e.map(i=>{const a=yI(i,t);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():yI(e[i],null)}}}}function Eve(...e){return p.useCallback(Ave(...e),e)}class Tve extends p.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const r=s.offsetParent,i=q$(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Pve({children:e,isPresent:t,anchorX:s,root:r}){const i=p.useId(),a=p.useRef(null),o=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(Nk),u=Eve(a,e?.ref);return p.useInsertionEffect(()=>{const{width:d,height:m,top:f,left:x,right:v}=o.current;if(t||!a.current||!d||!m)return;const y=s==="left"?`left: ${x}`:`right: ${v}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");l&&(w.nonce=l);const S=r??document.head;return S.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${y}px !important;
            top: ${f}px !important;
          }
        `),()=>{S.contains(w)&&S.removeChild(w)}},[t]),n.jsx(Tve,{isPresent:t,childRef:a,sizeRef:o,children:p.cloneElement(e,{ref:u})})}const Rve=({children:e,initial:t,isPresent:s,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:l,root:u})=>{const d=nk(Dve),m=p.useId();let f=!0,x=p.useMemo(()=>(f=!1,{id:m,initial:t,isPresent:s,custom:i,onExitComplete:v=>{d.set(v,!0);for(const y of d.values())if(!y)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[s,d,r]);return a&&f&&(x={...x}),p.useMemo(()=>{d.forEach((v,y)=>d.set(y,!1))},[s]),p.useEffect(()=>{!s&&!d.size&&r&&r()},[s]),o==="popLayout"&&(e=n.jsx(Pve,{isPresent:s,anchorX:l,root:u,children:e})),n.jsx(Hy.Provider,{value:x,children:e})};function Dve(){return new Map}function Z$(e=!0){const t=p.useContext(Hy);if(t===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:i}=t,a=p.useId();p.useEffect(()=>{if(e)return i(a)},[e]);const o=p.useCallback(()=>e&&r&&r(a),[a,r,e]);return!s&&r?[!1,o]:[!0]}const Lx=e=>e.key||"";function wI(e){const t=[];return p.Children.forEach(e,s=>{p.isValidElement(s)&&t.push(s)}),t}const sp=({children:e,custom:t,initial:s=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,m]=Z$(o),f=p.useMemo(()=>wI(e),[e]),x=o&&!d?[]:f.map(Lx),v=p.useRef(!0),y=p.useRef(f),w=nk(()=>new Map),[S,C]=p.useState(f),[_,j]=p.useState(f);i$(()=>{v.current=!1,y.current=f;for(let A=0;A<_.length;A++){const R=Lx(_[A]);x.includes(R)?w.delete(R):w.get(R)!==!0&&w.set(R,!1)}},[_,x.length,x.join("-")]);const T=[];if(f!==S){let A=[...f];for(let R=0;R<_.length;R++){const D=_[R],M=Lx(D);x.includes(M)||(A.splice(R,0,D),T.push(D))}return a==="wait"&&T.length&&(A=T),j(wI(A)),C(f),null}const{forceRender:E}=p.useContext(sk);return n.jsx(n.Fragment,{children:_.map(A=>{const R=Lx(A),D=o&&!d?!1:f===_||x.includes(R),M=()=>{if(w.has(R))w.set(R,!0);else return;let P=!0;w.forEach(O=>{O||(P=!1)}),P&&(E?.(),j(y.current),o&&m?.(),r&&r())};return n.jsx(Rve,{isPresent:D,initial:!v.current||s?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:D?void 0:M,anchorX:l,children:A},R)})})},Q$=p.createContext({strict:!1}),jI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},hh={};for(const e in jI)hh[e]={isEnabled:t=>jI[e].some(s=>!!t[s])};function Ive(e){for(const t in e)hh[t]={...hh[t],...e[t]}}const Mve=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Mve.has(e)}let J$=e=>!gb(e);function Lve(e){typeof e=="function"&&(J$=t=>t.startsWith("on")?!gb(t):e(t))}try{Lve(require("@emotion/is-prop-valid").default)}catch{}function Ove(e,t,s){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(J$(i)||s===!0&&gb(i)||!t&&!gb(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Uy=p.createContext({});function Gy(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function np(e){return typeof e=="string"||Array.isArray(e)}const Ck=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],kk=["initial",...Ck];function Vy(e){return Gy(e.animate)||kk.some(t=>np(e[t]))}function e8(e){return!!(Vy(e)||e.variants)}function Fve(e,t){if(Vy(e)){const{initial:s,animate:r}=e;return{initial:s===!1||np(s)?s:void 0,animate:np(r)?r:void 0}}return e.inherit!==!1?t:{}}function Bve(e){const{initial:t,animate:s}=Fve(e,p.useContext(Uy));return p.useMemo(()=>({initial:t,animate:s}),[SI(t),SI(s)])}function SI(e){return Array.isArray(e)?e.join(" "):e}function _I(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Vm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(At.test(e))e=parseFloat(e);else return e;const s=_I(e,t.target.x),r=_I(e,t.target.y);return`${s}% ${r}%`}},zve={correct:(e,{treeScale:t,projectionDelta:s})=>{const r=e,i=uc.parse(e);if(i.length>5)return r;const a=uc.createTransformer(e),o=typeof i[0]!="number"?1:0,l=s.x.scale*t.x,u=s.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=rn(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}},yN={borderRadius:{...Vm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vm,borderTopRightRadius:Vm,borderBottomLeftRadius:Vm,borderBottomRightRadius:Vm,boxShadow:zve};function t8(e,{layout:t,layoutId:s}){return Gh.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!yN[e]||e==="opacity")}const $ve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Hve=Uh.length;function Uve(e,t,s){let r="",i=!0;for(let a=0;a<Hve;a++){const o=Uh[a],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||s){const d=V$(l,jk[o]);if(!u){i=!1;const m=$ve[o]||o;r+=`${m}(${d}) `}s&&(t[o]=d)}}return r=r.trim(),s?r=s(t,i?"":r):i&&(r="none"),r}function Ak(e,t,s){const{style:r,vars:i,transformOrigin:a}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Gh.has(u)){o=!0;continue}else if(j$(u)){i[u]=d;continue}else{const m=V$(d,jk[u]);u.startsWith("origin")?(l=!0,a[u]=m):r[u]=m}}if(t.transform||(o||s?r.transform=Uve(t,e.transform,s):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:m=0}=a;r.transformOrigin=`${u} ${d} ${m}`}}const Ek=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function s8(e,t,s){for(const r in t)!Tr(t[r])&&!t8(r,s)&&(e[r]=t[r])}function Gve({transformTemplate:e},t){return p.useMemo(()=>{const s=Ek();return Ak(s,t,e),Object.assign({},s.vars,s.style)},[t])}function Vve(e,t){const s=e.style||{},r={};return s8(r,s,e),Object.assign(r,Gve(e,t)),r}function qve(e,t){const s={},r=Vve(e,t);return e.drag&&e.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const Wve={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kve={offset:"strokeDashoffset",array:"strokeDasharray"};function Yve(e,t,s=1,r=0,i=!0){e.pathLength=1;const a=i?Wve:Kve;e[a.offset]=At.transform(-r);const o=At.transform(t),l=At.transform(s);e[a.array]=`${o} ${l}`}function n8(e,{attrX:t,attrY:s,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...l},u,d,m){if(Ak(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:x}=e;f.transform&&(x.transform=f.transform,delete f.transform),(x.transform||f.transformOrigin)&&(x.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),x.transform&&(x.transformBox=m?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),s!==void 0&&(f.y=s),r!==void 0&&(f.scale=r),i!==void 0&&Yve(f,i,a,o,!1)}const r8=()=>({...Ek(),attrs:{}}),i8=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Xve(e,t,s,r){const i=p.useMemo(()=>{const a=r8();return n8(a,t,i8(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};s8(a,e.style,e),i.style={...a,...i.style}}return i}const Zve=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tk(e){return typeof e!="string"||e.includes("-")?!1:!!(Zve.indexOf(e)>-1||/[A-Z]/u.test(e))}function Qve(e,t,s,{latestValues:r},i,a=!1){const l=(Tk(e)?Xve:qve)(t,r,i,e),u=Ove(t,typeof e=="string",a),d=e!==p.Fragment?{...u,...l,ref:s}:{},{children:m}=t,f=p.useMemo(()=>Tr(m)?m.get():m,[m]);return p.createElement(e,{...d,children:f})}function NI(e){const t=[{},{}];return e?.values.forEach((s,r)=>{t[0][r]=s.get(),t[1][r]=s.getVelocity()}),t}function Pk(e,t,s,r){if(typeof t=="function"){const[i,a]=NI(r);t=t(s!==void 0?s:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=NI(r);t=t(s!==void 0?s:e.custom,i,a)}return t}function bv(e){return Tr(e)?e.get():e}function Jve({scrapeMotionValuesFromProps:e,createRenderState:t},s,r,i){return{latestValues:ebe(s,r,i,e),renderState:t()}}function ebe(e,t,s,r){const i={},a=r(e,{});for(const x in a)i[x]=bv(a[x]);let{initial:o,animate:l}=e;const u=Vy(e),d=e8(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let m=s?s.initial===!1:!1;m=m||o===!1;const f=m?l:o;if(f&&typeof f!="boolean"&&!Gy(f)){const x=Array.isArray(f)?f:[f];for(let v=0;v<x.length;v++){const y=Pk(e,x[v]);if(y){const{transitionEnd:w,transition:S,...C}=y;for(const _ in C){let j=C[_];if(Array.isArray(j)){const T=m?j.length-1:0;j=j[T]}j!==null&&(i[_]=j)}for(const _ in w)i[_]=w[_]}}}return i}const a8=e=>(t,s)=>{const r=p.useContext(Uy),i=p.useContext(Hy),a=()=>Jve(e,t,r,i);return s?a():nk(a)};function Rk(e,t,s){const{style:r}=e,i={};for(const a in r)(Tr(r[a])||t.style&&Tr(t.style[a])||t8(a,e)||s?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const tbe=a8({scrapeMotionValuesFromProps:Rk,createRenderState:Ek});function o8(e,t,s){const r=Rk(e,t,s);for(const i in e)if(Tr(e[i])||Tr(t[i])){const a=Uh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=e[i]}return r}const sbe=a8({scrapeMotionValuesFromProps:o8,createRenderState:r8}),nbe=Symbol.for("motionComponentSymbol");function Iu(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function rbe(e,t,s){return p.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),s&&(typeof s=="function"?s(r):Iu(s)&&(s.current=r))},[t])}const Dk=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ibe="framerAppearId",l8="data-"+Dk(ibe),c8=p.createContext({});function abe(e,t,s,r,i){const{visualElement:a}=p.useContext(Uy),o=p.useContext(Q$),l=p.useContext(Hy),u=p.useContext(Nk).reducedMotion,d=p.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:a,props:s,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const m=d.current,f=p.useContext(c8);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&obe(d.current,s,i,f);const x=p.useRef(!1);p.useInsertionEffect(()=>{m&&x.current&&m.update(s,l)});const v=s[l8],y=p.useRef(!!v&&!window.MotionHandoffIsComplete?.(v)&&window.MotionHasOptimisedAnimation?.(v));return i$(()=>{m&&(x.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),y.current&&m.animationState&&m.animationState.animateChanges())}),p.useEffect(()=>{m&&(!y.current&&m.animationState&&m.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(v)}),y.current=!1),m.enteringChildren=void 0)}),m}function obe(e,t,s,r){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:m}=t;e.projection=new s(e.latestValues,t["data-framer-portal-id"]?void 0:d8(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&Iu(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:u,layoutRoot:d})}function d8(e){if(e)return e.options.allowProjection!==!1?e.projection:d8(e.parent)}function xS(e,{forwardMotionProps:t=!1}={},s,r){s&&Ive(s);const i=Tk(e)?sbe:tbe;function a(l,u){let d;const m={...p.useContext(Nk),...l,layoutId:lbe(l)},{isStatic:f}=m,x=Bve(l),v=i(l,f);if(!f&&rk){cbe();const y=dbe(m);d=y.MeasureLayout,x.visualElement=abe(e,v,m,r,y.ProjectionNode)}return n.jsxs(Uy.Provider,{value:x,children:[d&&x.visualElement?n.jsx(d,{visualElement:x.visualElement,...m}):null,Qve(e,l,rbe(v,x.visualElement,u),v,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=p.forwardRef(a);return o[nbe]=e,o}function lbe({layoutId:e}){const t=p.useContext(sk).id;return t&&e!==void 0?t+"-"+e:e}function cbe(e,t){p.useContext(Q$).strict}function dbe(e){const{drag:t,layout:s}=hh;if(!t&&!s)return{};const r={...t,...s};return{MeasureLayout:t?.isEnabled(e)||s?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function ube(e,t){if(typeof Proxy>"u")return xS;const s=new Map,r=(a,o)=>xS(a,o,e,t),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(s.has(o)||s.set(o,xS(o,void 0,e,t)),s.get(o))})}function u8({top:e,left:t,right:s,bottom:r}){return{x:{min:t,max:s},y:{min:e,max:r}}}function hbe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mbe(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}function vS(e){return e===void 0||e===1}function wN({scale:e,scaleX:t,scaleY:s}){return!vS(e)||!vS(t)||!vS(s)}function Gc(e){return wN(e)||h8(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function h8(e){return CI(e.x)||CI(e.y)}function CI(e){return e&&e!=="0%"}function xb(e,t,s){const r=e-s,i=t*r;return s+i}function kI(e,t,s,r,i){return i!==void 0&&(e=xb(e,i,r)),xb(e,s,r)+t}function jN(e,t=0,s=1,r,i){e.min=kI(e.min,t,s,r,i),e.max=kI(e.max,t,s,r,i)}function m8(e,{x:t,y:s}){jN(e.x,t.translate,t.scale,t.originPoint),jN(e.y,s.translate,s.scale,s.originPoint)}const AI=.999999999999,EI=1.0000000000001;function fbe(e,t,s,r=!1){const i=s.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=s[l],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Lu(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,m8(e,o)),r&&Gc(a.latestValues)&&Lu(e,a.latestValues))}t.x<EI&&t.x>AI&&(t.x=1),t.y<EI&&t.y>AI&&(t.y=1)}function Mu(e,t){e.min=e.min+t,e.max=e.max+t}function TI(e,t,s,r,i=.5){const a=rn(e.min,e.max,i);jN(e,t,s,a,r)}function Lu(e,t){TI(e.x,t.x,t.scaleX,t.scale,t.originX),TI(e.y,t.y,t.scaleY,t.scale,t.originY)}function f8(e,t){return u8(mbe(e.getBoundingClientRect(),t))}function pbe(e,t,s){const r=f8(e,s),{scroll:i}=t;return i&&(Mu(r.x,i.offset.x),Mu(r.y,i.offset.y)),r}const PI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ou=()=>({x:PI(),y:PI()}),RI=()=>({min:0,max:0}),Fn=()=>({x:RI(),y:RI()}),SN={current:null},p8={current:!1};function gbe(){if(p8.current=!0,!!rk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>SN.current=e.matches;e.addEventListener("change",t),t()}else SN.current=!1}const xbe=new WeakMap;function vbe(e,t,s){for(const r in t){const i=t[r],a=s[r];if(Tr(i))e.addValue(r,i);else if(Tr(a))e.addValue(r,uh(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,uh(o!==void 0?o:i,{owner:e}))}}for(const r in s)t[r]===void 0&&e.removeValue(r);return t}const DI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bbe{scrapeMotionValuesFromProps(t,s,r){return{}}constructor({parent:t,props:s,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=mi.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Qs.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=s.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Vy(s),this.isVariantNode=e8(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...f}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in f){const v=f[x];u[x]!==void 0&&Tr(v)&&v.set(u[x])}}mount(t){this.current=t,xbe.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),p8.current||gbe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:SN.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),dc(this.notifyUpdate),dc(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,s){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Gh.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Qs.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,s)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),s.owner&&s.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in hh){const s=hh[t];if(!s)continue;const{isEnabled:r,Feature:i}=s;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<DI.length;r++){const i=DI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=vbe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){const r=this.values.get(t);s!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,s),this.values.set(t,s),this.latestValues[t]=s.get())}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&s!==void 0&&(r=uh(s===null?void 0:s,{owner:this}),this.addValue(t,r)),r}readValue(t,s){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(a$(r)||l$(r))?r=parseFloat(r):!kve(r)&&uc.test(s)&&(r=G$(t,s)),this.setBaseTarget(t,Tr(r)?r.get():r)),Tr(r)?r.get():r}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const a=Pk(this.props,s,this.presenceContext?.custom);a&&(r=a[t])}if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Tr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new ck),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}scheduleRenderMicrotask(){Sk.render(this.render)}}class g8 extends bbe{constructor(){super(...arguments),this.KeyframeResolver=pve}sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:r}){delete s[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Tr(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function x8(e,{style:t,vars:s},r,i){const a=e.style;let o;for(o in t)a[o]=t[o];i?.applyProjectionStyles(a,r);for(o in s)a.setProperty(o,s[o])}function ybe(e){return window.getComputedStyle(e)}class wbe extends g8{constructor(){super(...arguments),this.type="html",this.renderInstance=x8}readValueFromInstance(t,s){if(Gh.has(s))return this.projection?.isProjecting?mN(s):Ixe(t,s);{const r=ybe(t),i=(j$(s)?r.getPropertyValue(s):r[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:s}){return f8(t,s)}build(t,s,r){Ak(t,s,r.transformTemplate)}scrapeMotionValuesFromProps(t,s,r){return Rk(t,s,r)}}const v8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jbe(e,t,s,r){x8(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(v8.has(i)?i:Dk(i),t.attrs[i])}class Sbe extends g8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Fn}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(Gh.has(s)){const r=U$(s);return r&&r.default||0}return s=v8.has(s)?s:Dk(s),t.getAttribute(s)}scrapeMotionValuesFromProps(t,s,r){return o8(t,s,r)}build(t,s,r){n8(t,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,s,r,i){jbe(t,s,r,i)}mount(t){this.isSVGTag=i8(t.tagName),super.mount(t)}}const _be=(e,t)=>Tk(e)?new Sbe(t):new wbe(t,{allowProjection:e!==p.Fragment});function Ku(e,t,s){const r=e.getProps();return Pk(r,t,s!==void 0?s:r.custom,e)}const _N=e=>Array.isArray(e);function Nbe(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,uh(s))}function Cbe(e){return _N(e)?e[e.length-1]||0:e}function kbe(e,t){const s=Ku(e,t);let{transitionEnd:r={},transition:i={},...a}=s||{};a={...a,...r};for(const o in a){const l=Cbe(a[o]);Nbe(e,o,l)}}function Abe(e){return!!(Tr(e)&&e.add)}function NN(e,t){const s=e.getValue("willChange");if(Abe(s))return s.add(t);if(!s&&ml.WillChange){const r=new ml.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function b8(e){return e.props[l8]}const Ebe=e=>e!==null;function Tbe(e,{repeat:t,repeatType:s="loop"},r){const i=e.filter(Ebe),a=t&&s!=="loop"&&t%2===1?0:i.length-1;return i[a]}const Pbe={type:"spring",stiffness:500,damping:25,restSpeed:10},Rbe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Dbe={type:"keyframes",duration:.8},Ibe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mbe=(e,{keyframes:t})=>t.length>2?Dbe:Gh.has(e)?e.startsWith("scale")?Rbe(t[1]):Pbe:Ibe;function Lbe({when:e,delay:t,delayChildren:s,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:u,elapsed:d,...m}){return!!Object.keys(m).length}const Ik=(e,t,s,r={},i,a)=>o=>{const l=wk(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-oo(u);const m={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:x=>{t.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};Lbe(l)||Object.assign(m,Mbe(e,m)),m.duration&&(m.duration=oo(m.duration)),m.repeatDelay&&(m.repeatDelay=oo(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let f=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(vN(m),m.delay===0&&(f=!0)),(ml.instantAnimations||ml.skipAnimations)&&(f=!0,vN(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,f&&!a&&t.get()!==void 0){const x=Tbe(m.keyframes,l);if(x!==void 0){Qs.update(()=>{m.onUpdate(x),m.onComplete()});return}}return l.isSync?new bk(m):new nve(m)};function Obe({protectedKeys:e,needsAnimating:t},s){const r=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,r}function y8(e,t,{delay:s=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const m in l){const f=e.getValue(m,e.latestValues[m]??null),x=l[m];if(x===void 0||d&&Obe(d,m))continue;const v={delay:s,...wk(a||{},m)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(x)&&x===y&&!v.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=b8(e);if(C){const _=window.MotionHandoffAnimation(C,m,Qs);_!==null&&(v.startTime=_,w=!0)}}NN(e,m),f.start(Ik(m,f,x,e.shouldReduceMotion&&z$.has(m)?{type:!1}:v,e,w));const S=f.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{Qs.update(()=>{o&&kbe(e,o)})}),u}function w8(e,t,s,r=0,i=1){const a=Array.from(e).sort((d,m)=>d.sortNodePosition(m)).indexOf(t),o=e.size,l=(o-1)*r;return typeof s=="function"?s(a,o):i===1?a*r:l-a*r}function CN(e,t,s={}){const r=Ku(e,t,s.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(i=s.transitionOverride);const a=r?()=>Promise.all(y8(e,r,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:f}=i;return Fbe(e,t,u,d,m,f,s)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(s.delay)])}function Fbe(e,t,s=0,r=0,i=0,a=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(CN(u,t,{...o,delay:s+(typeof r=="function"?0:r)+w8(e.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function Bbe(e,t,s={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>CN(e,a,s));r=Promise.all(i)}else if(typeof t=="string")r=CN(e,t,s);else{const i=typeof t=="function"?Ku(e,t,s.custom):t;r=Promise.all(y8(e,i,s))}return r.then(()=>{e.notify("AnimationComplete",t)})}function j8(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(t[r]!==e[r])return!1;return!0}const zbe=kk.length;function S8(e){if(!e)return;if(!e.isControllingVariants){const s=e.parent?S8(e.parent)||{}:{};return e.props.initial!==void 0&&(s.initial=e.props.initial),s}const t={};for(let s=0;s<zbe;s++){const r=kk[s],i=e.props[r];(np(i)||i===!1)&&(t[r]=i)}return t}const $be=[...Ck].reverse(),Hbe=Ck.length;function Ube(e){return t=>Promise.all(t.map(({animation:s,options:r})=>Bbe(e,s,r)))}function Gbe(e){let t=Ube(e),s=II(),r=!0;const i=u=>(d,m)=>{const f=Ku(e,m,u==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:x,transitionEnd:v,...y}=f;d={...d,...y,...v}}return d};function a(u){t=u(e)}function o(u){const{props:d}=e,m=S8(e.parent)||{},f=[],x=new Set;let v={},y=1/0;for(let S=0;S<Hbe;S++){const C=$be[S],_=s[C],j=d[C]!==void 0?d[C]:m[C],T=np(j),E=C===u?_.isActive:null;E===!1&&(y=S);let A=j===m[C]&&j!==d[C]&&T;if(A&&r&&e.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...v},!_.isActive&&E===null||!j&&!_.prevProp||Gy(j)||typeof j=="boolean")continue;const R=Vbe(_.prevProp,j);let D=R||C===u&&_.isActive&&!A&&T||S>y&&T,M=!1;const P=Array.isArray(j)?j:[j];let O=P.reduce(i(C),{});E===!1&&(O={});const{prevResolvedValues:F={}}=_,$={...F,...O},z=V=>{D=!0,x.has(V)&&(M=!0,x.delete(V)),_.needsAnimating[V]=!0;const B=e.getValue(V);B&&(B.liveStyle=!1)};for(const V in $){const B=O[V],K=F[V];if(v.hasOwnProperty(V))continue;let L=!1;_N(B)&&_N(K)?L=!j8(B,K):L=B!==K,L?B!=null?z(V):x.add(V):B!==void 0&&x.has(V)?z(V):_.protectedKeys[V]=!0}_.prevProp=j,_.prevResolvedValues=O,_.isActive&&(v={...v,...O}),r&&e.blockInitialAnimation&&(D=!1);const H=A&&R;D&&(!H||M)&&f.push(...P.map(V=>{const B={type:C};if(typeof V=="string"&&r&&!H&&e.manuallyAnimateOnMount&&e.parent){const{parent:K}=e,L=Ku(K,V);if(K.enteringChildren&&L){const{delayChildren:G}=L.transition||{};B.delay=w8(K.enteringChildren,e,G)}}return{animation:V,options:B}}))}if(x.size){const S={};if(typeof d.initial!="boolean"){const C=Ku(e,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(S.transition=C.transition)}x.forEach(C=>{const _=e.getBaseTarget(C),j=e.getValue(C);j&&(j.liveStyle=!0),S[C]=_??null}),f.push({animation:S})}let w=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(f):Promise.resolve()}function l(u,d){if(s[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(u,d)),s[u].isActive=d;const m=o(u);for(const f in s)s[f].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s,reset:()=>{s=II()}}}function Vbe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!j8(t,e):!1}function Bc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function II(){return{animate:Bc(!0),whileInView:Bc(),whileHover:Bc(),whileTap:Bc(),whileDrag:Bc(),whileFocus:Bc(),exit:Bc()}}class vc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class qbe extends vc{constructor(t){super(t),t.animationState||(t.animationState=Gbe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Gy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Wbe=0;class Kbe extends vc{constructor(){super(...arguments),this.id=Wbe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);s&&!t&&i.then(()=>{s(this.id)})}mount(){const{register:t,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Ybe={animation:{Feature:qbe},exit:{Feature:Kbe}};function rp(e,t,s,r={passive:!0}){return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s)}function Vp(e){return{point:{x:e.pageX,y:e.pageY}}}const Xbe=e=>t=>_k(t)&&e(t,Vp(t));function Tf(e,t,s,r){return rp(e,t,Xbe(s),r)}const _8=1e-4,Zbe=1-_8,Qbe=1+_8,N8=.01,Jbe=0-N8,eye=0+N8;function Wr(e){return e.max-e.min}function tye(e,t,s){return Math.abs(e-t)<=s}function MI(e,t,s,r=.5){e.origin=r,e.originPoint=rn(t.min,t.max,e.origin),e.scale=Wr(s)/Wr(t),e.translate=rn(s.min,s.max,e.origin)-e.originPoint,(e.scale>=Zbe&&e.scale<=Qbe||isNaN(e.scale))&&(e.scale=1),(e.translate>=Jbe&&e.translate<=eye||isNaN(e.translate))&&(e.translate=0)}function Pf(e,t,s,r){MI(e.x,t.x,s.x,r?r.originX:void 0),MI(e.y,t.y,s.y,r?r.originY:void 0)}function LI(e,t,s){e.min=s.min+t.min,e.max=e.min+Wr(t)}function sye(e,t,s){LI(e.x,t.x,s.x),LI(e.y,t.y,s.y)}function OI(e,t,s){e.min=t.min-s.min,e.max=e.min+Wr(t)}function vb(e,t,s){OI(e.x,t.x,s.x),OI(e.y,t.y,s.y)}function na(e){return[e("x"),e("y")]}const C8=({current:e})=>e?e.ownerDocument.defaultView:null,FI=(e,t)=>Math.abs(e-t);function nye(e,t){const s=FI(e.x,t.x),r=FI(e.y,t.y);return Math.sqrt(s**2+r**2)}class k8{constructor(t,s,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=yS(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,y=nye(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!y)return;const{point:w}=x,{timestamp:S}=br;this.history.push({...w,timestamp:S});const{onStart:C,onMove:_}=this.handlers;v||(C&&C(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,x)},this.handlePointerMove=(x,v)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=bS(v,this.transformPagePoint),Qs.update(this.updatePoint,!0)},this.handlePointerUp=(x,v)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=yS(x.type==="pointercancel"?this.lastMoveEventInfo:bS(v,this.transformPagePoint),this.history);this.startEvent&&y&&y(x,C),w&&w(x,C)},!_k(t))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Vp(t),u=bS(l,this.transformPagePoint),{point:d}=u,{timestamp:m}=br;this.history=[{...d,timestamp:m}];const{onSessionStart:f}=s;f&&f(t,yS(u,this.history)),this.removeListeners=Hp(Tf(this.contextWindow,"pointermove",this.handlePointerMove),Tf(this.contextWindow,"pointerup",this.handlePointerUp),Tf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dc(this.updatePoint)}}function bS(e,t){return t?{point:t(e.point)}:e}function BI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function yS({point:e},t){return{point:e,delta:BI(e,A8(t)),offset:BI(e,rye(t)),velocity:iye(t,.1)}}function rye(e){return e[0]}function A8(e){return e[e.length-1]}function iye(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,r=null;const i=A8(e);for(;s>=0&&(r=e[s],!(i.timestamp-r.timestamp>oo(t)));)s--;if(!r)return{x:0,y:0};const a=da(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function aye(e,{min:t,max:s},r){return t!==void 0&&e<t?e=r?rn(t,e,r.min):Math.max(e,t):s!==void 0&&e>s&&(e=r?rn(s,e,r.max):Math.min(e,s)),e}function zI(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function oye(e,{top:t,left:s,bottom:r,right:i}){return{x:zI(e.x,s,i),y:zI(e.y,t,r)}}function $I(e,t){let s=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,r]=[r,s]),{min:s,max:r}}function lye(e,t){return{x:$I(e.x,t.x),y:$I(e.y,t.y)}}function cye(e,t){let s=.5;const r=Wr(e),i=Wr(t);return i>r?s=Jf(t.min,t.max-r,e.min):r>i&&(s=Jf(e.min,e.max-i,t.min)),hl(0,1,s)}function dye(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const kN=.35;function uye(e=kN){return e===!1?e=0:e===!0&&(e=kN),{x:HI(e,"left","right"),y:HI(e,"top","bottom")}}function HI(e,t,s){return{min:UI(e,t),max:UI(e,s)}}function UI(e,t){return typeof e=="number"?e:e[t]||0}const hye=new WeakMap;class mye{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:s=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Vp(f).point)},o=(f,x)=>{const{drag:v,dragPropagation:y,onDragStart:w}=this.getProps();if(v&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bve(v),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),na(C=>{let _=this.getAxisMotionValue(C).get()||0;if(lo.test(_)){const{projection:j}=this.visualElement;if(j&&j.layout){const T=j.layout.layoutBox[C];T&&(_=Wr(T)*(parseFloat(_)/100))}}this.originPoint[C]=_}),w&&Qs.postRender(()=>w(f,x)),NN(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(f,x)=>{this.latestPointerEvent=f,this.latestPanInfo=x;const{dragPropagation:v,dragDirectionLock:y,onDirectionLock:w,onDrag:S}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:C}=x;if(y&&this.currentDirection===null){this.currentDirection=fye(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",x.point,C),this.updateAxis("y",x.point,C),this.visualElement.render(),S&&S(f,x)},u=(f,x)=>{this.latestPointerEvent=f,this.latestPanInfo=x,this.stop(f,x),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>na(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new k8(t,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:C8(this.visualElement)})}stop(t,s){const r=t||this.latestPointerEvent,i=s||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Qs.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,r){const{drag:i}=this.getProps();if(!r||!Ox(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=aye(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Iu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=oye(r.layoutBox,t):this.constraints=!1,this.elastic=uye(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&na(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=dye(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Iu(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=pbe(r,i.root,this.visualElement.getTransformPagePoint());let o=lye(i.layout.layoutBox,a);if(s){const l=s(hbe(o));this.hasMutatedConstraints=!!l,l&&(o=u8(l))}return o}startAnimation(t){const{drag:s,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=na(m=>{if(!Ox(m,s,this.currentDirection))return;let f=u&&u[m]||{};o&&(f={min:0,max:0});const x=i?200:1e6,v=i?40:1e7,y={type:"inertia",velocity:r?t[m]:0,bounceStiffness:x,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(m,y)});return Promise.all(d).then(l)}startAxisValueAnimation(t,s){const r=this.getAxisMotionValue(t);return NN(this.visualElement,t),r.start(Ik(t,r,0,s,this.visualElement,!1))}stopAnimation(){na(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){na(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const s=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[s];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){na(s=>{const{drag:r}=this.getProps();if(!Ox(s,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[s];a.set(t[s]-rn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Iu(s)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};na(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=cye({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),na(o=>{if(!Ox(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(rn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;hye.set(this.visualElement,this);const t=this.visualElement.current,s=Tf(t,"pointerdown",u=>{const{drag:d,dragListener:m=!0}=this.getProps();d&&m&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Iu(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Qs.read(r);const o=rp(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(na(m=>{const f=this.getAxisMotionValue(m);f&&(this.originPoint[m]+=u[m].translate,f.set(f.get()+u[m].translate))}),this.visualElement.render())}));return()=>{o(),s(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=kN,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Ox(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function fye(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class pye extends vc{constructor(t){super(t),this.removeGroupControls=fa,this.removeListeners=fa,this.controls=new mye(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fa}unmount(){this.removeGroupControls(),this.removeListeners()}}const GI=e=>(t,s)=>{e&&Qs.postRender(()=>e(t,s))};class gye extends vc{constructor(){super(...arguments),this.removePointerDownListener=fa}onPointerDown(t){this.session=new k8(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:C8(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:GI(t),onStart:GI(s),onMove:r,onEnd:(a,o)=>{delete this.session,i&&Qs.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Tf(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let wS=!1;class xye extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;a&&(s.group&&s.group.add(a),r&&r.register&&i&&r.register(a),wS&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),yv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,wS=!0,i||t.layoutDependency!==s||s===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Qs.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Sk.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:i}=t;wS=!0,i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function E8(e){const[t,s]=Z$(),r=p.useContext(sk);return n.jsx(xye,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(c8),isPresent:t,safeToRemove:s})}function vye(e,t,s){const r=Tr(e)?e:uh(e);return r.start(Ik("",r,t,s)),r.animation}const bye=(e,t)=>e.depth-t.depth;class yye{constructor(){this.children=[],this.isDirty=!1}add(t){ik(this.children,t),this.isDirty=!0}remove(t){ak(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bye),this.isDirty=!1,this.children.forEach(t)}}function wye(e,t){const s=mi.now(),r=({timestamp:i})=>{const a=i-s;a>=t&&(dc(r),e(a-t))};return Qs.setup(r,!0),()=>dc(r)}const T8=["TopLeft","TopRight","BottomLeft","BottomRight"],jye=T8.length,VI=e=>typeof e=="string"?parseFloat(e):e,qI=e=>typeof e=="number"||At.test(e);function Sye(e,t,s,r,i,a){i?(e.opacity=rn(0,s.opacity??1,_ye(r)),e.opacityExit=rn(t.opacity??1,0,Nye(r))):a&&(e.opacity=rn(t.opacity??1,s.opacity??1,r));for(let o=0;o<jye;o++){const l=`border${T8[o]}Radius`;let u=WI(t,l),d=WI(s,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||qI(u)===qI(d)?(e[l]=Math.max(rn(VI(u),VI(d),r),0),(lo.test(d)||lo.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||s.rotate)&&(e.rotate=rn(t.rotate||0,s.rotate||0,r))}function WI(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _ye=P8(0,.5,g$),Nye=P8(.5,.95,fa);function P8(e,t,s){return r=>r<e?0:r>t?1:s(Jf(e,t,r))}function KI(e,t){e.min=t.min,e.max=t.max}function Sa(e,t){KI(e.x,t.x),KI(e.y,t.y)}function YI(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function XI(e,t,s,r,i){return e-=t,e=xb(e,1/s,r),i!==void 0&&(e=xb(e,1/i,r)),e}function Cye(e,t=0,s=1,r=.5,i,a=e,o=e){if(lo.test(t)&&(t=parseFloat(t),t=rn(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=rn(a.min,a.max,r);e===a&&(l-=t),e.min=XI(e.min,t,s,l,i),e.max=XI(e.max,t,s,l,i)}function ZI(e,t,[s,r,i],a,o){Cye(e,t[s],t[r],t[i],t.scale,a,o)}const kye=["x","scaleX","originX"],Aye=["y","scaleY","originY"];function QI(e,t,s,r){ZI(e.x,t,kye,s?s.x:void 0,r?r.x:void 0),ZI(e.y,t,Aye,s?s.y:void 0,r?r.y:void 0)}function JI(e){return e.translate===0&&e.scale===1}function R8(e){return JI(e.x)&&JI(e.y)}function eM(e,t){return e.min===t.min&&e.max===t.max}function Eye(e,t){return eM(e.x,t.x)&&eM(e.y,t.y)}function tM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function D8(e,t){return tM(e.x,t.x)&&tM(e.y,t.y)}function sM(e){return Wr(e.x)/Wr(e.y)}function nM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Tye{constructor(){this.members=[]}add(t){ik(this.members,t),t.scheduleRender()}remove(t){if(ak(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(i=>t===i);if(s===0)return!1;let r;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,s){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,s&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:r}=t;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pye(e,t,s){let r="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=s?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),s){const{transformPerspective:d,rotate:m,rotateX:f,rotateY:x,skewX:v,skewY:y}=s;d&&(r=`perspective(${d}px) ${r}`),m&&(r+=`rotate(${m}deg) `),f&&(r+=`rotateX(${f}deg) `),x&&(r+=`rotateY(${x}deg) `),v&&(r+=`skewX(${v}deg) `),y&&(r+=`skewY(${y}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const jS=["","X","Y","Z"],Rye=1e3;let Dye=0;function SS(e,t,s,r){const{latestValues:i}=t;i[e]&&(s[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function I8(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const s=b8(t);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(s,"transform",Qs,!(i||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&I8(r)}function M8({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=Dye++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Lye),this.nodes.forEach(zye),this.nodes.forEach($ye),this.nodes.forEach(Oye)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new yye)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ck),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=X$(o)&&!Nve(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let m,f=0;const x=()=>this.root.updateBlockedByResize=!1;Qs.read(()=>{f=window.innerWidth}),e(o,()=>{const v=window.innerWidth;v!==f&&(f=v,this.root.updateBlockedByResize=!0,m&&m(),m=wye(x,250),yv.hasAnimatedSinceResize&&(yv.hasAnimatedSinceResize=!1,this.nodes.forEach(aM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:f,hasRelativeLayoutChanged:x,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||qye,{onLayoutAnimationStart:w,onLayoutAnimationComplete:S}=d.getProps(),C=!this.targetLayout||!D8(this.targetLayout,v),_=!f&&x;if(this.options.layoutRoot||this.resumeFrom||_||f&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...wk(y,"layout"),onPlay:w,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(m,_)}else f||aM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),dc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hye),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&I8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const f=this.path[m];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(iM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Bye),this.nodes.forEach(Iye),this.nodes.forEach(Mye)):this.nodes.forEach(iM),this.clearAllSnapshots();const l=mi.now();br.delta=hl(0,1e3/60,l-br.timestamp),br.timestamp=l,br.isProcessing=!0,uS.update.process(br),uS.preRender.process(br),uS.render.process(br),br.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Fye),this.sharedNodes.forEach(Uye)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wr(this.snapshot.measuredBox.x)&&!Wr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!R8(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,m=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Gc(this.latestValues)||m)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),Wye(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Fn();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Kye))){const{scroll:d}=this.root;d&&(Mu(l.x,d.offset.x),Mu(l.y,d.offset.y))}return l}removeElementScroll(o){const l=Fn();if(Sa(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:f}=d;d!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&Sa(l,o),Mu(l.x,m.offset.x),Mu(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const u=Fn();Sa(u,o);for(let d=0;d<this.path.length;d++){const m=this.path[d];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Lu(u,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Gc(m.latestValues)&&Lu(u,m.latestValues)}return Gc(this.latestValues)&&Lu(u,this.latestValues),u}removeTransform(o){const l=Fn();Sa(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Gc(d.latestValues))continue;wN(d.latestValues)&&d.updateSnapshot();const m=Fn(),f=d.measurePageBox();Sa(m,f),QI(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,m)}return Gc(this.latestValues)&&QI(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==br.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:f}=this.options;if(!this.layout||!(m||f))return;this.resolvedRelativeTargetAt=br.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Fn(),this.targetWithTransforms=Fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Sa(this.target,this.layout.layoutBox),m8(this.target,this.targetDelta)):Sa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||wN(this.parent.latestValues)||h8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fn(),this.relativeTargetOrigin=Fn(),vb(this.relativeTargetOrigin,l,u),Sa(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===br.timestamp&&(u=!1),u)return;const{layout:d,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||m))return;Sa(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,x=this.treeScale.y;fbe(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Fn());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YI(this.prevProjectionDelta.x,this.projectionDelta.x),YI(this.prevProjectionDelta.y,this.projectionDelta.y)),Pf(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==x||!nM(this.projectionDelta.x,this.prevProjectionDelta.x)||!nM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ou(),this.projectionDelta=Ou(),this.projectionDeltaWithTransform=Ou()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},m={...this.latestValues},f=Ou();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=Fn(),v=u?u.source:void 0,y=this.layout?this.layout.source:void 0,w=v!==y,S=this.getStack(),C=!S||S.members.length<=1,_=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(Vye));this.animationProgress=0;let j;this.mixTargetDelta=T=>{const E=T/1e3;oM(f.x,o.x,E),oM(f.y,o.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vb(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gye(this.relativeTarget,this.relativeTargetOrigin,x,E),j&&Eye(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Fn()),Sa(j,this.relativeTarget)),w&&(this.animationValues=m,Sye(m,d,this.latestValues,E,_,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(dc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qs.update(()=>{yv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=uh(0)),this.currentAnimation=vye(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rye),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:m}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&L8(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Fn();const f=Wr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const x=Wr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}Sa(l,u),Lu(l,m),Pf(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Tye),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&SS("z",o,d,this.animationValues);for(let m=0;m<jS.length;m++)SS(`rotate${jS[m]}`,o,d,this.animationValues),SS(`skew${jS[m]}`,o,d,this.animationValues);o.render();for(const m in d)o.setStaticValue(m,d[m]),this.animationValues&&(this.animationValues[m]=d[m]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=bv(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=bv(l?.pointerEvents)||""),this.hasProjected&&!Gc(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=Pye(this.projectionDeltaWithTransform,this.treeScale,m);u&&(f=u(m,f)),o.transform=f;const{x,y:v}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${v.origin*100}% 0`,d.animationValues?o.opacity=d===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const y in yN){if(m[y]===void 0)continue;const{correct:w,applyTo:S,isCSSVariable:C}=yN[y],_=f==="none"?m[y]:w(m[y],d);if(S){const j=S.length;for(let T=0;T<j;T++)o[S[T]]=_}else C?this.options.visualElement.renderState.vars[y]=_:o[y]=_}this.options.layoutId&&(o.pointerEvents=d===this?bv(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(rM),this.root.sharedNodes.clear()}}}function Iye(e){e.updateLayout()}function Mye(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?na(m=>{const f=a?t.measuredBox[m]:t.layoutBox[m],x=Wr(f);f.min=s[m].min,f.max=f.min+x}):L8(i,t.layoutBox,s)&&na(m=>{const f=a?t.measuredBox[m]:t.layoutBox[m],x=Wr(s[m]);f.max=f.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+x)});const o=Ou();Pf(o,s,t.layoutBox);const l=Ou();a?Pf(l,e.applyTransform(r,!0),t.measuredBox):Pf(l,s,t.layoutBox);const u=!R8(o);let d=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:x}=m;if(f&&x){const v=Fn();vb(v,t.layoutBox,f.layoutBox);const y=Fn();vb(y,s,x.layoutBox),D8(v,y)||(d=!0),m.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=v,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function Lye(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Oye(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Fye(e){e.clearSnapshot()}function rM(e){e.clearMeasurements()}function iM(e){e.isLayoutDirty=!1}function Bye(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function aM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function zye(e){e.resolveTargetDelta()}function $ye(e){e.calcProjection()}function Hye(e){e.resetSkewAndRotation()}function Uye(e){e.removeLeadSnapshot()}function oM(e,t,s){e.translate=rn(t.translate,0,s),e.scale=rn(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function lM(e,t,s,r){e.min=rn(t.min,s.min,r),e.max=rn(t.max,s.max,r)}function Gye(e,t,s,r){lM(e.x,t.x,s.x,r),lM(e.y,t.y,s.y,r)}function Vye(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qye={duration:.45,ease:[.4,0,.1,1]},cM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),dM=cM("applewebkit/")&&!cM("chrome/")?Math.round:fa;function uM(e){e.min=dM(e.min),e.max=dM(e.max)}function Wye(e){uM(e.x),uM(e.y)}function L8(e,t,s){return e==="position"||e==="preserve-aspect"&&!tye(sM(t),sM(s),.2)}function Kye(e){return e!==e.root&&e.scroll?.wasRoot}const Yye=M8({attachResizeListener:(e,t)=>rp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_S={current:void 0},O8=M8({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!_S.current){const e=new Yye({});e.mount(window),e.setOptions({layoutScroll:!0}),_S.current=e}return _S.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Xye={pan:{Feature:gye},drag:{Feature:pye,ProjectionNode:O8,MeasureLayout:E8}};function hM(e,t,s){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=r[i];a&&Qs.postRender(()=>a(t,Vp(t)))}class Zye extends vc{mount(){const{current:t}=this.node;t&&(this.unmount=yve(t,(s,r)=>(hM(this.node,r,"Start"),i=>hM(this.node,i,"End"))))}unmount(){}}class Qye extends vc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hp(rp(this.node.current,"focus",()=>this.onFocus()),rp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mM(e,t,s){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=r[i];a&&Qs.postRender(()=>a(t,Vp(t)))}class Jye extends vc{mount(){const{current:t}=this.node;t&&(this.unmount=_ve(t,(s,r)=>(mM(this.node,r,"Start"),(i,{success:a})=>mM(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const AN=new WeakMap,NS=new WeakMap,ewe=e=>{const t=AN.get(e.target);t&&t(e)},twe=e=>{e.forEach(ewe)};function swe({root:e,...t}){const s=e||document;NS.has(s)||NS.set(s,{});const r=NS.get(s),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(twe,{root:e,...t})),r[i]}function nwe(e,t,s){const r=swe(t);return AN.set(e,s),r.observe(e),()=>{AN.delete(e),r.unobserve(e)}}const rwe={some:0,all:1};class iwe extends vc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:r,amount:i="some",once:a}=t,o={root:s?s.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:rwe[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:m,onViewportLeave:f}=this.node.getProps(),x=d?m:f;x&&x(u)};return nwe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(awe(t,s))&&this.startObserver()}unmount(){}}function awe({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const owe={inView:{Feature:iwe},tap:{Feature:Jye},focus:{Feature:Qye},hover:{Feature:Zye}},lwe={layout:{ProjectionNode:O8,MeasureLayout:E8}},cwe={...Ybe,...owe,...Xye,...lwe},zn=ube(cwe,_be),fM={idle:{color:"bg-muted-foreground",bgColor:"bg-muted"},planning:{color:"bg-amber-500",bgColor:"bg-amber-500/20"},coding:{color:"bg-info",bgColor:"bg-info/20"},qa_review:{color:"bg-purple-500",bgColor:"bg-purple-500/20"},qa_fixing:{color:"bg-orange-500",bgColor:"bg-orange-500/20"},complete:{color:"bg-success",bgColor:"bg-success/20"},failed:{color:"bg-destructive",bgColor:"bg-destructive/20"}},pM={idle:"execution.phases.idle",planning:"execution.phases.planning",coding:"execution.phases.coding",qa_review:"execution.phases.reviewing",qa_fixing:"execution.phases.fixing",complete:"execution.phases.complete",failed:"execution.phases.failed"},dwe=p.memo(function({phase:t,subtasks:s,phaseLogs:r,phaseProgress:i,isStuck:a=!1,isRunning:o=!1,className:l}){const{t:u}=Re("tasks"),d=t||"idle",m=p.useRef(null),[f,x]=p.useState(!0),v=p.useRef(!0);p.useEffect(()=>{const O=m.current;if(!O)return;const F=new IntersectionObserver(([$])=>{const z=$.isIntersecting;v.current!==z&&window.DEBUG&&console.log(`[PhaseProgress] Visibility changed: ${v.current} -> ${z}, animations ${z?"resumed":"paused"}`),v.current=z,x(z)},{threshold:.1});return F.observe(O),()=>F.disconnect()},[]);const y=f&&o&&!a,w=s.filter(O=>O.status==="completed").length,S=s.length,C=S>0?Math.round(w/S*100):0,_=r?.phases?.planning?.entries?.length||0,j=r?.phases?.coding?.entries?.length||0,T=r?.phases?.validation?.entries?.length||0,E=()=>d==="planning"?_:d==="qa_review"||d==="qa_fixing"?T:j,A=d==="planning"||d==="qa_review"||d==="qa_fixing",R=S>0,D=fM[d]||fM.idle,M=u(pM[d]||pM.idle),P=E();return n.jsxs("div",{ref:m,className:J("space-y-1.5",l),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:a?u("execution.labels.interrupted"):R?u("execution.labels.progress"):M}),o&&!a&&A&&n.jsx(zn.div,{className:J("h-1.5 w-1.5 rounded-full",D.color),animate:y?{scale:[1,1.5,1],opacity:[1,.5,1]}:{scale:1,opacity:1},transition:y?{duration:1,repeat:1/0,ease:"easeInOut"}:void 0})]}),n.jsx("span",{className:"text-xs font-medium text-foreground",children:R?`${C}%`:P>0?n.jsxs("span",{className:"text-muted-foreground",children:[P," ",u(P===1?"execution.labels.entry":"execution.labels.entries")]}):o&&A&&(i??0)>0?`${Math.round(Math.min(i,100))}%`:""})]}),n.jsx("div",{className:J("relative h-1.5 w-full overflow-hidden rounded-full",a?"bg-warning/20":"bg-border"),children:n.jsx(sp,{mode:"wait",children:a?n.jsx(zn.div,{className:"absolute inset-0 bg-warning/40",initial:{opacity:0},animate:f?{opacity:[.3,.6,.3]}:{opacity:.45},transition:f?{duration:2,repeat:1/0,ease:"easeInOut"}:void 0},"stuck"):R?n.jsx(zn.div,{className:J("h-full rounded-full",D.color),initial:{width:0},animate:{width:`${C}%`},transition:{duration:.5,ease:"easeOut"}},"determinate"):y&&A?n.jsx(zn.div,{className:J("absolute h-full w-1/3 rounded-full",D.color),animate:{x:["-100%","400%"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}},"indeterminate"):o&&A&&!f?n.jsx(zn.div,{className:J("absolute h-full w-1/3 rounded-full left-1/3",D.color)},"indeterminate-static"):S>0?n.jsx(zn.div,{className:J("h-full rounded-full",D.color),initial:{width:0},animate:{width:`${C}%`},transition:{duration:.5,ease:"easeOut"}},"static"):null})}),S>0&&n.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[s.slice(0,10).map((O,F)=>{const $=O.status==="in_progress",z=$&&f;return n.jsx(zn.div,{className:J("h-2 w-2 rounded-full",O.status==="completed"&&"bg-success",$&&"bg-info",O.status==="failed"&&"bg-destructive",O.status==="pending"&&"bg-muted-foreground/30"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,...z&&{boxShadow:["0 0 0 0 rgba(var(--info), 0.4)","0 0 0 4px rgba(var(--info), 0)"]}},transition:{scale:{delay:F*.03,duration:.2},opacity:{delay:F*.03,duration:.2},boxShadow:z?{duration:1,repeat:1/0,ease:"easeOut"}:void 0},title:`${O.title||O.id}: ${O.status}`},O.id||`subtask-${F}`)}),S>10&&n.jsxs("span",{className:"text-[10px] text-muted-foreground font-medium ml-0.5",children:["+",S-10]},"overflow-count")]}),(o||d!=="idle")&&n.jsx(uwe,{currentPhase:d,isStuck:a,isVisible:f})]})}),uwe=p.memo(function({currentPhase:t,isStuck:s,isVisible:r=!0}){const{t:i}=Re("tasks"),a=[{key:"planning",labelKey:"execution.shortPhases.plan"},{key:"coding",labelKey:"execution.shortPhases.code"},{key:"qa_review",labelKey:"execution.shortPhases.qa"}],o=l=>{const u=["planning","coding","qa_review","qa_fixing","complete"],d=u.indexOf(t),m=u.indexOf(l);return t==="failed"?"failed":t==="complete"?"complete":l===t||l==="qa_review"&&t==="qa_fixing"?s?"stuck":"active":m<d?"complete":"pending"};return n.jsx("div",{className:"flex items-center gap-1 mt-2",children:a.map((l,u)=>{const d=o(l.key),m=d==="active"&&!s&&r;return n.jsxs("div",{className:"flex items-center",children:[n.jsxs(zn.div,{className:J("flex items-center gap-1 px-1.5 py-0.5 rounded text-[9px] font-medium",d==="complete"&&"bg-success/10 text-success",d==="active"&&"bg-primary/10 text-primary",d==="stuck"&&"bg-warning/10 text-warning",d==="failed"&&"bg-destructive/10 text-destructive",d==="pending"&&"bg-muted text-muted-foreground"),animate:m?{opacity:[1,.6,1]}:{opacity:1},transition:m?{duration:1.5,repeat:1/0,ease:"easeInOut"}:void 0,children:[d==="complete"&&n.jsx("svg",{className:"h-2.5 w-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),i(l.labelKey)]}),u<a.length-1&&n.jsx("div",{className:J("w-2 h-px mx-0.5",o(a[u+1].key)!=="pending"?"bg-success/50":"bg-border")})]},l.key)})})});function yu(e,t){return e.findIndex(s=>s.id===t||s.specId===t)}function wu(e,t,s){if(t<0||t>=e.length)return e;const r=s(e[t]);if(r===e[t])return e;const i=[...e];return i[t]=r,i}function hwe(e){if(!e.phases||!Array.isArray(e.phases))return console.warn("[validatePlanData] Invalid plan: missing or invalid phases array"),!1;for(let t=0;t<e.phases.length;t++){const s=e.phases[t];if(!s||!s.subtasks||!Array.isArray(s.subtasks))return console.warn(`[validatePlanData] Invalid phase ${t}: missing or invalid subtasks array`),!1;for(let r=0;r<s.subtasks.length;r++){const i=s.subtasks[r];if(!i||typeof i!="object")return console.warn(`[validatePlanData] Invalid subtask at phase ${t}, index ${r}: not an object`),!1;if(!i.description||typeof i.description!="string"||i.description.trim()==="")return console.warn(`[validatePlanData] Invalid subtask at phase ${t}, index ${r}: missing or empty description`),!1}}return!0}const Ks=Gn((e,t)=>({tasks:[],selectedTaskId:null,isLoading:!1,error:null,setTasks:s=>e({tasks:s}),addTask:s=>e(r=>({tasks:[...r.tasks,s]})),updateTask:(s,r)=>e(i=>{const a=yu(i.tasks,s);return a===-1?i:{tasks:wu(i.tasks,a,o=>({...o,...r}))}}),updateTaskStatus:(s,r)=>e(i=>{const a=yu(i.tasks,s);return a===-1?i:{tasks:wu(i.tasks,a,o=>{let l=o.executionProgress;return r==="backlog"?l={phase:"idle",phaseProgress:0,overallProgress:0}:r==="in_progress"&&!o.executionProgress?.phase&&(l={phase:"planning",phaseProgress:0,overallProgress:0}),{...o,status:r,executionProgress:l,updatedAt:new Date}})}}),updateTaskFromPlan:(s,r)=>e(i=>{ir("[updateTaskFromPlan] called with plan:",{taskId:s,feature:r.feature,phases:r.phases?.length||0,totalSubtasks:r.phases?.reduce((o,l)=>o+(l.subtasks?.length||0),0)||0});const a=yu(i.tasks,s);return a===-1?(console.log("[updateTaskFromPlan] Task not found:",s),i):hwe(r)?{tasks:wu(i.tasks,a,o=>{const l=r.phases.flatMap(A=>A.subtasks.map(R=>{const D=R.id||(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`subtask-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),M=R.description||"No description available",P=M,O=R.status||"pending";return{id:D,title:P,description:M,status:O,files:[],verification:R.verification}}));ir("[updateTaskFromPlan] Created subtasks:",{taskId:s,subtaskCount:l.length,subtasks:l.map(A=>({id:A.id,title:A.title,status:A.status}))});const u=l.every(A=>A.status==="completed"),d=l.some(A=>A.status==="failed"),m=l.some(A=>A.status==="in_progress"),f=l.some(A=>A.status==="completed");let x=o.status,v=o.reviewReason;const y=["planning","coding","qa_review","qa_fixing"],w=o.executionProgress?.phase&&y.includes(o.executionProgress.phase),S=o.executionProgress?.phase&&Y9(o.executionProgress.phase),C=r.status,_=C==="human_review",j=l.length>0,T=["human_review","pr_created","done"],E=A=>{if(T.includes(A)||A==="ai_review"){if(A==="ai_review"&&(!u||!j)||(A==="done"||A==="pr_created")&&(!u||!j))return!0;if(A==="human_review"&&d)return!1}return!1};if(!w&&!S&&!_&&(u&&j?T.includes(o.status)||(x="ai_review"):d?(x="human_review",v="errors"):(m||f)&&(x="in_progress")),E(x)){const A=x;x=o.status,ir("[updateTaskFromPlan] Blocked invalid terminal transition:",{taskId:s,attemptedStatus:A,currentStatus:o.status,hasSubtasks:j,allCompleted:u,anyFailed:d,subtaskCount:l.length})}return ir("[updateTaskFromPlan] Status computation:",{taskId:s,currentStatus:o.status,newStatus:x,isInActivePhase:w,isInTerminalPhase:S,isExplicitHumanReview:_,planStatus:C,currentPhase:o.executionProgress?.phase,allCompleted:u,anyFailed:d,anyInProgress:m,anyCompleted:f}),{...o,title:r.feature||o.title,subtasks:l,status:x,reviewReason:v,updatedAt:new Date}})}:(console.error("[updateTaskFromPlan] Invalid plan data, skipping update:",{taskId:s,plan:r}),i)}),updateExecutionProgress:(s,r)=>e(i=>{const a=yu(i.tasks,s);return a===-1?i:{tasks:wu(i.tasks,a,o=>{const l=o.executionProgress||{phase:"idle",phaseProgress:0,overallProgress:0,sequenceNumber:0},u=r.sequenceNumber??0,d=l.sequenceNumber??0;if(u>0&&d>0&&u<d)return console.warn("[updateExecutionProgress] Dropping out-of-order update:",{taskId:s,incomingSeq:u,currentSeq:d,incomingPhase:r.phase,currentPhase:l.phase}),o;const m=r.phase&&r.phase!==l.phase;return{...o,executionProgress:{...l,...r},...m?{updatedAt:new Date}:{}}})}}),appendLog:(s,r)=>e(i=>{const a=yu(i.tasks,s);return a===-1?i:{tasks:wu(i.tasks,a,o=>({...o,logs:[...o.logs||[],r]}))}}),batchAppendLogs:(s,r)=>e(i=>{if(r.length===0)return i;const a=yu(i.tasks,s);return a===-1?i:{tasks:wu(i.tasks,a,o=>({...o,logs:[...o.logs||[],...r]}))}}),selectTask:s=>e({selectedTaskId:s}),setLoading:s=>e({isLoading:s}),setError:s=>e({error:s}),clearTasks:()=>e({tasks:[],selectedTaskId:null}),getSelectedTask:()=>{const s=t();return s.tasks.find(r=>r.id===s.selectedTaskId)},getTasksByStatus:s=>t().tasks.filter(i=>i.status===s)}));async function po(e){const t=Ks.getState();t.setLoading(!0),t.setError(null);try{const s=await window.electronAPI.getTasks(e);s.success&&s.data?t.setTasks(s.data):t.setError(s.error||"Failed to load tasks")}catch(s){t.setError(s instanceof Error?s.message:"Unknown error")}finally{t.setLoading(!1)}}async function F8(e,t,s,r){const i=Ks.getState();try{const a=await window.electronAPI.createTask(e,t,s,r);return a.success&&a.data?(i.addTask(a.data),a.data):(i.setError(a.error||"Failed to create task"),null)}catch(a){return i.setError(a instanceof Error?a.message:"Unknown error"),null}}function B8(e,t){window.electronAPI.startTask(e,t)}function z8(e){window.electronAPI.stopTask(e)}async function mwe(e,t,s,r){const i=Ks.getState();try{return(await window.electronAPI.submitReview(e,t,s,r)).success?(i.updateTaskStatus(e,t?"done":"in_progress"),!0):!1}catch{return!1}}async function ip(e,t,s){const r=Ks.getState();try{const i=await window.electronAPI.updateTaskStatus(e,t,s);return i.success?(r.updateTaskStatus(e,t),{success:!0}):i.worktreeExists?(console.log("[persistTaskStatus] Worktree exists, confirmation needed"),{success:!1,worktreeExists:!0,worktreePath:i.worktreePath,error:i.error}):(console.error("Failed to persist task status:",i.error),{success:!1,error:i.error})}catch(i){return console.error("Error persisting task status:",i),{success:!1,error:String(i)}}}async function fwe(e){return ip(e,"done",{forceCleanup:!0})}async function pwe(e,t){const s=Ks.getState();try{const r=await window.electronAPI.updateTask(e,t);return r.success&&r.data?(s.updateTask(e,{title:r.data.title,description:r.data.description,metadata:r.data.metadata,updatedAt:new Date}),!0):(console.error("Failed to persist task update:",r.error),!1)}catch(r){return console.error("Error persisting task update:",r),!1}}async function $8(e){try{const t=await window.electronAPI.checkTaskRunning(e);return t.success&&t.data===!0}catch(t){return console.error("Error checking task running status:",t),!1}}async function H8(e,t={autoRestart:!0}){const s=Ks.getState();try{const r=await window.electronAPI.recoverStuckTask(e,t);return r.success&&r.data?(s.updateTaskStatus(e,r.data.newStatus),{success:!0,message:r.data.message,autoRestarted:r.data.autoRestarted}):{success:!1,message:r.error||"Failed to recover task"}}catch(r){return console.error("Error recovering stuck task:",r),{success:!1,message:r instanceof Error?r.message:"Unknown error"}}}async function gwe(e){const t=Ks.getState();try{const s=await window.electronAPI.deleteTask(e);return s.success?(t.setTasks(t.tasks.filter(r=>r.id!==e&&r.specId!==e)),t.selectedTaskId===e&&t.selectTask(null),{success:!0}):{success:!1,error:s.error||"Failed to delete task"}}catch(s){return console.error("Error deleting task:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async function U8(e,t,s){try{const r=await window.electronAPI.archiveTasks(e,t,s);return r.success?(await po(e),{success:!0}):{success:!1,error:r.error||"Failed to archive tasks"}}catch(r){return console.error("Error archiving tasks:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}const xwe="task-creation-draft";function Mk(e){return`${xwe}-${e}`}function vwe(e){try{const t=Mk(e.projectId),s={...e,images:e.images.map(r=>({...r,data:void 0})),savedAt:new Date().toISOString()};localStorage.setItem(t,JSON.stringify(s))}catch(t){console.error("Failed to save draft:",t)}}function bwe(e){try{const t=Mk(e),s=localStorage.getItem(t);if(!s)return null;const r=JSON.parse(s);return r.savedAt=new Date(r.savedAt),r}catch(t){return console.error("Failed to load draft:",t),null}}function CS(e){try{const t=Mk(e);localStorage.removeItem(t)}catch(t){console.error("Failed to clear draft:",t)}}function gM(e){return e?!e.title.trim()&&!e.description.trim()&&e.images.length===0&&!e.category&&!e.priority&&!e.complexity&&!e.impact:!0}function G8(e){return e.status!=="human_review"||e.reviewReason==="errors"?!1:!e.subtasks||e.subtasks.length===0?!0:e.subtasks.filter(s=>s.status==="completed").length===0}function ywe(e){const t=e.subtasks?.length||0,s=e.subtasks?.filter(i=>i.status==="completed").length||0,r=t>0?Math.round(s/t*100):0;return{completed:s,total:t,percentage:r}}const xM={feature:ah,bug_fix:jh,refactoring:uo,documentation:Ms,security:xa,performance:Sp,ui_ux:_p,infrastructure:uo,testing:Ms};function wwe(e,t){const s=e.task,r=t.task;if(s===r&&e.onClick===t.onClick&&e.onStatusChange===t.onStatusChange)return!0;const i=s.id===r.id&&s.status===r.status&&s.title===r.title&&s.description===r.description&&s.updatedAt===r.updatedAt&&s.reviewReason===r.reviewReason&&s.executionProgress?.phase===r.executionProgress?.phase&&s.executionProgress?.phaseProgress===r.executionProgress?.phaseProgress&&s.subtasks.length===r.subtasks.length&&s.metadata?.category===r.metadata?.category&&s.metadata?.complexity===r.metadata?.complexity&&s.metadata?.archivedAt===r.metadata?.archivedAt&&s.metadata?.prUrl===r.metadata?.prUrl&&s.subtasks.every((a,o)=>a.status===r.subtasks[o]?.status);if(window.DEBUG&&!i){const a=[];s.status!==r.status&&a.push(`status: ${s.status} -> ${r.status}`),s.executionProgress?.phase!==r.executionProgress?.phase&&a.push(`phase: ${s.executionProgress?.phase} -> ${r.executionProgress?.phase}`),s.subtasks.length!==r.subtasks.length&&a.push(`subtasks: ${s.subtasks.length} -> ${r.subtasks.length}`),console.log(`[TaskCard] Re-render: ${s.id} | ${a.join(", ")||"other fields"}`)}return i}const V8=p.memo(function({task:t,onClick:s,onStatusChange:r}){const{t:i}=Re(["tasks","errors"]),[a,o]=p.useState(!1),[l,u]=p.useState(!1),d=p.useRef({timeout:null,interval:null}),m=t.status==="in_progress",f=t.executionProgress?.phase,x=f&&f!=="idle"&&f!=="complete"&&f!=="failed",v=G8(t),y=p.useMemo(()=>{if(!t.description)return null;if(t.description.startsWith(Lv)){const F=t.description.slice(Lv.length),$=i("errors:task.jsonError.description",{error:F});return MD($,120)}return MD(t.description,120)},[t.description,i]),w=p.useMemo(()=>t.title.endsWith(jP)?`${t.title.slice(0,-jP.length)} ${i("errors:task.jsonError.titleSuffix")}`:t.title,[t.title,i]),S=p.useMemo(()=>W_(t.updatedAt),[t.updatedAt]),C=p.useMemo(()=>r?PC.filter(F=>F!==t.status).map(F=>n.jsx(Pn,{onClick:()=>r(F),children:i(Dv[F])},F)):null,[t.status,r,i]),_=p.useCallback(()=>{const F=t.executionProgress?.phase;if(F==="complete"||F==="failed"){o(!1);return}const $=()=>{$8(t.id).then(z=>{const H=t.executionProgress?.phase;o(H==="complete"||H==="failed"?!1:!z)})};"requestIdleCallback"in window?window.requestIdleCallback($):$()},[t.id,t.executionProgress?.phase]);p.useEffect(()=>{if(!m){o(!1),d.current.timeout&&(clearTimeout(d.current.timeout),d.current.timeout=null),d.current.interval&&(clearInterval(d.current.interval),d.current.interval=null);return}return d.current.timeout=setTimeout(_,5e3),d.current.interval=setInterval(_,3e4),()=>{d.current.timeout&&clearTimeout(d.current.timeout),d.current.interval&&clearInterval(d.current.interval)}},[t.id,m,_]),p.useEffect(()=>{let F=null;const $=()=>{document.visibilityState==="visible"&&m&&(F&&clearTimeout(F),F=setTimeout(_,500))};return document.addEventListener("visibilitychange",$),()=>{document.removeEventListener("visibilitychange",$),F&&clearTimeout(F)}},[m,_]);const j=F=>{F.stopPropagation(),m&&!a?z8(t.id):B8(t.id)},T=async F=>{F.stopPropagation(),u(!0),(await H8(t.id,{autoRestart:!0})).success&&o(!1),u(!1)},E=async F=>{F.stopPropagation();const $=await U8(t.projectId,[t.id]);$.success||console.error("[TaskCard] Failed to archive task:",t.id,$.error)},A=F=>{F.stopPropagation(),t.metadata?.prUrl&&window.electronAPI?.openExternal&&window.electronAPI.openExternal(t.metadata.prUrl)},R=F=>{switch(F){case"in_progress":return"info";case"ai_review":return"warning";case"human_review":return"purple";case"pr_created":return"success";case"done":return"success";default:return"secondary"}},D=F=>{switch(F){case"in_progress":return i("labels.running");case"ai_review":return i("labels.aiReview");case"human_review":return i("labels.needsReview");case"pr_created":return i("columns.pr_created");case"done":return i("status.complete");default:return i("labels.pending")}},M=F=>{if(!F)return null;switch(F){case"completed":return{label:i("reviewReason.completed"),variant:"success"};case"errors":return{label:i("reviewReason.hasErrors"),variant:"destructive"};case"qa_rejected":return{label:i("reviewReason.qaIssues"),variant:"warning"};case"plan_review":return{label:i("reviewReason.approvePlan"),variant:"warning"};default:return null}},P=t.status==="human_review"?M(t.reviewReason):null,O=!!t.metadata?.archivedAt;return n.jsx(Le,{className:J("card-surface task-card-enhanced cursor-pointer",m&&!a&&"ring-2 ring-primary border-primary task-running-pulse",a&&"ring-2 ring-warning border-warning task-stuck-pulse",O&&"opacity-60 hover:opacity-80"),onClick:s,children:n.jsxs(Ye,{className:"p-4",children:[n.jsx("h3",{className:"font-semibold text-sm text-foreground line-clamp-2 leading-snug",title:w,children:w}),y&&n.jsx("p",{className:"mt-2 text-xs text-muted-foreground line-clamp-2",children:y}),(t.metadata||a||v||x||P)&&n.jsxs("div",{className:"mt-2.5 flex flex-wrap gap-1.5",children:[a&&n.jsxs(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1 bg-warning/10 text-warning border-warning/30 badge-priority-urgent",children:[n.jsx(Tt,{className:"h-2.5 w-2.5"}),i("labels.stuck")]}),v&&!a&&n.jsxs(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1 bg-orange-500/10 text-orange-400 border-orange-500/30",children:[n.jsx(Tt,{className:"h-2.5 w-2.5"}),i("labels.incomplete")]}),t.metadata?.archivedAt&&n.jsxs(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex items-center gap-1 bg-muted text-muted-foreground border-border",children:[n.jsx(td,{className:"h-2.5 w-2.5"}),i("status.archived")]}),x&&f&&!a&&!v&&n.jsxs(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0.5 flex items-center gap-1",Z9[f]),children:[n.jsx(we,{className:"h-2.5 w-2.5 animate-spin"}),X9[f]]}),!x&&n.jsx(n.Fragment,{children:t.status==="pr_created"?n.jsx(oe,{variant:R(t.status),className:"text-[10px] px-1.5 py-0.5",children:D(t.status)}):n.jsx(oe,{variant:a||v?"warning":R(t.status),className:"text-[10px] px-1.5 py-0.5",children:a?i("labels.needsRecovery"):v?i("labels.needsResume"):D(t.status)})}),P&&!a&&!v&&n.jsx(oe,{variant:P.variant,className:"text-[10px] px-1.5 py-0.5",children:P.label}),t.metadata?.category&&n.jsxs(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",DC[t.metadata.category]),children:[xM[t.metadata.category]&&(()=>{const F=xM[t.metadata.category];return n.jsx(F,{className:"h-2.5 w-2.5 mr-0.5"})})(),RC[t.metadata.category]]}),t.metadata?.impact&&(t.metadata.impact==="high"||t.metadata.impact==="critical")&&n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",Iv[t.metadata.impact]),children:w5[t.metadata.impact]}),t.metadata?.complexity&&n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",MC[t.metadata.complexity]),children:IC[t.metadata.complexity]}),t.metadata?.priority&&(t.metadata.priority==="urgent"||t.metadata.priority==="high")&&n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",S5[t.metadata.priority]),children:j5[t.metadata.priority]}),t.metadata?.securitySeverity&&n.jsxs(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",Iv[t.metadata.securitySeverity]),children:[t.metadata.securitySeverity," ",i("metadata.severity")]})]}),(t.subtasks.length>0||x||m||a)&&n.jsx("div",{className:"mt-4",children:n.jsx(dwe,{phase:f,subtasks:t.subtasks,phaseProgress:t.executionProgress?.phaseProgress,isStuck:a,isRunning:m})}),n.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[n.jsx(cr,{className:"h-3 w-3"}),n.jsx("span",{children:S})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[a?n.jsx(W,{variant:"warning",size:"sm",className:"h-7 px-2.5",onClick:T,disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-1.5 h-3 w-3 animate-spin"}),i("labels.recovering")]}):n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"mr-1.5 h-3 w-3"}),i("actions.recover")]})}):v?n.jsxs(W,{variant:"default",size:"sm",className:"h-7 px-2.5",onClick:j,children:[n.jsx(Zr,{className:"mr-1.5 h-3 w-3"}),i("actions.resume")]}):t.status==="pr_created"?n.jsxs("div",{className:"flex gap-1",children:[t.metadata?.prUrl&&n.jsx(W,{variant:"ghost",size:"sm",className:"h-7 px-2 cursor-pointer",onClick:A,title:i("tooltips.viewPR"),children:n.jsx(Js,{className:"h-3 w-3"})}),!t.metadata?.archivedAt&&n.jsx(W,{variant:"ghost",size:"sm",className:"h-7 px-2 cursor-pointer",onClick:E,title:i("tooltips.archiveTask"),children:n.jsx(td,{className:"h-3 w-3"})})]}):t.status==="done"&&!t.metadata?.archivedAt?n.jsxs(W,{variant:"ghost",size:"sm",className:"h-7 px-2.5 hover:bg-muted-foreground/10",onClick:E,title:i("tooltips.archiveTask"),children:[n.jsx(td,{className:"mr-1.5 h-3 w-3"}),i("actions.archive")]}):(t.status==="backlog"||t.status==="in_progress")&&n.jsx(W,{variant:m?"destructive":"default",size:"sm",className:"h-7 px-2.5",onClick:j,children:m?n.jsxs(n.Fragment,{children:[n.jsx(jo,{className:"mr-1.5 h-3 w-3"}),i("actions.stop")]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"mr-1.5 h-3 w-3"}),i("actions.start")]})}),C&&n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:F=>F.stopPropagation(),"aria-label":i("actions.taskActions"),children:n.jsx(Z3,{className:"h-4 w-4"})})}),n.jsxs(La,{align:"end",onClick:F=>F.stopPropagation(),children:[n.jsx(tk,{children:i("actions.moveTo")}),n.jsx(ma,{}),C]})]})]})]})]})})},wwe);function jwe(e,t){return e.task===t.task&&e.onClick===t.onClick&&e.onStatusChange===t.onStatusChange}const Swe=p.memo(function({task:t,onClick:s,onStatusChange:r}){const{attributes:i,listeners:a,setNodeRef:o,transform:l,transition:u,isDragging:d,isOver:m}=hy({id:t.id}),f={transform:Ra.Transform.toString(l),transition:u,zIndex:d?50:void 0},x=p.useCallback(()=>{s()},[s]);return n.jsx("div",{ref:o,style:f,className:J("touch-none transition-all duration-200",d&&"dragging-placeholder opacity-40 scale-[0.98]",m&&!d&&"ring-2 ring-primary/30 ring-offset-2 ring-offset-background rounded-xl"),...i,...a,children:n.jsx(V8,{task:t,onClick:x,onStatusChange:r})})},jwe);function _we({open:e,taskTitle:t,worktreePath:s,isProcessing:r,error:i,onOpenChange:a,onConfirm:o}){const{t:l}=Re(["dialogs","common"]);return n.jsx(Kr,{open:e,onOpenChange:a,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2",children:[i?n.jsx(Ke,{className:"h-5 w-5 text-destructive"}):n.jsx(Xe,{className:"h-5 w-5 text-success"}),l(i?"dialogs:worktreeCleanup.errorTitle":"dialogs:worktreeCleanup.title")]}),n.jsx(Lr,{asChild:!0,children:n.jsxs("div",{className:"text-sm text-muted-foreground space-y-3",children:[i?n.jsx("p",{className:"text-destructive",children:i}):n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx(SW,{i18nKey:"dialogs:worktreeCleanup.hasWorktree",values:{taskTitle:t},components:{strong:n.jsx("strong",{className:"text-foreground"})}})}),n.jsx("p",{children:l("dialogs:worktreeCleanup.willDelete")})]}),s&&n.jsx("div",{className:"bg-muted/50 rounded-lg p-3 font-mono text-xs break-all",children:s}),!i&&n.jsx("p",{className:"text-amber-600 dark:text-amber-500",children:l("dialogs:worktreeCleanup.warning")})]})})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:r,children:l("common:buttons.cancel")}),n.jsx(pi,{onClick:u=>{u.preventDefault(),o()},disabled:r,className:i?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-success text-success-foreground hover:bg-success/90",children:r?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),l("dialogs:worktreeCleanup.completing")]}):i?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4"}),l("dialogs:worktreeCleanup.retry")]}):n.jsxs(n.Fragment,{children:[n.jsx(Gv,{className:"mr-2 h-4 w-4"}),l("dialogs:worktreeCleanup.confirm")]})})]})]})})}const Nwe=new Set(PC);function vM(e){return Nwe.has(e)}function Cwe(e,t){if(e.length!==t.length)return!1;if(e===t)return!0;for(let s=0;s<e.length;s++){const r=e[s],i=t[s];if(r.id!==i.id||r.status!==i.status||r.executionProgress?.phase!==i.executionProgress?.phase||r.updatedAt!==i.updatedAt)return!1}return!0}function kwe(e,t){if(e.status!==t.status||e.isOver!==t.isOver||e.onTaskClick!==t.onTaskClick||e.onStatusChange!==t.onStatusChange||e.onAddClick!==t.onAddClick||e.onArchiveAll!==t.onArchiveAll||e.archivedCount!==t.archivedCount||e.showArchived!==t.showArchived||e.onToggleArchived!==t.onToggleArchived)return!1;const s=Cwe(e.tasks,t.tasks);return window.DEBUG&&!s&&console.log(`[DroppableColumn] Re-render: ${t.status} column (${t.tasks.length} tasks)`),s}const Awe=(e,t)=>{switch(e){case"backlog":return{icon:n.jsx(L_,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyBacklog"),subtext:t("kanban.emptyBacklogHint")};case"in_progress":return{icon:n.jsx(we,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyInProgress"),subtext:t("kanban.emptyInProgressHint")};case"ai_review":return{icon:n.jsx(Ws,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyAiReview"),subtext:t("kanban.emptyAiReviewHint")};case"human_review":return{icon:n.jsx(Ws,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyHumanReview"),subtext:t("kanban.emptyHumanReviewHint")};case"done":return{icon:n.jsx(Xe,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyDone"),subtext:t("kanban.emptyDoneHint")};default:return{icon:n.jsx(L_,{className:"h-6 w-6 text-muted-foreground/50"}),message:t("kanban.emptyDefault")}}},Ewe=p.memo(function({status:t,tasks:s,onTaskClick:r,onStatusChange:i,isOver:a,onAddClick:o,onArchiveAll:l,archivedCount:u,showArchived:d,onToggleArchived:m}){const{t:f}=Re(["tasks","common"]),{setNodeRef:x}=cy({id:t}),v=p.useMemo(()=>s.map(j=>j.id),[s]),y=p.useMemo(()=>{const j=new Map;return s.forEach(T=>{j.set(T.id,()=>r(T))}),j},[s,r]),w=p.useMemo(()=>{const j=new Map;return s.forEach(T=>{j.set(T.id,E=>i(T.id,E))}),j},[s,i]),S=p.useMemo(()=>s.length===0?null:s.map(j=>n.jsx(Swe,{task:j,onClick:y.get(j.id),onStatusChange:w.get(j.id)},j.id)),[s,y,w]),C=()=>{switch(t){case"backlog":return"column-backlog";case"in_progress":return"column-in-progress";case"ai_review":return"column-ai-review";case"human_review":return"column-human-review";case"done":return"column-done";default:return"border-t-muted-foreground/30"}},_=Awe(t,f);return n.jsxs("div",{ref:x,className:J("flex min-w-72 max-w-[30rem] flex-1 flex-col rounded-xl border border-white/5 bg-linear-to-b from-secondary/30 to-transparent backdrop-blur-sm transition-all duration-200",C(),"border-t-2",a&&"drop-zone-highlight"),children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:[n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("h2",{className:"font-semibold text-sm text-foreground",children:f(Dv[t])}),n.jsx("span",{className:"column-count-badge",children:s.length})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[t==="backlog"&&o&&n.jsx(W,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-primary/10 hover:text-primary transition-colors",onClick:o,"aria-label":f("kanban.addTaskAriaLabel"),children:n.jsx(fs,{className:"h-4 w-4"})}),t==="done"&&l&&s.length>0&&!d&&n.jsx(W,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-muted-foreground/10 hover:text-muted-foreground transition-colors",onClick:l,"aria-label":f("tooltips.archiveAllDone"),children:n.jsx(td,{className:"h-4 w-4"})}),t==="done"&&u!==void 0&&u>0&&m&&n.jsxs(ft,{delayDuration:200,children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"ghost",size:"icon",className:J("h-7 w-7 transition-colors relative",d?"text-primary bg-primary/10 hover:bg-primary/20":"hover:bg-muted-foreground/10 hover:text-muted-foreground"),onClick:m,"aria-pressed":d,"aria-label":f("common:accessibility.toggleShowArchivedAriaLabel"),children:[n.jsx(td,{className:"h-4 w-4"}),n.jsx("span",{className:"absolute -top-1 -right-1 text-[10px] font-medium bg-muted rounded-full min-w-[14px] h-[14px] flex items-center justify-center",children:u})]})}),n.jsx(mt,{children:f(d?"common:projectTab.hideArchived":"common:projectTab.showArchived")})]})]})]}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(zt,{className:"h-full px-3 pb-3 pt-2",children:n.jsx(uy,{items:v,strategy:TO,children:n.jsx("div",{className:"space-y-3 min-h-[120px]",children:s.length===0?n.jsx("div",{className:J("empty-column-dropzone flex flex-col items-center justify-center py-6",a&&"active"),children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center mb-2",children:n.jsx(fs,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm font-medium text-primary",children:f("kanban.dropHere")})]}):n.jsxs(n.Fragment,{children:[_.icon,n.jsx("span",{className:"mt-2 text-sm font-medium text-muted-foreground/70",children:_.message}),_.subtext&&n.jsx("span",{className:"mt-0.5 text-xs text-muted-foreground/50",children:_.subtext})]})}):S})})})})]})},kwe);function Twe({tasks:e,onTaskClick:t,onNewTaskClick:s,onRefresh:r,isRefreshing:i}){const{t:a}=Re(["tasks","dialogs","common"]),{toast:o}=bo(),[l,u]=p.useState(null),[d,m]=p.useState(null),{showArchived:f,toggleShowArchived:x}=a6(),[v,y]=p.useState({open:!1,taskId:null,taskTitle:"",worktreePath:void 0,isProcessing:!1,error:void 0}),w=p.useMemo(()=>e.filter(M=>M.metadata?.archivedAt).length,[e]),S=p.useMemo(()=>f?e:e.filter(M=>!M.metadata?.archivedAt),[e,f]),C=ry(ud(Ah,{activationConstraint:{distance:8}}),ud(Ep,{coordinateGetter:x1})),_=p.useMemo(()=>{const M={backlog:[],in_progress:[],ai_review:[],human_review:[],done:[]};return S.forEach(P=>{const O=P.status==="pr_created"?"done":P.status;M[O]&&M[O].push(P)}),Object.keys(M).forEach(P=>{M[P].sort((O,F)=>{const $=new Date(O.createdAt).getTime();return new Date(F.createdAt).getTime()-$})}),M},[S]),j=async()=>{const M=e[0]?.projectId;if(!M){console.error("[KanbanBoard] No projectId found");return}const P=_.done.map(F=>F.id);if(P.length===0)return;const O=await U8(M,P);O.success||console.error("[KanbanBoard] Failed to archive tasks:",O.error)},T=M=>{const{active:P}=M,O=e.find(F=>F.id===P.id);O&&u(O)},E=M=>{const{over:P}=M;if(!P){m(null);return}const O=P.id;if(vM(O)){m(O);return}const F=e.find($=>$.id===O);F&&m(F.status)},A=async(M,P,O)=>{const F=O||e.find(z=>z.id===M),$=await ip(M,P);$.success||($.worktreeExists?y({open:!0,taskId:M,taskTitle:F?.title||a("tasks:untitled"),worktreePath:$.worktreePath,isProcessing:!1,error:void 0}):o({title:a("common:errors.operationFailed"),description:$.error||a("common:errors.unknownError"),variant:"destructive"}))},R=async()=>{if(!v.taskId)return;y(P=>({...P,isProcessing:!0,error:void 0}));const M=await fwe(v.taskId);M.success?y({open:!1,taskId:null,taskTitle:"",worktreePath:void 0,isProcessing:!1,error:void 0}):y(P=>({...P,isProcessing:!1,error:M.error||a("dialogs:worktreeCleanup.errorDescription")}))},D=M=>{const{active:P,over:O}=M;if(u(null),m(null),!O)return;const F=P.id,$=O.id;if(vM($)){const H=$,I=e.find(V=>V.id===F);I&&I.status!==H&&A(F,H,I).catch(V=>console.error("[KanbanBoard] Status change failed:",V));return}const z=e.find(H=>H.id===$);if(z){const H=e.find(I=>I.id===F);H&&H.status!==z.status&&A(F,z.status,H).catch(I=>console.error("[KanbanBoard] Status change failed:",I))}};return n.jsxs("div",{className:"flex h-full flex-col",children:[r&&n.jsx("div",{className:"flex items-center justify-end px-6 pt-4 pb-2",children:n.jsxs(W,{variant:"ghost",size:"sm",onClick:r,disabled:i,className:"gap-2 text-muted-foreground hover:text-foreground",children:[n.jsx(We,{className:J("h-4 w-4",i&&"animate-spin")}),a(i?"common:buttons.refreshing":"tasks:refreshTasks")]})}),n.jsxs(ly,{sensors:C,collisionDetection:d1,onDragStart:T,onDragOver:E,onDragEnd:D,children:[n.jsx("div",{className:"flex flex-1 gap-4 overflow-x-auto p-6",children:PC.map(M=>n.jsx(Ewe,{status:M,tasks:_[M],onTaskClick:t,onStatusChange:A,isOver:d===M,onAddClick:M==="backlog"?s:void 0,onArchiveAll:M==="done"?j:void 0,archivedCount:M==="done"?w:void 0,showArchived:M==="done"?f:void 0,onToggleArchived:M==="done"?x:void 0},M))}),n.jsx(dy,{children:l?n.jsx("div",{className:"drag-overlay-card",children:n.jsx(V8,{task:l,onClick:()=>{}})}):null})]}),n.jsx(_we,{open:v.open,taskTitle:v.taskTitle,worktreePath:v.worktreePath,isProcessing:v.isProcessing,error:v.error,onOpenChange:M=>{!M&&!v.isProcessing&&y(P=>({...P,open:!1,error:void 0}))},onConfirm:R})]})}var qy="Tabs",[Pwe]=ur(qy,[$h]),q8=$h(),[Rwe,Lk]=Pwe(qy),W8=p.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:u="automatic",...d}=e,m=Bh(l),[f,x]=$i({prop:r,onChange:i,defaultProp:a??"",caller:qy});return n.jsx(Rwe,{scope:s,baseId:Li(),value:f,onValueChange:x,orientation:o,dir:m,activationMode:u,children:n.jsx(ot.div,{dir:m,"data-orientation":o,...d,ref:t})})});W8.displayName=qy;var K8="TabsList",Y8=p.forwardRef((e,t)=>{const{__scopeTabs:s,loop:r=!0,...i}=e,a=Lk(K8,s),o=q8(s);return n.jsx(q1,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:n.jsx(ot.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});Y8.displayName=K8;var X8="TabsTrigger",Z8=p.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,disabled:i=!1,...a}=e,o=Lk(X8,s),l=q8(s),u=eH(o.baseId,r),d=tH(o.baseId,r),m=r===o.value;return n.jsx(W1,{asChild:!0,...l,focusable:!i,active:m,children:n.jsx(ot.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":d,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:u,...a,ref:t,onMouseDown:Fe(e.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Fe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Fe(e.onFocus,()=>{const f=o.activationMode!=="manual";!m&&!i&&f&&o.onValueChange(r)})})})});Z8.displayName=X8;var Q8="TabsContent",J8=p.forwardRef((e,t)=>{const{__scopeTabs:s,value:r,forceMount:i,children:a,...o}=e,l=Lk(Q8,s),u=eH(l.baseId,r),d=tH(l.baseId,r),m=r===l.value,f=p.useRef(m);return p.useEffect(()=>{const x=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(x)},[]),n.jsx(Dn,{present:i||m,children:({present:x})=>n.jsx(ot.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!x,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:x&&a})})});J8.displayName=Q8;function eH(e,t){return`${e}-trigger-${t}`}function tH(e,t){return`${e}-content-${t}`}var Dwe=W8,sH=Y8,nH=Z8,rH=J8;const Wy=Dwe,qp=p.forwardRef(({className:e,...t},s)=>n.jsx(sH,{ref:s,className:J("inline-flex h-10 items-center justify-center rounded-lg bg-secondary p-1 text-muted-foreground",e),...t}));qp.displayName=sH.displayName;const wr=p.forwardRef(({className:e,...t},s)=>n.jsx(nH,{ref:s,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5 text-sm font-medium","transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-card data-[state=active]:text-foreground","data-[state=inactive]:hover:text-foreground/80",e),...t}));wr.displayName=nH.displayName;const Ii=p.forwardRef(({className:e,...t},s)=>n.jsx(rH,{ref:s,className:J("mt-3 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ii.displayName=rH.displayName;function Iwe(e,t=[]){let s=[];function r(a,o){const l=p.createContext(o);l.displayName=a+"Context";const u=s.length;s=[...s,o];const d=f=>{const{scope:x,children:v,...y}=f,w=x?.[e]?.[u]||l,S=p.useMemo(()=>y,Object.values(y));return n.jsx(w.Provider,{value:S,children:v})};d.displayName=a+"Provider";function m(f,x){const v=x?.[e]?.[u]||l,y=p.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,m]}const i=()=>{const a=s.map(o=>p.createContext(o));return function(l){const u=l?.[e]||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return i.scopeName=e,[r,Mwe(i,...t)]}function Mwe(...e){const t=e[0];if(e.length===1)return t;const s=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:u,scopeName:d})=>{const f=u(a)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return s.scopeName=t.scopeName,s}var Lwe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],iH=Lwe.reduce((e,t)=>{const s=E1(`Primitive.${t}`),r=p.forwardRef((i,a)=>{const{asChild:o,...l}=i,u=o?s:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(u,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Ok="Progress",Fk=100,[Owe]=Iwe(Ok),[Fwe,Bwe]=Owe(Ok),aH=p.forwardRef((e,t)=>{const{__scopeProgress:s,value:r=null,max:i,getValueLabel:a=zwe,...o}=e;(i||i===0)&&!bM(i)&&console.error($we(`${i}`,"Progress"));const l=bM(i)?i:Fk;r!==null&&!yM(r,l)&&console.error(Hwe(`${r}`,"Progress"));const u=yM(r,l)?r:null,d=bb(u)?a(u,l):void 0;return n.jsx(Fwe,{scope:s,value:u,max:l,children:n.jsx(iH.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":bb(u)?u:void 0,"aria-valuetext":d,role:"progressbar","data-state":cH(u,l),"data-value":u??void 0,"data-max":l,...o,ref:t})})});aH.displayName=Ok;var oH="ProgressIndicator",lH=p.forwardRef((e,t)=>{const{__scopeProgress:s,...r}=e,i=Bwe(oH,s);return n.jsx(iH.div,{"data-state":cH(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});lH.displayName=oH;function zwe(e,t){return`${Math.round(e/t*100)}%`}function cH(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function bb(e){return typeof e=="number"}function bM(e){return bb(e)&&!isNaN(e)&&e>0}function yM(e,t){return bb(e)&&!isNaN(e)&&e<=t&&e>=0}function $we(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Fk}\`.`}function Hwe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Fk} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var dH=aH,Uwe=lH;const xi=p.forwardRef(({className:e,value:t,animated:s,...r},i)=>n.jsx(dH,{ref:i,className:J("relative h-2 w-full overflow-hidden rounded-full bg-border",e),...r,children:n.jsx(Uwe,{className:J("h-full w-full flex-1 bg-primary transition-all duration-300 ease-out",s&&"progress-working"),style:{transform:`translateX(-${100-(t||0)}%)`}})}));xi.displayName=dH.displayName;function uH({open:e,onOpenChange:t,title:s,description:r,children:i,footer:a,sidebar:o,sidebarOpen:l=!1,disabled:u=!1}){const{t:d}=Re("common"),m=()=>{u||t(!1)};return n.jsx(Lp,{open:e,onOpenChange:m,children:n.jsxs(Op,{children:[n.jsx(Ih,{className:J("fixed inset-0 z-50 bg-black/60","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),n.jsx(Mh,{className:J("fixed left-[50%] top-4 z-50","translate-x-[-50%]","w-[95vw] max-w-5xl h-[calc(100vh-32px)]","bg-card border border-border rounded-xl","shadow-2xl overflow-hidden flex flex-col","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","duration-200"),children:n.jsxs("div",{className:"flex h-full min-h-0 overflow-hidden",children:[n.jsxs("div",{className:"flex-1 flex flex-col min-w-0 min-h-0 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-5 border-b border-border shrink-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(Lh,{className:"text-xl font-semibold leading-tight text-foreground",children:s}),r&&n.jsx(Oh,{className:"mt-1.5 text-sm text-muted-foreground",children:r})]}),n.jsx(Fh,{asChild:!0,children:n.jsxs(W,{variant:"ghost",size:"icon",className:"hover:bg-muted transition-colors shrink-0",disabled:u,children:[n.jsx(Ss,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:d("buttons.close")})]})})]})}),n.jsx(zt,{className:"flex-1 min-h-0",children:n.jsx("div",{className:"p-6",children:i})}),n.jsx("div",{className:"px-6 py-4 border-t border-border shrink-0 bg-muted/30",children:a})]}),o&&l&&n.jsx("div",{className:"w-80 border-l border-border flex-shrink-0 overflow-hidden",children:o})]})})]})})}const go=p.forwardRef(({className:e,...t},s)=>n.jsx("textarea",{className:J("flex min-h-[80px] w-full rounded-lg border border-border bg-card px-3 py-2 text-sm text-foreground","placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200","resize-none",e),ref:s,...t}));go.displayName="Textarea";var Ky="Checkbox",[Gwe]=ur(Ky),[Vwe,Bk]=Gwe(Ky);function qwe(e){const{__scopeCheckbox:t,checked:s,children:r,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:u,required:d,value:m="on",internal_do_not_use_render:f}=e,[x,v]=$i({prop:s,defaultProp:i??!1,onChange:u,caller:Ky}),[y,w]=p.useState(null),[S,C]=p.useState(null),_=p.useRef(!1),j=y?!!o||!!y.closest("form"):!0,T={checked:x,disabled:a,setChecked:v,control:y,setControl:w,name:l,form:o,value:m,hasConsumerStoppedPropagationRef:_,required:d,defaultChecked:tc(i)?!1:i,isFormControl:j,bubbleInput:S,setBubbleInput:C};return n.jsx(Vwe,{scope:t,...T,children:Wwe(f)?f(T):r})}var hH="CheckboxTrigger",mH=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:s,...r},i)=>{const{control:a,value:o,disabled:l,checked:u,required:d,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:x,isFormControl:v,bubbleInput:y}=Bk(hH,e),w=Ct(i,m),S=p.useRef(u);return p.useEffect(()=>{const C=a?.form;if(C){const _=()=>f(S.current);return C.addEventListener("reset",_),()=>C.removeEventListener("reset",_)}},[a,f]),n.jsx(ot.button,{type:"button",role:"checkbox","aria-checked":tc(u)?"mixed":u,"aria-required":d,"data-state":vH(u),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:w,onKeyDown:Fe(t,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Fe(s,C=>{f(_=>tc(_)?!0:!_),y&&v&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})})});mH.displayName=hH;var zk=p.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:u,onCheckedChange:d,form:m,...f}=e;return n.jsx(qwe,{__scopeCheckbox:s,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:d,name:r,form:m,value:u,internal_do_not_use_render:({isFormControl:x})=>n.jsxs(n.Fragment,{children:[n.jsx(mH,{...f,ref:t,__scopeCheckbox:s}),x&&n.jsx(xH,{__scopeCheckbox:s})]})})});zk.displayName=Ky;var fH="CheckboxIndicator",pH=p.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:r,...i}=e,a=Bk(fH,s);return n.jsx(Dn,{present:r||tc(a.checked)||a.checked===!0,children:n.jsx(ot.span,{"data-state":vH(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});pH.displayName=fH;var gH="CheckboxBubbleInput",xH=p.forwardRef(({__scopeCheckbox:e,...t},s)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:u,name:d,value:m,form:f,bubbleInput:x,setBubbleInput:v}=Bk(gH,e),y=Ct(s,v),w=My(a),S=xy(r);p.useEffect(()=>{const _=x;if(!_)return;const j=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(j,"checked").set,A=!i.current;if(w!==a&&E){const R=new Event("click",{bubbles:A});_.indeterminate=tc(a),E.call(_,tc(a)?!1:a),_.dispatchEvent(R)}},[x,w,a,i]);const C=p.useRef(tc(a)?!1:a);return n.jsx(ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??C.current,required:l,disabled:u,name:d,value:m,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xH.displayName=gH;function Wwe(e){return typeof e=="function"}function tc(e){return e==="indeterminate"}function vH(e){return tc(e)?"indeterminate":e?"checked":"unchecked"}const Ui=p.forwardRef(({className:e,...t},s)=>n.jsx(zk,{ref:s,className:J("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(pH,{className:J("flex items-center justify-center text-current"),children:n.jsx(Pt,{className:"h-3 w-3"})})}));Ui.displayName=zk.displayName;const wM={Brain:Bi,Scale:rh,Zap:vi,Sparkles:Qt},qm={spec:{label:"agentProfile.phases.spec.label",description:"agentProfile.phases.spec.description"},planning:{label:"agentProfile.phases.planning.label",description:"agentProfile.phases.planning.description"},coding:{label:"agentProfile.phases.coding.label",description:"agentProfile.phases.coding.description"},qa:{label:"agentProfile.phases.qa.label",description:"agentProfile.phases.qa.description"}};function Kwe({profileId:e,model:t,thinkingLevel:s,phaseModels:r,phaseThinking:i,onProfileChange:a,onModelChange:o,onThinkingLevelChange:l,onPhaseModelsChange:u,onPhaseThinkingChange:d,disabled:m}){const{t:f}=Re("settings"),[x,v]=p.useState(!1),y=e==="custom",w=r||oa,S=i||la,C=A=>{if(A==="custom")a("custom",t||"sonnet",s||"medium");else{const R=ar.find(D=>D.id===A);R&&(a(R.id,R.model,R.thinkingLevel),u&&R.phaseModels&&u(R.phaseModels),d&&R.phaseThinking&&d(R.phaseThinking))}},_=(A,R)=>{u&&u({...w,[A]:R})},j=(A,R)=>{d&&d({...S,[A]:R})},E=(()=>{if(y)return{icon:Vv,label:f("agentProfile.customConfiguration"),description:f("agentProfile.customDescription")};const A=ar.find(R=>R.id===e);return A?{icon:wM[A.icon||"Scale"]||rh,label:A.name,description:A.description}:{icon:Qt,label:"Auto (Optimized)",description:"Uses Opus across all phases with optimized thinking levels"}})();return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"agent-profile",className:"text-sm font-medium text-foreground",children:f("agentProfile.label")}),n.jsxs(_t,{value:e,onValueChange:C,disabled:m,children:[n.jsx(yt,{id:"agent-profile",className:"h-10",children:n.jsx(Nt,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(E.icon,{className:"h-4 w-4"}),n.jsx("span",{children:E.label})]})})}),n.jsxs(wt,{children:[ar.map(A=>{const R=wM[A.icon||"Scale"]||rh,D=ca.find(M=>M.value===A.model)?.label;return n.jsx(et,{value:A.id,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(R,{className:"h-4 w-4 shrink-0"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:A.name}),n.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",D," + ",A.thinkingLevel,")"]})]})]})},A.id)}),n.jsx(et,{value:"custom",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vv,{className:"h-4 w-4 shrink-0"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:f("agentProfile.custom")}),n.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",f("agentProfile.customDescription"),")"]})]})]})})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:E.description})]}),!y&&n.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>v(!x),className:J("flex w-full items-center justify-between p-4 text-left","hover:bg-muted/50 transition-colors",!m&&"cursor-pointer"),disabled:m,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-sm text-foreground",children:f("agentProfile.phaseConfiguration")}),!x&&n.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(fl,{className:"h-3 w-3"}),n.jsx("span",{children:f("agentProfile.clickToCustomize")})]})]}),x?n.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),!x&&n.jsx("div",{className:"px-4 pb-4 -mt-1",children:n.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.keys(qm).map(A=>{const R=ca.find(D=>D.value===w[A])?.label?.replace("Claude ","")||w[A];return n.jsxs("div",{className:"flex items-center justify-between rounded bg-background/50 px-2 py-1",children:[n.jsxs("span",{className:"text-muted-foreground",children:[f(qm[A].label),":"]}),n.jsx("span",{className:"font-medium",children:R})]},A)})})}),x&&n.jsx("div",{className:"px-4 pb-4 space-y-4 border-t border-border pt-4",children:Object.keys(qm).map(A=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-xs font-medium text-foreground",children:f(qm[A].label)}),n.jsx("span",{className:"text-[10px] text-muted-foreground",children:f(qm[A].description)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-[10px] text-muted-foreground",children:f("agentProfile.model")}),n.jsxs(_t,{value:w[A],onValueChange:R=>_(A,R),disabled:m,children:[n.jsx(yt,{className:"h-8 text-xs",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ca.map(R=>n.jsx(et,{value:R.value,children:R.label},R.value))})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-[10px] text-muted-foreground",children:f("agentProfile.thinking")}),n.jsxs(_t,{value:S[A],onValueChange:R=>j(A,R),disabled:m,children:[n.jsx(yt,{className:"h-8 text-xs",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ld.map(R=>n.jsx(et,{value:R.value,children:R.label},R.value))})]})]})]})]},A))})]}),y&&n.jsxs("div",{className:"space-y-4 rounded-lg border border-border bg-muted/30 p-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"custom-model",className:"text-xs font-medium text-muted-foreground",children:f("agentProfile.model")}),n.jsxs(_t,{value:t,onValueChange:A=>o(A),disabled:m,children:[n.jsx(yt,{id:"custom-model",className:"h-9",children:n.jsx(Nt,{placeholder:f("agentProfile.selectModel")})}),n.jsx(wt,{children:ca.map(A=>n.jsx(et,{value:A.value,children:A.label},A.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"custom-thinking",className:"text-xs font-medium text-muted-foreground",children:f("agentProfile.thinking")}),n.jsxs(_t,{value:s,onValueChange:A=>l(A),disabled:m,children:[n.jsx(yt,{id:"custom-thinking",className:"h-9",children:n.jsx(Nt,{placeholder:f("agentProfile.selectThinkingLevel")})}),n.jsx(wt,{children:ld.map(A=>n.jsx(et,{value:A.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:A.label}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["- ",A.description]})]})},A.value))})]})]})]})]})}const Ywe=["feature","bug_fix","refactoring","documentation","security"],Xwe=["low","medium","high","urgent"],Zwe=["trivial","small","medium","large","complex"],Qwe=["low","medium","high","critical"];function Jwe({category:e,priority:t,complexity:s,impact:r,onCategoryChange:i,onPriorityChange:a,onComplexityChange:o,onImpactChange:l,disabled:u=!1,idPrefix:d=""}){const{t:m}=Re("tasks"),f=d?`${d}-`:"";return n.jsxs("div",{className:"space-y-4 p-4 rounded-lg border border-border bg-muted/30",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:`${f}category`,className:"text-xs font-medium text-muted-foreground",children:m("form.classification.category")}),n.jsxs(_t,{value:e,onValueChange:x=>i(x),disabled:u,children:[n.jsx(yt,{id:`${f}category`,className:"h-9",children:n.jsx(Nt,{placeholder:m("form.classification.selectCategory")})}),n.jsx(wt,{children:Ywe.map(x=>n.jsx(et,{value:x,children:m(`form.classification.values.category.${x}`)},x))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:`${f}priority`,className:"text-xs font-medium text-muted-foreground",children:m("form.classification.priority")}),n.jsxs(_t,{value:t,onValueChange:x=>a(x),disabled:u,children:[n.jsx(yt,{id:`${f}priority`,className:"h-9",children:n.jsx(Nt,{placeholder:m("form.classification.selectPriority")})}),n.jsx(wt,{children:Xwe.map(x=>n.jsx(et,{value:x,children:m(`form.classification.values.priority.${x}`)},x))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:`${f}complexity`,className:"text-xs font-medium text-muted-foreground",children:m("form.classification.complexity")}),n.jsxs(_t,{value:s,onValueChange:x=>o(x),disabled:u,children:[n.jsx(yt,{id:`${f}complexity`,className:"h-9",children:n.jsx(Nt,{placeholder:m("form.classification.selectComplexity")})}),n.jsx(wt,{children:Zwe.map(x=>n.jsx(et,{value:x,children:m(`form.classification.values.complexity.${x}`)},x))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:`${f}impact`,className:"text-xs font-medium text-muted-foreground",children:m("form.classification.impact")}),n.jsxs(_t,{value:r,onValueChange:x=>l(x),disabled:u,children:[n.jsx(yt,{id:`${f}impact`,className:"h-9",children:n.jsx(Nt,{placeholder:m("form.classification.selectImpact")})}),n.jsx(wt,{children:Qwe.map(x=>n.jsx(et,{value:x,children:m(`form.classification.values.impact.${x}`)},x))})]})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:m("form.classification.helpText")})]})}function EN(){return`img-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}function yb(e){return Q9.includes(e)}async function wb(e){return new Promise((t,s)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=s,r.readAsDataURL(e)})}async function TN(e,t=200){return new Promise(s=>{const r=new Image;r.onload=()=>{const i=document.createElement("canvas");let a=r.width,o=r.height;a>o?a>t&&(o=o*t/a,a=t):o>t&&(a=a*t/o,o=t),i.width=a,i.height=o,i.getContext("2d")?.drawImage(r,0,0,a,o),s(i.toDataURL("image/jpeg",.8))},r.onerror=()=>s(e),r.src=e})}function jb(e,t){if(!t.includes(e))return e;const s=e.lastIndexOf("."),r=s!==-1?e.substring(0,s):e,i=s!==-1?e.substring(s):"",a=Date.now();return`${r}-${a}${i}`}const e0e={maxImagesReached:`Maximum of ${Pu} images allowed`,invalidImageType:`Invalid image type. Allowed: ${Mv}`,processPasteFailed:"Failed to process pasted image",processDropFailed:"Failed to process dropped image"};function t0e({images:e,onImagesChange:t,disabled:s=!1,onError:r,errorMessages:i={},onFileReferenceDrop:a}){const[o,l]=p.useState(!1),[u,d]=p.useState(!1),m=p.useRef(null),f=p.useMemo(()=>({...e0e,...i}),[i]);p.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]);const x=Pu-e.length,v=x>0,y=p.useCallback(async(E,A={})=>{if(s)return;if(x<=0){r?.(f.maxImagesReached);return}r?.(null);const R=[],D=e.map(P=>P.filename),M=E.slice(0,x);for(const P of M){let O=null;if(P instanceof File?O=P:"getAsFile"in P&&(O=P.getAsFile()),!!O){if(!yb(O.type)){r?.(f.invalidImageType);continue}try{const F=await wb(O),$=await TN(F);let z;if(A.isFromPaste||!O.name||O.name==="image.png"){const I=O.type.split("/")[1]||"png";z=`screenshot-${Date.now()}.${I}`}else z=O.name;const H=jb(z,[...D,...R.map(I=>I.filename)]);R.push({id:EN(),filename:H,mimeType:O.type,size:O.size,data:F.split(",")[1],thumbnail:$})}catch(F){console.error("Image processing error:",F),r?.(A.isFromPaste?f.processPasteFailed:f.processDropFailed)}}}R.length>0&&(t([...e,...R]),m.current&&clearTimeout(m.current),d(!0),m.current=setTimeout(()=>d(!1),2e3))},[e,t,s,x,r,f]),w=p.useCallback(async E=>{const A=E.clipboardData?.items;if(!A)return;const R=[];for(let D=0;D<A.length;D++){const M=A[D];M.type.startsWith("image/")&&R.push(M)}R.length!==0&&(E.preventDefault(),await y(R,{isFromPaste:!0}))},[y]),S=p.useCallback(E=>{E.preventDefault(),E.stopPropagation(),l(!0)},[]),C=p.useCallback(E=>{E.preventDefault(),E.stopPropagation(),l(!1)},[]),_=p.useCallback(E=>{const A=E.getData("application/json");if(!A)return null;try{const R=JSON.parse(A);if(R.type==="file-reference"&&typeof R.path=="string"&&R.path.length>0&&typeof R.name=="string"&&R.name.length>0)return{type:"file-reference",path:R.path,name:R.name,isDirectory:typeof R.isDirectory=="boolean"?R.isDirectory:!1}}catch{}return null},[]),j=p.useCallback(async E=>{if(s){l(!1);return}l(!1);const A=_(E.dataTransfer);if(A){E.preventDefault(),E.stopPropagation();const M=E.dataTransfer.getData("text/plain")||`@${A.name}`;a&&a(M,A);return}const R=E.dataTransfer?.files,D=[];if(R&&R.length>0)for(let M=0;M<R.length;M++){const P=R[M];P.type.startsWith("image/")&&D.push(P)}D.length!==0&&(E.preventDefault(),E.stopPropagation(),await y(D,{isFromPaste:!1}))},[s,y,_,a]),T=p.useCallback(E=>{t(e.filter(A=>A.id!==E))},[e,t]);return{isDragOver:o,pasteSuccess:u,handlePaste:w,handleDragOver:S,handleDragLeave:C,handleDrop:j,removeImage:T,canAddMore:v,remainingSlots:x}}function bH({description:e,onDescriptionChange:t,descriptionPlaceholder:s,descriptionOverlay:r,descriptionRef:i,title:a,onTitleChange:o,profileId:l,model:u,thinkingLevel:d,phaseModels:m,phaseThinking:f,onProfileChange:x,onModelChange:v,onThinkingLevelChange:y,onPhaseModelsChange:w,onPhaseThinkingChange:S,category:C,priority:_,complexity:j,impact:T,onCategoryChange:E,onPriorityChange:A,onComplexityChange:R,onImpactChange:D,showClassification:M,onShowClassificationChange:P,images:O,onImagesChange:F,requireReviewBeforeCoding:$,onRequireReviewChange:z,disabled:H=!1,error:I,onError:V,idPrefix:B="",children:K,onFileReferenceDrop:L}){const{t:G}=Re(["tasks","common"]),Y=p.useRef(null),q=i||Y,Q=B?`${B}-`:"",{isDragOver:se,pasteSuccess:te,handlePaste:ee,handleDragOver:pe,handleDragLeave:fe,handleDrop:re,removeImage:Z}=t0e({images:O,onImagesChange:F,disabled:H,onError:V,errorMessages:{maxImagesReached:G("tasks:form.errors.maxImagesReached"),invalidImageType:G("tasks:form.errors.invalidImageType"),processPasteFailed:G("tasks:form.errors.processPasteFailed"),processDropFailed:G("tasks:form.errors.processDropFailed")},onFileReferenceDrop:L});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:`${Q}description`,className:"text-sm font-medium text-foreground",children:[G("tasks:form.description")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs("div",{className:"relative",children:[r,n.jsx(go,{ref:q,id:`${Q}description`,placeholder:s||G("tasks:form.descriptionPlaceholder"),value:e,onChange:ie=>t(ie.target.value),onPaste:ee,onDragOver:pe,onDragLeave:fe,onDrop:re,rows:6,disabled:H,"aria-required":"true","aria-describedby":`${Q}description-help`,className:J("resize-y min-h-[150px] max-h-[400px] relative",r&&"bg-transparent",se&&!H&&"border-primary bg-primary/5 ring-2 ring-primary/20"),style:r?{caretColor:"auto"}:void 0})]}),n.jsx("p",{id:`${Q}description-help`,className:"text-xs text-muted-foreground",children:G("images.pasteHint",{shortcut:navigator.platform.includes("Mac")?"V":"Ctrl+V"})}),O.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:O.map(ie=>n.jsxs("div",{className:"relative group rounded-md border border-border overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary/50 transition-all",style:{width:"72px",height:"72px"},title:ie.filename,children:[ie.thumbnail?n.jsx("img",{src:ie.thumbnail,alt:ie.filename,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:n.jsx(ec,{className:"h-6 w-6 text-muted-foreground"})}),!H&&n.jsx("button",{type:"button",className:"absolute top-0.5 right-0.5 h-5 w-5 flex items-center justify-center rounded-full bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity",onClick:ce=>{ce.stopPropagation(),Z(ie.id)},"aria-label":G("images.removeImageAriaLabel",{filename:ie.filename}),children:n.jsx(Ss,{className:"h-3 w-3"})})]},ie.id))}),K]}),te&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-success animate-in fade-in slide-in-from-top-1 duration-200",children:[n.jsx(ec,{className:"h-4 w-4"}),G("tasks:form.imageAddedSuccess")]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:`${Q}title`,className:"text-sm font-medium text-foreground",children:[G("tasks:form.taskTitle")," ",n.jsxs("span",{className:"text-muted-foreground font-normal",children:["(",G("common:labels.optional"),")"]})]}),n.jsx(Oe,{id:`${Q}title`,placeholder:G("tasks:form.titlePlaceholder"),value:a,onChange:ie=>o(ie.target.value),disabled:H}),n.jsx("p",{className:"text-xs text-muted-foreground",children:G("tasks:form.titleHelpText")})]}),n.jsx(Kwe,{profileId:l,model:u,thinkingLevel:d,phaseModels:m,phaseThinking:f,onProfileChange:x,onModelChange:v,onThinkingLevelChange:y,onPhaseModelsChange:w,onPhaseThinkingChange:S,disabled:H}),n.jsxs("button",{type:"button",onClick:()=>P(!M),className:J("flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","w-full justify-between py-2 px-3 rounded-md hover:bg-muted/50"),disabled:H,"aria-expanded":M,"aria-controls":`${Q}classification-section`,children:[n.jsx("span",{children:G("tasks:form.classificationOptional")}),M?n.jsx(Hi,{className:"h-4 w-4"}):n.jsx(bt,{className:"h-4 w-4"})]}),M&&n.jsx("div",{id:`${Q}classification-section`,children:n.jsx(Jwe,{category:C,priority:_,complexity:j,impact:T,onCategoryChange:E,onPriorityChange:A,onComplexityChange:R,onImpactChange:D,disabled:H,idPrefix:B})}),n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-border bg-muted/30",children:[n.jsx(Ui,{id:`${Q}require-review`,checked:$,onCheckedChange:ie=>z(ie===!0),disabled:H,className:"mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx(le,{htmlFor:`${Q}require-review`,className:"text-sm font-medium text-foreground cursor-pointer",children:G("tasks:form.requireReviewLabel")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:G("tasks:form.requireReviewDescription")})]})]}),I&&n.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",role:"alert",children:[n.jsx(Ss,{className:"h-4 w-4 mt-0.5 shrink-0"}),n.jsx("span",{children:I})]})]})}function s0e({task:e,open:t,onOpenChange:s,onSaved:r}){const{t:i}=Re(["tasks","common"]),{settings:a}=cs(),o=ar.find(te=>te.id===a.selectedAgentProfile)||ar.find(te=>te.id==="auto"),[l,u]=p.useState(e.title),[d,m]=p.useState(e.description),[f,x]=p.useState(!1),[v,y]=p.useState(null),[w,S]=p.useState(!1),[C,_]=p.useState(e.metadata?.category||""),[j,T]=p.useState(e.metadata?.priority||""),[E,A]=p.useState(e.metadata?.complexity||""),[R,D]=p.useState(e.metadata?.impact||""),[M,P]=p.useState(()=>{if(e.metadata?.isAutoProfile)return"auto";const te=e.metadata?.model,ee=e.metadata?.thinkingLevel;return te&&ee?ar.find(fe=>fe.model===te&&fe.thinkingLevel===ee&&!fe.isAutoProfile)?.id||"custom":a.selectedAgentProfile||"auto"}),[O,F]=p.useState(e.metadata?.model||o.model),[$,z]=p.useState(e.metadata?.thinkingLevel||o.thinkingLevel),[H,I]=p.useState(e.metadata?.phaseModels||o.phaseModels||oa),[V,B]=p.useState(e.metadata?.phaseThinking||o.phaseThinking||la),[K,L]=p.useState(e.metadata?.attachedImages||[]),[G,Y]=p.useState(e.metadata?.requireReviewBeforeCoding??!1);p.useEffect(()=>{if(t){u(e.title),m(e.description),_(e.metadata?.category||""),T(e.metadata?.priority||""),A(e.metadata?.complexity||""),D(e.metadata?.impact||"");const te=e.metadata?.model,ee=e.metadata?.thinkingLevel;if(e.metadata?.isAutoProfile)P("auto"),F(te||o.model),z(ee||o.thinkingLevel),I(e.metadata?.phaseModels||oa),B(e.metadata?.phaseThinking||la);else if(te&&ee){const fe=ar.find(re=>re.model===te&&re.thinkingLevel===ee&&!re.isAutoProfile);P(fe?.id||"custom"),F(te),z(ee),I(e.metadata?.phaseModels||oa),B(e.metadata?.phaseThinking||la)}else P(a.selectedAgentProfile||"auto"),F(o.model),z(o.thinkingLevel),I(o.phaseModels||oa),B(o.phaseThinking||la);L(e.metadata?.attachedImages||[]),Y(e.metadata?.requireReviewBeforeCoding??!1),y(null),e.metadata?.category||e.metadata?.priority||e.metadata?.complexity||e.metadata?.impact?S(!0):S(!1)}},[t,e,a.selectedAgentProfile,o.model,o.thinkingLevel,o.phaseModels,o.phaseThinking]);const q=p.useCallback((te,ee)=>{m(pe=>{const fe=pe.endsWith(" ")||pe===""?"":" ";return pe+fe+te+" "})},[]),Q=async()=>{if(!d.trim()){y(i("tasks:form.errors.descriptionRequired"));return}const te=l.trim(),ee=d.trim();if(!(te!==e.title||ee!==e.description||C!==(e.metadata?.category||"")||j!==(e.metadata?.priority||"")||E!==(e.metadata?.complexity||"")||R!==(e.metadata?.impact||"")||O!==(e.metadata?.model||"")||$!==(e.metadata?.thinkingLevel||"")||G!==(e.metadata?.requireReviewBeforeCoding??!1)||JSON.stringify(K)!==JSON.stringify(e.metadata?.attachedImages||[])||JSON.stringify(H)!==JSON.stringify(e.metadata?.phaseModels||oa)||JSON.stringify(V)!==JSON.stringify(e.metadata?.phaseThinking||la))){s(!1);return}x(!0),y(null);const fe={};C&&(fe.category=C),j&&(fe.priority=j),E&&(fe.complexity=E),R&&(fe.impact=R),O&&(fe.model=O),$&&(fe.thinkingLevel=$),H&&V&&(fe.isAutoProfile=M==="auto",fe.phaseModels=H,fe.phaseThinking=V),fe.attachedImages=K.length>0?K:[],fe.requireReviewBeforeCoding=G,await pwe(e.id,{title:te,description:ee,metadata:fe})?(s(!1),r?.()):y(i("tasks:edit.errors.updateFailed")),x(!1)},se=d.trim().length>0;return n.jsx(uH,{open:t,onOpenChange:s,title:i("tasks:edit.title"),description:i("tasks:edit.description"),disabled:f,footer:n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx(W,{variant:"outline",onClick:()=>s(!1),disabled:f,children:i("common:buttons.cancel")}),n.jsx(W,{onClick:Q,disabled:f||!se,children:f?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),i("common:buttons.saving")]}):i("tasks:edit.saveChanges")})]}),children:n.jsx(bH,{description:d,onDescriptionChange:m,title:l,onTitleChange:u,profileId:M,model:O,thinkingLevel:$,phaseModels:H,phaseThinking:V,onProfileChange:(te,ee,pe)=>{P(te),F(ee),z(pe)},onModelChange:F,onThinkingLevelChange:z,onPhaseModelsChange:I,onPhaseThinkingChange:B,category:C,priority:j,complexity:E,impact:R,onCategoryChange:_,onPriorityChange:T,onComplexityChange:A,onImpactChange:D,showClassification:w,onShowClassificationChange:S,images:K,onImagesChange:L,requireReviewBeforeCoding:G,onRequireReviewChange:Y,disabled:f,error:v,onError:y,onFileReferenceDrop:q,idPrefix:"edit"})})}function jM(e){if(!e.subtasks||!Array.isArray(e.subtasks))return console.warn("[validateTaskSubtasks] Task has no subtasks array:",e.id),!1;if(e.subtasks.length===0)return console.warn("[validateTaskSubtasks] Task has empty subtasks array:",e.id),!1;for(let t=0;t<e.subtasks.length;t++){const s=e.subtasks[t];if(!s||typeof s!="object")return console.warn(`[validateTaskSubtasks] Invalid subtask at index ${t}:`,s),!1;if(!s.description||typeof s.description!="string"||s.description.trim()==="")return console.warn(`[validateTaskSubtasks] Subtask at index ${t} missing description:`,s),!1;if(!s.id||typeof s.id!="string")return console.warn(`[validateTaskSubtasks] Subtask at index ${t} missing id:`,s),!1}return!0}function n0e({task:e}){const[t,s]=p.useState(""),[r,i]=p.useState([]),[a,o]=p.useState(!1),[l,u]=p.useState("overview"),[d,m]=p.useState(!1),[f,x]=p.useState(!1),[v,y]=p.useState(!1),[w,S]=p.useState(!1),[C,_]=p.useState(!1),[j,T]=p.useState(!1),[E,A]=p.useState(null),[R,D]=p.useState(!1),[M,P]=p.useState(null),[O,F]=p.useState(null),[$,z]=p.useState(!1),[H,I]=p.useState(!1),[V,B]=p.useState(!1),[K,L]=p.useState(!1),[G,Y]=p.useState(null),[q,Q]=p.useState(!1),[se,te]=p.useState(!1),[ee,pe]=p.useState(null),[fe,re]=p.useState(void 0),[Z,ie]=p.useState(void 0),[ce,He]=p.useState(null),[tt,he]=p.useState(!1),[Ne,Ve]=p.useState(new Set),[qe,Ze]=p.useState(!1),Ae=p.useRef(null),De=p.useRef(null),[je,Ce]=p.useState(null),[It,be]=p.useState(!1),[ve,Me]=p.useState(!1),[nt,jt]=p.useState(!1),[ps,tn]=p.useState(!1),Lt=Ot(Ie=>Ie.getSelectedProject()),ds=e.status==="in_progress",gs=e.status==="in_progress"||e.status==="ai_review",Ft=e.status==="human_review",Be=e.executionProgress?.phase,st=Be&&Be!=="idle"&&Be!=="complete"&&Be!=="failed",us=G8(e),ue=ywe(e);p.useEffect(()=>{let Ie;if(Be==="complete"||Be==="failed"){x(!1),S(!0);return}return gs&&!w?Ie=setTimeout(()=>{$8(e.id).then(ut=>{const gt=e.executionProgress?.phase;x(gt==="complete"||gt==="failed"?!1:!ut),S(!0)})},2e3):gs||(x(!1),S(!1)),()=>{Ie&&clearTimeout(Ie)}},[e.id,gs,w,Be,e.executionProgress?.phase]);const xs=Ie=>{const Je=Ie.target,ut=Je.scrollHeight-Je.scrollTop-Je.clientHeight<100;m(!ut)};p.useEffect(()=>{l==="logs"&&Ae.current&&!d&&Ae.current.scrollIntoView({behavior:"smooth"})},[e.logs,l,d]),p.useEffect(()=>{l==="logs"&&m(!1)},[l]),p.useEffect(()=>{i([])},[e.id]),p.useEffect(()=>{Ft?(z(!0),Y(null),Promise.all([window.electronAPI.getWorktreeStatus(e.id),window.electronAPI.getWorktreeDiff(e.id)]).then(([Ie,Je])=>{Ie.success&&Ie.data&&P(Ie.data),Je.success&&Je.data&&F(Je.data)}).catch(Ie=>{console.error("Failed to load worktree info:",Ie)}).finally(()=>{z(!1)})):(P(null),F(null))},[e.id,Ft]),p.useEffect(()=>{if(!Lt)return;(async()=>{he(!0);try{const ut=await window.electronAPI.getTaskLogs(Lt.id,e.specId);if(ut.success&&ut.data){He(ut.data);const gt=["planning","coding","validation"].find(Cr=>ut.data?.phases[Cr]?.status==="active");gt&&Ve(new Set([gt]))}}catch(ut){console.error("Failed to load task logs:",ut)}finally{he(!1)}})(),window.electronAPI.watchTaskLogs(Lt.id,e.specId);const Je=window.electronAPI.onTaskLogsChanged((ut,gt)=>{if(ut===e.specId){He(gt);const Cr=["planning","coding","validation"].find(Vn=>gt.phases[Vn]?.status==="active");Cr&&Ve(Vn=>{const ri=new Set(Vn);return ri.add(Cr),ri})}});return()=>{Je(),window.electronAPI.unwatchTaskLogs(e.specId)}},[Lt,e.specId]);const kt=p.useCallback(Ie=>{Ve(Je=>{const ut=new Set(Je);return ut.has(Ie)?ut.delete(Ie):ut.add(Ie),ut})},[]),me=p.useCallback(Ie=>{i(Je=>[...Je,Ie])},[]),ze=p.useCallback(Ie=>{i(Je=>[...Je,...Ie])},[]),ct=p.useCallback(Ie=>{i(Je=>Je.filter(ut=>ut.id!==Ie))},[]),Rt=p.useCallback(()=>{i([])},[]),Jt=p.useRef(null);p.useEffect(()=>{Jt.current!==e.id&&(Ce(null),Jt.current=null)},[e.id]);const vs=p.useCallback(async()=>{be(!0),Y(null);try{const[Ie,Je]=await Promise.allSettled([window.electronAPI.mergeWorktreePreview(e.id),window.electronAPI.getWorktreeStatus(e.id)]),ut=[];if(Ie.status==="fulfilled"){const gt=Ie.value;gt.success&&gt.data?.preview?Ce(gt.data.preview):!gt.success&&gt.error&&ut.push(`Merge preview: ${gt.error}`)}else console.error("[useTaskDetail] Failed to load merge preview:",Ie.reason),ut.push("Failed to load merge preview");if(Je.status==="fulfilled"){const gt=Je.value;gt.success&&gt.data?P(gt.data):!gt.success&&gt.error&&ut.push(`Worktree status: ${gt.error}`)}else console.error("[useTaskDetail] Failed to load worktree status:",Je.reason),ut.push("Failed to load worktree status");ut.length>0&&Y(ut.join("; "))}catch(Ie){console.error("[useTaskDetail] Unexpected error in loadMergePreview:",Ie),Y("An unexpected error occurred while loading workspace information")}finally{Jt.current=e.id,be(!1)}},[e.id]),Hs=p.useCallback(async()=>{pe(null),re(void 0),ie(void 0),Ce(null),Jt.current=null,Y(null),z(!0);try{const[Ie,Je]=await Promise.all([window.electronAPI.getWorktreeStatus(e.id),window.electronAPI.getWorktreeDiff(e.id)]);Ie.success&&Ie.data&&P(Ie.data),Je.success&&Je.data&&F(Je.data),Lt&&await po(Lt.id)}catch(Ie){console.error("Failed to reload worktree info:",Ie)}finally{z(!1)}},[e.id,Lt]),Ge=p.useCallback(async()=>{if(!Lt)return console.error("[reloadPlanForIncompleteTask] No selected project"),!1;if(!us)return!0;if(jM(e))return console.log("[reloadPlanForIncompleteTask] Subtasks are valid, no reload needed"),!0;console.warn("[reloadPlanForIncompleteTask] Task has invalid subtasks, reloading plan:",{taskId:e.id,specId:e.specId,subtaskCount:e.subtasks?.length||0}),Ze(!0);try{const Ie=await window.electronAPI.getTasks(Lt.id);if(!Ie.success||!Ie.data)return console.error("[reloadPlanForIncompleteTask] Failed to reload tasks:",Ie.error),!1;const Je=Ie.data.find(gt=>gt.id===e.id||gt.specId===e.specId);return Je?jM(Je)?(console.log("[reloadPlanForIncompleteTask] Successfully reloaded plan with valid subtasks:",{taskId:e.id,subtaskCount:Je.subtasks?.length??0}),Ks.getState().updateTask(e.id,{subtasks:Je.subtasks,title:Je.title,description:Je.description,metadata:Je.metadata,updatedAt:new Date}),!0):(console.error("[reloadPlanForIncompleteTask] Reloaded task still has invalid subtasks"),!1):(console.error("[reloadPlanForIncompleteTask] Task not found in reloaded tasks"),!1)}catch(Ie){return console.error("[reloadPlanForIncompleteTask] Error reloading plan:",Ie),!1}finally{Ze(!1)}},[Lt,e,us]);return{feedback:t,feedbackImages:r,isSubmitting:a,activeTab:l,isUserScrolledUp:d,isStuck:f,isRecovering:v,hasCheckedRunning:w,showDeleteDialog:C,isDeleting:j,deleteError:E,isEditDialogOpen:R,worktreeStatus:M,worktreeDiff:O,isLoadingWorktree:$,isMerging:H,isDiscarding:V,showDiscardDialog:K,workspaceError:G,showDiffDialog:q,stageOnly:se,stagedSuccess:ee,stagedProjectPath:fe,suggestedCommitMessage:Z,phaseLogs:ce,isLoadingLogs:tt,expandedPhases:Ne,logsEndRef:Ae,logsContainerRef:De,selectedProject:Lt,isRunning:ds,needsReview:Ft,executionPhase:Be,hasActiveExecution:st,isIncomplete:us,taskProgress:ue,mergePreview:je,isLoadingPreview:It,showConflictDialog:ve,showPRDialog:nt,isCreatingPR:ps,isLoadingPlan:qe,setFeedback:s,setFeedbackImages:i,setIsSubmitting:o,setActiveTab:u,setIsUserScrolledUp:m,setIsStuck:x,setIsRecovering:y,setHasCheckedRunning:S,setShowDeleteDialog:_,setIsDeleting:T,setDeleteError:A,setIsEditDialogOpen:D,setWorktreeStatus:P,setWorktreeDiff:F,setIsLoadingWorktree:z,setIsMerging:I,setIsDiscarding:B,setShowDiscardDialog:L,setWorkspaceError:Y,setShowDiffDialog:Q,setStageOnly:te,setStagedSuccess:pe,setStagedProjectPath:re,setSuggestedCommitMessage:ie,setPhaseLogs:He,setIsLoadingLogs:he,setExpandedPhases:Ve,setMergePreview:Ce,setIsLoadingPreview:be,setShowConflictDialog:Me,setShowPRDialog:jt,setIsCreatingPR:tn,handleLogsScroll:xs,togglePhase:kt,loadMergePreview:vs,addFeedbackImage:me,addFeedbackImages:ze,removeFeedbackImage:ct,clearFeedbackImages:Rt,handleReviewAgain:Hs,reloadPlanForIncompleteTask:Ge}}function r0e(e,t){const s={};return(e[e.length-1]===""?[...e,""]:e).join((s.padRight?" ":"")+","+(s.padLeft===!1?"":" ")).trim()}const i0e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,a0e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,o0e={};function SM(e,t){return(o0e.jsx?a0e:i0e).test(e)}const l0e=/[ \t\n\f\r]/g;function c0e(e){return typeof e=="object"?e.type==="text"?_M(e.value):!1:_M(e)}function _M(e){return e.replace(l0e,"")===""}class Wp{constructor(t,s,r){this.normal=s,this.property=t,r&&(this.space=r)}}Wp.prototype.normal={};Wp.prototype.property={};Wp.prototype.space=void 0;function yH(e,t){const s={},r={};for(const i of e)Object.assign(s,i.property),Object.assign(r,i.normal);return new Wp(s,r,t)}function PN(e){return e.toLowerCase()}class bi{constructor(t,s){this.attribute=s,this.property=t}}bi.prototype.attribute="";bi.prototype.booleanish=!1;bi.prototype.boolean=!1;bi.prototype.commaOrSpaceSeparated=!1;bi.prototype.commaSeparated=!1;bi.prototype.defined=!1;bi.prototype.mustUseProperty=!1;bi.prototype.number=!1;bi.prototype.overloadedBoolean=!1;bi.prototype.property="";bi.prototype.spaceSeparated=!1;bi.prototype.space=void 0;let d0e=0;const Ut=Ad(),kn=Ad(),RN=Ad(),$e=Ad(),zs=Ad(),Yu=Ad(),Ei=Ad();function Ad(){return 2**++d0e}const DN=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ut,booleanish:kn,commaOrSpaceSeparated:Ei,commaSeparated:Yu,number:$e,overloadedBoolean:RN,spaceSeparated:zs},Symbol.toStringTag,{value:"Module"})),kS=Object.keys(DN);class $k extends bi{constructor(t,s,r,i){let a=-1;if(super(t,s),NM(this,"space",i),typeof r=="number")for(;++a<kS.length;){const o=kS[a];NM(this,kS[a],(r&DN[o])===DN[o])}}}$k.prototype.defined=!0;function NM(e,t,s){s&&(e[t]=s)}function Vh(e){const t={},s={};for(const[r,i]of Object.entries(e.properties)){const a=new $k(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,s[PN(r)]=r,s[PN(a.attribute)]=r}return new Wp(t,s,e.space)}const wH=Vh({properties:{ariaActiveDescendant:null,ariaAtomic:kn,ariaAutoComplete:null,ariaBusy:kn,ariaChecked:kn,ariaColCount:$e,ariaColIndex:$e,ariaColSpan:$e,ariaControls:zs,ariaCurrent:null,ariaDescribedBy:zs,ariaDetails:null,ariaDisabled:kn,ariaDropEffect:zs,ariaErrorMessage:null,ariaExpanded:kn,ariaFlowTo:zs,ariaGrabbed:kn,ariaHasPopup:null,ariaHidden:kn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:zs,ariaLevel:$e,ariaLive:null,ariaModal:kn,ariaMultiLine:kn,ariaMultiSelectable:kn,ariaOrientation:null,ariaOwns:zs,ariaPlaceholder:null,ariaPosInSet:$e,ariaPressed:kn,ariaReadOnly:kn,ariaRelevant:null,ariaRequired:kn,ariaRoleDescription:zs,ariaRowCount:$e,ariaRowIndex:$e,ariaRowSpan:$e,ariaSelected:kn,ariaSetSize:$e,ariaSort:null,ariaValueMax:$e,ariaValueMin:$e,ariaValueNow:$e,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function jH(e,t){return t in e?e[t]:t}function SH(e,t){return jH(e,t.toLowerCase())}const u0e=Vh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Yu,acceptCharset:zs,accessKey:zs,action:null,allow:null,allowFullScreen:Ut,allowPaymentRequest:Ut,allowUserMedia:Ut,alt:null,as:null,async:Ut,autoCapitalize:null,autoComplete:zs,autoFocus:Ut,autoPlay:Ut,blocking:zs,capture:null,charSet:null,checked:Ut,cite:null,className:zs,cols:$e,colSpan:null,content:null,contentEditable:kn,controls:Ut,controlsList:zs,coords:$e|Yu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ut,defer:Ut,dir:null,dirName:null,disabled:Ut,download:RN,draggable:kn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ut,formTarget:null,headers:zs,height:$e,hidden:RN,high:$e,href:null,hrefLang:null,htmlFor:zs,httpEquiv:zs,id:null,imageSizes:null,imageSrcSet:null,inert:Ut,inputMode:null,integrity:null,is:null,isMap:Ut,itemId:null,itemProp:zs,itemRef:zs,itemScope:Ut,itemType:zs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ut,low:$e,manifest:null,max:null,maxLength:$e,media:null,method:null,min:null,minLength:$e,multiple:Ut,muted:Ut,name:null,nonce:null,noModule:Ut,noValidate:Ut,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ut,optimum:$e,pattern:null,ping:zs,placeholder:null,playsInline:Ut,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ut,referrerPolicy:null,rel:zs,required:Ut,reversed:Ut,rows:$e,rowSpan:$e,sandbox:zs,scope:null,scoped:Ut,seamless:Ut,selected:Ut,shadowRootClonable:Ut,shadowRootDelegatesFocus:Ut,shadowRootMode:null,shape:null,size:$e,sizes:null,slot:null,span:$e,spellCheck:kn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$e,step:null,style:null,tabIndex:$e,target:null,title:null,translate:null,type:null,typeMustMatch:Ut,useMap:null,value:kn,width:$e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:zs,axis:null,background:null,bgColor:null,border:$e,borderColor:null,bottomMargin:$e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ut,declare:Ut,event:null,face:null,frame:null,frameBorder:null,hSpace:$e,leftMargin:$e,link:null,longDesc:null,lowSrc:null,marginHeight:$e,marginWidth:$e,noResize:Ut,noHref:Ut,noShade:Ut,noWrap:Ut,object:null,profile:null,prompt:null,rev:null,rightMargin:$e,rules:null,scheme:null,scrolling:kn,standby:null,summary:null,text:null,topMargin:$e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ut,disableRemotePlayback:Ut,prefix:null,property:null,results:$e,security:null,unselectable:null},space:"html",transform:SH}),h0e=Vh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ei,accentHeight:$e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$e,amplitude:$e,arabicForm:null,ascent:$e,attributeName:null,attributeType:null,azimuth:$e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$e,by:null,calcMode:null,capHeight:$e,className:zs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$e,diffuseConstant:$e,direction:null,display:null,dur:null,divisor:$e,dominantBaseline:null,download:Ut,dx:null,dy:null,edgeMode:null,editable:null,elevation:$e,enableBackground:null,end:null,event:null,exponent:$e,externalResourcesRequired:null,fill:null,fillOpacity:$e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Yu,g2:Yu,glyphName:Yu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$e,horizOriginX:$e,horizOriginY:$e,id:null,ideographic:$e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$e,k:$e,k1:$e,k2:$e,k3:$e,k4:$e,kernelMatrix:Ei,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$e,overlineThickness:$e,paintOrder:null,panose1:null,path:null,pathLength:$e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:zs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$e,pointsAtY:$e,pointsAtZ:$e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ei,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ei,rev:Ei,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ei,requiredFeatures:Ei,requiredFonts:Ei,requiredFormats:Ei,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$e,specularExponent:$e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$e,strikethroughThickness:$e,string:null,stroke:null,strokeDashArray:Ei,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$e,strokeOpacity:$e,strokeWidth:null,style:null,surfaceScale:$e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ei,tabIndex:$e,tableValues:null,target:null,targetX:$e,targetY:$e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ei,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$e,underlineThickness:$e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$e,values:null,vAlphabetic:$e,vMathematical:$e,vectorEffect:null,vHanging:$e,vIdeographic:$e,version:null,vertAdvY:$e,vertOriginX:$e,vertOriginY:$e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:jH}),_H=Vh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),NH=Vh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:SH}),CH=Vh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),m0e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},f0e=/[A-Z]/g,CM=/-[a-z]/g,p0e=/^data[-\w.:]+$/i;function g0e(e,t){const s=PN(t);let r=t,i=bi;if(s in e.normal)return e.property[e.normal[s]];if(s.length>4&&s.slice(0,4)==="data"&&p0e.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(CM,v0e);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!CM.test(a)){let o=a.replace(f0e,x0e);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=$k}return new i(r,t)}function x0e(e){return"-"+e.toLowerCase()}function v0e(e){return e.charAt(1).toUpperCase()}const b0e=yH([wH,u0e,_H,NH,CH],"html"),Hk=yH([wH,h0e,_H,NH,CH],"svg");function y0e(e){return e.join(" ").trim()}var ju={},AS,kM;function w0e(){if(kM)return AS;kM=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,s=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,u=`
`,d="/",m="*",f="",x="comment",v="declaration";function y(S,C){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];C=C||{};var _=1,j=1;function T(z){var H=z.match(t);H&&(_+=H.length);var I=z.lastIndexOf(u);j=~I?z.length-I:j+z.length}function E(){var z={line:_,column:j};return function(H){return H.position=new A(z),M(),H}}function A(z){this.start=z,this.end={line:_,column:j},this.source=C.source}A.prototype.content=S;function R(z){var H=new Error(C.source+":"+_+":"+j+": "+z);if(H.reason=z,H.filename=C.source,H.line=_,H.column=j,H.source=S,!C.silent)throw H}function D(z){var H=z.exec(S);if(H){var I=H[0];return T(I),S=S.slice(I.length),H}}function M(){D(s)}function P(z){var H;for(z=z||[];H=O();)H!==!1&&z.push(H);return z}function O(){var z=E();if(!(d!=S.charAt(0)||m!=S.charAt(1))){for(var H=2;f!=S.charAt(H)&&(m!=S.charAt(H)||d!=S.charAt(H+1));)++H;if(H+=2,f===S.charAt(H-1))return R("End of comment missing");var I=S.slice(2,H-2);return j+=2,T(I),S=S.slice(H),j+=2,z({type:x,comment:I})}}function F(){var z=E(),H=D(r);if(H){if(O(),!D(i))return R("property missing ':'");var I=D(a),V=z({type:v,property:w(H[0].replace(e,f)),value:I?w(I[0].replace(e,f)):f});return D(o),V}}function $(){var z=[];P(z);for(var H;H=F();)H!==!1&&(z.push(H),P(z));return z}return M(),$()}function w(S){return S?S.replace(l,f):f}return AS=y,AS}var AM;function j0e(){if(AM)return ju;AM=1;var e=ju&&ju.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ju,"__esModule",{value:!0}),ju.default=s;const t=e(w0e());function s(r,i){let a=null;if(!r||typeof r!="string")return a;const o=(0,t.default)(r),l=typeof i=="function";return o.forEach(u=>{if(u.type!=="declaration")return;const{property:d,value:m}=u;l?i(d,m,u):m&&(a=a||{},a[d]=m)}),a}return ju}var Wm={},EM;function S0e(){if(EM)return Wm;EM=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,s=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(d){return!d||s.test(d)||e.test(d)},o=function(d,m){return m.toUpperCase()},l=function(d,m){return"".concat(m,"-")},u=function(d,m){return m===void 0&&(m={}),a(d)?d:(d=d.toLowerCase(),m.reactCompat?d=d.replace(i,l):d=d.replace(r,l),d.replace(t,o))};return Wm.camelCase=u,Wm}var Km,TM;function _0e(){if(TM)return Km;TM=1;var e=Km&&Km.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(j0e()),s=S0e();function r(i,a){var o={};return!i||typeof i!="string"||(0,t.default)(i,function(l,u){l&&u&&(o[(0,s.camelCase)(l,a)]=u)}),o}return r.default=r,Km=r,Km}var N0e=_0e();const C0e=gh(N0e),kH=AH("end"),Uk=AH("start");function AH(e){return t;function t(s){const r=s&&s.position&&s.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function k0e(e){const t=Uk(e),s=kH(e);if(t&&s)return{start:t,end:s}}function Rf(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?PM(e.position):"start"in e||"end"in e?PM(e):"line"in e||"column"in e?IN(e):""}function IN(e){return RM(e&&e.line)+":"+RM(e&&e.column)}function PM(e){return IN(e&&e.start)+"-"+IN(e&&e.end)}function RM(e){return e&&typeof e=="number"?e:1}class Fr extends Error{constructor(t,s,r){super(),typeof s=="string"&&(r=s,s=void 0);let i="",a={},o=!1;if(s&&("line"in s&&"column"in s?a={place:s}:"start"in s&&"end"in s?a={place:s}:"type"in s?a={ancestors:[s],place:s.position}:a={...s}),typeof t=="string"?i=t:!a.cause&&t&&(o=!0,i=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?a.ruleId=r:(a.source=r.slice(0,u),a.ruleId=r.slice(u+1))}if(!a.place&&a.ancestors&&a.ancestors){const u=a.ancestors[a.ancestors.length-1];u&&(a.place=u.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=Rf(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Fr.prototype.file="";Fr.prototype.name="";Fr.prototype.reason="";Fr.prototype.message="";Fr.prototype.stack="";Fr.prototype.column=void 0;Fr.prototype.line=void 0;Fr.prototype.ancestors=void 0;Fr.prototype.cause=void 0;Fr.prototype.fatal=void 0;Fr.prototype.place=void 0;Fr.prototype.ruleId=void 0;Fr.prototype.source=void 0;const Gk={}.hasOwnProperty,A0e=new Map,E0e=/[A-Z]/g,T0e=new Set(["table","tbody","thead","tfoot","tr"]),P0e=new Set(["td","th"]),EH="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function R0e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const s=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=z0e(s,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=B0e(s,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:s,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Hk:b0e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=TH(i,e,void 0);return a&&typeof a!="string"?a:i.create(e,i.Fragment,{children:a||void 0},void 0)}function TH(e,t,s){if(t.type==="element")return D0e(e,t,s);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return I0e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return L0e(e,t,s);if(t.type==="mdxjsEsm")return M0e(e,t);if(t.type==="root")return O0e(e,t,s);if(t.type==="text")return F0e(e,t)}function D0e(e,t,s){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Hk,e.schema=i),e.ancestors.push(t);const a=RH(e,t.tagName,!1),o=$0e(e,t);let l=qk(e,t);return T0e.has(t.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!c0e(u):!0})),PH(e,o,a,t),Vk(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,s)}function I0e(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ap(e,t.position)}function M0e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ap(e,t.position)}function L0e(e,t,s){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Hk,e.schema=i),e.ancestors.push(t);const a=t.name===null?e.Fragment:RH(e,t.name,!0),o=H0e(e,t),l=qk(e,t);return PH(e,o,a,t),Vk(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,s)}function O0e(e,t,s){const r={};return Vk(r,qk(e,t)),e.create(t,e.Fragment,r,s)}function F0e(e,t){return t.value}function PH(e,t,s,r){typeof s!="string"&&s!==e.Fragment&&e.passNode&&(t.node=r)}function Vk(e,t){if(t.length>0){const s=t.length>1?t:t[0];s&&(e.children=s)}}function B0e(e,t,s){return r;function r(i,a,o,l){const d=Array.isArray(o.children)?s:t;return l?d(a,o,l):d(a,o)}}function z0e(e,t){return s;function s(r,i,a,o){const l=Array.isArray(a.children),u=Uk(r);return t(i,a,o,l,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function $0e(e,t){const s={};let r,i;for(i in t.properties)if(i!=="children"&&Gk.call(t.properties,i)){const a=U0e(e,i,t.properties[i]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&P0e.has(t.tagName)?r=l:s[o]=l}}if(r){const a=s.style||(s.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return s}function H0e(e,t){const s={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(s,e.evaluater.evaluateExpression(l.argument))}else ap(e,t.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else ap(e,t.position);else a=r.value===null?!0:r.value;s[i]=a}return s}function qk(e,t){const s=[];let r=-1;const i=e.passKeys?new Map:A0e;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const u=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(u){const d=i.get(u)||0;o=u+"-"+d,i.set(u,d+1)}}const l=TH(e,a,o);l!==void 0&&s.push(l)}return s}function U0e(e,t,s){const r=g0e(e.schema,t);if(!(s==null||typeof s=="number"&&Number.isNaN(s))){if(Array.isArray(s)&&(s=r.commaSeparated?r0e(s):y0e(s)),r.property==="style"){let i=typeof s=="object"?s:G0e(e,String(s));return e.stylePropertyNameCase==="css"&&(i=V0e(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?m0e[r.property]||r.property:r.attribute,s]}}function G0e(e,t){try{return C0e(t,{reactCompat:!0})}catch(s){if(e.ignoreInvalidStyle)return{};const r=s,i=new Fr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=EH+"#cannot-parse-style-attribute",i}}function RH(e,t,s){let r;if(!s)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let a=-1,o;for(;++a<i.length;){const l=SM(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=SM(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return Gk.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ap(e)}function ap(e,t){const s=new Fr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=EH+"#cannot-handle-mdx-estrees-without-createevaluater",s}function V0e(e){const t={};let s;for(s in e)Gk.call(e,s)&&(t[q0e(s)]=e[s]);return t}function q0e(e){let t=e.replace(E0e,W0e);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function W0e(e){return"-"+e.toLowerCase()}const ES={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},K0e={};function Wk(e,t){const s=K0e,r=typeof s.includeImageAlt=="boolean"?s.includeImageAlt:!0,i=typeof s.includeHtml=="boolean"?s.includeHtml:!0;return DH(e,r,i)}function DH(e,t,s){if(Y0e(e)){if("value"in e)return e.type==="html"&&!s?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return DM(e.children,t,s)}return Array.isArray(e)?DM(e,t,s):""}function DM(e,t,s){const r=[];let i=-1;for(;++i<e.length;)r[i]=DH(e[i],t,s);return r.join("")}function Y0e(e){return!!(e&&typeof e=="object")}const IM=document.createElement("i");function Kk(e){const t="&"+e+";";IM.innerHTML=t;const s=IM.textContent;return s.charCodeAt(s.length-1)===59&&e!=="semi"||s===t?!1:s}function Fi(e,t,s,r){const i=e.length;let a=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,s=s>0?s:0,r.length<1e4)o=Array.from(r),o.unshift(t,s),e.splice(...o);else for(s&&e.splice(t,s);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function aa(e,t){return e.length>0?(Fi(e,e.length,0,t),e):t}const MM={}.hasOwnProperty;function IH(e){const t={};let s=-1;for(;++s<e.length;)X0e(t,e[s]);return t}function X0e(e,t){let s;for(s in t){const i=(MM.call(e,s)?e[s]:void 0)||(e[s]={}),a=t[s];let o;if(a)for(o in a){MM.call(i,o)||(i[o]=[]);const l=a[o];Z0e(i[o],Array.isArray(l)?l:l?[l]:[])}}}function Z0e(e,t){let s=-1;const r=[];for(;++s<t.length;)(t[s].add==="after"?e:r).push(t[s]);Fi(e,0,0,r)}function MH(e,t){const s=Number.parseInt(e,t);return s<9||s===11||s>13&&s<32||s>126&&s<160||s>55295&&s<57344||s>64975&&s<65008||(s&65535)===65535||(s&65535)===65534||s>1114111?"":String.fromCodePoint(s)}function Ta(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Gr=bc(/[A-Za-z]/),Pr=bc(/[\dA-Za-z]/),Q0e=bc(/[#-'*+\--9=?A-Z^-~]/);function Sb(e){return e!==null&&(e<32||e===127)}const MN=bc(/\d/),J0e=bc(/[\dA-Fa-f]/),eje=bc(/[!-/:-@[-`{-~]/);function xt(e){return e!==null&&e<-2}function Fs(e){return e!==null&&(e<0||e===32)}function ss(e){return e===-2||e===-1||e===32}const Yy=bc(new RegExp("\\p{P}|\\p{S}","u")),gd=bc(/\s/);function bc(e){return t;function t(s){return s!==null&&s>-1&&e.test(String.fromCharCode(s))}}function qh(e){const t=[];let s=-1,r=0,i=0;for(;++s<e.length;){const a=e.charCodeAt(s);let o="";if(a===37&&Pr(e.charCodeAt(s+1))&&Pr(e.charCodeAt(s+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(s+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),i=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,s),encodeURIComponent(o)),r=s+i+1,o=""),i&&(s+=i,i=0)}return t.join("")+e.slice(r)}function hs(e,t,s,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(u){return ss(u)?(e.enter(s),l(u)):t(u)}function l(u){return ss(u)&&a++<i?(e.consume(u),l):(e.exit(s),t(u))}}const tje={tokenize:sje};function sje(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let s;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),hs(e,t,"linePrefix")}function i(l){return e.enter("paragraph"),a(l)}function a(l){const u=e.enter("chunkText",{contentType:"text",previous:s});return s&&(s.next=u),s=u,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return xt(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const nje={tokenize:rje},LM={tokenize:ije};function rje(e){const t=this,s=[];let r=0,i,a,o;return l;function l(j){if(r<s.length){const T=s[r];return t.containerState=T[1],e.attempt(T[0].continuation,u,d)(j)}return d(j)}function u(j){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const T=t.events.length;let E=T,A;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){A=t.events[E][1].end;break}C(r);let R=T;for(;R<t.events.length;)t.events[R][1].end={...A},R++;return Fi(t.events,E+1,0,t.events.slice(T)),t.events.length=R,d(j)}return l(j)}function d(j){if(r===s.length){if(!i)return x(j);if(i.currentConstruct&&i.currentConstruct.concrete)return y(j);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(LM,m,f)(j)}function m(j){return i&&_(),C(r),x(j)}function f(j){return t.parser.lazy[t.now().line]=r!==s.length,o=t.now().offset,y(j)}function x(j){return t.containerState={},e.attempt(LM,v,y)(j)}function v(j){return r++,s.push([t.currentConstruct,t.containerState]),x(j)}function y(j){if(j===null){i&&_(),C(0),e.consume(j);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),w(j)}function w(j){if(j===null){S(e.exit("chunkFlow"),!0),C(0),e.consume(j);return}return xt(j)?(e.consume(j),S(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(j),w)}function S(j,T){const E=t.sliceStream(j);if(T&&E.push(null),j.previous=a,a&&(a.next=j),a=j,i.defineSkip(j.start),i.write(E),t.parser.lazy[j.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const R=t.events.length;let D=R,M,P;for(;D--;)if(t.events[D][0]==="exit"&&t.events[D][1].type==="chunkFlow"){if(M){P=t.events[D][1].end;break}M=!0}for(C(r),A=R;A<t.events.length;)t.events[A][1].end={...P},A++;Fi(t.events,D+1,0,t.events.slice(R)),t.events.length=A}}function C(j){let T=s.length;for(;T-- >j;){const E=s[T];t.containerState=E[1],E[0].exit.call(t,e)}s.length=j}function _(){i.write([null]),a=void 0,i=void 0,t.containerState._closeFlow=void 0}}function ije(e,t,s){return hs(e,e.attempt(this.parser.constructs.document,t,s),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function mh(e){if(e===null||Fs(e)||gd(e))return 1;if(Yy(e))return 2}function Xy(e,t,s){const r=[];let i=-1;for(;++i<e.length;){const a=e[i].resolveAll;a&&!r.includes(a)&&(t=a(t,s),r.push(a))}return t}const LN={name:"attention",resolveAll:aje,tokenize:oje};function aje(e,t){let s=-1,r,i,a,o,l,u,d,m;for(;++s<e.length;)if(e[s][0]==="enter"&&e[s][1].type==="attentionSequence"&&e[s][1]._close){for(r=s;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[s][1]).charCodeAt(0)){if((e[r][1]._close||e[s][1]._open)&&(e[s][1].end.offset-e[s][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[s][1].end.offset-e[s][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[s][1].end.offset-e[s][1].start.offset>1?2:1;const f={...e[r][1].end},x={...e[s][1].start};OM(f,-u),OM(x,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...e[s][1].start},end:x},a={type:u>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[s][1].start}},i={type:u>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[s][1].start={...l.end},d=[],e[r][1].end.offset-e[r][1].start.offset&&(d=aa(d,[["enter",e[r][1],t],["exit",e[r][1],t]])),d=aa(d,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",a,t]]),d=aa(d,Xy(t.parser.constructs.insideSpan.null,e.slice(r+1,s),t)),d=aa(d,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",i,t]]),e[s][1].end.offset-e[s][1].start.offset?(m=2,d=aa(d,[["enter",e[s][1],t],["exit",e[s][1],t]])):m=0,Fi(e,r-1,s-r+3,d),s=r+d.length-m-2;break}}for(s=-1;++s<e.length;)e[s][1].type==="attentionSequence"&&(e[s][1].type="data");return e}function oje(e,t){const s=this.parser.constructs.attentionMarkers.null,r=this.previous,i=mh(r);let a;return o;function o(u){return a=u,e.enter("attentionSequence"),l(u)}function l(u){if(u===a)return e.consume(u),l;const d=e.exit("attentionSequence"),m=mh(u),f=!m||m===2&&i||s.includes(u),x=!i||i===2&&m||s.includes(r);return d._open=!!(a===42?f:f&&(i||!x)),d._close=!!(a===42?x:x&&(m||!f)),t(u)}}function OM(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const lje={name:"autolink",tokenize:cje};function cje(e,t,s){let r=0;return i;function i(v){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(v){return Gr(v)?(e.consume(v),o):v===64?s(v):d(v)}function o(v){return v===43||v===45||v===46||Pr(v)?(r=1,l(v)):d(v)}function l(v){return v===58?(e.consume(v),r=0,u):(v===43||v===45||v===46||Pr(v))&&r++<32?(e.consume(v),l):(r=0,d(v))}function u(v){return v===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):v===null||v===32||v===60||Sb(v)?s(v):(e.consume(v),u)}function d(v){return v===64?(e.consume(v),m):Q0e(v)?(e.consume(v),d):s(v)}function m(v){return Pr(v)?f(v):s(v)}function f(v){return v===46?(e.consume(v),r=0,m):v===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(v),e.exit("autolinkMarker"),e.exit("autolink"),t):x(v)}function x(v){if((v===45||Pr(v))&&r++<63){const y=v===45?x:f;return e.consume(v),y}return s(v)}}const Kp={partial:!0,tokenize:dje};function dje(e,t,s){return r;function r(a){return ss(a)?hs(e,i,"linePrefix")(a):i(a)}function i(a){return a===null||xt(a)?t(a):s(a)}}const LH={continuation:{tokenize:hje},exit:mje,name:"blockQuote",tokenize:uje};function uje(e,t,s){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return s(o)}function a(o){return ss(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function hje(e,t,s){const r=this;return i;function i(o){return ss(o)?hs(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(LH,t,s)(o)}}function mje(e){e.exit("blockQuote")}const OH={name:"characterEscape",tokenize:fje};function fje(e,t,s){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),i}function i(a){return eje(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):s(a)}}const FH={name:"characterReference",tokenize:pje};function pje(e,t,s){const r=this;let i=0,a,o;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),d):(e.enter("characterReferenceValue"),a=31,o=Pr,m(f))}function d(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=J0e,m):(e.enter("characterReferenceValue"),a=7,o=MN,m(f))}function m(f){if(f===59&&i){const x=e.exit("characterReferenceValue");return o===Pr&&!Kk(r.sliceSerialize(x))?s(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<a?(e.consume(f),m):s(f)}}const FM={partial:!0,tokenize:xje},BM={concrete:!0,name:"codeFenced",tokenize:gje};function gje(e,t,s){const r=this,i={partial:!0,tokenize:E};let a=0,o=0,l;return u;function u(A){return d(A)}function d(A){const R=r.events[r.events.length-1];return a=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,l=A,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),m(A)}function m(A){return A===l?(o++,e.consume(A),m):o<3?s(A):(e.exit("codeFencedFenceSequence"),ss(A)?hs(e,f,"whitespace")(A):f(A))}function f(A){return A===null||xt(A)?(e.exit("codeFencedFence"),r.interrupt?t(A):e.check(FM,w,T)(A)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===null||xt(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(A)):ss(A)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),hs(e,v,"whitespace")(A)):A===96&&A===l?s(A):(e.consume(A),x)}function v(A){return A===null||xt(A)?f(A):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===null||xt(A)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(A)):A===96&&A===l?s(A):(e.consume(A),y)}function w(A){return e.attempt(i,T,S)(A)}function S(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),C}function C(A){return a>0&&ss(A)?hs(e,_,"linePrefix",a+1)(A):_(A)}function _(A){return A===null||xt(A)?e.check(FM,w,T)(A):(e.enter("codeFlowValue"),j(A))}function j(A){return A===null||xt(A)?(e.exit("codeFlowValue"),_(A)):(e.consume(A),j)}function T(A){return e.exit("codeFenced"),t(A)}function E(A,R,D){let M=0;return P;function P(H){return A.enter("lineEnding"),A.consume(H),A.exit("lineEnding"),O}function O(H){return A.enter("codeFencedFence"),ss(H)?hs(A,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):F(H)}function F(H){return H===l?(A.enter("codeFencedFenceSequence"),$(H)):D(H)}function $(H){return H===l?(M++,A.consume(H),$):M>=o?(A.exit("codeFencedFenceSequence"),ss(H)?hs(A,z,"whitespace")(H):z(H)):D(H)}function z(H){return H===null||xt(H)?(A.exit("codeFencedFence"),R(H)):D(H)}}}function xje(e,t,s){const r=this;return i;function i(o){return o===null?s(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?s(o):t(o)}}const TS={name:"codeIndented",tokenize:bje},vje={partial:!0,tokenize:yje};function bje(e,t,s){const r=this;return i;function i(d){return e.enter("codeIndented"),hs(e,a,"linePrefix",5)(d)}function a(d){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?o(d):s(d)}function o(d){return d===null?u(d):xt(d)?e.attempt(vje,o,u)(d):(e.enter("codeFlowValue"),l(d))}function l(d){return d===null||xt(d)?(e.exit("codeFlowValue"),o(d)):(e.consume(d),l)}function u(d){return e.exit("codeIndented"),t(d)}}function yje(e,t,s){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?s(o):xt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):hs(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):xt(o)?i(o):s(o)}}const wje={name:"codeText",previous:Sje,resolve:jje,tokenize:_je};function jje(e){let t=e.length-4,s=3,r,i;if((e[s][1].type==="lineEnding"||e[s][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=s;++r<t;)if(e[r][1].type==="codeTextData"){e[s][1].type="codeTextPadding",e[t][1].type="codeTextPadding",s+=2,t-=2;break}}for(r=s-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Sje(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _je(e,t,s){let r=0,i,a;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?s(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(a=e.enter("codeTextSequence"),i=0,m(f)):xt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),d(f))}function d(f){return f===null||f===32||f===96||xt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),d)}function m(f){return f===96?(e.consume(f),i++,m):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(a.type="codeTextData",d(f))}}class Nje{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,s){const r=s??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,s,r){const i=s||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Ym(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Ym(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Ym(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const s=this.left.splice(t,Number.POSITIVE_INFINITY);Ym(this.right,s.reverse())}else{const s=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Ym(this.left,s.reverse())}}}function Ym(e,t){let s=0;if(t.length<1e4)e.push(...t);else for(;s<t.length;)e.push(...t.slice(s,s+1e4)),s+=1e4}function BH(e){const t={};let s=-1,r,i,a,o,l,u,d;const m=new Nje(e);for(;++s<m.length;){for(;s in t;)s=t[s];if(r=m.get(s),s&&r[1].type==="chunkFlow"&&m.get(s-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,a=0,a<u.length&&u[a][1].type==="lineEndingBlank"&&(a+=2),a<u.length&&u[a][1].type==="content"))for(;++a<u.length&&u[a][1].type!=="content";)u[a][1].type==="chunkText"&&(u[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Cje(m,s)),s=t[s],d=!0);else if(r[1]._container){for(a=s,i=void 0;a--;)if(o=m.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(m.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...m.get(i)[1].start},l=m.slice(i,s),l.unshift(r),m.splice(i,s-i+1,l))}}return Fi(e,0,Number.POSITIVE_INFINITY,m.slice(0)),!d}function Cje(e,t){const s=e.get(t)[1],r=e.get(t)[2];let i=t-1;const a=[];let o=s._tokenizer;o||(o=r.parser[s.contentType](s.start),s._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,u=[],d={};let m,f,x=-1,v=s,y=0,w=0;const S=[w];for(;v;){for(;e.get(++i)[1]!==v;);a.push(i),v._tokenizer||(m=r.sliceStream(v),v.next||m.push(null),f&&o.defineSkip(v.start),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(m),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=v,v=v.next}for(v=s;++x<l.length;)l[x][0]==="exit"&&l[x-1][0]==="enter"&&l[x][1].type===l[x-1][1].type&&l[x][1].start.line!==l[x][1].end.line&&(w=x+1,S.push(w),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(o.events=[],v?(v._tokenizer=void 0,v.previous=void 0):S.pop(),x=S.length;x--;){const C=l.slice(S[x],S[x+1]),_=a.pop();u.push([_,_+C.length-1]),e.splice(_,2,C)}for(u.reverse(),x=-1;++x<u.length;)d[y+u[x][0]]=y+u[x][1],y+=u[x][1]-u[x][0]-1;return d}const kje={resolve:Eje,tokenize:Tje},Aje={partial:!0,tokenize:Pje};function Eje(e){return BH(e),e}function Tje(e,t){let s;return r;function r(l){return e.enter("content"),s=e.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):xt(l)?e.check(Aje,o,a)(l):(e.consume(l),i)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),s.next=e.enter("chunkContent",{contentType:"content",previous:s}),s=s.next,i}}function Pje(e,t,s){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),hs(e,a,"linePrefix")}function a(o){if(o===null||xt(o))return s(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,s,t)(o)}}function zH(e,t,s,r,i,a,o,l,u){const d=u||Number.POSITIVE_INFINITY;let m=0;return f;function f(C){return C===60?(e.enter(r),e.enter(i),e.enter(a),e.consume(C),e.exit(a),x):C===null||C===32||C===41||Sb(C)?s(C):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),w(C))}function x(C){return C===62?(e.enter(a),e.consume(C),e.exit(a),e.exit(i),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),v(C))}function v(C){return C===62?(e.exit("chunkString"),e.exit(l),x(C)):C===null||C===60||xt(C)?s(C):(e.consume(C),C===92?y:v)}function y(C){return C===60||C===62||C===92?(e.consume(C),v):v(C)}function w(C){return!m&&(C===null||C===41||Fs(C))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(C)):m<d&&C===40?(e.consume(C),m++,w):C===41?(e.consume(C),m--,w):C===null||C===32||C===40||Sb(C)?s(C):(e.consume(C),C===92?S:w)}function S(C){return C===40||C===41||C===92?(e.consume(C),w):w(C)}}function $H(e,t,s,r,i,a){const o=this;let l=0,u;return d;function d(v){return e.enter(r),e.enter(i),e.consume(v),e.exit(i),e.enter(a),m}function m(v){return l>999||v===null||v===91||v===93&&!u||v===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?s(v):v===93?(e.exit(a),e.enter(i),e.consume(v),e.exit(i),e.exit(r),t):xt(v)?(e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),m):(e.enter("chunkString",{contentType:"string"}),f(v))}function f(v){return v===null||v===91||v===93||xt(v)||l++>999?(e.exit("chunkString"),m(v)):(e.consume(v),u||(u=!ss(v)),v===92?x:f)}function x(v){return v===91||v===92||v===93?(e.consume(v),l++,f):f(v)}}function HH(e,t,s,r,i,a){let o;return l;function l(x){return x===34||x===39||x===40?(e.enter(r),e.enter(i),e.consume(x),e.exit(i),o=x===40?41:x,u):s(x)}function u(x){return x===o?(e.enter(i),e.consume(x),e.exit(i),e.exit(r),t):(e.enter(a),d(x))}function d(x){return x===o?(e.exit(a),u(o)):x===null?s(x):xt(x)?(e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),hs(e,d,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===o||x===null||xt(x)?(e.exit("chunkString"),d(x)):(e.consume(x),x===92?f:m)}function f(x){return x===o||x===92?(e.consume(x),m):m(x)}}function Df(e,t){let s;return r;function r(i){return xt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),s=!0,r):ss(i)?hs(e,r,s?"linePrefix":"lineSuffix")(i):t(i)}}const Rje={name:"definition",tokenize:Ije},Dje={partial:!0,tokenize:Mje};function Ije(e,t,s){const r=this;let i;return a;function a(v){return e.enter("definition"),o(v)}function o(v){return $H.call(r,e,l,s,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function l(v){return i=Ta(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),u):s(v)}function u(v){return Fs(v)?Df(e,d)(v):d(v)}function d(v){return zH(e,m,s,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function m(v){return e.attempt(Dje,f,f)(v)}function f(v){return ss(v)?hs(e,x,"whitespace")(v):x(v)}function x(v){return v===null||xt(v)?(e.exit("definition"),r.parser.defined.push(i),t(v)):s(v)}}function Mje(e,t,s){return r;function r(l){return Fs(l)?Df(e,i)(l):s(l)}function i(l){return HH(e,a,s,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return ss(l)?hs(e,o,"whitespace")(l):o(l)}function o(l){return l===null||xt(l)?t(l):s(l)}}const Lje={name:"hardBreakEscape",tokenize:Oje};function Oje(e,t,s){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),i}function i(a){return xt(a)?(e.exit("hardBreakEscape"),t(a)):s(a)}}const Fje={name:"headingAtx",resolve:Bje,tokenize:zje};function Bje(e,t){let s=e.length-2,r=3,i,a;return e[r][1].type==="whitespace"&&(r+=2),s-2>r&&e[s][1].type==="whitespace"&&(s-=2),e[s][1].type==="atxHeadingSequence"&&(r===s-1||s-4>r&&e[s-2][1].type==="whitespace")&&(s-=r+1===s?2:4),s>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[s][1].end},a={type:"chunkText",start:e[r][1].start,end:e[s][1].end,contentType:"text"},Fi(e,r,s-r+1,[["enter",i,t],["enter",a,t],["exit",a,t],["exit",i,t]])),e}function zje(e,t,s){let r=0;return i;function i(m){return e.enter("atxHeading"),a(m)}function a(m){return e.enter("atxHeadingSequence"),o(m)}function o(m){return m===35&&r++<6?(e.consume(m),o):m===null||Fs(m)?(e.exit("atxHeadingSequence"),l(m)):s(m)}function l(m){return m===35?(e.enter("atxHeadingSequence"),u(m)):m===null||xt(m)?(e.exit("atxHeading"),t(m)):ss(m)?hs(e,l,"whitespace")(m):(e.enter("atxHeadingText"),d(m))}function u(m){return m===35?(e.consume(m),u):(e.exit("atxHeadingSequence"),l(m))}function d(m){return m===null||m===35||Fs(m)?(e.exit("atxHeadingText"),l(m)):(e.consume(m),d)}}const $je=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],zM=["pre","script","style","textarea"],Hje={concrete:!0,name:"htmlFlow",resolveTo:Vje,tokenize:qje},Uje={partial:!0,tokenize:Kje},Gje={partial:!0,tokenize:Wje};function Vje(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function qje(e,t,s){const r=this;let i,a,o,l,u;return d;function d(q){return m(q)}function m(q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(q),f}function f(q){return q===33?(e.consume(q),x):q===47?(e.consume(q),a=!0,w):q===63?(e.consume(q),i=3,r.interrupt?t:L):Gr(q)?(e.consume(q),o=String.fromCharCode(q),S):s(q)}function x(q){return q===45?(e.consume(q),i=2,v):q===91?(e.consume(q),i=5,l=0,y):Gr(q)?(e.consume(q),i=4,r.interrupt?t:L):s(q)}function v(q){return q===45?(e.consume(q),r.interrupt?t:L):s(q)}function y(q){const Q="CDATA[";return q===Q.charCodeAt(l++)?(e.consume(q),l===Q.length?r.interrupt?t:F:y):s(q)}function w(q){return Gr(q)?(e.consume(q),o=String.fromCharCode(q),S):s(q)}function S(q){if(q===null||q===47||q===62||Fs(q)){const Q=q===47,se=o.toLowerCase();return!Q&&!a&&zM.includes(se)?(i=1,r.interrupt?t(q):F(q)):$je.includes(o.toLowerCase())?(i=6,Q?(e.consume(q),C):r.interrupt?t(q):F(q)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?s(q):a?_(q):j(q))}return q===45||Pr(q)?(e.consume(q),o+=String.fromCharCode(q),S):s(q)}function C(q){return q===62?(e.consume(q),r.interrupt?t:F):s(q)}function _(q){return ss(q)?(e.consume(q),_):P(q)}function j(q){return q===47?(e.consume(q),P):q===58||q===95||Gr(q)?(e.consume(q),T):ss(q)?(e.consume(q),j):P(q)}function T(q){return q===45||q===46||q===58||q===95||Pr(q)?(e.consume(q),T):E(q)}function E(q){return q===61?(e.consume(q),A):ss(q)?(e.consume(q),E):j(q)}function A(q){return q===null||q===60||q===61||q===62||q===96?s(q):q===34||q===39?(e.consume(q),u=q,R):ss(q)?(e.consume(q),A):D(q)}function R(q){return q===u?(e.consume(q),u=null,M):q===null||xt(q)?s(q):(e.consume(q),R)}function D(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||Fs(q)?E(q):(e.consume(q),D)}function M(q){return q===47||q===62||ss(q)?j(q):s(q)}function P(q){return q===62?(e.consume(q),O):s(q)}function O(q){return q===null||xt(q)?F(q):ss(q)?(e.consume(q),O):s(q)}function F(q){return q===45&&i===2?(e.consume(q),I):q===60&&i===1?(e.consume(q),V):q===62&&i===4?(e.consume(q),G):q===63&&i===3?(e.consume(q),L):q===93&&i===5?(e.consume(q),K):xt(q)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Uje,Y,$)(q)):q===null||xt(q)?(e.exit("htmlFlowData"),$(q)):(e.consume(q),F)}function $(q){return e.check(Gje,z,Y)(q)}function z(q){return e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),H}function H(q){return q===null||xt(q)?$(q):(e.enter("htmlFlowData"),F(q))}function I(q){return q===45?(e.consume(q),L):F(q)}function V(q){return q===47?(e.consume(q),o="",B):F(q)}function B(q){if(q===62){const Q=o.toLowerCase();return zM.includes(Q)?(e.consume(q),G):F(q)}return Gr(q)&&o.length<8?(e.consume(q),o+=String.fromCharCode(q),B):F(q)}function K(q){return q===93?(e.consume(q),L):F(q)}function L(q){return q===62?(e.consume(q),G):q===45&&i===2?(e.consume(q),L):F(q)}function G(q){return q===null||xt(q)?(e.exit("htmlFlowData"),Y(q)):(e.consume(q),G)}function Y(q){return e.exit("htmlFlow"),t(q)}}function Wje(e,t,s){const r=this;return i;function i(o){return xt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):s(o)}function a(o){return r.parser.lazy[r.now().line]?s(o):t(o)}}function Kje(e,t,s){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(Kp,t,s)}}const Yje={name:"htmlText",tokenize:Xje};function Xje(e,t,s){const r=this;let i,a,o;return l;function l(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),u}function u(L){return L===33?(e.consume(L),d):L===47?(e.consume(L),E):L===63?(e.consume(L),j):Gr(L)?(e.consume(L),D):s(L)}function d(L){return L===45?(e.consume(L),m):L===91?(e.consume(L),a=0,y):Gr(L)?(e.consume(L),_):s(L)}function m(L){return L===45?(e.consume(L),v):s(L)}function f(L){return L===null?s(L):L===45?(e.consume(L),x):xt(L)?(o=f,V(L)):(e.consume(L),f)}function x(L){return L===45?(e.consume(L),v):f(L)}function v(L){return L===62?I(L):L===45?x(L):f(L)}function y(L){const G="CDATA[";return L===G.charCodeAt(a++)?(e.consume(L),a===G.length?w:y):s(L)}function w(L){return L===null?s(L):L===93?(e.consume(L),S):xt(L)?(o=w,V(L)):(e.consume(L),w)}function S(L){return L===93?(e.consume(L),C):w(L)}function C(L){return L===62?I(L):L===93?(e.consume(L),C):w(L)}function _(L){return L===null||L===62?I(L):xt(L)?(o=_,V(L)):(e.consume(L),_)}function j(L){return L===null?s(L):L===63?(e.consume(L),T):xt(L)?(o=j,V(L)):(e.consume(L),j)}function T(L){return L===62?I(L):j(L)}function E(L){return Gr(L)?(e.consume(L),A):s(L)}function A(L){return L===45||Pr(L)?(e.consume(L),A):R(L)}function R(L){return xt(L)?(o=R,V(L)):ss(L)?(e.consume(L),R):I(L)}function D(L){return L===45||Pr(L)?(e.consume(L),D):L===47||L===62||Fs(L)?M(L):s(L)}function M(L){return L===47?(e.consume(L),I):L===58||L===95||Gr(L)?(e.consume(L),P):xt(L)?(o=M,V(L)):ss(L)?(e.consume(L),M):I(L)}function P(L){return L===45||L===46||L===58||L===95||Pr(L)?(e.consume(L),P):O(L)}function O(L){return L===61?(e.consume(L),F):xt(L)?(o=O,V(L)):ss(L)?(e.consume(L),O):M(L)}function F(L){return L===null||L===60||L===61||L===62||L===96?s(L):L===34||L===39?(e.consume(L),i=L,$):xt(L)?(o=F,V(L)):ss(L)?(e.consume(L),F):(e.consume(L),z)}function $(L){return L===i?(e.consume(L),i=void 0,H):L===null?s(L):xt(L)?(o=$,V(L)):(e.consume(L),$)}function z(L){return L===null||L===34||L===39||L===60||L===61||L===96?s(L):L===47||L===62||Fs(L)?M(L):(e.consume(L),z)}function H(L){return L===47||L===62||Fs(L)?M(L):s(L)}function I(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):s(L)}function V(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),B}function B(L){return ss(L)?hs(e,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):K(L)}function K(L){return e.enter("htmlTextData"),o(L)}}const Yk={name:"labelEnd",resolveAll:eSe,resolveTo:tSe,tokenize:sSe},Zje={tokenize:nSe},Qje={tokenize:rSe},Jje={tokenize:iSe};function eSe(e){let t=-1;const s=[];for(;++t<e.length;){const r=e[t][1];if(s.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==s.length&&Fi(e,0,e.length,s),e}function tSe(e,t){let s=e.length,r=0,i,a,o,l;for(;s--;)if(i=e[s][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[s][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[s][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=s,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=s);const u={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},d={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},m={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",u,t],["enter",d,t]],l=aa(l,e.slice(a+1,a+r+3)),l=aa(l,[["enter",m,t]]),l=aa(l,Xy(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=aa(l,[["exit",m,t],e[o-2],e[o-1],["exit",d,t]]),l=aa(l,e.slice(o+1)),l=aa(l,[["exit",u,t]]),Fi(e,a,e.length,l),e}function sSe(e,t,s){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(x){return a?a._inactive?f(x):(o=r.parser.defined.includes(Ta(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(x),e.exit("labelMarker"),e.exit("labelEnd"),u):s(x)}function u(x){return x===40?e.attempt(Zje,m,o?m:f)(x):x===91?e.attempt(Qje,m,o?d:f)(x):o?m(x):f(x)}function d(x){return e.attempt(Jje,m,f)(x)}function m(x){return t(x)}function f(x){return a._balanced=!0,s(x)}}function nSe(e,t,s){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Fs(f)?Df(e,a)(f):a(f)}function a(f){return f===41?m(f):zH(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Fs(f)?Df(e,u)(f):m(f)}function l(f){return s(f)}function u(f){return f===34||f===39||f===40?HH(e,d,s,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):m(f)}function d(f){return Fs(f)?Df(e,m)(f):m(f)}function m(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):s(f)}}function rSe(e,t,s){const r=this;return i;function i(l){return $H.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Ta(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):s(l)}function o(l){return s(l)}}function iSe(e,t,s){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),i}function i(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):s(a)}}const aSe={name:"labelStartImage",resolveAll:Yk.resolveAll,tokenize:oSe};function oSe(e,t,s){const r=this;return i;function i(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):s(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?s(l):t(l)}}const lSe={name:"labelStartLink",resolveAll:Yk.resolveAll,tokenize:cSe};function cSe(e,t,s){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?s(o):t(o)}}const PS={name:"lineEnding",tokenize:dSe};function dSe(e,t){return s;function s(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),hs(e,t,"linePrefix")}}const wv={name:"thematicBreak",tokenize:uSe};function uSe(e,t,s){let r=0,i;return a;function a(d){return e.enter("thematicBreak"),o(d)}function o(d){return i=d,l(d)}function l(d){return d===i?(e.enter("thematicBreakSequence"),u(d)):r>=3&&(d===null||xt(d))?(e.exit("thematicBreak"),t(d)):s(d)}function u(d){return d===i?(e.consume(d),r++,u):(e.exit("thematicBreakSequence"),ss(d)?hs(e,l,"whitespace")(d):l(d))}}const hi={continuation:{tokenize:pSe},exit:xSe,name:"list",tokenize:fSe},hSe={partial:!0,tokenize:vSe},mSe={partial:!0,tokenize:gSe};function fSe(e,t,s){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(v){const y=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:MN(v)){if(r.containerState.type||(r.containerState.type=y,e.enter(y,{_container:!0})),y==="listUnordered")return e.enter("listItemPrefix"),v===42||v===45?e.check(wv,s,d)(v):d(v);if(!r.interrupt||v===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(v)}return s(v)}function u(v){return MN(v)&&++o<10?(e.consume(v),u):(!r.interrupt||o<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(e.exit("listItemValue"),d(v)):s(v)}function d(v){return e.enter("listItemMarker"),e.consume(v),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,e.check(Kp,r.interrupt?s:m,e.attempt(hSe,x,f))}function m(v){return r.containerState.initialBlankLine=!0,a++,x(v)}function f(v){return ss(v)?(e.enter("listItemPrefixWhitespace"),e.consume(v),e.exit("listItemPrefixWhitespace"),x):s(v)}function x(v){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(v)}}function pSe(e,t,s){const r=this;return r.containerState._closeFlow=void 0,e.check(Kp,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,hs(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!ss(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(mSe,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,hs(e,e.attempt(hi,t,s),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function gSe(e,t,s){const r=this;return hs(e,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):s(a)}}function xSe(e){e.exit(this.containerState.type)}function vSe(e,t,s){const r=this;return hs(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!ss(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):s(a)}}const $M={name:"setextUnderline",resolveTo:bSe,tokenize:ySe};function bSe(e,t){let s=e.length,r,i,a;for(;s--;)if(e[s][0]==="enter"){if(e[s][1].type==="content"){r=s;break}e[s][1].type==="paragraph"&&(i=s)}else e[s][1].type==="content"&&e.splice(s,1),!a&&e[s][1].type==="definition"&&(a=s);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",a?(e.splice(i,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function ySe(e,t,s){const r=this;let i;return a;function a(d){let m=r.events.length,f;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){f=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=d,o(d)):s(d)}function o(d){return e.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(e.consume(d),l):(e.exit("setextHeadingLineSequence"),ss(d)?hs(e,u,"lineSuffix")(d):u(d))}function u(d){return d===null||xt(d)?(e.exit("setextHeadingLine"),t(d)):s(d)}}const wSe={tokenize:jSe};function jSe(e){const t=this,s=e.attempt(Kp,r,e.attempt(this.parser.constructs.flowInitial,i,hs(e,e.attempt(this.parser.constructs.flow,i,e.attempt(kje,i)),"linePrefix")));return s;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,s}function i(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,s}}const SSe={resolveAll:GH()},_Se=UH("string"),NSe=UH("text");function UH(e){return{resolveAll:GH(e==="text"?CSe:void 0),tokenize:t};function t(s){const r=this,i=this.parser.constructs[e],a=s.attempt(i,o,l);return o;function o(m){return d(m)?a(m):l(m)}function l(m){if(m===null){s.consume(m);return}return s.enter("data"),s.consume(m),u}function u(m){return d(m)?(s.exit("data"),a(m)):(s.consume(m),u)}function d(m){if(m===null)return!0;const f=i[m];let x=-1;if(f)for(;++x<f.length;){const v=f[x];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function GH(e){return t;function t(s,r){let i=-1,a;for(;++i<=s.length;)a===void 0?s[i]&&s[i][1].type==="data"&&(a=i,i++):(!s[i]||s[i][1].type!=="data")&&(i!==a+2&&(s[a][1].end=s[i-1][1].end,s.splice(a+2,i-a-2),i=a+2),a=void 0);return e?e(s,r):s}}function CSe(e,t){let s=0;for(;++s<=e.length;)if((s===e.length||e[s][1].type==="lineEnding")&&e[s-1][1].type==="data"){const r=e[s-1][1],i=t.sliceStream(r);let a=i.length,o=-1,l=0,u;for(;a--;){const d=i[a];if(typeof d=="string"){for(o=d.length;d.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(d===-2)u=!0,l++;else if(d!==-1){a++;break}}if(t._contentTypeTextTrailing&&s===e.length&&(l=0),l){const d={type:s===e.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(e.splice(s,0,["enter",d,t],["exit",d,t]),s+=2)}s++}return e}const kSe={42:hi,43:hi,45:hi,48:hi,49:hi,50:hi,51:hi,52:hi,53:hi,54:hi,55:hi,56:hi,57:hi,62:LH},ASe={91:Rje},ESe={[-2]:TS,[-1]:TS,32:TS},TSe={35:Fje,42:wv,45:[$M,wv],60:Hje,61:$M,95:wv,96:BM,126:BM},PSe={38:FH,92:OH},RSe={[-5]:PS,[-4]:PS,[-3]:PS,33:aSe,38:FH,42:LN,60:[lje,Yje],91:lSe,92:[Lje,OH],93:Yk,95:LN,96:wje},DSe={null:[LN,SSe]},ISe={null:[42,95]},MSe={null:[]},LSe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ISe,contentInitial:ASe,disable:MSe,document:kSe,flow:TSe,flowInitial:ESe,insideSpan:DSe,string:PSe,text:RSe},Symbol.toStringTag,{value:"Module"}));function OSe(e,t,s){let r={_bufferIndex:-1,_index:0,line:s&&s.line||1,column:s&&s.column||1,offset:s&&s.offset||0};const i={},a=[];let o=[],l=[];const u={attempt:R(E),check:R(A),consume:_,enter:j,exit:T,interrupt:R(A,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:y,parser:e,previous:null,sliceSerialize:x,sliceStream:v,write:f};let m=t.tokenize.call(d,u);return t.resolveAll&&a.push(t),d;function f(O){return o=aa(o,O),S(),o[o.length-1]!==null?[]:(D(t,0),d.events=Xy(a,d.events,d),d.events)}function x(O,F){return BSe(v(O),F)}function v(O){return FSe(o,O)}function y(){const{_bufferIndex:O,_index:F,line:$,column:z,offset:H}=r;return{_bufferIndex:O,_index:F,line:$,column:z,offset:H}}function w(O){i[O.line]=O.column,P()}function S(){let O;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<F.length;)C(F.charCodeAt(r._bufferIndex));else C(F)}}function C(O){m=m(O)}function _(O){xt(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,P()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=O}function j(O,F){const $=F||{};return $.type=O,$.start=y(),d.events.push(["enter",$,d]),l.push($),$}function T(O){const F=l.pop();return F.end=y(),d.events.push(["exit",F,d]),F}function E(O,F){D(O,F.from)}function A(O,F){F.restore()}function R(O,F){return $;function $(z,H,I){let V,B,K,L;return Array.isArray(z)?Y(z):"tokenize"in z?Y([z]):G(z);function G(te){return ee;function ee(pe){const fe=pe!==null&&te[pe],re=pe!==null&&te.null,Z=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(re)?re:re?[re]:[]];return Y(Z)(pe)}}function Y(te){return V=te,B=0,te.length===0?I:q(te[B])}function q(te){return ee;function ee(pe){return L=M(),K=te,te.partial||(d.currentConstruct=te),te.name&&d.parser.constructs.disable.null.includes(te.name)?se():te.tokenize.call(F?Object.assign(Object.create(d),F):d,u,Q,se)(pe)}}function Q(te){return O(K,L),H}function se(te){return L.restore(),++B<V.length?q(V[B]):I}}}function D(O,F){O.resolveAll&&!a.includes(O)&&a.push(O),O.resolve&&Fi(d.events,F,d.events.length-F,O.resolve(d.events.slice(F),d)),O.resolveTo&&(d.events=O.resolveTo(d.events,d))}function M(){const O=y(),F=d.previous,$=d.currentConstruct,z=d.events.length,H=Array.from(l);return{from:z,restore:I};function I(){r=O,d.previous=F,d.currentConstruct=$,d.events.length=z,l=H,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function FSe(e,t){const s=t.start._index,r=t.start._bufferIndex,i=t.end._index,a=t.end._bufferIndex;let o;if(s===i)o=[e[s].slice(r,a)];else{if(o=e.slice(s,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[i].slice(0,a))}return o}function BSe(e,t){let s=-1;const r=[];let i;for(;++s<e.length;){const a=e[s];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function zSe(e){const r={constructs:IH([LSe,...(e||{}).extensions||[]]),content:i(tje),defined:[],document:i(nje),flow:i(wSe),lazy:{},string:i(_Se),text:i(NSe)};return r;function i(a){return o;function o(l){return OSe(r,a,l)}}}function $Se(e){for(;!BH(e););return e}const HM=/[\0\t\n\r]/g;function HSe(){let e=1,t="",s=!0,r;return i;function i(a,o,l){const u=[];let d,m,f,x,v;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,t="",s&&(a.charCodeAt(0)===65279&&f++,s=void 0);f<a.length;){if(HM.lastIndex=f,d=HM.exec(a),x=d&&d.index!==void 0?d.index:a.length,v=a.charCodeAt(x),!d){t=a.slice(f);break}if(v===10&&f===x&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<x&&(u.push(a.slice(f,x)),e+=x-f),v){case 0:{u.push(65533),e++;break}case 9:{for(m=Math.ceil(e/4)*4,u.push(-2);e++<m;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=x+1}return l&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const USe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function GSe(e){return e.replace(USe,VSe)}function VSe(e,t,s){if(t)return t;if(s.charCodeAt(0)===35){const i=s.charCodeAt(1),a=i===120||i===88;return MH(s.slice(a?2:1),a?16:10)}return Kk(s)||e}const VH={}.hasOwnProperty;function qSe(e,t,s){return typeof t!="string"&&(s=t,t=void 0),WSe(s)($Se(zSe(s).document().write(HSe()(e,t,!0))))}function WSe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(qe),autolinkProtocol:M,autolinkEmail:M,atxHeading:a(tt),blockQuote:a(re),characterEscape:M,characterReference:M,codeFenced:a(Z),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Z,o),codeText:a(ie,o),codeTextData:M,data:M,codeFlowValue:M,definition:a(ce),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(He),hardBreakEscape:a(he),hardBreakTrailing:a(he),htmlFlow:a(Ne,o),htmlFlowData:M,htmlText:a(Ne,o),htmlTextData:M,image:a(Ve),label:o,link:a(qe),listItem:a(Ae),listItemValue:x,listOrdered:a(Ze,f),listUnordered:a(Ze),paragraph:a(De),reference:q,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(tt),strong:a(je),thematicBreak:a(It)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:fe,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:te,characterReference:ee,codeFenced:u(S),codeFencedFence:w,codeFencedFenceInfo:v,codeFencedFenceMeta:y,codeFlowValue:P,codeIndented:u(C),codeText:u(H),codeTextData:P,data:P,definition:u(),definitionDestinationString:T,definitionLabelString:_,definitionTitleString:j,emphasis:u(),hardBreakEscape:u(F),hardBreakTrailing:u(F),htmlFlow:u($),htmlFlowData:P,htmlText:u(z),htmlTextData:P,image:u(V),label:K,labelText:B,lineEnding:O,link:u(I),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Q,resourceDestinationString:L,resourceTitleString:G,resource:Y,setextHeading:u(D),setextHeadingLineSequence:R,setextHeadingText:A,strong:u(),thematicBreak:u()}};qH(t,(e||{}).mdastExtensions||[]);const s={};return r;function r(be){let ve={type:"root",children:[]};const Me={stack:[ve],tokenStack:[],config:t,enter:l,exit:d,buffer:o,resume:m,data:s},nt=[];let jt=-1;for(;++jt<be.length;)if(be[jt][1].type==="listOrdered"||be[jt][1].type==="listUnordered")if(be[jt][0]==="enter")nt.push(jt);else{const ps=nt.pop();jt=i(be,ps,jt)}for(jt=-1;++jt<be.length;){const ps=t[be[jt][0]];VH.call(ps,be[jt][1].type)&&ps[be[jt][1].type].call(Object.assign({sliceSerialize:be[jt][2].sliceSerialize},Me),be[jt][1])}if(Me.tokenStack.length>0){const ps=Me.tokenStack[Me.tokenStack.length-1];(ps[1]||UM).call(Me,void 0,ps[0])}for(ve.position={start:Gl(be.length>0?be[0][1].start:{line:1,column:1,offset:0}),end:Gl(be.length>0?be[be.length-2][1].end:{line:1,column:1,offset:0})},jt=-1;++jt<t.transforms.length;)ve=t.transforms[jt](ve)||ve;return ve}function i(be,ve,Me){let nt=ve-1,jt=-1,ps=!1,tn,Lt,ds,gs;for(;++nt<=Me;){const Ft=be[nt];switch(Ft[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ft[0]==="enter"?jt++:jt--,gs=void 0;break}case"lineEndingBlank":{Ft[0]==="enter"&&(tn&&!gs&&!jt&&!ds&&(ds=nt),gs=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gs=void 0}if(!jt&&Ft[0]==="enter"&&Ft[1].type==="listItemPrefix"||jt===-1&&Ft[0]==="exit"&&(Ft[1].type==="listUnordered"||Ft[1].type==="listOrdered")){if(tn){let Be=nt;for(Lt=void 0;Be--;){const st=be[Be];if(st[1].type==="lineEnding"||st[1].type==="lineEndingBlank"){if(st[0]==="exit")continue;Lt&&(be[Lt][1].type="lineEndingBlank",ps=!0),st[1].type="lineEnding",Lt=Be}else if(!(st[1].type==="linePrefix"||st[1].type==="blockQuotePrefix"||st[1].type==="blockQuotePrefixWhitespace"||st[1].type==="blockQuoteMarker"||st[1].type==="listItemIndent"))break}ds&&(!Lt||ds<Lt)&&(tn._spread=!0),tn.end=Object.assign({},Lt?be[Lt][1].start:Ft[1].end),be.splice(Lt||nt,0,["exit",tn,Ft[2]]),nt++,Me++}if(Ft[1].type==="listItemPrefix"){const Be={type:"listItem",_spread:!1,start:Object.assign({},Ft[1].start),end:void 0};tn=Be,be.splice(nt,0,["enter",Be,Ft[2]]),nt++,Me++,ds=void 0,gs=!0}}}return be[ve][1]._spread=ps,Me}function a(be,ve){return Me;function Me(nt){l.call(this,be(nt),nt),ve&&ve.call(this,nt)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(be,ve,Me){this.stack[this.stack.length-1].children.push(be),this.stack.push(be),this.tokenStack.push([ve,Me||void 0]),be.position={start:Gl(ve.start),end:void 0}}function u(be){return ve;function ve(Me){be&&be.call(this,Me),d.call(this,Me)}}function d(be,ve){const Me=this.stack.pop(),nt=this.tokenStack.pop();if(nt)nt[0].type!==be.type&&(ve?ve.call(this,be,nt[0]):(nt[1]||UM).call(this,be,nt[0]));else throw new Error("Cannot close `"+be.type+"` ("+Rf({start:be.start,end:be.end})+"): its not open");Me.position.end=Gl(be.end)}function m(){return Wk(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function x(be){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(be),10),this.data.expectingFirstListItemValue=void 0}}function v(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=be}function y(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=be}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function S(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.value=be.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.value=be.replace(/(\r?\n|\r)$/g,"")}function _(be){const ve=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ve,Me.identifier=Ta(this.sliceSerialize(be)).toLowerCase()}function j(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.title=be}function T(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.url=be}function E(be){const ve=this.stack[this.stack.length-1];if(!ve.depth){const Me=this.sliceSerialize(be).length;ve.depth=Me}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function R(be){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(be).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function M(be){const Me=this.stack[this.stack.length-1].children;let nt=Me[Me.length-1];(!nt||nt.type!=="text")&&(nt=Ce(),nt.position={start:Gl(be.start),end:void 0},Me.push(nt)),this.stack.push(nt)}function P(be){const ve=this.stack.pop();ve.value+=this.sliceSerialize(be),ve.position.end=Gl(be.end)}function O(be){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Me=ve.children[ve.children.length-1];Me.position.end=Gl(be.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ve.type)&&(M.call(this,be),P.call(this,be))}function F(){this.data.atHardBreak=!0}function $(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.value=be}function z(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.value=be}function H(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.value=be}function I(){const be=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";be.type+="Reference",be.referenceType=ve,delete be.url,delete be.title}else delete be.identifier,delete be.label;this.data.referenceType=void 0}function V(){const be=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";be.type+="Reference",be.referenceType=ve,delete be.url,delete be.title}else delete be.identifier,delete be.label;this.data.referenceType=void 0}function B(be){const ve=this.sliceSerialize(be),Me=this.stack[this.stack.length-2];Me.label=GSe(ve),Me.identifier=Ta(ve).toLowerCase()}function K(){const be=this.stack[this.stack.length-1],ve=this.resume(),Me=this.stack[this.stack.length-1];if(this.data.inReference=!0,Me.type==="link"){const nt=be.children;Me.children=nt}else Me.alt=ve}function L(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.url=be}function G(){const be=this.resume(),ve=this.stack[this.stack.length-1];ve.title=be}function Y(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function Q(be){const ve=this.resume(),Me=this.stack[this.stack.length-1];Me.label=ve,Me.identifier=Ta(this.sliceSerialize(be)).toLowerCase(),this.data.referenceType="full"}function se(be){this.data.characterReferenceType=be.type}function te(be){const ve=this.sliceSerialize(be),Me=this.data.characterReferenceType;let nt;Me?(nt=MH(ve,Me==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):nt=Kk(ve);const jt=this.stack[this.stack.length-1];jt.value+=nt}function ee(be){const ve=this.stack.pop();ve.position.end=Gl(be.end)}function pe(be){P.call(this,be);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(be)}function fe(be){P.call(this,be);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(be)}function re(){return{type:"blockquote",children:[]}}function Z(){return{type:"code",lang:null,meta:null,value:""}}function ie(){return{type:"inlineCode",value:""}}function ce(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function He(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function he(){return{type:"break"}}function Ne(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function qe(){return{type:"link",title:null,url:"",children:[]}}function Ze(be){return{type:"list",ordered:be.type==="listOrdered",start:null,spread:be._spread,children:[]}}function Ae(be){return{type:"listItem",spread:be._spread,checked:null,children:[]}}function De(){return{type:"paragraph",children:[]}}function je(){return{type:"strong",children:[]}}function Ce(){return{type:"text",value:""}}function It(){return{type:"thematicBreak"}}}function Gl(e){return{line:e.line,column:e.column,offset:e.offset}}function qH(e,t){let s=-1;for(;++s<t.length;){const r=t[s];Array.isArray(r)?qH(e,r):KSe(e,r)}}function KSe(e,t){let s;for(s in t)if(VH.call(t,s))switch(s){case"canContainEols":{const r=t[s];r&&e[s].push(...r);break}case"transforms":{const r=t[s];r&&e[s].push(...r);break}case"enter":case"exit":{const r=t[s];r&&Object.assign(e[s],r);break}}}function UM(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Rf({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Rf({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Rf({start:t.start,end:t.end})+") is still open")}function YSe(e){const t=this;t.parser=s;function s(r){return qSe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function XSe(e,t){const s={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,s),e.applyData(t,s)}function ZSe(e,t){const s={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,s),[e.applyData(t,s),{type:"text",value:`
`}]}function QSe(e,t){const s=t.value?t.value+`
`:"",r={},i=t.lang?t.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:s}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function JSe(e,t){const s={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function e_e(e,t){const s={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function t_e(e,t){const s=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=qh(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const u={type:"element",tagName:"a",properties:{href:"#"+s+"fn-"+i,id:s+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const d={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,d),e.applyData(t,d)}function s_e(e,t){const s={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function n_e(e,t){if(e.options.allowDangerousHtml){const s={type:"raw",value:t.value};return e.patch(t,s),e.applyData(t,s)}}function WH(e,t){const s=t.referenceType;let r="]";if(s==="collapsed"?r+="[]":s==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function r_e(e,t){const s=String(t.identifier).toUpperCase(),r=e.definitionById.get(s);if(!r)return WH(e,t);const i={src:qh(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,a),e.applyData(t,a)}function i_e(e,t){const s={src:qh(t.url)};t.alt!==null&&t.alt!==void 0&&(s.alt=t.alt),t.title!==null&&t.title!==void 0&&(s.title=t.title);const r={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,r),e.applyData(t,r)}function a_e(e,t){const s={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,s);const r={type:"element",tagName:"code",properties:{},children:[s]};return e.patch(t,r),e.applyData(t,r)}function o_e(e,t){const s=String(t.identifier).toUpperCase(),r=e.definitionById.get(s);if(!r)return WH(e,t);const i={href:qh(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function l_e(e,t){const s={href:qh(t.url)};t.title!==null&&t.title!==void 0&&(s.title=t.title);const r={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function c_e(e,t,s){const r=e.all(t),i=s?d_e(s):KH(t),a={},o=[];if(typeof t.checked=="boolean"){const m=r[0];let f;m&&m.type==="element"&&m.tagName==="p"?f=m:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const m=r[l];(i||l!==0||m.type!=="element"||m.tagName!=="p")&&o.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!i?o.push(...m.children):o.push(m)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,d),e.applyData(t,d)}function d_e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const s=e.children;let r=-1;for(;!t&&++r<s.length;)t=KH(s[r])}return t}function KH(e){const t=e.spread;return t??e.children.length>1}function u_e(e,t){const s={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(s.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){s.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:s,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function h_e(e,t){const s={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function m_e(e,t){const s={type:"root",children:e.wrap(e.all(t))};return e.patch(t,s),e.applyData(t,s)}function f_e(e,t){const s={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function p_e(e,t){const s=e.all(t),r=s.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(s.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(s,!0)},l=Uk(t.children[1]),u=kH(t.children[t.children.length-1]);l&&u&&(o.position={start:l,end:u}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,a),e.applyData(t,a)}function g_e(e,t,s){const r=s?s.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=s&&s.type==="table"?s.align:void 0,l=o?o.length:t.children.length;let u=-1;const d=[];for(;++u<l;){const f=t.children[u],x={},v=o?o[u]:void 0;v&&(x.align=v);let y={type:"element",tagName:a,properties:x,children:[]};f&&(y.children=e.all(f),e.patch(f,y),y=e.applyData(f,y)),d.push(y)}const m={type:"element",tagName:"tr",properties:{},children:e.wrap(d,!0)};return e.patch(t,m),e.applyData(t,m)}function x_e(e,t){const s={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}const GM=9,VM=32;function v_e(e){const t=String(e),s=/\r?\n|\r/g;let r=s.exec(t),i=0;const a=[];for(;r;)a.push(qM(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=s.exec(t);return a.push(qM(t.slice(i),i>0,!1)),a.join("")}function qM(e,t,s){let r=0,i=e.length;if(t){let a=e.codePointAt(r);for(;a===GM||a===VM;)r++,a=e.codePointAt(r)}if(s){let a=e.codePointAt(i-1);for(;a===GM||a===VM;)i--,a=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function b_e(e,t){const s={type:"text",value:v_e(String(t.value))};return e.patch(t,s),e.applyData(t,s)}function y_e(e,t){const s={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,s),e.applyData(t,s)}const w_e={blockquote:XSe,break:ZSe,code:QSe,delete:JSe,emphasis:e_e,footnoteReference:t_e,heading:s_e,html:n_e,imageReference:r_e,image:i_e,inlineCode:a_e,linkReference:o_e,link:l_e,listItem:c_e,list:u_e,paragraph:h_e,root:m_e,strong:f_e,table:p_e,tableCell:x_e,tableRow:g_e,text:b_e,thematicBreak:y_e,toml:Fx,yaml:Fx,definition:Fx,footnoteDefinition:Fx};function Fx(){}const YH=-1,Zy=0,If=1,_b=2,Xk=3,Zk=4,Qk=5,Jk=6,XH=7,ZH=8,WM=typeof self=="object"?self:globalThis,j_e=(e,t)=>{const s=(i,a)=>(e.set(a,i),i),r=i=>{if(e.has(i))return e.get(i);const[a,o]=t[i];switch(a){case Zy:case YH:return s(o,i);case If:{const l=s([],i);for(const u of o)l.push(r(u));return l}case _b:{const l=s({},i);for(const[u,d]of o)l[r(u)]=r(d);return l}case Xk:return s(new Date(o),i);case Zk:{const{source:l,flags:u}=o;return s(new RegExp(l,u),i)}case Qk:{const l=s(new Map,i);for(const[u,d]of o)l.set(r(u),r(d));return l}case Jk:{const l=s(new Set,i);for(const u of o)l.add(r(u));return l}case XH:{const{name:l,message:u}=o;return s(new WM[l](u),i)}case ZH:return s(BigInt(o),i);case"BigInt":return s(Object(BigInt(o)),i);case"ArrayBuffer":return s(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return s(new DataView(l),o)}}return s(new WM[a](o),i)};return r},KM=e=>j_e(new Map,e)(0),Su="",{toString:S_e}={},{keys:__e}=Object,Xm=e=>{const t=typeof e;if(t!=="object"||!e)return[Zy,t];const s=S_e.call(e).slice(8,-1);switch(s){case"Array":return[If,Su];case"Object":return[_b,Su];case"Date":return[Xk,Su];case"RegExp":return[Zk,Su];case"Map":return[Qk,Su];case"Set":return[Jk,Su];case"DataView":return[If,s]}return s.includes("Array")?[If,s]:s.includes("Error")?[XH,s]:[_b,s]},Bx=([e,t])=>e===Zy&&(t==="function"||t==="symbol"),N_e=(e,t,s,r)=>{const i=(o,l)=>{const u=r.push(o)-1;return s.set(l,u),u},a=o=>{if(s.has(o))return s.get(o);let[l,u]=Xm(o);switch(l){case Zy:{let m=o;switch(u){case"bigint":l=ZH,m=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);m=null;break;case"undefined":return i([YH],o)}return i([l,m],o)}case If:{if(u){let x=o;return u==="DataView"?x=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(x=new Uint8Array(o)),i([u,[...x]],o)}const m=[],f=i([l,m],o);for(const x of o)m.push(a(x));return f}case _b:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const m=[],f=i([l,m],o);for(const x of __e(o))(e||!Bx(Xm(o[x])))&&m.push([a(x),a(o[x])]);return f}case Xk:return i([l,o.toISOString()],o);case Zk:{const{source:m,flags:f}=o;return i([l,{source:m,flags:f}],o)}case Qk:{const m=[],f=i([l,m],o);for(const[x,v]of o)(e||!(Bx(Xm(x))||Bx(Xm(v))))&&m.push([a(x),a(v)]);return f}case Jk:{const m=[],f=i([l,m],o);for(const x of o)(e||!Bx(Xm(x)))&&m.push(a(x));return f}}const{message:d}=o;return i([l,{name:u,message:d}],o)};return a},YM=(e,{json:t,lossy:s}={})=>{const r=[];return N_e(!(t||s),!!t,new Map,r)(e),r},Nb=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?KM(YM(e,t)):structuredClone(e):(e,t)=>KM(YM(e,t));function C_e(e,t){const s=[{type:"text",value:""}];return t>1&&s.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),s}function k_e(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function A_e(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=e.options.footnoteBackContent||C_e,r=e.options.footnoteBackLabel||k_e,i=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<e.footnoteOrder.length;){const d=e.footnoteById.get(e.footnoteOrder[u]);if(!d)continue;const m=e.all(d),f=String(d.identifier).toUpperCase(),x=qh(f.toLowerCase());let v=0;const y=[],w=e.footnoteCounts.get(f);for(;w!==void 0&&++v<=w;){y.length>0&&y.push({type:"text",value:" "});let _=typeof s=="string"?s:s(u,v);typeof _=="string"&&(_={type:"text",value:_}),y.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+x+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,v),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const S=m[m.length-1];if(S&&S.type==="element"&&S.tagName==="p"){const _=S.children[S.children.length-1];_&&_.type==="text"?_.value+=" ":S.children.push({type:"text",value:" "}),S.children.push(...y)}else m.push(...y);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+x},children:e.wrap(m,!0)};e.patch(d,C),l.push(C)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Nb(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Qy=(function(e){if(e==null)return R_e;if(typeof e=="function")return Jy(e);if(typeof e=="object")return Array.isArray(e)?E_e(e):T_e(e);if(typeof e=="string")return P_e(e);throw new Error("Expected function, string, or object as test")});function E_e(e){const t=[];let s=-1;for(;++s<e.length;)t[s]=Qy(e[s]);return Jy(r);function r(...i){let a=-1;for(;++a<t.length;)if(t[a].apply(this,i))return!0;return!1}}function T_e(e){const t=e;return Jy(s);function s(r){const i=r;let a;for(a in e)if(i[a]!==t[a])return!1;return!0}}function P_e(e){return Jy(t);function t(s){return s&&s.type===e}}function Jy(e){return t;function t(s,r,i){return!!(D_e(s)&&e.call(this,s,typeof r=="number"?r:void 0,i||void 0))}}function R_e(){return!0}function D_e(e){return e!==null&&typeof e=="object"&&"type"in e}const QH=[],I_e=!0,ON=!1,M_e="skip";function JH(e,t,s,r){let i;typeof t=="function"&&typeof s!="function"?(r=s,s=t):i=t;const a=Qy(i),o=r?-1:1;l(e,void 0,[])();function l(u,d,m){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const v=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(x,"name",{value:"node ("+(u.type+(v?"<"+v+">":""))+")"})}return x;function x(){let v=QH,y,w,S;if((!t||a(u,d,m[m.length-1]||void 0))&&(v=L_e(s(u,m)),v[0]===ON))return v;if("children"in u&&u.children){const C=u;if(C.children&&v[0]!==M_e)for(w=(r?C.children.length:-1)+o,S=m.concat(C);w>-1&&w<C.children.length;){const _=C.children[w];if(y=l(_,w,S)(),y[0]===ON)return y;w=typeof y[1]=="number"?y[1]:w+o}}return v}}}function L_e(e){return Array.isArray(e)?e:typeof e=="number"?[I_e,e]:e==null?QH:[e]}function eA(e,t,s,r){let i,a,o;typeof t=="function"&&typeof s!="function"?(a=void 0,o=t,i=s):(a=t,o=s,i=r),JH(e,a,l,i);function l(u,d){const m=d[d.length-1],f=m?m.children.indexOf(u):void 0;return o(u,f,m)}}const FN={}.hasOwnProperty,O_e={};function F_e(e,t){const s=t||O_e,r=new Map,i=new Map,a=new Map,o={...w_e,...s.handlers},l={all:d,applyData:z_e,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:u,options:s,patch:B_e,wrap:H_e};return eA(e,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const f=m.type==="definition"?r:i,x=String(m.identifier).toUpperCase();f.has(x)||f.set(x,m)}}),l;function u(m,f){const x=m.type,v=l.handlers[x];if(FN.call(l.handlers,x)&&v)return v(l,m,f);if(l.options.passThrough&&l.options.passThrough.includes(x)){if("children"in m){const{children:w,...S}=m,C=Nb(S);return C.children=l.all(m),C}return Nb(m)}return(l.options.unknownHandler||$_e)(l,m,f)}function d(m){const f=[];if("children"in m){const x=m.children;let v=-1;for(;++v<x.length;){const y=l.one(x[v],m);if(y){if(v&&x[v-1].type==="break"&&(!Array.isArray(y)&&y.type==="text"&&(y.value=XM(y.value)),!Array.isArray(y)&&y.type==="element")){const w=y.children[0];w&&w.type==="text"&&(w.value=XM(w.value))}Array.isArray(y)?f.push(...y):f.push(y)}}}return f}}function B_e(e,t){e.position&&(t.position=k0e(e))}function z_e(e,t){let s=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(s.type==="element")s.tagName=r;else{const o="children"in s?s.children:[s];s={type:"element",tagName:r,properties:{},children:o}}s.type==="element"&&a&&Object.assign(s.properties,Nb(a)),"children"in s&&s.children&&i!==null&&i!==void 0&&(s.children=i)}return s}function $_e(e,t){const s=t.data||{},r="value"in t&&!(FN.call(s,"hProperties")||FN.call(s,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function H_e(e,t){const s=[];let r=-1;for(t&&s.push({type:"text",value:`
`});++r<e.length;)r&&s.push({type:"text",value:`
`}),s.push(e[r]);return t&&e.length>0&&s.push({type:"text",value:`
`}),s}function XM(e){let t=0,s=e.charCodeAt(t);for(;s===9||s===32;)t++,s=e.charCodeAt(t);return e.slice(t)}function ZM(e,t){const s=F_e(e,t),r=s.one(e,void 0),i=A_e(s),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function U_e(e,t){return e&&"run"in e?async function(s,r){const i=ZM(s,{file:r,...t});await e.run(i,r)}:function(s,r){return ZM(s,{file:r,...e||t})}}function QM(e){if(e)throw e}var RS,JM;function G_e(){if(JM)return RS;JM=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):t.call(d)==="[object Array]"},a=function(d){if(!d||t.call(d)!=="[object Object]")return!1;var m=e.call(d,"constructor"),f=d.constructor&&d.constructor.prototype&&e.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!m&&!f)return!1;var x;for(x in d);return typeof x>"u"||e.call(d,x)},o=function(d,m){s&&m.name==="__proto__"?s(d,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):d[m.name]=m.newValue},l=function(d,m){if(m==="__proto__")if(e.call(d,m)){if(r)return r(d,m).value}else return;return d[m]};return RS=function u(){var d,m,f,x,v,y,w=arguments[0],S=1,C=arguments.length,_=!1;for(typeof w=="boolean"&&(_=w,w=arguments[1]||{},S=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});S<C;++S)if(d=arguments[S],d!=null)for(m in d)f=l(w,m),x=l(d,m),w!==x&&(_&&x&&(a(x)||(v=i(x)))?(v?(v=!1,y=f&&i(f)?f:[]):y=f&&a(f)?f:{},o(w,{name:m,newValue:u(_,y,x)})):typeof x<"u"&&o(w,{name:m,newValue:x}));return w},RS}var V_e=G_e();const DS=gh(V_e);function BN(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function q_e(){const e=[],t={run:s,use:r};return t;function s(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(u,...d){const m=e[++a];let f=-1;if(u){o(u);return}for(;++f<i.length;)(d[f]===null||d[f]===void 0)&&(d[f]=i[f]);i=d,m?W_e(m,l)(...d):o(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function W_e(e,t){let s;return r;function r(...o){const l=e.length>o.length;let u;l&&o.push(i);try{u=e.apply(this,o)}catch(d){const m=d;if(l&&s)throw m;return i(m)}l||(u&&u.then&&typeof u.then=="function"?u.then(a,i):u instanceof Error?i(u):a(u))}function i(o,...l){s||(s=!0,t(o,...l))}function a(o){i(null,o)}}const Ya={basename:K_e,dirname:Y_e,extname:X_e,join:Z_e,sep:"/"};function K_e(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Yp(e);let s=0,r=-1,i=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(a){s=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":e.slice(s,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(a){s=i+1;break}}else o<0&&(a=!0,o=i+1),l>-1&&(e.codePointAt(i)===t.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return s===r?r=o:r<0&&(r=e.length),e.slice(s,r)}function Y_e(e){if(Yp(e),e.length===0)return".";let t=-1,s=e.length,r;for(;--s;)if(e.codePointAt(s)===47){if(r){t=s;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function X_e(e){Yp(e);let t=e.length,s=-1,r=0,i=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}s<0&&(o=!0,s=t+1),l===46?i<0?i=t:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||s<0||a===0||a===1&&i===s-1&&i===r+1?"":e.slice(i,s)}function Z_e(...e){let t=-1,s;for(;++t<e.length;)Yp(e[t]),e[t]&&(s=s===void 0?e[t]:s+"/"+e[t]);return s===void 0?".":Q_e(s)}function Q_e(e){Yp(e);const t=e.codePointAt(0)===47;let s=J_e(e,!t);return s.length===0&&!t&&(s="."),s.length>0&&e.codePointAt(e.length-1)===47&&(s+="/"),t?"/"+s:s}function J_e(e,t){let s="",r=0,i=-1,a=0,o=-1,l,u;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(s.length<2||r!==2||s.codePointAt(s.length-1)!==46||s.codePointAt(s.length-2)!==46){if(s.length>2){if(u=s.lastIndexOf("/"),u!==s.length-1){u<0?(s="",r=0):(s=s.slice(0,u),r=s.length-1-s.lastIndexOf("/")),i=o,a=0;continue}}else if(s.length>0){s="",r=0,i=o,a=0;continue}}t&&(s=s.length>0?s+"/..":"..",r=2)}else s.length>0?s+="/"+e.slice(i+1,o):s=e.slice(i+1,o),r=o-i-1;i=o,a=0}else l===46&&a>-1?a++:a=-1}return s}function Yp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const eNe={cwd:tNe};function tNe(){return"/"}function zN(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function sNe(e){if(typeof e=="string")e=new URL(e);else if(!zN(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return nNe(e)}function nNe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let s=-1;for(;++s<t.length;)if(t.codePointAt(s)===37&&t.codePointAt(s+1)===50){const r=t.codePointAt(s+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const IS=["history","path","basename","stem","extname","dirname"];class eU{constructor(t){let s;t?zN(t)?s={path:t}:typeof t=="string"||rNe(t)?s={value:t}:s=t:s={},this.cwd="cwd"in s?"":eNe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<IS.length;){const a=IS[r];a in s&&s[a]!==void 0&&s[a]!==null&&(this[a]=a==="history"?[...s[a]]:s[a])}let i;for(i in s)IS.includes(i)||(this[i]=s[i])}get basename(){return typeof this.path=="string"?Ya.basename(this.path):void 0}set basename(t){LS(t,"basename"),MS(t,"basename"),this.path=Ya.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ya.dirname(this.path):void 0}set dirname(t){e4(this.basename,"dirname"),this.path=Ya.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ya.extname(this.path):void 0}set extname(t){if(MS(t,"extname"),e4(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ya.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){zN(t)&&(t=sNe(t)),LS(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ya.basename(this.path,this.extname):void 0}set stem(t){LS(t,"stem"),MS(t,"stem"),this.path=Ya.join(this.dirname||"",t+(this.extname||""))}fail(t,s,r){const i=this.message(t,s,r);throw i.fatal=!0,i}info(t,s,r){const i=this.message(t,s,r);return i.fatal=void 0,i}message(t,s,r){const i=new Fr(t,s,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function MS(e,t){if(e&&e.includes(Ya.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ya.sep+"`")}function LS(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function e4(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function rNe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const iNe=(function(e){const r=this.constructor.prototype,i=r[e],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),aNe={}.hasOwnProperty;class tA extends iNe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=q_e()}copy(){const t=new tA;let s=-1;for(;++s<this.attachers.length;){const r=this.attachers[s];t.use(...r)}return t.data(DS(!0,{},this.namespace)),t}data(t,s){return typeof t=="string"?arguments.length===2?(BS("data",this.frozen),this.namespace[t]=s,this):aNe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(BS("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[s,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=s.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const s=zx(t),r=this.parser||this.Parser;return OS("parse",r),r(String(s),s)}process(t,s){const r=this;return this.freeze(),OS("process",this.parser||this.Parser),FS("process",this.compiler||this.Compiler),s?i(void 0,s):new Promise(i);function i(a,o){const l=zx(t),u=r.parse(l);r.run(u,l,function(m,f,x){if(m||!f||!x)return d(m);const v=f,y=r.stringify(v,x);cNe(y)?x.value=y:x.result=y,d(m,x)});function d(m,f){m||!f?o(m):a?a(f):s(void 0,f)}}}processSync(t){let s=!1,r;return this.freeze(),OS("processSync",this.parser||this.Parser),FS("processSync",this.compiler||this.Compiler),this.process(t,i),s4("processSync","process",s),r;function i(a,o){s=!0,QM(a),r=o}}run(t,s,r){t4(t),this.freeze();const i=this.transformers;return!r&&typeof s=="function"&&(r=s,s=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const u=zx(s);i.run(t,u,d);function d(m,f,x){const v=f||t;m?l(m):o?o(v):r(void 0,v,x)}}}runSync(t,s){let r=!1,i;return this.run(t,s,a),s4("runSync","run",r),i;function a(o,l){QM(o),i=l,r=!0}}stringify(t,s){this.freeze();const r=zx(s),i=this.compiler||this.Compiler;return FS("stringify",i),t4(t),i(t,r)}use(t,...s){const r=this.attachers,i=this.namespace;if(BS("use",this.frozen),t!=null)if(typeof t=="function")u(t,s);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(d){if(typeof d=="function")u(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[m,...f]=d;u(m,f)}else o(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function o(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=DS(!0,i.settings,d.settings))}function l(d){let m=-1;if(d!=null)if(Array.isArray(d))for(;++m<d.length;){const f=d[m];a(f)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function u(d,m){let f=-1,x=-1;for(;++f<r.length;)if(r[f][0]===d){x=f;break}if(x===-1)r.push([d,...m]);else if(m.length>0){let[v,...y]=m;const w=r[x][1];BN(w)&&BN(v)&&(v=DS(!0,w,v)),r[x]=[d,v,...y]}}}}const oNe=new tA().freeze();function OS(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function FS(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function BS(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function t4(e){if(!BN(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function s4(e,t,s){if(!s)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function zx(e){return lNe(e)?e:new eU(e)}function lNe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function cNe(e){return typeof e=="string"||dNe(e)}function dNe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const uNe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",n4=[],r4={allowDangerousHtml:!0},hNe=/^(https?|ircs?|mailto|xmpp)$/i,mNe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ew(e){const t=fNe(e),s=pNe(e);return gNe(t.runSync(t.parse(s),s),e)}function fNe(e){const t=e.rehypePlugins||n4,s=e.remarkPlugins||n4,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...r4}:r4;return oNe().use(YSe).use(s).use(U_e,r).use(t)}function pNe(e){const t=e.children||"",s=new eU;return typeof t=="string"&&(s.value=t),s}function gNe(e,t){const s=t.allowedElements,r=t.allowElement,i=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,u=t.urlTransform||xNe;for(const m of mNe)Object.hasOwn(t,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+uNe+m.id,void 0);return eA(e,d),R0e(e,{Fragment:n.Fragment,components:i,ignoreInvalidStyle:!0,jsx:n.jsx,jsxs:n.jsxs,passKeys:!0,passNode:!0});function d(m,f,x){if(m.type==="raw"&&x&&typeof f=="number")return o?x.children.splice(f,1):x.children[f]={type:"text",value:m.value},f;if(m.type==="element"){let v;for(v in ES)if(Object.hasOwn(ES,v)&&Object.hasOwn(m.properties,v)){const y=m.properties[v],w=ES[v];(w===null||w.includes(m.tagName))&&(m.properties[v]=u(String(y||""),v,m))}}if(m.type==="element"){let v=s?!s.includes(m.tagName):a?a.includes(m.tagName):!1;if(!v&&r&&typeof f=="number"&&(v=!r(m,f,x)),v&&x&&typeof f=="number")return l&&m.children?x.children.splice(f,1,...m.children):x.children.splice(f,1),f}}}function xNe(e){const t=e.indexOf(":"),s=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||s!==-1&&t>s||r!==-1&&t>r||hNe.test(e.slice(0,t))?e:""}function i4(e,t){const s=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=s.indexOf(t);for(;i!==-1;)r++,i=s.indexOf(t,i+t.length);return r}function vNe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function bNe(e,t,s){const i=Qy((s||{}).ignore||[]),a=yNe(t);let o=-1;for(;++o<a.length;)JH(e,"text",l);function l(d,m){let f=-1,x;for(;++f<m.length;){const v=m[f],y=x?x.children:void 0;if(i(v,y?y.indexOf(v):void 0,x))return;x=v}if(x)return u(d,m)}function u(d,m){const f=m[m.length-1],x=a[o][0],v=a[o][1];let y=0;const S=f.children.indexOf(d);let C=!1,_=[];x.lastIndex=0;let j=x.exec(d.value);for(;j;){const T=j.index,E={index:j.index,input:j.input,stack:[...m,d]};let A=v(...j,E);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?x.lastIndex=T+1:(y!==T&&_.push({type:"text",value:d.value.slice(y,T)}),Array.isArray(A)?_.push(...A):A&&_.push(A),y=T+j[0].length,C=!0),!x.global)break;j=x.exec(d.value)}return C?(y<d.value.length&&_.push({type:"text",value:d.value.slice(y)}),f.children.splice(S,1,..._)):_=[d],S+_.length}}function yNe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const s=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<s.length;){const i=s[r];t.push([wNe(i[0]),jNe(i[1])])}return t}function wNe(e){return typeof e=="string"?new RegExp(vNe(e),"g"):e}function jNe(e){return typeof e=="function"?e:function(){return e}}const zS="phrasing",$S=["autolink","link","image","label"];function SNe(){return{transforms:[TNe],enter:{literalAutolink:NNe,literalAutolinkEmail:HS,literalAutolinkHttp:HS,literalAutolinkWww:HS},exit:{literalAutolink:ENe,literalAutolinkEmail:ANe,literalAutolinkHttp:CNe,literalAutolinkWww:kNe}}}function _Ne(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:zS,notInConstruct:$S},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:zS,notInConstruct:$S},{character:":",before:"[ps]",after:"\\/",inConstruct:zS,notInConstruct:$S}]}}function NNe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function HS(e){this.config.enter.autolinkProtocol.call(this,e)}function CNe(e){this.config.exit.autolinkProtocol.call(this,e)}function kNe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ANe(e){this.config.exit.autolinkEmail.call(this,e)}function ENe(e){this.exit(e)}function TNe(e){bNe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,PNe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),RNe]],{ignore:["link","linkReference"]})}function PNe(e,t,s,r,i){let a="";if(!tU(i)||(/^w/i.test(t)&&(s=t+s,t="",a="http://"),!DNe(s)))return!1;const o=INe(s+r);if(!o[0])return!1;const l={type:"link",title:null,url:a+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function RNe(e,t,s,r){return!tU(r,!0)||/[-\d_]$/.test(s)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+s,children:[{type:"text",value:t+"@"+s}]}}function DNe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function INe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let s=t[0],r=s.indexOf(")");const i=i4(e,"(");let a=i4(e,")");for(;r!==-1&&i>a;)e+=s.slice(0,r+1),s=s.slice(r+1),r=s.indexOf(")"),a++;return[e,s]}function tU(e,t){const s=e.input.charCodeAt(e.index-1);return(e.index===0||gd(s)||Yy(s))&&(!t||s!==47)}sU.peek=UNe;function MNe(){this.buffer()}function LNe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ONe(){this.buffer()}function FNe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function BNe(e){const t=this.resume(),s=this.stack[this.stack.length-1];s.type,s.identifier=Ta(this.sliceSerialize(e)).toLowerCase(),s.label=t}function zNe(e){this.exit(e)}function $Ne(e){const t=this.resume(),s=this.stack[this.stack.length-1];s.type,s.identifier=Ta(this.sliceSerialize(e)).toLowerCase(),s.label=t}function HNe(e){this.exit(e)}function UNe(){return"["}function sU(e,t,s,r){const i=s.createTracker(r);let a=i.move("[^");const o=s.enter("footnoteReference"),l=s.enter("reference");return a+=i.move(s.safe(s.associationId(e),{after:"]",before:a})),l(),o(),a+=i.move("]"),a}function GNe(){return{enter:{gfmFootnoteCallString:MNe,gfmFootnoteCall:LNe,gfmFootnoteDefinitionLabelString:ONe,gfmFootnoteDefinition:FNe},exit:{gfmFootnoteCallString:BNe,gfmFootnoteCall:zNe,gfmFootnoteDefinitionLabelString:$Ne,gfmFootnoteDefinition:HNe}}}function VNe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:s,footnoteReference:sU},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function s(r,i,a,o){const l=a.createTracker(o);let u=l.move("[^");const d=a.enter("footnoteDefinition"),m=a.enter("label");return u+=l.move(a.safe(a.associationId(r),{before:u,after:"]"})),m(),u+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),u+=l.move((t?`
`:" ")+a.indentLines(a.containerFlow(r,l.current()),t?nU:qNe))),d(),u}}function qNe(e,t,s){return t===0?e:nU(e,t,s)}function nU(e,t,s){return(s?"":"    ")+e}const WNe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];rU.peek=QNe;function KNe(){return{canContainEols:["delete"],enter:{strikethrough:XNe},exit:{strikethrough:ZNe}}}function YNe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:WNe}],handlers:{delete:rU}}}function XNe(e){this.enter({type:"delete",children:[]},e)}function ZNe(e){this.exit(e)}function rU(e,t,s,r){const i=s.createTracker(r),a=s.enter("strikethrough");let o=i.move("~~");return o+=s.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function QNe(){return"~"}function JNe(e){return e.length}function eCe(e,t){const s=t||{},r=(s.align||[]).concat(),i=s.stringLength||JNe,a=[],o=[],l=[],u=[];let d=0,m=-1;for(;++m<e.length;){const w=[],S=[];let C=-1;for(e[m].length>d&&(d=e[m].length);++C<e[m].length;){const _=tCe(e[m][C]);if(s.alignDelimiters!==!1){const j=i(_);S[C]=j,(u[C]===void 0||j>u[C])&&(u[C]=j)}w.push(_)}o[m]=w,l[m]=S}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<d;)a[f]=a4(r[f]);else{const w=a4(r);for(;++f<d;)a[f]=w}f=-1;const x=[],v=[];for(;++f<d;){const w=a[f];let S="",C="";w===99?(S=":",C=":"):w===108?S=":":w===114&&(C=":");let _=s.alignDelimiters===!1?1:Math.max(1,u[f]-S.length-C.length);const j=S+"-".repeat(_)+C;s.alignDelimiters!==!1&&(_=S.length+_+C.length,_>u[f]&&(u[f]=_),v[f]=_),x[f]=j}o.splice(1,0,x),l.splice(1,0,v),m=-1;const y=[];for(;++m<o.length;){const w=o[m],S=l[m];f=-1;const C=[];for(;++f<d;){const _=w[f]||"";let j="",T="";if(s.alignDelimiters!==!1){const E=u[f]-(S[f]||0),A=a[f];A===114?j=" ".repeat(E):A===99?E%2?(j=" ".repeat(E/2+.5),T=" ".repeat(E/2-.5)):(j=" ".repeat(E/2),T=j):T=" ".repeat(E)}s.delimiterStart!==!1&&!f&&C.push("|"),s.padding!==!1&&!(s.alignDelimiters===!1&&_==="")&&(s.delimiterStart!==!1||f)&&C.push(" "),s.alignDelimiters!==!1&&C.push(j),C.push(_),s.alignDelimiters!==!1&&C.push(T),s.padding!==!1&&C.push(" "),(s.delimiterEnd!==!1||f!==d-1)&&C.push("|")}y.push(s.delimiterEnd===!1?C.join("").replace(/ +$/,""):C.join(""))}return y.join(`
`)}function tCe(e){return e==null?"":String(e)}function a4(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function sCe(e,t,s,r){const i=s.enter("blockquote"),a=s.createTracker(r);a.move("> "),a.shift(2);const o=s.indentLines(s.containerFlow(e,a.current()),nCe);return i(),o}function nCe(e,t,s){return">"+(s?"":" ")+e}function rCe(e,t){return o4(e,t.inConstruct,!0)&&!o4(e,t.notInConstruct,!1)}function o4(e,t,s){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return s;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function l4(e,t,s,r){let i=-1;for(;++i<s.unsafe.length;)if(s.unsafe[i].character===`
`&&rCe(s.stack,s.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function iCe(e,t){const s=String(e);let r=s.indexOf(t),i=r,a=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+t.length,r=s.indexOf(t,i);return o}function aCe(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function oCe(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function lCe(e,t,s,r){const i=oCe(s),a=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(aCe(e,s)){const f=s.enter("codeIndented"),x=s.indentLines(a,cCe);return f(),x}const l=s.createTracker(r),u=i.repeat(Math.max(iCe(a,i)+1,3)),d=s.enter("codeFenced");let m=l.move(u);if(e.lang){const f=s.enter(`codeFencedLang${o}`);m+=l.move(s.safe(e.lang,{before:m,after:" ",encode:["`"],...l.current()})),f()}if(e.lang&&e.meta){const f=s.enter(`codeFencedMeta${o}`);m+=l.move(" "),m+=l.move(s.safe(e.meta,{before:m,after:`
`,encode:["`"],...l.current()})),f()}return m+=l.move(`
`),a&&(m+=l.move(a+`
`)),m+=l.move(u),d(),m}function cCe(e,t,s){return(s?"":"    ")+e}function sA(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function dCe(e,t,s,r){const i=sA(s),a=i==='"'?"Quote":"Apostrophe",o=s.enter("definition");let l=s.enter("label");const u=s.createTracker(r);let d=u.move("[");return d+=u.move(s.safe(s.associationId(e),{before:d,after:"]",...u.current()})),d+=u.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=s.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(s.safe(e.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(l=s.enter("destinationRaw"),d+=u.move(s.safe(e.url,{before:d,after:e.title?" ":`
`,...u.current()}))),l(),e.title&&(l=s.enter(`title${a}`),d+=u.move(" "+i),d+=u.move(s.safe(e.title,{before:d,after:i,...u.current()})),d+=u.move(i),l()),o(),d}function uCe(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function op(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Cb(e,t,s){const r=mh(e),i=mh(t);return r===void 0?i===void 0?s==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}iU.peek=hCe;function iU(e,t,s,r){const i=uCe(s),a=s.enter("emphasis"),o=s.createTracker(r),l=o.move(i);let u=o.move(s.containerPhrasing(e,{after:i,before:l,...o.current()}));const d=u.charCodeAt(0),m=Cb(r.before.charCodeAt(r.before.length-1),d,i);m.inside&&(u=op(d)+u.slice(1));const f=u.charCodeAt(u.length-1),x=Cb(r.after.charCodeAt(0),f,i);x.inside&&(u=u.slice(0,-1)+op(f));const v=o.move(i);return a(),s.attentionEncodeSurroundingInfo={after:x.outside,before:m.outside},l+u+v}function hCe(e,t,s){return s.options.emphasis||"*"}function mCe(e,t){let s=!1;return eA(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return s=!0,ON}),!!((!e.depth||e.depth<3)&&Wk(e)&&(t.options.setext||s))}function fCe(e,t,s,r){const i=Math.max(Math.min(6,e.depth||1),1),a=s.createTracker(r);if(mCe(e,s)){const m=s.enter("headingSetext"),f=s.enter("phrasing"),x=s.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return f(),m(),x+`
`+(i===1?"=":"-").repeat(x.length-(Math.max(x.lastIndexOf("\r"),x.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=s.enter("headingAtx"),u=s.enter("phrasing");a.move(o+" ");let d=s.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(d)&&(d=op(d.charCodeAt(0))+d.slice(1)),d=d?o+" "+d:o,s.options.closeAtx&&(d+=" "+o),u(),l(),d}aU.peek=pCe;function aU(e){return e.value||""}function pCe(){return"<"}oU.peek=gCe;function oU(e,t,s,r){const i=sA(s),a=i==='"'?"Quote":"Apostrophe",o=s.enter("image");let l=s.enter("label");const u=s.createTracker(r);let d=u.move("![");return d+=u.move(s.safe(e.alt,{before:d,after:"]",...u.current()})),d+=u.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=s.enter("destinationLiteral"),d+=u.move("<"),d+=u.move(s.safe(e.url,{before:d,after:">",...u.current()})),d+=u.move(">")):(l=s.enter("destinationRaw"),d+=u.move(s.safe(e.url,{before:d,after:e.title?" ":")",...u.current()}))),l(),e.title&&(l=s.enter(`title${a}`),d+=u.move(" "+i),d+=u.move(s.safe(e.title,{before:d,after:i,...u.current()})),d+=u.move(i),l()),d+=u.move(")"),o(),d}function gCe(){return"!"}lU.peek=xCe;function lU(e,t,s,r){const i=e.referenceType,a=s.enter("imageReference");let o=s.enter("label");const l=s.createTracker(r);let u=l.move("![");const d=s.safe(e.alt,{before:u,after:"]",...l.current()});u+=l.move(d+"]["),o();const m=s.stack;s.stack=[],o=s.enter("reference");const f=s.safe(s.associationId(e),{before:u,after:"]",...l.current()});return o(),s.stack=m,a(),i==="full"||!d||d!==f?u+=l.move(f+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function xCe(){return"!"}cU.peek=vCe;function cU(e,t,s){let r=e.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<s.unsafe.length;){const o=s.unsafe[a],l=s.compilePattern(o);let u;if(o.atBreak)for(;u=l.exec(r);){let d=u.index;r.charCodeAt(d)===10&&r.charCodeAt(d-1)===13&&d--,r=r.slice(0,d)+" "+r.slice(u.index+1)}}return i+r+i}function vCe(){return"`"}function dU(e,t){const s=Wk(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(s===e.url||"mailto:"+s===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}uU.peek=bCe;function uU(e,t,s,r){const i=sA(s),a=i==='"'?"Quote":"Apostrophe",o=s.createTracker(r);let l,u;if(dU(e,s)){const m=s.stack;s.stack=[],l=s.enter("autolink");let f=o.move("<");return f+=o.move(s.containerPhrasing(e,{before:f,after:">",...o.current()})),f+=o.move(">"),l(),s.stack=m,f}l=s.enter("link"),u=s.enter("label");let d=o.move("[");return d+=o.move(s.containerPhrasing(e,{before:d,after:"](",...o.current()})),d+=o.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=s.enter("destinationLiteral"),d+=o.move("<"),d+=o.move(s.safe(e.url,{before:d,after:">",...o.current()})),d+=o.move(">")):(u=s.enter("destinationRaw"),d+=o.move(s.safe(e.url,{before:d,after:e.title?" ":")",...o.current()}))),u(),e.title&&(u=s.enter(`title${a}`),d+=o.move(" "+i),d+=o.move(s.safe(e.title,{before:d,after:i,...o.current()})),d+=o.move(i),u()),d+=o.move(")"),l(),d}function bCe(e,t,s){return dU(e,s)?"<":"["}hU.peek=yCe;function hU(e,t,s,r){const i=e.referenceType,a=s.enter("linkReference");let o=s.enter("label");const l=s.createTracker(r);let u=l.move("[");const d=s.containerPhrasing(e,{before:u,after:"]",...l.current()});u+=l.move(d+"]["),o();const m=s.stack;s.stack=[],o=s.enter("reference");const f=s.safe(s.associationId(e),{before:u,after:"]",...l.current()});return o(),s.stack=m,a(),i==="full"||!d||d!==f?u+=l.move(f+"]"):i==="shortcut"?u=u.slice(0,-1):u+=l.move("]"),u}function yCe(){return"["}function nA(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function wCe(e){const t=nA(e),s=e.options.bulletOther;if(!s)return t==="*"?"-":"*";if(s!=="*"&&s!=="+"&&s!=="-")throw new Error("Cannot serialize items with `"+s+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(s===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+s+"`) to be different");return s}function jCe(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function mU(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function SCe(e,t,s,r){const i=s.enter("list"),a=s.bulletCurrent;let o=e.ordered?jCe(s):nA(s);const l=e.ordered?o==="."?")":".":wCe(s);let u=t&&s.bulletLastUsed?o===s.bulletLastUsed:!1;if(!e.ordered){const m=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&m&&(!m.children||!m.children[0])&&s.stack[s.stack.length-1]==="list"&&s.stack[s.stack.length-2]==="listItem"&&s.stack[s.stack.length-3]==="list"&&s.stack[s.stack.length-4]==="listItem"&&s.indexStack[s.indexStack.length-1]===0&&s.indexStack[s.indexStack.length-2]===0&&s.indexStack[s.indexStack.length-3]===0&&(u=!0),mU(s)===o&&m){let f=-1;for(;++f<e.children.length;){const x=e.children[f];if(x&&x.type==="listItem"&&x.children&&x.children[0]&&x.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(o=l),s.bulletCurrent=o;const d=s.containerFlow(e,r);return s.bulletLastUsed=o,s.bulletCurrent=a,i(),d}function _Ce(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function NCe(e,t,s,r){const i=_Ce(s);let a=s.bulletCurrent||nA(s);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(s.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=s.createTracker(r);l.move(a+" ".repeat(o-a.length)),l.shift(o);const u=s.enter("listItem"),d=s.indentLines(s.containerFlow(e,l.current()),m);return u(),d;function m(f,x,v){return x?(v?"":" ".repeat(o))+f:(v?a:a+" ".repeat(o-a.length))+f}}function CCe(e,t,s,r){const i=s.enter("paragraph"),a=s.enter("phrasing"),o=s.containerPhrasing(e,r);return a(),i(),o}const kCe=Qy(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ACe(e,t,s,r){return(e.children.some(function(o){return kCe(o)})?s.containerPhrasing:s.containerFlow).call(s,e,r)}function ECe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}fU.peek=TCe;function fU(e,t,s,r){const i=ECe(s),a=s.enter("strong"),o=s.createTracker(r),l=o.move(i+i);let u=o.move(s.containerPhrasing(e,{after:i,before:l,...o.current()}));const d=u.charCodeAt(0),m=Cb(r.before.charCodeAt(r.before.length-1),d,i);m.inside&&(u=op(d)+u.slice(1));const f=u.charCodeAt(u.length-1),x=Cb(r.after.charCodeAt(0),f,i);x.inside&&(u=u.slice(0,-1)+op(f));const v=o.move(i+i);return a(),s.attentionEncodeSurroundingInfo={after:x.outside,before:m.outside},l+u+v}function TCe(e,t,s){return s.options.strong||"*"}function PCe(e,t,s,r){return s.safe(e.value,r)}function RCe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function DCe(e,t,s){const r=(mU(s)+(s.options.ruleSpaces?" ":"")).repeat(RCe(s));return s.options.ruleSpaces?r.slice(0,-1):r}const pU={blockquote:sCe,break:l4,code:lCe,definition:dCe,emphasis:iU,hardBreak:l4,heading:fCe,html:aU,image:oU,imageReference:lU,inlineCode:cU,link:uU,linkReference:hU,list:SCe,listItem:NCe,paragraph:CCe,root:ACe,strong:fU,text:PCe,thematicBreak:DCe};function ICe(){return{enter:{table:MCe,tableData:c4,tableHeader:c4,tableRow:OCe},exit:{codeText:FCe,table:LCe,tableData:US,tableHeader:US,tableRow:US}}}function MCe(e){const t=e._align;this.enter({type:"table",align:t.map(function(s){return s==="none"?null:s}),children:[]},e),this.data.inTable=!0}function LCe(e){this.exit(e),this.data.inTable=void 0}function OCe(e){this.enter({type:"tableRow",children:[]},e)}function US(e){this.exit(e)}function c4(e){this.enter({type:"tableCell",children:[]},e)}function FCe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,BCe));const s=this.stack[this.stack.length-1];s.type,s.value=t,this.exit(e)}function BCe(e,t){return t==="|"?t:e}function zCe(e){const t=e||{},s=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,a=s?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:x,table:o,tableCell:u,tableRow:l}};function o(v,y,w,S){return d(m(v,w,S),v.align)}function l(v,y,w,S){const C=f(v,w,S),_=d([C]);return _.slice(0,_.indexOf(`
`))}function u(v,y,w,S){const C=w.enter("tableCell"),_=w.enter("phrasing"),j=w.containerPhrasing(v,{...S,before:a,after:a});return _(),C(),j}function d(v,y){return eCe(v,{align:y,alignDelimiters:r,padding:s,stringLength:i})}function m(v,y,w){const S=v.children;let C=-1;const _=[],j=y.enter("table");for(;++C<S.length;)_[C]=f(S[C],y,w);return j(),_}function f(v,y,w){const S=v.children;let C=-1;const _=[],j=y.enter("tableRow");for(;++C<S.length;)_[C]=u(S[C],v,y,w);return j(),_}function x(v,y,w){let S=pU.inlineCode(v,y,w);return w.stack.includes("tableCell")&&(S=S.replace(/\|/g,"\\$&")),S}}function $Ce(){return{exit:{taskListCheckValueChecked:d4,taskListCheckValueUnchecked:d4,paragraph:UCe}}}function HCe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:GCe}}}function d4(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function UCe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const s=this.stack[this.stack.length-1];s.type;const r=s.children[0];if(r&&r.type==="text"){const i=t.children;let a=-1,o;for(;++a<i.length;){const l=i[a];if(l.type==="paragraph"){o=l;break}}o===s&&(r.value=r.value.slice(1),r.value.length===0?s.children.shift():s.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,s.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function GCe(e,t,s,r){const i=e.children[0],a=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=s.createTracker(r);a&&l.move(o);let u=pU.listItem(e,t,s,{...r,...l.current()});return a&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,d)),u;function d(m){return m+o}}function VCe(){return[SNe(),GNe(),KNe(),ICe(),$Ce()]}function qCe(e){return{extensions:[_Ne(),VNe(e),YNe(),zCe(e),HCe()]}}const WCe={tokenize:JCe,partial:!0},gU={tokenize:e1e,partial:!0},xU={tokenize:t1e,partial:!0},vU={tokenize:s1e,partial:!0},KCe={tokenize:n1e,partial:!0},bU={name:"wwwAutolink",tokenize:ZCe,previous:wU},yU={name:"protocolAutolink",tokenize:QCe,previous:jU},gl={name:"emailAutolink",tokenize:XCe,previous:SU},Co={};function YCe(){return{text:Co}}let zc=48;for(;zc<123;)Co[zc]=gl,zc++,zc===58?zc=65:zc===91&&(zc=97);Co[43]=gl;Co[45]=gl;Co[46]=gl;Co[95]=gl;Co[72]=[gl,yU];Co[104]=[gl,yU];Co[87]=[gl,bU];Co[119]=[gl,bU];function XCe(e,t,s){const r=this;let i,a;return o;function o(f){return!$N(f)||!SU.call(r,r.previous)||rA(r.events)?s(f):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(f))}function l(f){return $N(f)?(e.consume(f),l):f===64?(e.consume(f),u):s(f)}function u(f){return f===46?e.check(KCe,m,d)(f):f===45||f===95||Pr(f)?(a=!0,e.consume(f),u):m(f)}function d(f){return e.consume(f),i=!0,u}function m(f){return a&&i&&Gr(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(f)):s(f)}}function ZCe(e,t,s){const r=this;return i;function i(o){return o!==87&&o!==119||!wU.call(r,r.previous)||rA(r.events)?s(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(WCe,e.attempt(gU,e.attempt(xU,a),s),s)(o))}function a(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function QCe(e,t,s){const r=this;let i="",a=!1;return o;function o(f){return(f===72||f===104)&&jU.call(r,r.previous)&&!rA(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),e.consume(f),l):s(f)}function l(f){if(Gr(f)&&i.length<5)return i+=String.fromCodePoint(f),e.consume(f),l;if(f===58){const x=i.toLowerCase();if(x==="http"||x==="https")return e.consume(f),u}return s(f)}function u(f){return f===47?(e.consume(f),a?d:(a=!0,u)):s(f)}function d(f){return f===null||Sb(f)||Fs(f)||gd(f)||Yy(f)?s(f):e.attempt(gU,e.attempt(xU,m),s)(f)}function m(f){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(f)}}function JCe(e,t,s){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),a):s(o)}function a(o){return o===null?s(o):t(o)}}function e1e(e,t,s){let r,i,a;return o;function o(d){return d===46||d===95?e.check(vU,u,l)(d):d===null||Fs(d)||gd(d)||d!==45&&Yy(d)?u(d):(a=!0,e.consume(d),o)}function l(d){return d===95?r=!0:(i=r,r=void 0),e.consume(d),o}function u(d){return i||r||!a?s(d):t(d)}}function t1e(e,t){let s=0,r=0;return i;function i(o){return o===40?(s++,e.consume(o),i):o===41&&r<s?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(vU,t,a)(o):o===null||Fs(o)||gd(o)?t(o):(e.consume(o),i)}function a(o){return o===41&&r++,e.consume(o),i}}function s1e(e,t,s){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),a):l===93?(e.consume(l),i):l===60||l===null||Fs(l)||gd(l)?t(l):s(l)}function i(l){return l===null||l===40||l===91||Fs(l)||gd(l)?t(l):r(l)}function a(l){return Gr(l)?o(l):s(l)}function o(l){return l===59?(e.consume(l),r):Gr(l)?(e.consume(l),o):s(l)}}function n1e(e,t,s){return r;function r(a){return e.consume(a),i}function i(a){return Pr(a)?s(a):t(a)}}function wU(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Fs(e)}function jU(e){return!Gr(e)}function SU(e){return!(e===47||$N(e))}function $N(e){return e===43||e===45||e===46||e===95||Pr(e)}function rA(e){let t=e.length,s=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){s=!0;break}if(r._gfmAutolinkLiteralWalkedInto){s=!1;break}}return e.length>0&&!s&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),s}const r1e={tokenize:h1e,partial:!0};function i1e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:c1e,continuation:{tokenize:d1e},exit:u1e}},text:{91:{name:"gfmFootnoteCall",tokenize:l1e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:a1e,resolveTo:o1e}}}}function a1e(e,t,s){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const u=r.events[i][1];if(u.type==="labelImage"){o=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return l;function l(u){if(!o||!o._balanced)return s(u);const d=Ta(r.sliceSerialize({start:o.end,end:r.now()}));return d.codePointAt(0)!==94||!a.includes(d.slice(1))?s(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function o1e(e,t){let s=e.length;for(;s--;)if(e[s][1].type==="labelImage"&&e[s][0]==="enter"){e[s][1];break}e[s+1][1].type="data",e[s+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[s+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[s+3][1].end),end:Object.assign({},e[s+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},l=[e[s+1],e[s+2],["enter",r,t],e[s+3],e[s+4],["enter",i,t],["exit",i,t],["enter",a,t],["enter",o,t],["exit",o,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(s,e.length-s+1,...l),e}function l1e(e,t,s){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,o;return l;function l(f){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),u}function u(f){return f!==94?s(f):(e.enter("gfmFootnoteCallMarker"),e.consume(f),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",d)}function d(f){if(a>999||f===93&&!o||f===null||f===91||Fs(f))return s(f);if(f===93){e.exit("chunkString");const x=e.exit("gfmFootnoteCallString");return i.includes(Ta(r.sliceSerialize(x)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):s(f)}return Fs(f)||(o=!0),a++,e.consume(f),f===92?m:d}function m(f){return f===91||f===92||f===93?(e.consume(f),a++,d):d(f)}}function c1e(e,t,s){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,o=0,l;return u;function u(y){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),d}function d(y){return y===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",m):s(y)}function m(y){if(o>999||y===93&&!l||y===null||y===91||Fs(y))return s(y);if(y===93){e.exit("chunkString");const w=e.exit("gfmFootnoteDefinitionLabelString");return a=Ta(r.sliceSerialize(w)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(y),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),x}return Fs(y)||(l=!0),o++,e.consume(y),y===92?f:m}function f(y){return y===91||y===92||y===93?(e.consume(y),o++,m):m(y)}function x(y){return y===58?(e.enter("definitionMarker"),e.consume(y),e.exit("definitionMarker"),i.includes(a)||i.push(a),hs(e,v,"gfmFootnoteDefinitionWhitespace")):s(y)}function v(y){return t(y)}}function d1e(e,t,s){return e.check(Kp,t,e.attempt(r1e,t,s))}function u1e(e){e.exit("gfmFootnoteDefinition")}function h1e(e,t,s){const r=this;return hs(e,i,"gfmFootnoteDefinitionIndent",5);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(a):s(a)}}function m1e(e){let s=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return s==null&&(s=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,l){let u=-1;for(;++u<o.length;)if(o[u][0]==="enter"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._close){let d=u;for(;d--;)if(o[d][0]==="exit"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._open&&o[u][1].end.offset-o[u][1].start.offset===o[d][1].end.offset-o[d][1].start.offset){o[u][1].type="strikethroughSequence",o[d][1].type="strikethroughSequence";const m={type:"strikethrough",start:Object.assign({},o[d][1].start),end:Object.assign({},o[u][1].end)},f={type:"strikethroughText",start:Object.assign({},o[d][1].end),end:Object.assign({},o[u][1].start)},x=[["enter",m,l],["enter",o[d][1],l],["exit",o[d][1],l],["enter",f,l]],v=l.parser.constructs.insideSpan.null;v&&Fi(x,x.length,0,Xy(v,o.slice(d+1,u),l)),Fi(x,x.length,0,[["exit",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["exit",m,l]]),Fi(o,d-1,u-d+3,x),u=d+x.length-2;break}}for(u=-1;++u<o.length;)o[u][1].type==="strikethroughSequenceTemporary"&&(o[u][1].type="data");return o}function a(o,l,u){const d=this.previous,m=this.events;let f=0;return x;function x(y){return d===126&&m[m.length-1][1].type!=="characterEscape"?u(y):(o.enter("strikethroughSequenceTemporary"),v(y))}function v(y){const w=mh(d);if(y===126)return f>1?u(y):(o.consume(y),f++,v);if(f<2&&!s)return u(y);const S=o.exit("strikethroughSequenceTemporary"),C=mh(y);return S._open=!C||C===2&&!!w,S._close=!w||w===2&&!!C,l(y)}}}class f1e{constructor(){this.map=[]}add(t,s,r){p1e(this,t,s,r)}consume(t){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let s=this.map.length;const r=[];for(;s>0;)s-=1,r.push(t.slice(this.map[s][0]+this.map[s][1]),this.map[s][2]),t.length=this.map[s][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const a of i)t.push(a);i=r.pop()}this.map.length=0}}function p1e(e,t,s,r){let i=0;if(!(s===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=s,e.map[i][2].push(...r);return}i+=1}e.map.push([t,s,r])}}function g1e(e,t){let s=!1;const r=[];for(;t<e.length;){const i=e[t];if(s){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(s=!0);t+=1}return r}function x1e(){return{flow:{null:{name:"table",tokenize:v1e,resolveAll:b1e}}}}function v1e(e,t,s){const r=this;let i=0,a=0,o;return l;function l(P){let O=r.events.length-1;for(;O>-1;){const z=r.events[O][1].type;if(z==="lineEnding"||z==="linePrefix")O--;else break}const F=O>-1?r.events[O][1].type:null,$=F==="tableHead"||F==="tableRow"?A:u;return $===A&&r.parser.lazy[r.now().line]?s(P):$(P)}function u(P){return e.enter("tableHead"),e.enter("tableRow"),d(P)}function d(P){return P===124||(o=!0,a+=1),m(P)}function m(P){return P===null?s(P):xt(P)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),v):s(P):ss(P)?hs(e,m,"whitespace")(P):(a+=1,o&&(o=!1,i+=1),P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),o=!0,m):(e.enter("data"),f(P)))}function f(P){return P===null||P===124||Fs(P)?(e.exit("data"),m(P)):(e.consume(P),P===92?x:f)}function x(P){return P===92||P===124?(e.consume(P),f):f(P)}function v(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?s(P):(e.enter("tableDelimiterRow"),o=!1,ss(P)?hs(e,y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):y(P))}function y(P){return P===45||P===58?S(P):P===124?(o=!0,e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),w):E(P)}function w(P){return ss(P)?hs(e,S,"whitespace")(P):S(P)}function S(P){return P===58?(a+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),C):P===45?(a+=1,C(P)):P===null||xt(P)?T(P):E(P)}function C(P){return P===45?(e.enter("tableDelimiterFiller"),_(P)):E(P)}function _(P){return P===45?(e.consume(P),_):P===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),j):(e.exit("tableDelimiterFiller"),j(P))}function j(P){return ss(P)?hs(e,T,"whitespace")(P):T(P)}function T(P){return P===124?y(P):P===null||xt(P)?!o||i!==a?E(P):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(P)):E(P)}function E(P){return s(P)}function A(P){return e.enter("tableRow"),R(P)}function R(P){return P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),R):P===null||xt(P)?(e.exit("tableRow"),t(P)):ss(P)?hs(e,R,"whitespace")(P):(e.enter("data"),D(P))}function D(P){return P===null||P===124||Fs(P)?(e.exit("data"),R(P)):(e.consume(P),P===92?M:D)}function M(P){return P===92||P===124?(e.consume(P),D):D(P)}}function b1e(e,t){let s=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],l=!1,u=0,d,m,f;const x=new f1e;for(;++s<e.length;){const v=e[s],y=v[1];v[0]==="enter"?y.type==="tableHead"?(l=!1,u!==0&&(u4(x,t,u,d,m),m=void 0,u=0),d={type:"table",start:Object.assign({},y.start),end:Object.assign({},y.end)},x.add(s,0,[["enter",d,t]])):y.type==="tableRow"||y.type==="tableDelimiterRow"?(r=!0,f=void 0,a=[0,0,0,0],o=[0,s+1,0,0],l&&(l=!1,m={type:"tableBody",start:Object.assign({},y.start),end:Object.assign({},y.end)},x.add(s,0,[["enter",m,t]])),i=y.type==="tableDelimiterRow"?2:m?3:1):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],f=$x(x,t,a,i,void 0,f),a=[0,0,0,0]),o[2]=s)):y.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],f=$x(x,t,a,i,void 0,f)),a=o,o=[a[1],s,0,0])):y.type==="tableHead"?(l=!0,u=s):y.type==="tableRow"||y.type==="tableDelimiterRow"?(u=s,a[1]!==0?(o[0]=o[1],f=$x(x,t,a,i,s,f)):o[1]!==0&&(f=$x(x,t,o,i,s,f)),i=0):i&&(y.type==="data"||y.type==="tableDelimiterMarker"||y.type==="tableDelimiterFiller")&&(o[3]=s)}for(u!==0&&u4(x,t,u,d,m),x.consume(t.events),s=-1;++s<t.events.length;){const v=t.events[s];v[0]==="enter"&&v[1].type==="table"&&(v[1]._align=g1e(t.events,s))}return e}function $x(e,t,s,r,i,a){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";s[0]!==0&&(a.end=Object.assign({},Tu(t.events,s[0])),e.add(s[0],0,[["exit",a,t]]));const u=Tu(t.events,s[1]);if(a={type:o,start:Object.assign({},u),end:Object.assign({},u)},e.add(s[1],0,[["enter",a,t]]),s[2]!==0){const d=Tu(t.events,s[2]),m=Tu(t.events,s[3]),f={type:l,start:Object.assign({},d),end:Object.assign({},m)};if(e.add(s[2],0,[["enter",f,t]]),r!==2){const x=t.events[s[2]],v=t.events[s[3]];if(x[1].end=Object.assign({},v[1].end),x[1].type="chunkText",x[1].contentType="text",s[3]>s[2]+1){const y=s[2]+1,w=s[3]-s[2]-1;e.add(y,w,[])}}e.add(s[3]+1,0,[["exit",f,t]])}return i!==void 0&&(a.end=Object.assign({},Tu(t.events,i)),e.add(i,0,[["exit",a,t]]),a=void 0),a}function u4(e,t,s,r,i){const a=[],o=Tu(t.events,s);i&&(i.end=Object.assign({},o),a.push(["exit",i,t])),r.end=Object.assign({},o),a.push(["exit",r,t]),e.add(s+1,0,a)}function Tu(e,t){const s=e[t],r=s[0]==="enter"?"start":"end";return s[1][r]}const y1e={name:"tasklistCheck",tokenize:j1e};function w1e(){return{text:{91:y1e}}}function j1e(e,t,s){const r=this;return i;function i(u){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?s(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),a)}function a(u){return Fs(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),o):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),o):s(u)}function o(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):s(u)}function l(u){return xt(u)?t(u):ss(u)?e.check({tokenize:S1e},t,s)(u):s(u)}}function S1e(e,t,s){return hs(e,r,"whitespace");function r(i){return i===null?s(i):t(i)}}function _1e(e){return IH([YCe(),i1e(),m1e(e),x1e(),w1e()])}const N1e={};function tw(e){const t=this,s=e||N1e,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(_1e(s)),a.push(VCe()),o.push(qCe(s))}const h4={feature:ah,bug_fix:jh,refactoring:uo,documentation:Ms,security:xa,performance:Sp,ui_ux:_p,infrastructure:uo,testing:Ms};function C1e({task:e}){const{t}=Re(["tasks","errors"]),s=(()=>{if(!e.description)return null;if(e.description.startsWith(Lv)){const i=e.description.slice(Lv.length);return t("errors:task.jsonError.description",{error:i})}return e.description})(),r=e.metadata&&(e.metadata.category||e.metadata.priority||e.metadata.complexity||e.metadata.impact||e.metadata.securitySeverity||e.metadata.sourceType);return n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 pb-4 border-b border-border",children:[r&&n.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[e.metadata?.category&&n.jsxs(oe,{variant:"outline",className:J("text-xs",DC[e.metadata.category]),children:[h4[e.metadata.category]&&(()=>{const i=h4[e.metadata.category];return n.jsx(i,{className:"h-3 w-3 mr-1"})})(),RC[e.metadata.category]]}),e.metadata?.priority&&n.jsx(oe,{variant:"outline",className:J("text-xs",S5[e.metadata.priority]),children:j5[e.metadata.priority]}),e.metadata?.complexity&&n.jsx(oe,{variant:"outline",className:J("text-xs",MC[e.metadata.complexity]),children:IC[e.metadata.complexity]}),e.metadata?.impact&&n.jsx(oe,{variant:"outline",className:J("text-xs",Iv[e.metadata.impact]),children:w5[e.metadata.impact]}),e.metadata?.securitySeverity&&n.jsxs(oe,{variant:"outline",className:J("text-xs",Iv[e.metadata.securitySeverity]),children:[n.jsx(xa,{className:"h-3 w-3 mr-1"}),e.metadata.securitySeverity]}),e.metadata?.sourceType&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:e.metadata.sourceType==="ideation"&&e.metadata.ideationType?nc[e.metadata.ideationType]||e.metadata.ideationType:e.metadata.sourceType})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx(cr,{className:"h-3 w-3"}),"Created ",W_(e.createdAt)]}),n.jsx("span",{className:"text-border",children:""}),n.jsxs("span",{children:["Updated ",W_(e.updatedAt)]})]})]}),s&&n.jsx("div",{className:"bg-muted/30 rounded-lg px-4 py-3 border border-border/50 overflow-hidden max-w-full",children:n.jsx("div",{className:"prose prose-sm prose-invert max-w-none overflow-hidden prose-p:text-foreground/90 prose-p:leading-relaxed prose-headings:text-foreground prose-strong:text-foreground prose-li:text-foreground/90 prose-ul:my-2 prose-li:my-0.5 prose-a:break-all prose-pre:overflow-x-auto prose-img:max-w-full [&_img]:!max-w-full [&_img]:h-auto [&_code]:break-all [&_code]:whitespace-pre-wrap [&_*]:max-w-full",style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:n.jsx(ew,{remarkPlugins:[tw],children:s})})}),e.metadata&&n.jsxs("div",{className:"space-y-4 pt-2",children:[e.metadata.rationale&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(zi,{className:"h-3 w-3 text-warning"}),"Rationale"]}),n.jsx("p",{className:"text-sm text-foreground/80",children:e.metadata.rationale})]}),e.metadata.problemSolved&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(ah,{className:"h-3 w-3 text-success"}),"Problem Solved"]}),n.jsx("p",{className:"text-sm text-foreground/80",children:e.metadata.problemSolved})]}),e.metadata.targetAudience&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(Oa,{className:"h-3 w-3 text-info"}),"Target Audience"]}),n.jsx("p",{className:"text-sm text-foreground/80",children:e.metadata.targetAudience})]}),e.metadata.dependencies&&e.metadata.dependencies.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(an,{className:"h-3 w-3 text-purple-400"}),"Dependencies"]}),n.jsx("ul",{className:"text-sm text-foreground/80 list-disc list-inside space-y-0.5",children:e.metadata.dependencies.map((i,a)=>n.jsx("li",{children:i},a))})]}),e.metadata.prUrl&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(Js,{className:"h-3 w-3 text-info"}),t("tasks:metadata.pullRequest")]}),n.jsxs("button",{type:"button",onClick:()=>window.electronAPI.openExternal(e.metadata.prUrl),className:"text-sm text-info hover:underline flex items-center gap-1.5 bg-transparent border-none cursor-pointer p-0 text-left",children:[e.metadata.prUrl,n.jsx(Zt,{className:"h-3 w-3"})]})]}),e.metadata.acceptanceCriteria&&e.metadata.acceptanceCriteria.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(Xb,{className:"h-3 w-3 text-success"}),"Acceptance Criteria"]}),n.jsx("ul",{className:"text-sm text-foreground/80 list-disc list-inside space-y-0.5",children:e.metadata.acceptanceCriteria.map((i,a)=>n.jsx("li",{children:i},a))})]}),e.metadata.affectedFiles&&e.metadata.affectedFiles.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide mb-1.5 flex items-center gap-1.5",children:[n.jsx(Ms,{className:"h-3 w-3"}),"Affected Files"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.metadata.affectedFiles.map((i,a)=>n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(oe,{variant:"secondary",className:"text-xs font-mono cursor-help",children:i.split("/").pop()})}),n.jsx(mt,{side:"top",className:"font-mono text-xs",children:i})]},a))})]})]})]})}function k1e({isStuck:e,isIncomplete:t,isRecovering:s,taskProgress:r,onRecover:i,onResume:a}){return!e&&!t?null:n.jsxs(n.Fragment,{children:[e&&n.jsx("div",{className:"rounded-xl border border-warning/30 bg-warning/10 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground mb-1",children:"Task Appears Stuck"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"This task is marked as running but no active process was found. This can happen if the app crashed or the process was terminated unexpectedly."}),n.jsx(W,{variant:"warning",size:"sm",onClick:i,disabled:s,className:"w-full",children:s?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Recovering..."]}):n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"mr-2 h-4 w-4"}),"Recover & Restart Task"]})})]})]})}),t&&!e&&n.jsx("div",{className:"rounded-xl border border-orange-500/30 bg-orange-500/10 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-orange-400 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground mb-1",children:"Task Incomplete"}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["This task has a spec and implementation plan but never completed any subtasks (",r.completed,"/",r.total,"). The process likely crashed during spec creation. Click Resume to continue implementation."]}),n.jsxs(W,{variant:"default",size:"sm",onClick:a,className:"w-full",children:[n.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Resume Task"]})]})]})})]})}function A1e(e){switch(e){case"completed":return n.jsx(Xe,{className:"h-4 w-4 text-[var(--success)]"});case"in_progress":return n.jsx(cr,{className:"h-4 w-4 text-[var(--info)] animate-pulse"});case"failed":return n.jsx(yn,{className:"h-4 w-4 text-[var(--error)]"});default:return n.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})}}function E1e({task:e}){const{t}=Re(["tasks"]),s=AF(e.subtasks);return n.jsx(zt,{className:"h-full",children:n.jsx("div",{className:"p-4 space-y-3",children:e.subtasks.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Xb,{className:"h-10 w-10 mx-auto mb-3 text-muted-foreground/30"}),n.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"No subtasks defined"}),n.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Implementation subtasks will appear here after planning"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground pb-2 border-b border-border/50",children:[n.jsxs("span",{children:[e.subtasks.filter(r=>r.status==="completed").length," of ",e.subtasks.length," completed"]}),n.jsxs("span",{className:"tabular-nums",children:[s,"%"]})]}),e.subtasks.map((r,i)=>n.jsx("div",{className:J("rounded-xl border border-border bg-secondary/30 p-3 transition-all duration-200 hover:bg-secondary/50",r.status==="in_progress"&&"border-[var(--info)]/50 bg-[var(--info-light)] ring-1 ring-info/20",r.status==="completed"&&"border-[var(--success)]/50 bg-[var(--success-light)]",r.status==="failed"&&"border-[var(--error)]/50 bg-[var(--error-light)]"),children:n.jsxs("div",{className:"flex items-start gap-2",children:[A1e(r.status),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:J("text-[10px] font-medium px-1.5 py-0.5 rounded-full",r.status==="completed"?"bg-success/20 text-success":r.status==="in_progress"?"bg-info/20 text-info":r.status==="failed"?"bg-destructive/20 text-destructive":"bg-muted text-muted-foreground"),children:["#",i+1]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx("span",{className:"text-sm font-medium text-foreground truncate cursor-default",children:r.title||t("tasks:subtasks.untitled")})}),n.jsx(mt,{side:"top",className:"max-w-xs",children:n.jsx("p",{className:"text-xs",children:r.title||t("tasks:subtasks.untitled")})})]})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2 cursor-default",children:r.description})}),r.description&&r.description.length>80&&n.jsx(mt,{side:"bottom",className:"max-w-sm",children:n.jsx("p",{className:"text-xs",children:r.description})})]}),r.files&&r.files.length>0&&n.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:r.files.map(a=>n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(oe,{variant:"secondary",className:"text-xs font-mono cursor-help",children:[n.jsx(Ms,{className:"mr-1 h-3 w-3"}),a.split("/").pop()]})}),n.jsx(mt,{side:"top",className:"font-mono text-xs",children:a})]},a))})]})]})},r.id))]})})})}var sw="Collapsible",[T1e]=ur(sw),[P1e,iA]=T1e(sw),_U=p.forwardRef((e,t)=>{const{__scopeCollapsible:s,open:r,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[u,d]=$i({prop:r,defaultProp:i??!1,onChange:o,caller:sw});return n.jsx(P1e,{scope:s,disabled:a,contentId:Li(),open:u,onOpenToggle:p.useCallback(()=>d(m=>!m),[d]),children:n.jsx(ot.div,{"data-state":oA(u),"data-disabled":a?"":void 0,...l,ref:t})})});_U.displayName=sw;var NU="CollapsibleTrigger",CU=p.forwardRef((e,t)=>{const{__scopeCollapsible:s,...r}=e,i=iA(NU,s);return n.jsx(ot.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":oA(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:Fe(e.onClick,i.onOpenToggle)})});CU.displayName=NU;var aA="CollapsibleContent",kU=p.forwardRef((e,t)=>{const{forceMount:s,...r}=e,i=iA(aA,e.__scopeCollapsible);return n.jsx(Dn,{present:s||i.open,children:({present:a})=>n.jsx(R1e,{...r,ref:t,present:a})})});kU.displayName=aA;var R1e=p.forwardRef((e,t)=>{const{__scopeCollapsible:s,present:r,children:i,...a}=e,o=iA(aA,s),[l,u]=p.useState(r),d=p.useRef(null),m=Ct(t,d),f=p.useRef(0),x=f.current,v=p.useRef(0),y=v.current,w=o.open||l,S=p.useRef(w),C=p.useRef(void 0);return p.useEffect(()=>{const _=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(_)},[]),Hn(()=>{const _=d.current;if(_){C.current=C.current||{transitionDuration:_.style.transitionDuration,animationName:_.style.animationName},_.style.transitionDuration="0s",_.style.animationName="none";const j=_.getBoundingClientRect();f.current=j.height,v.current=j.width,S.current||(_.style.transitionDuration=C.current.transitionDuration,_.style.animationName=C.current.animationName),u(r)}},[o.open,r]),n.jsx(ot.div,{"data-state":oA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...a,ref:m,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:w&&i})});function oA(e){return e?"open":"closed"}var D1e=_U;const Ba=D1e,za=CU,$a=kU,I1e={planning:"Planning",coding:"Coding",validation:"Validation"},M1e={planning:fl,coding:Ms,validation:bre},m4={planning:"text-amber-500 bg-amber-500/10 border-amber-500/30",coding:"text-info bg-info/10 border-info/30",validation:"text-purple-500 bg-purple-500/10 border-purple-500/30"},L1e={planning:"spec",coding:"coding",validation:"qa"},f4={opus:"Opus",sonnet:"Sonnet",haiku:"Haiku"},p4={none:"None",low:"Low",medium:"Med",high:"High",ultrathink:"Ultra"};function O1e(e,t){if(!e)return null;const s=L1e[t];if(e.isAutoProfile&&e.phaseModels&&e.phaseThinking){const r=e.phaseModels[s],i=e.phaseThinking[s];return{model:f4[r]||r,thinking:p4[i]||i}}return e.model&&e.thinkingLevel?{model:f4[e.model]||e.model,thinking:p4[e.thinkingLevel]||e.thinkingLevel}:null}function F1e({task:e,phaseLogs:t,isLoadingLogs:s,expandedPhases:r,isStuck:i,logsEndRef:a,logsContainerRef:o,onLogsScroll:l,onTogglePhase:u}){return n.jsx("div",{ref:o,className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",onScroll:l,children:n.jsx("div",{className:"p-4 space-y-2",children:s?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t?n.jsxs(n.Fragment,{children:[["planning","coding","validation"].map(d=>n.jsx(B1e,{phase:d,phaseLog:t.phases[d],isExpanded:r.has(d),onToggle:()=>u(d),isTaskStuck:i,phaseConfig:O1e(e.metadata,d)},d)),n.jsx("div",{ref:a})]}):e.logs&&e.logs.length>0?n.jsxs("pre",{className:"text-xs font-mono text-muted-foreground whitespace-pre-wrap break-all",children:[e.logs.join(""),n.jsx("div",{ref:a})]}):n.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[n.jsx(dr,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),n.jsx("p",{children:"No logs yet"}),n.jsx("p",{className:"text-xs mt-1",children:"Logs will appear here when the task runs"})]})})})}function B1e({phase:e,phaseLog:t,isExpanded:s,onToggle:r,isTaskStuck:i,phaseConfig:a}){const o=M1e[e],l=t?.status||"pending",u=(t?.entries.length||0)>0,d=()=>{switch(l){case"active":return i?n.jsxs(oe,{variant:"outline",className:"text-xs bg-warning/10 text-warning border-warning/30 flex items-center gap-1",children:[n.jsx(Tt,{className:"h-3 w-3"}),"Interrupted"]}):n.jsxs(oe,{variant:"outline",className:"text-xs bg-info/10 text-info border-info/30 flex items-center gap-1",children:[n.jsx(we,{className:"h-3 w-3 animate-spin"}),"Running"]});case"completed":return n.jsxs(oe,{variant:"outline",className:"text-xs bg-success/10 text-success border-success/30 flex items-center gap-1",children:[n.jsx(Xe,{className:"h-3 w-3"}),"Complete"]});case"failed":return n.jsxs(oe,{variant:"outline",className:"text-xs bg-destructive/10 text-destructive border-destructive/30 flex items-center gap-1",children:[n.jsx(yn,{className:"h-3 w-3"}),"Failed"]});default:return n.jsx(oe,{variant:"secondary",className:"text-xs text-muted-foreground",children:"Pending"})}},m=i&&l==="active";return n.jsxs(Ba,{open:s,onOpenChange:r,children:[n.jsx(za,{asChild:!0,children:n.jsxs("button",{className:J("w-full flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-secondary/50",l==="active"&&!m&&m4[e],m&&"border-warning/30 bg-warning/5",l==="completed"&&"border-success/30 bg-success/5",l==="failed"&&"border-destructive/30 bg-destructive/5",l==="pending"&&"border-border bg-secondary/30"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(o,{className:J("h-4 w-4",m?"text-warning":l==="active"?m4[e].split(" ")[0]:"text-muted-foreground")}),n.jsx("span",{className:"font-medium text-sm",children:I1e[e]}),u&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t?.entries.length," entries)"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[a&&n.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-0.5",title:`Model: ${a.model}`,children:[n.jsx(Jne,{className:"h-3 w-3"}),n.jsx("span",{children:a.model})]}),n.jsx("span",{className:"text-muted-foreground/50",children:"|"}),n.jsxs("div",{className:"flex items-center gap-0.5",title:`Thinking: ${a.thinking}`,children:[n.jsx(Bi,{className:"h-3 w-3"}),n.jsx("span",{children:a.thinking})]})]}),d()]})]})}),n.jsx($a,{children:n.jsx("div",{className:"mt-1 ml-6 border-l-2 border-border pl-4 py-2 space-y-1",children:u?t?.entries.map((f,x)=>n.jsx(z1e,{entry:f},`${f.timestamp}-${x}`)):n.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No logs yet"})})})]})}function z1e({entry:e}){const[t,s]=p.useState(!1),r=!!e.detail,i=l=>{switch(l){case"Read":return{icon:$n,label:"Reading",color:"text-blue-500 bg-blue-500/10"};case"Glob":return{icon:a1,label:"Searching files",color:"text-amber-500 bg-amber-500/10"};case"Grep":return{icon:Nr,label:"Searching code",color:"text-green-500 bg-green-500/10"};case"Edit":return{icon:fl,label:"Editing",color:"text-purple-500 bg-purple-500/10"};case"Write":return{icon:Ms,label:"Writing",color:"text-cyan-500 bg-cyan-500/10"};case"Bash":return{icon:dr,label:"Running",color:"text-orange-500 bg-orange-500/10"};default:return{icon:uo,label:l,color:"text-muted-foreground bg-muted"}}},a=l=>{try{return new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}},o=()=>e.subphase?n.jsx(oe,{variant:"outline",className:"text-[9px] px-1 py-0 ml-1 text-muted-foreground border-muted-foreground/30",children:e.subphase}):null;if(e.type==="tool_start"&&e.tool_name){const{icon:l,label:u,color:d}=i(e.tool_name);return n.jsx("div",{className:"flex flex-col",children:n.jsxs("div",{className:J("inline-flex items-center gap-2 rounded-md px-2 py-1 text-xs",d),children:[n.jsx(l,{className:"h-3 w-3 animate-pulse"}),n.jsx("span",{className:"font-medium",children:u}),e.tool_input&&n.jsx("span",{className:"text-muted-foreground truncate max-w-[500px]",title:e.tool_input,children:e.tool_input}),n.jsx(o,{})]})})}if(e.type==="tool_end"&&e.tool_name){const{icon:l,color:u}=i(e.tool_name);return n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:J("inline-flex items-center gap-2 rounded-md px-2 py-1 text-xs",u,"opacity-60"),children:[n.jsx(l,{className:"h-3 w-3"}),n.jsx(Xe,{className:"h-3 w-3 text-success"}),n.jsx("span",{className:"text-muted-foreground",children:"Done"})]}),r&&n.jsx("button",{onClick:()=>s(!t),className:J("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-2.5 w-2.5"}),n.jsx("span",{children:"Hide output"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xt,{className:"h-2.5 w-2.5"}),n.jsx("span",{children:"Show output"})]})})]}),r&&t&&n.jsx("div",{className:"mt-1.5 ml-4 p-2 bg-secondary/30 rounded-md border border-border/50 overflow-x-auto",children:n.jsx("pre",{className:"text-[10px] text-muted-foreground whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]})}return e.type==="error"?n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-start gap-2 text-xs text-destructive bg-destructive/10 rounded-md px-2 py-1",children:[n.jsx(yn,{className:"h-3 w-3 mt-0.5 shrink-0"}),n.jsx("span",{className:"break-words flex-1",children:e.content}),n.jsx(o,{}),r&&n.jsx("button",{onClick:()=>s(!t),className:J("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded shrink-0","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?n.jsx(bt,{className:"h-2.5 w-2.5"}):n.jsx(Xt,{className:"h-2.5 w-2.5"})})]}),r&&t&&n.jsx("div",{className:"mt-1.5 ml-4 p-2 bg-destructive/5 rounded-md border border-destructive/20 overflow-x-auto",children:n.jsx("pre",{className:"text-[10px] text-destructive/80 whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]}):e.type==="success"?n.jsxs("div",{className:"flex items-start gap-2 text-xs text-success bg-success/10 rounded-md px-2 py-1",children:[n.jsx(Xe,{className:"h-3 w-3 mt-0.5 shrink-0"}),n.jsx("span",{className:"break-words flex-1",children:e.content}),n.jsx(o,{})]}):e.type==="info"?n.jsxs("div",{className:"flex items-start gap-2 text-xs text-info bg-info/10 rounded-md px-2 py-1",children:[n.jsx(_r,{className:"h-3 w-3 mt-0.5 shrink-0"}),n.jsx("span",{className:"break-words flex-1",children:e.content}),n.jsx(o,{})]}):n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground py-0.5",children:[n.jsx("span",{className:"text-[10px] text-muted-foreground/60 tabular-nums shrink-0",children:a(e.timestamp)}),n.jsx("span",{className:"break-words whitespace-pre-wrap flex-1",children:e.content}),n.jsx(o,{}),r&&n.jsx("button",{onClick:()=>s(!t),className:J("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded shrink-0","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-2.5 w-2.5"}),n.jsx("span",{children:"Less"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xt,{className:"h-2.5 w-2.5"}),n.jsx("span",{children:"More"})]})})]}),r&&t&&n.jsx("div",{className:"mt-1.5 ml-12 p-2 bg-secondary/30 rounded-md border border-border/50 overflow-x-auto",children:n.jsx("pre",{className:"text-[10px] text-muted-foreground whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]})}const $1e=[".md",".json"];function g4(e){return e.endsWith(".json")?n.jsx(Q3,{className:"h-4 w-4 text-amber-500"}):n.jsx($n,{className:"h-4 w-4 text-blue-500"})}function H1e({task:e}){const{t}=Re(["tasks"]),{settings:s}=cs(),[r,i]=p.useState([]),[a,o]=p.useState(!1),[l,u]=p.useState(null),[d,m]=p.useState(null),[f,x]=p.useState(null),[v,y]=p.useState(!1),[w,S]=p.useState(null),C=p.useRef(null),_=p.useCallback(async()=>{if(e.specsPath){o(!0),u(null);try{const D=await window.electronAPI.listDirectory(e.specsPath);if(!D.success||!D.data)throw new Error(D.error||"Failed to load directory");const M=D.data.filter(P=>!P.isDirectory&&$1e.some(O=>P.name.endsWith(O)));M.sort((P,O)=>P.name==="spec.md"?-1:O.name==="spec.md"?1:P.name.localeCompare(O.name)),i(M)}catch(D){u(D instanceof Error?D.message:"Unknown error")}finally{o(!1)}}},[e.specsPath]),j=p.useCallback(async D=>{m(D),y(!0),S(null),x(null);try{const M=await window.electronAPI.readFile(D);if(!M.success||M.data===void 0)throw new Error(M.error||"Failed to read file");x(M.data)}catch(M){S(M instanceof Error?M.message:"Unknown error")}finally{y(!1)}},[]);p.useEffect(()=>{m(null),x(null),S(null)},[e.specsPath]),p.useEffect(()=>{_()},[_]),p.useEffect(()=>{r.length>0&&d===null&&j(r[0].path)},[r]);const T=p.useCallback(async()=>{if(!(!s.preferredIDE||!e.specsPath))try{await window.electronAPI.worktreeOpenInIDE(e.specsPath,s.preferredIDE,s.customIDEPath)}catch(D){console.error("Failed to open in IDE:",D)}},[s.preferredIDE,s.customIDEPath,e.specsPath]),E=p.useCallback(D=>{if(r.length===0)return;const M=d?r.findIndex(P=>P.path===d):-1;switch(D.key){case"ArrowDown":D.preventDefault(),M<r.length-1&&j(r[M+1].path);break;case"ArrowUp":D.preventDefault(),M>0&&j(r[M-1].path);break;case"Home":D.preventDefault(),j(r[0].path);break;case"End":D.preventDefault(),j(r[r.length-1].path);break}},[r,d,j]);if(!e.specsPath)return n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Xr,{className:"h-10 w-10 mx-auto mb-3 text-muted-foreground/30"}),n.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:t("tasks:files.noSpecPath")})]})});const A=()=>{if(!d)return n.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:n.jsxs("div",{className:"text-center",children:[n.jsx($n,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:t("tasks:files.selectFile")})]})});if(v)return n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})});if(w)return n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ke,{className:"h-8 w-8 mx-auto mb-2 text-destructive"}),n.jsx("p",{className:"text-sm text-destructive mb-2",children:t("tasks:files.errorLoadingContent")}),n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>j(d),children:[n.jsx(We,{className:"h-3 w-3 mr-1"}),t("tasks:files.retry")]})]})});if(f===null)return null;if(d.endsWith(".json"))try{const D=JSON.stringify(JSON.parse(f),null,2);return n.jsx("pre",{className:"text-xs font-mono text-foreground whitespace-pre-wrap break-words p-4",children:D})}catch{return n.jsx("pre",{className:"text-xs font-mono text-foreground whitespace-pre-wrap break-words p-4",children:f})}return n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none p-4",children:n.jsx("pre",{className:"text-xs font-mono text-foreground whitespace-pre-wrap break-words bg-transparent border-0 p-0",children:f})})},R=d?d.split(/[/\\]/).pop():null;return n.jsxs("div",{className:"h-full flex",children:[n.jsxs("div",{className:"w-52 border-r border-border flex flex-col",children:[n.jsxs("div",{className:"px-3 py-2 border-b border-border flex items-center justify-between",children:[n.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t("tasks:files.title")}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:_,disabled:a,children:n.jsx(We,{className:J("h-3 w-3",a&&"animate-spin")})})]}),n.jsx(zt,{className:"flex-1",children:n.jsx("div",{ref:C,className:"p-2 space-y-1",role:"listbox","aria-label":t("tasks:files.title"),tabIndex:r.length>0?0:-1,onKeyDown:E,children:a?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):l?n.jsxs("div",{className:"text-center py-4",children:[n.jsx(Ke,{className:"h-5 w-5 mx-auto mb-2 text-destructive"}),n.jsx("p",{className:"text-xs text-destructive mb-2",children:t("tasks:files.errorLoading")}),n.jsxs(W,{variant:"outline",size:"sm",onClick:_,className:"text-xs",children:[n.jsx(We,{className:"h-3 w-3 mr-1"}),t("tasks:files.retry")]})]}):r.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Xr,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/30"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:t("tasks:files.noFiles")})]}):r.map(D=>n.jsxs("button",{type:"button",role:"option","aria-selected":d===D.path,onClick:()=>j(D.path),className:J("w-full flex items-center gap-2 px-2 py-1.5 rounded-md text-left transition-colors","hover:bg-secondary/50 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1",d===D.path&&"bg-secondary"),children:[g4(D.name),n.jsx("span",{className:"text-xs font-medium truncate flex-1",children:D.name}),d===D.path&&n.jsx(Xt,{className:"h-3 w-3 text-muted-foreground"})]},D.path))})})]}),n.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[R&&n.jsxs("div",{className:"px-4 py-2 border-b border-border flex items-center gap-2 shrink-0 bg-muted/30",children:[g4(R),n.jsx("span",{className:"text-sm font-medium flex-1",children:R}),s.preferredIDE&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:T,children:n.jsx(Zt,{className:"h-4 w-4"})})}),n.jsx(mt,{children:t("tasks:files.openInIDE")})]})]}),n.jsx(zt,{className:"flex-1",children:A()})]})]})}function U1e({stagedSuccess:e,suggestedCommitMessage:t}){const[s,r]=p.useState(t||""),[i,a]=p.useState(!1),o=async()=>{if(s)try{await navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)}catch(l){console.error("Failed to copy:",l)}};return n.jsxs("div",{className:"rounded-xl border border-success/30 bg-success/10 p-4",children:[n.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[n.jsx(ua,{className:"h-4 w-4 text-success"}),"Changes Staged Successfully"]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e}),t&&n.jsxs("div",{className:"bg-background/50 rounded-lg p-3 mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[n.jsx(Qt,{className:"h-3 w-3 text-purple-400"}),"AI-generated commit message"]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:o,className:"h-6 px-2 text-xs",disabled:!s,children:i?n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-3 w-3 mr-1 text-success"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(sh,{className:"h-3 w-3 mr-1"}),"Copy"]})})]}),n.jsx(go,{value:s,onChange:l=>r(l.target.value),className:"font-mono text-xs min-h-[100px] bg-background/80 resize-y",placeholder:"Commit message..."}),n.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1.5",children:["Edit as needed, then copy and use with ",n.jsx("code",{className:"bg-background px-1 rounded",children:'git commit -m "..."'})]})]}),n.jsxs("div",{className:"bg-background/50 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Next steps:"}),n.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsx("li",{children:"Open your project in your IDE or terminal"}),n.jsxs("li",{children:["Review the staged changes with ",n.jsx("code",{className:"bg-background px-1 rounded",children:"git status"})," and ",n.jsx("code",{className:"bg-background px-1 rounded",children:"git diff --staged"})]}),n.jsxs("li",{children:["Commit when ready: ",n.jsx("code",{className:"bg-background px-1 rounded",children:'git commit -m "your message"'})]})]})]})]})}const G1e={vscode:"VS Code",cursor:"Cursor",windsurf:"Windsurf",zed:"Zed",sublime:"Sublime",webstorm:"WebStorm",intellij:"IntelliJ",pycharm:"PyCharm",xcode:"Xcode",vim:"Vim",neovim:"Neovim",emacs:"Emacs",custom:"IDE"},V1e={system:"Terminal",terminal:"Terminal",iterm2:"iTerm",warp:"Warp",ghostty:"Ghostty",alacritty:"Alacritty",kitty:"Kitty",wezterm:"WezTerm",hyper:"Hyper",windowsterminal:"Terminal",gnometerminal:"Terminal",konsole:"Konsole",custom:"Terminal"};function q1e({worktreeStatus:e,workspaceError:t,stageOnly:s,mergePreview:r,isLoadingPreview:i,isMerging:a,isDiscarding:o,isCreatingPR:l,onShowDiffDialog:u,onShowDiscardDialog:d,onShowConflictDialog:m,onLoadMergePreview:f,onStageOnlyChange:x,onMerge:v,onShowPRDialog:y,onClose:w,onSwitchToTerminals:S,onOpenInbuiltTerminal:C}){const{t:_}=Re(["taskReview","common","tasks"]),{settings:j}=cs(),T=j.preferredIDE||"vscode",E=j.preferredTerminal||"system",A=async()=>{if(e.worktreePath)try{await window.electronAPI.worktreeOpenInIDE(e.worktreePath,T,j.customIDEPath)}catch(B){console.error("Failed to open in IDE:",B)}},R=async()=>{if(e.worktreePath)try{await window.electronAPI.worktreeOpenInTerminal(e.worktreePath,E,j.customTerminalPath)}catch(B){console.error("Failed to open in terminal:",B)}},D=r?.gitConflicts?.hasConflicts,M=r?.uncommittedChanges?.hasChanges,P=r?.uncommittedChanges?.count||0,O=r&&r.conflicts.length>0,F=r?.gitConflicts?.needsRebase,$=r?.gitConflicts?.commitsBehind||0,z=r?.summary?.pathMappedAIMergeCount||0,H=r?.gitConflicts?.totalRenames||0,I=F&&$>0,V=z>0;return n.jsxs("div",{className:"rounded-xl border border-border bg-card overflow-hidden",children:[n.jsxs("div",{className:"px-4 py-3 bg-muted/30 border-b border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-medium text-sm text-foreground flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4 text-purple-400"}),"Build Ready for Review"]}),n.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"h-7 px-2 text-xs",children:[n.jsx(Ws,{className:"h-3.5 w-3.5 mr-1"}),"View"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("span",{className:"flex items-center gap-1.5 text-muted-foreground",children:[n.jsx(Ms,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"font-medium text-foreground",children:e.filesChanged||0})," files"]}),n.jsxs("span",{className:"flex items-center gap-1.5 text-muted-foreground",children:[n.jsx(Kb,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"font-medium text-foreground",children:e.commitCount||0})," commits"]}),n.jsxs("span",{className:"flex items-center gap-1 text-success",children:[n.jsx(fs,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"font-medium",children:e.additions||0})]}),n.jsxs("span",{className:"flex items-center gap-1 text-destructive",children:[n.jsx(Qb,{className:"h-3.5 w-3.5"}),n.jsx("span",{className:"font-medium",children:e.deletions||0})]})]}),e.branch&&n.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:[n.jsx("code",{className:"bg-background/80 px-1.5 py-0.5 rounded text-[11px]",children:e.branch}),n.jsx("span",{className:"mx-1.5",children:""}),n.jsx("code",{className:"bg-background/80 px-1.5 py-0.5 rounded text-[11px]",children:e.currentProjectBranch||e.baseBranch||"main"})]}),e.worktreePath&&n.jsxs("div",{className:"mt-2 text-xs text-muted-foreground font-mono",children:[" ",e.worktreePath]}),e.worktreePath&&n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsxs(W,{variant:"outline",size:"sm",onClick:A,className:"h-7 px-2 text-xs",children:[n.jsx(lr,{className:"h-3.5 w-3.5 mr-1"}),"Open in ",G1e[T]]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:R,className:"h-7 px-2 text-xs",children:[n.jsx(dr,{className:"h-3.5 w-3.5 mr-1"}),"Open in ",V1e[E]]})]})]}),n.jsxs("div",{className:"px-4 py-3 space-y-3",children:[t&&n.jsxs("div",{className:"flex items-start gap-2 p-2.5 rounded-lg bg-destructive/10 border border-destructive/20",children:[n.jsx(Tt,{className:"h-4 w-4 text-destructive mt-0.5 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-destructive",children:t})]}),M&&n.jsxs("div",{className:"flex items-start gap-2 p-2.5 rounded-lg bg-warning/10 border border-warning/20",children:[n.jsx(Tt,{className:"h-4 w-4 text-warning mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-medium text-warning",children:[P," uncommitted ",P===1?"change":"changes"," in main project"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Commit or stash them in your terminal before staging to avoid conflicts."})]})]}),i&&!r&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-sm py-2",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),"Checking for conflicts..."]}),r&&n.jsxs("div",{className:J("flex items-center justify-between p-2.5 rounded-lg border",D||I||V||O?"bg-warning/10 border-warning/20":"bg-success/10 border-success/20"),children:[n.jsx("div",{className:"flex items-center gap-2",children:D?n.jsxs(n.Fragment,{children:[n.jsx(Tt,{className:"h-4 w-4 text-warning"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-warning",children:"Branch Diverged"}),n.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"AI will resolve"})]})]}):I||V?n.jsxs(n.Fragment,{children:[n.jsx(Tt,{className:"h-4 w-4 text-warning"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-warning",children:V?"Files Renamed":"Branch Behind"}),n.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["AI will resolve (",V?`${z} files`:`${$} commits`,")"]})]})]}):O?n.jsxs(n.Fragment,{children:[n.jsx(Tt,{className:"h-4 w-4 text-warning"}),n.jsxs("span",{className:"text-sm font-medium text-warning",children:[r.conflicts.length," conflict",r.conflicts.length!==1?"s":""]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ys,{className:"h-4 w-4 text-success"}),n.jsx("span",{className:"text-sm font-medium text-success",children:"Ready to merge"}),n.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:[r.summary.totalFiles," files"]})]})}),n.jsxs("div",{className:"flex items-center gap-1",children:[(D||I||V||O)&&n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"h-7 text-xs",children:"Details"}),n.jsx(W,{variant:"ghost",size:"sm",onClick:f,disabled:i,className:"h-7 px-2",title:"Refresh",children:i?n.jsx(we,{className:"h-3.5 w-3.5 animate-spin"}):n.jsx(wo,{className:"h-3.5 w-3.5"})})]})]}),D&&r?.gitConflicts&&n.jsxs("div",{className:"text-xs text-muted-foreground pl-6",children:[_("taskReview:merge.branchHasNewCommits",{branch:r.gitConflicts.baseBranch,count:r.gitConflicts.commitsBehind}),r.gitConflicts.conflictingFiles.length>0&&n.jsxs("span",{className:"text-warning",children:[" ",_("taskReview:merge.filesNeedMerging",{count:r.gitConflicts.conflictingFiles.length})]})]}),!D&&I&&r?.gitConflicts&&n.jsxs("div",{className:"text-xs text-muted-foreground pl-6",children:[_("taskReview:merge.branchHasNewCommitsSinceBuild",{branch:r.gitConflicts.baseBranch,count:$}),V?n.jsxs("span",{className:"text-warning",children:[" ",_(H===1?"taskReview:merge.filesNeedAIMergeDueToRenames":"taskReview:merge.filesNeedAIMergeDueToRenamesPlural",{renameCount:H,count:z})]}):H>0?n.jsxs("span",{className:"text-warning",children:[" ",_("taskReview:merge.fileRenamesDetected",{count:H})]}):n.jsxs("span",{className:"text-warning",children:[" ",_("taskReview:merge.filesRenamedOrMoved")]})]})]}),n.jsxs("div",{className:"px-4 py-3 bg-muted/20 border-t border-border space-y-3",children:[r&&n.jsxs("label",{className:"inline-flex items-center gap-2.5 text-sm cursor-pointer select-none px-3 py-2 rounded-lg border border-border bg-background/50 hover:bg-background/80 transition-colors",children:[n.jsx(Ui,{checked:s,onCheckedChange:B=>x(B===!0),className:"border-muted-foreground/50 data-[state=checked]:border-primary"}),n.jsx("span",{className:J("transition-colors",s?"text-foreground":"text-muted-foreground"),children:"Stage only (review in IDE before committing)"})]}),n.jsxs("div",{className:"flex gap-2",children:[!r&&!i&&n.jsxs(W,{variant:"default",onClick:f,disabled:a||o,className:"flex-1",children:[n.jsx(ua,{className:"mr-2 h-4 w-4"}),"Check for Conflicts"]}),i&&n.jsxs(W,{variant:"default",disabled:!0,className:"flex-1",children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking for conflicts..."]}),r&&!i&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:D||I||V?"warning":"success",onClick:v,disabled:a||o,className:"flex-1",children:a?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),_(D||I||V?"taskReview:merge.buttons.resolving":s?"taskReview:merge.buttons.staging":"taskReview:merge.buttons.merging")]}):n.jsxs(n.Fragment,{children:[n.jsx(ua,{className:"mr-2 h-4 w-4"}),D||I||V?_(s?"taskReview:merge.buttons.stageWithAIMerge":"taskReview:merge.buttons.mergeWithAI"):s?_("taskReview:merge.buttons.stageTo",{branch:e.currentProjectBranch||e.baseBranch||"main"}):_("taskReview:merge.buttons.mergeTo",{branch:e.currentProjectBranch||e.baseBranch||"main"})]})})}),n.jsx(mt,{children:n.jsx("p",{className:"max-w-xs",children:_("tasks:review.mergeTooltip")})})]}),y&&n.jsx(W,{variant:"info",onClick:()=>y(!0),disabled:a||o||l,className:"flex-1",children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),_("taskReview:pr.actions.creating")]}):n.jsxs(n.Fragment,{children:[n.jsx(Js,{className:"mr-2 h-4 w-4"}),_("common:buttons.createPR")]})}),n.jsx(W,{variant:"outline",size:"icon",onClick:()=>d(!0),disabled:a||o||l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 hover:border-destructive/30",title:"Discard build",children:n.jsx(Gv,{className:"h-4 w-4"})})]})]})]})}function W1e({feedback:e,isSubmitting:t,onFeedbackChange:s,onReject:r,images:i=[],onImagesChange:a}){const{t:o}=Re("tasks"),l=!!a,u=p.useRef(null),[d,m]=p.useState(!1),[f,x]=p.useState(!1),[v,y]=p.useState(null),w=p.useCallback(async E=>{if(!a)return;const A=E.clipboardData?.items;if(!A)return;const R=[];for(let O=0;O<A.length;O++){const F=A[O];F.type.startsWith("image/")&&R.push(F)}if(R.length===0)return;E.preventDefault();const D=Pu-i.length;if(D<=0){y(o("feedback.maxImagesError",{count:Pu}));return}y(null);const M=[],P=i.map(O=>O.filename);for(const O of R.slice(0,D)){const F=O.getAsFile();if(F){if(!yb(F.type)){y(o("feedback.invalidTypeError",{types:Mv}));continue}try{const $=await wb(F),z=await TN($),I={"image/svg+xml":"svg","image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp"}[F.type]||F.type.split("/")[1]||"png",V=`screenshot-${Date.now()}.${I}`,B=jb(V,[...P,...M.map(K=>K.filename)]);M.push({id:EN(),filename:B,mimeType:F.type,size:F.size,data:$.split(",")[1],thumbnail:z})}catch($){console.error("[QAFeedbackSection] Failed to process pasted image:",$),y(o("feedback.processingError","Failed to process pasted image"))}}}M.length>0&&(a([...i,...M]),x(!0),setTimeout(()=>x(!1),2e3))},[i,a,o]),S=p.useCallback(E=>{E.preventDefault(),E.stopPropagation(),m(!0)},[]),C=p.useCallback(E=>{E.preventDefault(),E.stopPropagation(),m(!1)},[]),_=p.useCallback(async E=>{if(E.preventDefault(),E.stopPropagation(),m(!1),!a||t)return;const A=E.dataTransfer?.files;if(!A||A.length===0)return;const R=[];for(let O=0;O<A.length;O++){const F=A[O];F.type.startsWith("image/")&&R.push(F)}if(R.length===0)return;const D=Pu-i.length;if(D<=0){y(o("feedback.maxImagesError",{count:Pu}));return}y(null);const M=[],P=i.map(O=>O.filename);for(const O of R.slice(0,D)){if(!yb(O.type)){y(o("feedback.invalidTypeError",{types:Mv}));continue}try{const F=await wb(O),$=await TN(F),H={"image/svg+xml":"svg","image/jpeg":"jpg","image/png":"png","image/gif":"gif","image/webp":"webp"}[O.type]||O.type.split("/")[1]||"png",I=O.name||`dropped-image-${Date.now()}.${H}`,V=jb(I,[...P,...M.map(B=>B.filename)]);M.push({id:EN(),filename:V,mimeType:O.type,size:O.size,data:F.split(",")[1],thumbnail:$})}catch(F){console.error("[QAFeedbackSection] Failed to process dropped image:",F),y(o("feedback.processingError","Failed to process dropped image"))}}M.length>0&&(a([...i,...M]),x(!0),setTimeout(()=>x(!1),2e3))},[i,t,a,o]),j=p.useCallback(E=>{a&&(a(i.filter(A=>A.id!==E)),y(null))},[i,a]),T=e.trim()||i.length>0;return n.jsxs("div",{className:"rounded-xl border border-warning/30 bg-warning/10 p-4",children:[n.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-warning"}),o("feedback.requestChanges","Request Changes")]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:o("feedback.description","Found issues? Describe what needs to be fixed and the AI will continue working on it.")}),n.jsx(go,{ref:u,placeholder:o("feedback.placeholder","Describe the issues or changes needed..."),value:e,onChange:E=>s(E.target.value),onPaste:w,onDragOver:S,onDragLeave:C,onDrop:_,className:J("mb-2",d&&!t&&"border-primary bg-primary/5 ring-2 ring-primary/20"),rows:3,disabled:t}),l&&n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:o("feedback.dragDropHint","Drag & drop images or paste screenshots")}),f&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-success mb-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[n.jsx(ec,{className:"h-4 w-4"}),o("feedback.imageAdded","Image added successfully!")]}),v&&n.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-2 text-sm text-destructive mb-2",children:[n.jsx(Ke,{className:"h-4 w-4 mt-0.5 shrink-0"}),n.jsx("span",{children:v})]}),i.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:i.map(E=>n.jsxs("div",{className:"relative group rounded-md border border-border overflow-hidden cursor-pointer hover:ring-2 hover:ring-primary/50 transition-all",style:{width:"64px",height:"64px"},title:E.filename,children:[E.thumbnail?n.jsx("img",{src:E.thumbnail,alt:E.filename,className:"w-full h-full object-cover"}):n.jsx("div",{className:"w-full h-full flex items-center justify-center bg-muted",children:n.jsx(ec,{className:"h-6 w-6 text-muted-foreground"})}),!t&&n.jsx("button",{type:"button",className:"absolute top-0.5 right-0.5 h-4 w-4 flex items-center justify-center rounded-full bg-destructive text-destructive-foreground opacity-0 group-hover:opacity-100 transition-opacity",onClick:A=>{A.stopPropagation(),j(E.id)},"aria-label":o("feedback.removeImage","Remove image"),children:n.jsx(Ss,{className:"h-3 w-3"})})]},E.id))}),n.jsx(W,{variant:"warning",onClick:r,disabled:t||!T,className:"w-full",children:t?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),o("feedback.submitting","Submitting...")]}):n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"mr-2 h-4 w-4"}),o("feedback.requestChanges","Request Changes")]})})]})}function K1e({open:e,task:t,worktreeStatus:s,isDiscarding:r,onOpenChange:i,onDiscard:a}){return n.jsx(Kr,{open:e,onOpenChange:i,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2",children:[n.jsx(Gv,{className:"h-5 w-5 text-destructive"}),"Discard Build"]}),n.jsx(Lr,{asChild:!0,children:n.jsxs("div",{className:"text-sm text-muted-foreground space-y-3",children:[n.jsxs("p",{children:["Are you sure you want to discard all changes for ",n.jsxs("strong",{className:"text-foreground",children:['"',t.title,'"']}),"?"]}),n.jsx("p",{className:"text-destructive",children:"This will permanently delete the isolated workspace and all uncommitted changes. The task will be moved back to Planning status."}),s?.exists&&n.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 text-sm",children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Files changed:"}),n.jsx("span",{children:s.filesChanged||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Lines:"}),n.jsxs("span",{className:"text-success",children:["+",s.additions||0]}),n.jsxs("span",{className:"text-destructive",children:["-",s.deletions||0]})]})]})]})})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:r,children:"Cancel"}),n.jsx(pi,{onClick:o=>{o.preventDefault(),a()},disabled:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:r?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Discarding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Gv,{className:"mr-2 h-4 w-4"}),"Discard Build"]})})]})]})})}function Y1e({open:e,worktreeDiff:t,onOpenChange:s}){return n.jsx(Kr,{open:e,onOpenChange:s,children:n.jsxs(Rr,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2",children:[n.jsx(Ws,{className:"h-5 w-5 text-purple-400"}),"Changed Files"]}),n.jsx(Lr,{children:t?.summary||"No changes found"})]}),n.jsx("div",{className:"flex-1 overflow-auto min-h-0 -mx-6 px-6",children:t?.files&&t.files.length>0?n.jsx("div",{className:"space-y-2",children:t.files.map((r,i)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[n.jsx(Ms,{className:J("h-4 w-4 shrink-0",r.status==="added"&&"text-success",r.status==="deleted"&&"text-destructive",r.status==="modified"&&"text-info",r.status==="renamed"&&"text-warning")}),n.jsx("span",{className:"text-sm font-mono truncate",children:r.path})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-2",children:[n.jsx(oe,{variant:"secondary",className:J("text-xs",r.status==="added"&&"bg-success/10 text-success",r.status==="deleted"&&"bg-destructive/10 text-destructive",r.status==="modified"&&"bg-info/10 text-info",r.status==="renamed"&&"bg-warning/10 text-warning"),children:r.status}),n.jsxs("span",{className:"text-xs text-success",children:["+",r.additions]}),n.jsxs("span",{className:"text-xs text-destructive",children:["-",r.deletions]})]})]},i))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No changed files found"})}),n.jsx(Ir,{className:"mt-4",children:n.jsx(Yr,{children:"Close"})})]})})}function X1e(e){switch(e){case"none":case"low":return n.jsx(Ys,{className:"h-4 w-4 text-success"});case"medium":return n.jsx(Tt,{className:"h-4 w-4 text-warning"});case"high":case"critical":return n.jsx(yn,{className:"h-4 w-4 text-destructive"});default:return n.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})}}function Z1e(e){switch(e){case"none":case"low":return"bg-success/10 text-success";case"medium":return"bg-warning/10 text-warning";case"high":case"critical":return"bg-destructive/10 text-destructive";default:return"bg-muted text-muted-foreground"}}function Q1e({open:e,mergePreview:t,stageOnly:s,onOpenChange:r,onMerge:i}){return n.jsx(Kr,{open:e,onOpenChange:r,children:n.jsxs(Rr,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-warning"}),"Merge Conflicts Preview"]}),n.jsxs(Lr,{children:[t?.conflicts.length||0," potential conflict",(t?.conflicts.length||0)!==1?"s":""," detected.",t&&t.summary.autoMergeable>0&&n.jsxs("span",{className:"text-success ml-1",children:[t.summary.autoMergeable," can be auto-merged."]})]})]}),n.jsx("div",{className:"flex-1 overflow-auto min-h-0 -mx-6 px-6",children:t?.conflicts&&t.conflicts.length>0?n.jsx("div",{className:"space-y-3",children:t.conflicts.map((a,o)=>n.jsxs("div",{className:J("p-3 rounded-lg border",a.canAutoMerge?"bg-secondary/30 border-border":a.severity==="high"||a.severity==="critical"?"bg-destructive/10 border-destructive/30":"bg-warning/10 border-warning/30"),children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[X1e(a.severity),n.jsx("span",{className:"text-sm font-mono truncate",children:a.file})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[n.jsx(oe,{variant:"secondary",className:J("text-xs",Z1e(a.severity)),children:a.severity}),a.canAutoMerge&&n.jsx(oe,{variant:"secondary",className:"text-xs bg-success/10 text-success",children:"auto-merge"})]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[a.location&&n.jsxs("div",{children:[n.jsx("span",{className:"text-foreground/70",children:"Location:"})," ",a.location]}),a.reason&&n.jsxs("div",{children:[n.jsx("span",{className:"text-foreground/70",children:"Reason:"})," ",a.reason]}),a.strategy&&n.jsxs("div",{children:[n.jsx("span",{className:"text-foreground/70",children:"Strategy:"})," ",a.strategy]})]})]},o))}):n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No conflicts detected"})}),n.jsxs(Ir,{className:"mt-4",children:[n.jsx(Yr,{children:"Close"}),n.jsxs(pi,{onClick:a=>{a.preventDefault(),r(!1),i()},className:"bg-warning text-warning-foreground hover:bg-warning/90",children:[n.jsx(ua,{className:"mr-2 h-4 w-4"}),s?"Stage with AI Merge":"Merge with AI"]})]})]})})}function AU({open:e,task:t,worktreeStatus:s,onOpenChange:r,onCreatePR:i}){const{t:a}=Re(["taskReview","common"]),[o,l]=p.useState(""),[u,d]=p.useState(""),[m,f]=p.useState(!1),[x,v]=p.useState(!1),[y,w]=p.useState(null),[S,C]=p.useState(null);p.useEffect(()=>{e&&(l(s?.baseBranch||""),d(t.title),f(!1),v(!1),w(null),C(null))},[e,s?.baseBranch,t.title]);const _=R=>R.trim()?/^[a-zA-Z0-9/_-]+$/.test(R)?null:a("taskReview:pr.errors.invalidBranchName"):null,j=R=>R.trim()?null:a("taskReview:pr.errors.emptyTitle"),T=async()=>{const R=_(o);if(R){C(R);return}const D=j(u);if(D){C(D);return}v(!0),C(null),w(null);try{const M=await i({targetBranch:o||void 0,title:u||void 0,draft:m});M?M.success?w(M):C(M.error||a("taskReview:pr.errors.unknown")):C(a("taskReview:pr.errors.unknown"))}catch(M){C(M instanceof Error?M.message:a("taskReview:pr.errors.unknown"))}finally{v(!1)}},E=()=>{r(!1)},A=()=>{y?.prUrl&&window.electronAPI?.openExternal&&window.electronAPI.openExternal(y.prUrl)};return n.jsx($s,{open:e,onOpenChange:r,children:n.jsxs(Bs,{className:"sm:max-w-[500px]",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Js,{className:"h-5 w-5 text-primary"}),a("taskReview:pr.title")]}),n.jsx(ws,{children:a("taskReview:pr.description",{taskTitle:t.title})})]}),y?.success&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-success/10 border border-success/30 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-success font-medium mb-2",children:y.alreadyExists?a("taskReview:pr.success.alreadyExists"):a("taskReview:pr.success.created")}),y.prUrl&&n.jsxs("button",{type:"button","data-testid":"pr-link-button",onClick:A,className:"text-sm text-primary hover:underline flex items-center gap-1 bg-transparent border-none cursor-pointer p-0",children:[y.prUrl,n.jsx(Zt,{className:"h-3 w-3"})]})]}),n.jsx(As,{children:n.jsx(W,{onClick:E,children:a("common:buttons.close")})})]}),S&&!y?.success&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-destructive/10 border border-destructive/30 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-destructive",children:S})}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:E,children:a("common:buttons.cancel")}),n.jsx(W,{onClick:T,disabled:x,children:a("taskReview:pr.actions.retry")})]})]}),!y?.success&&!S&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 text-sm","data-testid":"pr-stats-container",children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsxs("span",{className:"text-muted-foreground",children:[a("taskReview:pr.labels.sourceBranch"),":"]}),n.jsx("span",{className:"font-mono",children:s?.branch||a("taskReview:pr.labels.unknown")})]}),s?.exists&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between mb-1",children:[n.jsxs("span",{className:"text-muted-foreground",children:[a("taskReview:pr.labels.commits"),":"]}),n.jsx("span",{children:s.commitCount||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{className:"text-muted-foreground",children:[a("taskReview:pr.labels.changes"),":"]}),n.jsxs("span",{children:[n.jsxs("span",{className:"text-success",children:["+",s.additions||0]})," / ",n.jsxs("span",{className:"text-destructive",children:["-",s.deletions||0]})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"targetBranch",children:a("taskReview:pr.labels.targetBranch")}),n.jsx(Oe,{id:"targetBranch",value:o,onChange:R=>l(R.target.value),placeholder:s?.baseBranch||"main"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:a("taskReview:pr.hints.targetBranch")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"prTitle",children:a("taskReview:pr.labels.prTitle")}),n.jsx(Oe,{id:"prTitle",value:u,onChange:R=>d(R.target.value),placeholder:t.title}),n.jsx("p",{className:"text-xs text-muted-foreground",children:a("taskReview:pr.hints.prTitle")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ui,{id:"draft-pr-checkbox",checked:m,onCheckedChange:R=>f(R===!0)}),n.jsx("label",{htmlFor:"draft-pr-checkbox",className:"text-sm cursor-pointer",children:a("taskReview:pr.labels.draftPR")})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:E,disabled:x,children:a("common:buttons.cancel")}),n.jsx(W,{onClick:T,disabled:x,children:x?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),a("taskReview:pr.actions.creating")]}):n.jsxs(n.Fragment,{children:[n.jsx(Js,{className:"mr-2 h-4 w-4"}),a("taskReview:pr.actions.create")]})})]})]})]})})}function J1e({message:e="Loading workspace info..."}){return n.jsx("div",{className:"rounded-xl border border-border bg-secondary/30 p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"text-sm",children:e})]})})}function eke({task:e,onClose:t}){const[s,r]=p.useState(!1),i=async()=>{if(e){r(!0);try{await ip(e.id,"done"),t?.()}catch(a){console.error("Error marking task as done:",a)}finally{r(!1)}}};return n.jsxs("div",{className:"rounded-xl border border-border bg-secondary/30 p-4",children:[n.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),"No Workspace Found"]}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No isolated workspace was found for this task. The changes may have been made directly in your project."}),e&&e.status==="human_review"&&n.jsx(W,{onClick:i,disabled:s,size:"sm",variant:"default",className:"w-full",children:s?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Mark as Done"]})})]})}function tke({task:e,projectPath:t,hasWorktree:s=!1,onClose:r,onReviewAgain:i}){const[a,o]=p.useState(!1),[l,u]=p.useState(!1),[d,m]=p.useState(!1),[f,x]=p.useState(null),v=async()=>{o(!0),x(null);try{const S=await window.electronAPI.discardWorktree(e.id,!0);if(!S.success){x(S.error||"Failed to delete worktree");return}const C=await ip(e.id,"done");if(!C.success){x("Worktree deleted but failed to update task status: "+(C.error||"Unknown error"));return}r?.()}catch(S){console.error("Error deleting worktree:",S),x(S instanceof Error?S.message:"Failed to delete worktree")}finally{o(!1)}},y=async()=>{u(!0),x(null);try{await ip(e.id,"done"),r?.()}catch(S){console.error("Error marking task as done:",S),x(S instanceof Error?S.message:"Failed to mark as done")}finally{u(!1)}},w=async()=>{if(i){m(!0),x(null);try{const S=await window.electronAPI.clearStagedState(e.id);if(!S.success){x(S.error||"Failed to reset staged state");return}i()}catch(S){console.error("Error resetting staged state:",S),x(S instanceof Error?S.message:"Failed to reset staged state")}finally{m(!1)}}};return n.jsxs("div",{className:"rounded-xl border border-success/30 bg-success/10 p-4",children:[n.jsxs("h3",{className:"font-medium text-sm text-foreground mb-2 flex items-center gap-2",children:[n.jsx(ua,{className:"h-4 w-4 text-success"}),"Changes Staged in Project"]}),n.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["This task's changes have been staged in your main project",e.stagedAt?` on ${new Date(e.stagedAt).toLocaleDateString()}`:"","."]}),n.jsxs("div",{className:"bg-background/50 rounded-lg p-3 mb-3",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Next steps:"}),n.jsxs("ol",{className:"text-xs text-muted-foreground space-y-1 list-decimal list-inside",children:[n.jsxs("li",{children:["Review staged changes with ",n.jsx("code",{className:"bg-background px-1 rounded",children:"git status"})," and ",n.jsx("code",{className:"bg-background px-1 rounded",children:"git diff --staged"})]}),n.jsxs("li",{children:["Commit when ready: ",n.jsx("code",{className:"bg-background px-1 rounded",children:'git commit -m "your message"'})]}),n.jsx("li",{children:"Push to remote when satisfied"})]})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"flex gap-2",children:s?n.jsx(W,{onClick:v,disabled:a||l||d,size:"sm",variant:"default",className:"flex-1",children:a?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Cleaning up..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Delete Worktree & Mark Done"]})}):n.jsx(W,{onClick:y,disabled:a||l||d,size:"sm",variant:"default",className:"flex-1",children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Marking done..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Mark as Done"]})})}),n.jsxs("div",{className:"flex gap-2",children:[s&&n.jsx(W,{onClick:y,disabled:a||l||d,size:"sm",variant:"outline",className:"flex-1",children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Marking done..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Mark Done Only"]})}),s&&i&&n.jsx(W,{onClick:w,disabled:a||l||d,size:"sm",variant:"outline",className:"flex-1",children:d?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Resetting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"h-4 w-4 mr-2"}),"Review Again"]})})]}),f&&n.jsx("p",{className:"text-xs text-destructive",children:f}),s&&n.jsx("p",{className:"text-xs text-muted-foreground",children:'"Delete Worktree & Mark Done" cleans up the isolated workspace. "Mark Done Only" keeps it for reference.'})]})]})}function ske({task:e,feedback:t,isSubmitting:s,worktreeStatus:r,worktreeDiff:i,isLoadingWorktree:a,isMerging:o,isDiscarding:l,showDiscardDialog:u,showDiffDialog:d,workspaceError:m,stageOnly:f,stagedSuccess:x,stagedProjectPath:v,suggestedCommitMessage:y,mergePreview:w,isLoadingPreview:S,showConflictDialog:C,onFeedbackChange:_,onReject:j,images:T,onImagesChange:E,onMerge:A,onDiscard:R,onShowDiscardDialog:D,onShowDiffDialog:M,onStageOnlyChange:P,onShowConflictDialog:O,onLoadMergePreview:F,onClose:$,onSwitchToTerminals:z,onOpenInbuiltTerminal:H,onReviewAgain:I,showPRDialog:V,isCreatingPR:B,onShowPRDialog:K,onCreatePR:L}){return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"section-divider-gradient"}),x&&n.jsx(U1e,{stagedSuccess:x,suggestedCommitMessage:y}),a?n.jsx(J1e,{}):x?null:e.stagedInMainProject?n.jsx(tke,{task:e,projectPath:v,hasWorktree:r?.exists||!1,onClose:$,onReviewAgain:I}):r?.exists?n.jsx(q1e,{worktreeStatus:r,workspaceError:m,stageOnly:f,mergePreview:w,isLoadingPreview:S,isMerging:o,isDiscarding:l,isCreatingPR:B,onShowDiffDialog:M,onShowDiscardDialog:D,onShowConflictDialog:O,onLoadMergePreview:F,onStageOnlyChange:P,onMerge:A,onShowPRDialog:K,onClose:$,onSwitchToTerminals:z,onOpenInbuiltTerminal:H}):n.jsx(eke,{task:e,onClose:$}),n.jsx(W1e,{feedback:t,isSubmitting:s,onFeedbackChange:_,onReject:j,images:T,onImagesChange:E}),n.jsx(K1e,{open:u,task:e,worktreeStatus:r,isDiscarding:l,onOpenChange:D,onDiscard:R}),n.jsx(Y1e,{open:d,worktreeDiff:i,onOpenChange:M}),n.jsx(Q1e,{open:C,mergePreview:w,stageOnly:f,onOpenChange:O,onMerge:A}),n.jsx(AU,{open:V,task:e,worktreeStatus:r,onOpenChange:K,onCreatePR:L})]})}function nke({open:e,task:t,onOpenChange:s,onSwitchToTerminals:r,onOpenInbuiltTerminal:i}){return t?n.jsx(ike,{open:e,task:t,onOpenChange:s,onSwitchToTerminals:r,onOpenInbuiltTerminal:i}):null}const rke=()=>{const e=localStorage.getItem("use_files_tab");return e===null||e==="true"};function ike({open:e,task:t,onOpenChange:s,onSwitchToTerminals:r,onOpenInbuiltTerminal:i}){const{t:a}=Re(["tasks"]),{toast:o}=bo(),l=n0e({task:t}),u=rke(),d=AF(t.subtasks),m=t.subtasks.filter(A=>A.status==="completed").length,f=t.subtasks.length,x=async()=>{if(l.isRunning&&!l.isStuck)z8(t.id);else{if(l.isIncomplete&&!await l.reloadPlanForIncompleteTask()){o({title:"Cannot Resume Task",description:"Failed to load implementation plan. Please try again or check the task files.",variant:"destructive",duration:5e3});return}B8(t.id)}},v=async()=>{l.setIsRecovering(!0),(await H8(t.id,{autoRestart:!0})).success&&(l.setIsStuck(!1),l.setHasCheckedRunning(!1)),l.setIsRecovering(!1)},y=async()=>{!l.feedback.trim()&&l.feedbackImages.length===0||(l.setIsSubmitting(!0),await mwe(t.id,!1,l.feedback,l.feedbackImages),l.setIsSubmitting(!1),l.setFeedback(""),l.setFeedbackImages([]))},w=async()=>{l.setIsDeleting(!0),l.setDeleteError(null);const A=await gwe(t.id);A.success?(l.setShowDeleteDialog(!1),s(!1)):l.setDeleteError(A.error||"Failed to delete task"),l.setIsDeleting(!1)},S=async()=>{l.setIsMerging(!0),l.setWorkspaceError(null);try{const A=await window.electronAPI.mergeWorktree(t.id,{noCommit:l.stageOnly});A.success&&A.data?.success?l.stageOnly&&A.data.staged?(l.setWorkspaceError(null),l.setStagedSuccess(A.data.message||"Changes staged in main project"),l.setStagedProjectPath(A.data.projectPath),l.setSuggestedCommitMessage(A.data.suggestedCommitMessage)):s(!1):l.setWorkspaceError(A.data?.message||A.error||"Failed to merge changes")}catch(A){l.setWorkspaceError(A instanceof Error?A.message:"Unknown error during merge")}finally{l.setIsMerging(!1)}},C=async()=>{l.setIsDiscarding(!0),l.setWorkspaceError(null);const A=await window.electronAPI.discardWorktree(t.id);A.success&&A.data?.success?(l.setShowDiscardDialog(!1),s(!1)):l.setWorkspaceError(A.data?.message||A.error||"Failed to discard changes"),l.setIsDiscarding(!1)},_=async A=>{l.setIsCreatingPR(!0);try{const R=await window.electronAPI.createWorktreePR(t.id,A);return R.success&&R.data?(R.data.success&&R.data.prUrl&&!R.data.alreadyExists&&Ks.getState().updateTask(t.id,{status:"pr_created",metadata:{...t.metadata,prUrl:R.data.prUrl}}),R.data):{success:!1,error:R.error,prUrl:void 0,alreadyExists:!1}}catch(R){return{success:!1,error:R instanceof Error?R.message:void 0,prUrl:void 0,alreadyExists:!1}}finally{l.setIsCreatingPR(!1)}},j=()=>{l.isRunning&&!l.isStuck&&o({title:a("tasks:notifications.backgroundTaskTitle"),description:a("tasks:notifications.backgroundTaskDescription"),duration:4e3}),s(!1)},T=(A,R)=>{if(R)return"warning";switch(A){case"done":case"pr_created":return"success";case"human_review":return"purple";case"in_progress":return"info";default:return"secondary"}},E=()=>l.isStuck?n.jsx(W,{variant:"warning",onClick:v,disabled:l.isRecovering,children:l.isRecovering?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Recovering..."]}):n.jsxs(n.Fragment,{children:[n.jsx(wo,{className:"mr-2 h-4 w-4"}),"Recover Task"]})}):l.isIncomplete?n.jsx(W,{variant:"default",onClick:x,disabled:l.isLoadingPlan,children:l.isLoadingPlan?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading Plan..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Resume Task"]})}):t.status==="backlog"||t.status==="in_progress"?n.jsx(W,{variant:l.isRunning?"destructive":"default",onClick:x,children:l.isRunning?n.jsxs(n.Fragment,{children:[n.jsx(jo,{className:"mr-2 h-4 w-4"}),"Stop Task"]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"mr-2 h-4 w-4"}),"Start Task"]})}):t.status==="done"?n.jsxs("div",{className:"completion-state text-sm flex items-center gap-2 text-success",children:[n.jsx(Xe,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:a("tasks:status.complete")})]}):t.status==="pr_created"?n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"completion-state text-sm flex items-center gap-2 text-success",children:[n.jsx(Xe,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:a("tasks:status.complete")})]}),t.metadata?.prUrl&&n.jsxs("button",{type:"button",onClick:()=>window.electronAPI?.openExternal(t.metadata.prUrl),className:"completion-state text-sm flex items-center gap-2 text-info cursor-pointer hover:underline bg-transparent border-none p-0",children:[n.jsx(Js,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:a(Dv[t.status])})]})]}):null;return n.jsxs(ul,{delayDuration:300,children:[n.jsx(Lp,{open:e,onOpenChange:s,children:n.jsxs(Op,{children:[n.jsx(Ih,{className:J("fixed inset-0 z-50 bg-black/60","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),n.jsxs(Mh,{className:J("fixed left-[50%] top-4 z-50","translate-x-[-50%]","w-[95vw] max-w-5xl h-[calc(100vh-32px)]","bg-card border border-border rounded-xl","shadow-2xl overflow-hidden flex flex-col","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95","duration-200"),children:[n.jsxs("div",{className:"p-5 pb-4 border-b border-border shrink-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[n.jsx(Lh,{className:"text-xl font-semibold leading-tight text-foreground truncate",children:t.title}),n.jsx(Oh,{asChild:!0,children:n.jsxs("div",{className:"mt-2.5 flex items-center gap-2 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:"text-xs font-mono",children:t.specId}),l.isStuck?n.jsxs(oe,{variant:"warning",className:"text-xs flex items-center gap-1 animate-pulse",children:[n.jsx(Tt,{className:"h-3 w-3"}),"Stuck"]}):l.isIncomplete?n.jsx(n.Fragment,{children:n.jsxs(oe,{variant:"warning",className:"text-xs flex items-center gap-1",children:[n.jsx(Tt,{className:"h-3 w-3"}),"Incomplete"]})}):n.jsxs(n.Fragment,{children:[n.jsx(oe,{variant:T(t.status,l.isStuck),className:J("text-xs",t.status==="in_progress"&&!l.isStuck&&"status-running"),children:a(Dv[t.status])}),t.status==="human_review"&&t.reviewReason&&n.jsx(oe,{variant:t.reviewReason==="completed"?"success":t.reviewReason==="errors"?"destructive":"warning",className:"text-xs",children:t.reviewReason==="completed"?"Completed":t.reviewReason==="errors"?"Has Errors":t.reviewReason==="plan_review"?"Approve Plan":"QA Issues"})]}),f>0&&n.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:[m,"/",f," subtasks"]})]})})]}),n.jsxs("div",{className:"flex items-center gap-1 shrink-0 electron-no-drag",children:[n.jsx(W,{variant:"ghost",size:"icon",className:"hover:bg-primary/10 hover:text-primary transition-colors",onClick:()=>l.setIsEditDialogOpen(!0),disabled:l.isRunning&&!l.isStuck,children:n.jsx(fl,{className:"h-4 w-4"})}),n.jsx(Fh,{asChild:!0,children:n.jsxs(W,{variant:"ghost",size:"icon",className:"hover:bg-muted transition-colors",children:[n.jsx(Ss,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Close"})]})})]})]}),(l.isRunning||m>0)&&f>0&&n.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[n.jsx(xi,{value:d,className:"h-1.5 flex-1"}),n.jsxs("span",{className:"text-xs text-muted-foreground tabular-nums w-10 text-right",children:[d,"%"]})]}),(l.isStuck||l.isIncomplete)&&n.jsx("div",{className:"mt-3",children:n.jsx(k1e,{isStuck:l.isStuck,isIncomplete:l.isIncomplete,isRecovering:l.isRecovering,taskProgress:l.taskProgress,onRecover:v,onResume:x})})]}),n.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:n.jsxs(Wy,{value:l.activeTab,onValueChange:l.setActiveTab,className:"flex flex-col h-full",children:[n.jsxs(qp,{className:"w-full justify-start rounded-none border-b border-border bg-transparent px-5 h-auto shrink-0",children:[n.jsx(wr,{value:"overview",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:"Overview"}),n.jsxs(wr,{value:"subtasks",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:["Subtasks (",t.subtasks.length,")"]}),n.jsx(wr,{value:"logs",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:"Logs"}),u&&n.jsx(wr,{value:"files",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:bg-transparent data-[state=active]:shadow-none px-4 py-2.5 text-sm",children:a("tasks:files.tab")})]}),n.jsx(Ii,{value:"overview",className:"flex-1 min-h-0 overflow-hidden mt-0",children:n.jsx(zt,{className:"h-full",children:n.jsxs("div",{className:"p-5 space-y-5 overflow-x-hidden max-w-full",children:[n.jsx(C1e,{task:t}),l.needsReview&&n.jsxs(n.Fragment,{children:[n.jsx(Rn,{}),n.jsx(ske,{task:t,feedback:l.feedback,isSubmitting:l.isSubmitting,worktreeStatus:l.worktreeStatus,worktreeDiff:l.worktreeDiff,isLoadingWorktree:l.isLoadingWorktree,isMerging:l.isMerging,isDiscarding:l.isDiscarding,showDiscardDialog:l.showDiscardDialog,showDiffDialog:l.showDiffDialog,workspaceError:l.workspaceError,stageOnly:l.stageOnly,stagedSuccess:l.stagedSuccess,stagedProjectPath:l.stagedProjectPath,suggestedCommitMessage:l.suggestedCommitMessage,mergePreview:l.mergePreview,isLoadingPreview:l.isLoadingPreview,showConflictDialog:l.showConflictDialog,onFeedbackChange:l.setFeedback,onReject:y,images:l.feedbackImages,onImagesChange:l.setFeedbackImages,onMerge:S,onDiscard:C,onShowDiscardDialog:l.setShowDiscardDialog,onShowDiffDialog:l.setShowDiffDialog,onStageOnlyChange:l.setStageOnly,onShowConflictDialog:l.setShowConflictDialog,onLoadMergePreview:l.loadMergePreview,onClose:j,onSwitchToTerminals:r,onOpenInbuiltTerminal:i,onReviewAgain:l.handleReviewAgain,showPRDialog:l.showPRDialog,isCreatingPR:l.isCreatingPR,onShowPRDialog:l.setShowPRDialog,onCreatePR:_})]})]})})}),n.jsx(Ii,{value:"subtasks",className:"flex-1 min-h-0 overflow-hidden mt-0",children:n.jsx(E1e,{task:t})}),n.jsx(Ii,{value:"logs",className:"flex-1 min-h-0 overflow-hidden mt-0",children:n.jsx(F1e,{task:t,phaseLogs:l.phaseLogs,isLoadingLogs:l.isLoadingLogs,expandedPhases:l.expandedPhases,isStuck:l.isStuck,logsEndRef:l.logsEndRef,logsContainerRef:l.logsContainerRef,onLogsScroll:l.handleLogsScroll,onTogglePhase:l.togglePhase})}),u&&n.jsx(Ii,{value:"files",className:"flex-1 min-h-0 overflow-hidden mt-0",children:n.jsx(H1e,{task:t})})]})}),n.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 border-t border-border shrink-0",children:[n.jsxs(W,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>l.setShowDeleteDialog(!0),disabled:l.isRunning&&!l.isStuck,children:[n.jsx(or,{className:"mr-2 h-4 w-4"}),"Delete Task"]}),n.jsx("div",{className:"flex-1"}),E(),n.jsx(W,{variant:"outline",onClick:j,children:"Close"})]})]})]})}),n.jsx(s0e,{task:t,open:l.isEditDialogOpen,onOpenChange:l.setIsEditDialogOpen}),n.jsx(Kr,{open:l.showDeleteDialog,onOpenChange:l.setShowDeleteDialog,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-destructive"}),"Delete Task"]}),n.jsx(Lr,{asChild:!0,children:n.jsxs("div",{className:"text-sm text-muted-foreground space-y-3",children:[n.jsxs("p",{children:["Are you sure you want to delete ",n.jsxs("strong",{className:"text-foreground",children:['"',t.title,'"']}),"?"]}),n.jsx("p",{className:"text-destructive",children:"This action cannot be undone. All task files, including the spec, implementation plan, and any generated code will be permanently deleted from the project."}),l.deleteError&&n.jsx("p",{className:"text-destructive bg-destructive/10 px-3 py-2 rounded-lg text-sm",children:l.deleteError})]})})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:l.isDeleting,children:"Cancel"}),n.jsx(pi,{onClick:A=>{A.preventDefault(),w()},disabled:l.isDeleting,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:l.isDeleting?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"mr-2 h-4 w-4"}),"Delete Permanently"]})})]})]})})]})}function _u(e,t,s){let r=s.initialDeps??[],i,a=!0;function o(){var l,u,d;let m;s.key&&((l=s.debug)!=null&&l.call(s))&&(m=Date.now());const f=e();if(!(f.length!==r.length||f.some((y,w)=>r[w]!==y)))return i;r=f;let v;if(s.key&&((u=s.debug)!=null&&u.call(s))&&(v=Date.now()),i=t(...f),s.key&&((d=s.debug)!=null&&d.call(s))){const y=Math.round((Date.now()-m)*100)/100,w=Math.round((Date.now()-v)*100)/100,S=w/16,C=(_,j)=>{for(_=String(_);_.length<j;)_=" "+_;return _};console.info(`%c ${C(w,5)} /${C(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*S,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(a&&s.skipInitialOnChange)&&s.onChange(i),a=!1,i}return o.updateDeps=l=>{r=l},o}function x4(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const ake=(e,t)=>Math.abs(e-t)<1.01,oke=(e,t,s)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),s)}},v4=e=>{const{offsetWidth:t,offsetHeight:s}=e;return{width:t,height:s}},lke=e=>e,cke=e=>{const t=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=s;i++)r.push(i);return r},dke=(e,t)=>{const s=e.scrollElement;if(!s)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:l,height:u}=o;t({width:Math.round(l),height:Math.round(u)})};if(i(v4(s)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(o=>{const l=()=>{const u=o[0];if(u?.borderBoxSize){const d=u.borderBoxSize[0];if(d){i({width:d.inlineSize,height:d.blockSize});return}}i(v4(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return a.observe(s,{box:"border-box"}),()=>{a.unobserve(s)}},b4={passive:!0},y4=typeof window>"u"?!0:"onscrollend"in window,uke=(e,t)=>{const s=e.scrollElement;if(!s)return;const r=e.targetWindow;if(!r)return;let i=0;const a=e.options.useScrollendEvent&&y4?()=>{}:oke(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=m=>()=>{const{horizontal:f,isRtl:x}=e.options;i=f?s.scrollLeft*(x&&-1||1):s.scrollTop,a(),t(i,m)},l=o(!0),u=o(!1);u(),s.addEventListener("scroll",l,b4);const d=e.options.useScrollendEvent&&y4;return d&&s.addEventListener("scrollend",u,b4),()=>{s.removeEventListener("scroll",l),d&&s.removeEventListener("scrollend",u)}},hke=(e,t,s)=>{if(t?.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},mke=(e,{adjustments:t=0,behavior:s},r)=>{var i,a;const o=e+t;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:s})};class fke{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const r=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const o=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),s=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([r,i])=>{typeof i>"u"&&delete s[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:lke,rangeExtractor:cke,onChange:()=>{},measureElement:hke,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,s)},this.maybeNotify=_u(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,r)=>{const i=new Map,a=new Map;for(let o=r-1;o>=0;o--){const l=s[o];if(i.has(l.lane))continue;const u=a.get(l.lane);if(u==null||l.end>u.end?a.set(l.lane,l):l.end<u.end&&i.set(l.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=_u(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,r,i,a,o,l)=>(this.prevLanes!==void 0&&this.prevLanes!==l&&(this.lanesChangedFlag=!0),this.prevLanes=l,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:o,lanes:l}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=_u(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:o,lanes:l},u)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const x of this.laneAssignments.keys())x>=s&&this.laneAssignments.delete(x);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(x=>{this.itemSizeCache.set(x.key,x.size)}));const d=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const m=this.measurementsCache.slice(0,d),f=new Array(l).fill(void 0);for(let x=0;x<d;x++){const v=m[x];v&&(f[v.lane]=x)}for(let x=d;x<s;x++){const v=a(x),y=this.laneAssignments.get(x);let w,S;if(y!==void 0&&this.options.lanes>1){w=y;const T=f[w],E=T!==void 0?m[T]:void 0;S=E?E.end+this.options.gap:r+i}else{const T=this.options.lanes===1?m[x-1]:this.getFurthestMeasurement(m,x);S=T?T.end+this.options.gap:r+i,w=T?T.lane:x%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(x,w)}const C=u.get(v),_=typeof C=="number"?C:this.options.estimateSize(x),j=S+_;m[x]={index:x,start:S,size:_,end:j,key:v,lane:w},f[w]=x}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=_u(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,r,i,a)=>this.range=s.length>0&&r>0?pke({measurements:s,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=_u(()=>{let s=null,r=null;const i=this.calculateRange();return i&&(s=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,r]},(s,r,i,a,o)=>a===null||o===null?[]:s({startIndex:a,endIndex:o,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const r=this.options.indexAttribute,i=s.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(s,r)=>{const i=this.indexFromElement(s),a=this.measurementsCache[i];if(!a)return;const o=a.key,l=this.elementsCache.get(o);l!==s&&(l&&this.observer.unobserve(l),this.observer.observe(s),this.elementsCache.set(o,s)),s.isConnected&&this.resizeItem(i,this.options.measureElement(s,r,this))},this.resizeItem=(s,r)=>{const i=this.measurementsCache[s];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,o=r-a;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,o,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(s,void 0)},this.getVirtualItems=_u(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,r)=>{const i=[];for(let a=0,o=s.length;a<o;a++){const l=s[a],u=r[l];i.push(u)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const r=this.getMeasurements();if(r.length!==0)return x4(r[EU(0,r.length-1,i=>x4(r[i]).start,s)])},this.getOffsetForAlignment=(s,r,i=0)=>{const a=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=s>=o+a?"end":"start"),r==="center"?s+=(i-a)/2:r==="end"&&(s-=a);const l=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(l,s),0)},this.getOffsetForIndex=(s,r="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const i=this.measurementsCache[s];if(!i)return;const a=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(i.end>=o+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(s,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1));let a=0;const o=10,l=d=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(s,d);if(!m){console.warn("Failed to get offset for index:",s);return}const[f,x]=m;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const v=this.getScrollOffset(),y=this.getOffsetForIndex(s,x);if(!y){console.warn("Failed to get offset for index:",s);return}ake(y[0],v)||u(x)})},u=d=>{this.targetWindow&&(a++,a<o?this.targetWindow.requestAnimationFrame(()=>l(d)):console.warn(`Failed to scroll to index ${s} after ${o} attempts.`))};l(r)},this.scrollBy=(s,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var s;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((s=r[r.length-1])==null?void 0:s.end)??0;else{const a=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&a.some(l=>l===null);){const l=r[o];a[l.lane]===null&&(a[l.lane]=l.end),o--}i=Math.max(...a.filter(l=>l!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:r,behavior:i})=>{this.options.scrollToFn(s,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(t)}}const EU=(e,t,s,r)=>{for(;e<=t;){const i=(e+t)/2|0,a=s(i);if(a<r)e=i+1;else if(a>r)t=i-1;else return i}return e>0?e-1:0};function pke({measurements:e,outerSize:t,scrollOffset:s,lanes:r}){const i=e.length-1,a=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:i};let o=EU(0,i,a,s),l=o;if(r===1)for(;l<i&&e[l].end<s+t;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<i&&u.some(m=>m<s+t);){const m=e[l];u[m.lane]=m.end,l++}const d=Array(r).fill(s+t);for(;o>=0&&d.some(m=>m>=s);){const m=e[o];d[m.lane]=m.start,o--}o=Math.max(0,o-o%r),l=Math.min(i,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const w4=typeof document<"u"?p.useLayoutEffect:p.useEffect;function gke(e){const t=p.useReducer(()=>({}),{})[1],s={...e,onChange:(i,a)=>{var o;a?Di.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,a)}},[r]=p.useState(()=>new fke(s));return r.setOptions(s),w4(()=>r._didMount(),[]),w4(()=>r._willUpdate()),r}function xke(e){return gke({observeElementRect:dke,observeElementOffset:uke,scrollToFn:mke,...e})}function vke(e){switch(e.split(".").pop()?.toLowerCase()){case"ts":case"tsx":case"js":case"jsx":case"py":case"rb":case"go":case"rs":case"java":case"c":case"cpp":case"h":case"cs":case"php":case"swift":case"kt":return n.jsx(Ms,{className:"h-4 w-4 text-info"});case"json":case"yaml":case"yml":case"toml":return n.jsx(Q3,{className:"h-4 w-4 text-warning"});case"md":case"txt":case"rst":return n.jsx($n,{className:"h-4 w-4 text-muted-foreground"});case"png":case"jpg":case"jpeg":case"gif":case"svg":case"webp":case"ico":return n.jsx(pre,{className:"h-4 w-4 text-purple-400"});case"css":case"scss":case"sass":case"less":return n.jsx(Ms,{className:"h-4 w-4 text-pink-400"});case"html":case"htm":return n.jsx(Ms,{className:"h-4 w-4 text-orange-400"});default:return n.jsx(i1,{className:"h-4 w-4 text-muted-foreground"})}}function bke({node:e,depth:t,isExpanded:s,isLoading:r,onToggle:i}){const{t:a}=Re("common"),[o,l]=p.useState(!1),u=p.useRef(null);p.useEffect(()=>()=>{u.current&&u.current.parentNode&&(u.current.parentNode.removeChild(u.current),u.current=null)},[]);const d=y=>{y.stopPropagation(),e.isDirectory&&i()},m=y=>{y.stopPropagation(),e.isDirectory&&i()},f=y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),y.stopPropagation(),e.isDirectory&&i())},x=y=>{y.stopPropagation(),l(!0);const w={type:"file-reference",path:e.path,name:e.name,isDirectory:e.isDirectory};y.dataTransfer.setData("application/json",JSON.stringify(w)),y.dataTransfer.setData("text/plain",`@${e.name}`),y.dataTransfer.effectAllowed="copy";const S=document.createElement("div");S.className="flex items-center gap-2 bg-card border border-primary rounded-md px-3 py-2 shadow-lg text-sm";const C=document.createElement("span");C.textContent=e.isDirectory?"":"";const _=document.createElement("span");_.textContent=e.name,S.appendChild(C),S.appendChild(_),S.style.position="absolute",S.style.top="-1000px",S.style.left="-1000px",document.body.appendChild(S),y.dataTransfer.setDragImage(S,0,0),u.current=S},v=()=>{l(!1),u.current&&u.current.parentNode&&(u.current.parentNode.removeChild(u.current),u.current=null)};return n.jsxs("div",{role:e.isDirectory?"button":void 0,tabIndex:e.isDirectory?0:void 0,draggable:!0,onDragStart:x,onDragEnd:v,onKeyDown:e.isDirectory?f:void 0,className:J("flex items-center gap-1 py-1 px-2 rounded cursor-grab select-none","hover:bg-accent/50 transition-colors",e.isDirectory&&"focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1",o&&"opacity-50 bg-accent ring-2 ring-primary"),style:{paddingLeft:`${t*12+8}px`},onClick:d,onDoubleClick:m,"aria-label":e.isDirectory?a("accessibility.toggleFolder",{name:e.name}):void 0,"aria-expanded":e.isDirectory?s:void 0,children:[e.isDirectory?n.jsx("button",{type:"button",className:"flex items-center justify-center w-4 h-4 hover:bg-accent rounded",onClick:y=>{y.stopPropagation(),i()},"aria-label":s?a("accessibility.collapseFolder",{name:e.name}):a("accessibility.expandFolder",{name:e.name}),"aria-expanded":s,tabIndex:-1,children:r?n.jsx(we,{className:"h-3 w-3 animate-spin text-muted-foreground","aria-hidden":"true"}):s?n.jsx(bt,{className:"h-3 w-3 text-muted-foreground","aria-hidden":"true"}):n.jsx(Xt,{className:"h-3 w-3 text-muted-foreground","aria-hidden":"true"})}):n.jsx("span",{className:"w-4","aria-hidden":"true"}),e.isDirectory?n.jsx(Uf,{className:J("h-4 w-4",s?"text-primary":"text-warning")}):vke(e.name),n.jsx("span",{className:"text-xs truncate flex-1 text-foreground",children:e.name})]})}const ka=Gn((e,t)=>({isOpen:!1,expandedFolders:new Set,files:new Map,isLoading:new Map,error:null,toggle:()=>{e(s=>({isOpen:!s.isOpen}))},open:()=>{e({isOpen:!0})},close:()=>{e({isOpen:!1})},toggleFolder:s=>{e(r=>{const i=new Set(r.expandedFolders);return i.has(s)?i.delete(s):i.add(s),{expandedFolders:i}})},expandFolder:s=>{e(r=>{const i=new Set(r.expandedFolders);return i.add(s),{expandedFolders:i}})},collapseFolder:s=>{e(r=>{const i=new Set(r.expandedFolders);return i.delete(s),{expandedFolders:i}})},loadDirectory:async s=>{const i=t().files.get(s);if(i)return i;e(a=>{const o=new Map(a.isLoading);return o.set(s,!0),{isLoading:o,error:null}});try{const a=await window.electronAPI.listDirectory(s);if(!a.success||!a.data)throw new Error(a.error||"Failed to load directory");return e(o=>{const l=new Map(o.files);l.set(s,a.data);const u=new Map(o.isLoading);return u.set(s,!1),{files:l,isLoading:u}}),a.data}catch(a){const o=a instanceof Error?a.message:"Unknown error";return e(l=>{const u=new Map(l.isLoading);return u.set(s,!1),{isLoading:u,error:o}}),[]}},setError:s=>{e({error:s})},clearCache:()=>{e({files:new Map,expandedFolders:new Set})},isExpanded:s=>t().expandedFolders.has(s),getFiles:s=>t().files.get(s),isLoadingDir:s=>t().isLoading.get(s)??!1,getAllExpandedFiles:()=>new Set(t().expandedFolders),getVisibleFiles:s=>{const r=t(),i=[],a=o=>{const l=r.files.get(o);if(l)for(const u of l)i.push(u),u.isDirectory&&r.expandedFolders.has(u.path)&&a(u.path)};return a(s),i},computeVisibleItems:s=>{const r=t(),i=[],a=o=>{const l=r.files.get(o);if(l)for(const u of l)i.push(u),u.isDirectory&&r.expandedFolders.has(u.path)&&a(u.path)};return a(s),{nodes:i,count:i.length}}}));function TU(e,t,s,r,i){const a=[];for(const o of e){const l=s.has(o.path),u=i.get(o.path)??!1;if(a.push({node:o,depth:t,isExpanded:l,isLoading:u,key:o.path}),o.isDirectory&&l){const d=r.get(o.path);if(d&&d.length>0){const m=TU(d,t+1,s,r,i);a.push(...m)}}}return a}function yke(e){const t=ka(d=>d.expandedFolders),s=ka(d=>d.files),r=ka(d=>d.isLoading),i=ka(d=>d.toggleFolder),a=ka(d=>d.loadDirectory),o=s.get(e),l=p.useMemo(()=>o?TU(o,0,t,s,r):[],[o,t,s,r]),u=d=>{if(!d.isDirectory)return;const m=t.has(d.path);i(d.path),!m&&!s.has(d.path)&&a(d.path)};return{flattenedNodes:l,count:l.length,handleToggle:u,isRootLoading:r.get(e)??!1,hasRootFiles:!!o}}const wke=28,jke=10;function PU({rootPath:e}){const t=p.useRef(null),{loadDirectory:s,isLoadingDir:r,error:i}=ka(),{flattenedNodes:a,count:o,handleToggle:l,isRootLoading:u,hasRootFiles:d}=yke(e),m=r(e);p.useEffect(()=>{!d&&!m&&s(e)},[e,d,m,s]);const f=xke({count:o,getScrollElement:()=>t.current,estimateSize:()=>wke,overscan:jke}),x=p.useCallback(v=>()=>{const y=a[v];y&&l(y.node)},[a,l]);return u&&!d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):i?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 text-center",children:[n.jsx(Ke,{className:"h-5 w-5 text-destructive mb-2"}),n.jsx("p",{className:"text-xs text-destructive",children:i})]}):!d||o===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 text-center",children:[n.jsx(Xr,{className:"h-6 w-6 text-muted-foreground mb-2"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"No files found"})]}):n.jsx("div",{ref:t,className:"h-full overflow-auto py-1",children:n.jsx("div",{style:{height:`${f.getTotalSize()}px`,width:"100%",position:"relative"},children:f.getVirtualItems().map(v=>{const y=a[v.index];return y?n.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${v.size}px`,transform:`translateY(${v.start}px)`},children:n.jsx(bke,{node:y.node,depth:y.depth,isExpanded:y.isExpanded,isLoading:y.isLoading,onToggle:x(v.index)})},y.key):null})})})}const Ske={hidden:{width:0,opacity:0},visible:{width:288,opacity:1}},_ke={hidden:{x:20,opacity:0},visible:{x:0,opacity:1}};function Nke({isOpen:e,onClose:t,projectPath:s}){const{clearCache:r,loadDirectory:i}=ka(),a=()=>{r(),i(s)};return n.jsx(sp,{mode:"wait",children:e&&n.jsx(zn.div,{variants:Ske,initial:"hidden",animate:"visible",exit:"hidden",transition:{width:{duration:.3,ease:[.4,0,.2,1]},opacity:{duration:.2}},className:"h-full bg-card border-l border-border flex flex-col shadow-xl overflow-hidden",style:{minWidth:0},children:n.jsxs(zn.div,{variants:_ke,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.25,delay:.1,ease:[.4,0,.2,1]},className:"flex flex-col h-full w-72",children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-card/80 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ol,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Project Files"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:a,title:"Refresh",children:n.jsx(We,{className:"h-3.5 w-3.5"})}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:t,title:"Close",children:n.jsx(Ss,{className:"h-3.5 w-3.5"})})]})]}),n.jsx("div",{className:"px-3 py-2 bg-muted/30 border-b border-border shrink-0",children:n.jsx("p",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:"Drag files to add as references"})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(PU,{rootPath:s})})]})})})}function Cke({query:e,projectPath:t,position:s,onSelect:r,onClose:i,maxResults:a=10}){const[o,l]=p.useState(0),u=p.useRef(null),{files:d,loadDirectory:m}=ka();p.useEffect(()=>{t&&!d.has(t)&&m(t)},[t,d,m]);const f=p.useMemo(()=>{const w=[],S=(C,_=new Set)=>{if(_.has(C))return;_.add(C);const j=d.get(C);if(j)for(const T of j)w.push(T),T.isDirectory&&d.has(T.path)&&S(T.path,_)};return S(t),w},[d,t]),x=p.useMemo(()=>{if(!e)return f.filter(C=>!C.isDirectory).slice(0,a);const w=e.toLowerCase();return f.filter(C=>!C.isDirectory).map(C=>{const _=C.name.toLowerCase(),j=C.path.toLowerCase();let T=0;return _===w?T=1e3:_.startsWith(w)?T=100:_.includes(w)?T=50:j.includes(w)&&(T=10),{file:C,score:T}}).filter(C=>C.score>0).sort((C,_)=>_.score-C.score).slice(0,a).map(C=>C.file)},[f,e,a]);p.useEffect(()=>{l(0)},[x]),p.useEffect(()=>{const w=u.current;if(!w)return;const S=w.children[o];S&&S.scrollIntoView({block:"nearest"})},[o]);const v=p.useCallback(w=>{switch(w.key){case"ArrowDown":w.preventDefault(),l(S=>S<x.length-1?S+1:S);break;case"ArrowUp":w.preventDefault(),l(S=>S>0?S-1:S);break;case"Enter":if(w.preventDefault(),x[o]){const S=x[o];r(S.name,S.path)}break;case"Escape":w.preventDefault(),i();break;case"Tab":if(w.preventDefault(),x[o]){const S=x[o];r(S.name,S.path)}break}},[x,o,r,i]);p.useEffect(()=>(document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)),[v]);const y=w=>w.startsWith(t)?w.slice(t.length+1):w;return x.length===0?n.jsx("div",{className:"absolute z-50 bg-popover border border-border rounded-md shadow-lg p-3 text-sm text-muted-foreground",style:{top:s.top,left:s.left,minWidth:"200px"},children:"No files found"}):n.jsxs("div",{className:"absolute z-50 bg-popover border border-border rounded-md shadow-lg overflow-hidden",style:{top:s.top,left:s.left,minWidth:"280px",maxWidth:"400px",maxHeight:"240px"},children:[n.jsx("div",{ref:u,className:"overflow-y-auto max-h-[240px]",children:x.map((w,S)=>n.jsxs("button",{className:J("w-full flex items-center gap-2 px-3 py-2 text-left text-sm","hover:bg-accent hover:text-accent-foreground","focus:outline-none transition-colors",S===o&&"bg-accent text-accent-foreground"),onClick:()=>r(w.name,w.path),onMouseEnter:()=>l(S),children:[w.isDirectory?n.jsx(Uf,{className:"h-4 w-4 text-muted-foreground shrink-0"}):n.jsx(i1,{className:"h-4 w-4 text-muted-foreground shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:w.name}),n.jsxs("div",{className:"text-xs text-muted-foreground truncate flex items-center gap-1",children:[n.jsx(Xt,{className:"h-3 w-3 shrink-0"}),y(w.path)]})]})]},w.path))}),n.jsxs("div",{className:"border-t border-border px-3 py-1.5 text-[10px] text-muted-foreground bg-muted/30",children:[n.jsx("span",{className:"font-medium",children:""})," navigate  ",n.jsx("span",{className:"font-medium",children:"Enter"})," select  ",n.jsx("span",{className:"font-medium",children:"Esc"})," close"]})]})}const Zm="__project_default__";function kke({projectId:e,open:t,onOpenChange:s}){const{t:r}=Re(["tasks","common"]),{settings:i}=cs(),a=ar.find(Be=>Be.id===i.selectedAgentProfile)||ar.find(Be=>Be.id==="auto"),[o,l]=p.useState(""),[u,d]=p.useState(""),[m,f]=p.useState(!1),[x,v]=p.useState(null),[y,w]=p.useState(!1),[S,C]=p.useState(!1),[_,j]=p.useState(!1),[T,E]=p.useState([]),[A,R]=p.useState(!1),[D,M]=p.useState(Zm),[P,O]=p.useState(""),[F,$]=p.useState(!0),z=Ot(Be=>Be.projects),H=p.useMemo(()=>z.find(st=>st.id===e)?.path??null,[z,e]),[I,V]=p.useState(""),[B,K]=p.useState(""),[L,G]=p.useState(""),[Y,q]=p.useState(""),[Q,se]=p.useState(i.selectedAgentProfile||"auto"),[te,ee]=p.useState(a.model),[pe,fe]=p.useState(a.thinkingLevel),[re,Z]=p.useState(i.customPhaseModels||a.phaseModels||oa),[ie,ce]=p.useState(i.customPhaseThinking||a.phaseThinking||la),[He,tt]=p.useState([]),[he,Ne]=p.useState([]),[Ve,qe]=p.useState(!1),[Ze,Ae]=p.useState(!1),De=p.useRef(null),je=p.useRef(u),[Ce,It]=p.useState(null);p.useEffect(()=>{je.current=u},[u]),p.useEffect(()=>{if(t&&e){const Be=bwe(e);Be&&!gM(Be)?(l(Be.title),d(Be.description),V(Be.category),K(Be.priority),G(Be.complexity),q(Be.impact),se(Be.profileId||i.selectedAgentProfile||"auto"),ee(Be.model||a.model),fe(Be.thinkingLevel||a.thinkingLevel),Z(Be.phaseModels||i.customPhaseModels||a.phaseModels||oa),ce(Be.phaseThinking||i.customPhaseThinking||a.phaseThinking||la),tt(Be.images),Ne(Be.referencedFiles??[]),qe(Be.requireReviewBeforeCoding??!1),Ae(!0),(Be.category||Be.priority||Be.complexity||Be.impact)&&w(!0)):(se(i.selectedAgentProfile||"auto"),ee(a.model),fe(a.thinkingLevel),Z(i.customPhaseModels||a.phaseModels||oa),ce(i.customPhaseThinking||a.phaseThinking||la))}},[t,e,i.selectedAgentProfile,i.customPhaseModels,i.customPhaseThinking,a.model,a.thinkingLevel,a.phaseModels,a.phaseThinking]),p.useEffect(()=>{let Be=!0;const st=async()=>{if(H){Be&&R(!0);try{const ue=await window.electronAPI.getGitBranches(H);Be&&ue.success&&ue.data&&E(ue.data)}catch(ue){console.error("Failed to fetch branches:",ue)}finally{Be&&R(!1)}}},us=async()=>{if(e)try{const ue=await window.electronAPI.getProjectEnv(e);if(Be&&ue.success&&ue.data?.defaultBranch)O(ue.data.defaultBranch);else if(H){const xs=await window.electronAPI.detectMainBranch(H);Be&&xs.success&&xs.data&&O(xs.data)}}catch(ue){console.error("Failed to fetch project default branch:",ue)}};return t&&H&&(st(),us()),()=>{Be=!1}},[t,H,e]);const be=p.useCallback(()=>({projectId:e,title:o,description:u,category:I,priority:B,complexity:L,impact:Y,profileId:Q,model:te,thinkingLevel:pe,phaseModels:re,phaseThinking:ie,images:He,referencedFiles:he,requireReviewBeforeCoding:Ve,savedAt:new Date}),[e,o,u,I,B,L,Y,Q,te,pe,re,ie,He,he,Ve]),ve=p.useCallback((Be,st)=>{const ue=Be.slice(0,st).match(/@([\w\-./\\]*)$/);return ue?{query:ue[1],startPos:st-ue[0].length}:null},[]),Me=p.useCallback(Be=>{const st=De.current,us=st?.selectionStart||0;d(Be);const ue=ve(Be,us);if(ue&&st){const xs=st.getBoundingClientRect(),kt=window.getComputedStyle(st),me=parseFloat(kt.lineHeight)||20,ze=parseFloat(kt.paddingTop)||8,ct=parseFloat(kt.paddingLeft)||12,Jt=Be.slice(0,us).split(`
`),vs=Jt.length-1,Hs=Jt[vs].length,Ge=8,Ie=ze+(vs+1)*me+4,Je=ct+Math.min(Hs*Ge,xs.width-300);It({show:!0,query:ue.query,startPos:ue.startPos,position:{top:Ie,left:Math.max(0,Je)}})}else Ce?.show&&It(null)},[ve,Ce?.show]),nt=p.useCallback((Be,st)=>{if(!Ce)return;const us=De.current;if(!us)return;const ue=u.slice(0,Ce.startPos),xs=u.slice(Ce.startPos+1+Ce.query.length),kt=ue+"@"+Be+xs;d(kt),It(null),queueMicrotask(()=>{const me=Ce.startPos+1+Be.length;us.focus(),us.setSelectionRange(me,me)})},[Ce,u]),jt=p.useCallback((Be,st)=>{const us=`@${st.name}`;Ce?.show&&It(null);const ue=je.current,xs=De.current;if(xs){const kt=xs.selectionStart??ue.length,me=xs.selectionEnd??ue.length,ze=ue.substring(0,kt)+us+" "+ue.substring(me);Me(ze),queueMicrotask(()=>{xs.focus();const ct=kt+us.length+1;xs.setSelectionRange(ct,ct)})}else{const kt=ue.endsWith(" ")||ue===""?"":" ";Me(ue+kt+us+" ")}},[Me,Ce?.show]),ps=p.useCallback((Be,st)=>{const us=/@([\w\-./\\]+\.\w+)/g,ue=Array.from(Be.matchAll(us));if(ue.length===0)return st;const xs=new Set(st.map(me=>me.name)),kt=[];return ue.forEach(me=>{const ze=me[1];xs.has(ze)||(kt.push({id:crypto.randomUUID(),path:ze,name:ze,isDirectory:!1,addedAt:new Date}),xs.add(ze))}),[...st,...kt]},[]),tn=async()=>{if(!u.trim()){v(r("tasks:form.errors.descriptionRequired"));return}f(!0),v(null);try{const Be=ps(u,he),st={sourceType:"manual"};I&&(st.category=I),B&&(st.priority=B),L&&(st.complexity=L),Y&&(st.impact=Y),te&&(st.model=te),pe&&(st.thinkingLevel=pe),re&&ie&&(st.isAutoProfile=Q==="auto",st.phaseModels=re,st.phaseThinking=ie),He.length>0&&(st.attachedImages=He),Be.length>0&&(st.referencedFiles=Be),Ve&&(st.requireReviewBeforeCoding=!0),D===Zm?P&&(st.baseBranch=P):D&&(st.baseBranch=D),F||(st.useWorktree=!1),await F8(e,o.trim(),u.trim(),st)?(CS(e),Lt(),s(!1)):v(r("tasks:wizard.errors.createFailed"))}catch(Be){v(Be instanceof Error?Be.message:r("common:errors.unknownError"))}finally{f(!1)}},Lt=()=>{l(""),d(""),V(""),K(""),G(""),q(""),se(i.selectedAgentProfile||"auto"),ee(a.model),fe(a.thinkingLevel),Z(i.customPhaseModels||a.phaseModels||oa),ce(i.customPhaseThinking||a.phaseThinking||la),tt([]),Ne([]),qe(!1),M(Zm),$(!0),v(null),w(!1),C(!1),j(!1),Ae(!1)},ds=()=>{if(m)return;const Be=be();gM(Be)?CS(e):vwe(Be),Lt(),s(!1)},gs=()=>{CS(e),Lt(),v(null)},Ft=n.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-md border border-transparent",style:{padding:"0.5rem 0.75rem",font:"inherit",lineHeight:"1.5",wordWrap:"break-word",whiteSpace:"pre-wrap",color:"transparent"},children:u.split(/(@[\w\-./\\]+\.\w+)/g).map((Be,st)=>Be.match(/^@[\w\-./\\]+\.\w+$/)?n.jsx("span",{className:"bg-info/20 text-info-foreground rounded px-0.5",style:{color:"hsl(var(--info))"},children:Be},st):n.jsx("span",{children:Be},st))});return n.jsx(uH,{open:t,onOpenChange:ds,title:r("tasks:wizard.createTitle"),description:r("tasks:wizard.createDescription"),disabled:m,sidebar:H&&n.jsx(Nke,{isOpen:S,onClose:()=>C(!1),projectPath:H}),sidebarOpen:S,footer:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[Ze&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs bg-info/10 text-info px-2 py-1 rounded-md",children:r("tasks:wizard.draftRestored")}),n.jsxs(W,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",onClick:gs,children:[n.jsx(wo,{className:"h-3 w-3 mr-1"}),r("tasks:wizard.startFresh")]})]}),H&&n.jsxs(W,{type:"button",variant:S?"default":"outline",size:"sm",onClick:()=>C(!S),disabled:m,className:"gap-1.5",children:[n.jsx(ol,{className:"h-4 w-4"}),r(S?"tasks:wizard.hideFiles":"tasks:wizard.browseFiles")]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(W,{variant:"outline",onClick:ds,disabled:m,children:r("common:buttons.cancel")}),n.jsx(W,{onClick:tn,disabled:m||!u.trim(),children:m?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),r("tasks:wizard.creating")]}):r("tasks:wizard.createTask")})]})]}),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-info/10 border border-info/30 rounded-lg",children:[n.jsx(_r,{className:"h-5 w-5 text-info flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:r("tasks:wizard.worktreeNotice.title")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("tasks:wizard.worktreeNotice.description")})]})]}),n.jsx(bH,{description:u,onDescriptionChange:Me,descriptionPlaceholder:r("tasks:wizard.descriptionPlaceholder"),descriptionOverlay:Ft,descriptionRef:De,title:o,onTitleChange:l,profileId:Q,model:te,thinkingLevel:pe,phaseModels:re,phaseThinking:ie,onProfileChange:(Be,st,us)=>{se(Be),ee(st),fe(us)},onModelChange:ee,onThinkingLevelChange:fe,onPhaseModelsChange:Z,onPhaseThinkingChange:ce,category:I,priority:B,complexity:L,impact:Y,onCategoryChange:V,onPriorityChange:K,onComplexityChange:G,onImpactChange:q,showClassification:y,onShowClassificationChange:w,images:He,onImagesChange:tt,requireReviewBeforeCoding:Ve,onRequireReviewChange:qe,disabled:m,error:x,onError:v,onFileReferenceDrop:jt,idPrefix:"create",children:Ce?.show&&H&&n.jsx(Cke,{query:Ce.query,projectPath:H,position:Ce.position,onSelect:nt,onClose:()=>It(null)})}),n.jsxs("button",{type:"button",onClick:()=>j(!_),className:J("flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground transition-colors","w-full justify-between py-2 px-3 rounded-md hover:bg-muted/50"),disabled:m,"aria-expanded":_,"aria-controls":"git-options-section",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),r("tasks:wizard.gitOptions.title"),D&&D!==Zm&&n.jsx("span",{className:"text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:D})]}),_?n.jsx(Hi,{className:"h-4 w-4"}):n.jsx(bt,{className:"h-4 w-4"})]}),_&&n.jsx("div",{id:"git-options-section",className:"space-y-4 p-4 rounded-lg border border-border bg-muted/30",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"base-branch",className:"text-sm font-medium text-foreground",children:r("tasks:wizard.gitOptions.baseBranchLabel")}),n.jsxs(_t,{value:D,onValueChange:M,disabled:m||A,children:[n.jsx(yt,{id:"base-branch",className:"h-9",children:n.jsx(Nt,{placeholder:P?r("tasks:wizard.gitOptions.useProjectDefaultWithBranch",{branch:P}):r("tasks:wizard.gitOptions.useProjectDefault")})}),n.jsxs(wt,{children:[n.jsx(et,{value:Zm,children:P?r("tasks:wizard.gitOptions.useProjectDefaultWithBranch",{branch:P}):r("tasks:wizard.gitOptions.useProjectDefault")}),T.map(Be=>n.jsx(et,{value:Be,children:Be},Be))]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("tasks:wizard.gitOptions.helpText")})]})})]})})}const RU=Lp,Ake=Op,DU=p.forwardRef(({className:e,...t},s)=>n.jsx(Ih,{ref:s,className:J("fixed inset-0 z-50 bg-background/95 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));DU.displayName="FullScreenDialogOverlay";const lA=p.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(Ake,{children:[n.jsx(DU,{}),n.jsxs(Mh,{ref:r,className:J("fixed inset-4 z-50 flex flex-col","bg-card border border-border rounded-2xl","shadow-2xl overflow-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:zoom-out-98 data-[state=open]:zoom-in-98","duration-200",e),...s,children:[t,n.jsxs(Fh,{className:J("absolute right-4 top-4 rounded-lg p-2","text-muted-foreground hover:text-foreground","hover:bg-accent transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background","disabled:pointer-events-none z-10"),children:[n.jsx(Ss,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lA.displayName="FullScreenDialogContent";const cA=({className:e,...t})=>n.jsx("div",{className:J("flex flex-col space-y-1.5 p-6 pb-4 border-b border-border",e),...t});cA.displayName="FullScreenDialogHeader";const dA=({className:e,...t})=>n.jsx("div",{className:J("flex-1 overflow-hidden",e),...t});dA.displayName="FullScreenDialogBody";const IU=({className:e,...t})=>n.jsx("div",{className:J("flex items-center justify-end gap-3 p-6 pt-4 border-t border-border",e),...t});IU.displayName="FullScreenDialogFooter";const uA=p.forwardRef(({className:e,...t},s)=>n.jsx(Lh,{ref:s,className:J("text-xl font-semibold leading-none tracking-tight text-foreground",e),...t}));uA.displayName="FullScreenDialogTitle";const hA=p.forwardRef(({className:e,...t},s)=>n.jsx(Oh,{ref:s,className:J("text-sm text-muted-foreground",e),...t}));hA.displayName="FullScreenDialogDescription";function Eke(){const e=cs(y=>y.settings),t=cs(y=>y.updateSettings),[s,r]=p.useState(e),[i,a]=p.useState(!1),[o,l]=p.useState(null),u=p.useRef({theme:e.theme,colorTheme:e.colorTheme,uiScale:e.uiScale??nl});p.useEffect(()=>{r(e)},[e]),p.useEffect(()=>{U3(),u.current={theme:e.theme,colorTheme:e.colorTheme,uiScale:e.uiScale??nl}},[]);const d=async()=>{a(!0),l(null);try{return await Ql(s)?(m(s.theme),!0):(l("Failed to save settings"),!1)}catch(y){return l(y instanceof Error?y.message:"Unknown error"),!1}finally{a(!1)}},m=y=>{y==="dark"?document.documentElement.classList.add("dark"):y==="light"?document.documentElement.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},f=y=>{r(w=>({...w,...y}))},x=p.useCallback(()=>{const y=u.current;t({theme:y.theme,colorTheme:y.colorTheme,uiScale:y.uiScale})},[t]),v=p.useCallback(()=>{u.current={theme:s.theme,colorTheme:s.colorTheme,uiScale:s.uiScale??nl}},[s.theme,s.colorTheme,s.uiScale]);return{settings:s,setSettings:r,updateSettings:f,isSaving:i,error:o,saveSettings:d,applyTheme:m,revertTheme:x,commitTheme:v}}function jr({title:e,description:t,children:s}){return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:e}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),n.jsx(Rn,{}),s]})}function Tke({settings:e,onSettingsChange:t}){const s=cs(d=>d.updateSettings),r=e.colorTheme||"default",i=e.theme,a=i==="dark"||i==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches,o=d=>{t({...e,colorTheme:d}),s({colorTheme:d})},l=d=>{t({...e,theme:d}),s({theme:d})},u=d=>{switch(d){case"light":return n.jsx(nae,{className:"h-4 w-4"});case"dark":return n.jsx(yie,{className:"h-4 w-4"});default:return n.jsx(_h,{className:"h-4 w-4"})}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Appearance Mode"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose light, dark, or system preference"}),n.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-md pt-1",children:["system","light","dark"].map(d=>n.jsxs("button",{onClick:()=>l(d),className:J("flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i===d?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50"),children:[u(d),n.jsx("span",{className:"text-sm font-medium capitalize",children:d})]},d))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Color Theme"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a color palette for the interface"}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 pt-1",children:D5.map(d=>{const m=r===d.id,f=a?d.previewColors.darkBg:d.previewColors.bg,x=a&&d.previewColors.darkAccent||d.previewColors.accent;return n.jsxs("button",{onClick:()=>o(d.id),className:J("relative flex flex-col p-4 rounded-lg border-2 text-left transition-all","hover:shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",m?"border-primary bg-primary/5 shadow-sm":"border-border hover:border-primary/50 hover:bg-accent/30"),children:[m&&n.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:n.jsx(Pt,{className:"w-3 h-3 text-primary-foreground"})}),n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsxs("div",{className:"flex -space-x-1.5",children:[n.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-background shadow-sm",style:{backgroundColor:f},title:"Background color"}),n.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-background shadow-sm",style:{backgroundColor:x},title:"Accent color"})]})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium text-sm text-foreground",children:d.name}),n.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:d.description})]})]},d.id)})})]})]})}function Pke({settings:e,onSettingsChange:t}){const{t:s}=Re("settings");return n.jsx(jr,{title:s("theme.title"),description:s("theme.description"),children:n.jsx(Tke,{settings:e,onSettingsChange:t})})}const Rke=[{value:nl,label:"100%",descriptionKey:"scale.default"},{value:125,label:"125%",descriptionKey:"scale.comfortable"},{value:150,label:"150%",descriptionKey:"scale.large"}];function Dke({settings:e,onSettingsChange:t}){const{t:s}=Re("settings"),r=cs(_=>_.updateSettings),i=e.uiScale??nl,[a,o]=p.useState(null),[l,u]=p.useState(i),d=a??i,m=a!==null&&a!==l,f=_=>{const j=Math.max(Au,Math.min(Eu,_));o(j),t({...e,uiScale:j})},x=()=>{a!==null&&(r({uiScale:a}),u(a),o(null))},v=_=>{const j=Math.max(Au,Math.min(Eu,_));t({...e,uiScale:j}),r({uiScale:j}),u(j),o(null)},y=_=>{Number.isNaN(_)||f(_)},w=()=>{f(d-$m)},S=()=>{f(d+$m)},C=()=>{v(nl)};return n.jsx(jr,{title:s("sections.display.title"),description:s("sections.display.description"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:s("scale.presets")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s("scale.presetsDescription")}),n.jsx("div",{className:"grid grid-cols-3 gap-3 max-w-md pt-1",children:Rke.map(_=>{const j=i===_.value;return n.jsxs("button",{type:"button",onClick:()=>v(_.value),className:J("flex flex-col items-center gap-2 p-4 rounded-lg border-2 transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",j?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50"),children:[n.jsx(_h,{className:"h-4 w-4"}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-sm font-medium",children:_.label}),n.jsx("div",{className:"text-xs text-muted-foreground",children:s(_.descriptionKey)})]})]},_.value)})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:s("scale.fineTune")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[d,"%"]}),d!==nl&&n.jsx("button",{type:"button",onClick:C,className:J("p-1.5 rounded-md transition-colors","hover:bg-accent text-muted-foreground hover:text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),title:"Reset to default (100%)",children:n.jsx(wo,{className:"h-3.5 w-3.5"})})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s("scale.fineTuneDescription")}),n.jsxs("div",{className:"flex items-center gap-3 pt-1",children:[n.jsx("button",{type:"button",onClick:w,disabled:d<=Au,className:J("p-1 rounded-md transition-colors shrink-0","hover:bg-accent text-muted-foreground hover:text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent"),title:`Decrease scale by ${$m}%`,children:n.jsx(_ae,{className:"h-4 w-4"})}),n.jsx("input",{type:"range",min:Au,max:Eu,step:$m,value:d,onChange:_=>y(parseInt(_.target.value,10)),className:J("flex-1 h-2 bg-muted rounded-lg appearance-none cursor-pointer","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","[&::-webkit-slider-thumb]:appearance-none","[&::-webkit-slider-thumb]:w-4","[&::-webkit-slider-thumb]:h-4","[&::-webkit-slider-thumb]:rounded-full","[&::-webkit-slider-thumb]:bg-primary","[&::-webkit-slider-thumb]:cursor-pointer","[&::-webkit-slider-thumb]:transition-all","[&::-webkit-slider-thumb]:hover:scale-110","[&::-moz-range-thumb]:w-4","[&::-moz-range-thumb]:h-4","[&::-moz-range-thumb]:rounded-full","[&::-moz-range-thumb]:bg-primary","[&::-moz-range-thumb]:border-0","[&::-moz-range-thumb]:cursor-pointer","[&::-moz-range-thumb]:transition-all","[&::-moz-range-thumb]:hover:scale-110")}),n.jsx("button",{type:"button",onClick:S,disabled:d>=Eu,className:J("p-1 rounded-md transition-colors shrink-0","hover:bg-accent text-muted-foreground hover:text-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-transparent"),title:`Increase scale by ${$m}%`,children:n.jsx(jae,{className:"h-4 w-4"})}),n.jsxs("button",{type:"button",onClick:x,disabled:!m,className:J("px-2 py-1 rounded-md transition-colors shrink-0 flex items-center gap-1","bg-primary text-primary-foreground hover:bg-primary/90","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring","disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-primary"),title:"Apply scale changes",children:[n.jsx(Pt,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Apply"})]})]}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsxs("span",{children:[Au,"%"]}),n.jsxs("span",{children:[Eu,"%"]})]})]})]})})}const Ike=[{value:"en",label:"English",nativeLabel:"English"},{value:"fr",label:"French",nativeLabel:"Franais"}];function Mke({settings:e,onSettingsChange:t}){const{t:s,i18n:r}=Re("settings"),i=cs(l=>l.updateSettings),a=e.language??"en",o=l=>{t({...e,language:l}),i({language:l}),r.changeLanguage(l)};return n.jsx(jr,{title:s("sections.language.title"),description:s("sections.language.description"),children:n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:s("language.label")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s("language.description")}),n.jsx("div",{className:"grid grid-cols-2 gap-3 max-w-md pt-1",children:Ike.map(l=>{const u=a===l.value;return n.jsxs("button",{onClick:()=>o(l.value),className:J("flex items-center gap-3 p-4 rounded-lg border-2 transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",u?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-accent/50"),children:[n.jsx(wn,{className:"h-5 w-5 shrink-0"}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:"text-sm font-medium",children:l.nativeLabel}),n.jsx("div",{className:"text-xs text-muted-foreground",children:l.label})]})]},l.value)})})]})})})}var nw="Switch",[Lke]=ur(nw),[Oke,Fke]=Lke(nw),MU=p.forwardRef((e,t)=>{const{__scopeSwitch:s,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:u="on",onCheckedChange:d,form:m,...f}=e,[x,v]=p.useState(null),y=Ct(t,j=>v(j)),w=p.useRef(!1),S=x?m||!!x.closest("form"):!0,[C,_]=$i({prop:i,defaultProp:a??!1,onChange:d,caller:nw});return n.jsxs(Oke,{scope:s,checked:C,disabled:l,children:[n.jsx(ot.button,{type:"button",role:"switch","aria-checked":C,"aria-required":o,"data-state":BU(C),"data-disabled":l?"":void 0,disabled:l,value:u,...f,ref:y,onClick:Fe(e.onClick,j=>{_(T=>!T),S&&(w.current=j.isPropagationStopped(),w.current||j.stopPropagation())})}),S&&n.jsx(FU,{control:x,bubbles:!w.current,name:r,value:u,checked:C,required:o,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});MU.displayName=nw;var LU="SwitchThumb",OU=p.forwardRef((e,t)=>{const{__scopeSwitch:s,...r}=e,i=Fke(LU,s);return n.jsx(ot.span,{"data-state":BU(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});OU.displayName=LU;var Bke="SwitchBubbleInput",FU=p.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:r=!0,...i},a)=>{const o=p.useRef(null),l=Ct(o,a),u=My(s),d=xy(t);return p.useEffect(()=>{const m=o.current;if(!m)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==s&&v){const y=new Event("click",{bubbles:r});v.call(m,s),m.dispatchEvent(y)}},[u,s,r]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});FU.displayName=Bke;function BU(e){return e?"checked":"unchecked"}var zU=MU,zke=OU;const Kt=p.forwardRef(({className:e,...t},s)=>n.jsx(zU,{className:J("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full","border-2 border-transparent transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background","disabled:cursor-not-allowed disabled:opacity-50","data-[state=checked]:bg-primary data-[state=unchecked]:bg-border",e),...t,ref:s,children:n.jsx(zke,{className:J("pointer-events-none block h-5 w-5 rounded-full shadow-sm ring-0 transition-transform duration-200","bg-white dark:bg-foreground","data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0","data-[state=checked]:bg-primary-foreground")})}));Kt.displayName=zU.displayName;const $ke={Brain:Bi,Scale:rh,Zap:vi,Sparkles:Qt,Settings2:Sd},j4=["spec","planning","coding","qa"];function Hke(){const{t:e}=Re("settings"),t=cs(_=>_.settings),s=t.selectedAgentProfile||"auto",[r,i]=p.useState(!0),a=p.useMemo(()=>ar.find(_=>_.id===s)||ar[0],[s]),o=a.phaseModels||oa,l=a.phaseThinking||la,u=t.customPhaseModels||o,d=t.customPhaseThinking||l,m=p.useMemo(()=>!t.customPhaseModels&&!t.customPhaseThinking?!1:j4.some(_=>u[_]!==o[_]||d[_]!==l[_]),[t.customPhaseModels,t.customPhaseThinking,u,d,o,l]),f=async _=>{if(!ar.find(E=>E.id===_))return;if(!await Ql({selectedAgentProfile:_,customPhaseModels:void 0,customPhaseThinking:void 0})){console.error("Failed to save agent profile selection");return}},x=async(_,j)=>{const T={...u,[_]:j};await Ql({customPhaseModels:T})},v=async(_,j)=>{const T={...d,[_]:j};await Ql({customPhaseThinking:T})},y=async()=>{await Ql({customPhaseModels:void 0,customPhaseThinking:void 0})},w=_=>ca.find(T=>T.value===_)?.label||_,S=_=>ld.find(T=>T.value===_)?.label||_,C=_=>{const j=s===_.id,T=j&&m,E=$ke[_.icon||"Brain"]||Bi;return n.jsxs("button",{onClick:()=>f(_.id),className:J("relative w-full rounded-lg border p-4 text-left transition-all duration-200","hover:border-primary/50 hover:shadow-sm",j?"border-primary bg-primary/5":"border-border bg-card"),children:[j&&n.jsx("div",{className:"absolute right-3 top-3 flex h-5 w-5 items-center justify-center rounded-full bg-primary",children:n.jsx(Pt,{className:"h-3 w-3 text-primary-foreground"})}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:J("flex h-10 w-10 items-center justify-center rounded-lg shrink-0",j?"bg-primary/10":"bg-muted"),children:n.jsx(E,{className:J("h-5 w-5",j?"text-primary":"text-muted-foreground")})}),n.jsxs("div",{className:"flex-1 min-w-0 pr-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground",children:_.name}),T&&n.jsx("span",{className:"inline-flex items-center rounded bg-amber-500/10 px-1.5 py-0.5 text-[9px] font-medium text-amber-600 dark:text-amber-400",children:e("agentProfile.customized")})]}),n.jsx("p",{className:"mt-0.5 text-xs text-muted-foreground line-clamp-2",children:_.description}),n.jsxs("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[n.jsx("span",{className:"inline-flex items-center rounded bg-muted px-2 py-0.5 text-[10px] font-medium text-muted-foreground",children:w(_.model)}),n.jsxs("span",{className:"inline-flex items-center rounded bg-muted px-2 py-0.5 text-[10px] font-medium text-muted-foreground",children:[S(_.thinkingLevel)," ",e("agentProfile.thinking")]})]})]})]})]},_.id)};return n.jsx(jr,{title:e("agentProfile.title"),description:e("agentProfile.sectionDescription"),children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:e("agentProfile.profilesInfo")})}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:ar.map(C)}),n.jsxs("div",{className:"mt-6 rounded-lg border border-border bg-card",children:[n.jsxs("button",{type:"button",onClick:()=>i(!r),className:"flex w-full items-center justify-between p-4 text-left hover:bg-muted/50 transition-colors rounded-t-lg",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm text-foreground",children:e("agentProfile.phaseConfiguration")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("agentProfile.phaseConfigurationDescription")})]}),r?n.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),r&&n.jsxs("div",{className:"border-t border-border p-4 space-y-4",children:[m&&n.jsx("div",{className:"flex justify-end",children:n.jsxs(W,{variant:"ghost",size:"sm",onClick:y,className:"text-xs h-7",children:[n.jsx(wo,{className:"h-3 w-3 mr-1.5"}),e("agentProfile.resetToProfileDefaults",{profile:a.name})]})}),n.jsx("div",{className:"space-y-4",children:j4.map(_=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:e(`agentProfile.phases.${_}.label`)}),n.jsx("span",{className:"text-xs text-muted-foreground",children:e(`agentProfile.phases.${_}.description`)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:e("agentProfile.model")}),n.jsxs(_t,{value:u[_],onValueChange:j=>x(_,j),children:[n.jsx(yt,{className:"h-9",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ca.map(j=>n.jsx(et,{value:j.value,children:j.label},j.value))})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:e("agentProfile.thinkingLevel")}),n.jsxs(_t,{value:d[_],onValueChange:j=>v(_,j),children:[n.jsx(yt,{className:"h-9",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ld.map(j=>n.jsx(et,{value:j.value,children:j.label},j.value))})]})]})]})]},_))}),n.jsx("p",{className:"text-[10px] text-muted-foreground mt-4 pt-3 border-t border-border",children:e("agentProfile.phaseConfigNote")})]})]})]})})}function Hx({info:e,isLoading:t,t:s}){if(t)return n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Detecting..."});if(!e||!e.found)return n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s("general.notDetected")});const r=i=>({"user-config":s("general.sourceUserConfig"),venv:s("general.sourceVenv"),homebrew:s("general.sourceHomebrew"),nvm:s("general.sourceNvm"),"system-path":s("general.sourceSystemPath"),bundled:s("general.sourceBundled"),fallback:s("general.sourceFallback")})[i]||i;return n.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-0.5",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium",children:[s("general.detectedPath"),":"]})," ",n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:e.path})]}),e.version&&n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium",children:[s("general.detectedVersion"),":"]})," ",e.version]}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-medium",children:[s("general.detectedSource"),":"]})," ",r(e.source)]})]})}function S4({settings:e,onSettingsChange:t,section:s}){const{t:r}=Re("settings"),[i,a]=p.useState(null),[o,l]=p.useState(!1);return p.useEffect(()=>{s==="paths"&&(l(!0),window.electronAPI.getCliToolsInfo().then(u=>{u.success&&u.data&&a(u.data)}).catch(u=>{console.error("Failed to fetch CLI tools info:",u)}).finally(()=>{l(!1)}))},[s]),s==="agent"?n.jsxs("div",{className:"space-y-8",children:[n.jsx(Hke,{}),n.jsx(jr,{title:r("general.otherAgentSettings"),description:r("general.otherAgentSettingsDescription"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{htmlFor:"agentFramework",className:"text-sm font-medium text-foreground",children:r("general.agentFramework")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.agentFrameworkDescription")}),n.jsxs(_t,{value:e.agentFramework,onValueChange:u=>t({...e,agentFramework:u}),children:[n.jsx(yt,{id:"agentFramework",className:"w-full max-w-md",children:n.jsx(Nt,{})}),n.jsx(wt,{children:n.jsx(et,{value:"auto-claude",children:r("general.agentFrameworkAutoClaude")})})]})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{htmlFor:"autoNameTerminals",className:"text-sm font-medium text-foreground",children:r("general.aiTerminalNaming")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.aiTerminalNamingDescription")})]}),n.jsx(Kt,{id:"autoNameTerminals",checked:e.autoNameTerminals,onCheckedChange:u=>t({...e,autoNameTerminals:u})})]})}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:r("general.featureModelSettings")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.featureModelSettingsDescription")})]}),Object.keys(jj).map(u=>{const d=e.featureModels||P5,m=e.featureThinking||R5;return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:jj[u].label}),n.jsx("span",{className:"text-xs text-muted-foreground",children:jj[u].description})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 max-w-md",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:r("general.model")}),n.jsxs(_t,{value:d[u],onValueChange:f=>{const x={...d,[u]:f};t({...e,featureModels:x})},children:[n.jsx(yt,{className:"h-9",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ca.map(f=>n.jsx(et,{value:f.value,children:f.label},f.value))})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:r("general.thinkingLevel")}),n.jsxs(_t,{value:m[u],onValueChange:f=>{const x={...m,[u]:f};t({...e,featureThinking:x})},children:[n.jsx(yt,{className:"h-9",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ld.map(f=>n.jsx(et,{value:f.value,children:f.label},f.value))})]})]})]})]},u)})]})]})})]}):n.jsx(jr,{title:r("general.paths"),description:r("general.pathsDescription"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{htmlFor:"pythonPath",className:"text-sm font-medium text-foreground",children:r("general.pythonPath")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.pythonPathDescription")}),n.jsx(Oe,{id:"pythonPath",placeholder:r("general.pythonPathPlaceholder"),className:"w-full max-w-lg",value:e.pythonPath||"",onChange:u=>t({...e,pythonPath:u.target.value})}),!e.pythonPath&&n.jsx(Hx,{info:i?.python||null,isLoading:o,t:r})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{htmlFor:"gitPath",className:"text-sm font-medium text-foreground",children:r("general.gitPath")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.gitPathDescription")}),n.jsx(Oe,{id:"gitPath",placeholder:r("general.gitPathPlaceholder"),className:"w-full max-w-lg",value:e.gitPath||"",onChange:u=>t({...e,gitPath:u.target.value})}),!e.gitPath&&n.jsx(Hx,{info:i?.git||null,isLoading:o,t:r})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{htmlFor:"githubCLIPath",className:"text-sm font-medium text-foreground",children:r("general.githubCLIPath")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.githubCLIPathDescription")}),n.jsx(Oe,{id:"githubCLIPath",placeholder:r("general.githubCLIPathPlaceholder"),className:"w-full max-w-lg",value:e.githubCLIPath||"",onChange:u=>t({...e,githubCLIPath:u.target.value})}),!e.githubCLIPath&&n.jsx(Hx,{info:i?.gh||null,isLoading:o,t:r})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{htmlFor:"claudePath",className:"text-sm font-medium text-foreground",children:r("general.claudePath")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.claudePathDescription")}),n.jsx(Oe,{id:"claudePath",placeholder:r("general.claudePathPlaceholder"),className:"w-full max-w-lg",value:e.claudePath||"",onChange:u=>t({...e,claudePath:u.target.value})}),!e.claudePath&&n.jsx(Hx,{info:i?.claude||null,isLoading:o,t:r})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{htmlFor:"autoBuildPath",className:"text-sm font-medium text-foreground",children:r("general.autoClaudePath")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("general.autoClaudePathDescription")}),n.jsx(Oe,{id:"autoBuildPath",placeholder:r("general.autoClaudePathPlaceholder"),className:"w-full max-w-lg",value:e.autoBuildPath||"",onChange:u=>t({...e,autoBuildPath:u.target.value})})]})]})})}const Xp=Gn(e=>({profiles:[],activeProfileId:"default",isLoading:!1,isSwitching:!1,setProfiles:t=>{e({profiles:t.profiles,activeProfileId:t.activeProfileId})},setActiveProfile:t=>{e({activeProfileId:t})},addProfile:t=>{e(s=>({profiles:[...s.profiles,t]}))},updateProfile:t=>{e(s=>({profiles:s.profiles.map(r=>r.id===t.id?t:r)}))},removeProfile:t=>{e(s=>({profiles:s.profiles.filter(r=>r.id!==t)}))},setLoading:t=>{e({isLoading:t})},setSwitching:t=>{e({isSwitching:t})}}));async function hc(){const e=Xp.getState();e.setLoading(!0);try{const t=await window.electronAPI.getClaudeProfiles();t.success&&t.data&&e.setProfiles(t.data)}catch(t){console.error("[ClaudeProfileStore] Error loading profiles:",t)}finally{e.setLoading(!1)}}async function Uke(e,t){const s=Xp.getState();s.setSwitching(!0);try{return(await window.electronAPI.switchClaudeProfile(e,t)).success?(s.setActiveProfile(t),!0):!1}catch(r){return console.error("[ClaudeProfileStore] Error switching profile:",r),!1}finally{s.setSwitching(!1)}}const xr=[];for(let e=0;e<256;++e)xr.push((e+256).toString(16).slice(1));function Gke(e,t=0){return(xr[e[t+0]]+xr[e[t+1]]+xr[e[t+2]]+xr[e[t+3]]+"-"+xr[e[t+4]]+xr[e[t+5]]+"-"+xr[e[t+6]]+xr[e[t+7]]+"-"+xr[e[t+8]]+xr[e[t+9]]+"-"+xr[e[t+10]]+xr[e[t+11]]+xr[e[t+12]]+xr[e[t+13]]+xr[e[t+14]]+xr[e[t+15]]).toLowerCase()}let GS;const Vke=new Uint8Array(16);function qke(){if(!GS){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");GS=crypto.getRandomValues.bind(crypto)}return GS(Vke)}const Wke=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_4={randomUUID:Wke};function Kke(e,t,s){e=e||{};const r=e.random??e.rng?.()??qke();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Gke(r)}function Yke(e,t,s){return _4.randomUUID&&!e?_4.randomUUID():Kke(e)}class Fu{static instance;buffers=new Map;disposables=new Map;MAX_BUFFER_SIZE=1e5;constructor(){}static getInstance(){return Fu.instance||(Fu.instance=new Fu),Fu.instance}append(t,s){const i=(this.buffers.get(t)||"")+s,a=i.length>this.MAX_BUFFER_SIZE?i.slice(-this.MAX_BUFFER_SIZE):i;this.buffers.set(t,a)}get(t){return this.buffers.get(t)||""}set(t,s){this.buffers.set(t,s.slice(-this.MAX_BUFFER_SIZE))}clear(t){this.buffers.delete(t)}has(t){return this.buffers.has(t)}getSize(t){return this.buffers.get(t)?.length||0}registerDisposable(t,...s){const r=this.disposables.get(t)||[];this.disposables.set(t,[...r,...s])}dispose(t){const s=this.disposables.get(t);if(s){for(const r of s)try{r.dispose()}catch(i){console.warn(`[TerminalBufferManager] Error disposing resource for ${t}:`,i)}this.disposables.delete(t)}this.buffers.delete(t)}getAll(){return new Map(this.buffers)}getAllIds(){return Array.from(this.buffers.keys())}getTotalSize(){let t=0;for(const s of this.buffers.values())t+=s.length;return t}getStats(){const t=Array.from(this.buffers.entries()).map(([s,r])=>({id:s,sizeBytes:r.length}));return{terminalCount:this.buffers.size,totalSizeBytes:this.getTotalSize(),maxBufferSize:this.MAX_BUFFER_SIZE,buffers:t}}}const id=Fu.getInstance();typeof window<"u"&&(window.__terminalBufferManager=id);var N4={};const ks=Gn((e,t)=>({terminals:[],layouts:[],activeTerminalId:null,maxTerminals:1/0,hasRestoredSessions:!1,addTerminal:(s,r)=>{const i=t();if(i.terminals.length>=i.maxTerminals)return null;const a={id:Yke(),title:`Terminal ${i.terminals.length+1}`,status:"idle",cwd:s||N4.HOME||"~",createdAt:new Date,isClaudeMode:!1,projectPath:r};return e(o=>({terminals:[...o.terminals,a],activeTerminalId:a.id})),a},addRestoredTerminal:s=>{const i=t().terminals.find(o=>o.id===s.id);if(i)return i;const a={id:s.id,title:s.title,status:"idle",cwd:s.cwd,createdAt:new Date(s.createdAt),isClaudeMode:!1,claudeSessionId:s.claudeSessionId,isRestored:!0,projectPath:s.projectPath,worktreeConfig:s.worktreeConfig};return s.outputBuffer&&id.set(s.id,s.outputBuffer),e(o=>({terminals:[...o.terminals,a],activeTerminalId:o.activeTerminalId||a.id})),a},addExternalTerminal:(s,r,i,a)=>{const o=t(),l=o.terminals.find(m=>m.id===s);if(l)return e({activeTerminalId:s}),l;if(o.terminals.filter(m=>m.status!=="exited").length>=o.maxTerminals)return null;const d={id:s,title:r,status:"running",cwd:i||N4.HOME||"~",createdAt:new Date,isClaudeMode:!1,projectPath:a};return e(m=>({terminals:[...m.terminals,d],activeTerminalId:d.id})),d},removeTerminal:s=>{id.dispose(s),e(r=>{const i=r.terminals.filter(o=>o.id!==s),a=r.activeTerminalId===s?i.length>0?i[i.length-1].id:null:r.activeTerminalId;return{terminals:i,activeTerminalId:a}})},updateTerminal:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,...r}:a)}))},setActiveTerminal:s=>{e({activeTerminalId:s})},setTerminalStatus:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,status:r}:a)}))},setClaudeMode:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,isClaudeMode:r,status:r?"claude-active":"running",isClaudeBusy:r?a.isClaudeBusy:void 0}:a)}))},setClaudeSessionId:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,claudeSessionId:r}:a)}))},setAssociatedTask:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,associatedTaskId:r}:a)}))},setWorktreeConfig:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,worktreeConfig:r}:a)}))},setClaudeBusy:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,isClaudeBusy:r}:a)}))},setPendingClaudeResume:(s,r)=>{e(i=>({terminals:i.terminals.map(a=>a.id===s?{...a,pendingClaudeResume:r}:a)}))},clearAllTerminals:()=>{e({terminals:[],activeTerminalId:null,hasRestoredSessions:!1})},setHasRestoredSessions:s=>{e({hasRestoredSessions:s})},reorderTerminals:(s,r)=>{e(i=>{const a=i.terminals.findIndex(l=>l.id===s),o=i.terminals.findIndex(l=>l.id===r);return a===-1||o===-1?i:{terminals:p1(i.terminals,a,o)}})},getTerminal:s=>t().terminals.find(r=>r.id===s),getActiveTerminal:()=>{const s=t();return s.terminals.find(r=>r.id===s.activeTerminalId)},canAddTerminal:s=>{const r=t();return r.terminals.filter(a=>a.status==="exited"?!1:s?a.projectPath===s||!a.projectPath:!0).length<r.maxTerminals},getTerminalsForProject:s=>t().terminals.filter(r=>r.projectPath===s),getWorktreeCount:()=>t().terminals.filter(s=>s.worktreeConfig).length})),VS=new Set;async function Xke(e){if(!e||typeof e!="string"){ir("[TerminalStore] Invalid projectPath, skipping restore");return}if(VS.has(e)){ir("[TerminalStore] Already restoring terminals for this project, skipping");return}VS.add(e);try{const t=ks.getState(),s=t.terminals.filter(i=>i.projectPath===e);if(s.length>0){const a=(await Promise.all(s.map(async o=>{try{const l=await window.electronAPI.checkTerminalPtyAlive(o.id);return{terminal:o,alive:l.success&&l.data?.alive===!0}}catch{return{terminal:o,alive:!1}}}))).filter(o=>!o.alive);for(const{terminal:o}of a)ir(`[TerminalStore] Removing dead terminal: ${o.id}`),t.removeTerminal(o.id);if(a.length===0){ir("[TerminalStore] All terminals have live PTY processes");return}ir(`[TerminalStore] ${a.length} terminals had dead PTY, will restore from disk`)}const r=await window.electronAPI.getTerminalSessions(e);if(!r.success||!r.data||r.data.length===0)return;for(const i of r.data)t.addRestoredTerminal(i);t.setHasRestoredSessions(!0)}catch(t){yr("[TerminalStore] Error restoring sessions:",t)}finally{VS.delete(e)}}function $U(){const{t:e}=Re("terminal"),t=ks(s=>s.addExternalTerminal);p.useEffect(()=>window.electronAPI.onTerminalAuthCreated(r=>{t(r.terminalId,e("auth.terminalTitle",{profileName:r.profileName}))||ed({title:e("auth.maxTerminalsReached"),variant:"destructive"})}),[t,e])}function Zke({settings:e,onSettingsChange:t,isOpen:s}){const{t:r}=Re("settings"),{t:i}=Re("common"),{toast:a}=bo(),[o,l]=p.useState(!1),[u,d]=p.useState([]),[m,f]=p.useState(null),[x,v]=p.useState(!1),[y,w]=p.useState(""),[S,C]=p.useState(!1),[_,j]=p.useState(null),[T,E]=p.useState(null),[A,R]=p.useState(""),[D,M]=p.useState(null),[P,O]=p.useState(null),[F,$]=p.useState(""),[z,H]=p.useState(""),[I,V]=p.useState(!1),[B,K]=p.useState(null),[L,G]=p.useState(null),[Y,q]=p.useState(!1);p.useEffect(()=>{s&&(Q(),He())},[s]),$U(),p.useEffect(()=>window.electronAPI.onTerminalOAuthToken(async Ne=>{Ne.success&&Ne.profileId&&(await Q(),a({title:r("integrations.toast.authSuccess"),description:Ne.email?r("integrations.toast.authSuccessWithEmail",{email:Ne.email}):r("integrations.toast.authSuccessGeneric")}))}),[r,a]);const Q=async()=>{v(!0);try{const he=await window.electronAPI.getClaudeProfiles();he.success&&he.data&&(d(he.data.profiles),f(he.data.activeProfileId),await hc())}catch(he){yr("[IntegrationSettings] Failed to load Claude profiles:",he)}finally{v(!1)}},se=async()=>{if(y.trim()){C(!0);try{const he=y.trim(),Ne=he.toLowerCase().replace(/\s+/g,"-"),Ve=await window.electronAPI.saveClaudeProfile({id:`profile-${Date.now()}`,name:he,configDir:`~/.claude-profiles/${Ne}`,isDefault:!1,createdAt:new Date});if(Ve.success&&Ve.data){const qe=await window.electronAPI.initializeClaudeProfile(Ve.data.id);qe.success?(await Q(),w("")):(await Q(),a({variant:"destructive",title:r("integrations.toast.authStartFailed"),description:qe.error||r("integrations.toast.tryAgain")}))}}catch(he){yr("[IntegrationSettings] Failed to add profile:",he),a({variant:"destructive",title:r("integrations.toast.addProfileFailed"),description:r("integrations.toast.tryAgain")})}finally{C(!1)}}},te=async he=>{j(he);try{(await window.electronAPI.deleteClaudeProfile(he)).success&&await Q()}catch(Ne){yr("[IntegrationSettings] Failed to delete profile:",Ne)}finally{j(null)}},ee=he=>{E(he.id),R(he.name)},pe=()=>{E(null),R("")},fe=async()=>{if(!(!T||!A.trim()))try{(await window.electronAPI.renameClaudeProfile(T,A.trim())).success&&await Q()}catch(he){yr("[IntegrationSettings] Failed to rename profile:",he)}finally{E(null),R("")}},re=async he=>{try{(await window.electronAPI.setActiveClaudeProfile(he)).success&&(f(he),await hc())}catch(Ne){yr("[IntegrationSettings] Failed to set active profile:",Ne)}},Z=async he=>{ir("[IntegrationSettings] handleAuthenticateProfile called for:",he),M(he);try{ir("[IntegrationSettings] Calling initializeClaudeProfile IPC...");const Ne=await window.electronAPI.initializeClaudeProfile(he);ir("[IntegrationSettings] IPC returned:",Ne),Ne.success||a({variant:"destructive",title:r("integrations.toast.authStartFailed"),description:Ne.error||r("integrations.toast.tryAgain")})}catch(Ne){yr("[IntegrationSettings] Failed to authenticate profile:",Ne),a({variant:"destructive",title:r("integrations.toast.authStartFailed"),description:r("integrations.toast.tryAgain")})}finally{ir("[IntegrationSettings] finally block - clearing authenticatingProfileId"),M(null)}},ie=he=>{P===he?(O(null),$(""),H(""),V(!1)):(O(he),$(""),H(""),V(!1))},ce=async he=>{if(F.trim()){K(he);try{const Ne=await window.electronAPI.setClaudeProfileToken(he,F.trim(),z.trim()||void 0);Ne.success?(await Q(),O(null),$(""),H(""),V(!1),a({title:r("integrations.toast.tokenSaved"),description:r("integrations.toast.tokenSavedDescription")})):a({variant:"destructive",title:r("integrations.toast.tokenSaveFailed"),description:Ne.error||r("integrations.toast.tryAgain")})}catch(Ne){yr("[IntegrationSettings] Failed to save token:",Ne),a({variant:"destructive",title:r("integrations.toast.tokenSaveFailed"),description:r("integrations.toast.tryAgain")})}finally{K(null)}}},He=async()=>{q(!0);try{const he=await window.electronAPI.getAutoSwitchSettings();he.success&&he.data&&G(he.data)}catch(he){yr("[IntegrationSettings] Failed to load auto-switch settings:",he)}finally{q(!1)}},tt=async he=>{q(!0);try{const Ne=await window.electronAPI.updateAutoSwitchSettings(he);Ne.success?await He():a({variant:"destructive",title:r("integrations.toast.settingsUpdateFailed"),description:Ne.error||r("integrations.toast.tryAgain")})}catch(Ne){yr("[IntegrationSettings] Failed to update auto-switch settings:",Ne),a({variant:"destructive",title:r("integrations.toast.settingsUpdateFailed"),description:r("integrations.toast.tryAgain")})}finally{q(!1)}};return n.jsx(jr,{title:r("integrations.title"),description:r("integrations.description"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:r("integrations.claudeAccounts")})]}),n.jsxs("div",{className:"rounded-lg bg-muted/30 border border-border p-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:r("integrations.claudeAccountsDescription")}),x?n.jsx("div",{className:"flex items-center justify-center py-4",children:n.jsx(we,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):u.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-border p-4 text-center mb-4",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:r("integrations.noAccountsYet")})}):n.jsx("div",{className:"space-y-2 mb-4",children:u.map(he=>n.jsxs("div",{className:J("rounded-lg border transition-colors",he.id===m?"border-primary bg-primary/5":"border-border bg-background"),children:[n.jsxs("div",{className:J("flex items-center justify-between p-3",P!==he.id&&"hover:bg-muted/50"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:J("h-7 w-7 rounded-full flex items-center justify-center text-xs font-medium shrink-0",he.id===m?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:(T===he.id?A:he.name).charAt(0).toUpperCase()}),n.jsx("div",{className:"min-w-0",children:T===he.id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{value:A,onChange:Ne=>R(Ne.target.value),className:"h-7 text-sm w-40",autoFocus:!0,onKeyDown:Ne=>{Ne.key==="Enter"&&fe(),Ne.key==="Escape"&&pe()}}),n.jsx(W,{variant:"ghost",size:"icon",onClick:fe,className:"h-7 w-7 text-success hover:text-success hover:bg-success/10","aria-label":r("common:accessibility.saveEditAriaLabel"),children:n.jsx(Pt,{className:"h-3 w-3"})}),n.jsx(W,{variant:"ghost",size:"icon",onClick:pe,className:"h-7 w-7 text-muted-foreground hover:text-foreground","aria-label":r("common:accessibility.cancelEditAriaLabel"),children:n.jsx(Ss,{className:"h-3 w-3"})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:he.name}),he.isDefault&&n.jsx("span",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:r("integrations.default")}),he.id===m&&n.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded flex items-center gap-1",children:[n.jsx(ih,{className:"h-3 w-3"}),r("integrations.active")]}),he.oauthToken||he.isDefault&&he.configDir?n.jsxs("span",{className:"text-xs bg-success/20 text-success px-1.5 py-0.5 rounded flex items-center gap-1",children:[n.jsx(Pt,{className:"h-3 w-3"}),r("integrations.authenticated")]}):n.jsx("span",{className:"text-xs bg-warning/20 text-warning px-1.5 py-0.5 rounded",children:r("integrations.needsAuth")})]}),he.email&&n.jsx("span",{className:"text-xs text-muted-foreground",children:he.email})]})})]}),T!==he.id&&n.jsxs("div",{className:"flex items-center gap-1",children:[he.oauthToken||he.isDefault&&he.configDir?n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>Z(he.id),disabled:D===he.id,className:"h-7 w-7 text-muted-foreground hover:text-foreground","aria-label":r("common:accessibility.refreshAriaLabel"),children:D===he.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(We,{className:"h-3 w-3"})})}),n.jsx(mt,{children:r("common:accessibility.reAuthenticateProfileAriaLabel")})]}):n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>Z(he.id),disabled:D===he.id,className:"gap-1 h-7 text-xs",children:[D===he.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(Zb,{className:"h-3 w-3"}),r("integrations.authenticate")]}),he.id!==m&&n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>re(he.id),className:"gap-1 h-7 text-xs",children:[n.jsx(Pt,{className:"h-3 w-3"}),r("integrations.setActive")]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>ie(he.id),className:"h-7 w-7 text-muted-foreground hover:text-foreground","aria-label":P===he.id?r("common:accessibility.collapseAriaLabel"):r("common:accessibility.expandAriaLabel"),children:P===he.id?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})})}),n.jsx(mt,{children:P===he.id?r("common:accessibility.hideTokenEntryAriaLabel"):r("common:accessibility.enterTokenManuallyAriaLabel")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>ee(he),className:"h-7 w-7 text-muted-foreground hover:text-foreground","aria-label":r("common:accessibility.renameAriaLabel"),children:n.jsx(fl,{className:"h-3 w-3"})})}),n.jsx(mt,{children:r("common:accessibility.renameProfileAriaLabel")})]}),!he.isDefault&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>te(he.id),disabled:_===he.id,className:"h-7 w-7 text-destructive hover:text-destructive hover:bg-destructive/10","aria-label":r("common:accessibility.deleteAriaLabel"),children:_===he.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(or,{className:"h-3 w-3"})})}),n.jsx(mt,{children:r("common:accessibility.deleteProfileAriaLabel")})]})]})]}),P===he.id&&n.jsx("div",{className:"px-3 pb-3 pt-0 border-t border-border/50 mt-0",children:n.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 mt-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-xs font-medium text-muted-foreground",children:r("integrations.manualTokenEntry")}),n.jsx("span",{className:"text-xs text-muted-foreground",children:r("integrations.runSetupToken")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:I?"text":"password",placeholder:r("integrations.tokenPlaceholder"),value:F,onChange:Ne=>$(Ne.target.value),className:"pr-10 font-mono text-xs h-8"}),n.jsx("button",{type:"button",onClick:()=>V(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:I?n.jsx(nr,{className:"h-3 w-3"}):n.jsx(Ws,{className:"h-3 w-3"})})]}),n.jsx(Oe,{type:"email",placeholder:r("integrations.emailPlaceholder"),value:z,onChange:Ne=>H(Ne.target.value),className:"text-xs h-8"})]}),n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>ie(he.id),className:"h-7 text-xs",children:i("buttons.cancel")}),n.jsxs(W,{size:"sm",onClick:()=>ce(he.id),disabled:!F.trim()||B===he.id,className:"h-7 text-xs gap-1",children:[B===he.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(Pt,{className:"h-3 w-3"}),r("integrations.saveToken")]})]})]})})]},he.id))}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{placeholder:r("integrations.accountNamePlaceholder"),value:y,onChange:he=>w(he.target.value),className:"flex-1 h-8 text-sm",onKeyDown:he=>{he.key==="Enter"&&y.trim()&&se()}}),n.jsxs(W,{onClick:se,disabled:!y.trim()||S,size:"sm",className:"gap-1 shrink-0",children:[S?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(fs,{className:"h-3 w-3"}),i("buttons.add")]})]})]})]}),u.length>1&&n.jsxs("div",{className:"space-y-4 pt-6 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(We,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:r("integrations.autoSwitching")})]}),n.jsxs("div",{className:"rounded-lg bg-muted/30 border border-border p-4 space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:r("integrations.autoSwitchingDescription")}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(le,{className:"text-sm font-medium",children:r("integrations.enableAutoSwitching")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("integrations.masterSwitch")})]}),n.jsx(Kt,{checked:L?.enabled??!1,onCheckedChange:he=>tt({enabled:he}),disabled:Y})]}),L?.enabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"pl-6 space-y-4 pt-2 border-l-2 border-primary/20",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(le,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Vb,{className:"h-3.5 w-3.5"}),r("integrations.proactiveMonitoring")]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("integrations.proactiveDescription")})]}),n.jsx(Kt,{checked:L?.proactiveSwapEnabled??!0,onCheckedChange:he=>tt({proactiveSwapEnabled:he}),disabled:Y})]}),L?.proactiveSwapEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm",children:r("integrations.checkUsageEvery")}),n.jsxs("select",{className:"w-full px-3 py-2 bg-background border border-input rounded-md text-sm",value:L?.usageCheckInterval??3e4,onChange:he=>tt({usageCheckInterval:parseInt(he.target.value)}),disabled:Y,children:[n.jsx("option",{value:15e3,children:r("integrations.seconds15")}),n.jsx("option",{value:3e4,children:r("integrations.seconds30")}),n.jsx("option",{value:6e4,children:r("integrations.minute1")}),n.jsx("option",{value:0,children:r("integrations.disabled")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm",children:r("integrations.sessionThreshold")}),n.jsxs("span",{className:"text-sm font-mono",children:[L?.sessionThreshold??95,"%"]})]}),n.jsx("input",{type:"range",min:"70",max:"99",step:"1",value:L?.sessionThreshold??95,onChange:he=>tt({sessionThreshold:parseInt(he.target.value)}),disabled:Y,className:"w-full"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.sessionThresholdDescription")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm",children:r("integrations.weeklyThreshold")}),n.jsxs("span",{className:"text-sm font-mono",children:[L?.weeklyThreshold??99,"%"]})]}),n.jsx("input",{type:"range",min:"70",max:"99",step:"1",value:L?.weeklyThreshold??99,onChange:he=>tt({weeklyThreshold:parseInt(he.target.value)}),disabled:Y,className:"w-full"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.weeklyThresholdDescription")})]})]})]}),n.jsx("div",{className:"pl-6 space-y-4 pt-2 border-l-2 border-orange-500/20",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(le,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Ke,{className:"h-3.5 w-3.5"}),r("integrations.reactiveRecovery")]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r("integrations.reactiveDescription")})]}),n.jsx(Kt,{checked:L?.autoSwitchOnRateLimit??!1,onCheckedChange:he=>tt({autoSwitchOnRateLimit:he}),disabled:Y})]})})]})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(io,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("h4",{className:"text-sm font-semibold text-foreground",children:r("integrations.apiKeys")})]}),n.jsx("div",{className:"rounded-lg bg-info/10 border border-info/30 p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(_r,{className:"h-4 w-4 text-info shrink-0 mt-0.5"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.apiKeysInfo")})]})}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"globalOpenAIKey",className:"text-sm font-medium text-foreground",children:r("integrations.openaiKey")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r("integrations.openaiKeyDescription")}),n.jsxs("div",{className:"relative max-w-lg",children:[n.jsx(Oe,{id:"globalOpenAIKey",type:o?"text":"password",placeholder:"sk-...",value:e.globalOpenAIApiKey||"",onChange:he=>t({...e,globalOpenAIApiKey:he.target.value||void 0}),className:"pr-10 font-mono text-sm"}),n.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:o?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]})]})})]})]})})}function C4({markdown:e}){const t=p.useMemo(()=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^### (.+)$/gm,'<h4 class="text-sm font-semibold text-foreground mt-3 mb-1.5 first:mt-0">$1</h4>').replace(/^## (.+)$/gm,'<h3 class="text-sm font-semibold text-foreground mt-3 mb-1.5 first:mt-0">$1</h3>').replace(/\*\*([^*]+)\*\*/g,'<strong class="text-foreground font-medium">$1</strong>').replace(/`([^`]+)`/g,'<code class="px-1 py-0.5 bg-muted rounded text-xs">$1</code>').replace(/^- (.+)$/gm,`<li class="ml-4 text-muted-foreground before:content-[''] before:mr-2 before:text-muted-foreground/60">$1</li>`).replace(/(<li[^>]*>.*?<\/li>\n?)+/g,'<ul class="space-y-1 my-2">$&</ul>').replace(/\n\n/g,'<div class="h-2"></div>').replace(/\n/g,"<br/>"),[e]);return n.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:t}})}function k4({settings:e,onSettingsChange:t,section:s,version:r}){const{t:i}=Re("settings"),[a,o]=p.useState(null),[l,u]=p.useState(!1),[d,m]=p.useState(!1),[f,x]=p.useState(null),[v,y]=p.useState(!1),[w,S]=p.useState(null);p.useEffect(()=>{if(s!=="updates")return;let R=!1;return(async()=>{try{const D=await window.electronAPI.getDownloadedAppUpdate();if(R)return;if(D.success&&D.data){o(D.data),y(!0),console.log("[AdvancedSettings] Found already-downloaded update:",D.data.version);return}}catch(D){if(console.error("Failed to check for downloaded update:",D),R)return}u(!0);try{const D=await window.electronAPI.checkAppUpdate();if(R)return;D.success&&D.data?o(D.data):o(null)}catch(D){console.error("Failed to check for app updates:",D)}finally{R||u(!1)}})(),()=>{R=!0}},[s]),p.useEffect(()=>{const R=window.electronAPI.onAppUpdateAvailable(O=>{o(O),u(!1)}),D=window.electronAPI.onAppUpdateDownloaded(O=>{o(O),m(!1),y(!0),x(null),S(null)}),M=window.electronAPI.onAppUpdateProgress(O=>{x(O)}),P=window.electronAPI.onAppUpdateStableDowngrade(O=>{S(O)});return()=>{R(),D(),M(),P()}},[]);const C=async()=>{u(!0);try{const R=await window.electronAPI.checkAppUpdate();R.success&&R.data?o(R.data):o(null)}catch(R){console.error("Failed to check for app updates:",R)}finally{u(!1)}},_=async()=>{m(!0);try{const R=await window.electronAPI.downloadAppUpdate();R.success||(console.error("Failed to download app update:",R.error),m(!1))}catch(R){console.error("Failed to download app update:",R),m(!1)}},j=()=>{window.electronAPI.installAppUpdate()},T=async()=>{m(!0);try{const R=await window.electronAPI.downloadStableUpdate();R.success||(console.error("Failed to download stable version:",R.error),m(!1))}catch(R){console.error("Failed to download stable version:",R),m(!1)}},E=()=>{S(null)};if(s==="updates")return n.jsx(jr,{title:i("updates.title"),description:i("updates.description"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:i("updates.version")}),n.jsx("p",{className:"text-base font-medium text-foreground",children:r||i("updates.loading")})]}),l?n.jsx(We,{className:"h-6 w-6 animate-spin text-muted-foreground"}):a?n.jsx(jn,{className:"h-6 w-6 text-info"}):n.jsx(Xe,{className:"h-6 w-6 text-success"})]}),!a&&!l&&n.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.latestVersion")}),n.jsx("div",{className:"pt-2",children:n.jsxs(W,{size:"sm",variant:"outline",onClick:C,disabled:l,children:[n.jsx(We,{className:`mr-2 h-4 w-4 ${l?"animate-spin":""}`}),i("updates.checkForUpdates")]})})]}),(a||v)&&n.jsxs("div",{className:"rounded-lg border-2 border-info/50 bg-info/5 p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-info",children:[n.jsx(Qt,{className:"h-5 w-5"}),n.jsx("h3",{className:"font-semibold",children:i("updates.appUpdateReady")})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:i("updates.newVersion")}),n.jsx("p",{className:"text-base font-medium text-foreground",children:a?.version||"Unknown"}),a?.releaseDate&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i("updates.released")," ",new Date(a.releaseDate).toLocaleDateString()]})]}),v?n.jsx(Xe,{className:"h-6 w-6 text-success"}):d?n.jsx(We,{className:"h-6 w-6 animate-spin text-info"}):n.jsx(jn,{className:"h-6 w-6 text-info"})]}),a?.releaseNotes&&n.jsx("div",{className:"bg-background rounded-lg p-4 max-h-48 overflow-y-auto border border-border/50",children:n.jsx(C4,{markdown:a.releaseNotes})}),d&&f&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:i("updates.downloading")}),n.jsxs("span",{className:"text-foreground font-medium",children:[Math.round(f.percent),"%"]})]}),n.jsx(xi,{value:f.percent,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(f.transferred/1024/1024).toFixed(2)," MB / ",(f.total/1024/1024).toFixed(2)," MB"]})]}),v&&n.jsxs("div",{className:"flex items-center gap-3 text-sm text-success bg-success/10 border border-success/30 rounded-lg p-3",children:[n.jsx(Xe,{className:"h-5 w-5 shrink-0"}),n.jsx("span",{children:i("updates.updateDownloaded")})]}),n.jsx("div",{className:"flex gap-3",children:v?n.jsxs(W,{onClick:j,children:[n.jsx(We,{className:"mr-2 h-4 w-4"}),i("updates.installAndRestart")]}):n.jsx(W,{onClick:_,disabled:d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),i("updates.downloading")]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),i("updates.downloadUpdate")]})})})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"font-medium text-foreground",children:i("updates.autoUpdateProjects")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.autoUpdateProjectsDescription")})]}),n.jsx(Kt,{checked:e.autoUpdateAutoBuild,onCheckedChange:R=>t({...e,autoUpdateAutoBuild:R})})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"font-medium text-foreground",children:i("updates.betaUpdates")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.betaUpdatesDescription")})]}),n.jsx(Kt,{checked:e.betaUpdates??!1,onCheckedChange:R=>{t({...e,betaUpdates:R}),R?S(null):o(null)}})]}),w&&!a&&n.jsxs("div",{className:"rounded-lg border-2 border-warning/50 bg-warning/5 p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2 text-warning",children:[n.jsx(Gj,{className:"h-5 w-5"}),n.jsx("h3",{className:"font-semibold",children:i("updates.stableDowngradeAvailable")})]}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,"aria-label":i("common:accessibility.dismissAriaLabel"),children:n.jsx(Ss,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i("updates.stableDowngradeDescription")}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:i("updates.stableVersion")}),n.jsx("p",{className:"text-base font-medium text-foreground",children:w.version}),w.releaseDate&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[i("updates.released")," ",new Date(w.releaseDate).toLocaleDateString()]})]}),d?n.jsx(We,{className:"h-6 w-6 animate-spin text-warning"}):n.jsx(Gj,{className:"h-6 w-6 text-warning"})]}),w.releaseNotes&&n.jsx("div",{className:"bg-background rounded-lg p-4 max-h-48 overflow-y-auto border border-border/50",children:n.jsx(C4,{markdown:w.releaseNotes})}),d&&f&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:i("updates.downloading")}),n.jsxs("span",{className:"text-foreground font-medium",children:[Math.round(f.percent),"%"]})]}),n.jsx(xi,{value:f.percent,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(f.transferred/1024/1024).toFixed(2)," MB / ",(f.total/1024/1024).toFixed(2)," MB"]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(W,{onClick:T,disabled:d,variant:"outline",children:d?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),i("updates.downloading")]}):n.jsxs(n.Fragment,{children:[n.jsx(Gj,{className:"mr-2 h-4 w-4"}),i("updates.downloadStableVersion")]})}),n.jsx(W,{variant:"ghost",onClick:E,children:i("common:actions.dismiss")})]})]})]})});const A=[{key:"onTaskComplete",labelKey:"notifications.onTaskComplete",descriptionKey:"notifications.onTaskCompleteDescription"},{key:"onTaskFailed",labelKey:"notifications.onTaskFailed",descriptionKey:"notifications.onTaskFailedDescription"},{key:"onReviewNeeded",labelKey:"notifications.onReviewNeeded",descriptionKey:"notifications.onReviewNeededDescription"},{key:"sound",labelKey:"notifications.sound",descriptionKey:"notifications.soundDescription"}];return n.jsx(jr,{title:i("notifications.title"),description:i("notifications.description"),children:n.jsx("div",{className:"space-y-4",children:A.map(R=>n.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"font-medium text-foreground",children:i(R.labelKey)}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i(R.descriptionKey)})]}),n.jsx(Kt,{checked:e.notifications[R.key],onCheckedChange:D=>t({...e,notifications:{...e.notifications,[R.key]:D}})})]},R.key))})})}const Qke={androidstudio:"Android Studio",clion:"CLion",cursor:"Cursor",emacs:"Emacs",goland:"GoLand",intellij:"IntelliJ IDEA",neovim:"Neovim",nova:"Nova",phpstorm:"PhpStorm",pycharm:"PyCharm",rider:"Rider",rubymine:"RubyMine",sublime:"Sublime Text",vim:"Vim",vscode:"Visual Studio Code",vscodium:"VSCodium",webstorm:"WebStorm",windsurf:"Windsurf",xcode:"Xcode",zed:"Zed",custom:"Custom..."},A4={alacritty:"Alacritty",ghostty:"Ghostty",gnometerminal:"GNOME Terminal",hyper:"Hyper",iterm2:"iTerm2",kitty:"Kitty",konsole:"Konsole",powershell:"PowerShell",system:"System Terminal",tabby:"Tabby",terminal:"Terminal.app",terminator:"Terminator",tilix:"Tilix",tmux:"tmux",warp:"Warp",wezterm:"WezTerm",windowsterminal:"Windows Terminal",zellij:"Zellij",custom:"Custom..."};function Jke({settings:e,onSettingsChange:t}){const{t:s}=Re("settings"),[r,i]=p.useState(null),[a,o]=p.useState(!1),[l,u]=p.useState(null),d=p.useCallback(async()=>{o(!0),u(null);try{if(!window.electronAPI?.worktreeDetectTools){console.warn("[DevToolsSettings] Detection API not available"),o(!1);return}const _=await window.electronAPI.worktreeDetectTools();_.success&&_.data?i(_.data):u(_.error||"Failed to detect tools")}catch(_){u(_ instanceof Error?_.message:"Failed to detect tools")}finally{o(!1)}},[]);p.useEffect(()=>{d()},[d]);const m=_=>{t({...e,preferredIDE:_,customIDEPath:_==="custom"?e.customIDEPath:void 0})},f=_=>{t({...e,preferredTerminal:_,customTerminalPath:_==="custom"?e.customTerminalPath:void 0})},x=_=>{t({...e,customIDEPath:_})},v=_=>{t({...e,customTerminalPath:_})},y=[];if(r)for(const _ of r.ides)y.push({value:_.id,label:_.name,detected:!0});const w=new Set(r?.ides.map(_=>_.id)||[]);for(const[_,j]of Object.entries(Qke))_!=="custom"&&!w.has(_)&&y.push({value:_,label:j,detected:!1});y.push({value:"custom",label:"Custom...",detected:!1});const S=[];if(S.push({value:"system",label:A4.system,detected:!0}),r)for(const _ of r.terminals)_.id!=="system"&&S.push({value:_.id,label:_.name,detected:!0});const C=new Set(r?.terminals.map(_=>_.id)||[]);C.add("system");for(const[_,j]of Object.entries(A4))_!=="custom"&&!C.has(_)&&S.push({value:_,label:j,detected:!1});return S.push({value:"custom",label:"Custom...",detected:!1}),n.jsx(jr,{title:s("devtools.title","Developer Tools"),description:s("devtools.description","Configure your preferred IDE and terminal for working with worktrees"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(W,{variant:"outline",size:"sm",onClick:d,disabled:a,children:[a?n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(We,{className:"h-4 w-4 mr-2"}),s("devtools.detectAgain","Detect Again")]})}),l&&n.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:l}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"preferred-ide",className:"flex items-center gap-2",children:[n.jsx(lr,{className:"h-4 w-4"}),s("devtools.ide.label","Preferred IDE")]}),n.jsxs(_t,{value:e.preferredIDE||"vscode",onValueChange:_=>m(_),children:[n.jsx(yt,{id:"preferred-ide",children:n.jsx(Nt,{placeholder:s("devtools.ide.placeholder","Select IDE...")})}),n.jsx(wt,{children:y.map(_=>n.jsx(et,{value:_.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:_.label}),_.detected&&n.jsx(Pt,{className:"h-3 w-3 text-green-500"})]})},_.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:s("devtools.ide.description","Auto Claude will open worktrees in this editor")}),e.preferredIDE==="custom"&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx(le,{htmlFor:"custom-ide-path",children:s("devtools.customPath","Custom path")}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{id:"custom-ide-path",value:e.customIDEPath||"",onChange:_=>x(_.target.value),placeholder:"/path/to/your/ide",className:"flex-1"}),n.jsx(W,{variant:"outline",size:"icon",onClick:async()=>{const _=await window.electronAPI.selectDirectory();_&&x(_)},"aria-label":s("common:accessibility.browseFilesAriaLabel"),children:n.jsx(Xr,{className:"h-4 w-4"})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"preferred-terminal",className:"flex items-center gap-2",children:[n.jsx(dr,{className:"h-4 w-4"}),s("devtools.terminal.label","Preferred Terminal")]}),n.jsxs(_t,{value:e.preferredTerminal||"system",onValueChange:_=>f(_),children:[n.jsx(yt,{id:"preferred-terminal",children:n.jsx(Nt,{placeholder:s("devtools.terminal.placeholder","Select terminal...")})}),n.jsx(wt,{children:S.map(_=>n.jsx(et,{value:_.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:_.label}),_.detected&&n.jsx(Pt,{className:"h-3 w-3 text-green-500"})]})},_.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:s("devtools.terminal.description","Auto Claude will open terminal sessions here")}),e.preferredTerminal==="custom"&&n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx(le,{htmlFor:"custom-terminal-path",children:s("devtools.customPath","Custom path")}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{id:"custom-terminal-path",value:e.customTerminalPath||"",onChange:_=>v(_.target.value),placeholder:"/path/to/your/terminal",className:"flex-1"}),n.jsx(W,{variant:"outline",size:"icon",onClick:async()=>{const _=await window.electronAPI.selectDirectory();_&&v(_)},"aria-label":s("common:accessibility.browseFilesAriaLabel"),children:n.jsx(Xr,{className:"h-4 w-4"})})]})]})]}),n.jsxs("div",{className:"space-y-3 rounded-md border border-amber-500/30 bg-amber-500/5 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-amber-500"}),n.jsx(le,{htmlFor:"yolo-mode",className:"text-amber-200",children:s("devtools.yoloMode.label","YOLO Mode")})]}),n.jsx(Kt,{id:"yolo-mode",checked:e.dangerouslySkipPermissions??!1,onCheckedChange:_=>{t({...e,dangerouslySkipPermissions:_})}})]}),n.jsx("p",{className:"text-xs text-amber-400/80",children:s("devtools.yoloMode.description","Start Claude with --dangerously-skip-permissions flag, bypassing all safety prompts. Use with extreme caution.")}),e.dangerouslySkipPermissions&&n.jsxs("p",{className:"text-xs text-amber-500 font-medium flex items-center gap-1",children:[n.jsx(Tt,{className:"h-3 w-3"}),s("devtools.yoloMode.warning","This mode bypasses Claude's permission system. Only enable if you fully trust the code being executed.")]})]}),r&&!a&&n.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:[n.jsxs("p",{className:"font-medium mb-1",children:[s("devtools.detected","Detected on your system"),":"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[r.ides.map(_=>n.jsx("li",{children:_.name},_.id)),r.terminals.filter(_=>_.id!=="system").map(_=>n.jsx("li",{children:_.name},_.id)),r.ides.length===0&&r.terminals.filter(_=>_.id!=="system").length===0&&n.jsx("li",{children:s("devtools.noToolsDetected","No additional tools detected")})]})]})]})})}function eAe(){const{t:e}=Re("settings"),{settings:t,updateSettings:s}=cs(),[r,i]=p.useState(null),[a,o]=p.useState(!1),[l,u]=p.useState(!1),[d,m]=p.useState(null),f=async w=>{m(null);try{(await window.electronAPI.saveSettings({sentryEnabled:w})).success?(s({sentryEnabled:w}),q3(w)):m(e("debug.errorReporting.saveFailed","Failed to save error reporting setting"))}catch{m(e("debug.errorReporting.saveFailed","Failed to save error reporting setting"))}},x=async()=>{o(!0),m(null);try{const w=await window.electronAPI.getDebugInfo();i(w)}catch(w){m(w instanceof Error?w.message:"Failed to load debug info")}finally{o(!1)}},v=async()=>{try{const w=await window.electronAPI.openLogsFolder();w.success||m(w.error||"Failed to open logs folder")}catch(w){m(w instanceof Error?w.message:"Failed to open logs folder")}},y=async()=>{try{const w=await window.electronAPI.copyDebugInfo();w.success?(u(!0),setTimeout(()=>u(!1),2e3)):m(w.error||"Failed to copy debug info")}catch(w){m(w instanceof Error?w.message:"Failed to copy debug info")}};return n.jsx(jr,{title:e("debug.title","Debug & Logs"),description:e("debug.description","Access logs and debug information for troubleshooting"),children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"rounded-lg border border-border p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xa,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx(le,{htmlFor:"sentry-toggle",className:"text-sm font-medium text-foreground cursor-pointer",children:e("debug.errorReporting.label","Anonymous Error Reporting")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("debug.errorReporting.description","Send crash reports to help improve Auto Claude. No personal data or code is collected.")})]})]}),n.jsx(Kt,{id:"sentry-toggle",checked:t.sentryEnabled??!0,onCheckedChange:f})]})}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs(W,{variant:"outline",onClick:v,className:"flex items-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4"}),e("debug.openLogsFolder","Open Logs Folder")]}),n.jsx(W,{variant:"outline",onClick:y,className:"flex items-center gap-2",disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 text-green-500"}),e("debug.copied","Copied!")]}):n.jsxs(n.Fragment,{children:[n.jsx(sh,{className:"h-4 w-4"}),e("debug.copyDebugInfo","Copy Debug Info")]})}),n.jsxs(W,{variant:"outline",onClick:x,disabled:a,className:"flex items-center gap-2",children:[a?n.jsx(we,{className:"h-4 w-4 animate-spin"}):n.jsx(We,{className:"h-4 w-4"}),e("debug.loadInfo","Load Debug Info")]})]}),d&&n.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-md bg-destructive/10 text-destructive text-sm",children:[n.jsx(Ke,{className:"h-4 w-4 mt-0.5 shrink-0"}),d]}),r&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"rounded-lg border border-border p-4",children:[n.jsxs("h4",{className:"font-medium text-sm mb-3 flex items-center gap-2",children:[n.jsx(jh,{className:"h-4 w-4"}),e("debug.systemInfo","System Information")]}),n.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(r.systemInfo).map(([w,S])=>n.jsxs("div",{className:"flex justify-between gap-2",children:[n.jsxs("span",{className:"text-muted-foreground",children:[w,":"]}),n.jsx("span",{className:"font-mono text-right truncate",title:S,children:S})]},w))})]}),n.jsxs("div",{className:"rounded-lg border border-border p-4",children:[n.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:[n.jsx($n,{className:"h-4 w-4"}),e("debug.logsLocation","Logs Location")]}),n.jsx("code",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded block truncate",children:r.logsPath})]}),r.recentErrors.length>0&&n.jsxs("div",{className:"rounded-lg border border-border p-4",children:[n.jsxs("h4",{className:"font-medium text-sm mb-3 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-amber-500"}),e("debug.recentErrors","Recent Errors")," (",r.recentErrors.length,")"]}),n.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:r.recentErrors.map((w,S)=>n.jsx("div",{className:"text-xs font-mono text-muted-foreground bg-muted/30 px-2 py-1 rounded",children:w},S))})]}),r.recentErrors.length===0&&n.jsx("div",{className:"rounded-lg border border-border p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Pt,{className:"h-4 w-4 text-green-500"}),e("debug.noRecentErrors","No recent errors")]})})]}),n.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 p-3 rounded-md",children:[n.jsx("p",{className:"font-medium mb-1",children:e("debug.helpTitle","Reporting Issues")}),n.jsx("p",{children:e("debug.helpText",'When reporting bugs, click "Copy Debug Info" to get system information and recent errors that help us diagnose the issue.')})]})]})})}function Ux({value:e,onChange:t,placeholder:s,baseUrl:r,apiKey:i,disabled:a=!1,className:o}){const{t:l}=Re(),u=s??l("settings:modelSelect.placeholder"),d=cs(I=>I.discoverModels),[m,f]=p.useState(!1),[x,v]=p.useState([]),[y,w]=p.useState(!1),[S,C]=p.useState(null),[_,j]=p.useState(!1),[T,E]=p.useState(""),[A,R]=p.useState(!1),D=p.useRef(null),M=p.useRef(null),P=async()=>{console.log("[ModelSearchableSelect] fetchModels called with:",{baseUrl:r,apiKey:`${i.slice(-4)}`}),w(!0),C(null),j(!1),D.current=new AbortController;try{const I=await d(r,i,D.current.signal);console.log("[ModelSearchableSelect] discoverModels result:",I),I&&Array.isArray(I)?(v(I),I.length===0&&f(!1)):(j(!0),f(!1))}catch(I){I instanceof Error&&I.name!=="AbortError"&&(I.message.includes("does not support model listing")||I.message.includes("not_supported")?j(!0):(j(!0),console.warn("[ModelSearchableSelect] Model discovery failed:",I.message)),f(!1))}finally{w(!1),D.current=null}},O=()=>{if(!a){if(_){R(!0);return}f(!0),E(""),x.length===0&&!y&&!S&&P()}},F=()=>{f(!1),D.current?.abort(),D.current=null},$=I=>{t(I),F()},z=I=>{t(I),E(I)},H=x.filter(I=>I.id.toLowerCase().includes(T.toLowerCase())||I.display_name.toLowerCase().includes(T.toLowerCase()));return p.useEffect(()=>{const I=V=>{M.current&&!M.current.contains(V.target)&&F()};return m&&document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[m]),p.useEffect(()=>()=>{D.current?.abort()},[]),n.jsxs("div",{ref:M,className:J("relative",o),children:[n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{value:e||"",onChange:I=>{z(I.target.value)},onFocus:()=>{_||O()},placeholder:_?l("settings:modelSelect.placeholderManual"):u,disabled:a,className:"pr-10"}),n.jsx("div",{className:"absolute right-0 top-0 h-full flex items-center px-3",children:y?n.jsx(we,{className:"h-4 w-4 animate-spin text-muted-foreground"}):_?null:n.jsx(W,{type:"button",variant:"ghost",size:"sm",onClick:m?F:O,disabled:a,className:"h-6 w-6 p-0 hover:bg-accent",children:n.jsx(bt,{className:J("h-4 w-4 transition-transform",m&&"rotate-180")})})})]}),m&&!y&&!_&&x.length>0&&n.jsxs("div",{className:"absolute z-50 w-full bottom-full mb-1 bg-background border rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col","data-testid":"model-select-dropdown",children:[n.jsx("div",{className:"p-2 border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Oe,{value:T,onChange:I=>E(I.target.value),placeholder:l("settings:modelSelect.searchPlaceholder"),className:"pl-8",autoFocus:!0})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto py-1",children:H.length===0?n.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:l("settings:modelSelect.noResults")}):H.map(I=>n.jsxs("button",{type:"button",onClick:()=>$(I.id),className:J("w-full px-3 py-2 text-left text-sm hover:bg-accent flex items-start gap-2",e===I.id&&"bg-accent"),children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium truncate",children:I.display_name}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:I.id})]}),e===I.id&&n.jsx(Pt,{className:"h-4 w-4 text-primary shrink-0 mt-0.5"})]},I.id))})]}),_&&n.jsxs("p",{className:"text-sm text-muted-foreground mt-1 flex items-center gap-1",children:[n.jsx(_r,{className:"h-3 w-3"}),l("settings:modelSelect.discoveryNotAvailable")]}),S&&!_&&n.jsx("p",{className:"text-sm text-destructive mt-1",children:S})]})}function HU(e){return!e||e.length<=4?"":`${e.slice(-4)}`}function tAe(e){if(!e||e.trim()==="")return!1;try{const t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}function sAe(e){if(!e||e.trim()==="")return!1;const t=e.trim();return t.length<12?!1:/^[a-zA-Z0-9\-_+.]+$/.test(t)}function UU({open:e,onOpenChange:t,onSaved:s,profile:r}){const{t:i}=Re(),{saveProfile:a,updateProfile:o,profilesLoading:l,profilesError:u,testConnection:d,isTestingConnection:m,testConnectionResult:f}=cs(),{toast:x}=bo(),v=!!r,[y,w]=p.useState(""),[S,C]=p.useState(""),[_,j]=p.useState(""),[T,E]=p.useState(""),[A,R]=p.useState(""),[D,M]=p.useState(""),[P,O]=p.useState(""),[F,$]=p.useState(""),[z,H]=p.useState(!1),[I,V]=p.useState(null),[B,K]=p.useState(null),[L,G]=p.useState(null),Y=p.useRef(null),q=p.useRef(null),[Q,se]=p.useState(!1);p.useEffect(()=>{if(f){se(!0);const Z=setTimeout(()=>{se(!1)},5e3);return()=>clearTimeout(Z)}},[f]),p.useEffect(()=>()=>{Y.current?.abort(),Y.current=null},[]),p.useEffect(()=>{e?(v&&r?(w(r.name),C(r.baseUrl),j(""),E(r.models?.default||""),R(r.models?.haiku||""),M(r.models?.sonnet||""),O(r.models?.opus||""),H(!1),$("")):(w(""),C(""),j(""),E(""),R(""),M(""),O(""),H(!1),$("")),V(null),K(null),G(null)):se(!1)},[e]);const te=Z=>{const ie=SP.find(ce=>ce.id===Z);ie&&($(Z),C(ie.baseUrl),y.trim()||w(i(ie.labelKey)))},ee=()=>{let Z=!0;return y.trim()?V(null):(V(i("settings:apiProfiles.validation.nameRequired")),Z=!1),S.trim()?tAe(S)?K(null):(K(i("settings:apiProfiles.validation.baseUrlInvalid")),Z=!1):(K(i("settings:apiProfiles.validation.baseUrlRequired")),Z=!1),!v||z?_.trim()?sAe(_)?G(null):(G(i("settings:apiProfiles.validation.apiKeyInvalid")),Z=!1):(G(i("settings:apiProfiles.validation.apiKeyRequired")),Z=!1):G(null),Z},pe=async()=>{const Z=v&&!z&&r?r.apiKey:_;if(!S.trim()){K(i("settings:apiProfiles.validation.baseUrlRequired"));return}if(!Z.trim()){G(i("settings:apiProfiles.validation.apiKeyRequired"));return}Y.current=new AbortController,await d(S.trim(),Z.trim(),Y.current.signal)},fe=()=>!y.trim()||!S.trim()?!1:!v||z?_.trim().length>0:!0,re=async()=>{if(ee())if(v&&r){const Z={...r,name:y.trim(),baseUrl:S.trim(),...z&&{apiKey:_.trim()},...T||A||D||P?{models:{...T&&{default:T.trim()},...A&&{haiku:A.trim()},...D&&{sonnet:D.trim()},...P&&{opus:P.trim()}}}:{models:void 0}};await o(Z)&&(x({title:i("settings:apiProfiles.toast.update.title"),description:i("settings:apiProfiles.toast.update.description",{name:y.trim()})}),t(!1),s?.())}else{const Z={name:y.trim(),baseUrl:S.trim(),apiKey:_.trim()};(T||A||D||P)&&(Z.models={},T&&(Z.models.default=T.trim()),A&&(Z.models.haiku=A.trim()),D&&(Z.models.sonnet=D.trim()),P&&(Z.models.opus=P.trim())),await a(Z)&&(x({title:i("settings:apiProfiles.toast.create.title"),description:i("settings:apiProfiles.toast.create.description",{name:y.trim()})}),t(!1),s?.())}};return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"w-[min(92vw,720px)] max-h-[90vh] overflow-y-auto","data-testid":"profile-edit-dialog",children:[n.jsxs(os,{children:[n.jsx(ls,{children:i(v?"settings:apiProfiles.dialog.editTitle":"settings:apiProfiles.dialog.createTitle")}),n.jsx(ws,{children:i("settings:apiProfiles.dialog.description")})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:`space-y-2 ${v?"md:col-span-2":""}`,children:[n.jsxs(le,{htmlFor:"profile-name",children:[i("settings:apiProfiles.fields.name")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Oe,{id:"profile-name",placeholder:i("settings:apiProfiles.placeholders.name"),value:y,onChange:Z=>w(Z.target.value),className:I?"border-destructive":""}),I&&n.jsx("p",{className:"text-sm text-destructive",children:I})]}),!v&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"profile-preset",children:i("settings:apiProfiles.fields.preset")}),n.jsxs(_t,{value:F,onValueChange:te,children:[n.jsx(yt,{id:"profile-preset",children:n.jsx(Nt,{placeholder:i("settings:apiProfiles.placeholders.preset")})}),n.jsx(wt,{onCloseAutoFocus:Z=>{Z.preventDefault(),q.current?.focus()},children:SP.map(Z=>n.jsx(et,{value:Z.id,children:i(Z.labelKey)},Z.id))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("settings:apiProfiles.hints.preset")})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"profile-url",children:[i("settings:apiProfiles.fields.baseUrl")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Oe,{id:"profile-url",placeholder:i("settings:apiProfiles.placeholders.baseUrl"),value:S,ref:q,onChange:Z=>C(Z.target.value),className:B?"border-destructive":""}),B&&n.jsx("p",{className:"text-sm text-destructive",children:B}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("settings:apiProfiles.hints.baseUrl")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"profile-key",children:[i("settings:apiProfiles.fields.apiKey")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),v&&!z&&r?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{id:"profile-key",value:HU(r.apiKey),disabled:!0,className:"flex-1"}),n.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:()=>H(!0),children:i("settings:apiProfiles.actions.changeKey")})]}):n.jsxs(n.Fragment,{children:[n.jsx(Oe,{id:"profile-key",type:"password",placeholder:i("settings:apiProfiles.placeholders.apiKey"),value:_,onChange:Z=>j(Z.target.value),className:L?"border-destructive":""}),v&&n.jsx(W,{type:"button",variant:"ghost",size:"sm",onClick:()=>{H(!1),j(""),G(null)},children:i("settings:apiProfiles.actions.cancelKeyChange")})]}),L&&n.jsx("p",{className:"text-sm text-destructive",children:L})]})]}),n.jsx(W,{type:"button",variant:"outline",className:"w-full",onClick:pe,disabled:m||!fe(),children:m?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),i("settings:apiProfiles.testConnection.testing")]}):i("settings:apiProfiles.testConnection.label")}),Q&&f&&n.jsxs("div",{className:`flex items-start gap-2 p-3 rounded-lg border ${f.success?"bg-green-50 border-green-200 dark:bg-green-950 dark:border-green-800":"bg-red-50 border-red-200 dark:bg-red-950 dark:border-red-800"}`,children:[f.success?n.jsx(Xe,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}):n.jsx(Ke,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium ${f.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"}`,children:f.success?i("settings:apiProfiles.testConnection.success"):i("settings:apiProfiles.testConnection.failure")}),n.jsx("p",{className:`text-sm ${f.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:f.message})]})]}),n.jsxs("div",{className:"space-y-3 pt-2 border-t",children:[n.jsx(le,{className:"text-base",children:i("settings:apiProfiles.models.title")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:i("settings:apiProfiles.models.description")}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"model-default",className:"text-sm text-muted-foreground",children:i("settings:apiProfiles.models.defaultLabel")}),n.jsx(Ux,{value:T,onChange:E,placeholder:i("settings:apiProfiles.models.defaultPlaceholder"),baseUrl:S,apiKey:v&&!z&&r?r.apiKey:_})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"model-haiku",className:"text-sm text-muted-foreground",children:i("settings:apiProfiles.models.haikuLabel")}),n.jsx(Ux,{value:A,onChange:R,placeholder:i("settings:apiProfiles.models.haikuPlaceholder"),baseUrl:S,apiKey:v&&!z&&r?r.apiKey:_})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"model-sonnet",className:"text-sm text-muted-foreground",children:i("settings:apiProfiles.models.sonnetLabel")}),n.jsx(Ux,{value:D,onChange:M,placeholder:i("settings:apiProfiles.models.sonnetPlaceholder"),baseUrl:S,apiKey:v&&!z&&r?r.apiKey:_})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"model-opus",className:"text-sm text-muted-foreground",children:i("settings:apiProfiles.models.opusLabel")}),n.jsx(Ux,{value:P,onChange:O,placeholder:i("settings:apiProfiles.models.opusPlaceholder"),baseUrl:S,apiKey:v&&!z&&r?r.apiKey:_})]})]})]}),u&&n.jsx("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:n.jsx("p",{className:"text-sm text-destructive",children:u})})]}),n.jsxs(As,{children:[n.jsx(W,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:i("settings:apiProfiles.actions.cancel")}),n.jsx(W,{type:"button",onClick:re,disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),i("settings:apiProfiles.actions.saving")]}):i("settings:apiProfiles.actions.save")})]})]})})}function nAe({onProfileSaved:e}){const{t}=Re(),{profiles:s,activeProfileId:r,deleteProfile:i,setActiveProfile:a,profilesError:o}=cs(),{toast:l}=bo(),[u,d]=p.useState(!1),[m,f]=p.useState(null),[x,v]=p.useState(null),[y,w]=p.useState(!1),[S,C]=p.useState(!1),_=async()=>{if(!x)return;w(!0);const E=await i(x.id);w(!1),E?(l({title:t("settings:apiProfiles.toast.delete.title"),description:t("settings:apiProfiles.toast.delete.description",{name:x.name})}),v(null),e&&e()):l({variant:"destructive",title:t("settings:apiProfiles.toast.delete.errorTitle"),description:o||t("settings:apiProfiles.toast.delete.errorFallback")})},j=async E=>{if(E!==null&&E===r)return;C(!0);const A=await a(E);if(C(!1),A){if(E===null)l({title:t("settings:apiProfiles.toast.switch.oauthTitle"),description:t("settings:apiProfiles.toast.switch.oauthDescription")});else{const R=s.find(D=>D.id===E);R&&l({title:t("settings:apiProfiles.toast.switch.profileTitle"),description:t("settings:apiProfiles.toast.switch.profileDescription",{name:R.name})})}e&&e()}else l({variant:"destructive",title:t("settings:apiProfiles.toast.switch.errorTitle"),description:o||t("settings:apiProfiles.toast.switch.errorFallback")})},T=E=>{try{return new URL(E).host}catch{return E}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:t("settings:apiProfiles.title")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings:apiProfiles.description")})]}),n.jsxs(W,{onClick:()=>d(!0),size:"sm",children:[n.jsx(fs,{className:"h-4 w-4 mr-2"}),t("settings:apiProfiles.addButton")]})]}),s.length===0&&n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 border border-dashed rounded-lg",children:[n.jsx(so,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h4",{className:"text-lg font-medium mb-2",children:t("settings:apiProfiles.empty.title")}),n.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-sm mb-4",children:t("settings:apiProfiles.empty.description")}),n.jsxs(W,{onClick:()=>d(!0),variant:"outline",children:[n.jsx(fs,{className:"h-4 w-4 mr-2"}),t("settings:apiProfiles.empty.action")]})]}),s.length>0&&n.jsxs("div",{className:"space-y-2",children:[r&&n.jsx("div",{className:"flex items-center justify-end pb-2",children:n.jsx(W,{variant:"outline",size:"sm",onClick:()=>j(null),disabled:S,children:t(S?"settings:apiProfiles.switchToOauth.loading":"settings:apiProfiles.switchToOauth.label")})}),s.map(E=>{const A=r===E.id;return n.jsxs("div",{className:J("flex items-center justify-between p-4 rounded-lg border transition-colors",A?"border-primary bg-primary/5":"border-border hover:bg-accent/50"),children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-medium truncate",children:E.name}),r===E.id&&n.jsxs("span",{className:"flex items-center text-xs text-primary",children:[n.jsx(Pt,{className:"h-3 w-3 mr-1"}),t("settings:apiProfiles.activeBadge")]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wn,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate max-w-[200px]",children:T(E.baseUrl)})]})}),n.jsx(mt,{children:n.jsx("p",{children:E.baseUrl})})]}),n.jsx("div",{className:"truncate",children:HU(E.apiKey)})]}),E.models&&Object.keys(E.models).length>0&&n.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:t("settings:apiProfiles.customModels",{models:Object.keys(E.models).join(", ")})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[r!==E.id&&n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>j(E.id),disabled:S,children:t(S?"settings:apiProfiles.setActive.loading":"settings:apiProfiles.setActive.label")}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>f(E),children:n.jsx(fl,{className:"h-4 w-4"})})}),n.jsx(mt,{children:t("settings:apiProfiles.tooltips.edit")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>v(E),disabled:A,className:"text-destructive hover:text-destructive","data-testid":`profile-delete-button-${E.id}`,"aria-label":t("settings:apiProfiles.deleteAriaLabel",{name:E.name}),children:n.jsx(or,{className:"h-4 w-4"})})}),n.jsx(mt,{children:t(A?"settings:apiProfiles.tooltips.deleteActive":"settings:apiProfiles.tooltips.deleteInactive")})]})]})]},E.id)})]}),n.jsx(UU,{open:u||m!==null,onOpenChange:E=>{E||(d(!1),f(null))},onSaved:()=>{d(!1),f(null),e?.()},profile:m??void 0}),n.jsx(Kr,{open:x!==null,onOpenChange:()=>v(null),children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:t("settings:apiProfiles.dialog.deleteTitle")}),n.jsx(Lr,{children:t("settings:apiProfiles.dialog.deleteDescription",{name:x?.name??""})})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:y,children:t("settings:apiProfiles.dialog.cancel")}),n.jsx(pi,{onClick:_,disabled:y,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:t(y?"settings:apiProfiles.dialog.deleting":"settings:apiProfiles.dialog.delete")})]})]})})]})}function rAe({selectedProjectId:e,onProjectChange:t,onProjectAdded:s}){const r=Ot(f=>f.projects),[i,a]=p.useState(!1),[o,l]=p.useState(!1),u=f=>{f==="__add_new__"?(a(!0),l(!1)):(t(f||null),l(!1))},d=p.useCallback(async(f,x)=>{x.stopPropagation(),x.preventDefault(),await UB(f),l(!1)},[]),m=r.find(f=>f.id===e);return n.jsxs(n.Fragment,{children:[n.jsxs(_t,{value:e||"",onValueChange:u,open:o,onOpenChange:l,children:[n.jsx(yt,{className:"w-full [&_span]:truncate",children:n.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1 overflow-hidden",children:[n.jsx(Xr,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),n.jsx(Nt,{placeholder:"Select a project...",className:"truncate min-w-0 flex-1"})]})}),n.jsxs(wt,{className:"min-w-(--radix-select-trigger-width) max-w-(--radix-select-trigger-width)",children:[r.length===0?n.jsx("div",{className:"px-2 py-4 text-center text-sm text-muted-foreground",children:n.jsx("p",{children:"No projects yet"})}):r.map(f=>n.jsxs("div",{className:"relative flex items-center",children:[n.jsx(et,{value:f.id,className:"flex-1 pr-10",children:n.jsx("span",{className:"truncate",title:`${f.name} - ${f.path}`,children:f.name})}),n.jsx("button",{type:"button",className:"absolute right-2 flex h-6 w-6 items-center justify-center rounded-md hover:bg-destructive/10 transition-colors",onPointerDown:x=>{x.stopPropagation()},onClick:x=>d(f.id,x),children:n.jsx(or,{className:"h-3.5 w-3.5 text-destructive"})})]},f.id)),n.jsx(Rn,{className:"my-1"}),n.jsx(et,{value:"__add_new__",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fs,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:"Add Project..."})]})})]})]}),m&&n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:"truncate block text-xs text-muted-foreground",title:m.path,children:m.path})}),n.jsx(H1,{open:i,onOpenChange:a,onProjectAdded:(f,x)=>{t(f.id),s?.(f,x)}})]})}function iAe(e,t){const[s,r]=p.useState([]),[i,a]=p.useState(!1),[o,l]=p.useState(null);return p.useEffect(()=>{(async()=>{if(t){a(!0),l(null);try{const d=await window.electronAPI.getLinearTeams(e);d.success&&d.data?r(d.data):l(d.error||"Failed to load teams")}catch(d){l(d instanceof Error?d.message:"Unknown error")}finally{a(!1)}}})()},[t,e]),{teams:s,isLoadingTeams:i,error:o,setError:l}}function aAe(e,t){const[s,r]=p.useState([]),[i,a]=p.useState(!1),[o,l]=p.useState(null);return p.useEffect(()=>{(async()=>{if(!t){r([]);return}a(!0),l(null);try{const d=await window.electronAPI.getLinearProjects(e,t);d.success&&d.data?r(d.data):l(d.error||"Failed to load projects")}catch(d){l(d instanceof Error?d.message:"Unknown error")}finally{a(!1)}})()},[e,t]),{projects:s,isLoadingProjects:i,error:o,setError:l}}function oAe(e,t,s,r){const[i,a]=p.useState([]),[o,l]=p.useState(!1),[u,d]=p.useState(null),m=p.useRef(r);return m.current=r,p.useEffect(()=>{(async()=>{if(!t){a([]);return}l(!0),d(null);try{const x=await window.electronAPI.getLinearIssues(e,t,s||void 0);x.success&&x.data?(a(x.data),m.current?.()):d(x.error||"Failed to load issues")}catch(x){d(x instanceof Error?x.message:"Unknown error")}finally{l(!1)}})()},[e,t,s]),{issues:i,isLoadingIssues:o,error:u,setError:d}}function lAe(e,t,s){const r=p.useMemo(()=>e.filter(a=>{if(t){const o=t.toLowerCase(),l=a.title.toLowerCase().includes(o),u=a.identifier.toLowerCase().includes(o),d=a.description?.toLowerCase().includes(o);if(!l&&!u&&!d)return!1}return!(s!=="all"&&a.state.type!==s)}),[e,t,s]),i=p.useMemo(()=>{const a=new Set(e.map(o=>o.state.type));return Array.from(a)},[e]);return{filteredIssues:r,uniqueStateTypes:i}}function cAe(e){const[t,s]=p.useState(new Set),r=p.useCallback(u=>{s(d=>{const m=new Set(d);return m.has(u)?m.delete(u):m.add(u),m})},[]),i=p.useCallback(()=>{s(new Set(e.map(u=>u.id)))},[e]),a=p.useCallback(()=>{s(new Set)},[]),o=p.useMemo(()=>e.length>0&&e.every(u=>t.has(u.id)),[e,t]),l=p.useMemo(()=>e.some(u=>t.has(u.id))&&!o,[e,t,o]);return{selectedIssueIds:t,setSelectedIssueIds:s,selectionControls:{toggleIssue:r,selectAll:i,deselectAll:a,isAllSelected:o,isSomeSelected:l}}}function dAe(e,t){const[s,r]=p.useState(!1),[i,a]=p.useState(null),[o,l]=p.useState(null),u=p.useCallback(async d=>{if(d.size!==0){r(!0),l(null),a(null);try{const m=await window.electronAPI.importLinearIssues(e,Array.from(d));m.success&&m.data?(a(m.data),m.data.success&&t?.(m.data)):l(m.error||"Failed to import issues")}catch(m){l(m instanceof Error?m.message:"Unknown error")}finally{r(!1)}}},[e,t]);return{isImporting:s,importResult:i,error:o,setError:l,handleImport:u}}function uAe({projectId:e,open:t,onImportComplete:s}){const[r,i]=p.useState(""),[a,o]=p.useState(""),[l,u]=p.useState(""),[d,m]=p.useState("all"),{teams:f,isLoadingTeams:x,error:v,setError:y}=iAe(e,t);p.useEffect(()=>{f.length===1&&!r&&i(f[0].id)},[f,r]);const{projects:w,isLoadingProjects:S,error:C,setError:_}=aAe(e,r),{issues:j,isLoadingIssues:T,error:E,setError:A}=oAe(e,r,a,()=>{P(new Set)}),{filteredIssues:R,uniqueStateTypes:D}=lAe(j,l,d),{selectedIssueIds:M,setSelectedIssueIds:P,selectionControls:O}=cAe(R),{isImporting:F,importResult:$,error:z,setError:H,handleImport:I}=dAe(e,s),V=z||E||C||v,B=p.useCallback(Y=>{H(Y),A(Y),_(Y),y(Y)},[H,A,_,y]),K=p.useCallback(()=>{const Y=r;i(""),setTimeout(()=>i(Y),0)},[r]),L=p.useCallback(()=>{I(M)},[I,M]),G=p.useCallback(()=>{i(""),o(""),P(new Set),u(""),m("all"),B(null)},[B,P]);return{teams:f,projects:w,issues:R,uniqueStateTypes:D,selectedTeamId:r,selectedProjectId:a,selectedIssueIds:M,selectionControls:O,searchQuery:l,filterState:d,isLoadingTeams:x,isLoadingProjects:S,isLoadingIssues:T,isImporting:F,error:V,setError:B,importResult:$,setSelectedTeamId:i,setSelectedProjectId:o,setSearchQuery:u,setFilterState:m,handleRefresh:K,handleImport:L,resetState:G}}function hAe({importResult:e,onClose:t}){return n.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-4 flex items-center gap-3",children:[n.jsx(Xe,{className:"h-5 w-5 text-success shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-sm font-medium text-success",children:["Successfully imported ",e.imported," task",e.imported!==1?"s":""]}),n.jsx("p",{className:"text-xs text-success/80 mt-1",children:"Tasks are being processed. Check your Kanban board for progress."})]}),n.jsx(W,{variant:"outline",size:"sm",onClick:t,children:"Close"})]})}function mAe({error:e}){return n.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-destructive shrink-0"}),n.jsx("p",{className:"text-sm text-destructive",children:e})]})}function fAe({teams:e,projects:t,selectedTeamId:s,selectedProjectId:r,isLoadingTeams:i,isLoadingProjects:a,onTeamChange:o,onProjectChange:l}){return n.jsxs("div",{className:"flex gap-4 shrink-0",children:[n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Team"}),n.jsxs(_t,{value:s,onValueChange:o,disabled:i,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:i?"Loading...":"Select a team"})}),n.jsx(wt,{children:e.map(u=>n.jsxs(et,{value:u.id,children:[u.name," (",u.key,")"]},u.id))})]})]}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Project (Optional)"}),n.jsxs(_t,{value:r||"__all__",onValueChange:u=>l(u==="__all__"?"":u),disabled:a||!s,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:a?"Loading...":"All projects"})}),n.jsxs(wt,{children:[n.jsx(et,{value:"__all__",children:"All projects"}),t.map(u=>n.jsx(et,{value:u.id,children:u.name},u.id))]})]})]})]})}function pAe({searchQuery:e,filterState:t,uniqueStateTypes:s,onSearchChange:r,onFilterChange:i}){return n.jsxs("div",{className:"flex gap-3 items-center shrink-0",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:"Search tasks...",value:e,onChange:a=>r(a.target.value),className:"pl-9"})]}),n.jsxs(_t,{value:t,onValueChange:i,children:[n.jsxs(yt,{className:"w-[150px]",children:[n.jsx(Wb,{className:"h-4 w-4 mr-2"}),n.jsx(Nt,{})]}),n.jsxs(wt,{children:[n.jsx(et,{value:"all",children:"All states"}),s.map(a=>n.jsx(et,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))]})]})]})}function gAe({isAllSelected:e,isSomeSelected:t,selectedCount:s,filteredCount:r,isLoadingIssues:i,onSelectAll:a,onDeselectAll:o,onRefresh:l}){return n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:e?o:a,className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[e?n.jsx(_d,{className:"h-4 w-4 text-primary"}):t?n.jsx(Qb,{className:"h-4 w-4"}):n.jsx(jo,{className:"h-4 w-4"}),e?"Deselect all":"Select all"]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[s," of ",r," selected"]})]}),n.jsxs("button",{onClick:l,className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground",disabled:i,children:[n.jsx(We,{className:`h-3 w-3 ${i?"animate-spin":""}`}),"Refresh"]})]})}const xAe={0:"bg-muted text-muted-foreground",1:"bg-destructive/10 text-destructive",2:"bg-warning/10 text-warning",3:"bg-info/10 text-info",4:"bg-muted text-muted-foreground"},vAe={backlog:"bg-muted text-muted-foreground",unstarted:"bg-info/10 text-info",started:"bg-warning/10 text-warning",completed:"bg-success/10 text-success",canceled:"bg-destructive/10 text-destructive"};function bAe({issue:e,isSelected:t,onToggle:s}){const[r,i]=p.useState(!1);return n.jsx("div",{className:`
        rounded-lg border border-border p-3 cursor-pointer transition-colors
        ${t?"bg-primary/5 border-primary/30":"hover:bg-muted/50"}
      `,onClick:()=>s(e.id),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"mt-0.5",children:t?n.jsx(_d,{className:"h-5 w-5 text-primary"}):n.jsx(jo,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:e.identifier}),n.jsx(oe,{variant:"secondary",className:`text-xs ${vAe[e.state.type]||""}`,children:e.state.name}),n.jsx(oe,{variant:"secondary",className:`text-xs ${xAe[e.priority]||""}`,children:e.priorityLabel}),e.labels.slice(0,2).map(a=>n.jsx(oe,{variant:"outline",className:"text-xs",style:{borderColor:a.color,color:a.color},children:a.name},a.id)),e.labels.length>2&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",e.labels.length-2," more"]})]}),n.jsx("h4",{className:"text-sm font-medium text-foreground mt-1 line-clamp-2",children:e.title}),e.description&&n.jsx("button",{onClick:a=>{a.stopPropagation(),i(!r)},className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground mt-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx(Hi,{className:"h-3 w-3"}),"Hide description"]}):n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-3 w-3"}),"Show description"]})}),r&&e.description&&n.jsx("div",{className:"mt-2 text-xs text-muted-foreground bg-muted/50 rounded p-2 max-h-32 overflow-auto",children:e.description}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[e.assignee&&n.jsxs("span",{children:["Assigned to ",e.assignee.name]}),e.project&&n.jsxs("span",{children:["Project: ",e.project.name]}),n.jsxs("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"flex items-center gap-1 hover:text-primary",children:[n.jsx(Zt,{className:"h-3 w-3"}),"View in Linear"]})]})]})]})})}function yAe({issues:e,selectedIssueIds:t,isLoadingIssues:s,selectedTeamId:r,searchQuery:i,filterState:a,onToggleIssue:o}){return s?n.jsx(zt,{className:"flex-1 -mx-6 px-6 min-h-0",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})})}):r?e.length===0?n.jsx(zt,{className:"flex-1 -mx-6 px-6 min-h-0",children:n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:n.jsx("p",{className:"text-sm",children:i||a!=="all"?"No issues match your filters":"No issues found"})})}):n.jsx(zt,{className:"flex-1 -mx-6 px-6 min-h-0",children:n.jsx("div",{className:"space-y-2 py-2",children:e.map(l=>n.jsx(bAe,{issue:l,isSelected:t.has(l.id),onToggle:o},l.id))})}):n.jsx(zt,{className:"flex-1 -mx-6 px-6 min-h-0",children:n.jsx("div",{className:"text-center py-12 text-muted-foreground",children:n.jsx("p",{className:"text-sm",children:"Select a team to view issues"})})})}function wAe({projectId:e,open:t,onOpenChange:s,onImportComplete:r}){const{teams:i,projects:a,issues:o,uniqueStateTypes:l,selectedTeamId:u,selectedProjectId:d,selectedIssueIds:m,selectionControls:f,searchQuery:x,filterState:v,isLoadingTeams:y,isLoadingProjects:w,isLoadingIssues:S,isImporting:C,error:_,importResult:j,setSelectedTeamId:T,setSelectedProjectId:E,setSearchQuery:A,setFilterState:R,handleRefresh:D,handleImport:M,resetState:P}=uAe({projectId:e,open:t,onImportComplete:r}),O=F=>{F||P(),s(F)};return n.jsx($s,{open:t,onOpenChange:O,children:n.jsxs(Bs,{className:"sm:max-w-[700px] max-h-[85vh] flex flex-col",children:[n.jsxs(os,{className:"shrink-0",children:[n.jsxs(ls,{className:"flex items-center gap-2 text-foreground",children:[n.jsx(jn,{className:"h-5 w-5"}),"Import Linear Tasks"]}),n.jsx(ws,{children:"Select tasks from Linear to import into AutoBuild"})]}),j?.success&&n.jsx(hAe,{importResult:j,onClose:()=>O(!1)}),_&&n.jsx(mAe,{error:_}),!j?.success&&n.jsxs(n.Fragment,{children:[n.jsx(fAe,{teams:i,projects:a,selectedTeamId:u,selectedProjectId:d,isLoadingTeams:y,isLoadingProjects:w,onTeamChange:T,onProjectChange:E}),n.jsx(pAe,{searchQuery:x,filterState:v,uniqueStateTypes:l,onSearchChange:A,onFilterChange:R}),o.length>0&&n.jsx(gAe,{isAllSelected:f.isAllSelected,isSomeSelected:f.isSomeSelected,selectedCount:m.size,filteredCount:o.length,isLoadingIssues:S,onSelectAll:f.selectAll,onDeselectAll:f.deselectAll,onRefresh:D}),n.jsx(yAe,{issues:o,selectedIssueIds:m,isLoadingIssues:S,selectedTeamId:u,searchQuery:x,filterState:v,onToggleIssue:f.toggleIssue})]}),n.jsxs(As,{className:"shrink-0",children:[n.jsx(W,{variant:"outline",onClick:()=>O(!1),children:j?.success?"Done":"Cancel"}),!j?.success&&n.jsx(W,{onClick:M,disabled:m.size===0||C,children:C?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),"Import ",m.size," Task",m.size!==1?"s":""]})})]})]})})}const lp=Gn((e,t)=>({issues:[],isLoading:!1,isLoadingMore:!1,error:null,selectedIssueNumber:null,filterState:"open",currentPage:1,hasMore:!0,setIssues:s=>e({issues:s,error:null}),appendIssues:s=>e(r=>{const i=new Set(r.issues.map(o=>o.number)),a=s.filter(o=>!i.has(o.number));return{issues:[...r.issues,...a]}}),addIssue:s=>e(r=>({issues:[s,...r.issues.filter(i=>i.number!==s.number)]})),updateIssue:(s,r)=>e(i=>({issues:i.issues.map(a=>a.number===s?{...a,...r}:a)})),setLoading:s=>e({isLoading:s}),setLoadingMore:s=>e({isLoadingMore:s}),setError:s=>e({error:s,isLoading:!1,isLoadingMore:!1}),selectIssue:s=>e({selectedIssueNumber:s}),setFilterState:s=>e({filterState:s}),setHasMore:s=>e({hasMore:s}),setCurrentPage:s=>e({currentPage:s}),clearIssues:()=>e({issues:[],selectedIssueNumber:null,error:null,currentPage:1,hasMore:!0}),resetPagination:()=>e({currentPage:1,hasMore:!0,selectedIssueNumber:null}),getSelectedIssue:()=>{const{issues:s,selectedIssueNumber:r}=t();return s.find(i=>i.number===r)||null},getFilteredIssues:()=>{const{issues:s,filterState:r}=t();return r==="all"?s:s.filter(i=>i.state===r)},getOpenIssuesCount:()=>{const{issues:s}=t();return s.filter(r=>r.state==="open").length}}));async function jv(e,t,s=!1){const r=lp.getState();r.setLoading(!0),r.setError(null),r.resetPagination();try{const i=await window.electronAPI.getGitHubIssues(e,t,1,s);i.success&&i.data?(r.setIssues(i.data.issues),r.setHasMore(i.data.hasMore),r.setCurrentPage(1)):r.setError(i.error||"Failed to load GitHub issues")}catch(i){r.setError(i instanceof Error?i.message:"Unknown error")}finally{r.setLoading(!1)}}async function jAe(e,t){const s=lp.getState();if(s.isLoadingMore||s.isLoading||!s.hasMore)return;const r=s.filterState,i=s.currentPage+1;s.setLoadingMore(!0);try{const a=await window.electronAPI.getGitHubIssues(e,t,i,!1);if(lp.getState().filterState!==r)return;a.success&&a.data?(s.appendIssues(a.data.issues),s.setHasMore(a.data.hasMore),s.setCurrentPage(i)):s.setError(a.error||"Failed to load more issues")}catch(a){s.setError(a instanceof Error?a.message:"Unknown error")}finally{s.setLoadingMore(!1)}}async function SAe(e,t){return jv(e,t,!0)}const Ca=Gn((e,t)=>({prReviews:{},startPRReview:(s,r)=>e(i=>{const a=`${s}:${r}`,o=i.prReviews[a];return{prReviews:{...i.prReviews,[a]:{prNumber:r,projectId:s,isReviewing:!0,startedAt:new Date().toISOString(),progress:null,result:null,previousResult:null,error:null,newCommitsCheck:o?.newCommitsCheck??null}}}}),startFollowupReview:(s,r)=>e(i=>{const a=`${s}:${r}`,o=i.prReviews[a];return o?.result||console.warn(`[PRReviewStore] Starting follow-up review for PR #${r} without a previous result. This may indicate the follow-up was triggered incorrectly.`),{prReviews:{...i.prReviews,[a]:{prNumber:r,projectId:s,isReviewing:!0,startedAt:new Date().toISOString(),progress:null,result:null,previousResult:o?.result??null,error:null,newCommitsCheck:o?.newCommitsCheck??null}}}}),setPRReviewProgress:(s,r)=>e(i=>{const a=`${s}:${r.prNumber}`,o=i.prReviews[a];return{prReviews:{...i.prReviews,[a]:{prNumber:r.prNumber,projectId:s,isReviewing:!0,startedAt:o?.startedAt??null,progress:r,result:o?.result??null,previousResult:o?.previousResult??null,error:null,newCommitsCheck:o?.newCommitsCheck??null}}}}),setPRReviewResult:(s,r,i)=>e(a=>{const o=`${s}:${r.prNumber}`,l=a.prReviews[o];return{prReviews:{...a.prReviews,[o]:{prNumber:r.prNumber,projectId:s,isReviewing:!1,startedAt:l?.startedAt??null,progress:null,result:r,previousResult:l?.previousResult??null,error:r.error??null,newCommitsCheck:i?.preserveNewCommitsCheck?l?.newCommitsCheck??null:null}}}}),setPRReviewError:(s,r,i)=>e(a=>{const o=`${s}:${r}`,l=a.prReviews[o];return{prReviews:{...a.prReviews,[o]:{prNumber:r,projectId:s,isReviewing:!1,startedAt:l?.startedAt??null,progress:null,result:l?.result??null,previousResult:l?.previousResult??null,error:i,newCommitsCheck:l?.newCommitsCheck??null}}}}),setNewCommitsCheck:(s,r,i)=>e(a=>{const o=`${s}:${r}`,l=a.prReviews[o];return l?{prReviews:{...a.prReviews,[o]:{...l,newCommitsCheck:i}}}:{prReviews:{...a.prReviews,[o]:{prNumber:r,projectId:s,isReviewing:!1,startedAt:null,progress:null,result:null,previousResult:null,error:null,newCommitsCheck:i}}}}),clearPRReview:(s,r)=>e(i=>{const a=`${s}:${r}`,{[a]:o,...l}=i.prReviews;return{prReviews:l}}),getPRReviewState:(s,r)=>{const{prReviews:i}=t(),a=`${s}:${r}`;return i[a]??null},getActivePRReviews:s=>{const{prReviews:r}=t();return Object.values(r).filter(i=>i.projectId===s&&i.isReviewing)}}));let E4=!1;function _Ae(){if(E4)return;const e=Ca.getState();window.electronAPI.github.onPRReviewProgress((t,s)=>{e.setPRReviewProgress(t,s)}),window.electronAPI.github.onPRReviewComplete((t,s)=>{e.setPRReviewResult(t,s)}),window.electronAPI.github.onPRReviewError((t,s)=>{e.setPRReviewError(t,s.prNumber,s.error)}),E4=!0}function NAe(e,t){Ca.getState().startPRReview(e,t),window.electronAPI.github.runPRReview(e,t)}function CAe(e,t){Ca.getState().startFollowupReview(e,t),window.electronAPI.github.runFollowupReview(e,t)}const GU=Gn(e=>({investigationStatus:{phase:"idle",progress:0,message:""},lastInvestigationResult:null,setInvestigationStatus:t=>e({investigationStatus:t}),setInvestigationResult:t=>e({lastInvestigationResult:t}),clearInvestigation:()=>e({investigationStatus:{phase:"idle",progress:0,message:""},lastInvestigationResult:null})}));function kAe(e,t,s){const r=GU.getState();r.setInvestigationStatus({phase:"fetching",issueNumber:t,progress:0,message:"Starting investigation..."}),r.setInvestigationResult(null),window.electronAPI.investigateGitHubIssue(e,t,s)}const VU=Gn((e,t)=>({syncStatus:null,connectionError:null,setSyncStatus:s=>e({syncStatus:s,connectionError:null}),setConnectionError:s=>e({connectionError:s}),clearSyncStatus:()=>e({syncStatus:null,connectionError:null}),isConnected:()=>{const{syncStatus:s}=t();return s?.connected??!1},getRepoFullName:()=>{const{syncStatus:s}=t();return s?.repoFullName??null}}));async function HN(e){const t=VU.getState();try{const s=await window.electronAPI.checkGitHubConnection(e);return s.success&&s.data?(t.setSyncStatus(s.data),s.data):(t.setConnectionError(s.error||"Failed to check GitHub connection"),null)}catch(s){return t.setConnectionError(s instanceof Error?s.message:"Unknown error"),null}}function AAe(){_Ae()}function EAe(e,t){const[s,r]=p.useState(e.settings),[i,a]=p.useState(!1),[o,l]=p.useState(null),[u,d]=p.useState(null),[m,f]=p.useState(!1),[x,v]=p.useState(!1),[y,w]=p.useState(null),[S,C]=p.useState(!1),[_,j]=p.useState(null),[T,E]=p.useState(!1),[A,R]=p.useState(!1),[D,M]=p.useState(!1),[P,O]=p.useState(!1),[F,$]=p.useState({claude:!0,linear:!1,github:!1,graphiti:!1}),[z,H]=p.useState(!1),[I,V]=p.useState(null),[B,K]=p.useState(!1),[L,G]=p.useState(!1),[Y,q]=p.useState(null),[Q,se]=p.useState(!1),[te,ee]=p.useState(!1),[pe,fe]=p.useState("checking"),[re,Z]=p.useState(!1),[ie,ce]=p.useState(null),[He,tt]=p.useState(!1);return p.useEffect(()=>{r(e.settings)},[e]),p.useEffect(()=>{(async()=>{if(t&&e.autoBuildPath){f(!0);const je=await JD(e.id);d(je),f(!1)}})()},[t,e.id,e.autoBuildPath]),p.useEffect(()=>{(async()=>{if(t&&e.autoBuildPath){C(!0),j(null);try{const je=await window.electronAPI.getProjectEnv(e.id);je.success&&je.data?w(je.data):j(je.error||"Failed to load environment config")}catch(je){j(je instanceof Error?je.message:"Unknown error")}finally{C(!1)}}})()},[t,e.id,e.autoBuildPath]),p.useEffect(()=>{(async()=>{if(t&&e.autoBuildPath){ee(!0);try{const je=await window.electronAPI.checkClaudeAuth(e.id);je.success&&je.data?fe(je.data.authenticated?"authenticated":"not_authenticated"):fe("error")}catch{fe("error")}finally{ee(!1)}}})()},[t,e.id,e.autoBuildPath]),p.useEffect(()=>{const De=async()=>{if(!y?.linearEnabled||!y.linearApiKey){ce(null);return}tt(!0);try{const je=await window.electronAPI.checkLinearConnection(e.id);je.success&&je.data&&ce(je.data)}catch{ce({connected:!1,error:"Failed to check connection"})}finally{tt(!1)}};y?.linearEnabled&&y.linearApiKey&&De()},[y?.linearEnabled,y?.linearApiKey,e.id]),p.useEffect(()=>{const De=async()=>{if(!y?.githubEnabled||!y.githubToken||!y.githubRepo){V(null);return}K(!0);try{const je=await HN(e.id);je&&V(je)}catch{V({connected:!1,error:"Failed to check connection"})}finally{K(!1)}};y?.githubEnabled&&y.githubToken&&y.githubRepo&&De()},[y?.githubEnabled,y?.githubToken,y?.githubRepo,e.id]),p.useEffect(()=>{const De=async()=>{if(!y?.gitlabEnabled||!y.gitlabToken||!y.gitlabProject){q(null);return}se(!0);try{const je=await window.electronAPI.checkGitLabConnection(e.id);je.success&&je.data&&q(je.data)}catch{q({connected:!1,error:"Failed to check connection"})}finally{se(!1)}};y?.gitlabEnabled&&y.gitlabToken&&y.gitlabProject&&De()},[y?.gitlabEnabled,y?.gitlabToken,y?.gitlabProject,e.id]),{settings:s,setSettings:r,isSaving:i,error:o,setError:l,versionInfo:u,isCheckingVersion:m,isUpdating:x,envConfig:y,setEnvConfig:w,isLoadingEnv:S,envError:_,setEnvError:j,isSavingEnv:T,updateEnvConfig:async De=>{if(y){const je={...y,...De};try{const Ce=await window.electronAPI.updateProjectEnv(e.id,je);Ce.success||console.error("[useProjectSettings] Failed to auto-save env config:",Ce.error)}catch(Ce){console.error("[useProjectSettings] Error auto-saving env config:",Ce)}w(je)}},showClaudeToken:A,setShowClaudeToken:R,showLinearKey:D,setShowLinearKey:M,showOpenAIKey:P,setShowOpenAIKey:O,showGitHubToken:z,setShowGitHubToken:H,expandedSections:F,toggleSection:De=>{$(je=>({...je,[De]:!je[De]}))},gitHubConnectionStatus:I,isCheckingGitHub:B,showGitLabToken:L,setShowGitLabToken:G,gitLabConnectionStatus:Y,isCheckingGitLab:Q,isCheckingClaudeAuth:te,claudeAuthStatus:pe,setClaudeAuthStatus:fe,showLinearImportModal:re,setShowLinearImportModal:Z,linearConnectionStatus:ie,isCheckingLinear:He,handleInitialize:async()=>{v(!0),l(null);try{const De=await $1(e.id);if(De?.success){const je=await JD(e.id);d(je);const Ce=await window.electronAPI.getProjectEnv(e.id);Ce.success&&Ce.data&&w(Ce.data)}else l(De?.error||"Failed to initialize")}catch(De){l(De instanceof Error?De.message:"Unknown error")}finally{v(!1)}},handleSaveEnv:async()=>{if(y){E(!0),j(null);try{const De=await window.electronAPI.updateProjectEnv(e.id,y);De.success||j(De.error||"Failed to save environment config")}catch(De){j(De instanceof Error?De.message:"Unknown error")}finally{E(!1)}}},handleClaudeSetup:async()=>{ee(!0);try{const De=await window.electronAPI.invokeClaudeSetup(e.id);if(De.success&&De.data?.authenticated){fe("authenticated");const je=await window.electronAPI.getProjectEnv(e.id);je.success&&je.data&&w(je.data)}}catch{fe("error")}finally{ee(!1)}},handleSave:async De=>{a(!0),l(null);try{if(!await Nme(e.id,s)){l("Failed to save settings");return}if(y){const Ce=await window.electronAPI.updateProjectEnv(e.id,y);if(!Ce.success){l(Ce.error||"Failed to save environment config");return}}De()}catch(je){l(je instanceof Error?je.message:"Unknown error")}finally{a(!1)}}}}function TAe(){return n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(Xr,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Select a project to view and edit its settings"})]})}function PAe({error:e,envError:t}){const s=e||t;return s?n.jsx("div",{className:"mt-4 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:s}):null}function RAe({project:e,settings:t,setSettings:s,versionInfo:r,isCheckingVersion:i,isUpdating:a,handleInitialize:o}){const{t:l}=Re(["settings"]);return n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Auto-Build Integration"}),e.autoBuildPath?n.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xe,{className:"h-4 w-4 text-success"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Initialized"})]}),n.jsx("code",{className:"text-xs bg-background px-2 py-1 rounded",children:e.autoBuildPath})]}),i?n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(we,{className:"h-3 w-3 animate-spin"}),"Checking status..."]}):r&&n.jsx("div",{className:"text-xs text-muted-foreground",children:r.isInitialized?"Initialized":"Not initialized"})]}):n.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-warning mt-0.5 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Not Initialized"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Initialize Auto-Build to enable task creation and agent workflows."}),n.jsx(W,{size:"sm",className:"mt-3",onClick:o,disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Initializing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),"Initialize Auto-Build"]})})]})]})})]}),e.autoBuildPath&&n.jsxs(n.Fragment,{children:[n.jsx(Rn,{}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Agent Configuration"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"model",className:"text-sm font-medium text-foreground",children:"Model"}),n.jsxs(_t,{value:t.model,onValueChange:u=>s({...t,model:u}),children:[n.jsx(yt,{id:"model",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ca.map(u=>n.jsx(et,{value:u.value,children:u.label},u.value))})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(le,{className:"font-normal text-foreground",children:l("projectSections.general.useClaudeMd")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l("projectSections.general.useClaudeMdDescription")})]}),n.jsx(Kt,{checked:t.useClaudeMd??!0,onCheckedChange:u=>s({...t,useClaudeMd:u})})]})]}),n.jsx(Rn,{}),n.jsxs("section",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Notifications"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"font-normal text-foreground",children:"On Task Complete"}),n.jsx(Kt,{checked:t.notifications.onTaskComplete,onCheckedChange:u=>s({...t,notifications:{...t.notifications,onTaskComplete:u}})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"font-normal text-foreground",children:"On Task Failed"}),n.jsx(Kt,{checked:t.notifications.onTaskFailed,onCheckedChange:u=>s({...t,notifications:{...t.notifications,onTaskFailed:u}})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"font-normal text-foreground",children:"On Review Needed"}),n.jsx(Kt,{checked:t.notifications.onReviewNeeded,onCheckedChange:u=>s({...t,notifications:{...t.notifications,onReviewNeeded:u}})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"font-normal text-foreground",children:"Sound"}),n.jsx(Kt,{checked:t.notifications.sound,onCheckedChange:u=>s({...t,notifications:{...t.notifications,sound:u}})})]})]})]})]})]})}const pf={};function qS(e){delete pf[e]}const Zc=Gn((e,t)=>({downloads:{},startDownload:s=>e(r=>({downloads:{...r.downloads,[s]:{modelName:s,status:"starting",percentage:0}}})),updateProgress:(s,r)=>e(i=>{const a=i.downloads[s];return a?{downloads:{...i.downloads,[s]:{...a,...r,status:r.percentage!==void 0&&r.percentage>0?"downloading":a.status}}}:i}),completeDownload:s=>e(r=>{const i=r.downloads[s];return i?(qS(s),{downloads:{...r.downloads,[s]:{...i,status:"completed",percentage:100}}}):r}),failDownload:(s,r)=>e(i=>{const a=i.downloads[s];return a?(qS(s),{downloads:{...i.downloads,[s]:{...a,status:"failed",error:r}}}):i}),clearDownload:s=>e(r=>{qS(s);const{[s]:i,...a}=r.downloads;return{downloads:a}}),hasActiveDownloads:()=>{const s=t().downloads;return Object.values(s).some(r=>r.status==="starting"||r.status==="downloading")},getActiveDownloads:()=>{const s=t().downloads;return Object.values(s).filter(r=>r.status==="starting"||r.status==="downloading")}}));function DAe(){const e=s=>{const r=Zc.getState(),i=Date.now();pf[s.modelName]||(pf[s.modelName]={lastCompleted:s.completed,lastUpdate:i});const a=pf[s.modelName],o=i-a.lastUpdate,l=s.completed-a.lastCompleted;let u="",d="";if(o>100&&l>0){const m=l/o*1e3,f=s.total-s.completed,x=m>0?Math.ceil(f/m):0;m>1048576?u=`${(m/1048576).toFixed(1)} MB/s`:m>1024?u=`${(m/1024).toFixed(1)} KB/s`:m>0&&(u=`${Math.round(m)} B/s`),x>3600?d=`${Math.ceil(x/3600)}h remaining`:x>60?d=`${Math.ceil(x/60)}m remaining`:x>0&&(d=`${Math.ceil(x)}s remaining`)}pf[s.modelName]={lastCompleted:s.completed,lastUpdate:i},r.updateProgress(s.modelName,{percentage:s.percentage,speed:u||void 0,timeRemaining:d||void 0})};let t;return window.electronAPI?.onDownloadProgress&&(t=window.electronAPI.onDownloadProgress(e)),()=>{t&&t()}}const T4=[{name:"qwen3-embedding:4b",description:"Qwen3 4B - Balanced quality and speed",size_estimate:"3.1 GB",dim:2560,installed:!1,badge:"recommended"},{name:"qwen3-embedding:8b",description:"Qwen3 8B - Best embedding quality",size_estimate:"6.0 GB",dim:4096,installed:!1,badge:"quality"},{name:"qwen3-embedding:0.6b",description:"Qwen3 0.6B - Smallest and fastest",size_estimate:"494 MB",dim:1024,installed:!1,badge:"fast"},{name:"embeddinggemma",description:"Google's lightweight embedding model",size_estimate:"621 MB",dim:768,installed:!1},{name:"nomic-embed-text",description:"Popular general-purpose embeddings",size_estimate:"274 MB",dim:768,installed:!1}];function IAe({selectedModel:e,onModelSelect:t,disabled:s=!1,className:r}){const{t:i}=Re("onboarding"),[a,o]=p.useState(T4),[l,u]=p.useState(!0),[d,m]=p.useState(null),[f,x]=p.useState("checking"),[v,y]=p.useState(!1),[w,S]=p.useState(!1),C=p.useRef(null),_=Zc(P=>P.downloads),j=Zc(P=>P.startDownload),T=Zc(P=>P.completeDownload),E=Zc(P=>P.failDownload),A=async P=>{u(!0),m(null),x("checking");try{const O=await window.electronAPI.checkOllamaInstalled();if(P?.aborted)return;if(!O?.success||!O?.data?.installed){x("not-installed"),u(!1);return}const F=await window.electronAPI.checkOllamaStatus();if(P?.aborted)return;if(!F?.success||!F?.data?.running){x("not-running"),u(!1);return}x("available");const $=await window.electronAPI.listOllamaEmbeddingModels();if(P?.aborted)return;if($?.success&&$?.data?.embedding_models){const z=new Set,H=new Set,I=new Set;$.data.embedding_models.forEach(V=>{const B=V.name;z.add(B),B.endsWith(":latest")?H.add(B.replace(":latest","")):B.includes(":")||H.add(B);const K=B.match(/^([^:]+:[^-]+)/);K&&I.add(K[1])}),o(T4.map(V=>{const B=z.has(V.name)||H.has(V.name)||I.has(V.name);return{...V,installed:B}}))}}catch(O){P?.aborted||(console.error("Failed to check Ollama models:",O),m("Failed to check Ollama models"))}finally{P?.aborted||u(!1)}},R=async()=>{y(!0),m(null);try{const P=await window.electronAPI.installOllama();P?.success?(S(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{A()},5e3)):m(P?.error||"Failed to start Ollama installation")}catch(P){m(P instanceof Error?P.message:"Failed to install Ollama")}finally{y(!1)}};p.useEffect(()=>{const P=new AbortController;return A(P.signal),()=>{P.abort(),C.current&&clearTimeout(C.current)}},[]);const D=async P=>{j(P),m(null);try{const O=await window.electronAPI.pullOllamaModel(P);if(O?.success)T(P),await A();else{const F=O?.error||`Failed to download ${P}`;E(P,F),m(F)}}catch(O){const F=O instanceof Error?O.message:"Download failed";E(P,F),m(F)}},M=P=>{!P.installed||s||(e===P.name?t("",0):t(P.name,P.dim))};return l?n.jsxs("div",{className:J("flex items-center justify-center py-8",r),children:[n.jsx(we,{className:"h-5 w-5 animate-spin text-muted-foreground"}),n.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Checking Ollama models..."})]}):f==="not-installed"?n.jsx("div",{className:J("rounded-lg border border-info/30 bg-info/10 p-4",r),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(jn,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:i("ollama.notInstalled.title")}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i("ollama.notInstalled.description")}),w&&n.jsx("div",{className:"mt-3 p-2 rounded-md bg-success/10 border border-success/30",children:n.jsx("p",{className:"text-sm text-success",children:i("ollama.notInstalled.installSuccess")})}),d&&n.jsx("div",{className:"mt-3 p-2 rounded-md bg-destructive/10 border border-destructive/30",children:n.jsx("p",{className:"text-sm text-destructive",children:d})}),n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[n.jsx(W,{onClick:R,disabled:v,size:"sm",children:v?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-3.5 w-3.5 animate-spin mr-1.5"}),i("ollama.notInstalled.installing")]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"h-3.5 w-3.5 mr-1.5"}),i("ollama.notInstalled.installButton")]})}),n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>A(),children:[n.jsx(We,{className:"h-3.5 w-3.5 mr-1.5"}),i("ollama.notInstalled.retry")]}),n.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>window.electronAPI?.openExternal?.("https://ollama.com"),className:"text-muted-foreground",children:[n.jsx(Zt,{className:"h-3.5 w-3.5 mr-1.5"}),i("ollama.notInstalled.learnMore")]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:i("ollama.notInstalled.fallbackNote")})]})]})}):f==="not-running"?n.jsx("div",{className:J("rounded-lg border border-warning/30 bg-warning/10 p-4",r),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-warning",children:i("ollama.notRunning.title")}),n.jsx("p",{className:"text-sm text-warning/80 mt-1",children:i("ollama.notRunning.description")}),n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>A(),className:"mt-3",children:[n.jsx(We,{className:"h-3.5 w-3.5 mr-1.5"}),i("ollama.notRunning.retry")]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:i("ollama.notRunning.fallbackNote")})]})]})}):n.jsxs("div",{className:J("space-y-3",r),children:[d&&n.jsx("div",{className:"rounded-md border border-destructive/30 bg-destructive/10 p-3",children:n.jsx("p",{className:"text-sm text-destructive",children:d})}),n.jsx("div",{className:"space-y-2",children:a.map(P=>{const O=e===P.name,F=_[P.name],$=F?.status==="starting"||F?.status==="downloading",z=F;return n.jsxs("div",{className:J("rounded-lg border transition-colors",P.installed&&!s?"cursor-pointer hover:bg-accent/50":"cursor-default",O&&"border-primary bg-primary/5",!P.installed&&"bg-muted/30"),onClick:()=>M(P),children:[n.jsxs("div",{className:"flex items-center justify-between p-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:J("flex h-5 w-5 items-center justify-center rounded-full border-2 shrink-0",O?"border-primary bg-primary text-primary-foreground":P.installed?"border-muted-foreground/30":"border-muted-foreground/20 bg-muted/50"),children:O&&n.jsx(Pt,{className:"h-3 w-3"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:P.name}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",P.dim," dim)"]}),P.badge==="recommended"&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-primary/15 px-2 py-0.5 text-xs font-medium text-primary",children:"Recommended"}),P.badge==="quality"&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-violet-500/15 px-2 py-0.5 text-xs font-medium text-violet-600 dark:text-violet-400",children:"Highest Quality"}),P.badge==="fast"&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-amber-500/15 px-2 py-0.5 text-xs font-medium text-amber-600 dark:text-amber-400",children:"Fastest"}),P.installed&&n.jsx("span",{className:"inline-flex items-center rounded-full bg-success/10 px-2 py-0.5 text-xs text-success",children:"Installed"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:P.description})]})]}),!P.installed&&n.jsx(W,{variant:"outline",size:"sm",onClick:H=>{H.stopPropagation(),D(P.name)},disabled:$||s,className:"shrink-0",children:$?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-3.5 w-3.5 animate-spin mr-1.5"}),"Downloading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"h-3.5 w-3.5 mr-1.5"}),"Download",P.size_estimate&&n.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",P.size_estimate,")"]})]})})]}),$&&n.jsxs("div",{className:"px-3 pb-3 space-y-1.5",children:[n.jsx("div",{className:"w-full bg-muted rounded-full h-2 overflow-hidden",children:z&&z.percentage>0?n.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary via-primary to-primary/80 transition-all duration-300",style:{width:`${Math.max(0,Math.min(100,z.percentage))}%`}}):n.jsx("div",{className:"h-full w-1/4 rounded-full bg-gradient-to-r from-primary via-primary to-primary/80 animate-indeterminate"})}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium text-foreground",children:z&&z.percentage>0?`${Math.round(z.percentage)}%`:"Starting download..."}),n.jsxs("div",{className:"flex items-center gap-2",children:[z?.speed&&n.jsx("span",{children:z.speed}),z?.timeRemaining&&n.jsx("span",{className:"text-primary",children:z.timeRemaining})]})]})]})]},P.name)})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Select an installed model for semantic search. Memory works with keyword search even without embeddings."})]})}function MAe({envConfig:e,settings:t,setSettings:s,updateEnvConfig:r,showOpenAIKey:i,setShowOpenAIKey:a,expanded:o,onToggle:l}){const[u,d]=p.useState({openai:i,voyage:!1,google:!1,azure:!1});p.useEffect(()=>{d(y=>({...y,openai:i}))},[i]);const m=e?.graphitiProviderConfig?.embeddingProvider||"ollama",f=y=>{const w=!u[y];d(S=>({...S,[y]:w})),y==="openai"&&a(w)},x=(y,w)=>{r({graphitiProviderConfig:{...e?.graphitiProviderConfig,embeddingProvider:"ollama",ollamaEmbeddingModel:y,ollamaEmbeddingDim:w}})};if(!e)return null;const v=()=>m==="openai"?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(le,{className:"text-sm font-medium text-foreground",children:["OpenAI API Key ",e.openaiKeyIsGlobal?"(Override)":""]}),e.openaiKeyIsGlobal&&n.jsxs("span",{className:"flex items-center gap-1 text-xs text-info",children:[n.jsx(wn,{className:"h-3 w-3"}),"Using global key"]})]}),e.openaiKeyIsGlobal?n.jsx("p",{className:"text-xs text-muted-foreground",children:"Using key from App Settings. Enter a project-specific key below to override."}):n.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for OpenAI embeddings"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:u.openai?"text":"password",placeholder:e.openaiKeyIsGlobal?"Enter to override global key...":"sk-xxxxxxxx",value:e.openaiKeyIsGlobal?"":e.openaiApiKey||"",onChange:y=>r({openaiApiKey:y.target.value||void 0}),className:"pr-10"}),n.jsx("button",{type:"button",onClick:()=>f("openai"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":u.openai?"Hide OpenAI API key":"Show OpenAI API key",children:u.openai?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"OpenAI"})]})]}):m==="voyage"?n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Voyage AI API Key"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for Voyage AI embeddings"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:u.voyage?"text":"password",value:e.graphitiProviderConfig?.voyageApiKey||"",onChange:y=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"voyage",voyageApiKey:y.target.value||void 0}}),placeholder:"pa-xxxxxxxx",className:"pr-10"}),n.jsx("button",{type:"button",onClick:()=>f("voyage"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":u.voyage?"Hide Voyage AI API key":"Show Voyage AI API key",children:u.voyage?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://dash.voyageai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Voyage AI"})]}),n.jsxs("div",{className:"space-y-1 mt-3",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:"Embedding Model (optional)"}),n.jsx(Oe,{placeholder:"voyage-3",value:e.graphitiProviderConfig?.voyageEmbeddingModel||"",onChange:y=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"voyage",voyageEmbeddingModel:y.target.value||void 0}})})]})]}):m==="google"?n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Google AI API Key"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Required for Google AI embeddings"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:u.google?"text":"password",value:e.graphitiProviderConfig?.googleApiKey||"",onChange:y=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"google",googleApiKey:y.target.value||void 0}}),placeholder:"AIzaSy...",className:"pr-10"}),n.jsx("button",{type:"button",onClick:()=>f("google"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":u.google?"Hide Google API key":"Show Google API key",children:u.google?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Google AI Studio"})]})]}):m==="azure_openai"?n.jsxs("div",{className:"space-y-3 p-3 rounded-md bg-muted/50",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Azure OpenAI Configuration"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:"API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:u.azure?"text":"password",value:e.graphitiProviderConfig?.azureOpenaiApiKey||"",onChange:y=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"azure_openai",azureOpenaiApiKey:y.target.value||void 0}}),placeholder:"Azure API Key",className:"pr-10"}),n.jsx("button",{type:"button",onClick:()=>f("azure"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":u.azure?"Hide Azure OpenAI API key":"Show Azure OpenAI API key",children:u.azure?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:"Base URL"}),n.jsx(Oe,{placeholder:"https://your-resource.openai.azure.com",value:e.graphitiProviderConfig?.azureOpenaiBaseUrl||"",onChange:y=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"azure_openai",azureOpenaiBaseUrl:y.target.value||void 0}})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(le,{className:"text-xs text-muted-foreground",children:"Embedding Deployment Name"}),n.jsx(Oe,{placeholder:"text-embedding-ada-002",value:e.graphitiProviderConfig?.azureOpenaiEmbeddingDeployment||"",onChange:y=>r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:"azure_openai",azureOpenaiEmbeddingDeployment:y.target.value||void 0}})})]})]}):m==="ollama"?n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Select Embedding Model"}),n.jsx(IAe,{selectedModel:e.graphitiProviderConfig?.ollamaEmbeddingModel||"",onModelSelect:x})]}):null;return n.jsxs("section",{className:"space-y-3",children:[n.jsxs("button",{onClick:l,className:"w-full flex items-center justify-between text-sm font-semibold text-foreground hover:text-foreground/80",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oc,{className:"h-4 w-4"}),"Memory",n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${e.graphitiEnabled?"bg-success/10 text-success":"bg-muted text-muted-foreground"}`,children:e.graphitiEnabled?"Enabled":"Disabled"})]}),o?n.jsx(Hi,{className:"h-4 w-4"}):n.jsx(bt,{className:"h-4 w-4"})]}),o&&n.jsxs("div",{className:"space-y-4 pl-6 pt-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(le,{className:"font-normal text-foreground",children:"Enable Memory"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Persistent cross-session memory using LadybugDB (embedded database)"})]}),n.jsx(Kt,{checked:e.graphitiEnabled,onCheckedChange:y=>{r({graphitiEnabled:y}),s({...t,memoryBackend:y?"graphiti":"file"})}})]}),!e.graphitiEnabled&&n.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:n.jsx("p",{className:"text-xs text-muted-foreground",children:"Using file-based memory. Session insights are stored locally in JSON files. Enable Memory for persistent cross-session context with semantic search."})}),e.graphitiEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(le,{className:"font-normal text-foreground",children:"Enable Agent Memory Access"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow agents to search and add to the knowledge graph via MCP"})]}),n.jsx(Kt,{checked:t.graphitiMcpEnabled,onCheckedChange:y=>s({...t,graphitiMcpEnabled:y})})]}),t.graphitiMcpEnabled&&n.jsxs("div",{className:"space-y-2 ml-6",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Graphiti MCP Server URL"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL of the Graphiti MCP server for agent memory access"}),n.jsx(Oe,{placeholder:"http://localhost:8000/mcp/",value:t.graphitiMcpUrl||"",onChange:y=>s({...t,graphitiMcpUrl:y.target.value||void 0})})]}),n.jsx(Rn,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Embedding Provider"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Provider for semantic search (optional - keyword search works without)"}),n.jsxs(_t,{value:m,onValueChange:y=>{r({graphitiProviderConfig:{...e.graphitiProviderConfig,embeddingProvider:y}})},children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select embedding provider"})}),n.jsxs(wt,{children:[n.jsx(et,{value:"ollama",children:"Ollama (Local - Free)"}),n.jsx(et,{value:"openai",children:"OpenAI"}),n.jsx(et,{value:"voyage",children:"Voyage AI"}),n.jsx(et,{value:"google",children:"Google AI"}),n.jsx(et,{value:"azure_openai",children:"Azure OpenAI"})]})]})]}),v(),n.jsx(Rn,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Database Name"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Stored in ~/.auto-claude/memories/"}),n.jsx(Oe,{placeholder:"auto_claude_memory",value:e.graphitiDatabase||"",onChange:y=>r({graphitiDatabase:y.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Database Path (Optional)"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Custom storage location. Default: ~/.auto-claude/memories/"}),n.jsx(Oe,{placeholder:"~/.auto-claude/memories",value:e.graphitiDbPath||"",onChange:y=>r({graphitiDbPath:y.target.value||void 0})})]})]})]})]})}function LAe({envConfig:e,updateEnvConfig:t,showLinearKey:s,setShowLinearKey:r,linearConnectionStatus:i,isCheckingLinear:a,onOpenLinearImport:o}){return e?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(le,{className:"font-normal text-foreground",children:"Enable Linear Sync"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Create and update Linear issues automatically"})]}),n.jsx(Kt,{checked:e.linearEnabled,onCheckedChange:l=>t({linearEnabled:l})})]}),e.linearEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"API Key"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your API key from"," ",n.jsx("a",{href:"https://linear.app/settings/api",target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:"Linear Settings"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:s?"text":"password",placeholder:"lin_api_xxxxxxxx",value:e.linearApiKey||"",onChange:l=>t({linearApiKey:l.target.value}),className:"pr-10"}),n.jsx("button",{type:"button",onClick:()=>r(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:s?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]})]}),e.linearApiKey&&n.jsx(OAe,{isChecking:a,connectionStatus:i}),i?.connected&&n.jsx(FAe,{onOpenLinearImport:o}),n.jsx(Rn,{}),n.jsx(BAe,{enabled:e.linearRealtimeSync||!1,onToggle:l=>t({linearRealtimeSync:l})}),e.linearRealtimeSync&&n.jsx(zAe,{}),n.jsx(Rn,{}),n.jsx($Ae,{teamId:e.linearTeamId||"",projectId:e.linearProjectId||"",onTeamIdChange:l=>t({linearTeamId:l}),onProjectIdChange:l=>t({linearProjectId:l})})]})]}):null}function OAe({isChecking:e,connectionStatus:t}){return n.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Connection Status"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e?"Checking...":t?.connected?`Connected${t.teamName?` to ${t.teamName}`:""}`:t?.error||"Not connected"}),t?.connected&&t.issueCount!==void 0&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t.issueCount,"+ tasks available to import"]})]}),e?n.jsx(we,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t?.connected?n.jsx(Xe,{className:"h-4 w-4 text-success"}):n.jsx(Ke,{className:"h-4 w-4 text-warning"})]})})}function FAe({onOpenLinearImport:e}){return n.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(JR,{className:"h-5 w-5 text-info mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Import Existing Tasks"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select which Linear issues to import into AutoBuild as tasks."}),n.jsxs(W,{size:"sm",variant:"outline",className:"mt-2",onClick:e,children:[n.jsx(JR,{className:"h-4 w-4 mr-2"}),"Import Tasks from Linear"]})]})]})})}function BAe({enabled:e,onToggle:t}){return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Die,{className:"h-4 w-4 text-info"}),n.jsx(le,{className:"font-normal text-foreground",children:"Real-time Sync"})]}),n.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Automatically import new tasks created in Linear"})]}),n.jsx(Kt,{checked:e,onCheckedChange:t})]})}function zAe(){return n.jsx("div",{className:"rounded-lg border border-warning/30 bg-warning/5 p-3 ml-6",children:n.jsx("p",{className:"text-xs text-warning",children:"When enabled, new Linear issues will be automatically imported into AutoBuild. Make sure to configure your team/project filters below to control which issues are imported."})})}function $Ae({teamId:e,projectId:t,onTeamIdChange:s,onProjectIdChange:r}){return n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Team ID (Optional)"}),n.jsx(Oe,{placeholder:"Auto-detected",value:e,onChange:i=>s(i.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Project ID (Optional)"}),n.jsx(Oe,{placeholder:"Auto-created",value:t,onChange:i=>r(i.target.value)})]})]})}var HAe={};const UAe=HAe.DEBUG==="true";function Ht(e,t){UAe&&(t!==void 0?console.warn(`[GitHubOAuth] ${e}`,t):console.warn(`[GitHubOAuth] ${e}`))}const P4=300*1e3;function qU({onSuccess:e,onCancel:t}){const[s,r]=p.useState("checking"),[i,a]=p.useState(null),[o,l]=p.useState(!1),[u,d]=p.useState(),[m,f]=p.useState(),[x,v]=p.useState(null),[y,w]=p.useState(null),[S,C]=p.useState(!1),[_,j]=p.useState(!1),[T,E]=p.useState(!1),[A,R]=p.useState(!1),D=p.useRef(null),M=p.useRef(null),P=p.useRef(null),O=p.useRef(!1),F=p.useCallback(()=>{D.current&&(Ht("Clearing auth timeout"),clearTimeout(D.current),D.current=null)},[]);p.useEffect(()=>()=>{M.current&&clearTimeout(M.current),P.current&&clearTimeout(P.current)},[]);const $=p.useCallback(()=>{Ht("Authentication timeout triggered after 5 minutes"),R(!0),a("Authentication timed out. The authentication window was open for too long. Please try again."),r("error"),D.current=null},[]);p.useEffect(()=>{if(O.current){Ht("Skipping duplicate check (Strict Mode)");return}return O.current=!0,Ht("Component mounted, checking GitHub status..."),z(),()=>{F()}},[F]),p.useEffect(()=>{if(s!=="authenticating")return;Ht("Setting up device code event listener");const G=window.electronAPI.onGitHubAuthDeviceCode(Y=>{Ht("Received device code from main process:",{hasCode:!!Y.deviceCode,authUrl:Y.authUrl,browserOpened:Y.browserOpened}),Y.deviceCode&&v(Y.deviceCode),Y.authUrl&&w(Y.authUrl),C(Y.browserOpened)});return()=>{Ht("Cleaning up device code event listener"),G()}},[s]);const z=async()=>{Ht("checkGitHubStatus() called"),r("checking"),a(null);try{Ht("Calling checkGitHubCli...");const G=await window.electronAPI.checkGitHubCli();if(Ht("checkGitHubCli result:",G),!G.success){Ht("checkGitHubCli failed:",G.error),a(G.error||"Failed to check GitHub CLI"),r("error");return}if(!G.data?.installed){Ht("GitHub CLI not installed"),r("need-install"),l(!1);return}l(!0),d(G.data.version),Ht("GitHub CLI installed, version:",G.data.version),Ht("Calling checkGitHubAuth...");const Y=await window.electronAPI.checkGitHubAuth();Ht("checkGitHubAuth result:",Y),Y.success&&Y.data?.authenticated?(Ht("Already authenticated as:",Y.data.username),f(Y.data.username),await H()):(Ht("Not authenticated, showing auth prompt"),r("need-auth"))}catch(G){Ht("Error in checkGitHubStatus:",G),a(G instanceof Error?G.message:"Unknown error"),r("error")}},H=async()=>{Ht("fetchAndNotifyToken() called");try{Ht("Calling getGitHubToken...");const G=await window.electronAPI.getGitHubToken();Ht("getGitHubToken result:",{success:G.success,hasToken:!!G.data?.token,tokenLength:G.data?.token?.length,error:G.error}),G.success&&G.data?.token?(Ht("Token retrieved successfully, calling onSuccess with username:",m),r("success"),e(G.data.token,m)):(Ht("Failed to get token:",G.error),a(G.error||"Failed to get token"),r("error"))}catch(G){Ht("Error in fetchAndNotifyToken:",G),a(G instanceof Error?G.message:"Failed to get token"),r("error")}},I=async()=>{Ht("handleStartAuth() called"),r("authenticating"),a(null),v(null),w(null),C(!1),j(!1),E(!1),R(!1),F(),Ht(`Starting auth timeout (${P4/1e3/60} minutes)`),D.current=setTimeout($,P4);try{Ht("Calling startGitHubAuth...");const G=await window.electronAPI.startGitHubAuth();if(Ht("startGitHubAuth result:",G),F(),G.data?.deviceCode&&(Ht("Device code received:",G.data.deviceCode),v(G.data.deviceCode)),G.data?.authUrl&&(Ht("Auth URL received:",G.data.authUrl),w(G.data.authUrl)),G.data?.browserOpened!==void 0&&(Ht("Browser opened status:",G.data.browserOpened),C(G.data.browserOpened)),G.success&&G.data?.success)Ht("Auth successful, fetching token..."),await H();else{Ht("Auth failed:",G.error);const Y=G.error||"Authentication failed";a(Y),G.data?.fallbackUrl&&w(G.data.fallbackUrl),r("error")}}catch(G){F(),Ht("Error in handleStartAuth:",G),a(G instanceof Error?G.message:"Authentication failed"),r("error")}},V=()=>{Ht("Opening gh CLI install page"),window.open("https://cli.github.com/","_blank")},B=()=>{Ht("Retry clicked"),z()},K=async()=>{if(x){Ht("Copying device code to clipboard");try{await navigator.clipboard.writeText(x),j(!0),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>j(!1),2e3)}catch(G){Ht("Failed to copy device code:",G)}}},L=()=>{y&&(Ht("Opening auth URL manually:",y),window.open(y,"_blank"))};return Ht("Rendering with status:",s),n.jsxs("div",{className:"space-y-4",children:[s==="checking"&&n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),s==="need-install"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(Le,{className:"border border-warning/30 bg-warning/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(dr,{className:"h-6 w-6 text-warning shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"GitHub CLI Required"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"The GitHub CLI (gh) is required for OAuth authentication. This provides a secure way to authenticate without manually creating tokens."}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(W,{onClick:V,className:"gap-2",children:[n.jsx(Zt,{className:"h-4 w-4"}),"Install GitHub CLI"]}),n.jsx(W,{variant:"outline",onClick:B,children:"I've Installed It"})]})]})]})})}),n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[n.jsx("p",{className:"font-medium text-foreground mb-2",children:"Installation instructions:"}),n.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[n.jsxs("li",{children:["macOS: ",n.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded font-mono text-xs",children:"brew install gh"})]}),n.jsxs("li",{children:["Windows: ",n.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded font-mono text-xs",children:"winget install GitHub.cli"})]}),n.jsxs("li",{children:["Linux: Visit ",n.jsx("a",{href:"https://cli.github.com/",target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:"cli.github.com"})]})]})]})]})})})]}),s==="need-auth"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(qr,{className:"h-6 w-6 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Connect to GitHub"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the button below to authenticate with GitHub. This will open your browser where you can authorize the application."}),u&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Using GitHub CLI ",u]})]})]})})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs(W,{onClick:I,size:"lg",className:"gap-2",children:[n.jsx(qr,{className:"h-5 w-5"}),"Authenticate with GitHub"]})})]}),s==="authenticating"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(we,{className:"h-6 w-6 animate-spin text-info shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Authenticating..."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:S?"Please complete the authentication in your browser. This window will update automatically.":"Waiting for authentication flow to start..."})]})]})})}),x&&n.jsx(Le,{className:"border border-primary/30 bg-primary/5",children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Your one-time code"}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx("code",{className:"text-3xl font-mono font-bold tracking-widest text-primary px-4 py-2 bg-primary/10 rounded-lg",children:x}),n.jsx(W,{variant:"outline",size:"sm",onClick:K,className:"shrink-0",children:_?n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-1 text-success"}),"Copied"]}):n.jsxs(n.Fragment,{children:[n.jsx(sh,{className:"h-4 w-4 mr-1"}),"Copy"]})})]})]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[n.jsx("p",{children:S?"Enter this code in your browser to complete authentication.":"Copy this code, then open the link below to authenticate."}),!S&&y&&n.jsxs(W,{variant:"link",onClick:L,className:"text-info hover:text-info/80 p-0 h-auto gap-1",children:[n.jsx(Zt,{className:"h-4 w-4"}),"Open ",y]})]})]})})})]}),s==="success"&&n.jsx(Le,{className:"border border-success/30 bg-success/10",children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Xe,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-success",children:"Successfully Connected"}),n.jsx("p",{className:"text-sm text-success/80 mt-1",children:m?`Connected as ${m}`:"Your GitHub account is now connected"})]})]})})}),s==="error"&&i&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(Le,{className:`border ${A?"border-warning/30 bg-warning/10":"border-destructive/30 bg-destructive/10"}`,children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-3",children:[A?n.jsx(cr,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}):n.jsx(Ke,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:`text-lg font-medium ${A?"text-warning":"text-destructive"}`,children:A?"Authentication Timed Out":"Authentication Failed"}),n.jsx("p",{className:`text-sm mt-1 ${A?"text-warning/80":"text-destructive/80"}`,children:i})]})]})})}),y&&n.jsx(Le,{className:"border border-warning/30 bg-warning/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_r,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-base font-medium text-foreground",children:"Complete Authentication Manually"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"The browser couldn't be opened automatically. Please visit the URL below to complete authentication:"})]})]}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[n.jsx("code",{className:"text-sm font-mono text-foreground flex-1 break-all",children:y}),n.jsx(W,{variant:"outline",size:"sm",onClick:async()=>{try{await navigator.clipboard.writeText(y),E(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(()=>E(!1),2e3)}catch(G){Ht("Failed to copy URL:",G)}},className:"shrink-0",children:T?n.jsxs(n.Fragment,{children:[n.jsx(Pt,{className:"h-4 w-4 mr-1 text-success"}),"Copied"]}):n.jsxs(n.Fragment,{children:[n.jsx(sh,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),n.jsxs(W,{variant:"secondary",onClick:L,className:"gap-2",children:[n.jsx(Zt,{className:"h-4 w-4"}),"Open URL in Browser"]})]}),x&&n.jsx("div",{className:"pt-2 border-t border-warning/20",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:["When prompted, enter this code:"," ",n.jsx("code",{className:"font-mono font-bold text-primary px-2 py-0.5 bg-primary/10 rounded",children:x})]})})]})})}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(W,{onClick:I,variant:"outline",children:"Retry"}),t&&n.jsx(W,{onClick:t,variant:"ghost",children:"Cancel"})]})]}),s!=="error"&&s!=="success"&&t&&n.jsx("div",{className:"flex justify-center pt-2",children:n.jsx(W,{onClick:t,variant:"ghost",children:"Cancel"})})]})}function WU({value:e,onChange:t,placeholder:s,className:r}){const[i,a]=p.useState(!1);return n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:i?"text":"password",placeholder:s,value:e,onChange:o=>t(o.target.value),className:r||"pr-10"}),n.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:i?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]})}var GAe={};const VAe=GAe.DEBUG==="true";function Os(e,t){VAe&&(t!==void 0?console.warn(`[GitHubIntegration] ${e}`,t):console.warn(`[GitHubIntegration] ${e}`))}function qAe({envConfig:e,updateEnvConfig:t,showGitHubToken:s,setShowGitHubToken:r,gitHubConnectionStatus:i,isCheckingGitHub:a,projectPath:o,settings:l,setSettings:u}){const[d,m]=p.useState("manual"),[f,x]=p.useState(null),[v,y]=p.useState([]),[w,S]=p.useState(!1),[C,_]=p.useState(null),[j,T]=p.useState([]),[E,A]=p.useState(!1),[R,D]=p.useState(null);Os("Render - authMode:",d),Os("Render - projectPath:",o),Os("Render - envConfig:",e?{githubEnabled:e.githubEnabled,hasToken:!!e.githubToken,defaultBranch:e.defaultBranch}:null),p.useEffect(()=>{d==="oauth-success"&&O()},[d]),p.useEffect(()=>{Os(`useEffect[branches] - githubEnabled: ${e?.githubEnabled}, projectPath: ${o}`),e?.githubEnabled&&o?(Os("useEffect[branches] - Triggering fetchBranches"),P()):Os("useEffect[branches] - Skipping fetchBranches (conditions not met)")},[e?.githubEnabled,o]);const M=I=>{Os("handleBranchChange: Updating branch to:",I),u&&(u(V=>({...V,mainBranch:I})),Os("handleBranchChange: Updated settings.mainBranch")),t({defaultBranch:I}),Os("handleBranchChange: Updated envConfig.defaultBranch")},P=async()=>{if(!o){Os("fetchBranches: No projectPath, skipping");return}Os("fetchBranches: Starting with projectPath:",o),A(!0),D(null);try{Os("fetchBranches: Calling getGitBranches...");const I=await window.electronAPI.getGitBranches(o);if(Os("fetchBranches: getGitBranches result:",{success:I.success,dataType:typeof I.data,dataLength:Array.isArray(I.data)?I.data.length:"N/A",error:I.error}),I.success&&I.data){if(T(I.data),Os("fetchBranches: Loaded branches:",I.data.length),!l?.mainBranch&&!e?.defaultBranch){Os("fetchBranches: No branch set, auto-detecting...");const V=await window.electronAPI.detectMainBranch(o);Os("fetchBranches: detectMainBranch result:",V),V.success&&V.data&&(Os("fetchBranches: Auto-detected default branch:",V.data),M(V.data))}}else Os("fetchBranches: Failed -",I.error||"No data returned"),D(I.error||"Failed to load branches")}catch(I){Os("fetchBranches: Exception:",I),D(I instanceof Error?I.message:"Failed to load branches")}finally{A(!1)}},O=async()=>{Os("Fetching user repositories..."),S(!0),_(null);try{const I=await window.electronAPI.listGitHubUserRepos();Os("listGitHubUserRepos result:",I),I.success&&I.data?.repos?(y(I.data.repos),Os("Loaded repos:",I.data.repos.length)):_(I.error||"Failed to load repositories")}catch(I){Os("Error fetching repos:",I),_(I instanceof Error?I.message:"Failed to load repositories")}finally{S(!1)}};if(!e)return Os("No envConfig, returning null"),null;const F=(I,V)=>{Os("handleOAuthSuccess called with token length:",I.length),Os("OAuth username:",V),t({githubToken:I,githubAuthMethod:"oauth"}),x(V||null),m("oauth-success")},$=()=>{m("manual"),x(null)},z=()=>{m("oauth")},H=I=>{Os("Selected repo:",I),t({githubRepo:I})};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(le,{className:"font-normal text-foreground",children:"Enable GitHub Issues"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync issues from GitHub and create tasks automatically"})]}),n.jsx(Kt,{checked:e.githubEnabled,onCheckedChange:I=>t({githubEnabled:I})})]}),e.githubEnabled&&n.jsxs(n.Fragment,{children:[d==="oauth-success"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-lg border border-success/30 bg-success/10 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xe,{className:"h-5 w-5 text-success"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-success",children:"Connected via GitHub CLI"}),f&&n.jsxs("p",{className:"text-xs text-success/80 flex items-center gap-1 mt-0.5",children:[n.jsx(Qr,{className:"h-3 w-3"}),"Authenticated as ",f]})]})]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:$,className:"text-xs",children:"Use Different Token"})]})}),n.jsx(WAe,{repos:v,selectedRepo:e.githubRepo||"",isLoading:w,error:C,onSelect:H,onRefresh:O,onManualEntry:()=>m("manual")})]}),d==="oauth"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"GitHub Authentication"}),n.jsx(W,{variant:"ghost",size:"sm",onClick:$,children:"Use Manual Token"})]}),n.jsx(qU,{onSuccess:F,onCancel:$})]}),d==="manual"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Personal Access Token"}),n.jsxs(W,{variant:"outline",size:"sm",onClick:z,className:"gap-2",children:[n.jsx(sO,{className:"h-3 w-3"}),"Use OAuth Instead"]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Create a token with ",n.jsx("code",{className:"px-1 bg-muted rounded",children:"repo"})," scope from"," ",n.jsx("a",{href:"https://github.com/settings/tokens/new?scopes=repo&description=Auto-Build-UI",target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:"GitHub Settings"})]}),n.jsx(WU,{value:e.githubToken||"",onChange:I=>t({githubToken:I}),placeholder:"ghp_xxxxxxxx or github_pat_xxxxxxxx"})]}),n.jsx(KAe,{value:e.githubRepo||"",onChange:I=>t({githubRepo:I})})]}),e.githubToken&&e.githubRepo&&n.jsx(YAe,{isChecking:a,connectionStatus:i}),i?.connected&&n.jsx(XAe,{}),n.jsx(Rn,{}),o&&n.jsx(QAe,{branches:j,selectedBranch:l?.mainBranch||e.defaultBranch||"",isLoading:E,error:R,onSelect:M,onRefresh:P}),n.jsx(Rn,{}),n.jsx(ZAe,{enabled:e.githubAutoSync||!1,onToggle:I=>t({githubAutoSync:I})})]})]})}function WAe({repos:e,selectedRepo:t,isLoading:s,error:r,onSelect:i,onRefresh:a,onManualEntry:o}){const[l,u]=p.useState(!1),[d,m]=p.useState(""),f=e.filter(v=>v.fullName.toLowerCase().includes(d.toLowerCase())||v.description?.toLowerCase().includes(d.toLowerCase())),x=e.find(v=>v.fullName===t);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Repository"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(W,{variant:"ghost",size:"sm",onClick:a,disabled:s,className:"h-7 px-2",children:n.jsx(We,{className:`h-3 w-3 ${s?"animate-spin":""}`})}),n.jsx(W,{variant:"ghost",size:"sm",onClick:o,className:"h-7 text-xs",children:"Enter Manually"})]})]}),r&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive",children:[n.jsx(Ke,{className:"h-3 w-3"}),r]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-input rounded-md bg-background hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[s?n.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),"Loading repositories..."]}):t?n.jsxs("span",{className:"flex items-center gap-2",children:[x?.isPrivate?n.jsx(ll,{className:"h-3 w-3 text-muted-foreground"}):n.jsx(wn,{className:"h-3 w-3 text-muted-foreground"}),t]}):n.jsx("span",{className:"text-muted-foreground",children:"Select a repository..."}),n.jsx(bt,{className:`h-4 w-4 text-muted-foreground transition-transform ${l?"rotate-180":""}`})]}),l&&!s&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-border",children:n.jsx(Oe,{placeholder:"Search repositories...",value:d,onChange:v=>m(v.target.value),className:"h-8 text-sm",autoFocus:!0})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:f.length===0?n.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:d?"No matching repositories":"No repositories found"}):f.map(v=>n.jsxs("button",{type:"button",onClick:()=>{i(v.fullName),u(!1),m("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-start gap-2 ${v.fullName===t?"bg-accent":""}`,children:[v.isPrivate?n.jsx(ll,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}):n.jsx(wn,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:v.fullName}),v.description&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:v.description})]})]},v.fullName))})]})]}),t&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",n.jsx("code",{className:"px-1 bg-muted rounded",children:t})]})]})}function KAe({value:e,onChange:t}){return n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Repository"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Format: ",n.jsx("code",{className:"px-1 bg-muted rounded",children:"owner/repo"})," (e.g., facebook/react)"]}),n.jsx(Oe,{placeholder:"owner/repository",value:e,onChange:s=>t(s.target.value)})]})}function YAe({isChecking:e,connectionStatus:t}){return n.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Connection Status"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e?"Checking...":t?.connected?`Connected to ${t.repoFullName}`:t?.error||"Not connected"}),t?.connected&&t.repoDescription&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic",children:t.repoDescription})]}),e?n.jsx(we,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t?.connected?n.jsx(Xe,{className:"h-4 w-4 text-success"}):n.jsx(Ke,{className:"h-4 w-4 text-warning"})]})})}function XAe(){return n.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(qr,{className:"h-5 w-5 text-info mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Issues Available"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Access GitHub Issues from the sidebar to view, investigate, and create tasks from issues."})]})]})})}function ZAe({enabled:e,onToggle:t}){return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(We,{className:"h-4 w-4 text-info"}),n.jsx(le,{className:"font-normal text-foreground",children:"Auto-Sync on Load"})]}),n.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Automatically fetch issues when the project loads"})]}),n.jsx(Kt,{checked:e,onCheckedChange:t})]})}function QAe({branches:e,selectedBranch:t,isLoading:s,error:r,onSelect:i,onRefresh:a}){const[o,l]=p.useState(!1),[u,d]=p.useState(""),m=e.filter(f=>f.toLowerCase().includes(u.toLowerCase()));return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4 text-info"}),n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Default Branch"})]}),n.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:"Base branch for creating task worktrees"})]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:a,disabled:s,className:"h-7 px-2",children:n.jsx(We,{className:`h-3 w-3 ${s?"animate-spin":""}`})})]}),r&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive pl-6",children:[n.jsx(Ke,{className:"h-3 w-3"}),r]}),n.jsxs("div",{className:"relative pl-6",children:[n.jsxs("button",{type:"button",onClick:()=>l(!o),disabled:s,className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-input rounded-md bg-background hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[s?n.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),"Loading branches..."]}):t?n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-3 w-3 text-muted-foreground"}),t]}):n.jsx("span",{className:"text-muted-foreground",children:"Auto-detect (main/master)"}),n.jsx(bt,{className:`h-4 w-4 text-muted-foreground transition-transform ${o?"rotate-180":""}`})]}),o&&!s&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-border",children:n.jsx(Oe,{placeholder:"Search branches...",value:u,onChange:f=>d(f.target.value),className:"h-8 text-sm",autoFocus:!0})}),n.jsx("button",{type:"button",onClick:()=>{i(""),l(!1),d("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-center gap-2 ${t?"":"bg-accent"}`,children:n.jsx("span",{className:"text-sm text-muted-foreground italic",children:"Auto-detect (main/master)"})}),n.jsx("div",{className:"max-h-40 overflow-y-auto border-t border-border",children:m.length===0?n.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:u?"No matching branches":"No branches found"}):m.map(f=>n.jsxs("button",{type:"button",onClick:()=>{i(f),l(!1),d("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-center gap-2 ${f===t?"bg-accent":""}`,children:[n.jsx(an,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:f})]},f))})]})]}),t&&n.jsxs("p",{className:"text-xs text-muted-foreground pl-6",children:["All new tasks will branch from ",n.jsx("code",{className:"px-1 bg-muted rounded",children:t})]})]})}var JAe={};const e2e=JAe.DEBUG==="true";function ms(e,t){e2e&&(t!==void 0?console.warn(`[GitLabIntegration] ${e}`,t):console.warn(`[GitLabIntegration] ${e}`))}function t2e({envConfig:e,updateEnvConfig:t,showGitLabToken:s,setShowGitLabToken:r,gitLabConnectionStatus:i,isCheckingGitLab:a,projectPath:o,settings:l,setSettings:u}){const{t:d}=Re("gitlab"),[m,f]=p.useState("manual"),[x,v]=p.useState(null),[y,w]=p.useState([]),[S,C]=p.useState(!1),[_,j]=p.useState(null),[T,E]=p.useState([]),[A,R]=p.useState(!1),[D,M]=p.useState(null),[P,O]=p.useState(null),[F,$]=p.useState(null),[z,H]=p.useState(!1),[I,V]=p.useState(!1),[B,K]=p.useState(!1);ms("Render - authMode:",m),ms("Render - projectPath:",o),ms("Render - envConfig:",e?{gitlabEnabled:e.gitlabEnabled,hasToken:!!e.gitlabToken,defaultBranch:e.defaultBranch}:null),p.useEffect(()=>{m==="oauth-success"&&Y()},[m]),p.useEffect(()=>{(async()=>{H(!0);try{const Z=await window.electronAPI.checkGitLabCli();ms("checkGitLabCli result:",Z),Z.success&&Z.data?(O(Z.data.installed),$(Z.data.version||null)):O(!1)}catch(Z){ms("Error checking glab CLI:",Z),O(!1)}finally{H(!1)}})()},[]),p.useEffect(()=>{ms(`useEffect[branches] - gitlabEnabled: ${e?.gitlabEnabled}, projectPath: ${o}`),e?.gitlabEnabled&&o?(ms("useEffect[branches] - Triggering fetchBranches"),G()):ms("useEffect[branches] - Skipping fetchBranches (conditions not met)")},[e?.gitlabEnabled,o]);const L=re=>{ms("handleBranchChange: Updating branch to:",re),u&&(u(Z=>({...Z,mainBranch:re})),ms("handleBranchChange: Updated settings.mainBranch")),t({defaultBranch:re}),ms("handleBranchChange: Updated envConfig.defaultBranch")},G=async()=>{if(!o){ms("fetchBranches: No projectPath, skipping");return}ms("fetchBranches: Starting with projectPath:",o),R(!0),M(null);try{ms("fetchBranches: Calling getGitBranches...");const re=await window.electronAPI.getGitBranches(o);if(ms("fetchBranches: getGitBranches result:",{success:re.success,dataType:typeof re.data,dataLength:Array.isArray(re.data)?re.data.length:"N/A",error:re.error}),re.success&&re.data){if(E(re.data),ms("fetchBranches: Loaded branches:",re.data.length),!l?.mainBranch&&!e?.defaultBranch){ms("fetchBranches: No branch set, auto-detecting...");const Z=await window.electronAPI.detectMainBranch(o);ms("fetchBranches: detectMainBranch result:",Z),Z.success&&Z.data&&(ms("fetchBranches: Auto-detected default branch:",Z.data),L(Z.data))}}else ms("fetchBranches: Failed -",re.error||"No data returned"),M(re.error||"Failed to load branches")}catch(re){ms("fetchBranches: Exception:",re),M(re instanceof Error?re.message:"Failed to load branches")}finally{R(!1)}},Y=async()=>{ms("Fetching user projects..."),C(!0),j(null);try{const re=e?.gitlabInstanceUrl?.replace(/^https?:\/\//,"").replace(/\/$/,""),Z=await window.electronAPI.listGitLabUserProjects(re);ms("listGitLabUserProjects result:",Z),Z.success&&Z.data?.projects?(w(Z.data.projects),ms("Loaded projects:",Z.data.projects.length)):j(Z.error||"Failed to load projects")}catch(re){ms("Error fetching projects:",re),j(re instanceof Error?re.message:"Failed to load projects")}finally{C(!1)}};if(!e)return ms("No envConfig, returning null"),null;const q=async()=>{ms("handleOAuthSuccess called");try{const re=e?.gitlabInstanceUrl?.replace(/^https?:\/\//,"").replace(/\/$/,""),Z=await window.electronAPI.getGitLabToken(re);Z.success&&Z.data?.token&&t({gitlabToken:Z.data.token});const ie=await window.electronAPI.getGitLabUser(re);ie.success&&ie.data?.username&&v(ie.data.username),f("oauth-success")}catch(re){ms("Error in OAuth success:",re)}},Q=async()=>{const re=e?.gitlabInstanceUrl?.replace(/^https?:\/\//,"").replace(/\/$/,"");if((await window.electronAPI.startGitLabAuth(re)).success){const ie=async()=>{const ce=await window.electronAPI.checkGitLabAuth(re);ce.success&&ce.data?.authenticated?q():setTimeout(ie,2e3)};setTimeout(ie,3e3)}},se=()=>{f("manual"),v(null)},te=()=>{f("oauth"),Q()},ee=re=>{ms("Selected project:",re),t({gitlabProject:re})},pe=async()=>{V(!0),K(!1);try{const re=await window.electronAPI.installGitLabCli();ms("installGitLabCli result:",re),re.success?(K(!0),setTimeout(async()=>{await fe(),V(!1)},5e3)):V(!1)}catch(re){ms("Error installing glab:",re),V(!1)}},fe=async()=>{H(!0),K(!1);try{const re=await window.electronAPI.checkGitLabCli();ms("checkGitLabCli refresh result:",re),re.success&&re.data?(O(re.data.installed),$(re.data.version||null)):O(!1)}catch(re){ms("Error refreshing glab status:",re),O(!1)}finally{H(!1)}};return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(le,{className:"font-normal text-foreground",children:d("settings.enableIssues")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:d("settings.enableIssuesDescription")})]}),n.jsx(Kt,{checked:e.gitlabEnabled,onCheckedChange:re=>t({gitlabEnabled:re})})]}),e.gitlabEnabled&&n.jsxs(n.Fragment,{children:[n.jsx(s2e,{value:e.gitlabInstanceUrl||"https://gitlab.com",onChange:re=>t({gitlabInstanceUrl:re})}),m==="oauth-success"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-lg border border-success/30 bg-success/10 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xe,{className:"h-5 w-5 text-success"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-success",children:d("settings.connectedVia")}),x&&n.jsxs("p",{className:"text-xs text-success/80 flex items-center gap-1 mt-0.5",children:[n.jsx(Qr,{className:"h-3 w-3"}),d("settings.authenticatedAs")," ",x]})]})]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:se,className:"text-xs",children:d("settings.useDifferentToken")})]})}),n.jsx(n2e,{projects:y,selectedProject:e.gitlabProject||"",isLoading:S,error:_,onSelect:ee,onRefresh:Y,onManualEntry:()=>f("manual")})]}),m==="oauth"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:d("settings.authentication")}),n.jsx(W,{variant:"ghost",size:"sm",onClick:se,children:d("settings.useManualToken")})]}),n.jsx("div",{className:"rounded-lg border border-info/30 bg-info/10 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(we,{className:"h-5 w-5 text-info animate-spin"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:d("settings.authenticating")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d("settings.browserWindow")})]})]})})]}),m==="manual"&&n.jsxs(n.Fragment,{children:[P===!1&&n.jsx("div",{className:"rounded-lg border border-warning/30 bg-warning/10 p-4 mb-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-warning mt-0.5 shrink-0"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:d("settings.cli.required")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:d("settings.cli.notInstalled")})]}),B?n.jsx("div",{className:"rounded-md border border-success/30 bg-success/10 p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xe,{className:"h-4 w-4 text-success"}),n.jsx("p",{className:"text-xs text-success",children:d("settings.cli.installSuccess")})]}),n.jsxs(W,{variant:"ghost",size:"sm",onClick:fe,disabled:z,className:"h-7 gap-1.5",children:[n.jsx(We,{className:`h-3 w-3 ${z?"animate-spin":""}`}),d("settings.cli.refresh")]})]})}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(W,{variant:"outline",size:"sm",onClick:pe,disabled:I,className:"gap-2",children:I?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-3 w-3 animate-spin"}),d("settings.cli.installing")]}):n.jsxs(n.Fragment,{children:[n.jsx(dr,{className:"h-3 w-3"}),d("settings.cli.installButton")]})}),n.jsxs("a",{href:"https://gitlab.com/gitlab-org/cli#installation",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-info hover:underline flex items-center gap-1",children:[d("settings.cli.learnMore"),n.jsx(Zt,{className:"h-3 w-3"})]})]})]})]})}),P===!0&&F&&n.jsx("div",{className:"rounded-lg border border-success/30 bg-success/10 p-3 mb-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xe,{className:"h-4 w-4 text-success"}),n.jsxs("p",{className:"text-xs text-success",children:[d("settings.cli.installed")," ",n.jsx("span",{className:"font-mono",children:F})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:d("settings.personalAccessToken")}),n.jsxs(W,{variant:"outline",size:"sm",onClick:te,disabled:P===!1||z,className:"gap-2",children:[z?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(sO,{className:"h-3 w-3"}),d("settings.useOAuth")]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[d("settings.tokenScope")," ",n.jsx("code",{className:"px-1 bg-muted rounded",children:d("settings.scopeApi")})," ",d("settings.scopeFrom")," ",n.jsx("a",{href:`${e.gitlabInstanceUrl||"https://gitlab.com"}/-/user_settings/personal_access_tokens`,target:"_blank",rel:"noopener noreferrer",className:"text-info hover:underline",children:d("settings.gitlabSettings")})]}),n.jsx(WU,{value:e.gitlabToken||"",onChange:re=>t({gitlabToken:re}),placeholder:"glpat-xxxxxxxxxxxxxxxxxxxx"})]}),n.jsx(r2e,{value:e.gitlabProject||"",onChange:re=>t({gitlabProject:re})})]}),e.gitlabToken&&e.gitlabProject&&n.jsx(i2e,{isChecking:a,connectionStatus:i}),i?.connected&&n.jsx(a2e,{}),n.jsx(Rn,{}),o&&n.jsx(l2e,{branches:T,selectedBranch:l?.mainBranch||e.defaultBranch||"",isLoading:A,error:D,onSelect:L,onRefresh:G}),n.jsx(Rn,{}),n.jsx(o2e,{enabled:e.gitlabAutoSync||!1,onToggle:re=>t({gitlabAutoSync:re})})]})]})}function s2e({value:e,onChange:t}){const{t:s}=Re("gitlab");return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(so,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(le,{className:"text-sm font-medium text-foreground",children:s("settings.instance")})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:s("settings.instanceDescription")}),n.jsx(Oe,{placeholder:"https://gitlab.com",value:e,onChange:r=>t(r.target.value)})]})}function n2e({projects:e,selectedProject:t,isLoading:s,error:r,onSelect:i,onRefresh:a,onManualEntry:o}){const{t:l}=Re("gitlab"),[u,d]=p.useState(!1),[m,f]=p.useState(""),x=e.filter(y=>y.pathWithNamespace.toLowerCase().includes(m.toLowerCase())||y.description?.toLowerCase().includes(m.toLowerCase())),v=e.find(y=>y.pathWithNamespace===t);return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:l("settings.project")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(W,{variant:"ghost",size:"sm",onClick:a,disabled:s,className:"h-7 px-2",children:n.jsx(We,{className:`h-3 w-3 ${s?"animate-spin":""}`})}),n.jsx(W,{variant:"ghost",size:"sm",onClick:o,className:"h-7 text-xs",children:l("settings.enterManually")})]})]}),r&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive",children:[n.jsx(Ke,{className:"h-3 w-3"}),r]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>d(!u),disabled:s,className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-input rounded-md bg-background hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[s?n.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),l("settings.loadingProjects")]}):t?n.jsxs("span",{className:"flex items-center gap-2",children:[v?.visibility==="private"?n.jsx(ll,{className:"h-3 w-3 text-muted-foreground"}):n.jsx(wn,{className:"h-3 w-3 text-muted-foreground"}),t]}):n.jsx("span",{className:"text-muted-foreground",children:l("settings.selectProject")}),n.jsx(bt,{className:`h-4 w-4 text-muted-foreground transition-transform ${u?"rotate-180":""}`})]}),u&&!s&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-border",children:n.jsx(Oe,{placeholder:l("settings.searchProjects"),value:m,onChange:y=>f(y.target.value),className:"h-8 text-sm",autoFocus:!0})}),n.jsx("div",{className:"max-h-48 overflow-y-auto",children:x.length===0?n.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:l(m?"settings.noMatchingProjects":"settings.noProjectsFound")}):x.map(y=>n.jsxs("button",{type:"button",onClick:()=>{i(y.pathWithNamespace),d(!1),f("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-start gap-2 ${y.pathWithNamespace===t?"bg-accent":""}`,children:[y.visibility==="private"?n.jsx(ll,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}):n.jsx(wn,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:y.pathWithNamespace}),y.description&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:y.description})]})]},y.pathWithNamespace))})]})]}),t&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[l("settings.selected"),": ",n.jsx("code",{className:"px-1 bg-muted rounded",children:t})]})]})}function r2e({value:e,onChange:t}){const{t:s}=Re("gitlab");return n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:s("settings.project")}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[s("settings.projectFormat")," ",n.jsx("code",{className:"px-1 bg-muted rounded",children:"group/project"})," ",s("settings.projectFormatExample")]}),n.jsx(Oe,{placeholder:"group/project",value:e,onChange:r=>t(r.target.value)})]})}function i2e({isChecking:e,connectionStatus:t}){const{t:s}=Re("gitlab");return n.jsx("div",{className:"rounded-lg border border-border bg-muted/30 p-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:s("settings.connectionStatus")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e?s("settings.checking"):t?.connected?`${s("settings.connectedTo")} ${t.projectPathWithNamespace}`:t?.error||s("settings.notConnected")}),t?.connected&&t.projectDescription&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1 italic",children:t.projectDescription})]}),e?n.jsx(we,{className:"h-4 w-4 animate-spin text-muted-foreground"}):t?.connected?n.jsx(Xe,{className:"h-4 w-4 text-success"}):n.jsx(Ke,{className:"h-4 w-4 text-warning"})]})})}function a2e(){const{t:e}=Re("gitlab");return n.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("svg",{className:"h-5 w-5 text-info mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:e("settings.issuesAvailable")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e("settings.issuesAvailableDescription")})]})]})})}function o2e({enabled:e,onToggle:t}){const{t:s}=Re("gitlab");return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(We,{className:"h-4 w-4 text-info"}),n.jsx(le,{className:"font-normal text-foreground",children:s("settings.autoSyncOnLoad")})]}),n.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:s("settings.autoSyncDescription")})]}),n.jsx(Kt,{checked:e,onCheckedChange:t})]})}function l2e({branches:e,selectedBranch:t,isLoading:s,error:r,onSelect:i,onRefresh:a}){const{t:o}=Re("gitlab"),[l,u]=p.useState(!1),[d,m]=p.useState(""),f=e.filter(x=>x.toLowerCase().includes(d.toLowerCase()));return n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4 text-info"}),n.jsx(le,{className:"text-sm font-medium text-foreground",children:o("settings.defaultBranch")})]}),n.jsx("p",{className:"text-xs text-muted-foreground pl-6",children:o("settings.defaultBranchDescription")})]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:a,disabled:s,className:"h-7 px-2",children:n.jsx(We,{className:`h-3 w-3 ${s?"animate-spin":""}`})})]}),r&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-destructive pl-6",children:[n.jsx(Ke,{className:"h-3 w-3"}),r]}),n.jsxs("div",{className:"relative pl-6",children:[n.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,className:"w-full flex items-center justify-between px-3 py-2 text-sm border border-input rounded-md bg-background hover:bg-accent hover:text-accent-foreground disabled:opacity-50",children:[s?n.jsxs("span",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),o("settings.loadingBranches")]}):t?n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-3 w-3 text-muted-foreground"}),t]}):n.jsx("span",{className:"text-muted-foreground",children:o("settings.autoDetect")}),n.jsx(bt,{className:`h-4 w-4 text-muted-foreground transition-transform ${l?"rotate-180":""}`})]}),l&&!s&&n.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-2 border-b border-border",children:n.jsx(Oe,{placeholder:o("settings.searchBranches"),value:d,onChange:x=>m(x.target.value),className:"h-8 text-sm",autoFocus:!0})}),n.jsx("button",{type:"button",onClick:()=>{i(""),u(!1),m("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-center gap-2 ${t?"":"bg-accent"}`,children:n.jsx("span",{className:"text-sm text-muted-foreground italic",children:o("settings.autoDetect")})}),n.jsx("div",{className:"max-h-40 overflow-y-auto border-t border-border",children:f.length===0?n.jsx("div",{className:"px-3 py-4 text-sm text-muted-foreground text-center",children:o(d?"settings.noMatchingBranches":"settings.noBranchesFound")}):f.map(x=>n.jsxs("button",{type:"button",onClick:()=>{i(x),u(!1),m("")},className:`w-full px-3 py-2 text-left hover:bg-accent flex items-center gap-2 ${x===t?"bg-accent":""}`,children:[n.jsx(an,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:x})]},x))})]})]}),t&&n.jsxs("p",{className:"text-xs text-muted-foreground pl-6",children:[o("settings.branchFromNote")," ",n.jsx("code",{className:"px-1 bg-muted rounded",children:t})]})]})}function Gx({initialized:e,title:t,description:s,children:r}){return e?n.jsx(n.Fragment,{children:r}):n.jsxs("div",{className:"rounded-lg border border-border bg-muted/50 p-4 text-center text-sm text-muted-foreground",children:["Initialize Auto-Build first to configure ",t.toLowerCase()]})}function c2e({activeSection:e,project:t,settings:s,setSettings:r,versionInfo:i,isCheckingVersion:a,isUpdating:o,envConfig:l,isLoadingEnv:u,envError:d,updateEnvConfig:m,showLinearKey:f,setShowLinearKey:x,showOpenAIKey:v,setShowOpenAIKey:y,showGitHubToken:w,setShowGitHubToken:S,gitHubConnectionStatus:C,isCheckingGitHub:_,showGitLabToken:j,setShowGitLabToken:T,gitLabConnectionStatus:E,isCheckingGitLab:A,linearConnectionStatus:R,isCheckingLinear:D,handleInitialize:M,onOpenLinearImport:P}){const{t:O}=Re("settings");switch(e){case"general":return n.jsx(jr,{title:"General",description:`Configure Auto-Build, agent model, and notifications for ${t.name}`,children:n.jsx(RAe,{project:t,settings:s,setSettings:r,versionInfo:i,isCheckingVersion:a,isUpdating:o,handleInitialize:M})});case"linear":return n.jsx(jr,{title:O("projectSections.linear.integrationTitle"),description:O("projectSections.linear.integrationDescription"),children:n.jsx(Gx,{initialized:!!t.autoBuildPath,title:O("projectSections.linear.integrationTitle"),description:O("projectSections.linear.syncDescription"),children:n.jsx(LAe,{envConfig:l,updateEnvConfig:m,showLinearKey:f,setShowLinearKey:x,linearConnectionStatus:R,isCheckingLinear:D,onOpenLinearImport:P})})});case"github":return n.jsx(jr,{title:O("projectSections.github.integrationTitle"),description:O("projectSections.github.integrationDescription"),children:n.jsx(Gx,{initialized:!!t.autoBuildPath,title:O("projectSections.github.integrationTitle"),description:O("projectSections.github.syncDescription"),children:n.jsx(qAe,{envConfig:l,updateEnvConfig:m,showGitHubToken:w,setShowGitHubToken:S,gitHubConnectionStatus:C,isCheckingGitHub:_,projectPath:t.path,settings:s,setSettings:r})})});case"gitlab":return n.jsx(jr,{title:O("projectSections.gitlab.integrationTitle"),description:O("projectSections.gitlab.integrationDescription"),children:n.jsx(Gx,{initialized:!!t.autoBuildPath,title:O("projectSections.gitlab.integrationTitle"),description:O("projectSections.gitlab.syncDescription"),children:n.jsx(t2e,{envConfig:l,updateEnvConfig:m,showGitLabToken:j,setShowGitLabToken:T,gitLabConnectionStatus:E,isCheckingGitLab:A,projectPath:t.path,settings:s,setSettings:r})})});case"memory":return n.jsx(jr,{title:O("projectSections.memory.integrationTitle"),description:O("projectSections.memory.integrationDescription"),children:n.jsx(Gx,{initialized:!!t.autoBuildPath,title:O("projectSections.memory.integrationTitle"),description:O("projectSections.memory.syncDescription"),children:n.jsx(MAe,{envConfig:l,settings:s,setSettings:r,updateEnvConfig:m,showOpenAIKey:v,setShowOpenAIKey:y,expanded:!0,onToggle:()=>{}})})});default:return null}}function d2e(e){return{get settings(){return e.current.settings},get setSettings(){return e.current.setSettings},get isSaving(){return e.current.isSaving},get error(){return e.current.error},get setError(){return e.current.setError},get versionInfo(){return e.current.versionInfo},get isCheckingVersion(){return e.current.isCheckingVersion},get isUpdating(){return e.current.isUpdating},get envConfig(){return e.current.envConfig},get setEnvConfig(){return e.current.setEnvConfig},get isLoadingEnv(){return e.current.isLoadingEnv},get envError(){return e.current.envError},get setEnvError(){return e.current.setEnvError},get isSavingEnv(){return e.current.isSavingEnv},get updateEnvConfig(){return e.current.updateEnvConfig},get showClaudeToken(){return e.current.showClaudeToken},get setShowClaudeToken(){return e.current.setShowClaudeToken},get showLinearKey(){return e.current.showLinearKey},get setShowLinearKey(){return e.current.setShowLinearKey},get showOpenAIKey(){return e.current.showOpenAIKey},get setShowOpenAIKey(){return e.current.setShowOpenAIKey},get showGitHubToken(){return e.current.showGitHubToken},get setShowGitHubToken(){return e.current.setShowGitHubToken},get expandedSections(){return e.current.expandedSections},get toggleSection(){return e.current.toggleSection},get gitHubConnectionStatus(){return e.current.gitHubConnectionStatus},get isCheckingGitHub(){return e.current.isCheckingGitHub},get showGitLabToken(){return e.current.showGitLabToken},get setShowGitLabToken(){return e.current.setShowGitLabToken},get gitLabConnectionStatus(){return e.current.gitLabConnectionStatus},get isCheckingGitLab(){return e.current.isCheckingGitLab},get isCheckingClaudeAuth(){return e.current.isCheckingClaudeAuth},get claudeAuthStatus(){return e.current.claudeAuthStatus},get setClaudeAuthStatus(){return e.current.setClaudeAuthStatus},get showLinearImportModal(){return e.current.showLinearImportModal},get setShowLinearImportModal(){return e.current.setShowLinearImportModal},get linearConnectionStatus(){return e.current.linearConnectionStatus},get isCheckingLinear(){return e.current.isCheckingLinear},get handleInitialize(){return e.current.handleInitialize},get handleSaveEnv(){return e.current.handleSaveEnv},get handleClaudeSetup(){return e.current.handleClaudeSetup},get handleSave(){return e.current.handleSave}}}function u2e({project:e,activeSection:t,isOpen:s,onHookReady:r}){const{t:i}=Re("settings");return e?n.jsx(h2e,{project:e,activeSection:t,isOpen:s,onHookReady:r}):n.jsx(jr,{title:i("projectSettings.noProjectSelected.title"),description:i("projectSettings.noProjectSelected.description"),children:n.jsx(TAe,{})})}function h2e({project:e,activeSection:t,isOpen:s,onHookReady:r}){const i=EAe(e,s),a=p.useRef(i);a.current=i;const{settings:o,setSettings:l,versionInfo:u,isCheckingVersion:d,isUpdating:m,envConfig:f,isLoadingEnv:x,envError:v,updateEnvConfig:y,showLinearKey:w,setShowLinearKey:S,showOpenAIKey:C,setShowOpenAIKey:_,showGitHubToken:j,setShowGitHubToken:T,expandedSections:E,toggleSection:A,gitHubConnectionStatus:R,isCheckingGitHub:D,showGitLabToken:M,setShowGitLabToken:P,gitLabConnectionStatus:O,isCheckingGitLab:F,showLinearImportModal:$,setShowLinearImportModal:z,linearConnectionStatus:H,isCheckingLinear:I,handleInitialize:V,error:B}=i;return p.useEffect(()=>{if(s){const K=d2e(a);r(K)}return()=>{r(null)}},[s,r]),n.jsxs(n.Fragment,{children:[n.jsx(c2e,{activeSection:t,project:e,settings:o,setSettings:l,versionInfo:u,isCheckingVersion:d,isUpdating:m,envConfig:f,isLoadingEnv:x,envError:v,updateEnvConfig:y,showLinearKey:w,setShowLinearKey:S,showOpenAIKey:C,setShowOpenAIKey:_,showGitHubToken:j,setShowGitHubToken:T,gitHubConnectionStatus:R,isCheckingGitHub:D,showGitLabToken:M,setShowGitLabToken:P,gitLabConnectionStatus:O,isCheckingGitLab:F,linearConnectionStatus:H,isCheckingLinear:I,handleInitialize:V,onOpenLinearImport:()=>z(!0)}),n.jsx(PAe,{error:B,envError:v}),n.jsx(wAe,{projectId:e.id,open:$,onOpenChange:z,onImportComplete:async K=>{K.imported>0&&await po(e.id)}})]})}function m2e({className:e}){return n.jsxs("svg",{className:e,viewBox:"0 0 24 24",fill:"currentColor",role:"img","aria-labelledby":"gitlab-icon-title",children:[n.jsx("title",{id:"gitlab-icon-title",children:"GitLab"}),n.jsx("path",{d:"M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"})]})}const f2e=[{id:"appearance",icon:_p},{id:"display",icon:_h},{id:"language",icon:wn},{id:"devtools",icon:lr},{id:"agent",icon:sd},{id:"paths",icon:Xr},{id:"integrations",icon:io},{id:"api-profiles",icon:so},{id:"updates",icon:Jb},{id:"notifications",icon:xne},{id:"debug",icon:jh}],p2e=[{id:"general",icon:Sd},{id:"linear",icon:vi},{id:"github",icon:qr},{id:"gitlab",icon:m2e},{id:"memory",icon:oc}];function g2e({open:e,onOpenChange:t,initialSection:s,initialProjectSection:r,onRerunWizard:i}){const{t:a}=Re("settings"),{settings:o,setSettings:l,isSaving:u,error:d,saveSettings:m,revertTheme:f,commitTheme:x}=Eke(),[v,y]=p.useState(""),[w,S]=p.useState("app"),[C,_]=p.useState(s||"appearance"),[j,T]=p.useState("general");p.useEffect(()=>{e&&(r?(S("project"),T(r)):s&&(S("app"),_(s)))},[e,s,r]);const E=Ot(L=>L.projects),A=Ot(L=>L.selectedProjectId),R=Ot(L=>L.selectProject),D=E.find(L=>L.id===A),[M,P]=p.useState(null),[O,F]=p.useState(null);p.useEffect(()=>{window.electronAPI.getAppVersion().then(y)},[]);const $=p.useCallback(L=>{P(L),F(L&&(L.error||L.envError)||null)},[]),z=async()=>{const L=await m();if(w==="project"&&D&&M&&(await M.handleSave(()=>{}),M.error||M.envError)){F(M.error||M.envError);return}L&&(x(),t(!1))},H=()=>{t(!1)},I=L=>{R(L)},V=()=>{switch(C){case"appearance":return n.jsx(Pke,{settings:o,onSettingsChange:l});case"display":return n.jsx(Dke,{settings:o,onSettingsChange:l});case"language":return n.jsx(Mke,{settings:o,onSettingsChange:l});case"devtools":return n.jsx(Jke,{settings:o,onSettingsChange:l});case"agent":return n.jsx(S4,{settings:o,onSettingsChange:l,section:"agent"});case"paths":return n.jsx(S4,{settings:o,onSettingsChange:l,section:"paths"});case"integrations":return n.jsx(Zke,{settings:o,onSettingsChange:l,isOpen:e});case"api-profiles":return n.jsx(nAe,{});case"updates":return n.jsx(k4,{settings:o,onSettingsChange:l,section:"updates",version:v});case"notifications":return n.jsx(k4,{settings:o,onSettingsChange:l,section:"notifications",version:v});case"debug":return n.jsx(eAe,{});default:return null}},B=()=>w==="app"?V():n.jsx(u2e,{project:D,activeSection:j,isOpen:e,onHookReady:$}),K=!A;return n.jsx(RU,{open:e,onOpenChange:L=>{L||f(),t(L)},children:n.jsxs(lA,{children:[n.jsxs(cA,{children:[n.jsxs(uA,{className:"flex items-center gap-3",children:[n.jsx(ey,{className:"h-6 w-6"}),a("title")]}),n.jsxs(hA,{children:[a("tabs.app")," & ",a("tabs.project")]})]}),n.jsx(dA,{children:n.jsxs("div",{className:"flex h-full",children:[n.jsx("nav",{className:"w-80 border-r border-border bg-muted/30 p-4",children:n.jsxs(zt,{className:"h-full",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:a("tabs.app")}),n.jsxs("div",{className:"space-y-1",children:[f2e.map(L=>{const G=L.icon,Y=w==="app"&&C===L.id;return n.jsxs("button",{onClick:()=>{S("app"),_(L.id)},className:J("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-all",Y?"bg-accent text-accent-foreground":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"),children:[n.jsx(G,{className:"h-5 w-5 mt-0.5 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:a(`sections.${L.id}.title`)}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:a(`sections.${L.id}.description`)})]})]},L.id)}),i&&n.jsxs("button",{onClick:()=>{t(!1),i()},className:J("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-all mt-2","border border-dashed border-muted-foreground/30","hover:bg-accent/50 text-muted-foreground hover:text-foreground"),children:[n.jsx(Qt,{className:"h-5 w-5 mt-0.5 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:a("actions.rerunWizard")}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:a("actions.rerunWizardDescription")})]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"mb-2 px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:a("tabs.project")}),n.jsx("div",{className:"px-1 mb-3",children:n.jsx(rAe,{selectedProjectId:A,onProjectChange:I})}),n.jsx("div",{className:"space-y-1",children:p2e.map(L=>{const G=L.icon,Y=w==="project"&&j===L.id;return n.jsxs("button",{onClick:()=>{S("project"),T(L.id)},disabled:K,className:J("w-full flex items-start gap-3 p-3 rounded-lg text-left transition-all",Y?"bg-accent text-accent-foreground":K?"opacity-50 cursor-not-allowed text-muted-foreground":"hover:bg-accent/50 text-muted-foreground hover:text-foreground"),children:[n.jsx(G,{className:"h-5 w-5 mt-0.5 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("div",{className:"font-medium text-sm",children:a(`projectSections.${L.id}.title`)}),n.jsx("div",{className:"text-xs text-muted-foreground truncate",children:a(`projectSections.${L.id}.description`)})]})]},L.id)})})]})]}),v&&n.jsx("div",{className:"mt-8 pt-4 border-t border-border",children:n.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:[a("updates.version")," ",v]})})]})}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(zt,{className:"h-full",children:n.jsx("div",{className:"p-8 max-w-2xl",children:B()})})})]})}),n.jsxs(IU,{children:[(d||O)&&n.jsx("div",{className:"flex-1 rounded-lg bg-destructive/10 border border-destructive/30 px-4 py-2 text-sm text-destructive",children:d||O}),n.jsx(W,{variant:"outline",onClick:H,children:a("common:buttons.cancel","Cancel")}),n.jsx(W,{onClick:z,disabled:u||w==="project"&&M?.isSaving,children:u||w==="project"&&M?.isSaving?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),a("common:buttons.saving","Saving...")]}):n.jsxs(n.Fragment,{children:[n.jsx(nO,{className:"mr-2 h-4 w-4"}),a("actions.save")]})})]})]})})}function Ds(e,t="Assertion error"){if(!e)throw Error(t)}function fh({group:e}){const{orientation:t,panels:s}=e;return s.reduce((r,i)=>(r+=t==="horizontal"?i.element.offsetWidth:i.element.offsetHeight,r),0)}function UN(e,t){return t.sort(e==="horizontal"?x2e:v2e)}function x2e(e,t){const s=e.element.offsetLeft-t.element.offsetLeft;return s!==0?s:e.element.offsetWidth-t.element.offsetWidth}function v2e(e,t){const s=e.element.offsetTop-t.element.offsetTop;return s!==0?s:e.element.offsetHeight-t.element.offsetHeight}function KU(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function YU(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function b2e({orientation:e,rects:t,targetRect:s}){const r={x:s.x+s.width/2,y:s.y+s.height/2};let i,a=Number.MAX_VALUE;for(const o of t){const{x:l,y:u}=YU(r,o),d=e==="horizontal"?l:u;d<a&&(a=d,i=o)}return Ds(i,"No rect found"),i}function XU(e){const{element:t,orientation:s,panels:r,separators:i}=e,a=UN(s,Array.from(t.children).filter(KU).map(m=>({element:m}))).map(({element:m})=>m),o=[];let l=!1,u,d=[];for(const m of a)if(m.hasAttribute("data-panel")){const f=r.find(x=>x.element===m);if(f){if(u){const x=u.element.getBoundingClientRect(),v=m.getBoundingClientRect();let y;if(l){const w=s==="horizontal"?new DOMRect(x.right,x.top,0,x.height):new DOMRect(x.left,x.bottom,x.width,0),S=s==="horizontal"?new DOMRect(v.left,v.top,0,v.height):new DOMRect(v.left,v.top,v.width,0);switch(d.length){case 0:{y=[w,S];break}case 1:{const C=d[0],_=b2e({orientation:s,rects:[x,v],targetRect:C.element.getBoundingClientRect()});y=[C,_===x?S:w];break}default:{y=d;break}}}else d.length?y=d:y=[s==="horizontal"?new DOMRect(x.right,v.top,v.left-x.right,v.height):new DOMRect(v.left,x.bottom,v.width,v.top-x.bottom)];for(const w of y)o.push({group:e,groupSize:fh({group:e}),panels:[u,f],separator:"width"in w?void 0:w,rect:"width"in w?w:w.element.getBoundingClientRect()})}l=!1,u=f,d=[]}}else if(m.hasAttribute("data-separator")){const f=i.find(x=>x.element===m);f?d.push(f):(u=void 0,d=[])}else l=!0;return o}function y2e(e,t){const s=getComputedStyle(e),r=parseFloat(s.fontSize);return t*r}function w2e(e,t){const s=getComputedStyle(e.ownerDocument.body),r=parseFloat(s.fontSize);return t*r}function j2e(e){return e/100*window.innerHeight}function S2e(e){return e/100*window.innerWidth}function _2e(e){switch(typeof e){case"number":return[e,"px"];case"string":{const t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}function Vx({groupSize:e,panelElement:t,styleProp:s}){let r;const[i,a]=_2e(s);switch(a){case"%":{r=i/100*e;break}case"px":{r=i;break}case"rem":{r=w2e(t,i);break}case"em":{r=y2e(t,i);break}case"vh":{r=j2e(i);break}case"vw":{r=S2e(i);break}}return r}function Aa(e){return parseFloat(e.toFixed(3))}function R4(e){const{panels:t}=e,s=fh({group:e});return s===0?t.map(r=>({collapsedSize:0,collapsible:r.panelConstraints.collapsible===!0,defaultSize:void 0,minSize:0,maxSize:100,panelId:r.id})):t.map(r=>{const{element:i,panelConstraints:a}=r;let o=0;if(a.collapsedSize){const m=Vx({groupSize:s,panelElement:i,styleProp:a.collapsedSize});o=Aa(m/s*100)}let l;if(a.defaultSize){const m=Vx({groupSize:s,panelElement:i,styleProp:a.defaultSize});l=Aa(m/s*100)}let u=0;if(a.minSize){const m=Vx({groupSize:s,panelElement:i,styleProp:a.minSize});u=Aa(m/s*100)}let d=100;if(a.maxSize){const m=Vx({groupSize:s,panelElement:i,styleProp:a.maxSize});d=Aa(m/s*100)}return{collapsedSize:o,collapsible:a.collapsible===!0,defaultSize:l,minSize:u,maxSize:d,panelId:r.id}})}let N2e=class{#e={};addListener(t,s){const r=this.#e[t];return r===void 0?this.#e[t]=[s]:r.includes(s)||r.push(s),()=>{this.removeListener(t,s)}}emit(t,s){const r=this.#e[t];if(r!==void 0)if(r.length===1)r[0].call(null,s);else{let i=!1,a=null;const o=Array.from(r);for(let l=0;l<o.length;l++){const u=o[l];try{u.call(null,s)}catch(d){a===null&&(i=!0,a=d)}}if(i)throw a}}removeAllListeners(){this.#e={}}removeListener(t,s){const r=this.#e[t];if(r!==void 0){const i=r.indexOf(s);i>=0&&r.splice(i,1)}}};function Ur(e,t,s=0){return Math.abs(Aa(e)-Aa(t))<=s}let ta={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map};const ad=new N2e;function ko(){return ta}function pa(e){const t=typeof e=="function"?e(ta):e;if(ta===t)return ta;const s=ta;return ta={...ta,...t},t.cursorFlags!==void 0&&ad.emit("cursorFlagsChange",ta.cursorFlags),t.interactionState!==void 0&&ad.emit("interactionStateChange",ta.interactionState),t.mountedGroups!==void 0&&(ta.mountedGroups.forEach((r,i)=>{r.derivedPanelConstraints.forEach(a=>{if(a.collapsible){const{layout:o}=s.mountedGroups.get(i)??{};if(o){const l=Ur(a.collapsedSize,r.layout[a.panelId]),u=Ur(a.collapsedSize,o[a.panelId]);l&&!u&&(i.inMemoryLastExpandedPanelSizes[a.panelId]=o[a.panelId])}}})}),ad.emit("mountedGroupsChange",ta.mountedGroups)),ta}function C2e(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!=t[s])return!1;return!0}function cp(e,t){return Ur(e,t)?0:e>t?1:-1}function Bu({panelConstraints:e,size:t}){const{collapsedSize:s=0,collapsible:r,maxSize:i=100,minSize:a=0}=e;if(cp(t,a)<0)if(r){const o=(s+a)/2;cp(t,o)<0?t=s:t=a}else t=a;return t=Math.min(i,t),t=Aa(t),t}function dp({delta:e,initialLayout:t,panelConstraints:s,pivotIndices:r,prevLayout:i,trigger:a}){if(Ur(e,0))return t;const o=Object.values(t),l=Object.values(i),u=[...o],[d,m]=r;Ds(d!=null,"Invalid first pivot index"),Ds(m!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const y=e<0?m:d,w=s[y];Ds(w,`Panel constraints not found for index ${y}`);const{collapsedSize:S=0,collapsible:C,minSize:_=0}=w;if(C){const j=o[y];if(Ds(j!=null,`Previous layout not found for panel index ${y}`),Ur(j,S)){const T=_-j;cp(T,Math.abs(e))>0&&(e=e<0?0-T:T)}}}{const y=e<0?d:m,w=s[y];Ds(w,`No panel constraints found for index ${y}`);const{collapsedSize:S=0,collapsible:C,minSize:_=0}=w;if(C){const j=o[y];if(Ds(j!=null,`Previous layout not found for panel index ${y}`),Ur(j,_)){const T=j-S;cp(T,Math.abs(e))>0&&(e=e<0?0-T:T)}}}}{const y=e<0?1:-1;let w=e<0?m:d,S=0;for(;;){const _=o[w];Ds(_!=null,`Previous layout not found for panel index ${w}`);const j=Bu({panelConstraints:s[w],size:100})-_;if(S+=j,w+=y,w<0||w>=s.length)break}const C=Math.min(Math.abs(e),Math.abs(S));e=e<0?0-C:C}{let y=e<0?d:m;for(;y>=0&&y<s.length;){const w=Math.abs(e)-Math.abs(f),S=o[y];Ds(S!=null,`Previous layout not found for panel index ${y}`);const C=S-w,_=Bu({panelConstraints:s[y],size:C});if(!Ur(S,_)&&(f+=S-_,u[y]=_,f.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?y--:y++}}if(C2e(l,u))return i;{const y=e<0?m:d,w=o[y];Ds(w!=null,`Previous layout not found for panel index ${y}`);const S=w+f,C=Bu({panelConstraints:s[y],size:S});if(u[y]=C,!Ur(C,S)){let _=S-C,j=e<0?m:d;for(;j>=0&&j<s.length;){const T=u[j];Ds(T!=null,`Previous layout not found for panel index ${j}`);const E=T+_,A=Bu({panelConstraints:s[j],size:E});if(Ur(T,A)||(_-=A-T,u[j]=A),Ur(_,0))break;e>0?j--:j++}}}const x=Object.values(u).reduce((y,w)=>w+y,0);if(!Ur(x,100,.1))return i;const v=Object.keys(i);return u.reduce((y,w,S)=>(y[v[S]]=w,y),{})}function Sv(e){const t=e.parentElement;Ds(t,"Parent group element not found");const{mountedGroups:s}=ko();for(const[r]of s)if(r.element===t)return r;throw Error("Could not find parent Group for separator element")}function Wh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(t[s]===void 0||cp(e[s],t[s])!==0)return!1;return!0}function xd({layout:e,panelConstraints:t}){const s=[...Object.values(e)],r=s.reduce((o,l)=>o+l,0);if(s.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${s.map(o=>`${o}%`).join(", ")}`);if(!Ur(r,100)&&s.length>0)for(let o=0;o<t.length;o++){const l=s[o];Ds(l!=null,`No layout data found for index ${o}`);const u=100/r*l;s[o]=u}let i=0;for(let o=0;o<t.length;o++){const l=s[o];Ds(l!=null,`No layout data found for index ${o}`);const u=Bu({panelConstraints:t[o],size:l});l!=u&&(i+=l-u,s[o]=u)}if(!Ur(i,0))for(let o=0;o<t.length;o++){const l=s[o];Ds(l!=null,`No layout data found for index ${o}`);const u=l+i,d=Bu({panelConstraints:t[o],size:u});if(l!==d&&(i-=d-l,s[o]=d,Ur(i,0)))break}const a=Object.keys(e);return s.reduce((o,l,u)=>(o[a[u]]=l,o),{})}function ZU({groupId:e}){const t=()=>{const{mountedGroups:s}=ko();for(const[r,i]of s)if(r.id===e)return{group:r,...i};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){const{defaultLayoutDeferred:s,layout:r}=t();return s?{}:r},setLayout(s){const{defaultLayoutDeferred:r,derivedPanelConstraints:i,group:a,layout:o,separatorToPanels:l}=t(),u=xd({layout:s,panelConstraints:i});return r?o:(Wh(o,u)||pa(d=>({mountedGroups:new Map(d.mountedGroups).set(a,{defaultLayoutDeferred:r,derivedPanelConstraints:i,layout:u,separatorToPanels:l})})),u)}}}function QU(e){const{mountedGroups:t}=ko(),s=t.get(e);return Ds(s,`Mounted Group ${e.id} not found`),s}function $c(e,t){const s=Sv(e),r=QU(s),i=s.separators.find(m=>m.element===e);Ds(i,"Matching separator not found");const a=r.separatorToPanels.get(i);Ds(a,"Matching panels not found");const o=a.map(m=>s.panels.indexOf(m)),l=ZU({groupId:s.id}).getLayout(),u=dp({delta:t,initialLayout:l,panelConstraints:r.derivedPanelConstraints,pivotIndices:o,prevLayout:l,trigger:"keyboard"}),d=xd({layout:u,panelConstraints:r.derivedPanelConstraints});Wh(l,d)||pa(m=>({mountedGroups:new Map(m.mountedGroups).set(s,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:d,separatorToPanels:r.separatorToPanels})}))}function D4(e){if(e.defaultPrevented)return;const t=e.currentTarget,s=Sv(t);if(!s.disabled)switch(e.key){case"ArrowDown":{e.preventDefault(),s.orientation==="vertical"&&$c(t,5);break}case"ArrowLeft":{e.preventDefault(),s.orientation==="horizontal"&&$c(t,-5);break}case"ArrowRight":{e.preventDefault(),s.orientation==="horizontal"&&$c(t,5);break}case"ArrowUp":{e.preventDefault(),s.orientation==="vertical"&&$c(t,-5);break}case"End":{e.preventDefault(),$c(t,100);break}case"Enter":{e.preventDefault();const r=Sv(t),{derivedPanelConstraints:i,layout:a,separatorToPanels:o}=QU(r),l=r.separators.find(f=>f.element===t);Ds(l,"Matching separator not found");const u=o.get(l);Ds(u,"Matching panels not found");const d=u[0],m=i.find(f=>f.panelId===d.id);if(Ds(m,"Panel metadata not found"),m.collapsible){const f=a[d.id],x=m.collapsedSize===f?r.inMemoryLastExpandedPanelSizes[d.id]??m.minSize:m.collapsedSize;$c(t,x-f)}break}case"F6":{e.preventDefault();const r=Sv(t).separators.map(o=>o.element),i=Array.from(r).findIndex(o=>o===e.currentTarget);Ds(i!==null,"Index not found");const a=e.shiftKey?i>0?i-1:r.length-1:i+1<r.length?i+1:0;r[a].focus();break}case"Home":{e.preventDefault(),$c(t,-100);break}}}const k2e=e=>e,WS=()=>{},JU=1,eG=2,tG=4,sG=8,I4={coarse:10,precise:5};function A2e(e,t,s){let r,i={x:1/0,y:1/0};for(const a of t){const o=YU(s,a.rect);switch(e){case"horizontal":{o.x<=i.x&&(r=a,i=o);break}case"vertical":{o.y<=i.y&&(r=a,i=o);break}}}return r?{distance:i,hitRegion:r}:void 0}let qx;function E2e(){return qx===void 0&&(typeof matchMedia=="function"?qx=!!matchMedia("(pointer:coarse)").matches:qx=!1),qx}function T2e(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function P2e(e,t){if(e===t)throw new Error("Cannot compare node with itself");const s={a:O4(e),b:O4(t)};let r;for(;s.a.at(-1)===s.b.at(-1);)e=s.a.pop(),t=s.b.pop(),r=e;Ds(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:L4(M4(s.a)),b:L4(M4(s.b))};if(i.a===i.b){const a=r.childNodes,o={a:s.a.at(-1),b:s.b.at(-1)};let l=a.length;for(;l--;){const u=a[l];if(u===o.a)return 1;if(u===o.b)return-1}}return Math.sign(i.a-i.b)}const R2e=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function D2e(e){const t=getComputedStyle(nG(e)??e).display;return t==="flex"||t==="inline-flex"}function I2e(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||D2e(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||R2e.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function M4(e){let t=e.length;for(;t--;){const s=e[t];if(Ds(s,"Missing node"),I2e(s))return s}return null}function L4(e){return e&&Number(getComputedStyle(e).zIndex)||0}function O4(e){const t=[];for(;e;)t.push(e),e=nG(e);return t}function nG(e){const{parentNode:t}=e;return T2e(t)?t.host:t}function M2e(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function L2e({groupElement:e,hitRegion:t,pointerEventTarget:s}){if(!KU(s)||s.contains(e)||e.contains(s))return!0;if(P2e(s,e)>0){let r=s;for(;r;){if(r.contains(e))return!0;if(M2e(r.getBoundingClientRect(),t))return!1;r=r.parentElement}}return!0}function rG(e,t){const s=[];return t.forEach((r,i)=>{if(i.disabled)return;const a=E2e()?I4.coarse:I4.precise,o=XU(i),l=A2e(i.orientation,o,{x:e.clientX,y:e.clientY});l&&l.distance.x<=a&&l.distance.y<=a&&L2e({groupElement:i.element,hitRegion:l.hitRegion.rect,pointerEventTarget:e.target})&&s.push(l.hitRegion)}),s}function F4(e){if(e.defaultPrevented)return;const{mountedGroups:t}=ko(),s=rG(e,t),r=new Set,i=new Set,a=new Set,o=new Map;let l=!1;s.forEach(u=>{r.add(u.group),u.panels.forEach(m=>{i.add(m)}),u.separator&&(a.add(u.separator),l||(l=!0,u.separator.element.focus()));const d=t.get(u.group);d&&o.set(u.group,d.layout)}),pa({interactionState:{hitRegions:s,initialLayoutMap:o,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),s.length&&e.preventDefault()}function O2e({cursorFlags:e,groups:t,state:s}){let r=0,i=0;switch(s){case"active":case"hover":t.forEach(a=>{if(!a.disableCursor)switch(a.orientation){case"horizontal":{r++;break}case"vertical":{i++;break}}})}if(r===0&&i===0)return null;switch(s){case"active":{const a=(e&JU)!==0,o=(e&eG)!==0,l=(e&tG)!==0,u=(e&sG)!==0;if(e){if(a)return l?"se-resize":u?"ne-resize":"e-resize";if(o)return l?"sw-resize":u?"nw-resize":"w-resize";if(l)return"s-resize";if(u)return"n-resize"}break}}return r>0&&i>0?"move":r>0?"ew-resize":"ns-resize"}const B4=new WeakMap;function mA(e){if(e.defaultView===null||e.defaultView===void 0)return;let{prevStyle:t,styleSheet:s}=B4.get(e)??{};s===void 0&&(s=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[s]);const{cursorFlags:r,interactionState:i}=ko();switch(i.state){case"active":case"hover":{const a=O2e({cursorFlags:r,groups:i.hitRegions.map(l=>l.group),state:i.state}),o=`*{cursor: ${a} !important; ${i.state==="active"?"touch-action: none;":""} }`;if(t===o)return;t=o,a?s.cssRules.length===0?s.insertRule(o):s.replaceSync(o):s.cssRules.length===1&&s.deleteRule(0);break}case"inactive":{t=void 0,s.cssRules.length===1&&s.deleteRule(0);break}}B4.set(e,{prevStyle:t,styleSheet:s})}function iG({document:e,event:t,hitRegions:s,initialLayoutMap:r,mountedGroups:i,pointerDownAtPoint:a}){let o=0;const l=new Map(i);s.forEach(u=>{const{group:d,groupSize:m}=u,{disableCursor:f,orientation:x,panels:v}=d;let y=0;a?x==="horizontal"?y=(t.clientX-a.x)/m*100:y=(t.clientY-a.y)/m*100:x==="horizontal"?y=t.clientX<0?-100:100:y=t.clientY<0?-100:100;const w=r.get(d),{defaultLayoutDeferred:S,derivedPanelConstraints:C,layout:_,separatorToPanels:j}=i.get(d)??{defaultLayoutDeferred:!1};if(C&&w&&_&&j){const T=dp({delta:y,initialLayout:w,panelConstraints:C,pivotIndices:u.panels.map(E=>v.indexOf(E)),prevLayout:_,trigger:"mouse-or-touch"});if(Wh(T,_)){if(y!==0&&!f)switch(x){case"horizontal":{o|=y<0?JU:eG;break}case"vertical":{o|=y<0?tG:sG;break}}}else{l.set(u.group,{defaultLayoutDeferred:S,derivedPanelConstraints:C,layout:T,separatorToPanels:j});const E=u.group.panels.map(({id:A})=>A).join(",");u.group.inMemoryLayouts[E]=T}}}),pa({cursorFlags:o,mountedGroups:l}),mA(e)}function z4(e){const{interactionState:t,mountedGroups:s}=ko();t.state==="active"&&iG({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:s})}function $4(e){if(e.defaultPrevented)return;const{interactionState:t,mountedGroups:s}=ko();switch(t.state){case"active":{if(e.buttons===0){pa(r=>r.interactionState.state==="inactive"?r:{cursorFlags:0,interactionState:{state:"inactive"}});return}iG({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:s,pointerDownAtPoint:t.pointerDownAtPoint});break}default:{const r=rG(e,s);r.length===0?t.state!=="inactive"&&pa({interactionState:{state:"inactive"}}):pa({interactionState:{hitRegions:r,state:"hover"}}),mA(e.currentTarget);break}}}function H4(e){if(e.defaultPrevented)return;e.preventDefault();const{interactionState:t}=ko();t.state==="active"&&(pa({cursorFlags:0,interactionState:{state:"inactive"}}),mA(e.currentTarget))}function U4(e){let t=0,s=0;const r={};for(const a of e)if(a.defaultSize!==void 0){t++;const o=Aa(a.defaultSize);s+=o,r[a.panelId]=o}else r[a.panelId]=void 0;const i=e.length-t;if(i!==0){const a=Aa((100-s)/i);for(const o of e)o.defaultSize===void 0&&(r[o.panelId]=a)}return r}function F2e(e,t,s){const r=s[0];if(!r)return;const i=e.panels.find(u=>u.element===t);if(!i||!i.onResize)return;const a=fh({group:e}),o=i.mutableValues.prevSize,l={asPercentage:Aa(r.inlineSize/a*100),inPixels:r.inlineSize};i.mutableValues.prevSize=l,i.onResize(l,i.id,o)}function B2e(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function z2e(e,t){const s=e.map(i=>i.id),r=Object.keys(t);if(s.length!==r.length)return!1;for(const i of s)if(!r.includes(i))return!1;return!0}const Nu=new Map;function $2e(e){let t=!0;Ds(e.element.ownerDocument.defaultView,"Cannot register an unmounted Group");const s=e.element.ownerDocument.defaultView.ResizeObserver,r=new Set,i=new Set,a=new s(y=>{for(const w of y){const{borderBoxSize:S,target:C}=w;if(C===e.element){if(t){if(fh({group:e})===0)return;pa(_=>{const j=_.mountedGroups.get(e);if(j){const T=R4(e),E=j.defaultLayoutDeferred?U4(T):j.layout,A=xd({layout:E,panelConstraints:T});return!j.defaultLayoutDeferred&&Wh(E,A)&&B2e(j.derivedPanelConstraints,T)?_:{mountedGroups:new Map(_.mountedGroups).set(e,{defaultLayoutDeferred:!1,derivedPanelConstraints:T,layout:A,separatorToPanels:j.separatorToPanels})}}return _})}}else F2e(e,C,S)}});a.observe(e.element),e.panels.forEach(y=>{Ds(!r.has(y.id),`Panel ids must be unique; id "${y.id}" was used more than once`),r.add(y.id),y.onResize&&a.observe(y.element)});const o=fh({group:e}),l=R4(e),u=e.panels.map(({id:y})=>y).join(",");let d=e.defaultLayout;d&&(z2e(e.panels,d)||(d=void 0));const m=e.inMemoryLayouts[u]??d??U4(l),f=xd({layout:m,panelConstraints:l}),x=XU(e),v=e.element.ownerDocument;return pa(y=>{const w=new Map;return Nu.set(v,(Nu.get(v)??0)+1),x.forEach(S=>{S.separator&&w.set(S.separator,S.panels)}),{mountedGroups:new Map(y.mountedGroups).set(e,{defaultLayoutDeferred:o===0,derivedPanelConstraints:l,layout:f,separatorToPanels:w})}}),e.separators.forEach(y=>{Ds(!i.has(y.id),`Separator ids must be unique; id "${y.id}" was used more than once`),i.add(y.id),y.element.addEventListener("keydown",D4)}),Nu.get(v)===1&&(v.addEventListener("pointerdown",F4),v.addEventListener("pointerleave",z4),v.addEventListener("pointermove",$4),v.addEventListener("pointerup",H4)),function(){t=!1,Nu.set(v,Math.max(0,(Nu.get(v)??0)-1)),pa(y=>{const w=new Map(y.mountedGroups);return w.delete(e),{mountedGroups:w}}),e.separators.forEach(y=>{y.element.removeEventListener("keydown",D4)}),Nu.get(v)||(v.removeEventListener("pointerdown",F4),v.removeEventListener("pointerleave",z4),v.removeEventListener("pointermove",$4),v.removeEventListener("pointerup",H4)),a.disconnect()}}function fA(e){const t=p.useId();return`${e??t}`}const Ed=typeof window<"u"?p.useLayoutEffect:p.useEffect;function pA(e){const t=p.useRef(e);return Ed(()=>{t.current=e},[e]),p.useCallback((...s)=>t.current?.(...s),[t])}function gA(...e){return pA(t=>{e.forEach(s=>{if(s)switch(typeof s){case"function":{s(t);break}case"object":{s.current=t;break}}})})}function H2e(e){const t=p.useRef({...e});return Ed(()=>{for(const s in e)t.current[s]=e[s]},[e]),t.current}const aG="--react-resizable-panels--panel--pointer-events";function oG(e,t){const s=e.replace(/[^a-zA-Z0-9\-_]/g,""),r=t.replace(/[^a-zA-Z0-9\-_]/g,"");return`--react-resizable-panels--${s}--${r}`}const lG=p.createContext(null);function U2e(e,t){const s=p.useRef({getLayout:()=>({}),setLayout:k2e});p.useImperativeHandle(t,()=>s.current,[]),Ed(()=>{Object.assign(s.current,ZU({groupId:e}))})}function G4({children:e,className:t,defaultLayout:s,disableCursor:r,disabled:i,elementRef:a,groupRef:o,id:l,onLayoutChange:u,orientation:d="horizontal",style:m,...f}){const x=p.useRef({}),v=pA(z=>{Wh(x.current,z)||(x.current=z,u?.(z))}),y=fA(l),[w,S]=p.useState(!1),C=p.useRef(null),[_,j]=p.useState(s??{}),[T,E]=p.useState([]),[A,R]=p.useState([]),D=p.useRef({lastExpandedPanelSizes:{},layouts:{}}),M=gA(C,a);U2e(y,o);const P=p.useMemo(()=>({id:y,orientation:d,registerPanel:z=>(E(H=>UN(d,[...H,z])),()=>{E(H=>H.filter(I=>I!==z))}),registerSeparator:z=>(R(H=>UN(d,[...H,z])),()=>{R(H=>H.filter(I=>I!==z))})}),[y,d]),O=H2e({defaultLayout:s,disableCursor:r}),F=p.useRef(null);Ed(()=>{const z=C.current;if(z===null)return;const H={defaultLayout:O.defaultLayout,disableCursor:!!O.disableCursor,disabled:!!i,element:z,id:y,inMemoryLastExpandedPanelSizes:D.current.lastExpandedPanelSizes,inMemoryLayouts:D.current.layouts,orientation:d,panels:T,separators:A};F.current=H;const I=$2e(H),V=ko().mountedGroups.get(H);if(V){const{defaultLayoutDeferred:L,derivedPanelConstraints:G,layout:Y}=V;!L&&G.length>0&&(j(Y),v?.(Y))}const B=ad.addListener("interactionStateChange",L=>{L.state==="active"?S(L.hitRegions.some(G=>G.group===H)):S(!1)}),K=ad.addListener("mountedGroupsChange",L=>{const G=L.get(H);if(G){const{defaultLayoutDeferred:Y,derivedPanelConstraints:q,layout:Q}=G;if(Y||q.length===0)return;j(Q),v?.(Q)}});return()=>{F.current=null,I(),B(),K()}},[i,y,v,d,T,A,O]),p.useEffect(()=>{const z=F.current;z&&(z.defaultLayout=s,z.disableCursor=!!r)});const $={[aG]:w?"none":void 0};for(const z in _){const H=oG(y,z),I=_[z];$[H]=I}return n.jsx(lG.Provider,{value:P,children:n.jsx("div",{...f,"aria-orientation":d,className:t,"data-group":!0,"data-testid":y,id:y,ref:M,style:{...m,...$,display:"flex",flexDirection:d==="horizontal"?"row":"column",flexWrap:"nowrap"},children:e})})}function xA(){const e=p.useContext(lG);return Ds(e,"Group Context not found; did you render a Panel or Separator outside of a Group?"),e}function G2e({groupId:e,panelId:t}){const s=()=>{const{mountedGroups:l}=ko();for(const[u,{defaultLayoutDeferred:d,derivedPanelConstraints:m,layout:f,separatorToPanels:x}]of l)if(u.id===e)return{defaultLayoutDeferred:d,derivedPanelConstraints:m,group:u,layout:f,separatorToPanels:x};throw Error(`Group ${e} not found`)},r=()=>{const l=s().derivedPanelConstraints.find(u=>u.panelId===t);if(l!==void 0)return l;throw Error(`Panel constraints not found for Panel ${t}`)},i=()=>{const l=s().group.panels.find(u=>u.id===t);if(l!==void 0)return l;throw Error(`Layout not found for Panel ${t}`)},a=()=>{const l=s().layout[t];if(l!==void 0)return l;throw Error(`Layout not found for Panel ${t}`)},o=l=>{const u=a();if(l===u)return;const{defaultLayoutDeferred:d,derivedPanelConstraints:m,group:f,layout:x,separatorToPanels:v}=s(),y=f.panels.findIndex(_=>_.id===t),w=y===f.panels.length-1,S=dp({delta:w?u-l:l-u,initialLayout:x,panelConstraints:m,pivotIndices:w?[y-1,y]:[y,y+1],prevLayout:x,trigger:"imperative-api"}),C=xd({layout:S,panelConstraints:m});Wh(x,C)||pa(_=>({mountedGroups:new Map(_.mountedGroups).set(f,{defaultLayoutDeferred:d,derivedPanelConstraints:m,layout:C,separatorToPanels:v})}))};return{collapse:()=>{const{collapsible:l,collapsedSize:u}=r(),{mutableValues:d}=i(),m=a();l&&m!==u&&(d.expandToSize=m,o(u))},expand:()=>{const{collapsible:l,collapsedSize:u,minSize:d}=r(),{mutableValues:m}=i(),f=a();if(l&&f===u){let x=m.expandToSize??d;x===0&&(x=1),o(x)}},getSize:()=>{const{group:l}=s(),u=a(),{element:d}=i(),m=l.orientation==="horizontal"?d.offsetWidth:d.offsetHeight;return{asPercentage:u,inPixels:m}},isCollapsed:()=>{const{collapsible:l,collapsedSize:u}=r(),d=a();return l&&Ur(u,d)},resize:l=>{if(a()!==l){let u;switch(typeof l){case"number":{const{group:d}=s(),m=fh({group:d});u=Aa(l/m*100);break}case"string":{u=parseFloat(l);break}}o(u)}}}}function V2e(e,t){const{id:s}=xA(),r=p.useRef({collapse:WS,expand:WS,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:WS});p.useImperativeHandle(t,()=>r.current,[]),Ed(()=>{Object.assign(r.current,G2e({groupId:s,panelId:e}))})}function V4({children:e,className:t,collapsedSize:s="0%",collapsible:r=!1,defaultSize:i,elementRef:a,id:o,maxSize:l="100%",minSize:u="0%",onResize:d,panelRef:m,style:f,...x}){const v=!!o,y=fA(o),w=p.useRef(null),S=gA(w,a),{id:C,registerPanel:_}=xA(),j=d!==null,T=pA((A,R,D)=>{d?.(A,o,D)});Ed(()=>{const A=w.current;if(A!==null)return _({element:A,id:y,idIsStable:v,mutableValues:{expandToSize:void 0,prevSize:void 0},onResize:j?T:void 0,panelConstraints:{collapsedSize:s,collapsible:r,defaultSize:i,maxSize:l,minSize:u}})},[s,r,i,j,y,v,l,u,T,_]),V2e(y,m);const E=oG(C,y);return n.jsx("div",{...x,"data-panel":!0,"data-testid":y,id:y,ref:S,style:{...q2e,flexBasis:0,flexGrow:`var(${E}, 1)`,flexShrink:1,overflow:"hidden",pointerEvents:`var(${aG})`},children:n.jsx("div",{className:t,style:{width:"100%",height:"100%",...f},children:e})})}const q2e={minHeight:"unset",maxHeight:"unset",height:"unset",minWidth:"unset",maxWidth:"unset",width:"unset",flex:"unset",flexBasis:"unset",flexShrink:"unset",flexGrow:"unset",border:"unset",borderWidth:"unset",padding:"unset",margin:"unset"};function W2e({layout:e,panelConstraints:t,panelId:s,panelIndex:r}){let i,a;const o=e[s],l=t.find(u=>u.panelId===s);if(l){const u=l.maxSize,d=a=l.collapsible?l.collapsedSize:l.minSize,m=[r,r+1];a=xd({layout:dp({delta:d-o,initialLayout:e,panelConstraints:t,pivotIndices:m,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[s],i=xd({layout:dp({delta:u-o,initialLayout:e,panelConstraints:t,pivotIndices:m,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[s]}return{valueControls:s,valueMax:i,valueMin:a,valueNow:o}}function q4({children:e,className:t,elementRef:s,id:r,style:i,...a}){const o=fA(r),[l,u]=p.useState({}),[d,m]=p.useState("inactive"),[f,x]=p.useState(null),v=gA(x,s),{id:y,orientation:w,registerSeparator:S}=xA(),C=w==="horizontal"?"vertical":"horizontal";return Ed(()=>{if(f!==null){const _={element:f,id:o},j=S(_),T=ad.addListener("interactionStateChange",A=>{m(A.state!=="inactive"&&A.hitRegions.some(R=>R.separator===_)?A.state:"inactive")}),E=ad.addListener("mountedGroupsChange",A=>{A.forEach(({derivedPanelConstraints:R,layout:D,separatorToPanels:M},P)=>{if(P.id===y){const O=M.get(_);if(O){const F=O[0],$=P.panels.indexOf(F);u(W2e({layout:D,panelConstraints:R,panelId:F.id,panelIndex:$}))}}})});return()=>{T(),E(),j()}}},[f,y,o,S]),n.jsx("div",{...a,"aria-controls":l.valueControls,"aria-orientation":C,"aria-valuemax":l.valueMax,"aria-valuemin":l.valueMin,"aria-valuenow":l.valueNow,children:e,className:t,"data-separator":d,"data-testid":o,id:o,ref:v,role:"separator",style:{flexBasis:"auto",...i,flexGrow:0,flexShrink:0},tabIndex:0})}function K2e(e){return e<=2?"max-w-72":e<=4?"max-w-56":e<=6?"max-w-48":e<=9?"max-w-40":"max-w-36"}const Y2e={idle:"bg-warning",running:"bg-success","claude-active":"bg-primary",exited:"bg-destructive"},X2e={idle:{label:"Ready",color:"bg-muted text-muted-foreground",icon:yo},planning:{label:"Planning",color:"bg-info/20 text-info",icon:Nr},coding:{label:"Coding",color:"bg-primary/20 text-primary",icon:qb},qa_review:{label:"QA Review",color:"bg-warning/20 text-warning",icon:Nr},qa_fixing:{label:"Fixing",color:"bg-warning/20 text-warning",icon:uo},complete:{label:"Complete",color:"bg-success/20 text-success",icon:Xe},failed:{label:"Failed",color:"bg-destructive/20 text-destructive",icon:Ke}};function Z2e({title:e,associatedTask:t,onTitleChange:s,terminalCount:r=1}){const[i,a]=p.useState(!1),[o,l]=p.useState(""),u=K2e(r),d=p.useRef(null),m=p.useCallback(()=>{l(e),a(!0),setTimeout(()=>{d.current?.focus(),d.current?.select()},0)},[e]),f=p.useCallback(()=>{const y=o.trim();y&&y!==e&&s(y),a(!1)},[o,e,s]),x=p.useCallback(()=>{a(!1),l("")},[]),v=p.useCallback(y=>{y.key==="Enter"?(y.preventDefault(),f()):y.key==="Escape"&&(y.preventDefault(),x())},[f,x]);return i?n.jsx("input",{ref:d,type:"text",value:o,onChange:y=>l(y.target.value),onKeyDown:v,onBlur:f,onClick:y=>y.stopPropagation(),className:J("text-xs font-medium text-foreground bg-transparent border border-primary/50 rounded px-1 py-0.5 outline-none focus:border-primary",u),style:{width:`${Math.max(o.length*6+16,60)}px`}}):t?n.jsx(ul,{children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx("span",{className:J("text-xs font-medium text-foreground truncate cursor-text hover:text-primary/80 transition-colors",u),onDoubleClick:y=>{y.stopPropagation(),m()},children:e})}),n.jsxs(mt,{side:"bottom",className:"max-w-xs",children:[n.jsx("p",{className:"text-sm",children:t.description}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Double-click to rename"})]})]})}):n.jsx(ul,{children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx("span",{className:J("text-xs font-medium text-foreground truncate cursor-text hover:text-primary/80 transition-colors",u),onDoubleClick:y=>{y.stopPropagation(),m()},children:e})}),n.jsx(mt,{side:"bottom",children:n.jsx("p",{className:"text-xs",children:"Double-click to rename"})})]})})}function Q2e({terminalId:e,backlogTasks:t,associatedTask:s,onTaskSelect:r,onClearTask:i,onNewTaskClick:a}){const o=s?.executionProgress?.phase||"idle",l=X2e[o],u=l.icon;return s?n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsxs("button",{className:J("flex items-center gap-1.5 h-6 px-2 rounded text-[10px] font-medium transition-colors",l.color,"hover:opacity-80 cursor-pointer"),onClick:d=>d.stopPropagation(),children:[o==="planning"||o==="coding"||o==="qa_review"||o==="qa_fixing"?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(u,{className:"h-3 w-3"}),n.jsx("span",{children:l.label}),n.jsx(bt,{className:"h-2.5 w-2.5 opacity-60"})]})}),n.jsxs(La,{align:"start",className:"w-56",children:[n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"Current task"}),n.jsx("div",{className:"px-2 py-1 text-sm font-medium truncate",children:s.title}),s.executionProgress?.message&&n.jsx("div",{className:"px-2 py-1 text-xs text-muted-foreground truncate",children:s.executionProgress.message}),n.jsx(ma,{}),t.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"Switch to..."}),t.filter(d=>d.id!==s.id).slice(0,5).map(d=>n.jsxs(Pn,{onClick:()=>r(d.id),className:"text-xs",children:[n.jsx(Uu,{className:"h-3 w-3 mr-2 text-muted-foreground"}),n.jsx("span",{className:"truncate",children:d.title})]},d.id)),n.jsx(ma,{})]}),n.jsxs(Pn,{onClick:i,className:"text-xs text-muted-foreground",children:[n.jsx(Ss,{className:"h-3 w-3 mr-2"}),"Clear task"]})]})]}):n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsxs("button",{className:"flex items-center gap-1.5 h-6 px-2 rounded text-[10px] font-medium transition-colors border border-border/50 bg-card/50 hover:bg-card hover:border-border text-muted-foreground hover:text-foreground",onClick:d=>d.stopPropagation(),children:[n.jsx(Uu,{className:"h-3 w-3"}),n.jsx("span",{children:"Select task..."}),n.jsx(bt,{className:"h-2.5 w-2.5 opacity-60"})]})}),n.jsx(La,{align:"start",className:"w-56",children:t.length>0?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"Available tasks"}),t.slice(0,8).map(d=>n.jsxs(Pn,{onClick:()=>r(d.id),className:"text-xs",children:[n.jsx(Uu,{className:"h-3 w-3 mr-2 text-muted-foreground"}),n.jsx("span",{className:"truncate",children:d.title})]},d.id)),a&&n.jsxs(n.Fragment,{children:[n.jsx(ma,{}),n.jsxs(Pn,{onClick:d=>{d.stopPropagation(),a()},className:"text-xs text-primary",children:[n.jsx(fs,{className:"h-3 w-3 mr-2"}),"Add new task"]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:"No tasks available"}),a?n.jsxs(Pn,{onClick:d=>{d.stopPropagation(),a()},className:"text-xs text-primary",children:[n.jsx(fs,{className:"h-3 w-3 mr-2"}),"Add new task"]}):n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground italic",children:"Create tasks in the Kanban board"})]})})]})}function J2e({terminalId:e,projectPath:t,currentWorktree:s,onCreateWorktree:r,onSelectWorktree:i}){const{t:a}=Re(["terminal","common"]),[o,l]=p.useState([]),[u,d]=p.useState([]),[m,f]=p.useState([]),[x,v]=p.useState(!1),[y,w]=p.useState(!1),[S,C]=p.useState(null),[_,j]=p.useState(!1),T=Ot(M=>M.projects.find(P=>P.path===t)),E=async()=>{if(t){v(!0);try{const[M,P,O]=await Promise.all([window.electronAPI.listTerminalWorktrees(t),T?.id?window.electronAPI.listWorktrees(T.id):Promise.resolve(null),window.electronAPI.listOtherWorktrees(t)]);if(M.success&&M.data){const F=s?M.data.filter($=>$.worktreePath!==s.worktreePath):M.data;l(F)}if(P?.success&&P.data?.worktrees){const F=s?P.data.worktrees.filter($=>$.path!==s.worktreePath):P.data.worktrees;d(F)}else d([]);if(O?.success&&O.data){const F=s?O.data.filter($=>$.path!==s.worktreePath):O.data;f(F)}else f([])}catch(M){console.error("Failed to fetch worktrees:",M)}finally{v(!1)}}},A=M=>{const P={name:M.specName,worktreePath:M.path,branchName:M.branch,baseBranch:M.baseBranch,hasGitBranch:!0,createdAt:new Date().toISOString(),terminalId:e};i(P)},R=M=>{const P={name:M.displayName,worktreePath:M.path,branchName:M.branch??"",baseBranch:"",hasGitBranch:M.branch!==null,createdAt:new Date().toISOString(),terminalId:e};i(P)};p.useEffect(()=>{y&&t&&E()},[y,t,s,T?.id]);const D=async()=>{if(!(!S||!t)){j(!0);try{const M=await window.electronAPI.removeTerminalWorktree(t,S.name,S.hasGitBranch);M.success?await E():console.error("Failed to delete worktree:",M.error)}catch(M){console.error("Failed to delete worktree:",M)}finally{j(!1),C(null)}}};return n.jsxs(n.Fragment,{children:[n.jsxs(mo,{open:y,onOpenChange:w,children:[n.jsx(fo,{asChild:!0,children:n.jsxs("button",{className:J("flex items-center gap-1 h-6 px-2 rounded text-xs font-medium transition-colors","hover:bg-amber-500/10 hover:text-amber-500 text-muted-foreground"),onClick:M=>M.stopPropagation(),children:[n.jsx(Hf,{className:"h-3 w-3"}),n.jsx("span",{children:a("terminal:worktree.create")}),n.jsx(bt,{className:"h-2.5 w-2.5 opacity-60"})]})}),n.jsxs(La,{align:"start",className:"w-56",children:[n.jsxs(Pn,{onClick:M=>{M.stopPropagation(),w(!1),r()},className:"text-xs text-amber-500",children:[n.jsx(fs,{className:"h-3 w-3 mr-2"}),a("terminal:worktree.createNew")]}),n.jsx(ma,{}),n.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:x?n.jsx("div",{className:"flex items-center justify-center py-2",children:n.jsx(we,{className:"h-4 w-4 animate-spin text-muted-foreground"})}):n.jsxs(n.Fragment,{children:[o.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:a("terminal:worktree.existing")}),o.map(M=>n.jsxs(Pn,{onClick:P=>{P.stopPropagation(),w(!1),i(M)},className:"text-xs group",children:[n.jsx(Hf,{className:"h-3 w-3 mr-2 text-amber-500/70 shrink-0"}),n.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n.jsx("span",{className:"truncate font-medium",children:M.name}),M.branchName&&n.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:M.branchName})]}),n.jsx("button",{onClick:P=>{P.stopPropagation(),P.preventDefault(),C(M)},className:"ml-2 p-1 rounded hover:bg-destructive/10 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity shrink-0",title:a("common:delete"),children:n.jsx(or,{className:"h-3 w-3"})})]},M.name))]}),u.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(ma,{}),n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:a("terminal:worktree.taskWorktrees")}),u.map(M=>n.jsxs(Pn,{onClick:P=>{P.stopPropagation(),w(!1),A(M)},className:"text-xs group",children:[n.jsx(Uu,{className:"h-3 w-3 mr-2 text-cyan-500/70 shrink-0"}),n.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n.jsx("span",{className:"truncate font-medium",children:M.specName}),M.branch&&n.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:M.branch})]})]},M.specName))]}),m.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(ma,{}),n.jsx("div",{className:"px-2 py-1.5 text-xs text-muted-foreground",children:a("terminal:worktree.otherWorktrees")}),m.map(M=>n.jsxs(Pn,{onClick:P=>{P.stopPropagation(),w(!1),R(M)},className:"text-xs group",children:[n.jsx(Ire,{className:"h-3 w-3 mr-2 text-purple-500/70 shrink-0"}),n.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[n.jsx("span",{className:"truncate font-medium",children:M.displayName}),n.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:M.branch!==null?M.branch:`${M.commitSha} ${a("terminal:worktree.detached")}`})]})]},M.path))]})]})})]})]}),n.jsx(Kr,{open:!!S,onOpenChange:M=>!M&&C(null),children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:a("terminal:worktree.deleteTitle","Delete Worktree?")}),n.jsxs(Lr,{children:[a("terminal:worktree.deleteDescription","This will permanently delete the worktree and its branch. Any uncommitted changes will be lost."),S&&n.jsxs("span",{className:"block mt-2 font-mono text-sm",children:[S.name,S.branchName&&n.jsxs("span",{className:"text-muted-foreground",children:[" (",S.branchName,")"]})]})]})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:_,children:a("common:cancel")}),n.jsx(pi,{onClick:D,disabled:_,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:_?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),a("common:deleting","Deleting...")]}):n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),a("common:delete")]})})]})]})})]})}function eEe({terminalId:e,title:t,status:s,isClaudeMode:r,tasks:i,associatedTask:a,onClose:o,onInvokeClaude:l,onTitleChange:u,onTaskSelect:d,onClearTask:m,onNewTaskClick:f,terminalCount:x=1,worktreeConfig:v,projectPath:y,onCreateWorktree:w,onSelectWorktree:S,onOpenInIDE:C,dragHandleListeners:_,isExpanded:j,onToggleExpand:T}){const{t:E}=Re(["terminal","common"]),A=i.filter(R=>R.status==="backlog");return n.jsxs("div",{className:"electron-no-drag group/header flex h-9 items-center justify-between border-b border-border/50 bg-card/30 px-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[_&&n.jsx("div",{..._,className:J("flex items-center justify-center","w-4 h-6 -ml-1","opacity-0 group-hover/header:opacity-60","hover:opacity-100 transition-opacity","cursor-grab active:cursor-grabbing","text-muted-foreground hover:text-foreground"),children:n.jsx(Ure,{className:"h-3.5 w-3.5"})}),n.jsx("div",{className:J("h-2 w-2 rounded-full",Y2e[s])}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(iO,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx(Z2e,{title:t,associatedTask:a,onTitleChange:u,terminalCount:x})]}),r&&n.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-primary bg-primary/10 px-1.5 py-0.5 rounded",title:"Claude",children:[n.jsx(Qt,{className:"h-2.5 w-2.5"}),x<4&&n.jsx("span",{children:"Claude"})]}),r&&n.jsx(Q2e,{terminalId:e,backlogTasks:A,associatedTask:a,onTaskSelect:d,onClearTask:m,onNewTaskClick:f}),v?n.jsxs("span",{className:J("flex items-center gap-1 text-[10px] font-medium text-amber-500 bg-amber-500/10 px-1.5 py-0.5 rounded",x>=6?"max-w-20":x>=4?"max-w-28":"max-w-40"),title:v.name,children:[n.jsx(Hf,{className:"h-2.5 w-2.5 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:v.name})]}):y&&w&&S&&n.jsx(J2e,{terminalId:e,projectPath:y,currentWorktree:v,onCreateWorktree:w,onSelectWorktree:S})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[v&&C&&n.jsxs(W,{variant:"ghost",size:x>=4?"icon":"sm",className:J("h-6 hover:bg-muted",x>=4?"w-6":"px-2 text-xs gap-1"),onClick:R=>{R.stopPropagation(),C()},title:E("terminal:worktree.openInIDE"),children:[n.jsx(Zt,{className:"h-3 w-3"}),x<4&&E("terminal:worktree.openInIDE")]}),!r&&s!=="exited"&&n.jsxs(W,{variant:"ghost",size:x>=4?"icon":"sm",className:J("h-6 hover:bg-primary/10 hover:text-primary",x>=4?"w-6":"px-2 text-xs gap-1"),onClick:R=>{R.stopPropagation(),l()},title:"Claude",children:[n.jsx(Qt,{className:"h-3 w-3"}),x<4&&n.jsx("span",{children:"Claude"})]}),T&&n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-muted",onClick:R=>{R.stopPropagation(),T()},title:`${E(j?"terminal:expand.collapse":"terminal:expand.expand")} (${navigator.platform.includes("Mac")?"":"Ctrl"}+Shift+E)`,children:j?n.jsx(gie,{className:"h-3.5 w-3.5"}):n.jsx(hie,{className:"h-3.5 w-3.5"})}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-destructive/10 hover:text-destructive",onClick:R=>{R.stopPropagation(),o()},title:`${E("common:close")} (${navigator.platform.includes("Mac")?"":"Ctrl"}+W)`,children:n.jsx(Ss,{className:"h-3.5 w-3.5"})})]})]})}const cG=p.forwardRef(({value:e,onValueChange:t,options:s,placeholder:r="Select...",searchPlaceholder:i="Search...",emptyMessage:a="No results found",disabled:o=!1,className:l,id:u},d)=>{const[m,f]=p.useState(!1),[x,v]=p.useState(""),[y,w]=p.useState(-1),S=p.useRef(null),C=p.useRef(new Map),_=p.useId(),j=s.find(P=>P.value===e),T=j?.label||r,E=p.useMemo(()=>{if(!x.trim())return s;const P=x.toLowerCase();return s.filter(O=>O.label.toLowerCase().includes(P)||O.description?.toLowerCase().includes(P))},[s,x]),A=P=>`${_}-option-${P}`,R=y>=0&&y<E.length?A(y):void 0;p.useEffect(()=>{if(m){const P=setTimeout(()=>{S.current?.focus()},0);return w(-1),()=>clearTimeout(P)}else v(""),w(-1)},[m]),p.useEffect(()=>{w(-1)},[E.length]),p.useEffect(()=>{y>=0&&C.current.get(y)?.scrollIntoView({block:"nearest"})},[y]);const D=P=>{t(P),f(!1),v(""),w(-1)},M=P=>{if(m)switch(P.key){case"ArrowDown":P.preventDefault(),w(O=>O<E.length-1?O+1:0);break;case"ArrowUp":P.preventDefault(),w(O=>O>0?O-1:E.length-1);break;case"Enter":P.preventDefault(),y>=0&&y<E.length&&D(E[y].value);break;case"Escape":P.preventDefault(),f(!1);break;case"Home":P.preventDefault(),E.length>0&&w(0);break;case"End":P.preventDefault(),E.length>0&&w(E.length-1);break}};return n.jsxs(tz,{open:m,onOpenChange:f,children:[n.jsx(sz,{asChild:!0,disabled:o,children:n.jsxs("button",{ref:d,type:"button",role:"combobox","aria-expanded":m,"aria-haspopup":"listbox","aria-controls":m?_:void 0,id:u,className:J("flex h-10 w-full items-center justify-between rounded-lg","border border-border bg-card px-3 py-2 text-sm","text-foreground placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-ring focus:border-primary","disabled:cursor-not-allowed disabled:opacity-50","transition-colors duration-200",l),children:[n.jsx("span",{className:J("truncate",!j&&"text-muted-foreground"),children:T}),n.jsx(bt,{className:"h-4 w-4 shrink-0 text-muted-foreground"})]})}),n.jsxs(G1,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",sideOffset:4,onKeyDown:M,children:[n.jsxs("div",{className:"flex items-center border-b border-border px-3",children:[n.jsx(Nr,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),n.jsx("input",{ref:S,type:"text",role:"searchbox","aria-controls":_,"aria-activedescendant":R,value:x,onChange:P=>v(P.target.value),placeholder:i,className:J("flex h-10 w-full bg-transparent py-3 px-2 text-sm","placeholder:text-muted-foreground","focus:outline-none","disabled:cursor-not-allowed disabled:opacity-50")})]}),n.jsx(zt,{className:"max-h-[300px]",children:n.jsx("div",{id:_,role:"listbox","aria-label":i||r,className:"p-1",children:E.length===0?n.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:a}):E.map((P,O)=>n.jsxs("button",{ref:F=>{F?C.current.set(O,F):C.current.delete(O)},id:A(O),type:"button",role:"option","aria-selected":e===P.value,onClick:()=>D(P.value),onMouseEnter:()=>w(O),className:J("relative flex w-full cursor-default select-none items-center","rounded-md py-2 pl-8 pr-2 text-sm outline-none","hover:bg-accent hover:text-accent-foreground","transition-colors duration-150",y===O&&"bg-accent text-accent-foreground"),children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e===P.value&&n.jsx(Pt,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"truncate",children:P.label})]},P.value))})})]})]})});cG.displayName="Combobox";const Wx="__project_default__";function KS(e,t,s=!1){let r=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9_-]/g,"").replace(/-{2,}/g,"-").replace(/_{2,}/g,"_").replace(/^[-_]+/,"");return t&&(r=r.slice(0,t)),s&&(r=r.replace(/[-_]+$/,"")),r}function tEe({open:e,onOpenChange:t,terminalId:s,projectPath:r,backlogTasks:i,onWorktreeCreated:a}){const{t:o}=Re(["terminal","common"]),[l,u]=p.useState(""),[d,m]=p.useState(),[f,x]=p.useState(!0),[v,y]=p.useState(!1),[w,S]=p.useState(null),C=Ot(V=>V.projects.find(B=>B.path===r)),[_,j]=p.useState([]),[T,E]=p.useState(!1),[A,R]=p.useState(Wx),[D,M]=p.useState(""),P=p.useMemo(()=>KS(l,void 0,!0),[l]),O=P||o("terminal:worktree.namePlaceholder");p.useEffect(()=>{if(!e||!r)return;let V=!0;return(async()=>{E(!0);try{const K=await window.electronAPI.getGitBranches(r);if(!V)return;if(K.success&&K.data&&j(K.data),C?.settings?.mainBranch)M(C.settings.mainBranch);else{const L=await window.electronAPI.detectMainBranch(r);if(!V)return;L.success&&L.data&&M(L.data)}}catch(K){console.error("Failed to fetch branches:",K)}finally{V&&E(!1)}})(),()=>{V=!1}},[e,r,C?.settings?.mainBranch]);const F=p.useCallback(V=>{const B=V.target.value.toLowerCase().replace(/\s+/g,"-");u(B),S(null)},[]),$=p.useCallback(V=>{if(V==="none"){m(void 0);return}if(m(V),!l){const B=i.find(K=>K.id===V);if(B){const K=KS(B.title,40,!0);u(K)}}},[i,l]),z=async()=>{const V=KS(l,void 0,!0);if(!V){S(o("terminal:worktree.nameRequired"));return}if(!/^[a-z0-9][a-z0-9_-]*[a-z0-9]$/.test(V)&&!/^[a-z0-9]$/.test(V)){S(o("terminal:worktree.nameInvalid"));return}y(!0),S(null);try{const B=await window.electronAPI.createTerminalWorktree({terminalId:s,name:V,taskId:d,createGitBranch:f,projectPath:r,baseBranch:A!==Wx?A:void 0});B.success&&B.config?(a(B.config),t(!1),u(""),m(void 0),x(!0)):S(B.error||o("common:errors.generic"))}catch(B){S(B instanceof Error?B.message:o("common:errors.generic"))}finally{y(!1)}},H=V=>{V||(u(""),m(void 0),x(!0),R(Wx),S(null)),t(V)},I=p.useMemo(()=>{const V=_.filter(K=>K!==D).map(K=>({value:K,label:K})),B=[{value:Wx,label:o("terminal:worktree.useProjectDefault",{branch:D||"main"})},...V];return D&&!_.includes(D)&&B.push({value:D,label:D}),B},[_,D,o]);return n.jsx($s,{open:e,onOpenChange:H,children:n.jsxs(Bs,{className:"sm:max-w-[425px]",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Hf,{className:"h-5 w-5"}),o("terminal:worktree.createTitle")]}),n.jsx(ws,{children:o("terminal:worktree.createDescription")})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"worktree-name",children:o("terminal:worktree.name")}),n.jsx(Oe,{id:"worktree-name",value:l,onChange:F,placeholder:o("terminal:worktree.namePlaceholder"),disabled:v,autoFocus:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("terminal:worktree.nameHelp")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{className:"flex items-center gap-2",children:[n.jsx(Uu,{className:"h-4 w-4"}),o("terminal:worktree.associateTask"),n.jsxs("span",{className:"text-muted-foreground text-xs",children:["(",o("common:labels.optional"),")"]})]}),n.jsxs(_t,{value:d||"none",onValueChange:$,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:o("terminal:worktree.selectTask")})}),n.jsxs(wt,{children:[n.jsx(et,{value:"none",children:o("terminal:worktree.noTask")}),i.slice(0,10).map(V=>n.jsx(et,{value:V.id,children:n.jsx("span",{className:"truncate max-w-[300px]",children:V.title})},V.id))]})]})]}),n.jsxs("div",{className:"flex items-center justify-between space-x-2 rounded-lg border p-3",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsxs(le,{htmlFor:"create-branch",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx(an,{className:"h-4 w-4"}),o("terminal:worktree.createBranch")]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("terminal:worktree.branchHelp",{branch:`terminal/${O}`})})]}),n.jsx(Kt,{id:"create-branch",checked:f,onCheckedChange:x,disabled:v})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"base-branch",className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),o("terminal:worktree.baseBranch")]}),n.jsx(cG,{id:"base-branch",value:A,onValueChange:R,options:I,placeholder:o("terminal:worktree.selectBaseBranch"),searchPlaceholder:o("terminal:worktree.searchBranch"),emptyMessage:o("terminal:worktree.noBranchFound"),disabled:v||T}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o("terminal:worktree.baseBranchHelp")})]}),w&&n.jsx("p",{className:"text-sm text-destructive",children:w})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:()=>t(!1),disabled:v,children:o("common:buttons.cancel")}),n.jsx(W,{onClick:z,disabled:v||!P,children:v?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),o("common:labels.creating")]}):o("common:buttons.create")})]})]})})}var dG=Object.defineProperty,sEe=Object.getOwnPropertyDescriptor,nEe=(e,t)=>{for(var s in t)dG(e,s,{get:t[s],enumerable:!0})},fn=(e,t,s,r)=>{for(var i=r>1?void 0:r?sEe(t,s):t,a=e.length-1,o;a>=0;a--)(o=e[a])&&(i=(r?o(t,s,i):o(i))||i);return r&&i&&dG(t,s,i),i},Qe=(e,t)=>(s,r)=>t(s,r,e),W4="Terminal input",GN={get:()=>W4,set:e=>W4=e},K4="Too much output to announce, navigate to rows manually to read",VN={get:()=>K4,set:e=>K4=e};function rEe(e){return e.replace(/\r?\n/g,"\r")}function iEe(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function aEe(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function oEe(e,t,s,r){if(e.stopPropagation(),e.clipboardData){let i=e.clipboardData.getData("text/plain");uG(i,t,s,r)}}function uG(e,t,s,r){e=rEe(e),e=iEe(e,s.decPrivateModes.bracketedPasteMode&&r.rawOptions.ignoreBracketedPasteMode!==!0),s.triggerDataEvent(e,!0),t.value=""}function hG(e,t,s){let r=s.getBoundingClientRect(),i=e.clientX-r.left-10,a=e.clientY-r.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${i}px`,t.style.top=`${a}px`,t.style.zIndex="1000",t.focus()}function Y4(e,t,s,r,i){hG(e,t,s),i&&r.rightClickSelect(e),t.value=r.selectionText,t.select()}function Zl(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function rw(e,t=0,s=e.length){let r="";for(let i=t;i<s;++i){let a=e[i];a>65535?(a-=65536,r+=String.fromCharCode((a>>10)+55296)+String.fromCharCode(a%1024+56320)):r+=String.fromCharCode(a)}return r}var lEe=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let s=e.length;if(!s)return 0;let r=0,i=0;if(this._interim){let a=e.charCodeAt(i++);56320<=a&&a<=57343?t[r++]=(this._interim-55296)*1024+a-56320+65536:(t[r++]=this._interim,t[r++]=a),this._interim=0}for(let a=i;a<s;++a){let o=e.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=s)return this._interim=o,r;let l=e.charCodeAt(a);56320<=l&&l<=57343?t[r++]=(o-55296)*1024+l-56320+65536:(t[r++]=o,t[r++]=l);continue}o!==65279&&(t[r++]=o)}return r}},cEe=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let s=e.length;if(!s)return 0;let r=0,i,a,o,l,u=0,d=0;if(this.interim[0]){let x=!1,v=this.interim[0];v&=(v&224)===192?31:(v&240)===224?15:7;let y=0,w;for(;(w=this.interim[++y]&63)&&y<4;)v<<=6,v|=w;let S=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,C=S-y;for(;d<C;){if(d>=s)return 0;if(w=e[d++],(w&192)!==128){d--,x=!0;break}else this.interim[y++]=w,v<<=6,v|=w&63}x||(S===2?v<128?d--:t[r++]=v:S===3?v<2048||v>=55296&&v<=57343||v===65279||(t[r++]=v):v<65536||v>1114111||(t[r++]=v)),this.interim.fill(0)}let m=s-4,f=d;for(;f<s;){for(;f<m&&!((i=e[f])&128)&&!((a=e[f+1])&128)&&!((o=e[f+2])&128)&&!((l=e[f+3])&128);)t[r++]=i,t[r++]=a,t[r++]=o,t[r++]=l,f+=4;if(i=e[f++],i<128)t[r++]=i;else if((i&224)===192){if(f>=s)return this.interim[0]=i,r;if(a=e[f++],(a&192)!==128){f--;continue}if(u=(i&31)<<6|a&63,u<128){f--;continue}t[r++]=u}else if((i&240)===224){if(f>=s)return this.interim[0]=i,r;if(a=e[f++],(a&192)!==128){f--;continue}if(f>=s)return this.interim[0]=i,this.interim[1]=a,r;if(o=e[f++],(o&192)!==128){f--;continue}if(u=(i&15)<<12|(a&63)<<6|o&63,u<2048||u>=55296&&u<=57343||u===65279)continue;t[r++]=u}else if((i&248)===240){if(f>=s)return this.interim[0]=i,r;if(a=e[f++],(a&192)!==128){f--;continue}if(f>=s)return this.interim[0]=i,this.interim[1]=a,r;if(o=e[f++],(o&192)!==128){f--;continue}if(f>=s)return this.interim[0]=i,this.interim[1]=a,this.interim[2]=o,r;if(l=e[f++],(l&192)!==128){f--;continue}if(u=(i&7)<<18|(a&63)<<12|(o&63)<<6|l&63,u<65536||u>1114111)continue;t[r++]=u}}return r}},mG="",Jl=" ",Zp=class fG{constructor(){this.fg=0,this.bg=0,this.extended=new kb}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new fG;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},kb=class pG{constructor(t=0,s=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=s}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new pG(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},ga=class gG extends Zp{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new kb,this.combinedData=""}static fromCharData(t){let s=new gG;return s.setFromCharData(t),s}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?Zl(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let s=!1;if(t[1].length>2)s=!0;else if(t[1].length===2){let r=t[1].charCodeAt(0);if(55296<=r&&r<=56319){let i=t[1].charCodeAt(1);56320<=i&&i<=57343?this.content=(r-55296)*1024+i-56320+65536|t[2]<<22:s=!0}else s=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;s&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},X4="di$target",qN="di$dependencies",YS=new Map;function dEe(e){return e[qN]||[]}function hr(e){if(YS.has(e))return YS.get(e);let t=function(s,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");uEe(t,s,i)};return t._id=e,YS.set(e,t),t}function uEe(e,t,s){t[X4]===t?t[qN].push({id:e,index:s}):(t[qN]=[{id:e,index:s}],t[X4]=t)}var si=hr("BufferService"),xG=hr("CoreMouseService"),Td=hr("CoreService"),hEe=hr("CharsetService"),vA=hr("InstantiationService"),vG=hr("LogService"),ni=hr("OptionsService"),bG=hr("OscLinkService"),mEe=hr("UnicodeService"),Qp=hr("DecorationService"),WN=class{constructor(e,t,s){this._bufferService=e,this._optionsService=t,this._oscLinkService=s}provideLinks(e,t){let s=this._bufferService.buffer.lines.get(e-1);if(!s){t(void 0);return}let r=[],i=this._optionsService.rawOptions.linkHandler,a=new ga,o=s.getTrimmedLength(),l=-1,u=-1,d=!1;for(let m=0;m<o;m++)if(!(u===-1&&!s.hasContent(m))){if(s.loadCell(m,a),a.hasExtendedAttrs()&&a.extended.urlId)if(u===-1){u=m,l=a.extended.urlId;continue}else d=a.extended.urlId!==l;else u!==-1&&(d=!0);if(d||u!==-1&&m===o-1){let f=this._oscLinkService.getLinkData(l)?.uri;if(f){let x={start:{x:u+1,y:e},end:{x:m+(!d&&m===o-1?1:0),y:e}},v=!1;if(!i?.allowNonHttpProtocols)try{let y=new URL(f);["http:","https:"].includes(y.protocol)||(v=!0)}catch{v=!0}v||r.push({text:f,range:x,activate:(y,w)=>i?i.activate(y,w,x):fEe(y,w),hover:(y,w)=>i?.hover?.(y,w,x),leave:(y,w)=>i?.leave?.(y,w,x)})}d=!1,a.hasExtendedAttrs()&&a.extended.urlId?(u=m,l=a.extended.urlId):(u=-1,l=-1)}}t(r)}};WN=fn([Qe(0,si),Qe(1,ni),Qe(2,bG)],WN);function fEe(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var iw=hr("CharSizeService"),xl=hr("CoreBrowserService"),bA=hr("MouseService"),vl=hr("RenderService"),pEe=hr("SelectionService"),yG=hr("CharacterJoinerService"),Kh=hr("ThemeService"),wG=hr("LinkProviderService"),gEe=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Z4.isErrorNoTelemetry(e)?new Z4(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},xEe=new gEe;function _v(e){vEe(e)||xEe.onUnexpectedError(e)}var KN="Canceled";function vEe(e){return e instanceof bEe?!0:e instanceof Error&&e.name===KN&&e.message===KN}var bEe=class extends Error{constructor(){super(KN),this.name=this.message}};function yEe(e){return new Error(`Illegal argument: ${e}`)}var Z4=class YN extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof YN)return t;let s=new YN;return s.message=t.message,s.stack=t.stack,s}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},XN=class jG extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,jG.prototype)}};function ki(e,t=0){return e[e.length-(1+t)]}var wEe;(e=>{function t(a){return a<0}e.isLessThan=t;function s(a){return a<=0}e.isLessThanOrEqual=s;function r(a){return a>0}e.isGreaterThan=r;function i(a){return a===0}e.isNeitherLessOrGreaterThan=i,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(wEe||={});function jEe(e,t){let s=this,r=!1,i;return function(){return r||(r=!0,t||(i=e.apply(s,arguments))),i}}var SG;(e=>{function t(T){return T&&typeof T=="object"&&typeof T[Symbol.iterator]=="function"}e.is=t;let s=Object.freeze([]);function r(){return s}e.empty=r;function*i(T){yield T}e.single=i;function a(T){return t(T)?T:i(T)}e.wrap=a;function o(T){return T||s}e.from=o;function*l(T){for(let E=T.length-1;E>=0;E--)yield T[E]}e.reverse=l;function u(T){return!T||T[Symbol.iterator]().next().done===!0}e.isEmpty=u;function d(T){return T[Symbol.iterator]().next().value}e.first=d;function m(T,E){let A=0;for(let R of T)if(E(R,A++))return!0;return!1}e.some=m;function f(T,E){for(let A of T)if(E(A))return A}e.find=f;function*x(T,E){for(let A of T)E(A)&&(yield A)}e.filter=x;function*v(T,E){let A=0;for(let R of T)yield E(R,A++)}e.map=v;function*y(T,E){let A=0;for(let R of T)yield*E(R,A++)}e.flatMap=y;function*w(...T){for(let E of T)yield*E}e.concat=w;function S(T,E,A){let R=A;for(let D of T)R=E(R,D);return R}e.reduce=S;function*C(T,E,A=T.length){for(E<0&&(E+=T.length),A<0?A+=T.length:A>T.length&&(A=T.length);E<A;E++)yield T[E]}e.slice=C;function _(T,E=Number.POSITIVE_INFINITY){let A=[];if(E===0)return[A,T];let R=T[Symbol.iterator]();for(let D=0;D<E;D++){let M=R.next();if(M.done)return[A,e.empty()];A.push(M.value)}return[A,{[Symbol.iterator](){return R}}]}e.consume=_;async function j(T){let E=[];for await(let A of T)E.push(A);return Promise.resolve(E)}e.asyncToArray=j})(SG||={});function vd(e){if(SG.is(e)){let t=[];for(let s of e)if(s)try{s.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function SEe(...e){return en(()=>vd(e))}function en(e){return{dispose:jEe(()=>{e()})}}var _G=class NG{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{vd(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?NG.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&(this._toDispose.delete(t),void 0)}};_G.DISABLE_DISPOSED_WARNING=!1;var sc=_G,Yt=class{constructor(){this._store=new sc,this._store}dispose(){this._store.dispose()}_register(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)}};Yt.None=Object.freeze({dispose(){}});var ph=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},sl=typeof window=="object"?window:globalThis,ZN=class QN{constructor(t){this.element=t,this.next=QN.Undefined,this.prev=QN.Undefined}};ZN.Undefined=new ZN(void 0);var sn=ZN,Q4=class{constructor(){this._first=sn.Undefined,this._last=sn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===sn.Undefined}clear(){let e=this._first;for(;e!==sn.Undefined;){let t=e.next;e.prev=sn.Undefined,e.next=sn.Undefined,e=t}this._first=sn.Undefined,this._last=sn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let s=new sn(e);if(this._first===sn.Undefined)this._first=s,this._last=s;else if(t){let i=this._last;this._last=s,s.prev=i,i.next=s}else{let i=this._first;this._first=s,s.next=i,i.prev=s}this._size+=1;let r=!1;return()=>{r||(r=!0,this._remove(s))}}shift(){if(this._first!==sn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==sn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==sn.Undefined&&e.next!==sn.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===sn.Undefined&&e.next===sn.Undefined?(this._first=sn.Undefined,this._last=sn.Undefined):e.next===sn.Undefined?(this._last=this._last.prev,this._last.next=sn.Undefined):e.prev===sn.Undefined&&(this._first=this._first.next,this._first.prev=sn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==sn.Undefined;)yield e.element,e=e.next}},_Ee=globalThis.performance&&typeof globalThis.performance.now=="function",NEe=class CG{static create(t){return new CG(t)}constructor(t){this._now=_Ee&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},Sr;(e=>{e.None=()=>Yt.None;function t(F,$){return f(F,()=>{},0,void 0,!0,void 0,$)}e.defer=t;function s(F){return($,z=null,H)=>{let I=!1,V;return V=F(B=>{if(!I)return V?V.dispose():I=!0,$.call(z,B)},null,H),I&&V.dispose(),V}}e.once=s;function r(F,$,z){return d((H,I=null,V)=>F(B=>H.call(I,$(B)),null,V),z)}e.map=r;function i(F,$,z){return d((H,I=null,V)=>F(B=>{$(B),H.call(I,B)},null,V),z)}e.forEach=i;function a(F,$,z){return d((H,I=null,V)=>F(B=>$(B)&&H.call(I,B),null,V),z)}e.filter=a;function o(F){return F}e.signal=o;function l(...F){return($,z=null,H)=>{let I=SEe(...F.map(V=>V(B=>$.call(z,B))));return m(I,H)}}e.any=l;function u(F,$,z,H){let I=z;return r(F,V=>(I=$(I,V),I),H)}e.reduce=u;function d(F,$){let z,H={onWillAddFirstListener(){z=F(I.fire,I)},onDidRemoveLastListener(){z?.dispose()}},I=new Ue(H);return $?.add(I),I.event}function m(F,$){return $ instanceof Array?$.push(F):$&&$.add(F),F}function f(F,$,z=100,H=!1,I=!1,V,B){let K,L,G,Y=0,q,Q={leakWarningThreshold:V,onWillAddFirstListener(){K=F(te=>{Y++,L=$(L,te),H&&!G&&(se.fire(L),L=void 0),q=()=>{let ee=L;L=void 0,G=void 0,(!H||Y>1)&&se.fire(ee),Y=0},typeof z=="number"?(clearTimeout(G),G=setTimeout(q,z)):G===void 0&&(G=0,queueMicrotask(q))})},onWillRemoveListener(){I&&Y>0&&q?.()},onDidRemoveLastListener(){q=void 0,K.dispose()}},se=new Ue(Q);return B?.add(se),se.event}e.debounce=f;function x(F,$=0,z){return e.debounce(F,(H,I)=>H?(H.push(I),H):[I],$,void 0,!0,void 0,z)}e.accumulate=x;function v(F,$=(H,I)=>H===I,z){let H=!0,I;return a(F,V=>{let B=H||!$(V,I);return H=!1,I=V,B},z)}e.latch=v;function y(F,$,z){return[e.filter(F,$,z),e.filter(F,H=>!$(H),z)]}e.split=y;function w(F,$=!1,z=[],H){let I=z.slice(),V=F(L=>{I?I.push(L):K.fire(L)});H&&H.add(V);let B=()=>{I?.forEach(L=>K.fire(L)),I=null},K=new Ue({onWillAddFirstListener(){V||(V=F(L=>K.fire(L)),H&&H.add(V))},onDidAddFirstListener(){I&&($?setTimeout(B):B())},onDidRemoveLastListener(){V&&V.dispose(),V=null}});return H&&H.add(K),K.event}e.buffer=w;function S(F,$){return(z,H,I)=>{let V=$(new _);return F(function(B){let K=V.evaluate(B);K!==C&&z.call(H,K)},void 0,I)}}e.chain=S;let C=Symbol("HaltChainable");class _{constructor(){this.steps=[]}map($){return this.steps.push($),this}forEach($){return this.steps.push(z=>($(z),z)),this}filter($){return this.steps.push(z=>$(z)?z:C),this}reduce($,z){let H=z;return this.steps.push(I=>(H=$(H,I),H)),this}latch($=(z,H)=>z===H){let z=!0,H;return this.steps.push(I=>{let V=z||!$(I,H);return z=!1,H=I,V?I:C}),this}evaluate($){for(let z of this.steps)if($=z($),$===C)break;return $}}function j(F,$,z=H=>H){let H=(...K)=>B.fire(z(...K)),I=()=>F.on($,H),V=()=>F.removeListener($,H),B=new Ue({onWillAddFirstListener:I,onDidRemoveLastListener:V});return B.event}e.fromNodeEventEmitter=j;function T(F,$,z=H=>H){let H=(...K)=>B.fire(z(...K)),I=()=>F.addEventListener($,H),V=()=>F.removeEventListener($,H),B=new Ue({onWillAddFirstListener:I,onDidRemoveLastListener:V});return B.event}e.fromDOMEventEmitter=T;function E(F){return new Promise($=>s(F)($))}e.toPromise=E;function A(F){let $=new Ue;return F.then(z=>{$.fire(z)},()=>{$.fire(void 0)}).finally(()=>{$.dispose()}),$.event}e.fromPromise=A;function R(F,$){return F(z=>$.fire(z))}e.forward=R;function D(F,$,z){return $(z),F(H=>$(H))}e.runAndSubscribe=D;class M{constructor($,z){this._observable=$,this._counter=0,this._hasChanged=!1;let H={onWillAddFirstListener:()=>{$.addObserver(this)},onDidRemoveLastListener:()=>{$.removeObserver(this)}};this.emitter=new Ue(H),z&&z.add(this.emitter)}beginUpdate($){this._counter++}handlePossibleChange($){}handleChange($,z){this._hasChanged=!0}endUpdate($){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function P(F,$){return new M(F,$).emitter.event}e.fromObservable=P;function O(F){return($,z,H)=>{let I=0,V=!1,B={beginUpdate(){I++},endUpdate(){I--,I===0&&(F.reportChanges(),V&&(V=!1,$.call(z)))},handlePossibleChange(){},handleChange(){V=!0}};F.addObserver(B),F.reportChanges();let K={dispose(){F.removeObserver(B)}};return H instanceof sc?H.add(K):Array.isArray(H)&&H.push(K),K}}e.fromObservableLight=O})(Sr||={});var JN=class eC{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${eC._idPool++}`,eC.all.add(this)}start(t){this._stopWatch=new NEe,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};JN.all=new Set,JN._idPool=0;var CEe=JN,kEe=-1,kG=class AG{constructor(t,s,r=(AG._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=s,this.name=r,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(t,s){let r=this.threshold;if(r<=0||s<r)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=r*.5;let[a,o]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${s} listeners already. MOST frequent listener (${o}):`;console.warn(l),console.warn(a);let u=new TEe(l,a);this._errorHandler(u)}return()=>{let a=this._stacks.get(t.value)||0;this._stacks.set(t.value,a-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,s=0;for(let[r,i]of this._stacks)(!t||s<i)&&(t=[r,i],s=i);return t}};kG._idPool=1;var AEe=kG,EEe=class EG{constructor(t){this.value=t}static create(){let t=new Error;return new EG(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},TEe=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},PEe=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},REe=0,XS=class{constructor(e){this.value=e,this.id=REe++}},DEe=2,IEe,Ue=class{constructor(t){this._size=0,this._options=t,this._leakageMon=this._options?.leakWarningThreshold?new AEe(t?.onListenerError??_v,this._options?.leakWarningThreshold??kEe):void 0,this._perfMon=this._options?._profName?new CEe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(t,s,r)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new PEe(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||_v)(d),Yt.None}if(this._disposed)return Yt.None;s&&(t=t.bind(s));let i=new XS(t),a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=EEe.create(),a=this._leakageMon.check(i.stack,this._size+1)),this._listeners?this._listeners instanceof XS?(this._deliveryQueue??=new MEe,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let o=en(()=>{a?.(),this._removeListener(i)});return r instanceof sc?r.add(o):Array.isArray(r)&&r.push(o),o},this._event}_removeListener(t){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let s=this._listeners,r=s.indexOf(t);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,s[r]=void 0;let i=this._deliveryQueue.current===this;if(this._size*DEe<=s.length){let a=0;for(let o=0;o<s.length;o++)s[o]?s[a++]=s[o]:i&&(this._deliveryQueue.end--,a<this._deliveryQueue.i&&this._deliveryQueue.i--);s.length=a}}_deliver(t,s){if(!t)return;let r=this._options?.onListenerError||_v;if(!r){t.value(s);return}try{t.value(s)}catch(i){r(i)}}_deliverQueue(t){let s=t.current._listeners;for(;t.i<t.end;)this._deliver(s[t.i++],t.value);t.reset()}fire(t){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof XS)this._deliver(this._listeners,t);else{let s=this._deliveryQueue;s.enqueue(this,t,this._listeners.length),this._deliverQueue(s)}this._perfMon?.stop()}hasListeners(){return this._size>0}},MEe=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,s){this.i=0,this.end=s,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},tC=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new Ue,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new Ue,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(t){return this.mapWindowIdToZoomLevel.get(this.getWindowId(t))??0}setZoomLevel(t,s){if(this.getZoomLevel(s)===t)return;let r=this.getWindowId(s);this.mapWindowIdToZoomLevel.set(r,t),this._onDidChangeZoomLevel.fire(r)}getZoomFactor(t){return this.mapWindowIdToZoomFactor.get(this.getWindowId(t))??1}setZoomFactor(t,s){this.mapWindowIdToZoomFactor.set(this.getWindowId(s),t)}setFullscreen(t,s){if(this.isFullscreen(s)===t)return;let r=this.getWindowId(s);this.mapWindowIdToFullScreen.set(r,t),this._onDidChangeFullscreen.fire(r)}isFullscreen(t){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(t))}getWindowId(t){return t.vscodeWindowId}};tC.INSTANCE=new tC;var yA=tC;function LEe(e,t,s){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",s)}yA.INSTANCE.onDidChangeZoomLevel;function OEe(e){return yA.INSTANCE.getZoomFactor(e)}yA.INSTANCE.onDidChangeFullscreen;var Yh=typeof navigator=="object"?navigator.userAgent:"",sC=Yh.indexOf("Firefox")>=0,FEe=Yh.indexOf("AppleWebKit")>=0,wA=Yh.indexOf("Chrome")>=0,BEe=!wA&&Yh.indexOf("Safari")>=0;Yh.indexOf("Electron/")>=0;Yh.indexOf("Android")>=0;var ZS=!1;if(typeof sl.matchMedia=="function"){let e=sl.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=sl.matchMedia("(display-mode: fullscreen)");ZS=e.matches,LEe(sl,e,({matches:s})=>{ZS&&t.matches||(ZS=s)})}var zu="en",nC=!1,rC=!1,Nv=!1,TG=!1,Kx,Cv=zu,J4=zu,zEe,Qo,od=globalThis,Ti;typeof od.vscode<"u"&&typeof od.vscode.process<"u"?Ti=od.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Ti=process);var $Ee=typeof Ti?.versions?.electron=="string",HEe=$Ee&&Ti?.type==="renderer";if(typeof Ti=="object"){nC=Ti.platform==="win32",rC=Ti.platform==="darwin",Nv=Ti.platform==="linux",Nv&&Ti.env.SNAP&&Ti.env.SNAP_REVISION,Ti.env.CI||Ti.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Kx=zu,Cv=zu;let e=Ti.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);Kx=t.userLocale,J4=t.osLocale,Cv=t.resolvedLanguage||zu,zEe=t.languagePack?.translationsConfigFile}catch{}TG=!0}else typeof navigator=="object"&&!HEe?(Qo=navigator.userAgent,nC=Qo.indexOf("Windows")>=0,rC=Qo.indexOf("Macintosh")>=0,(Qo.indexOf("Macintosh")>=0||Qo.indexOf("iPad")>=0||Qo.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Nv=Qo.indexOf("Linux")>=0,Qo?.indexOf("Mobi")>=0,Cv=globalThis._VSCODE_NLS_LANGUAGE||zu,Kx=navigator.language.toLowerCase(),J4=Kx):console.error("Unable to resolve platform.");var PG=nC,co=rC,UEe=Nv,eL=TG,xo=Qo,Vl=Cv,GEe;(e=>{function t(){return Vl}e.value=t;function s(){return Vl.length===2?Vl==="en":Vl.length>=3?Vl[0]==="e"&&Vl[1]==="n"&&Vl[2]==="-":!1}e.isDefaultVariant=s;function r(){return Vl==="en"}e.isDefault=r})(GEe||={});var VEe=typeof od.postMessage=="function"&&!od.importScripts;(()=>{if(VEe){let e=[];od.addEventListener("message",s=>{if(s.data&&s.data.vscodeScheduleAsyncWork)for(let r=0,i=e.length;r<i;r++){let a=e[r];if(a.id===s.data.vscodeScheduleAsyncWork){e.splice(r,1),a.callback();return}}});let t=0;return s=>{let r=++t;e.push({id:r,callback:s}),od.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})();var qEe=!!(xo&&xo.indexOf("Chrome")>=0);xo&&xo.indexOf("Firefox")>=0;!qEe&&xo&&xo.indexOf("Safari")>=0;xo&&xo.indexOf("Edg/")>=0;xo&&xo.indexOf("Android")>=0;var Cu=typeof navigator=="object"?navigator:{};eL||document.queryCommandSupported&&document.queryCommandSupported("copy")||Cu&&Cu.clipboard&&Cu.clipboard.writeText,eL||Cu&&Cu.clipboard&&Cu.clipboard.readText;var jA=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},QS=new jA,tL=new jA,sL=new jA,WEe=new Array(230),RG;(e=>{function t(l){return QS.keyCodeToStr(l)}e.toString=t;function s(l){return QS.strToKeyCode(l)}e.fromString=s;function r(l){return tL.keyCodeToStr(l)}e.toUserSettingsUS=r;function i(l){return sL.keyCodeToStr(l)}e.toUserSettingsGeneral=i;function a(l){return tL.strToKeyCode(l)||sL.strToKeyCode(l)}e.fromUserSettings=a;function o(l){if(l>=98&&l<=113)return null;switch(l){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return QS.keyCodeToStr(l)}e.toElectronAccelerator=o})(RG||={});var KEe=class DG{constructor(t,s,r,i,a){this.ctrlKey=t,this.shiftKey=s,this.altKey=r,this.metaKey=i,this.keyCode=a}equals(t){return t instanceof DG&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",s=this.shiftKey?"1":"0",r=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${t}${s}${r}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new YEe([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},YEe=class{constructor(e){if(e.length===0)throw yEe("chords");this.chords=e}getHashCode(){let e="";for(let t=0,s=this.chords.length;t<s;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function XEe(e){if(e.charCode){let s=String.fromCharCode(e.charCode).toUpperCase();return RG.fromString(s)}let t=e.keyCode;if(t===3)return 7;if(sC)switch(t){case 59:return 85;case 60:if(UEe)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(co)return 57;break}else if(FEe&&(co&&t===93||!co&&t===92))return 57;return WEe[t]||0}var ZEe=co?256:2048,QEe=512,JEe=1024,eTe=co?2048:256,nL=class{constructor(e){this._standardKeyboardEventBrand=!0;let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=XEe(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=ZEe),this.altKey&&(t|=QEe),this.shiftKey&&(t|=JEe),this.metaKey&&(t|=eTe),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new KEe(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},rL=new WeakMap;function tTe(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,s=e.parent.location;if(t.origin!=="null"&&s.origin!=="null"&&t.origin!==s.origin)return null}catch{return null}return e.parent}var sTe=class{static getSameOriginWindowChain(e){let t=rL.get(e);if(!t){t=[],rL.set(e,t);let s=e,r;do r=tTe(s),r?t.push({window:new WeakRef(s),iframeElement:s.frameElement||null}):t.push({window:new WeakRef(s),iframeElement:null}),s=r;while(s)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let s=0,r=0,i=this.getSameOriginWindowChain(e);for(let a of i){let o=a.window.deref();if(s+=o?.scrollY??0,r+=o?.scrollX??0,o===t||!a.iframeElement)break;let l=a.iframeElement.getBoundingClientRect();s+=l.top,r+=l.left}return{top:s,left:r}}},Yx=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let s=sTe.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=s.left,this.posy-=s.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},iL=class{constructor(e,t=0,s=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=s,this.deltaX=t;let r=!1;if(wA){let i=navigator.userAgent.match(/Chrome\/(\d+)/);r=(i?parseInt(i[1]):123)<=122}if(e){let i=e,a=e,o=e.view?.devicePixelRatio||1;if(typeof i.wheelDeltaY<"u")r?this.deltaY=i.wheelDeltaY/(120*o):this.deltaY=i.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?sC&&!co?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof i.wheelDeltaX<"u")BEe&&PG?this.deltaX=-(i.wheelDeltaX/120):r?this.deltaX=i.wheelDeltaX/(120*o):this.deltaX=i.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?sC&&!co?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(r?this.deltaY=e.wheelDelta/(120*o):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}},IG=Object.freeze(function(e,t){let s=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(s)}}}),nTe;(e=>{function t(s){return s===e.None||s===e.Cancelled||s instanceof rTe?!0:!s||typeof s!="object"?!1:typeof s.isCancellationRequested=="boolean"&&typeof s.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Sr.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:IG})})(nTe||={});var rTe=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?IG:(this._emitter||(this._emitter=new Ue),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},SA=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new XN("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new XN("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},iTe=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,s=globalThis){if(this.isDisposed)throw new XN("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let r=s.setInterval(()=>{e()},t);this.disposable=en(()=>{s.clearInterval(r),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},aTe;(e=>{async function t(r){let i,a=await Promise.all(r.map(o=>o.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return a}e.settled=t;function s(r){return new Promise(async(i,a)=>{try{await r(i,a)}catch(o){a(o)}})}e.withAsyncBody=s})(aTe||={});var aL=class sa{static fromArray(t){return new sa(s=>{s.emitMany(t)})}static fromPromise(t){return new sa(async s=>{s.emitMany(await t)})}static fromPromises(t){return new sa(async s=>{await Promise.all(t.map(async r=>s.emitOne(await r)))})}static merge(t){return new sa(async s=>{await Promise.all(t.map(async r=>{for await(let i of r)s.emitOne(i)}))})}constructor(t,s){this._state=0,this._results=[],this._error=null,this._onReturn=s,this._onStateChanged=new Ue,queueMicrotask(async()=>{let r={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(t(r)),this.resolve()}catch(i){this.reject(i)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await Sr.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(t,s){return new sa(async r=>{for await(let i of t)r.emitOne(s(i))})}map(t){return sa.map(this,t)}static filter(t,s){return new sa(async r=>{for await(let i of t)s(i)&&r.emitOne(i)})}filter(t){return sa.filter(this,t)}static coalesce(t){return sa.filter(t,s=>!!s)}coalesce(){return sa.coalesce(this)}static async toPromise(t){let s=[];for await(let r of t)s.push(r);return s}toPromise(){return sa.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};aL.EMPTY=aL.fromArray([]);var{getWindow:ro,getWindowId:oTe,onDidRegisterWindow:lTe}=(function(){let e=new Map,t={window:sl,disposables:new sc};e.set(sl.vscodeWindowId,t);let s=new Ue,r=new Ue,i=new Ue;function a(o,l){return(typeof o=="number"?e.get(o):void 0)??(l?t:void 0)}return{onDidRegisterWindow:s.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:r.event,registerWindow(o){if(e.has(o.vscodeWindowId))return Yt.None;let l=new sc,u={window:o,disposables:l.add(new sc)};return e.set(o.vscodeWindowId,u),l.add(en(()=>{e.delete(o.vscodeWindowId),r.fire(o)})),l.add(Et(o,Yn.BEFORE_UNLOAD,()=>{i.fire(o)})),s.fire(u),l},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return e.has(o)},getWindowById:a,getWindow(o){let l=o;if(l?.ownerDocument?.defaultView)return l.ownerDocument.defaultView.window;let u=o;return u?.view?u.view.window:sl},getDocument(o){return ro(o).document}}})(),cTe=class{constructor(e,t,s,r){this._node=e,this._type=t,this._handler=s,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function Et(e,t,s,r){return new cTe(e,t,s,r)}var oL=function(e,t,s,r){return Et(e,t,s,r)},_A,dTe=class extends iTe{constructor(e){super(),this.defaultTarget=e&&ro(e)}cancelAndSet(e,t,s){return super.cancelAndSet(e,t,s??this.defaultTarget)}},lL=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){_v(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,s=new Map,r=new Map,i=a=>{s.set(a,!1);let o=e.get(a)??[];for(t.set(a,o),e.set(a,[]),r.set(a,!0);o.length>0;)o.sort(lL.sort),o.shift().execute();r.set(a,!1)};_A=(a,o,l=0)=>{let u=oTe(a),d=new lL(o,l),m=e.get(u);return m||(m=[],e.set(u,m)),m.push(d),s.get(u)||(s.set(u,!0),a.requestAnimationFrame(()=>i(u))),d}})();function uTe(e){let t=e.getBoundingClientRect(),s=ro(e);return{left:t.left+s.scrollX,top:t.top+s.scrollY,width:t.width,height:t.height}}var Yn={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},hTe=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=ui(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=ui(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=ui(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=ui(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=ui(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=ui(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=ui(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=ui(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=ui(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=ui(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=ui(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=ui(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=ui(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=ui(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function ui(e){return typeof e=="number"?`${e}px`:e}function Mf(e){return new hTe(e)}var MG=class{constructor(){this._hooks=new sc,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let s=this._onStopCallback;this._onStopCallback=null,e&&s&&s(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,s,r,i){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=i;let a=e;try{e.setPointerCapture(t),this._hooks.add(en(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{a=ro(e)}this._hooks.add(Et(a,Yn.POINTER_MOVE,o=>{if(o.buttons!==s){this.stopMonitoring(!0);return}o.preventDefault(),this._pointerMoveCallback(o)})),this._hooks.add(Et(a,Yn.POINTER_UP,o=>this.stopMonitoring(!0)))}};function mTe(e,t,s){let r=null,i=null;if(typeof s.value=="function"?(r="value",i=s.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof s.get=="function"&&(r="get",i=s.get),!i)throw new Error("not supported");let a=`$memoize$${t}`;s[r]=function(...o){return this.hasOwnProperty(a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,o)}),this[a]}}var Ka;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(Ka||={});var gf=class Ar extends Yt{constructor(){super(),this.dispatched=!1,this.targets=new Q4,this.ignoreTargets=new Q4,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Sr.runAndSubscribe(lTe,({window:t,disposables:s})=>{s.add(Et(t.document,"touchstart",r=>this.onTouchStart(r),{passive:!1})),s.add(Et(t.document,"touchend",r=>this.onTouchEnd(t,r))),s.add(Et(t.document,"touchmove",r=>this.onTouchMove(r),{passive:!1}))},{window:sl,disposables:this._store}))}static addTarget(t){if(!Ar.isTouchDevice())return Yt.None;Ar.INSTANCE||(Ar.INSTANCE=new Ar);let s=Ar.INSTANCE.targets.push(t);return en(s)}static ignoreTarget(t){if(!Ar.isTouchDevice())return Yt.None;Ar.INSTANCE||(Ar.INSTANCE=new Ar);let s=Ar.INSTANCE.ignoreTargets.push(t);return en(s)}static isTouchDevice(){return"ontouchstart"in sl||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let s=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let r=0,i=t.targetTouches.length;r<i;r++){let a=t.targetTouches.item(r);this.activeTouches[a.identifier]={id:a.identifier,initialTarget:a.target,initialTimeStamp:s,initialPageX:a.pageX,initialPageY:a.pageY,rollingTimestamps:[s],rollingPageX:[a.pageX],rollingPageY:[a.pageY]};let o=this.newGestureEvent(Ka.Start,a.target);o.pageX=a.pageX,o.pageY=a.pageY,this.dispatchEvent(o)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,s){let r=Date.now(),i=Object.keys(this.activeTouches).length;for(let a=0,o=s.changedTouches.length;a<o;a++){let l=s.changedTouches.item(a);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("move of an UNKNOWN touch",l);continue}let u=this.activeTouches[l.identifier],d=Date.now()-u.initialTimeStamp;if(d<Ar.HOLD_DELAY&&Math.abs(u.initialPageX-ki(u.rollingPageX))<30&&Math.abs(u.initialPageY-ki(u.rollingPageY))<30){let m=this.newGestureEvent(Ka.Tap,u.initialTarget);m.pageX=ki(u.rollingPageX),m.pageY=ki(u.rollingPageY),this.dispatchEvent(m)}else if(d>=Ar.HOLD_DELAY&&Math.abs(u.initialPageX-ki(u.rollingPageX))<30&&Math.abs(u.initialPageY-ki(u.rollingPageY))<30){let m=this.newGestureEvent(Ka.Contextmenu,u.initialTarget);m.pageX=ki(u.rollingPageX),m.pageY=ki(u.rollingPageY),this.dispatchEvent(m)}else if(i===1){let m=ki(u.rollingPageX),f=ki(u.rollingPageY),x=ki(u.rollingTimestamps)-u.rollingTimestamps[0],v=m-u.rollingPageX[0],y=f-u.rollingPageY[0],w=[...this.targets].filter(S=>u.initialTarget instanceof Node&&S.contains(u.initialTarget));this.inertia(t,w,r,Math.abs(v)/x,v>0?1:-1,m,Math.abs(y)/x,y>0?1:-1,f)}this.dispatchEvent(this.newGestureEvent(Ka.End,u.initialTarget)),delete this.activeTouches[l.identifier]}this.dispatched&&(s.preventDefault(),s.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,s){let r=document.createEvent("CustomEvent");return r.initEvent(t,!1,!0),r.initialTarget=s,r.tapCount=0,r}dispatchEvent(t){if(t.type===Ka.Tap){let s=new Date().getTime(),r=0;s-this._lastSetTapCountTime>Ar.CLEAR_TAP_COUNT_TIME?r=1:r=2,this._lastSetTapCountTime=s,t.tapCount=r}else(t.type===Ka.Change||t.type===Ka.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let r of this.ignoreTargets)if(r.contains(t.initialTarget))return;let s=[];for(let r of this.targets)if(r.contains(t.initialTarget)){let i=0,a=t.initialTarget;for(;a&&a!==r;)i++,a=a.parentElement;s.push([i,r])}s.sort((r,i)=>r[0]-i[0]);for(let[r,i]of s)i.dispatchEvent(t),this.dispatched=!0}}inertia(t,s,r,i,a,o,l,u,d){this.handle=_A(t,()=>{let m=Date.now(),f=m-r,x=0,v=0,y=!0;i+=Ar.SCROLL_FRICTION*f,l+=Ar.SCROLL_FRICTION*f,i>0&&(y=!1,x=a*i*f),l>0&&(y=!1,v=u*l*f);let w=this.newGestureEvent(Ka.Change);w.translationX=x,w.translationY=v,s.forEach(S=>S.dispatchEvent(w)),y||this.inertia(t,s,m,i,a,o+x,l,u,d+v)})}onTouchMove(t){let s=Date.now();for(let r=0,i=t.changedTouches.length;r<i;r++){let a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("end of an UNKNOWN touch",a);continue}let o=this.activeTouches[a.identifier],l=this.newGestureEvent(Ka.Change,o.initialTarget);l.translationX=a.pageX-ki(o.rollingPageX),l.translationY=a.pageY-ki(o.rollingPageY),l.pageX=a.pageX,l.pageY=a.pageY,this.dispatchEvent(l),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(a.pageX),o.rollingPageY.push(a.pageY),o.rollingTimestamps.push(s)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};gf.SCROLL_FRICTION=-.005,gf.HOLD_DELAY=700,gf.CLEAR_TAP_COUNT_TIME=400,fn([mTe],gf,"isTouchDevice",1);var fTe=gf,NA=class extends Yt{onclick(e,t){this._register(Et(e,Yn.CLICK,s=>t(new Yx(ro(e),s))))}onmousedown(e,t){this._register(Et(e,Yn.MOUSE_DOWN,s=>t(new Yx(ro(e),s))))}onmouseover(e,t){this._register(Et(e,Yn.MOUSE_OVER,s=>t(new Yx(ro(e),s))))}onmouseleave(e,t){this._register(Et(e,Yn.MOUSE_LEAVE,s=>t(new Yx(ro(e),s))))}onkeydown(e,t){this._register(Et(e,Yn.KEY_DOWN,s=>t(new nL(s))))}onkeyup(e,t){this._register(Et(e,Yn.KEY_UP,s=>t(new nL(s))))}oninput(e,t){this._register(Et(e,Yn.INPUT,t))}onblur(e,t){this._register(Et(e,Yn.BLUR,t))}onfocus(e,t){this._register(Et(e,Yn.FOCUS,t))}onchange(e,t){this._register(Et(e,Yn.CHANGE,t))}ignoreGesture(e){return fTe.ignoreTarget(e)}},cL=11,pTe=class extends NA{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=cL+"px",this.domNode.style.height=cL+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new MG),this._register(oL(this.bgDomNode,Yn.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(oL(this.domNode,Yn.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new dTe),this._pointerdownScheduleRepeatTimer=this._register(new SA)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,ro(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},gTe=class iC{constructor(t,s,r,i,a,o,l){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(s=s|0,r=r|0,i=i|0,a=a|0,o=o|0,l=l|0),this.rawScrollLeft=i,this.rawScrollTop=l,s<0&&(s=0),i+s>r&&(i=r-s),i<0&&(i=0),a<0&&(a=0),l+a>o&&(l=o-a),l<0&&(l=0),this.width=s,this.scrollWidth=r,this.scrollLeft=i,this.height=a,this.scrollHeight=o,this.scrollTop=l}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,s){return new iC(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,s?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,s?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new iC(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,s){let r=this.width!==t.width,i=this.scrollWidth!==t.scrollWidth,a=this.scrollLeft!==t.scrollLeft,o=this.height!==t.height,l=this.scrollHeight!==t.scrollHeight,u=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:s,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:r,scrollWidthChanged:i,scrollLeftChanged:a,heightChanged:o,scrollHeightChanged:l,scrollTopChanged:u}}},xTe=class extends Yt{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new Ue),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new gTe(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let s=this._state.withScrollDimensions(e,t);this._setState(s,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let s=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===s.scrollLeft&&this._smoothScrolling.to.scrollTop===s.scrollTop)return;let r;t?r=new uL(this._smoothScrolling.from,s,this._smoothScrolling.startTime,this._smoothScrolling.duration):r=this._smoothScrolling.combine(this._state,s,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=r}else{let s=this._state.withScrollPosition(e);this._smoothScrolling=uL.start(this._state,s,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let s=this._state;s.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(s,t)))}},dL=class{constructor(e,t,s){this.scrollLeft=e,this.scrollTop=t,this.isDone=s}};function JS(e,t){let s=t-e;return function(r){return e+s*yTe(r)}}function vTe(e,t,s){return function(r){return r<s?e(r/s):t((r-s)/(1-s))}}var uL=class aC{constructor(t,s,r,i){this.from=t,this.to=s,this.duration=i,this.startTime=r,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,s,r){if(Math.abs(t-s)>2.5*r){let i,a;return t<s?(i=t+.75*r,a=s-.75*r):(i=t-.75*r,a=s+.75*r),vTe(JS(t,i),JS(a,s),.33)}return JS(t,s)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let s=(t-this.startTime)/this.duration;if(s<1){let r=this.scrollLeft(s),i=this.scrollTop(s);return new dL(r,i,!1)}return new dL(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,s,r){return aC.start(t,s,r)}static start(t,s,r){r=r+10;let i=Date.now()-10;return new aC(t,s,i,r)}};function bTe(e){return Math.pow(e,3)}function yTe(e){return 1-bTe(1-e)}var wTe=class extends Yt{constructor(e,t,s){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=s,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new SA)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}},jTe=140,LG=class extends NA{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new wTe(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new MG),this._shouldRender=!0,this.domNode=Mf(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Et(this.domNode.domNode,Yn.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new pTe(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,s,r){this.slider=Mf(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof s=="number"&&this.slider.setWidth(s),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Et(this.slider.domNode,Yn.POINTER_DOWN,i=>{i.button===0&&(i.preventDefault(),this._sliderPointerDown(i))})),this.onclick(this.slider.domNode,i=>{i.leftButton&&i.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,s=t+this._scrollbarState.getSliderPosition(),r=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),i=this._sliderPointerPosition(e);s<=i&&i<=r?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,s;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,s=e.offsetY;else{let i=uTe(this.domNode.domNode);t=e.pageX-i.left,s=e.pageY-i.top}let r=this._pointerDownRelativePosition(t,s);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r):this._scrollbarState.getDesiredScrollPositionFromOffset(r)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),s=this._sliderOrthogonalPointerPosition(e),r=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>{let a=this._sliderOrthogonalPointerPosition(i),o=Math.abs(a-s);if(PG&&o>jTe){this._setDesiredScrollPositionNow(r.getScrollPosition());return}let l=this._sliderPointerPosition(i)-t;this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(l))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},OG=class oC{constructor(t,s,r,i,a,o){this._scrollbarSize=Math.round(s),this._oppositeScrollbarSize=Math.round(r),this._arrowSize=Math.round(t),this._visibleSize=i,this._scrollSize=a,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new oC(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let s=Math.round(t);return this._visibleSize!==s?(this._visibleSize=s,this._refreshComputedValues(),!0):!1}setScrollSize(t){let s=Math.round(t);return this._scrollSize!==s?(this._scrollSize=s,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let s=Math.round(t);return this._scrollPosition!==s?(this._scrollPosition=s,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,s,r,i,a){let o=Math.max(0,r-t),l=Math.max(0,o-2*s),u=i>0&&i>r;if(!u)return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(l),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(r*l/i))),m=(l-d)/(i-r),f=a*m;return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(d),computedSliderRatio:m,computedSliderPosition:Math.round(f)}}_refreshComputedValues(){let t=oC._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let s=t-this._arrowSize-this._computedSliderSize/2;return Math.round(s/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let s=t-this._arrowSize,r=this._scrollPosition;return s<this._computedSliderPosition?r-=this._visibleSize:r+=this._visibleSize,r}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let s=this._computedSliderPosition+t;return Math.round(s/this._computedSliderRatio)}},STe=class extends LG{constructor(e,t,s){let r=e.getScrollDimensions(),i=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:s,scrollbarState:new OG(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,r.width,r.scrollWidth,i.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},_Te=class extends LG{constructor(e,t,s){let r=e.getScrollDimensions(),i=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:s,scrollbarState:new OG(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,r.height,r.scrollHeight,i.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},NTe=500,hL=50,CTe=class{constructor(e,t,s){this.timestamp=e,this.deltaX=t,this.deltaY=s,this.score=0}},lC=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let t=1,s=0,r=1,i=this._rear;do{let a=i===this._front?t:Math.pow(2,-r);if(t-=a,s+=this._memory[i].score*a,i===this._front)break;i=(this._capacity+i-1)%this._capacity,r++}while(!0);return s<=.5}acceptStandardWheelEvent(t){if(wA){let s=ro(t.browserEvent),r=OEe(s);this.accept(Date.now(),t.deltaX*r,t.deltaY*r)}else this.accept(Date.now(),t.deltaX,t.deltaY)}accept(t,s,r){let i=null,a=new CTe(t,s,r);this._front===-1&&this._rear===-1?(this._memory[0]=a,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=a),a.score=this._computeScore(a,i)}_computeScore(t,s){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;let r=.5;if((!this._isAlmostInt(t.deltaX)||!this._isAlmostInt(t.deltaY))&&(r+=.25),s){let i=Math.abs(t.deltaX),a=Math.abs(t.deltaY),o=Math.abs(s.deltaX),l=Math.abs(s.deltaY),u=Math.max(Math.min(i,o),1),d=Math.max(Math.min(a,l),1),m=Math.max(i,o),f=Math.max(a,l);m%u===0&&f%d===0&&(r-=.5)}return Math.min(Math.max(r,0),1)}_isAlmostInt(t){return Math.abs(Math.round(t)-t)<.01}};lC.INSTANCE=new lC;var kTe=lC,ATe=class extends NA{constructor(e,t,s){super(),this._onScroll=this._register(new Ue),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new Ue),this.onWillScroll=this._onWillScroll.event,this._options=TTe(t),this._scrollable=s,this._register(this._scrollable.onScroll(i=>{this._onWillScroll.fire(i),this._onDidScroll(i),this._onScroll.fire(i)}));let r={onMouseWheel:i=>this._onMouseWheel(i),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new _Te(this._scrollable,this._options,r)),this._horizontalScrollbar=this._register(new STe(this._scrollable,this._options,r)),this._domNode=document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Mf(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Mf(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Mf(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,i=>this._onMouseOver(i)),this.onmouseleave(this._listenOnDomNode,i=>this._onMouseLeave(i)),this._hideTimeout=this._register(new SA),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=vd(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,co&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new iL(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=vd(this._mouseWheelToDispose),e)){let t=s=>{this._onMouseWheel(new iL(s))};this._mouseWheelToDispose.push(Et(this._listenOnDomNode,Yn.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=kTe.INSTANCE;t.acceptStandardWheelEvent(e);let s=!1;if(e.deltaY||e.deltaX){let i=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+i===0?a=i=0:Math.abs(i)>=Math.abs(a)?a=0:i=0),this._options.flipAxes&&([i,a]=[a,i]);let o=!co&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||o)&&!a&&(a=i,i=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,i=i*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),u={};if(i){let d=hL*i,m=l.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(u,m)}if(a){let d=hL*a,m=l.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(u,m)}u=this._scrollable.validateScrollPosition(u),(l.scrollLeft!==u.scrollLeft||l.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),s=!0)}let r=s;!r&&this._options.alwaysConsumeMouseWheel&&(r=!0),!r&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(r=!0),r&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,s=e.scrollLeft>0,r=s?" left":"",i=t?" top":"",a=s||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${r}`),this._topShadowDomNode.setClassName(`shadow${i}`),this._topLeftShadowDomNode.setClassName(`shadow${a}${i}${r}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),NTe)}},ETe=class extends ATe{constructor(e,t,s){super(e,t,s)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function TTe(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,co&&(t.className+=" mac"),t}var cC=class extends Yt{constructor(e,t,s,r,i,a,o,l){super(),this._bufferService=s,this._optionsService=o,this._renderService=l,this._onRequestScrollLines=this._register(new Ue),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let u=this._register(new xTe({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:d=>_A(r.window,d)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{u.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new ETe(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},u)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(i.onProtocolChange(d=>{this._scrollableElement.updateOptions({handleMouseWheel:!(d&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(Sr.runAndSubscribe(a.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=a.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(en(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=r.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(en(()=>this._styleElement.remove())),this._register(Sr.runAndSubscribe(a.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${a.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${a.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${a.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this.queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._latestYDisp=void 0,this.queueSync()})),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(d=>this._handleScroll(d)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:this._optionsService.rawOptions.overviewRuler?.width||14}}queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),s=t-this._bufferService.buffer.ydisp;s!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(s)),this._isHandlingScroll=!1}};cC=fn([Qe(2,si),Qe(3,xl),Qe(4,xG),Qe(5,Kh),Qe(6,ni),Qe(7,vl)],cC);var dC=class extends Yt{constructor(e,t,s,r,i){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=s,this._decorationService=r,this._renderService=i,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(a=>this._removeDecoration(a))),this._register(en(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){let t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer",e?.options?.layer==="top"),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,t.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let s=e.options.x??0;return s&&s>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let s=this._decorationElements.get(e);s||(s=this._createElement(e),e.element=s,this._decorationElements.set(e,s),this._container.appendChild(s),e.onDispose(()=>{this._decorationElements.delete(e),s.remove()})),s.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(s.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,s.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(s)}}_refreshXPosition(e,t=e.element){if(!t)return;let s=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=s?`${s*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=s?`${s*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};dC=fn([Qe(1,si),Qe(2,xl),Qe(3,Qp),Qe(4,vl)],dC);var PTe=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,s){return t>=e.startBufferLine-this._linePadding[s||"full"]&&t<=e.endBufferLine+this._linePadding[s||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},qa={full:0,left:0,center:0,right:0},ql={full:0,left:0,center:0,right:0},Qm={full:0,left:0,center:0,right:0},Ab=class extends Yt{constructor(e,t,s,r,i,a,o,l){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=s,this._decorationService=r,this._renderService=i,this._optionsService=a,this._themeService=o,this._coreBrowserService=l,this._colorZoneStore=new PTe,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement),this._register(en(()=>this._canvas?.remove()));let u=this._canvas.getContext("2d");if(u)this._ctx=u;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){return this._optionsService.options.overviewRuler?.width||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);ql.full=this._canvas.width,ql.left=e,ql.center=t,ql.right=e,this._refreshDrawHeightConstants(),Qm.full=1,Qm.left=1,Qm.center=1+ql.left,Qm.right=1+ql.left+ql.center}_refreshDrawHeightConstants(){qa.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);qa.left=t,qa.center=t,qa.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*qa.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*qa.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*qa.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*qa.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Qm[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-qa[e.position||"full"]/2),ql[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+qa[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Ab=fn([Qe(2,si),Qe(3,Qp),Qe(4,vl),Qe(5,ni),Qe(6,Kh),Qe(7,xl)],Ab);var Pe;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(Pe||={});var kv;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(kv||={});var FG;(e=>e.ST=`${Pe.ESC}\\`)(FG||={});var uC=class{constructor(e,t,s,r,i,a){this._textarea=e,this._compositionView=t,this._bufferService=s,this._optionsService=r,this._coreService=i,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===20||e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let s;t.start+=this._dataAlreadySent.length,this._isComposing?s=this._textarea.value.substring(t.start,this._compositionPosition.start):s=this._textarea.value.substring(t.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,s=t.replace(e,"");this._dataAlreadySent=s,t.length>e.length?this._coreService.triggerDataEvent(s,!0):t.length<e.length?this._coreService.triggerDataEvent(`${Pe.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,r=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,i=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=i+"px",this._compositionView.style.top=r+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let a=this._compositionView.getBoundingClientRect();this._textarea.style.left=i+"px",this._textarea.style.top=r+"px",this._textarea.style.width=Math.max(a.width,1)+"px",this._textarea.style.height=Math.max(a.height,1)+"px",this._textarea.style.lineHeight=a.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};uC=fn([Qe(2,si),Qe(3,ni),Qe(4,Td),Qe(5,vl)],uC);var Zn=0,Qn=0,Jn=0,hn=0,mL={css:"#00000000",rgba:0},Tn;(e=>{function t(i,a,o,l){return l!==void 0?`#${Hc(i)}${Hc(a)}${Hc(o)}${Hc(l)}`:`#${Hc(i)}${Hc(a)}${Hc(o)}`}e.toCss=t;function s(i,a,o,l=255){return(i<<24|a<<16|o<<8|l)>>>0}e.toRgba=s;function r(i,a,o,l){return{css:e.toCss(i,a,o,l),rgba:e.toRgba(i,a,o,l)}}e.toColor=r})(Tn||={});var Vs;(e=>{function t(u,d){if(hn=(d.rgba&255)/255,hn===1)return{css:d.css,rgba:d.rgba};let m=d.rgba>>24&255,f=d.rgba>>16&255,x=d.rgba>>8&255,v=u.rgba>>24&255,y=u.rgba>>16&255,w=u.rgba>>8&255;Zn=v+Math.round((m-v)*hn),Qn=y+Math.round((f-y)*hn),Jn=w+Math.round((x-w)*hn);let S=Tn.toCss(Zn,Qn,Jn),C=Tn.toRgba(Zn,Qn,Jn);return{css:S,rgba:C}}e.blend=t;function s(u){return(u.rgba&255)===255}e.isOpaque=s;function r(u,d,m){let f=Av.ensureContrastRatio(u.rgba,d.rgba,m);if(f)return Tn.toColor(f>>24&255,f>>16&255,f>>8&255)}e.ensureContrastRatio=r;function i(u){let d=(u.rgba|255)>>>0;return[Zn,Qn,Jn]=Av.toChannels(d),{css:Tn.toCss(Zn,Qn,Jn),rgba:d}}e.opaque=i;function a(u,d){return hn=Math.round(d*255),[Zn,Qn,Jn]=Av.toChannels(u.rgba),{css:Tn.toCss(Zn,Qn,Jn,hn),rgba:Tn.toRgba(Zn,Qn,Jn,hn)}}e.opacity=a;function o(u,d){return hn=u.rgba&255,a(u,hn*d/255)}e.multiplyOpacity=o;function l(u){return[u.rgba>>24&255,u.rgba>>16&255,u.rgba>>8&255]}e.toColorRGB=l})(Vs||={});var nn;(e=>{let t,s;try{let i=document.createElement("canvas");i.width=1,i.height=1;let a=i.getContext("2d",{willReadFrequently:!0});a&&(t=a,t.globalCompositeOperation="copy",s=t.createLinearGradient(0,0,1,1))}catch{}function r(i){if(i.match(/#[\da-f]{3,8}/i))switch(i.length){case 4:return Zn=parseInt(i.slice(1,2).repeat(2),16),Qn=parseInt(i.slice(2,3).repeat(2),16),Jn=parseInt(i.slice(3,4).repeat(2),16),Tn.toColor(Zn,Qn,Jn);case 5:return Zn=parseInt(i.slice(1,2).repeat(2),16),Qn=parseInt(i.slice(2,3).repeat(2),16),Jn=parseInt(i.slice(3,4).repeat(2),16),hn=parseInt(i.slice(4,5).repeat(2),16),Tn.toColor(Zn,Qn,Jn,hn);case 7:return{css:i,rgba:(parseInt(i.slice(1),16)<<8|255)>>>0};case 9:return{css:i,rgba:parseInt(i.slice(1),16)>>>0}}let a=i.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(a)return Zn=parseInt(a[1]),Qn=parseInt(a[2]),Jn=parseInt(a[3]),hn=Math.round((a[5]===void 0?1:parseFloat(a[5]))*255),Tn.toColor(Zn,Qn,Jn,hn);if(!t||!s)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=s,t.fillStyle=i,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[Zn,Qn,Jn,hn]=t.getImageData(0,0,1,1).data,hn!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Tn.toRgba(Zn,Qn,Jn,hn),css:i}}e.toColor=r})(nn||={});var $r;(e=>{function t(r){return s(r>>16&255,r>>8&255,r&255)}e.relativeLuminance=t;function s(r,i,a){let o=r/255,l=i/255,u=a/255,d=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),m=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4),f=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4);return d*.2126+m*.7152+f*.0722}e.relativeLuminance2=s})($r||={});var Av;(e=>{function t(o,l){if(hn=(l&255)/255,hn===1)return l;let u=l>>24&255,d=l>>16&255,m=l>>8&255,f=o>>24&255,x=o>>16&255,v=o>>8&255;return Zn=f+Math.round((u-f)*hn),Qn=x+Math.round((d-x)*hn),Jn=v+Math.round((m-v)*hn),Tn.toRgba(Zn,Qn,Jn)}e.blend=t;function s(o,l,u){let d=$r.relativeLuminance(o>>8),m=$r.relativeLuminance(l>>8);if(Ko(d,m)<u){if(m<d){let v=r(o,l,u),y=Ko(d,$r.relativeLuminance(v>>8));if(y<u){let w=i(o,l,u),S=Ko(d,$r.relativeLuminance(w>>8));return y>S?v:w}return v}let f=i(o,l,u),x=Ko(d,$r.relativeLuminance(f>>8));if(x<u){let v=r(o,l,u),y=Ko(d,$r.relativeLuminance(v>>8));return x>y?f:v}return f}}e.ensureContrastRatio=s;function r(o,l,u){let d=o>>24&255,m=o>>16&255,f=o>>8&255,x=l>>24&255,v=l>>16&255,y=l>>8&255,w=Ko($r.relativeLuminance2(x,v,y),$r.relativeLuminance2(d,m,f));for(;w<u&&(x>0||v>0||y>0);)x-=Math.max(0,Math.ceil(x*.1)),v-=Math.max(0,Math.ceil(v*.1)),y-=Math.max(0,Math.ceil(y*.1)),w=Ko($r.relativeLuminance2(x,v,y),$r.relativeLuminance2(d,m,f));return(x<<24|v<<16|y<<8|255)>>>0}e.reduceLuminance=r;function i(o,l,u){let d=o>>24&255,m=o>>16&255,f=o>>8&255,x=l>>24&255,v=l>>16&255,y=l>>8&255,w=Ko($r.relativeLuminance2(x,v,y),$r.relativeLuminance2(d,m,f));for(;w<u&&(x<255||v<255||y<255);)x=Math.min(255,x+Math.ceil((255-x)*.1)),v=Math.min(255,v+Math.ceil((255-v)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),w=Ko($r.relativeLuminance2(x,v,y),$r.relativeLuminance2(d,m,f));return(x<<24|v<<16|y<<8|255)>>>0}e.increaseLuminance=i;function a(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}e.toChannels=a})(Av||={});function Hc(e){let t=e.toString(16);return t.length<2?"0"+t:t}function Ko(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var RTe=class extends Zp{constructor(e,t,s){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=s}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Eb=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new ga}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let s=[],r=t.translateToString(!0),i=0,a=0,o=0,l=t.getFg(0),u=t.getBg(0);for(let d=0;d<t.getTrimmedLength();d++)if(t.loadCell(d,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==l||this._workCell.bg!==u){if(d-i>1){let m=this._getJoinedRanges(r,o,a,t,i);for(let f=0;f<m.length;f++)s.push(m[f])}i=d,o=a,l=this._workCell.fg,u=this._workCell.bg}a+=this._workCell.getChars().length||Jl.length}if(this._bufferService.cols-i>1){let d=this._getJoinedRanges(r,o,a,t,i);for(let m=0;m<d.length;m++)s.push(d[m])}return s}_getJoinedRanges(e,t,s,r,i){let a=e.substring(t,s),o=[];try{o=this._characterJoiners[0].handler(a)}catch(l){console.error(l)}for(let l=1;l<this._characterJoiners.length;l++)try{let u=this._characterJoiners[l].handler(a);for(let d=0;d<u.length;d++)Eb._mergeRanges(o,u[d])}catch(u){console.error(u)}return this._stringRangesToCellRanges(o,r,i),o}_stringRangesToCellRanges(e,t,s){let r=0,i=!1,a=0,o=e[r];if(o){for(let l=s;l<this._bufferService.cols;l++){let u=t.getWidth(l),d=t.getString(l).length||Jl.length;if(u!==0){if(!i&&o[0]<=a&&(o[0]=l,i=!0),o[1]<=a){if(o[1]=l,o=e[++r],!o)break;o[0]<=a?(o[0]=l,i=!0):i=!1}a+=d}}o&&(o[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let s=!1;for(let r=0;r<e.length;r++){let i=e[r];if(s){if(t[1]<=i[0])return e[r-1][1]=t[1],e;if(t[1]<=i[1])return e[r-1][1]=Math.max(t[1],i[1]),e.splice(r,1),e;e.splice(r,1),r--}else{if(t[1]<=i[0])return e.splice(r,0,t),e;if(t[1]<=i[1])return i[0]=Math.min(t[0],i[0]),e;t[0]<i[1]&&(i[0]=Math.min(t[0],i[0]),s=!0);continue}}return s?e[e.length-1][1]=t[1]:e.push(t),e}};Eb=fn([Qe(0,si)],Eb);function DTe(e){return 57508<=e&&e<=57558}function ITe(e){return 9472<=e&&e<=9631}function MTe(e){return DTe(e)||ITe(e)}function LTe(){return{css:{canvas:Xx(),cell:Xx()},device:{canvas:Xx(),cell:Xx(),char:{width:0,height:0,left:0,top:0}}}}function Xx(){return{width:0,height:0}}var hC=class{constructor(e,t,s,r,i,a,o){this._document=e,this._characterJoinerService=t,this._optionsService=s,this._coreBrowserService=r,this._coreService=i,this._decorationService=a,this._themeService=o,this._workCell=new ga,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,s){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=s}createRow(e,t,s,r,i,a,o,l,u,d,m){let f=[],x=this._characterJoinerService.getJoinedCharacters(t),v=this._themeService.colors,y=e.getNoBgTrimmedLength();s&&y<a+1&&(y=a+1);let w,S=0,C="",_=0,j=0,T=0,E=0,A=!1,R=0,D=!1,M=0,P=0,O=[],F=d!==-1&&m!==-1;for(let $=0;$<y;$++){e.loadCell($,this._workCell);let z=this._workCell.getWidth();if(z===0)continue;let H=!1,I=$>=P,V=$,B=this._workCell;if(x.length>0&&$===x[0][0]&&I){let ce=x.shift(),He=this._isCellInSelection(ce[0],t);for(_=ce[0]+1;_<ce[1];_++)I&&=He===this._isCellInSelection(_,t);I&&=!s||a<ce[0]||a>=ce[1],I?(H=!0,B=new RTe(this._workCell,e.translateToString(!0,ce[0],ce[1]),ce[1]-ce[0]),V=ce[1]-1,z=B.getWidth()):P=ce[1]}let K=this._isCellInSelection($,t),L=s&&$===a,G=F&&$>=d&&$<=m,Y=!1;this._decorationService.forEachDecorationAtCell($,t,void 0,ce=>{Y=!0});let q=B.getChars()||Jl;if(q===" "&&(B.isUnderline()||B.isOverline())&&(q=""),M=z*l-u.get(q,B.isBold(),B.isItalic()),!w)w=this._document.createElement("span");else if(S&&(K&&D||!K&&!D&&B.bg===j)&&(K&&D&&v.selectionForeground||B.fg===T)&&B.extended.ext===E&&G===A&&M===R&&!L&&!H&&!Y&&I){B.isInvisible()?C+=Jl:C+=q,S++;continue}else S&&(w.textContent=C),w=this._document.createElement("span"),S=0,C="";if(j=B.bg,T=B.fg,E=B.extended.ext,A=G,R=M,D=K,H&&a>=$&&a<=V&&(a=$),!this._coreService.isCursorHidden&&L&&this._coreService.isCursorInitialized){if(O.push("xterm-cursor"),this._coreBrowserService.isFocused)o&&O.push("xterm-cursor-blink"),O.push(r==="bar"?"xterm-cursor-bar":r==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(i)switch(i){case"outline":O.push("xterm-cursor-outline");break;case"block":O.push("xterm-cursor-block");break;case"bar":O.push("xterm-cursor-bar");break;case"underline":O.push("xterm-cursor-underline");break}}if(B.isBold()&&O.push("xterm-bold"),B.isItalic()&&O.push("xterm-italic"),B.isDim()&&O.push("xterm-dim"),B.isInvisible()?C=Jl:C=B.getChars()||Jl,B.isUnderline()&&(O.push(`xterm-underline-${B.extended.underlineStyle}`),C===" "&&(C=""),!B.isUnderlineColorDefault()))if(B.isUnderlineColorRGB())w.style.textDecorationColor=`rgb(${Zp.toColorRGB(B.getUnderlineColor()).join(",")})`;else{let ce=B.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&B.isBold()&&ce<8&&(ce+=8),w.style.textDecorationColor=v.ansi[ce].css}B.isOverline()&&(O.push("xterm-overline"),C===" "&&(C="")),B.isStrikethrough()&&O.push("xterm-strikethrough"),G&&(w.style.textDecoration="underline");let Q=B.getFgColor(),se=B.getFgColorMode(),te=B.getBgColor(),ee=B.getBgColorMode(),pe=!!B.isInverse();if(pe){let ce=Q;Q=te,te=ce;let He=se;se=ee,ee=He}let fe,re,Z=!1;this._decorationService.forEachDecorationAtCell($,t,void 0,ce=>{ce.options.layer!=="top"&&Z||(ce.backgroundColorRGB&&(ee=50331648,te=ce.backgroundColorRGB.rgba>>8&16777215,fe=ce.backgroundColorRGB),ce.foregroundColorRGB&&(se=50331648,Q=ce.foregroundColorRGB.rgba>>8&16777215,re=ce.foregroundColorRGB),Z=ce.options.layer==="top")}),!Z&&K&&(fe=this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque,te=fe.rgba>>8&16777215,ee=50331648,Z=!0,v.selectionForeground&&(se=50331648,Q=v.selectionForeground.rgba>>8&16777215,re=v.selectionForeground)),Z&&O.push("xterm-decoration-top");let ie;switch(ee){case 16777216:case 33554432:ie=v.ansi[te],O.push(`xterm-bg-${te}`);break;case 50331648:ie=Tn.toColor(te>>16,te>>8&255,te&255),this._addStyle(w,`background-color:#${fL((te>>>0).toString(16),"0",6)}`);break;default:pe?(ie=v.foreground,O.push("xterm-bg-257")):ie=v.background}switch(fe||B.isDim()&&(fe=Vs.multiplyOpacity(ie,.5)),se){case 16777216:case 33554432:B.isBold()&&Q<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Q+=8),this._applyMinimumContrast(w,ie,v.ansi[Q],B,fe,void 0)||O.push(`xterm-fg-${Q}`);break;case 50331648:let ce=Tn.toColor(Q>>16&255,Q>>8&255,Q&255);this._applyMinimumContrast(w,ie,ce,B,fe,re)||this._addStyle(w,`color:#${fL(Q.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(w,ie,v.foreground,B,fe,re)||pe&&O.push("xterm-fg-257")}O.length&&(w.className=O.join(" "),O.length=0),!L&&!H&&!Y&&I?S++:w.textContent=C,M!==this.defaultSpacing&&(w.style.letterSpacing=`${M}px`),f.push(w),$=V}return w&&S&&(w.textContent=C),f}_applyMinimumContrast(e,t,s,r,i,a){if(this._optionsService.rawOptions.minimumContrastRatio===1||MTe(r.getCode()))return!1;let o=this._getContrastCache(r),l;if(!i&&!a&&(l=o.getColor(t.rgba,s.rgba)),l===void 0){let u=this._optionsService.rawOptions.minimumContrastRatio/(r.isDim()?2:1);l=Vs.ensureContrastRatio(i||t,a||s,u),o.setColor((i||t).rgba,(a||s).rgba,l??null)}return l?(this._addStyle(e,`color:${l.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let s=this._selectionStart,r=this._selectionEnd;return!s||!r?!1:this._columnSelectMode?s[0]<=r[0]?e>=s[0]&&t>=s[1]&&e<r[0]&&t<=r[1]:e<s[0]&&t>=s[1]&&e>=r[0]&&t<=r[1]:t>s[1]&&t<r[1]||s[1]===r[1]&&t===s[1]&&e>=s[0]&&e<r[0]||s[1]<r[1]&&t===r[1]&&e<r[0]||s[1]<r[1]&&t===s[1]&&e>=s[0]}};hC=fn([Qe(1,yG),Qe(2,ni),Qe(3,xl),Qe(4,Td),Qe(5,Qp),Qe(6,Kh)],hC);function fL(e,t,s){for(;e.length<s;)e=t+e;return e}var OTe=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let s=e.createElement("span");s.classList.add("xterm-char-measure-element");let r=e.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontWeight="bold";let i=e.createElement("span");i.classList.add("xterm-char-measure-element"),i.style.fontStyle="italic";let a=e.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontWeight="bold",a.style.fontStyle="italic",this._measureElements=[s,r,i,a],this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(i),this._container.appendChild(a),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,s,r){e===this._font&&t===this._fontSize&&s===this._weight&&r===this._weightBold||(this._font=e,this._fontSize=t,this._weight=s,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${s}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${s}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(e,t,s){let r=0;if(!t&&!s&&e.length===1&&(r=e.charCodeAt(0))<256){if(this._flat[r]!==-9999)return this._flat[r];let o=this._measure(e,0);return o>0&&(this._flat[r]=o),o}let i=e;t&&(i+="B"),s&&(i+="I");let a=this._holey.get(i);if(a===void 0){let o=0;t&&(o|=1),s&&(o|=2),a=this._measure(e,o),a>0&&this._holey.set(i,a)}return a}_measure(e,t){let s=this._measureElements[t];return s.textContent=e.repeat(32),s.offsetWidth/32}},FTe=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,s,r=!1){if(this.selectionStart=t,this.selectionEnd=s,!t||!s||t[0]===s[0]&&t[1]===s[1]){this.clear();return}let i=e.buffers.active.ydisp,a=t[1]-i,o=s[1]-i,l=Math.max(a,0),u=Math.min(o,e.rows-1);if(l>=e.rows||u<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=r,this.viewportStartRow=a,this.viewportEndRow=o,this.viewportCappedStartRow=l,this.viewportCappedEndRow=u,this.startCol=t[0],this.endCol=s[0]}isCellSelected(e,t,s){return this.hasSelection?(s-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&s>=this.viewportCappedStartRow&&t<this.endCol&&s<=this.viewportCappedEndRow:t<this.startCol&&s>=this.viewportCappedStartRow&&t>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&t>=this.startCol):!1}};function BTe(){return new FTe}var e_="xterm-dom-renderer-owner-",ea="xterm-rows",Zx="xterm-fg-",pL="xterm-bg-",Jm="xterm-focus",Qx="xterm-selection",zTe=1,mC=class extends Yt{constructor(e,t,s,r,i,a,o,l,u,d,m,f,x,v){super(),this._terminal=e,this._document=t,this._element=s,this._screenElement=r,this._viewportElement=i,this._helperContainer=a,this._linkifier2=o,this._charSizeService=u,this._optionsService=d,this._bufferService=m,this._coreService=f,this._coreBrowserService=x,this._themeService=v,this._terminalClass=zTe++,this._rowElements=[],this._selectionRenderModel=BTe(),this.onRequestRedraw=this._register(new Ue).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(ea),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(Qx),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=LTe(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(y=>this._injectCss(y))),this._injectCss(this._themeService.colors),this._rowFactory=l.createInstance(hC,document),this._element.classList.add(e_+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(y=>this._handleLinkHover(y))),this._register(this._linkifier2.onHideLinkUnderline(y=>this._handleLinkLeave(y))),this._register(en(()=>{this._element.classList.remove(e_+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new OTe(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let s of this._rowElements)s.style.width=`${this.dimensions.css.canvas.width}px`,s.style.height=`${this.dimensions.css.cell.height}px`,s.style.lineHeight=`${this.dimensions.css.cell.height}px`,s.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${ea} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${ea} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${ea} .xterm-dim { color: ${Vs.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let s=`blink_underline_${this._terminalClass}`,r=`blink_bar_${this._terminalClass}`,i=`blink_block_${this._terminalClass}`;t+=`@keyframes ${s} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${r} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${i} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${ea}.${Jm} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${ea}.${Jm} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${ea}.${Jm} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${ea} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${ea} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${ea} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${ea} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${ea} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${Qx} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Qx} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Qx} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[a,o]of e.ansi.entries())t+=`${this._terminalSelector} .${Zx}${a} { color: ${o.css}; }${this._terminalSelector} .${Zx}${a}.xterm-dim { color: ${Vs.multiplyOpacity(o,.5).css}; }${this._terminalSelector} .${pL}${a} { background-color: ${o.css}; }`;t+=`${this._terminalSelector} .${Zx}257 { color: ${Vs.opaque(e.background).css}; }${this._terminalSelector} .${Zx}257.xterm-dim { color: ${Vs.multiplyOpacity(Vs.opaque(e.background),.5).css}; }${this._terminalSelector} .${pL}257 { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let s=this._rowElements.length;s<=t;s++){let r=this._document.createElement("div");this._rowContainer.appendChild(r),this._rowElements.push(r)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(Jm),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(Jm),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,s){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,s),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,s),!this._selectionRenderModel.hasSelection))return;let r=this._selectionRenderModel.viewportStartRow,i=this._selectionRenderModel.viewportEndRow,a=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow,l=this._document.createDocumentFragment();if(s){let u=e[0]>t[0];l.appendChild(this._createSelectionElement(a,u?t[0]:e[0],u?e[0]:t[0],o-a+1))}else{let u=r===a?e[0]:0,d=a===i?t[0]:this._bufferService.cols;l.appendChild(this._createSelectionElement(a,u,d));let m=o-a-1;if(l.appendChild(this._createSelectionElement(a+1,0,this._bufferService.cols,m)),a!==o){let f=i===o?t[0]:this._bufferService.cols;l.appendChild(this._createSelectionElement(o,0,f))}}this._selectionContainer.appendChild(l)}_createSelectionElement(e,t,s,r=1){let i=this._document.createElement("div"),a=t*this.dimensions.css.cell.width,o=this.dimensions.css.cell.width*(s-t);return a+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-a),i.style.height=`${r*this.dimensions.css.cell.height}px`,i.style.top=`${e*this.dimensions.css.cell.height}px`,i.style.left=`${a}px`,i.style.width=`${o}px`,i}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let s=this._bufferService.buffer,r=s.ybase+s.y,i=Math.min(s.x,this._bufferService.cols-1),a=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,o=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,l=this._optionsService.rawOptions.cursorInactiveStyle;for(let u=e;u<=t;u++){let d=u+s.ydisp,m=this._rowElements[u],f=s.lines.get(d);if(!m||!f)break;m.replaceChildren(...this._rowFactory.createRow(f,d,d===r,o,l,i,a,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${e_}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,s,r,i,a){s<0&&(e=0),r<0&&(t=0);let o=this._bufferService.rows-1;s=Math.max(Math.min(s,o),0),r=Math.max(Math.min(r,o),0),i=Math.min(i,this._bufferService.cols);let l=this._bufferService.buffer,u=l.ybase+l.y,d=Math.min(l.x,i-1),m=this._optionsService.rawOptions.cursorBlink,f=this._optionsService.rawOptions.cursorStyle,x=this._optionsService.rawOptions.cursorInactiveStyle;for(let v=s;v<=r;++v){let y=v+l.ydisp,w=this._rowElements[v],S=l.lines.get(y);if(!w||!S)break;w.replaceChildren(...this._rowFactory.createRow(S,y,y===u,f,x,d,m,this.dimensions.css.cell.width,this._widthCache,a?v===s?e:0:-1,a?(v===r?t:i)-1:-1))}}};mC=fn([Qe(7,vA),Qe(8,iw),Qe(9,ni),Qe(10,si),Qe(11,Td),Qe(12,xl),Qe(13,Kh)],mC);var fC=class extends Yt{constructor(e,t,s){super(),this._optionsService=s,this.width=0,this.height=0,this._onCharSizeChange=this._register(new Ue),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new HTe(this._optionsService))}catch{this._measureStrategy=this._register(new $Te(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};fC=fn([Qe(2,ni)],fC);var BG=class extends Yt{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},$Te=class extends BG{constructor(e,t,s){super(),this._document=e,this._parentElement=t,this._optionsService=s,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},HTe=class extends BG{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},UTe=class extends Yt{constructor(e,t,s){super(),this._textarea=e,this._window=t,this.mainDocument=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new GTe(this._window)),this._onDprChange=this._register(new Ue),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new Ue),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(r=>this._screenDprMonitor.setWindow(r))),this._register(Sr.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(Et(this._textarea,"focus",()=>this._isFocused=!0)),this._register(Et(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},GTe=class extends Yt{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new ph),this._onDprChange=this._register(new Ue),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(en(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=Et(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},VTe=class extends Yt{constructor(){super(),this.linkProviders=[],this._register(en(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function CA(e,t,s){let r=s.getBoundingClientRect(),i=e.getComputedStyle(s),a=parseInt(i.getPropertyValue("padding-left")),o=parseInt(i.getPropertyValue("padding-top"));return[t.clientX-r.left-a,t.clientY-r.top-o]}function qTe(e,t,s,r,i,a,o,l,u){if(!a)return;let d=CA(e,t,s);if(d)return d[0]=Math.ceil((d[0]+(u?o/2:0))/o),d[1]=Math.ceil(d[1]/l),d[0]=Math.min(Math.max(d[0],1),r+(u?1:0)),d[1]=Math.min(Math.max(d[1],1),i),d}var pC=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,s,r,i){return qTe(window,e,t,s,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,i)}getMouseReportCoords(e,t){let s=CA(window,e,t);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};pC=fn([Qe(0,vl),Qe(1,iw)],pC);var WTe=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,s){this._rowCount=s,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},zG={};nEe(zG,{getSafariVersion:()=>YTe,isChromeOS:()=>GG,isFirefox:()=>$G,isIpad:()=>XTe,isIphone:()=>ZTe,isLegacyEdge:()=>KTe,isLinux:()=>kA,isMac:()=>Tb,isNode:()=>aw,isSafari:()=>HG,isWindows:()=>UG});var aw=typeof process<"u"&&"title"in process,Jp=aw?"node":navigator.userAgent,eg=aw?"node":navigator.platform,$G=Jp.includes("Firefox"),KTe=Jp.includes("Edge"),HG=/^((?!chrome|android).)*safari/i.test(Jp);function YTe(){if(!HG)return 0;let e=Jp.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Tb=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(eg),XTe=eg==="iPad",ZTe=eg==="iPhone",UG=["Windows","Win16","Win32","WinCE"].includes(eg),kA=eg.indexOf("Linux")>=0,GG=/\bCrOS\b/.test(Jp),VG=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,s=0,r=e.timeRemaining(),i=0;for(;this._i<this._tasks.length;){if(t=performance.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,performance.now()-t),s=Math.max(t,s),i=e.timeRemaining(),s*1.5>i){r-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-t))}ms`),this._start();return}r=i}this.clear()}},QTe=class extends VG{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=performance.now()+e;return{timeRemaining:()=>Math.max(0,t-performance.now())}}},JTe=class extends VG{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Pb=!aw&&"requestIdleCallback"in window?JTe:QTe,ePe=class{constructor(){this._queue=new Pb}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},gC=class extends Yt{constructor(e,t,s,r,i,a,o,l,u){super(),this._rowCount=e,this._optionsService=s,this._charSizeService=r,this._coreService=i,this._coreBrowserService=l,this._renderer=this._register(new ph),this._pausedResizeTask=new ePe,this._observerDisposable=this._register(new ph),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new Ue),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new Ue),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new Ue),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new Ue),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new WTe((d,m)=>this._renderRows(d,m),this._coreBrowserService),this._register(this._renderDebouncer),this._syncOutputHandler=new tPe(this._coreBrowserService,this._coreService,()=>this._fullRefresh()),this._register(en(()=>this._syncOutputHandler.dispose())),this._register(this._coreBrowserService.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(o.onResize(()=>this._fullRefresh())),this._register(o.buffers.onBufferActivate(()=>this._renderer.value?.clear())),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(a.onDecorationRegistered(()=>this._fullRefresh())),this._register(a.onDecorationRemoved(()=>this._fullRefresh())),this._register(this._optionsService.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()})),this._register(this._optionsService.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(o.buffer.y,o.buffer.y,!0))),this._register(u.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(this._coreBrowserService.window,t),this._register(this._coreBrowserService.onWindowChange(d=>this._registerIntersectionObserver(d,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let s=new e.IntersectionObserver(r=>this._handleIntersectionChange(r[r.length-1]),{threshold:0});s.observe(t),this._observerDisposable.value=en(()=>s.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,s=!1){if(this._isPaused){this._needsFullRefresh=!0;return}if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}let r=this._syncOutputHandler.flush();r&&(e=Math.min(e,r.start),t=Math.max(t,r.end)),s||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){if(this._renderer.value){if(this._coreService.decPrivateModes.synchronizedOutput){this._syncOutputHandler.bufferRows(e,t);return}e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0}}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value?.handleResize(e,t)):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,s){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=s,this._renderer.value?.handleSelectionChanged(e,t,s)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};gC=fn([Qe(2,ni),Qe(3,iw),Qe(4,Td),Qe(5,Qp),Qe(6,si),Qe(7,xl),Qe(8,Kh)],gC);var tPe=class{constructor(e,t,s){this._coreBrowserService=e,this._coreService=t,this._onTimeout=s,this._start=0,this._end=0,this._isBuffering=!1}bufferRows(e,t){this._isBuffering?(this._start=Math.min(this._start,e),this._end=Math.max(this._end,t)):(this._start=e,this._end=t,this._isBuffering=!0),this._timeout===void 0&&(this._timeout=this._coreBrowserService.window.setTimeout(()=>{this._timeout=void 0,this._coreService.decPrivateModes.synchronizedOutput=!1,this._onTimeout()},1e3))}flush(){if(this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0),!this._isBuffering)return;let e={start:this._start,end:this._end};return this._isBuffering=!1,e}dispose(){this._timeout!==void 0&&(this._coreBrowserService.window.clearTimeout(this._timeout),this._timeout=void 0)}};function sPe(e,t,s,r){let i=s.buffer.x,a=s.buffer.y;if(!s.buffer.hasScrollback)return iPe(i,a,e,t,s,r)+ow(a,t,s,r)+aPe(i,a,e,t,s,r);let o;if(a===t)return o=i>e?"D":"C",hp(Math.abs(i-e),up(o,r));o=a>t?"D":"C";let l=Math.abs(a-t),u=rPe(a>t?e:i,s)+(l-1)*s.cols+1+nPe(a>t?i:e);return hp(u,up(o,r))}function nPe(e,t){return e-1}function rPe(e,t){return t.cols-e}function iPe(e,t,s,r,i,a){return ow(t,r,i,a).length===0?"":hp(WG(e,t,e,t-bd(t,i),!1,i).length,up("D",a))}function ow(e,t,s,r){let i=e-bd(e,s),a=t-bd(t,s),o=Math.abs(i-a)-oPe(e,t,s);return hp(o,up(qG(e,t),r))}function aPe(e,t,s,r,i,a){let o;ow(t,r,i,a).length>0?o=r-bd(r,i):o=t;let l=r,u=lPe(e,t,s,r,i,a);return hp(WG(e,o,s,l,u==="C",i).length,up(u,a))}function oPe(e,t,s){let r=0,i=e-bd(e,s),a=t-bd(t,s);for(let o=0;o<Math.abs(i-a);o++){let l=qG(e,t)==="A"?-1:1;s.buffer.lines.get(i+l*o)?.isWrapped&&r++}return r}function bd(e,t){let s=0,r=t.buffer.lines.get(e),i=r?.isWrapped;for(;i&&e>=0&&e<t.rows;)s++,r=t.buffer.lines.get(--e),i=r?.isWrapped;return s}function lPe(e,t,s,r,i,a){let o;return ow(s,r,i,a).length>0?o=r-bd(r,i):o=t,e<s&&o<=r||e>=s&&o<r?"C":"D"}function qG(e,t){return e>t?"A":"B"}function WG(e,t,s,r,i,a){let o=e,l=t,u="";for(;(o!==s||l!==r)&&l>=0&&l<a.buffer.lines.length;)o+=i?1:-1,i&&o>a.cols-1?(u+=a.buffer.translateBufferLineToString(l,!1,e,o),o=0,e=0,l++):!i&&o<0&&(u+=a.buffer.translateBufferLineToString(l,!1,0,e+1),o=a.cols-1,e=o,l--);return u+a.buffer.translateBufferLineToString(l,!1,e,o)}function up(e,t){let s=t?"O":"[";return Pe.ESC+s+e}function hp(e,t){e=Math.floor(e);let s="";for(let r=0;r<e;r++)s+=t;return s}var cPe=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function gL(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var t_=50,dPe=15,uPe=50,hPe=500,mPe="",fPe=new RegExp(mPe,"g"),xC=class extends Yt{constructor(e,t,s,r,i,a,o,l,u){super(),this._element=e,this._screenElement=t,this._linkifier=s,this._bufferService=r,this._coreService=i,this._mouseService=a,this._optionsService=o,this._renderService=l,this._coreBrowserService=u,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new ga,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new Ue),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new Ue),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new Ue),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new Ue),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=d=>this._handleMouseMove(d),this._mouseUpListener=d=>this._handleMouseUp(d),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(d=>this._handleTrim(d)),this._register(this._bufferService.buffers.onBufferActivate(d=>this._handleBufferActivate(d))),this.enable(),this._model=new cPe(this._bufferService),this._activeSelectionMode=0,this._register(en(()=>{this._removeMouseDownListeners()})),this._register(this._bufferService.onResize(d=>{d.rowsChanged&&this.clearSelection()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let s=this._bufferService.buffer,r=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let i=e[0]<t[0]?e[0]:t[0],a=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){let l=s.translateBufferLineToString(o,!0,i,a);r.push(l)}}else{let i=e[1]===t[1]?t[0]:void 0;r.push(s.translateBufferLineToString(e[1],!0,e[0],i));for(let a=e[1]+1;a<=t[1]-1;a++){let o=s.lines.get(a),l=s.translateBufferLineToString(a,!0);o?.isWrapped?r[r.length-1]+=l:r.push(l)}if(e[1]!==t[1]){let a=s.lines.get(t[1]),o=s.translateBufferLineToString(t[1],!0,0,t[0]);a&&a.isWrapped?r[r.length-1]+=o:r.push(o)}}return r.map(i=>i.replace(fPe," ")).join(UG?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),kA&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),s=this._model.finalSelectionStart,r=this._model.finalSelectionEnd;return!s||!r||!t?!1:this._areCoordsInSelection(t,s,r)}isCellInSelection(e,t){let s=this._model.finalSelectionStart,r=this._model.finalSelectionEnd;return!s||!r?!1:this._areCoordsInSelection([e,t],s,r)}_areCoordsInSelection(e,t,s){return e[1]>t[1]&&e[1]<s[1]||t[1]===s[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<s[0]||t[1]<s[1]&&e[1]===s[1]&&e[0]<s[0]||t[1]<s[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){let s=this._linkifier.currentLink?.link?.range;if(s)return this._model.selectionStart=[s.start.x-1,s.start.y-1],this._model.selectionStartLength=gL(s,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let r=this._getMouseBufferCoords(e);return r?(this._selectWordAt(r,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=CA(this._coreBrowserService.window,e,this._screenElement)[1],s=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=s?0:(t>s&&(t-=s),t=Math.min(Math.max(t,-t_),t_),t/=t_,t/Math.abs(t)+Math.round(t*(dPe-1)))}shouldForceSelection(e){return Tb?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),uPe)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Tb&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let s=this._bufferService.buffer;if(this._model.selectionEnd[1]<s.lines.length){let r=s.lines.get(this._model.selectionEnd[1]);r&&r.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<hPe&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let s=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(s&&s[0]!==void 0&&s[1]!==void 0){let r=sPe(s[0]-1,s[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(r,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,s=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!s){this._oldHasSelection&&this._fireOnSelectionChange(e,t,s);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,s)}_fireOnSelectionChange(e,t,s){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=s,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let s=t;for(let r=0;t>=r;r++){let i=e.loadCell(r,this._workCell).getChars().length;this._workCell.getWidth()===0?s--:i>1&&t!==r&&(s+=i-1)}return s}setSelection(e,t,s){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=s,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,s=!0,r=!0){if(e[0]>=this._bufferService.cols)return;let i=this._bufferService.buffer,a=i.lines.get(e[1]);if(!a)return;let o=i.translateBufferLineToString(e[1],!1),l=this._convertViewportColToCharacterIndex(a,e[0]),u=l,d=e[0]-l,m=0,f=0,x=0,v=0;if(o.charAt(l)===" "){for(;l>0&&o.charAt(l-1)===" ";)l--;for(;u<o.length&&o.charAt(u+1)===" ";)u++}else{let S=e[0],C=e[0];a.getWidth(S)===0&&(m++,S--),a.getWidth(C)===2&&(f++,C++);let _=a.getString(C).length;for(_>1&&(v+=_-1,u+=_-1);S>0&&l>0&&!this._isCharWordSeparator(a.loadCell(S-1,this._workCell));){a.loadCell(S-1,this._workCell);let j=this._workCell.getChars().length;this._workCell.getWidth()===0?(m++,S--):j>1&&(x+=j-1,l-=j-1),l--,S--}for(;C<a.length&&u+1<o.length&&!this._isCharWordSeparator(a.loadCell(C+1,this._workCell));){a.loadCell(C+1,this._workCell);let j=this._workCell.getChars().length;this._workCell.getWidth()===2?(f++,C++):j>1&&(v+=j-1,u+=j-1),u++,C++}}u++;let y=l+d-m+x,w=Math.min(this._bufferService.cols,u-l+m+f-x-v);if(!(!t&&o.slice(l,u).trim()==="")){if(s&&y===0&&a.getCodePoint(0)!==32){let S=i.lines.get(e[1]-1);if(S&&a.isWrapped&&S.getCodePoint(this._bufferService.cols-1)!==32){let C=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(C){let _=this._bufferService.cols-C.start;y-=_,w+=_}}}if(r&&y+w===this._bufferService.cols&&a.getCodePoint(this._bufferService.cols-1)!==32){let S=i.lines.get(e[1]+1);if(S?.isWrapped&&S.getCodePoint(0)!==32){let C=this._getWordAt([0,e[1]+1],!1,!1,!0);C&&(w+=C.length)}}return{start:y,length:w}}}_selectWordAt(e,t){let s=this._getWordAt(e,t);if(s){for(;s.start<0;)s.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[s.start,e[1]],this._model.selectionStartLength=s.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let s=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,s--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,s++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,s]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),s={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=gL(s,this._bufferService.cols)}};xC=fn([Qe(3,si),Qe(4,Td),Qe(5,bA),Qe(6,ni),Qe(7,vl),Qe(8,xl)],xC);var xL=class{constructor(){this._data={}}set(e,t,s){this._data[e]||(this._data[e]={}),this._data[e][t]=s}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},vL=class{constructor(){this._color=new xL,this._css=new xL}setCss(e,t,s){this._css.set(e,t,s)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,s){this._color.set(e,t,s)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},Ln=Object.freeze((()=>{let e=[nn.toColor("#2e3436"),nn.toColor("#cc0000"),nn.toColor("#4e9a06"),nn.toColor("#c4a000"),nn.toColor("#3465a4"),nn.toColor("#75507b"),nn.toColor("#06989a"),nn.toColor("#d3d7cf"),nn.toColor("#555753"),nn.toColor("#ef2929"),nn.toColor("#8ae234"),nn.toColor("#fce94f"),nn.toColor("#729fcf"),nn.toColor("#ad7fa8"),nn.toColor("#34e2e2"),nn.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let s=0;s<216;s++){let r=t[s/36%6|0],i=t[s/6%6|0],a=t[s%6];e.push({css:Tn.toCss(r,i,a),rgba:Tn.toRgba(r,i,a)})}for(let s=0;s<24;s++){let r=8+s*10;e.push({css:Tn.toCss(r,r,r),rgba:Tn.toRgba(r,r,r)})}return e})()),Vc=nn.toColor("#ffffff"),xf=nn.toColor("#000000"),bL=nn.toColor("#ffffff"),yL=xf,ef={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},pPe=Vc,vC=class extends Yt{constructor(e){super(),this._optionsService=e,this._contrastCache=new vL,this._halfContrastCache=new vL,this._onChangeColors=this._register(new Ue),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Vc,background:xf,cursor:bL,cursorAccent:yL,selectionForeground:void 0,selectionBackgroundTransparent:ef,selectionBackgroundOpaque:Vs.blend(xf,ef),selectionInactiveBackgroundTransparent:ef,selectionInactiveBackgroundOpaque:Vs.blend(xf,ef),scrollbarSliderBackground:Vs.opacity(Vc,.2),scrollbarSliderHoverBackground:Vs.opacity(Vc,.4),scrollbarSliderActiveBackground:Vs.opacity(Vc,.5),overviewRulerBorder:Vc,ansi:Ln.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=Rs(e.foreground,Vc),t.background=Rs(e.background,xf),t.cursor=Vs.blend(t.background,Rs(e.cursor,bL)),t.cursorAccent=Vs.blend(t.background,Rs(e.cursorAccent,yL)),t.selectionBackgroundTransparent=Rs(e.selectionBackground,ef),t.selectionBackgroundOpaque=Vs.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=Rs(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=Vs.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?Rs(e.selectionForeground,mL):void 0,t.selectionForeground===mL&&(t.selectionForeground=void 0),Vs.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=Vs.opacity(t.selectionBackgroundTransparent,.3)),Vs.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=Vs.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=Rs(e.scrollbarSliderBackground,Vs.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=Rs(e.scrollbarSliderHoverBackground,Vs.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=Rs(e.scrollbarSliderActiveBackground,Vs.opacity(t.foreground,.5)),t.overviewRulerBorder=Rs(e.overviewRulerBorder,pPe),t.ansi=Ln.slice(),t.ansi[0]=Rs(e.black,Ln[0]),t.ansi[1]=Rs(e.red,Ln[1]),t.ansi[2]=Rs(e.green,Ln[2]),t.ansi[3]=Rs(e.yellow,Ln[3]),t.ansi[4]=Rs(e.blue,Ln[4]),t.ansi[5]=Rs(e.magenta,Ln[5]),t.ansi[6]=Rs(e.cyan,Ln[6]),t.ansi[7]=Rs(e.white,Ln[7]),t.ansi[8]=Rs(e.brightBlack,Ln[8]),t.ansi[9]=Rs(e.brightRed,Ln[9]),t.ansi[10]=Rs(e.brightGreen,Ln[10]),t.ansi[11]=Rs(e.brightYellow,Ln[11]),t.ansi[12]=Rs(e.brightBlue,Ln[12]),t.ansi[13]=Rs(e.brightMagenta,Ln[13]),t.ansi[14]=Rs(e.brightCyan,Ln[14]),t.ansi[15]=Rs(e.brightWhite,Ln[15]),e.extendedAnsi){let s=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let r=0;r<s;r++)t.ansi[r+16]=Rs(e.extendedAnsi[r],Ln[r+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};vC=fn([Qe(0,ni)],vC);function Rs(e,t){if(e!==void 0)try{return nn.toColor(e)}catch{}return t}var gPe=class{constructor(...e){this._entries=new Map;for(let[t,s]of e)this.set(t,s)}set(e,t){let s=this._entries.get(e);return this._entries.set(e,t),s}forEach(e){for(let[t,s]of this._entries.entries())e(t,s)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},xPe=class{constructor(){this._services=new gPe,this._services.set(vA,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let s=dEe(e).sort((a,o)=>a.index-o.index),r=[];for(let a of s){let o=this._services.get(a.id);if(!o)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id._id}.`);r.push(o)}let i=s.length>0?s[0].index:t.length;if(t.length!==i)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${i+1} conflicts with ${t.length} static arguments`);return new e(...t,...r)}},vPe={trace:0,debug:1,info:2,warn:3,error:4,off:5},bPe="xterm.js: ",bC=class extends Yt{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=vPe[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,s){this._evalLazyOptionalParams(s),e.call(console,(this._optionsService.options.logger?"":bPe)+t,...s)}trace(e,...t){this._logLevel<=0&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=1&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=2&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=3&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=4&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};bC=fn([Qe(0,ni)],bC);var wL=class extends Yt{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new Ue),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new Ue),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new Ue),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let s=0;s<Math.min(e,this.length);s++)t[s]=this._array[this._getCyclicIndex(s)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...s){if(t){for(let r=e;r<this._length-t;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let r=this._length-1;r>=e;r--)this._array[this._getCyclicIndex(r+s.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<s.length;r++)this._array[this._getCyclicIndex(e+r)]=s[r];if(s.length&&this.onInsertEmitter.fire({index:e,amount:s.length}),this._length+s.length>this._maxLength){let r=this._length+s.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=s.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,s){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+s<0)throw new Error("Cannot shift elements in list beyond index 0");if(s>0){for(let i=t-1;i>=0;i--)this.set(e+i+s,this.get(e+i));let r=e+t+s-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<t;r++)this.set(e+r+s,this.get(e+r))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},qt=3,An=Object.freeze(new Zp),Jx=0,s_=2,vf=class KG{constructor(t,s,r=!1){this.isWrapped=r,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*qt);let i=s||ga.fromCharData([0,mG,1,0]);for(let a=0;a<t;++a)this.setCell(a,i);this.length=t}get(t){let s=this._data[t*qt+0],r=s&2097151;return[this._data[t*qt+1],s&2097152?this._combined[t]:r?Zl(r):"",s>>22,s&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):r]}set(t,s){this._data[t*qt+1]=s[0],s[1].length>1?(this._combined[t]=s[1],this._data[t*qt+0]=t|2097152|s[2]<<22):this._data[t*qt+0]=s[1].charCodeAt(0)|s[2]<<22}getWidth(t){return this._data[t*qt+0]>>22}hasWidth(t){return this._data[t*qt+0]&12582912}getFg(t){return this._data[t*qt+1]}getBg(t){return this._data[t*qt+2]}hasContent(t){return this._data[t*qt+0]&4194303}getCodePoint(t){let s=this._data[t*qt+0];return s&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):s&2097151}isCombined(t){return this._data[t*qt+0]&2097152}getString(t){let s=this._data[t*qt+0];return s&2097152?this._combined[t]:s&2097151?Zl(s&2097151):""}isProtected(t){return this._data[t*qt+2]&536870912}loadCell(t,s){return Jx=t*qt,s.content=this._data[Jx+0],s.fg=this._data[Jx+1],s.bg=this._data[Jx+2],s.content&2097152&&(s.combinedData=this._combined[t]),s.bg&268435456&&(s.extended=this._extendedAttrs[t]),s}setCell(t,s){s.content&2097152&&(this._combined[t]=s.combinedData),s.bg&268435456&&(this._extendedAttrs[t]=s.extended),this._data[t*qt+0]=s.content,this._data[t*qt+1]=s.fg,this._data[t*qt+2]=s.bg}setCellFromCodepoint(t,s,r,i){i.bg&268435456&&(this._extendedAttrs[t]=i.extended),this._data[t*qt+0]=s|r<<22,this._data[t*qt+1]=i.fg,this._data[t*qt+2]=i.bg}addCodepointToCell(t,s,r){let i=this._data[t*qt+0];i&2097152?this._combined[t]+=Zl(s):i&2097151?(this._combined[t]=Zl(i&2097151)+Zl(s),i&=-2097152,i|=2097152):i=s|1<<22,r&&(i&=-12582913,i|=r<<22),this._data[t*qt+0]=i}insertCells(t,s,r){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,r),s<this.length-t){let i=new ga;for(let a=this.length-t-s-1;a>=0;--a)this.setCell(t+s+a,this.loadCell(t+a,i));for(let a=0;a<s;++a)this.setCell(t+a,r)}else for(let i=t;i<this.length;++i)this.setCell(i,r);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,r)}deleteCells(t,s,r){if(t%=this.length,s<this.length-t){let i=new ga;for(let a=0;a<this.length-t-s;++a)this.setCell(t+a,this.loadCell(t+s+a,i));for(let a=this.length-s;a<this.length;++a)this.setCell(a,r)}else for(let i=t;i<this.length;++i)this.setCell(i,r);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,r),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,r)}replaceCells(t,s,r,i=!1){if(i){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,r),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodepoint(s,0,1,r);t<s&&t<this.length;)this.isProtected(t)||this.setCell(t,r),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,r),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s,0,1,r);t<s&&t<this.length;)this.setCell(t++,r)}resize(t,s){if(t===this.length)return this._data.length*4*s_<this._data.buffer.byteLength;let r=t*qt;if(t>this.length){if(this._data.buffer.byteLength>=r*4)this._data=new Uint32Array(this._data.buffer,0,r);else{let i=new Uint32Array(r);i.set(this._data),this._data=i}for(let i=this.length;i<t;++i)this.setCell(i,s)}else{this._data=this._data.subarray(0,r);let i=Object.keys(this._combined);for(let o=0;o<i.length;o++){let l=parseInt(i[o],10);l>=t&&delete this._combined[l]}let a=Object.keys(this._extendedAttrs);for(let o=0;o<a.length;o++){let l=parseInt(a[o],10);l>=t&&delete this._extendedAttrs[l]}}return this.length=t,r*4*s_<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*s_<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,s=!1){if(s){for(let r=0;r<this.length;++r)this.isProtected(r)||this.setCell(r,t);return}this._combined={},this._extendedAttrs={};for(let r=0;r<this.length;++r)this.setCell(r,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let s in t._combined)this._combined[s]=t._combined[s];this._extendedAttrs={};for(let s in t._extendedAttrs)this._extendedAttrs[s]=t._extendedAttrs[s];this.isWrapped=t.isWrapped}clone(){let t=new KG(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let s in this._combined)t._combined[s]=this._combined[s];for(let s in this._extendedAttrs)t._extendedAttrs[s]=this._extendedAttrs[s];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*qt+0]&4194303)return t+(this._data[t*qt+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*qt+0]&4194303||this._data[t*qt+2]&50331648)return t+(this._data[t*qt+0]>>22);return 0}copyCellsFrom(t,s,r,i,a){let o=t._data;if(a)for(let u=i-1;u>=0;u--){for(let d=0;d<qt;d++)this._data[(r+u)*qt+d]=o[(s+u)*qt+d];o[(s+u)*qt+2]&268435456&&(this._extendedAttrs[r+u]=t._extendedAttrs[s+u])}else for(let u=0;u<i;u++){for(let d=0;d<qt;d++)this._data[(r+u)*qt+d]=o[(s+u)*qt+d];o[(s+u)*qt+2]&268435456&&(this._extendedAttrs[r+u]=t._extendedAttrs[s+u])}let l=Object.keys(t._combined);for(let u=0;u<l.length;u++){let d=parseInt(l[u],10);d>=s&&(this._combined[d-s+r]=t._combined[d])}}translateToString(t,s,r,i){s=s??0,r=r??this.length,t&&(r=Math.min(r,this.getTrimmedLength())),i&&(i.length=0);let a="";for(;s<r;){let o=this._data[s*qt+0],l=o&2097151,u=o&2097152?this._combined[s]:l?Zl(l):Jl;if(a+=u,i)for(let d=0;d<u.length;++d)i.push(s);s+=o>>22||1}return i&&i.push(s),a}};function yPe(e,t,s,r,i,a){let o=[];for(let l=0;l<e.length-1;l++){let u=l,d=e.get(++u);if(!d.isWrapped)continue;let m=[e.get(l)];for(;u<e.length&&d.isWrapped;)m.push(d),d=e.get(++u);if(!a&&r>=l&&r<u){l+=m.length-1;continue}let f=0,x=mp(m,f,t),v=1,y=0;for(;v<m.length;){let S=mp(m,v,t),C=S-y,_=s-x,j=Math.min(C,_);m[f].copyCellsFrom(m[v],y,x,j,!1),x+=j,x===s&&(f++,x=0),y+=j,y===S&&(v++,y=0),x===0&&f!==0&&m[f-1].getWidth(s-1)===2&&(m[f].copyCellsFrom(m[f-1],s-1,x++,1,!1),m[f-1].setCell(s-1,i))}m[f].replaceCells(x,s,i);let w=0;for(let S=m.length-1;S>0&&(S>f||m[S].getTrimmedLength()===0);S--)w++;w>0&&(o.push(l+m.length-w),o.push(w)),l+=m.length-1}return o}function wPe(e,t){let s=[],r=0,i=t[r],a=0;for(let o=0;o<e.length;o++)if(i===o){let l=t[++r];e.onDeleteEmitter.fire({index:o-a,amount:l}),o+=l-1,a+=l,i=t[++r]}else s.push(o);return{layout:s,countRemoved:a}}function jPe(e,t){let s=[];for(let r=0;r<t.length;r++)s.push(e.get(t[r]));for(let r=0;r<s.length;r++)e.set(r,s[r]);e.length=t.length}function SPe(e,t,s){let r=[],i=e.map((u,d)=>mp(e,d,t)).reduce((u,d)=>u+d),a=0,o=0,l=0;for(;l<i;){if(i-l<s){r.push(i-l);break}a+=s;let u=mp(e,o,t);a>u&&(a-=u,o++);let d=e[o].getWidth(a-1)===2;d&&a--;let m=d?s-1:s;r.push(m),l+=m}return r}function mp(e,t,s){if(t===e.length-1)return e[t].getTrimmedLength();let r=!e[t].hasContent(s-1)&&e[t].getWidth(s-1)===1,i=e[t+1].getWidth(0)===2;return r&&i?s-1:s}var YG=class XG{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=XG._nextId++,this._onDispose=this.register(new Ue),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),vd(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};YG._nextId=1;var _Pe=YG,Un={},qc=Un.B;Un[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};Un.A={"#":""};Un.B=void 0;Un[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};Un.C=Un[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Un.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};Un.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Un.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};Un.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};Un.E=Un[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Un.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};Un.H=Un[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};Un["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var jL=4294967295,SL=class{constructor(e,t,s){this._hasScrollback=e,this._optionsService=t,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=An.clone(),this.savedCharset=qc,this.markers=[],this._nullCell=ga.fromCharData([0,mG,1,0]),this._whitespaceCell=ga.fromCharData([0,Jl,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Pb,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new wL(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new kb),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new kb),this._whitespaceCell}getBlankLine(e,t){return new vf(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>jL?jL:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=An);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new wL(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let s=this.getNullCell(An),r=0,i=this._getCorrectBufferLength(t);if(i>this.lines.maxLength&&(this.lines.maxLength=i),this.lines.length>0){if(this._cols<e)for(let o=0;o<this.lines.length;o++)r+=+this.lines.get(o).resize(e,s);let a=0;if(this._rows<t)for(let o=this._rows;o<t;o++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new vf(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+a+1?(this.ybase--,a++,this.ydisp>0&&this.ydisp--):this.lines.push(new vf(e,s)));else for(let o=this._rows;o>t;o--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(i<this.lines.maxLength){let o=this.lines.length-i;o>0&&(this.lines.trimStart(o),this.ybase=Math.max(this.ybase-o,0),this.ydisp=Math.max(this.ydisp-o,0),this.savedY=Math.max(this.savedY-o,0)),this.lines.maxLength=i}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),a&&(this.y+=a),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let a=0;a<this.lines.length;a++)r+=+this.lines.get(a).resize(e,s);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),r>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let s=this._optionsService.rawOptions.reflowCursorLine,r=yPe(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(An),s);if(r.length>0){let i=wPe(this.lines,r);jPe(this.lines,i.layout),this._reflowLargerAdjustViewport(e,t,i.countRemoved)}}_reflowLargerAdjustViewport(e,t,s){let r=this.getNullCell(An),i=s;for(;i-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new vf(e,r))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)}_reflowSmaller(e,t){let s=this._optionsService.rawOptions.reflowCursorLine,r=this.getNullCell(An),i=[],a=0;for(let o=this.lines.length-1;o>=0;o--){let l=this.lines.get(o);if(!l||!l.isWrapped&&l.getTrimmedLength()<=e)continue;let u=[l];for(;l.isWrapped&&o>0;)l=this.lines.get(--o),u.unshift(l);if(!s){let j=this.ybase+this.y;if(j>=o&&j<o+u.length)continue}let d=u[u.length-1].getTrimmedLength(),m=SPe(u,this._cols,e),f=m.length-u.length,x;this.ybase===0&&this.y!==this.lines.length-1?x=Math.max(0,this.y-this.lines.maxLength+f):x=Math.max(0,this.lines.length-this.lines.maxLength+f);let v=[];for(let j=0;j<f;j++){let T=this.getBlankLine(An,!0);v.push(T)}v.length>0&&(i.push({start:o+u.length+a,newLines:v}),a+=v.length),u.push(...v);let y=m.length-1,w=m[y];w===0&&(y--,w=m[y]);let S=u.length-f-1,C=d;for(;S>=0;){let j=Math.min(C,w);if(u[y]===void 0)break;if(u[y].copyCellsFrom(u[S],C-j,w-j,j,!0),w-=j,w===0&&(y--,w=m[y]),C-=j,C===0){S--;let T=Math.max(S,0);C=mp(u,T,this._cols)}}for(let j=0;j<u.length;j++)m[j]<e&&u[j].setCell(m[j],r);let _=f-x;for(;_-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+f,this.ybase+t-1)}if(i.length>0){let o=[],l=[];for(let w=0;w<this.lines.length;w++)l.push(this.lines.get(w));let u=this.lines.length,d=u-1,m=0,f=i[m];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);let x=0;for(let w=Math.min(this.lines.maxLength-1,u+a-1);w>=0;w--)if(f&&f.start>d+x){for(let S=f.newLines.length-1;S>=0;S--)this.lines.set(w--,f.newLines[S]);w++,o.push({index:d+1,amount:f.newLines.length}),x+=f.newLines.length,f=i[++m]}else this.lines.set(w,l[d--]);let v=0;for(let w=o.length-1;w>=0;w--)o[w].index+=v,this.lines.onInsertEmitter.fire(o[w]),v+=o[w].amount;let y=Math.max(0,u+a-this.lines.maxLength);y>0&&this.lines.onTrimEmitter.fire(y)}}translateBufferLineToString(e,t,s=0,r){let i=this.lines.get(e);return i?i.translateToString(t,s,r):""}getWrappedRangeForLine(e){let t=e,s=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:t,last:s}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new _Pe(e);return this.markers.push(t),t.register(this.lines.onTrim(s=>{t.line-=s,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(s=>{t.line>=s.index&&(t.line+=s.amount)})),t.register(this.lines.onDelete(s=>{t.line>=s.index&&t.line<s.index+s.amount&&t.dispose(),t.line>s.index&&(t.line-=s.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},NPe=class extends Yt{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new Ue),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new SL(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new SL(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},ZG=2,QG=1,yC=class extends Yt{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new Ue),this.onResize=this._onResize.event,this._onScroll=this._register(new Ue),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,ZG),this.rows=Math.max(e.rawOptions.rows||0,QG),this.buffers=this._register(new NPe(e,this)),this._register(this.buffers.onBufferActivate(t=>{this._onScroll.fire(t.activeBuffer.ydisp)}))}get buffer(){return this.buffers.active}resize(e,t){let s=this.cols!==e,r=this.rows!==t;this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t,colsChanged:s,rowsChanged:r})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){let s=this.buffer,r;r=this._cachedBlankLine,(!r||r.length!==this.cols||r.getFg(0)!==e.fg||r.getBg(0)!==e.bg)&&(r=s.getBlankLine(e,t),this._cachedBlankLine=r),r.isWrapped=t;let i=s.ybase+s.scrollTop,a=s.ybase+s.scrollBottom;if(s.scrollTop===0){let o=s.lines.isFull;a===s.lines.length-1?o?s.lines.recycle().copyFrom(r):s.lines.push(r.clone()):s.lines.splice(a+1,0,r.clone()),o?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{let o=a-i+1;s.lines.shiftElements(i+1,o-1,-1),s.lines.set(a,r.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(e,t){let s=this.buffer;if(e<0){if(s.ydisp===0)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);let r=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),r!==s.ydisp&&(t||this._onScroll.fire(s.ydisp))}};yC=fn([Qe(0,ni)],yC);var ku={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnEraseInDisplay:!1,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Tb,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},CPe=["normal","bold","100","200","300","400","500","600","700","800","900"],kPe=class extends Yt{constructor(e){super(),this._onOptionChange=this._register(new Ue),this.onOptionChange=this._onOptionChange.event;let t={...ku};for(let s in e)if(s in t)try{let r=e[s];t[s]=this._sanitizeAndValidateOption(s,r)}catch(r){console.error(r)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(en(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(s=>{s===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(s=>{e.indexOf(s)!==-1&&t()})}_setupOptions(){let e=s=>{if(!(s in ku))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},t=(s,r)=>{if(!(s in ku))throw new Error(`No option with key "${s}"`);r=this._sanitizeAndValidateOption(s,r),this.rawOptions[s]!==r&&(this.rawOptions[s]=r,this._onOptionChange.fire(s))};for(let s in this.rawOptions){let r={get:e.bind(this,s),set:t.bind(this,s)};Object.defineProperty(this.options,s,r)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=ku[e]),!APe(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=ku[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=CPe.includes(t)?t:ku[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function APe(e){return e==="block"||e==="underline"||e==="bar"}function bf(e,t=5){if(typeof e!="object")return e;let s=Array.isArray(e)?[]:{};for(let r in e)s[r]=t<=1?e[r]:e[r]&&bf(e[r],t-1);return s}var _L=Object.freeze({insertMode:!1}),NL=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,synchronizedOutput:!1,wraparound:!0}),wC=class extends Yt{constructor(e,t,s){super(),this._bufferService=e,this._logService=t,this._optionsService=s,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new Ue),this.onData=this._onData.event,this._onUserInput=this._register(new Ue),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new Ue),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new Ue),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=bf(_L),this.decPrivateModes=bf(NL)}reset(){this.modes=bf(_L),this.decPrivateModes=bf(NL)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let s=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&s.ybase!==s.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`),this._logService.trace("sending data (codes)",()=>e.split("").map(r=>r.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`),this._logService.trace("sending binary (codes)",()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};wC=fn([Qe(0,si),Qe(1,vG),Qe(2,ni)],wC);var CL={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function n_(e,t){let s=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(s|=64,s|=e.action):(s|=e.button&3,e.button&4&&(s|=64),e.button&8&&(s|=128),e.action===32?s|=32:e.action===0&&!t&&(s|=3)),s}var r_=String.fromCharCode,kL={DEFAULT:e=>{let t=[n_(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${r_(t[0])}${r_(t[1])}${r_(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${n_(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${n_(e,!0)};${e.x};${e.y}${t}`}},jC=class extends Yt{constructor(e,t,s){super(),this._bufferService=e,this._coreService=t,this._optionsService=s,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._wheelPartialScroll=0,this._onProtocolChange=this._register(new Ue),this.onProtocolChange=this._onProtocolChange.event;for(let r of Object.keys(CL))this.addProtocol(r,CL[r]);for(let r of Object.keys(kL))this.addEncoding(r,kL[r]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null,this._wheelPartialScroll=0}consumeWheelEvent(e,t,s){if(e.deltaY===0||e.shiftKey||t===void 0||s===void 0)return 0;let r=t/s,i=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(i/=r+0,Math.abs(e.deltaY)<50&&(i*=.3),this._wheelPartialScroll+=i,i=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(i*=this._bufferService.rows),i}_applyScrollModifier(e,t){return t.altKey||t.ctrlKey||t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,s){if(s){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};jC=fn([Qe(0,si),Qe(1,Td),Qe(2,ni)],jC);var i_=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],EPe=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],On;function TPe(e,t){let s=0,r=t.length-1,i;if(e<t[0][0]||e>t[r][1])return!1;for(;r>=s;)if(i=s+r>>1,e>t[i][1])s=i+1;else if(e<t[i][0])r=i-1;else return!0;return!1}var PPe=class{constructor(){if(this.version="6",!On){On=new Uint8Array(65536),On.fill(1),On[0]=0,On.fill(0,1,32),On.fill(0,127,160),On.fill(2,4352,4448),On[9001]=2,On[9002]=2,On.fill(2,11904,42192),On[12351]=1,On.fill(2,44032,55204),On.fill(2,63744,64256),On.fill(2,65040,65050),On.fill(2,65072,65136),On.fill(2,65280,65377),On.fill(2,65504,65511);for(let e=0;e<i_.length;++e)On.fill(0,i_[e][0],i_[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?On[e]:TPe(e,EPe)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let s=this.wcwidth(e),r=s===0&&t!==0;if(r){let i=Qc.extractWidth(t);i===0?r=!1:i>s&&(s=i)}return Qc.createPropertyValue(0,s,r)}},Qc=class Ev{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new Ue,this.onChange=this._onChange.event;let t=new PPe;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,s,r=!1){return(t&16777215)<<3|(s&3)<<1|(r?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let s=0,r=0,i=t.length;for(let a=0;a<i;++a){let o=t.charCodeAt(a);if(55296<=o&&o<=56319){if(++a>=i)return s+this.wcwidth(o);let d=t.charCodeAt(a);56320<=d&&d<=57343?o=(o-55296)*1024+d-56320+65536:s+=this.wcwidth(d)}let l=this.charProperties(o,r),u=Ev.extractWidth(l);Ev.extractShouldJoin(l)&&(u-=Ev.extractWidth(r)),s+=u,r=l}return s}charProperties(t,s){return this._activeProvider.charProperties(t,s)}},RPe=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function AL(e){let t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1)?.get(e.cols-1),s=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);s&&t&&(s.isWrapped=t[3]!==0&&t[3]!==32)}var tf=2147483647,DPe=256,JG=class SC{constructor(t=32,s=32){if(this.maxLength=t,this.maxSubParamsLength=s,s>DPe)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let s=new SC;if(!t.length)return s;for(let r=Array.isArray(t[0])?1:0;r<t.length;++r){let i=t[r];if(Array.isArray(i))for(let a=0;a<i.length;++a)s.addSubParam(i[a]);else s.addParam(i)}return s}clone(){let t=new SC(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let s=0;s<this.length;++s){t.push(this.params[s]);let r=this._subParamsIdx[s]>>8,i=this._subParamsIdx[s]&255;i-r>0&&t.push(Array.prototype.slice.call(this._subParams,r,i))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>tf?tf:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>tf?tf:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let s=this._subParamsIdx[t]>>8,r=this._subParamsIdx[t]&255;return r-s>0?this._subParams.subarray(s,r):null}getSubParamsAll(){let t={};for(let s=0;s<this.length;++s){let r=this._subParamsIdx[s]>>8,i=this._subParamsIdx[s]&255;i-r>0&&(t[s]=this._subParams.slice(r,i))}return t}addDigit(t){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let r=this._digitIsSub?this._subParams:this.params,i=r[s-1];r[s-1]=~i?Math.min(i*10+t,tf):t}},sf=[],IPe=class{constructor(){this._state=0,this._active=sf,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let s=this._handlers[e];return s.push(t),{dispose:()=>{let r=s.indexOf(t);r!==-1&&s.splice(r,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=sf}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=sf,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||sf,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,s){if(!this._active.length)this._handlerFb(this._id,"PUT",rw(e,t,s));else for(let r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,s)}start(){this.reset(),this._state=1}put(e,t,s){if(this._state!==3){if(this._state===1)for(;t<s;){let r=e[t++];if(r===59){this._state=2,this._start();break}if(r<48||57<r){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+r-48}this._state===2&&s-t>0&&this._put(e,t,s)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let s=!1,r=this._active.length-1,i=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,s=t,i=this._stack.fallThrough,this._stack.paused=!1),!i&&s===!1){for(;r>=0&&(s=this._active[r].end(e),s!==!0);r--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,s;r--}for(;r>=0;r--)if(s=this._active[r].end(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,s}this._active=sf,this._id=-1,this._state=0}}},Ai=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,s){this._hitLimit||(this._data+=rw(e,t,s),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(s=>(this._data="",this._hitLimit=!1,s));return this._data="",this._hitLimit=!1,t}},nf=[],MPe=class{constructor(){this._handlers=Object.create(null),this._active=nf,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=nf}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let s=this._handlers[e];return s.push(t),{dispose:()=>{let r=s.indexOf(t);r!==-1&&s.splice(r,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=nf,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||nf,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(t)}put(e,t,s){if(!this._active.length)this._handlerFb(this._ident,"PUT",rw(e,t,s));else for(let r=this._active.length-1;r>=0;r--)this._active[r].put(e,t,s)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let s=!1,r=this._active.length-1,i=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,s=t,i=this._stack.fallThrough,this._stack.paused=!1),!i&&s===!1){for(;r>=0&&(s=this._active[r].unhook(e),s!==!0);r--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,s;r--}for(;r>=0;r--)if(s=this._active[r].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,s}this._active=nf,this._ident=0}},yf=new JG;yf.addParam(0);var EL=class{constructor(e){this._handler=e,this._data="",this._params=yf,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():yf,this._data="",this._hitLimit=!1}put(e,t,s){this._hitLimit||(this._data+=rw(e,t,s),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(s=>(this._params=yf,this._data="",this._hitLimit=!1,s));return this._params=yf,this._data="",this._hitLimit=!1,t}},LPe=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,s,r){this.table[t<<8|e]=s<<4|r}addMany(e,t,s,r){for(let i=0;i<e.length;i++)this.table[t<<8|e[i]]=s<<4|r}},ia=160,OPe=(function(){let e=new LPe(4095),t=Array.apply(null,Array(256)).map((l,u)=>u),s=(l,u)=>t.slice(l,u),r=s(32,127),i=s(0,24);i.push(25),i.push.apply(i,s(28,32));let a=s(0,14),o;e.setDefault(1,0),e.addMany(r,0,2,0);for(o in a)e.addMany([24,26,153,154],o,3,0),e.addMany(s(128,144),o,3,0),e.addMany(s(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(i,0,3,0),e.addMany(i,1,3,1),e.add(127,1,0,1),e.addMany(i,8,0,8),e.addMany(i,3,3,3),e.add(127,3,0,3),e.addMany(i,4,3,4),e.add(127,4,0,4),e.addMany(i,6,3,6),e.addMany(i,5,3,5),e.add(127,5,0,5),e.addMany(i,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(r,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(s(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(r,7,0,7),e.addMany(i,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(s(64,127),3,7,0),e.addMany(s(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(s(48,60),4,8,4),e.addMany(s(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(s(32,64),6,0,6),e.add(127,6,0,6),e.addMany(s(64,127),6,0,0),e.addMany(s(32,48),3,9,5),e.addMany(s(32,48),5,9,5),e.addMany(s(48,64),5,0,6),e.addMany(s(64,127),5,7,0),e.addMany(s(32,48),4,9,5),e.addMany(s(32,48),1,9,2),e.addMany(s(32,48),2,9,2),e.addMany(s(48,127),2,10,0),e.addMany(s(48,80),1,10,0),e.addMany(s(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(s(96,127),1,10,0),e.add(80,1,11,9),e.addMany(i,9,0,9),e.add(127,9,0,9),e.addMany(s(28,32),9,0,9),e.addMany(s(32,48),9,9,12),e.addMany(s(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(i,11,0,11),e.addMany(s(32,128),11,0,11),e.addMany(s(28,32),11,0,11),e.addMany(i,10,0,10),e.add(127,10,0,10),e.addMany(s(28,32),10,0,10),e.addMany(s(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(s(32,48),10,9,12),e.addMany(i,12,0,12),e.add(127,12,0,12),e.addMany(s(28,32),12,0,12),e.addMany(s(32,48),12,9,12),e.addMany(s(48,64),12,0,11),e.addMany(s(64,127),12,12,13),e.addMany(s(64,127),10,12,13),e.addMany(s(64,127),9,12,13),e.addMany(i,13,13,13),e.addMany(r,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(ia,0,2,0),e.add(ia,8,5,8),e.add(ia,6,0,6),e.add(ia,11,0,11),e.add(ia,13,13,13),e})(),FPe=class extends Yt{constructor(e=OPe){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new JG,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,s,r)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,s)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(en(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new IPe),this._dcsParser=this._register(new MPe),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let s=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(s=e.prefix.charCodeAt(0),s&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let i=0;i<e.intermediates.length;++i){let a=e.intermediates.charCodeAt(i);if(32>a||a>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=a}}if(e.final.length!==1)throw new Error("final must be a single byte");let r=e.final.charCodeAt(0);if(t[0]>r||r>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return s<<=8,s|=r,s}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let s=this._identifier(e,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);let r=this._escHandlers[s];return r.push(t),{dispose:()=>{let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let s=this._identifier(e);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);let r=this._csiHandlers[s];return r.push(t),{dispose:()=>{let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,s,r,i){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=s,this._parseStack.transition=r,this._parseStack.chunkPos=i}parse(e,t,s){let r=0,i=0,a=0,o;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,a=this._parseStack.chunkPos+1;else{if(s===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let l=this._parseStack.handlers,u=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(s===!1&&u>-1){for(;u>=0&&(o=l[u](this._params),o!==!0);u--)if(o instanceof Promise)return this._parseStack.handlerPos=u,o}this._parseStack.handlers=[];break;case 4:if(s===!1&&u>-1){for(;u>=0&&(o=l[u](),o!==!0);u--)if(o instanceof Promise)return this._parseStack.handlerPos=u,o}this._parseStack.handlers=[];break;case 6:if(r=e[this._parseStack.chunkPos],o=this._dcsParser.unhook(r!==24&&r!==26,s),o)return o;r===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(r=e[this._parseStack.chunkPos],o=this._oscParser.end(r!==24&&r!==26,s),o)return o;r===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,a=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let l=a;l<t;++l){switch(r=e[l],i=this._transitions.table[this.currentState<<8|(r<160?r:ia)],i>>4){case 2:for(let x=l+1;;++x){if(x>=t||(r=e[x])<32||r>126&&r<ia){this._printHandler(e,l,x),l=x-1;break}if(++x>=t||(r=e[x])<32||r>126&&r<ia){this._printHandler(e,l,x),l=x-1;break}if(++x>=t||(r=e[x])<32||r>126&&r<ia){this._printHandler(e,l,x),l=x-1;break}if(++x>=t||(r=e[x])<32||r>126&&r<ia){this._printHandler(e,l,x),l=x-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:l,code:r,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let u=this._csiHandlers[this._collect<<8|r],d=u?u.length-1:-1;for(;d>=0&&(o=u[d](this._params),o!==!0);d--)if(o instanceof Promise)return this._preserveStack(3,u,d,i,l),o;d<0&&this._csiHandlerFb(this._collect<<8|r,this._params),this.precedingJoinState=0;break;case 8:do switch(r){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(r-48)}while(++l<t&&(r=e[l])>47&&r<60);l--;break;case 9:this._collect<<=8,this._collect|=r;break;case 10:let m=this._escHandlers[this._collect<<8|r],f=m?m.length-1:-1;for(;f>=0&&(o=m[f](),o!==!0);f--)if(o instanceof Promise)return this._preserveStack(4,m,f,i,l),o;f<0&&this._escHandlerFb(this._collect<<8|r),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|r,this._params);break;case 13:for(let x=l+1;;++x)if(x>=t||(r=e[x])===24||r===26||r===27||r>127&&r<ia){this._dcsParser.put(e,l,x),l=x-1;break}break;case 14:if(o=this._dcsParser.unhook(r!==24&&r!==26),o)return this._preserveStack(6,[],0,i,l),o;r===27&&(i|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let x=l+1;;x++)if(x>=t||(r=e[x])<32||r>127&&r<ia){this._oscParser.put(e,l,x),l=x-1;break}break;case 6:if(o=this._oscParser.end(r!==24&&r!==26),o)return this._preserveStack(5,[],0,i,l),o;r===27&&(i|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=i&15}}},BPe=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,zPe=/^[\da-f]+$/;function TL(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let s=BPe.exec(t);if(s){let r=s[1]?15:s[4]?255:s[7]?4095:65535;return[Math.round(parseInt(s[1]||s[4]||s[7]||s[10],16)/r*255),Math.round(parseInt(s[2]||s[5]||s[8]||s[11],16)/r*255),Math.round(parseInt(s[3]||s[6]||s[9]||s[12],16)/r*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),zPe.exec(t)&&[3,6,9,12].includes(t.length))){let s=t.length/3,r=[0,0,0];for(let i=0;i<3;++i){let a=parseInt(t.slice(s*i,s*i+s),16);r[i]=s===1?a<<4:s===2?a:s===3?a>>4:a>>8}return r}}function a_(e,t){let s=e.toString(16),r=s.length<2?"0"+s:s;switch(t){case 4:return s[0];case 8:return r;case 12:return(r+r).slice(0,3);default:return r+r}}function $Pe(e,t=16){let[s,r,i]=e;return`rgb:${a_(s,t)}/${a_(r,t)}/${a_(i,t)}`}var HPe={"(":0,")":1,"*":2,"+":3,"-":1,".":2},Wl=131072,PL=10;function RL(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var DL=5e3,IL=0,UPe=class extends Yt{constructor(e,t,s,r,i,a,o,l,u=new FPe){super(),this._bufferService=e,this._charsetService=t,this._coreService=s,this._logService=r,this._optionsService=i,this._oscLinkService=a,this._coreMouseService=o,this._unicodeService=l,this._parser=u,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new lEe,this._utf8Decoder=new cEe,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=An.clone(),this._eraseAttrDataInternal=An.clone(),this._onRequestBell=this._register(new Ue),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new Ue),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new Ue),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new Ue),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new Ue),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new Ue),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new Ue),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new Ue),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new Ue),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new Ue),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new Ue),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new Ue),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new Ue),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new _C(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(d=>this._activeBuffer=d.activeBuffer)),this._parser.setCsiHandlerFallback((d,m)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(d),params:m.toArray()})}),this._parser.setEscHandlerFallback(d=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(d)})}),this._parser.setExecuteHandlerFallback(d=>{this._logService.debug("Unknown EXECUTE code: ",{code:d})}),this._parser.setOscHandlerFallback((d,m,f)=>{this._logService.debug("Unknown OSC code: ",{identifier:d,action:m,data:f})}),this._parser.setDcsHandlerFallback((d,m,f)=>{m==="HOOK"&&(f=f.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(d),action:m,payload:f})}),this._parser.setPrintHandler((d,m,f)=>this.print(d,m,f)),this._parser.registerCsiHandler({final:"@"},d=>this.insertChars(d)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},d=>this.scrollLeft(d)),this._parser.registerCsiHandler({final:"A"},d=>this.cursorUp(d)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},d=>this.scrollRight(d)),this._parser.registerCsiHandler({final:"B"},d=>this.cursorDown(d)),this._parser.registerCsiHandler({final:"C"},d=>this.cursorForward(d)),this._parser.registerCsiHandler({final:"D"},d=>this.cursorBackward(d)),this._parser.registerCsiHandler({final:"E"},d=>this.cursorNextLine(d)),this._parser.registerCsiHandler({final:"F"},d=>this.cursorPrecedingLine(d)),this._parser.registerCsiHandler({final:"G"},d=>this.cursorCharAbsolute(d)),this._parser.registerCsiHandler({final:"H"},d=>this.cursorPosition(d)),this._parser.registerCsiHandler({final:"I"},d=>this.cursorForwardTab(d)),this._parser.registerCsiHandler({final:"J"},d=>this.eraseInDisplay(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},d=>this.eraseInDisplay(d,!0)),this._parser.registerCsiHandler({final:"K"},d=>this.eraseInLine(d,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},d=>this.eraseInLine(d,!0)),this._parser.registerCsiHandler({final:"L"},d=>this.insertLines(d)),this._parser.registerCsiHandler({final:"M"},d=>this.deleteLines(d)),this._parser.registerCsiHandler({final:"P"},d=>this.deleteChars(d)),this._parser.registerCsiHandler({final:"S"},d=>this.scrollUp(d)),this._parser.registerCsiHandler({final:"T"},d=>this.scrollDown(d)),this._parser.registerCsiHandler({final:"X"},d=>this.eraseChars(d)),this._parser.registerCsiHandler({final:"Z"},d=>this.cursorBackwardTab(d)),this._parser.registerCsiHandler({final:"`"},d=>this.charPosAbsolute(d)),this._parser.registerCsiHandler({final:"a"},d=>this.hPositionRelative(d)),this._parser.registerCsiHandler({final:"b"},d=>this.repeatPrecedingCharacter(d)),this._parser.registerCsiHandler({final:"c"},d=>this.sendDeviceAttributesPrimary(d)),this._parser.registerCsiHandler({prefix:">",final:"c"},d=>this.sendDeviceAttributesSecondary(d)),this._parser.registerCsiHandler({final:"d"},d=>this.linePosAbsolute(d)),this._parser.registerCsiHandler({final:"e"},d=>this.vPositionRelative(d)),this._parser.registerCsiHandler({final:"f"},d=>this.hVPosition(d)),this._parser.registerCsiHandler({final:"g"},d=>this.tabClear(d)),this._parser.registerCsiHandler({final:"h"},d=>this.setMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"h"},d=>this.setModePrivate(d)),this._parser.registerCsiHandler({final:"l"},d=>this.resetMode(d)),this._parser.registerCsiHandler({prefix:"?",final:"l"},d=>this.resetModePrivate(d)),this._parser.registerCsiHandler({final:"m"},d=>this.charAttributes(d)),this._parser.registerCsiHandler({final:"n"},d=>this.deviceStatus(d)),this._parser.registerCsiHandler({prefix:"?",final:"n"},d=>this.deviceStatusPrivate(d)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},d=>this.softReset(d)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},d=>this.setCursorStyle(d)),this._parser.registerCsiHandler({final:"r"},d=>this.setScrollRegion(d)),this._parser.registerCsiHandler({final:"s"},d=>this.saveCursor(d)),this._parser.registerCsiHandler({final:"t"},d=>this.windowOptions(d)),this._parser.registerCsiHandler({final:"u"},d=>this.restoreCursor(d)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},d=>this.insertColumns(d)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},d=>this.deleteColumns(d)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},d=>this.selectProtected(d)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},d=>this.requestMode(d,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},d=>this.requestMode(d,!1)),this._parser.setExecuteHandler(Pe.BEL,()=>this.bell()),this._parser.setExecuteHandler(Pe.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(Pe.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(Pe.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(Pe.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(Pe.BS,()=>this.backspace()),this._parser.setExecuteHandler(Pe.HT,()=>this.tab()),this._parser.setExecuteHandler(Pe.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(Pe.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(kv.IND,()=>this.index()),this._parser.setExecuteHandler(kv.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(kv.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Ai(d=>(this.setTitle(d),this.setIconName(d),!0))),this._parser.registerOscHandler(1,new Ai(d=>this.setIconName(d))),this._parser.registerOscHandler(2,new Ai(d=>this.setTitle(d))),this._parser.registerOscHandler(4,new Ai(d=>this.setOrReportIndexedColor(d))),this._parser.registerOscHandler(8,new Ai(d=>this.setHyperlink(d))),this._parser.registerOscHandler(10,new Ai(d=>this.setOrReportFgColor(d))),this._parser.registerOscHandler(11,new Ai(d=>this.setOrReportBgColor(d))),this._parser.registerOscHandler(12,new Ai(d=>this.setOrReportCursorColor(d))),this._parser.registerOscHandler(104,new Ai(d=>this.restoreIndexedColor(d))),this._parser.registerOscHandler(110,new Ai(d=>this.restoreFgColor(d))),this._parser.registerOscHandler(111,new Ai(d=>this.restoreBgColor(d))),this._parser.registerOscHandler(112,new Ai(d=>this.restoreCursorColor(d))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let d in Un)this._parser.registerEscHandler({intermediates:"(",final:d},()=>this.selectCharset("("+d)),this._parser.registerEscHandler({intermediates:")",final:d},()=>this.selectCharset(")"+d)),this._parser.registerEscHandler({intermediates:"*",final:d},()=>this.selectCharset("*"+d)),this._parser.registerEscHandler({intermediates:"+",final:d},()=>this.selectCharset("+"+d)),this._parser.registerEscHandler({intermediates:"-",final:d},()=>this.selectCharset("-"+d)),this._parser.registerEscHandler({intermediates:".",final:d},()=>this.selectCharset("."+d)),this._parser.registerEscHandler({intermediates:"/",final:d},()=>this.selectCharset("/"+d));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(d=>(this._logService.error("Parsing error: ",d),d)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new EL((d,m)=>this.requestStatusString(d,m)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,s,r){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=s,this._parseStack.position=r}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,s)=>setTimeout(()=>s("#SLOW_TIMEOUT"),DL))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${DL} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let s,r=this._activeBuffer.x,i=this._activeBuffer.y,a=0,o=this._parseStack.paused;if(o){if(s=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(s),s;r=this._parseStack.cursorStartX,i=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>Wl&&(a=this._parseStack.position+Wl)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data ${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,d=>String.fromCharCode(d)).join("")}"`}`),this._logService.logLevel===0&&this._logService.trace("parsing data (codes)",typeof e=="string"?e.split("").map(d=>d.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<Wl&&(this._parseBuffer=new Uint32Array(Math.min(e.length,Wl))),o||this._dirtyRowTracker.clearRange(),e.length>Wl)for(let d=a;d<e.length;d+=Wl){let m=d+Wl<e.length?d+Wl:e.length,f=typeof e=="string"?this._stringDecoder.decode(e.substring(d,m),this._parseBuffer):this._utf8Decoder.decode(e.subarray(d,m),this._parseBuffer);if(s=this._parser.parse(this._parseBuffer,f))return this._preserveStack(r,i,f,d),this._logSlowResolvingAsync(s),s}else if(!o){let d=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(s=this._parser.parse(this._parseBuffer,d))return this._preserveStack(r,i,d,0),this._logSlowResolvingAsync(s),s}(this._activeBuffer.x!==r||this._activeBuffer.y!==i)&&this._onCursorMove.fire();let l=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),u=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);u<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(u,this._bufferService.rows-1),end:Math.min(l,this._bufferService.rows-1)})}print(e,t,s){let r,i,a=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,l=this._bufferService.cols,u=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,m=this._curAttrData,f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&s-t>0&&f.getWidth(this._activeBuffer.x-1)===2&&f.setCellFromCodepoint(this._activeBuffer.x-1,0,1,m);let x=this._parser.precedingJoinState;for(let v=t;v<s;++v){if(r=e[v],r<127&&a){let C=a[String.fromCharCode(r)];C&&(r=C.charCodeAt(0))}let y=this._unicodeService.charProperties(r,x);i=Qc.extractWidth(y);let w=Qc.extractShouldJoin(y),S=w?Qc.extractWidth(x):0;if(x=y,o&&this._onA11yChar.fire(Zl(r)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+i-S>l){if(u){let C=f,_=this._activeBuffer.x-S;for(this._activeBuffer.x=S,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),S>0&&f instanceof vf&&f.copyCellsFrom(C,_,0,S,!1);_<l;)C.setCellFromCodepoint(_++,0,1,m)}else if(this._activeBuffer.x=l-1,i===2)continue}if(w&&this._activeBuffer.x){let C=f.getWidth(this._activeBuffer.x-1)?1:2;f.addCodepointToCell(this._activeBuffer.x-C,r,i);for(let _=i-S;--_>=0;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,m);continue}if(d&&(f.insertCells(this._activeBuffer.x,i-S,this._activeBuffer.getNullCell(m)),f.getWidth(l-1)===2&&f.setCellFromCodepoint(l-1,0,1,m)),f.setCellFromCodepoint(this._activeBuffer.x++,r,i,m),i>0)for(;--i;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,m)}this._parser.precedingJoinState=x,this._activeBuffer.x<l&&s-t>0&&f.getWidth(this._activeBuffer.x)===0&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodepoint(this._activeBuffer.x,0,1,m),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,s=>RL(s.params[0],this._optionsService.rawOptions.windowOptions)?t(s):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new EL(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new Ai(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,s,r=!1,i=!1){let a=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);a.replaceCells(t,s,this._activeBuffer.getNullCell(this._eraseAttrData()),i),r&&(a.isWrapped=!1)}_resetBufferLine(e,t=!1){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);s&&(s.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),s.isWrapped=!1)}eraseInDisplay(e,t=!1){this._restrictCursor(this._bufferService.cols);let s;switch(e.params[0]){case 0:for(s=this._activeBuffer.y,this._dirtyRowTracker.markDirty(s),this._eraseInBufferLine(s++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);s<this._bufferService.rows;s++)this._resetBufferLine(s,t);this._dirtyRowTracker.markDirty(s);break;case 1:for(s=this._activeBuffer.y,this._dirtyRowTracker.markDirty(s),this._eraseInBufferLine(s,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(s+1).isWrapped=!1);s--;)this._resetBufferLine(s,t);this._dirtyRowTracker.markDirty(0);break;case 2:if(this._optionsService.rawOptions.scrollOnEraseInDisplay){for(s=this._bufferService.rows,this._dirtyRowTracker.markRangeDirty(0,s-1);s--&&!this._activeBuffer.lines.get(this._activeBuffer.ybase+s)?.getTrimmedLength(););for(;s>=0;s--)this._bufferService.scroll(this._eraseAttrData())}else{for(s=this._bufferService.rows,this._dirtyRowTracker.markDirty(s-1);s--;)this._resetBufferLine(s,t);this._dirtyRowTracker.markDirty(0)}break;case 3:let r=this._activeBuffer.lines.length-this._bufferService.rows;r>0&&(this._activeBuffer.lines.trimStart(r),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-r,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-r,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=this._activeBuffer.ybase+this._activeBuffer.y,r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,i=this._bufferService.rows-1+this._activeBuffer.ybase-r+1;for(;t--;)this._activeBuffer.lines.splice(i-1,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=this._activeBuffer.ybase+this._activeBuffer.y,r;for(r=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-r;t--;)this._activeBuffer.lines.splice(s,1),this._activeBuffer.lines.splice(r,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(An));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);r.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),r.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);r.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),r.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);r.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),r.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let r=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);r.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),r.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let s=e.params[0]||1,r=Qc.extractWidth(t),i=this._activeBuffer.x-r,a=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(i),o=new Uint32Array(a.length*s),l=0;for(let d=0;d<a.length;){let m=a.codePointAt(d)||0;o[l++]=m,d+=m>65535?2:1}let u=l;for(let d=1;d<s;++d)o.copyWithin(u,0,l),u+=l;return this.print(o,0,u),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(Pe.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(Pe.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(Pe.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(Pe.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(Pe.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,qc),this._charsetService.setgCharset(1,qc),this._charsetService.setgCharset(2,qc),this._charsetService.setgCharset(3,qc);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break;case 2026:this._coreService.decPrivateModes.synchronizedOutput=!1,this._onRequestRefreshRows.fire(void 0);break}return!0}requestMode(e,t){let s;(w=>(w[w.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",w[w.SET=1]="SET",w[w.RESET=2]="RESET",w[w.PERMANENTLY_SET=3]="PERMANENTLY_SET",w[w.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(s||={});let r=this._coreService.decPrivateModes,{activeProtocol:i,activeEncoding:a}=this._coreMouseService,o=this._coreService,{buffers:l,cols:u}=this._bufferService,{active:d,alt:m}=l,f=this._optionsService.rawOptions,x=(w,S)=>(o.triggerDataEvent(`${Pe.ESC}[${t?"":"?"}${w};${S}$y`),!0),v=w=>w?1:2,y=e.params[0];return t?y===2?x(y,4):y===4?x(y,v(o.modes.insertMode)):y===12?x(y,3):y===20?x(y,v(f.convertEol)):x(y,0):y===1?x(y,v(r.applicationCursorKeys)):y===3?x(y,f.windowOptions.setWinLines?u===80?2:u===132?1:0:0):y===6?x(y,v(r.origin)):y===7?x(y,v(r.wraparound)):y===8?x(y,3):y===9?x(y,v(i==="X10")):y===12?x(y,v(f.cursorBlink)):y===25?x(y,v(!o.isCursorHidden)):y===45?x(y,v(r.reverseWraparound)):y===66?x(y,v(r.applicationKeypad)):y===67?x(y,4):y===1e3?x(y,v(i==="VT200")):y===1002?x(y,v(i==="DRAG")):y===1003?x(y,v(i==="ANY")):y===1004?x(y,v(r.sendFocus)):y===1005?x(y,4):y===1006?x(y,v(a==="SGR")):y===1015?x(y,4):y===1016?x(y,v(a==="SGR_PIXELS")):y===1048?x(y,1):y===47||y===1047||y===1049?x(y,v(d===m)):y===2004?x(y,v(r.bracketedPasteMode)):y===2026?x(y,v(r.synchronizedOutput)):x(y,0)}_updateAttrColor(e,t,s,r,i){return t===2?(e|=50331648,e&=-16777216,e|=Zp.fromColorRGB([s,r,i])):t===5&&(e&=-50331904,e|=33554432|s&255),e}_extractColor(e,t,s){let r=[0,0,-1,0,0,0],i=0,a=0;do{if(r[a+i]=e.params[t+a],e.hasSubParams(t+a)){let o=e.getSubParams(t+a),l=0;do r[1]===5&&(i=1),r[a+l+1+i]=o[l];while(++l<o.length&&l+a+1+i<r.length);break}if(r[1]===5&&a+i>=2||r[1]===2&&a+i>=5)break;r[1]&&(i=1)}while(++a+t<e.length&&a+i<r.length);for(let o=2;o<r.length;++o)r[o]===-1&&(r[o]=0);switch(r[0]){case 38:s.fg=this._updateAttrColor(s.fg,r[1],r[3],r[4],r[5]);break;case 48:s.bg=this._updateAttrColor(s.bg,r[1],r[3],r[4],r[5]);break;case 58:s.extended=s.extended.clone(),s.extended.underlineColor=this._updateAttrColor(s.extended.underlineColor,r[1],r[3],r[4],r[5])}return a}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=An.fg,e.bg=An.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,s,r=this._curAttrData;for(let i=0;i<t;i++)s=e.params[i],s>=30&&s<=37?(r.fg&=-50331904,r.fg|=16777216|s-30):s>=40&&s<=47?(r.bg&=-50331904,r.bg|=16777216|s-40):s>=90&&s<=97?(r.fg&=-50331904,r.fg|=16777216|s-90|8):s>=100&&s<=107?(r.bg&=-50331904,r.bg|=16777216|s-100|8):s===0?this._processSGR0(r):s===1?r.fg|=134217728:s===3?r.bg|=67108864:s===4?(r.fg|=268435456,this._processUnderline(e.hasSubParams(i)?e.getSubParams(i)[0]:1,r)):s===5?r.fg|=536870912:s===7?r.fg|=67108864:s===8?r.fg|=1073741824:s===9?r.fg|=2147483648:s===2?r.bg|=134217728:s===21?this._processUnderline(2,r):s===22?(r.fg&=-134217729,r.bg&=-134217729):s===23?r.bg&=-67108865:s===24?(r.fg&=-268435457,this._processUnderline(0,r)):s===25?r.fg&=-536870913:s===27?r.fg&=-67108865:s===28?r.fg&=-1073741825:s===29?r.fg&=2147483647:s===39?(r.fg&=-67108864,r.fg|=An.fg&16777215):s===49?(r.bg&=-67108864,r.bg|=An.bg&16777215):s===38||s===48||s===58?i+=this._extractColor(e,i,r):s===53?r.bg|=1073741824:s===55?r.bg&=-1073741825:s===59?(r.extended=r.extended.clone(),r.extended.underlineColor=-1,r.updateExtended()):s===100?(r.fg&=-67108864,r.fg|=An.fg&16777215,r.bg&=-67108864,r.bg|=An.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",s);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${Pe.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,s=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${Pe.ESC}[${t};${s}R`);break}return!0}deviceStatusPrivate(e){if(e.params[0]===6){let t=this._activeBuffer.y+1,s=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${Pe.ESC}[?${t};${s}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=An.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let s=t%2===1;this._coreService.decPrivateModes.cursorBlink=s}return!0}setScrollRegion(e){let t=e.params[0]||1,s;return(e.length<2||(s=e.params[1])>this._bufferService.rows||s===0)&&(s=this._bufferService.rows),s>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=s-1,this._setCursor(0,0)),!0}windowOptions(e){if(!RL(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${Pe.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>PL&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>PL&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],s=e.split(";");for(;s.length>1;){let r=s.shift(),i=s.shift();if(/^\d+$/.exec(r)){let a=parseInt(r);if(ML(a))if(i==="?")t.push({type:0,index:a});else{let o=TL(i);o&&t.push({type:1,index:a,color:o})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let s=e.slice(0,t).trim(),r=e.slice(t+1);return r?this._createHyperlink(s,r):s.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let s=e.split(":"),r,i=s.findIndex(a=>a.startsWith("id="));return i!==-1&&(r=s[i].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:r,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let s=e.split(";");for(let r=0;r<s.length&&!(t>=this._specialColors.length);++r,++t)if(s[r]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let i=TL(s[r]);i&&this._onColor.fire([{type:1,index:this._specialColors[t],color:i}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],s=e.split(";");for(let r=0;r<s.length;++r)if(/^\d+$/.exec(s[r])){let i=parseInt(s[r]);ML(i)&&t.push({type:2,index:i})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,qc),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(HPe[e[0]],Un[e[1]]||qc),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=An.clone(),this._eraseAttrDataInternal=An.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new ga;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let s=this._activeBuffer.ybase+this._activeBuffer.y+t,r=this._activeBuffer.lines.get(s);r&&(r.fill(e),r.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let s=o=>(this._coreService.triggerDataEvent(`${Pe.ESC}${o}${Pe.ESC}\\`),!0),r=this._bufferService.buffer,i=this._optionsService.rawOptions;return s(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${r.scrollTop+1};${r.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[i.cursorStyle]-(i.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},_C=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(IL=e,e=t,t=IL),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};_C=fn([Qe(0,si)],_C);function ML(e){return 0<=e&&e<256}var GPe=5e7,LL=12,VPe=50,qPe=class extends Yt{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new Ue),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let s;for(;s=this._writeBuffer.shift();){this._action(s);let r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>GPe)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let s=e||performance.now();for(;this._writeBuffer.length>this._bufferOffset;){let r=this._writeBuffer[this._bufferOffset],i=this._action(r,t);if(i){let o=l=>performance.now()-s>=LL?setTimeout(()=>this._innerWrite(0,l)):this._innerWrite(s,l);i.catch(l=>(queueMicrotask(()=>{throw l}),Promise.resolve(!1))).then(o);return}let a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=r.length,performance.now()-s>=LL)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>VPe&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},NC=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let l=t.addMarker(t.ybase+t.y),u={data:e,id:this._nextId++,lines:[l]};return l.onDispose(()=>this._removeMarkerFromLink(u,l)),this._dataByLinkId.set(u.id,u),u.id}let s=e,r=this._getEntryIdKey(s),i=this._entriesWithId.get(r);if(i)return this.addLineToLink(i.id,t.ybase+t.y),i.id;let a=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(s),data:s,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(o,a)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){let s=this._dataByLinkId.get(e);if(s&&s.lines.every(r=>r.line!==t)){let r=this._bufferService.buffer.addMarker(t);s.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(s,r))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let s=e.lines.indexOf(t);s!==-1&&(e.lines.splice(s,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};NC=fn([Qe(0,si)],NC);var OL=!1,WPe=class extends Yt{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new ph),this._onBinary=this._register(new Ue),this.onBinary=this._onBinary.event,this._onData=this._register(new Ue),this.onData=this._onData.event,this._onLineFeed=this._register(new Ue),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new Ue),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new Ue),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new Ue),this._instantiationService=new xPe,this.optionsService=this._register(new kPe(e)),this._instantiationService.setService(ni,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(yC)),this._instantiationService.setService(si,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(bC)),this._instantiationService.setService(vG,this._logService),this.coreService=this._register(this._instantiationService.createInstance(wC)),this._instantiationService.setService(Td,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(jC)),this._instantiationService.setService(xG,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Qc)),this._instantiationService.setService(mEe,this.unicodeService),this._charsetService=this._instantiationService.createInstance(RPe),this._instantiationService.setService(hEe,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(NC),this._instantiationService.setService(bG,this._oscLinkService),this._inputHandler=this._register(new UPe(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(Sr.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(Sr.forward(this._bufferService.onResize,this._onResize)),this._register(Sr.forward(this.coreService.onData,this._onData)),this._register(Sr.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new qPe((t,s)=>this._inputHandler.parse(t,s))),this._register(Sr.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new Ue),this._onScroll.event(e=>{this._onScrollApi?.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!OL&&(this._logService.warn("writeSync is unreliable and will be removed soon."),OL=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,ZG),t=Math.max(t,QG),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(AL.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(AL(this._bufferService),!1))),this._windowsWrappingHeuristics.value=en(()=>{for(let t of e)t.dispose()})}}},KPe={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function YPe(e,t,s,r){let i={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?i.key=Pe.ESC+"OA":i.key=Pe.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?i.key=Pe.ESC+"OD":i.key=Pe.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?i.key=Pe.ESC+"OC":i.key=Pe.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?i.key=Pe.ESC+"OB":i.key=Pe.ESC+"[B");break;case 8:i.key=e.ctrlKey?"\b":Pe.DEL,e.altKey&&(i.key=Pe.ESC+i.key);break;case 9:if(e.shiftKey){i.key=Pe.ESC+"[Z";break}i.key=Pe.HT,i.cancel=!0;break;case 13:i.key=e.altKey?Pe.ESC+Pe.CR:Pe.CR,i.cancel=!0;break;case 27:i.key=Pe.ESC,e.altKey&&(i.key=Pe.ESC+Pe.ESC),i.cancel=!0;break;case 37:if(e.metaKey)break;a?i.key=Pe.ESC+"[1;"+(a+1)+"D":t?i.key=Pe.ESC+"OD":i.key=Pe.ESC+"[D";break;case 39:if(e.metaKey)break;a?i.key=Pe.ESC+"[1;"+(a+1)+"C":t?i.key=Pe.ESC+"OC":i.key=Pe.ESC+"[C";break;case 38:if(e.metaKey)break;a?i.key=Pe.ESC+"[1;"+(a+1)+"A":t?i.key=Pe.ESC+"OA":i.key=Pe.ESC+"[A";break;case 40:if(e.metaKey)break;a?i.key=Pe.ESC+"[1;"+(a+1)+"B":t?i.key=Pe.ESC+"OB":i.key=Pe.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(i.key=Pe.ESC+"[2~");break;case 46:a?i.key=Pe.ESC+"[3;"+(a+1)+"~":i.key=Pe.ESC+"[3~";break;case 36:a?i.key=Pe.ESC+"[1;"+(a+1)+"H":t?i.key=Pe.ESC+"OH":i.key=Pe.ESC+"[H";break;case 35:a?i.key=Pe.ESC+"[1;"+(a+1)+"F":t?i.key=Pe.ESC+"OF":i.key=Pe.ESC+"[F";break;case 33:e.shiftKey?i.type=2:e.ctrlKey?i.key=Pe.ESC+"[5;"+(a+1)+"~":i.key=Pe.ESC+"[5~";break;case 34:e.shiftKey?i.type=3:e.ctrlKey?i.key=Pe.ESC+"[6;"+(a+1)+"~":i.key=Pe.ESC+"[6~";break;case 112:a?i.key=Pe.ESC+"[1;"+(a+1)+"P":i.key=Pe.ESC+"OP";break;case 113:a?i.key=Pe.ESC+"[1;"+(a+1)+"Q":i.key=Pe.ESC+"OQ";break;case 114:a?i.key=Pe.ESC+"[1;"+(a+1)+"R":i.key=Pe.ESC+"OR";break;case 115:a?i.key=Pe.ESC+"[1;"+(a+1)+"S":i.key=Pe.ESC+"OS";break;case 116:a?i.key=Pe.ESC+"[15;"+(a+1)+"~":i.key=Pe.ESC+"[15~";break;case 117:a?i.key=Pe.ESC+"[17;"+(a+1)+"~":i.key=Pe.ESC+"[17~";break;case 118:a?i.key=Pe.ESC+"[18;"+(a+1)+"~":i.key=Pe.ESC+"[18~";break;case 119:a?i.key=Pe.ESC+"[19;"+(a+1)+"~":i.key=Pe.ESC+"[19~";break;case 120:a?i.key=Pe.ESC+"[20;"+(a+1)+"~":i.key=Pe.ESC+"[20~";break;case 121:a?i.key=Pe.ESC+"[21;"+(a+1)+"~":i.key=Pe.ESC+"[21~";break;case 122:a?i.key=Pe.ESC+"[23;"+(a+1)+"~":i.key=Pe.ESC+"[23~";break;case 123:a?i.key=Pe.ESC+"[24;"+(a+1)+"~":i.key=Pe.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?i.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?i.key=Pe.NUL:e.keyCode>=51&&e.keyCode<=55?i.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?i.key=Pe.DEL:e.keyCode===219?i.key=Pe.ESC:e.keyCode===220?i.key=Pe.FS:e.keyCode===221&&(i.key=Pe.GS);else if((!s||r)&&e.altKey&&!e.metaKey){let o=KPe[e.keyCode]?.[e.shiftKey?1:0];if(o)i.key=Pe.ESC+o;else if(e.keyCode>=65&&e.keyCode<=90){let l=e.ctrlKey?e.keyCode-64:e.keyCode+32,u=String.fromCharCode(l);e.shiftKey&&(u=u.toUpperCase()),i.key=Pe.ESC+u}else if(e.keyCode===32)i.key=Pe.ESC+(e.ctrlKey?Pe.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let l=e.code.slice(3,4);e.shiftKey||(l=l.toLowerCase()),i.key=Pe.ESC+l,i.cancel=!0}}else s&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(i.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?i.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(i.key=Pe.US),e.key==="@"&&(i.key=Pe.NUL));break}return i}var xn=0,XPe=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Pb,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Pb,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((i,a)=>this._getKey(i)-this._getKey(a)),t=0,s=0,r=new Array(this._array.length+this._insertedValues.length);for(let i=0;i<r.length;i++)s>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[s])?(r[i]=e[t],t++):r[i]=this._array[s++];this._array=r,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(xn=this._search(t),xn===-1)||this._getKey(this._array[xn])!==t)return!1;do if(this._array[xn]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(xn),!0;while(++xn<this._array.length&&this._getKey(this._array[xn])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((i,a)=>i-a),t=0,s=new Array(this._array.length-e.length),r=0;for(let i=0;i<this._array.length;i++)e[t]===i?t++:s[r++]=this._array[i];this._array=s,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(xn=this._search(e),!(xn<0||xn>=this._array.length)&&this._getKey(this._array[xn])===e))do yield this._array[xn];while(++xn<this._array.length&&this._getKey(this._array[xn])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(xn=this._search(e),!(xn<0||xn>=this._array.length)&&this._getKey(this._array[xn])===e))do t(this._array[xn]);while(++xn<this._array.length&&this._getKey(this._array[xn])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,s=this._array.length-1;for(;s>=t;){let r=t+s>>1,i=this._getKey(this._array[r]);if(i>e)s=r-1;else if(i<e)t=r+1;else{for(;r>0&&this._getKey(this._array[r-1])===e;)r--;return r}}return t}},o_=0,FL=0,ZPe=class extends Yt{constructor(){super(),this._decorations=new XPe(e=>e?.marker.line),this._onDecorationRegistered=this._register(new Ue),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new Ue),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(en(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new QPe(e);if(t){let s=t.marker.onDispose(()=>t.dispose()),r=t.onDispose(()=>{r.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),s.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,s){let r=0,i=0;for(let a of this._decorations.getKeyIterator(t))r=a.options.x??0,i=r+(a.options.width??1),e>=r&&e<i&&(!s||(a.options.layer??"bottom")===s)&&(yield a)}forEachDecorationAtCell(e,t,s,r){this._decorations.forEachByKey(t,i=>{o_=i.options.x??0,FL=o_+(i.options.width??1),e>=o_&&e<FL&&(!s||(i.options.layer??"bottom")===s)&&r(i)})}},QPe=class extends sc{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new Ue),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new Ue),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=nn.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=nn.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},JPe=1e3,eRe=class{constructor(e,t=JPe){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,s){this._rowCount=s,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let r=performance.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){let i=r-this._lastRefreshMs,a=this._debounceThresholdMS-i;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=performance.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},a)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},BL=20,Rb=class extends Yt{constructor(e,t,s,r){super(),this._terminal=e,this._coreBrowserService=s,this._renderService=r,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let i=this._coreBrowserService.mainDocument;this._accessibilityContainer=i.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=i.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let a=0;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);if(this._topBoundaryFocusListener=a=>this._handleBoundaryFocus(a,0),this._bottomBoundaryFocusListener=a=>this._handleBoundaryFocus(a,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=i.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new eRe(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(a=>this._handleResize(a.rows))),this._register(this._terminal.onRender(a=>this._refreshRows(a.start,a.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(a=>this._handleChar(a))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(a=>this._handleTab(a))),this._register(this._terminal.onKey(a=>this._handleKey(a.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(Et(i,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(en(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<BL+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===BL+1&&(this._liveRegion.textContent+=VN.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let s=this._terminal.buffer,r=s.lines.length.toString();for(let i=e;i<=t;i++){let a=s.lines.get(s.ydisp+i),o=[],l=a?.translateToString(!0,void 0,void 0,o)||"",u=(s.ydisp+i+1).toString(),d=this._rowElements[i];d&&(l.length===0?(d.textContent="",this._rowColumns.set(d,[0,1])):(d.textContent=l,this._rowColumns.set(d,o)),d.setAttribute("aria-posinset",u),d.setAttribute("aria-setsize",r),this._alignRowWidth(d))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let s=e.target,r=this._rowElements[t===0?1:this._rowElements.length-2],i=s.getAttribute("aria-posinset"),a=t===0?"1":`${this._terminal.buffer.lines.length}`;if(i===a||e.relatedTarget!==r)return;let o,l;if(t===0?(o=s,l=this._rowElements.pop(),this._rowContainer.removeChild(l)):(o=this._rowElements.shift(),l=s,this._rowContainer.removeChild(o)),o.removeEventListener("focus",this._topBoundaryFocusListener),l.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let u=this._createAccessibilityTreeNode();this._rowElements.unshift(u),this._rowContainer.insertAdjacentElement("afterbegin",u)}else{let u=this._createAccessibilityTreeNode();this._rowElements.push(u),this._rowContainer.appendChild(u)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;let e=this._coreBrowserService.mainDocument.getSelection();if(!e)return;if(e.isCollapsed){this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection();return}if(!e.anchorNode||!e.focusNode){console.error("anchorNode and/or focusNode are null");return}let t={node:e.anchorNode,offset:e.anchorOffset},s={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(s.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===s.node&&t.offset>s.offset)&&([t,s]=[s,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;let r=this._rowElements.slice(-1)[0];if(s.node.compareDocumentPosition(r)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(s={node:r,offset:r.textContent?.length??0}),!this._rowContainer.contains(s.node))return;let i=({node:l,offset:u})=>{let d=l instanceof Text?l.parentNode:l,m=parseInt(d?.getAttribute("aria-posinset"),10)-1;if(isNaN(m))return console.warn("row is invalid. Race condition?"),null;let f=this._rowColumns.get(d);if(!f)return console.warn("columns is null. Race condition?"),null;let x=u<f.length?f[u]:f.slice(-1)[0]+1;return x>=this._terminal.cols&&(++m,x=0),{row:m,column:x}},a=i(t),o=i(s);if(!(!a||!o)){if(a.row>o.row||a.row===o.row&&a.column>=o.column)throw new Error("invalid range");this._terminal.select(a.column,a.row,(o.row-a.row)*this._terminal.cols-a.column+o.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){e.style.transform="";let t=e.getBoundingClientRect().width,s=this._rowColumns.get(e)?.slice(-1)?.[0];if(!s)return;let r=s*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${r/t})`}};Rb=fn([Qe(1,vA),Qe(2,xl),Qe(3,vl)],Rb);var CC=class extends Yt{constructor(e,t,s,r,i){super(),this._element=e,this._mouseService=t,this._renderService=s,this._bufferService=r,this._linkProviderService=i,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new Ue),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new Ue),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(en(()=>{vd(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(Et(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(Et(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(Et(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(Et(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let s=e.composedPath();for(let r=0;r<s.length;r++){let i=s[r];if(i.classList.contains("xterm"))break;if(i.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){(!this._activeProviderReplies||!t)&&(this._activeProviderReplies?.forEach(r=>{r?.forEach(i=>{i.link.dispose&&i.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let s=!1;for(let[r,i]of this._linkProviderService.linkProviders.entries())t?this._activeProviderReplies?.get(r)&&(s=this._checkLinkProviderResult(r,e,s)):i.provideLinks(e.y,a=>{if(this._isMouseOut)return;let o=a?.map(l=>({link:l}));this._activeProviderReplies?.set(r,o),s=this._checkLinkProviderResult(r,e,s),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let s=new Set;for(let r=0;r<t.size;r++){let i=t.get(r);if(i)for(let a=0;a<i.length;a++){let o=i[a],l=o.link.range.start.y<e?0:o.link.range.start.x,u=o.link.range.end.y>e?this._bufferService.cols:o.link.range.end.x;for(let d=l;d<=u;d++){if(s.has(d)){i.splice(a--,1);break}s.add(d)}}}}_checkLinkProviderResult(e,t,s){if(!this._activeProviderReplies)return s;let r=this._activeProviderReplies.get(e),i=!1;for(let a=0;a<e;a++)(!this._activeProviderReplies.has(a)||this._activeProviderReplies.get(a))&&(i=!0);if(!i&&r){let a=r.find(o=>this._linkAtPosition(o.link,t));a&&(s=!0,this._handleNewLink(a))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!s)for(let a=0;a<this._activeProviderReplies.size;a++){let o=this._activeProviderReplies.get(a)?.find(l=>this._linkAtPosition(l.link,t));if(o){s=!0,this._handleNewLink(o);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&tRe(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,vd(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:s=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",s))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:s=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,s))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(s=>{if(!this._currentLink)return;let r=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(r,i),this._lastMouseEvent)){let a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._askForLink(a,!1)}})))}_linkHover(e,t,s){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(s,t.text)}_fireUnderlineEvent(e,t){let s=e.range,r=this._bufferService.buffer.ydisp,i=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-r-1,s.end.x,s.end.y-r-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(i)}_linkLeave(e,t,s){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(s,t.text)}_linkAtPosition(e,t){let s=e.range.start.y*this._bufferService.cols+e.range.start.x,r=e.range.end.y*this._bufferService.cols+e.range.end.x,i=t.y*this._bufferService.cols+t.x;return s<=i&&i<=r}_positionFromMouseEvent(e,t,s){let r=s.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,s,r,i){return{x1:e,y1:t,x2:s,y2:r,cols:this._bufferService.cols,fg:i}}};CC=fn([Qe(1,bA),Qe(2,vl),Qe(3,si),Qe(4,wG)],CC);function tRe(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var sRe=class extends WPe{constructor(e={}){super(e),this._linkifier=this._register(new ph),this.browser=zG,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new ph),this._onCursorMove=this._register(new Ue),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new Ue),this.onKey=this._onKey.event,this._onRender=this._register(new Ue),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new Ue),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new Ue),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new Ue),this.onBell=this._onBell.event,this._onFocus=this._register(new Ue),this._onBlur=this._register(new Ue),this._onA11yCharEmitter=this._register(new Ue),this._onA11yTabEmitter=this._register(new Ue),this._onWillOpen=this._register(new Ue),this._setup(),this._decorationService=this._instantiationService.createInstance(ZPe),this._instantiationService.setService(Qp,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(VTe),this._instantiationService.setService(wG,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(WN)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh(t?.start??0,t?.end??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(Sr.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(Sr.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(Sr.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(Sr.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(en(()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let s,r="";switch(t.index){case 256:s="foreground",r="10";break;case 257:s="background",r="11";break;case 258:s="cursor",r="12";break;default:s="ansi",r="4;"+t.index}switch(t.type){case 0:let i=Vs.toColorRGB(s==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[s]);this.coreService.triggerDataEvent(`${Pe.ESC}]${r};${$Pe(i)}${FG.ST}`);break;case 1:if(s==="ansi")this._themeService.modifyColors(a=>a.ansi[t.index]=Tn.toColor(...t.color));else{let a=s;this._themeService.modifyColors(o=>o[a]=Tn.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Rb,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Pe.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(Pe.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let s=Math.min(this.buffer.x,this.cols-1),r=this._renderService.dimensions.css.cell.height,i=t.getWidth(s),a=this._renderService.dimensions.css.cell.width*i,o=this.buffer.y*this._renderService.dimensions.css.cell.height,l=s*this._renderService.dimensions.css.cell.width;this.textarea.style.left=l+"px",this.textarea.style.top=o+"px",this.textarea.style.width=a+"px",this.textarea.style.height=r+"px",this.textarea.style.lineHeight=r+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(Et(this.element,"copy",t=>{this.hasSelection()&&aEe(t,this._selectionService)}));let e=t=>oEe(t,this.textarea,this.coreService,this.optionsService);this._register(Et(this.textarea,"paste",e)),this._register(Et(this.element,"paste",e)),$G?this._register(Et(this.element,"mousedown",t=>{t.button===2&&Y4(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(Et(this.element,"contextmenu",t=>{Y4(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),kA&&this._register(Et(this.element,"auxclick",t=>{t.button===1&&hG(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(Et(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(Et(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(Et(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(Et(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(Et(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(Et(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(Et(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(Et(this.screenElement,"mousemove",i=>this.updateCursorStyle(i))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement);let s=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",GN.get()),GG||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>s.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(UTe,this.textarea,e.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(xl,this._coreBrowserService),this._register(Et(this.textarea,"focus",i=>this._handleTextAreaFocus(i))),this._register(Et(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(fC,this._document,this._helperContainer),this._instantiationService.setService(iw,this._charSizeService),this._themeService=this._instantiationService.createInstance(vC),this._instantiationService.setService(Kh,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Eb),this._instantiationService.setService(yG,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(gC,this.rows,this.screenElement)),this._instantiationService.setService(vl,this._renderService),this._register(this._renderService.onRenderedViewportChange(i=>this._onRender.fire(i))),this.onResize(i=>this._renderService.resize(i.cols,i.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(uC,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(pC),this._instantiationService.setService(bA,this._mouseService);let r=this._linkifier.value=this._register(this._instantiationService.createInstance(CC,this.screenElement));this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(cC,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(i=>{super.scrollLines(i,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(xC,this.element,this.screenElement,r)),this._instantiationService.setService(pEe,this._selectionService),this._register(this._selectionService.onRequestScrollLines(i=>this.scrollLines(i.amount,i.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(i=>this._renderService.handleSelectionChanged(i.start,i.end,i.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(i=>{this.textarea.value=i,this.textarea.focus(),this.textarea.select()})),this._register(Sr.any(this._onScroll.event,this._inputHandler.onScroll)(()=>{this._selectionService.refresh(),this._viewport?.queueSync()})),this._register(this._instantiationService.createInstance(dC,this.screenElement)),this._register(Et(this.element,"mousedown",i=>this._selectionService.handleMouseDown(i))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Rb,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",i=>this._handleScreenReaderModeOptionChange(i))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Ab,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",i=>{!this._overviewRulerRenderer&&i&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Ab,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(mC,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function s(a){let o=e._mouseService.getMouseReportCoords(a,e.screenElement);if(!o)return!1;let l,u;switch(a.overrideType||a.type){case"mousemove":u=32,a.buttons===void 0?(l=3,a.button!==void 0&&(l=a.button<3?a.button:3)):l=a.buttons&1?0:a.buttons&4?1:a.buttons&2?2:3;break;case"mouseup":u=0,l=a.button<3?a.button:3;break;case"mousedown":u=1,l=a.button<3?a.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(a)===!1)return!1;let d=a.deltaY;if(d===0||e.coreMouseService.consumeWheelEvent(a,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return!1;u=d<0?0:1,l=4;break;default:return!1}return u===void 0||l===void 0||l>4?!1:e.coreMouseService.triggerMouseEvent({col:o.col,row:o.row,x:o.x,y:o.y,button:l,action:u,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}let r={mouseup:null,wheel:null,mousedrag:null,mousemove:null},i={mouseup:a=>(s(a),a.buttons||(this._document.removeEventListener("mouseup",r.mouseup),r.mousedrag&&this._document.removeEventListener("mousemove",r.mousedrag)),this.cancel(a)),wheel:a=>(s(a),this.cancel(a,!0)),mousedrag:a=>{a.buttons&&s(a)},mousemove:a=>{a.buttons||s(a)}};this._register(this.coreMouseService.onProtocolChange(a=>{a?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(a)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),a&8?r.mousemove||(t.addEventListener("mousemove",i.mousemove),r.mousemove=i.mousemove):(t.removeEventListener("mousemove",r.mousemove),r.mousemove=null),a&16?r.wheel||(t.addEventListener("wheel",i.wheel,{passive:!1}),r.wheel=i.wheel):(t.removeEventListener("wheel",r.wheel),r.wheel=null),a&2?r.mouseup||(r.mouseup=i.mouseup):(this._document.removeEventListener("mouseup",r.mouseup),r.mouseup=null),a&4?r.mousedrag||(r.mousedrag=i.mousedrag):(this._document.removeEventListener("mousemove",r.mousedrag),r.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(Et(t,"mousedown",a=>{if(a.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(a)))return s(a),r.mouseup&&this._document.addEventListener("mouseup",r.mouseup),r.mousedrag&&this._document.addEventListener("mousemove",r.mousedrag),this.cancel(a)})),this._register(Et(t,"wheel",a=>{if(!r.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(a)===!1)return!1;if(!this.buffer.hasScrollback){if(a.deltaY===0)return!1;if(e.coreMouseService.consumeWheelEvent(a,e._renderService?.dimensions?.device?.cell?.height,e._coreBrowserService?.dpr)===0)return this.cancel(a,!0);let o=Pe.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(a.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(o,!0),this.cancel(a,!0)}}},{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){uG(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,s){this._selectionService.setSelection(e,t,s)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let s=YPe(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),s.type===3||s.type===2){let r=this.rows-1;return this.scrollLines(s.type===2?-r:r),this.cancel(e,!0)}if(s.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(s.cancel&&this.cancel(e,!0),!s.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((s.key===Pe.ETX||s.key===Pe.CR)&&(this.textarea.value=""),this._onKey.fire({key:s.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(s.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let s=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?s:s&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&(nRe(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){this._charSizeService?.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(An));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;let e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(Pe.ESC+"[I"):this.coreService.triggerDataEvent(Pe.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),s=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${Pe.ESC}[4;${s};${t}t`);break;case 1:let r=this._renderService.dimensions.css.cell.width.toFixed(0),i=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${Pe.ESC}[6;${i};${r}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}};function nRe(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var rRe=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let s={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(s),t.dispose=()=>this._wrappedAddonDispose(s),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let s=0;s<this._addons.length;s++)if(this._addons[s]===e){t=s;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},iRe=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new ga)}translateToString(e,t,s){return this._line.translateToString(e,t,s)}},zL=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new iRe(t)}getNullCell(){return new ga}},aRe=class extends Yt{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new Ue),this.onBufferChange=this._onBufferChange.event,this._normal=new zL(this._core.buffers.normal,"normal"),this._alternate=new zL(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},oRe=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,s=>t(s.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(s,r)=>t(s,r.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},lRe=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},cRe=["cols","rows"],Wa=0,dRe=class extends Yt{constructor(e){super(),this._core=this._register(new sRe(e)),this._addonManager=this._register(new rRe),this._publicOptions={...this._core.options};let t=r=>this._core.options[r],s=(r,i)=>{this._checkReadonlyOptions(r),this._core.options[r]=i};for(let r in this._core.options){let i={get:t.bind(this,r),set:s.bind(this,r)};Object.defineProperty(this._publicOptions,r,i)}}_checkReadonlyOptions(e){if(cRe.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new oRe(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new lRe(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new aRe(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,synchronizedOutputMode:e.synchronizedOutput,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,s){this._verifyIntegers(e,t,s),this._core.select(e,t,s)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return GN.get()},set promptLabel(e){GN.set(e)},get tooMuchOutput(){return VN.get()},set tooMuchOutput(e){VN.set(e)}}}_verifyIntegers(...e){for(Wa of e)if(Wa===1/0||isNaN(Wa)||Wa%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(Wa of e)if(Wa&&(Wa===1/0||isNaN(Wa)||Wa%1!==0||Wa<0))throw new Error("This API only accepts positive integers")}};var uRe=2,hRe=1,mRe=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let e=this._terminal._core._renderService.dimensions;if(e.css.cell.width===0||e.css.cell.height===0)return;let t=this._terminal.options.scrollback===0?0:this._terminal.options.overviewRuler?.width||14,s=window.getComputedStyle(this._terminal.element.parentElement),r=parseInt(s.getPropertyValue("height")),i=Math.max(0,parseInt(s.getPropertyValue("width"))),a=window.getComputedStyle(this._terminal.element),o={top:parseInt(a.getPropertyValue("padding-top")),bottom:parseInt(a.getPropertyValue("padding-bottom")),right:parseInt(a.getPropertyValue("padding-right")),left:parseInt(a.getPropertyValue("padding-left"))},l=o.top+o.bottom,u=o.right+o.left,d=r-l,m=i-u-t;return{cols:Math.max(uRe,Math.floor(m/e.css.cell.width)),rows:Math.max(hRe,Math.floor(d/e.css.cell.height))}}};var fRe=class{constructor(t,s,r,i={}){this._terminal=t,this._regex=s,this._handler=r,this._options=i}provideLinks(t,s){let r=gRe.computeLink(t,this._regex,this._terminal,this._handler);s(this._addCallbacks(r))}_addCallbacks(t){return t.map(s=>(s.leave=this._options.leave,s.hover=(r,i)=>{if(this._options.hover){let{range:a}=s;this._options.hover(r,i,a)}},s))}};function pRe(e){try{let t=new URL(e),s=t.password&&t.username?`${t.protocol}//${t.username}:${t.password}@${t.host}`:t.username?`${t.protocol}//${t.username}@${t.host}`:`${t.protocol}//${t.host}`;return e.toLocaleLowerCase().startsWith(s.toLocaleLowerCase())}catch{return!1}}var gRe=class Tv{static computeLink(t,s,r,i){let a=new RegExp(s.source,(s.flags||"")+"g"),[o,l]=Tv._getWindowedLineStrings(t-1,r),u=o.join(""),d,m=[];for(;d=a.exec(u);){let f=d[0];if(!pRe(f))continue;let[x,v]=Tv._mapStrIdx(r,l,0,d.index),[y,w]=Tv._mapStrIdx(r,x,v,f.length);if(x===-1||v===-1||y===-1||w===-1)continue;let S={start:{x:v+1,y:x+1},end:{x:w,y:y+1}};m.push({range:S,text:f,activate:i})}return m}static _getWindowedLineStrings(t,s){let r,i=t,a=t,o=0,l="",u=[];if(r=s.buffer.active.getLine(t)){let d=r.translateToString(!0);if(r.isWrapped&&d[0]!==" "){for(o=0;(r=s.buffer.active.getLine(--i))&&o<2048&&(l=r.translateToString(!0),o+=l.length,u.push(l),!(!r.isWrapped||l.indexOf(" ")!==-1)););u.reverse()}for(u.push(d),o=0;(r=s.buffer.active.getLine(++a))&&r.isWrapped&&o<2048&&(l=r.translateToString(!0),o+=l.length,u.push(l),l.indexOf(" ")===-1););}return[u,i]}static _mapStrIdx(t,s,r,i){let a=t.buffer.active,o=a.getNullCell(),l=r;for(;i;){let u=a.getLine(s);if(!u)return[-1,-1];for(let d=l;d<u.length;++d){u.getCell(d,o);let m=o.getChars();if(o.getWidth()&&(i-=m.length||1,d===u.length-1&&m==="")){let f=a.getLine(s+1);f&&f.isWrapped&&(f.getCell(0,o),o.getWidth()===2&&(i+=1))}if(i<0)return[s,d]}s++,l=0}return[s,l]}},xRe=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function vRe(e,t){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}var bRe=class{constructor(e=vRe,t={}){this._handler=e,this._options=t}activate(e){this._terminal=e;let t=this._options,s=t.urlRegex||xRe;this._linkProvider=this._terminal.registerLinkProvider(new fRe(this._terminal,s,this._handler,t))}dispose(){this._linkProvider?.dispose()}};var er=0,tr=0,sr=0,mn=0,Er;(e=>{function t(i,a,o,l){return l!==void 0?`#${Uc(i)}${Uc(a)}${Uc(o)}${Uc(l)}`:`#${Uc(i)}${Uc(a)}${Uc(o)}`}e.toCss=t;function s(i,a,o,l=255){return(i<<24|a<<16|o<<8|l)>>>0}e.toRgba=s;function r(i,a,o,l){return{css:e.toCss(i,a,o,l),rgba:e.toRgba(i,a,o,l)}}e.toColor=r})(Er||={});var yRe;(e=>{function t(u,d){if(mn=(d.rgba&255)/255,mn===1)return{css:d.css,rgba:d.rgba};let m=d.rgba>>24&255,f=d.rgba>>16&255,x=d.rgba>>8&255,v=u.rgba>>24&255,y=u.rgba>>16&255,w=u.rgba>>8&255;er=v+Math.round((m-v)*mn),tr=y+Math.round((f-y)*mn),sr=w+Math.round((x-w)*mn);let S=Er.toCss(er,tr,sr),C=Er.toRgba(er,tr,sr);return{css:S,rgba:C}}e.blend=t;function s(u){return(u.rgba&255)===255}e.isOpaque=s;function r(u,d,m){let f=Pv.ensureContrastRatio(u.rgba,d.rgba,m);if(f)return Er.toColor(f>>24&255,f>>16&255,f>>8&255)}e.ensureContrastRatio=r;function i(u){let d=(u.rgba|255)>>>0;return[er,tr,sr]=Pv.toChannels(d),{css:Er.toCss(er,tr,sr),rgba:d}}e.opaque=i;function a(u,d){return mn=Math.round(d*255),[er,tr,sr]=Pv.toChannels(u.rgba),{css:Er.toCss(er,tr,sr,mn),rgba:Er.toRgba(er,tr,sr,mn)}}e.opacity=a;function o(u,d){return mn=u.rgba&255,a(u,mn*d/255)}e.multiplyOpacity=o;function l(u){return[u.rgba>>24&255,u.rgba>>16&255,u.rgba>>8&255]}e.toColorRGB=l})(yRe||={});var vr;(e=>{let t,s;try{let i=document.createElement("canvas");i.width=1,i.height=1;let a=i.getContext("2d",{willReadFrequently:!0});a&&(t=a,t.globalCompositeOperation="copy",s=t.createLinearGradient(0,0,1,1))}catch{}function r(i){if(i.match(/#[\da-f]{3,8}/i))switch(i.length){case 4:return er=parseInt(i.slice(1,2).repeat(2),16),tr=parseInt(i.slice(2,3).repeat(2),16),sr=parseInt(i.slice(3,4).repeat(2),16),Er.toColor(er,tr,sr);case 5:return er=parseInt(i.slice(1,2).repeat(2),16),tr=parseInt(i.slice(2,3).repeat(2),16),sr=parseInt(i.slice(3,4).repeat(2),16),mn=parseInt(i.slice(4,5).repeat(2),16),Er.toColor(er,tr,sr,mn);case 7:return{css:i,rgba:(parseInt(i.slice(1),16)<<8|255)>>>0};case 9:return{css:i,rgba:parseInt(i.slice(1),16)>>>0}}let a=i.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(a)return er=parseInt(a[1]),tr=parseInt(a[2]),sr=parseInt(a[3]),mn=Math.round((a[5]===void 0?1:parseFloat(a[5]))*255),Er.toColor(er,tr,sr,mn);if(!t||!s)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=s,t.fillStyle=i,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[er,tr,sr,mn]=t.getImageData(0,0,1,1).data,mn!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:Er.toRgba(er,tr,sr,mn),css:i}}e.toColor=r})(vr||={});var Hr;(e=>{function t(r){return s(r>>16&255,r>>8&255,r&255)}e.relativeLuminance=t;function s(r,i,a){let o=r/255,l=i/255,u=a/255,d=o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4),m=l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4),f=u<=.03928?u/12.92:Math.pow((u+.055)/1.055,2.4);return d*.2126+m*.7152+f*.0722}e.relativeLuminance2=s})(Hr||={});var Pv;(e=>{function t(o,l){if(mn=(l&255)/255,mn===1)return l;let u=l>>24&255,d=l>>16&255,m=l>>8&255,f=o>>24&255,x=o>>16&255,v=o>>8&255;return er=f+Math.round((u-f)*mn),tr=x+Math.round((d-x)*mn),sr=v+Math.round((m-v)*mn),Er.toRgba(er,tr,sr)}e.blend=t;function s(o,l,u){let d=Hr.relativeLuminance(o>>8),m=Hr.relativeLuminance(l>>8);if(Yo(d,m)<u){if(m<d){let v=r(o,l,u),y=Yo(d,Hr.relativeLuminance(v>>8));if(y<u){let w=i(o,l,u),S=Yo(d,Hr.relativeLuminance(w>>8));return y>S?v:w}return v}let f=i(o,l,u),x=Yo(d,Hr.relativeLuminance(f>>8));if(x<u){let v=r(o,l,u),y=Yo(d,Hr.relativeLuminance(v>>8));return x>y?f:v}return f}}e.ensureContrastRatio=s;function r(o,l,u){let d=o>>24&255,m=o>>16&255,f=o>>8&255,x=l>>24&255,v=l>>16&255,y=l>>8&255,w=Yo(Hr.relativeLuminance2(x,v,y),Hr.relativeLuminance2(d,m,f));for(;w<u&&(x>0||v>0||y>0);)x-=Math.max(0,Math.ceil(x*.1)),v-=Math.max(0,Math.ceil(v*.1)),y-=Math.max(0,Math.ceil(y*.1)),w=Yo(Hr.relativeLuminance2(x,v,y),Hr.relativeLuminance2(d,m,f));return(x<<24|v<<16|y<<8|255)>>>0}e.reduceLuminance=r;function i(o,l,u){let d=o>>24&255,m=o>>16&255,f=o>>8&255,x=l>>24&255,v=l>>16&255,y=l>>8&255,w=Yo(Hr.relativeLuminance2(x,v,y),Hr.relativeLuminance2(d,m,f));for(;w<u&&(x<255||v<255||y<255);)x=Math.min(255,x+Math.ceil((255-x)*.1)),v=Math.min(255,v+Math.ceil((255-v)*.1)),y=Math.min(255,y+Math.ceil((255-y)*.1)),w=Yo(Hr.relativeLuminance2(x,v,y),Hr.relativeLuminance2(d,m,f));return(x<<24|v<<16|y<<8|255)>>>0}e.increaseLuminance=i;function a(o){return[o>>24&255,o>>16&255,o>>8&255,o&255]}e.toChannels=a})(Pv||={});function Uc(e){let t=e.toString(16);return t.length<2?"0"+t:t}function Yo(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var wRe=Object.freeze((()=>{let e=[vr.toColor("#2e3436"),vr.toColor("#cc0000"),vr.toColor("#4e9a06"),vr.toColor("#c4a000"),vr.toColor("#3465a4"),vr.toColor("#75507b"),vr.toColor("#06989a"),vr.toColor("#d3d7cf"),vr.toColor("#555753"),vr.toColor("#ef2929"),vr.toColor("#8ae234"),vr.toColor("#fce94f"),vr.toColor("#729fcf"),vr.toColor("#ad7fa8"),vr.toColor("#34e2e2"),vr.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let s=0;s<216;s++){let r=t[s/36%6|0],i=t[s/6%6|0],a=t[s%6];e.push({css:Er.toCss(r,i,a),rgba:Er.toRgba(r,i,a)})}for(let s=0;s<24;s++){let r=8+s*10;e.push({css:Er.toCss(r,r,r),rgba:Er.toRgba(r,r,r)})}return e})());function $L(e,t,s){return Math.max(t,Math.min(e,s))}function jRe(e){switch(e){case"&":return"&amp;";case"<":return"&lt;"}return e}var eV=class{constructor(e){this._buffer=e}serialize(e,t){let s=this._buffer.getNullCell(),r=this._buffer.getNullCell(),i=s,a=e.start.y,o=e.end.y,l=e.start.x,u=e.end.x;this._beforeSerialize(o-a,a,o);for(let d=a;d<=o;d++){let m=this._buffer.getLine(d);if(m){let f=d===e.start.y?l:0,x=d===e.end.y?u:m.length;for(let v=f;v<x;v++){let y=m.getCell(v,i===s?r:s);if(!y){console.warn(`Can't get cell at row=${d}, col=${v}`);continue}this._nextCell(y,i,d,v),i=y}}this._rowEnd(d,d===o)}return this._afterSerialize(),this._serializeString(t)}_nextCell(e,t,s,r){}_rowEnd(e,t){}_beforeSerialize(e,t,s){}_afterSerialize(){}_serializeString(e){return""}};function tV(e,t){return e.getFgColorMode()===t.getFgColorMode()&&e.getFgColor()===t.getFgColor()}function Jo(e,t){return e.getBgColorMode()===t.getBgColorMode()&&e.getBgColor()===t.getBgColor()}function sV(e,t){return e.isInverse()===t.isInverse()&&e.isBold()===t.isBold()&&e.isUnderline()===t.isUnderline()&&e.isOverline()===t.isOverline()&&e.isBlink()===t.isBlink()&&e.isInvisible()===t.isInvisible()&&e.isItalic()===t.isItalic()&&e.isDim()===t.isDim()&&e.isStrikethrough()===t.isStrikethrough()}var SRe=class extends eV{constructor(e,t){super(e),this._terminal=t,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(e,t,s){this._allRows=new Array(e),this._lastContentCursorRow=t,this._lastCursorRow=t,this._firstRow=t}_rowEnd(e,t){this._nullCellCount>0&&!Jo(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`\x1B[${this._nullCellCount}X`);let s="";if(!t){e-this._firstRow>=this._terminal.rows&&this._buffer.getLine(this._cursorStyleRow)?.getCell(this._cursorStyleCol,this._backgroundCell);let r=this._buffer.getLine(e),i=this._buffer.getLine(e+1);if(!i.isWrapped)s=`\r
`,this._lastCursorRow=e+1,this._lastCursorCol=0;else{s="";let a=r.getCell(r.length-1,this._thisRowLastChar),o=r.getCell(r.length-2,this._thisRowLastSecondChar),l=i.getCell(0,this._nextRowFirstChar),u=l.getWidth()>1,d=!1;(l.getChars()&&u?this._nullCellCount<=1:this._nullCellCount<=0)&&((a.getChars()||a.getWidth()===0)&&Jo(a,l)&&(d=!0),u&&(o.getChars()||o.getWidth()===0)&&Jo(a,l)&&Jo(o,l)&&(d=!0)),d||(s="-".repeat(this._nullCellCount+1),s+="\x1B[1D\x1B[1X",this._nullCellCount>0&&(s+="\x1B[A",s+=`\x1B[${r.length-this._nullCellCount}C`,s+=`\x1B[${this._nullCellCount}X`,s+=`\x1B[${r.length-this._nullCellCount}D`,s+="\x1B[B"),this._lastContentCursorRow=e+1,this._lastContentCursorCol=0,this._lastCursorRow=e+1,this._lastCursorCol=0)}}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=s,this._currentRow="",this._nullCellCount=0}_diffStyle(e,t){let s=[],r=!tV(e,t),i=!Jo(e,t),a=!sV(e,t);if(r||i||a)if(e.isAttributeDefault())t.isAttributeDefault()||s.push(0);else{if(r){let o=e.getFgColor();e.isFgRGB()?s.push(38,2,o>>>16&255,o>>>8&255,o&255):e.isFgPalette()?o>=16?s.push(38,5,o):s.push(o&8?90+(o&7):30+(o&7)):s.push(39)}if(i){let o=e.getBgColor();e.isBgRGB()?s.push(48,2,o>>>16&255,o>>>8&255,o&255):e.isBgPalette()?o>=16?s.push(48,5,o):s.push(o&8?100+(o&7):40+(o&7)):s.push(49)}a&&(e.isInverse()!==t.isInverse()&&s.push(e.isInverse()?7:27),e.isBold()!==t.isBold()&&s.push(e.isBold()?1:22),e.isUnderline()!==t.isUnderline()&&s.push(e.isUnderline()?4:24),e.isOverline()!==t.isOverline()&&s.push(e.isOverline()?53:55),e.isBlink()!==t.isBlink()&&s.push(e.isBlink()?5:25),e.isInvisible()!==t.isInvisible()&&s.push(e.isInvisible()?8:28),e.isItalic()!==t.isItalic()&&s.push(e.isItalic()?3:23),e.isDim()!==t.isDim()&&s.push(e.isDim()?2:22),e.isStrikethrough()!==t.isStrikethrough()&&s.push(e.isStrikethrough()?9:29))}return s}_nextCell(e,t,s,r){if(e.getWidth()===0)return;let i=e.getChars()==="",a=this._diffStyle(e,this._cursorStyle);if(i?!Jo(this._cursorStyle,e):a.length>0){this._nullCellCount>0&&(Jo(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=s,this._lastContentCursorCol=this._lastCursorCol=r,this._currentRow+=`\x1B[${a.join(";")}m`;let o=this._buffer.getLine(s);o!==void 0&&(o.getCell(r,this._cursorStyle),this._cursorStyleRow=s,this._cursorStyleCol=r)}i?this._nullCellCount+=e.getWidth():(this._nullCellCount>0&&(Jo(this._cursorStyle,this._backgroundCell)?this._currentRow+=`\x1B[${this._nullCellCount}C`:(this._currentRow+=`\x1B[${this._nullCellCount}X`,this._currentRow+=`\x1B[${this._nullCellCount}C`),this._nullCellCount=0),this._currentRow+=e.getChars(),this._lastContentCursorRow=this._lastCursorRow=s,this._lastContentCursorCol=this._lastCursorCol=r+e.getWidth())}_serializeString(e){let t=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(t=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let s="";for(let a=0;a<t;a++)s+=this._allRows[a],a+1<t&&(s+=this._allRowSeparators[a]);if(!e){let a=this._buffer.baseY+this._buffer.cursorY,o=this._buffer.cursorX,l=a!==this._lastCursorRow||o!==this._lastCursorCol,u=d=>{d>0?s+=`\x1B[${d}C`:d<0&&(s+=`\x1B[${-d}D`)};l&&((d=>{d>0?s+=`\x1B[${d}B`:d<0&&(s+=`\x1B[${-d}A`)})(a-this._lastCursorRow),u(o-this._lastCursorCol))}let r=this._terminal._core._inputHandler._curAttrData,i=this._diffStyle(r,this._cursorStyle);return i.length>0&&(s+=`\x1B[${i.join(";")}m`),s}},_Re=class{activate(e){this._terminal=e}_serializeBufferByScrollback(e,t,s){let r=t.length,i=s===void 0?r:$L(s+e.rows,0,r);return this._serializeBufferByRange(e,t,{start:r-i,end:r-1},!1)}_serializeBufferByRange(e,t,s,r){return new SRe(t,e).serialize({start:{x:0,y:typeof s.start=="number"?s.start:s.start.line},end:{x:e.cols,y:typeof s.end=="number"?s.end:s.end.line}},r)}_serializeBufferAsHTML(e,t){let s=e.buffer.active,r=new NRe(s,e,t),i=t.onlySelection??!1,a=t.range;if(a)return r.serialize({start:{x:a.startCol,y:(a.startLine,a.startLine)},end:{x:e.cols,y:(a.endLine,a.endLine)}});if(!i){let l=s.length,u=t.scrollback,d=u===void 0?l:$L(u+e.rows,0,l);return r.serialize({start:{x:0,y:l-d},end:{x:e.cols,y:l-1}})}let o=this._terminal?.getSelectionPosition();return o!==void 0?r.serialize({start:{x:o.start.x,y:o.start.y},end:{x:o.end.x,y:o.end.y}}):""}_serializeModes(e){let t="",s=e.modes;if(s.applicationCursorKeysMode&&(t+="\x1B[?1h"),s.applicationKeypadMode&&(t+="\x1B[?66h"),s.bracketedPasteMode&&(t+="\x1B[?2004h"),s.insertMode&&(t+="\x1B[4h"),s.originMode&&(t+="\x1B[?6h"),s.reverseWraparoundMode&&(t+="\x1B[?45h"),s.sendFocusMode&&(t+="\x1B[?1004h"),s.wraparoundMode===!1&&(t+="\x1B[?7l"),s.mouseTrackingMode!=="none")switch(s.mouseTrackingMode){case"x10":t+="\x1B[?9h";break;case"vt200":t+="\x1B[?1000h";break;case"drag":t+="\x1B[?1002h";break;case"any":t+="\x1B[?1003h";break}return t}serialize(e){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let t=e?.range?this._serializeBufferByRange(this._terminal,this._terminal.buffer.normal,e.range,!0):this._serializeBufferByScrollback(this._terminal,this._terminal.buffer.normal,e?.scrollback);if(!e?.excludeAltBuffer&&this._terminal.buffer.active.type==="alternate"){let s=this._serializeBufferByScrollback(this._terminal,this._terminal.buffer.alternate,void 0);t+=`\x1B[?1049h\x1B[H${s}`}return e?.excludeModes||(t+=this._serializeModes(this._terminal)),t}serializeAsHTML(e){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,e||{})}dispose(){}},NRe=class extends eV{constructor(e,t,s){super(e),this._terminal=t,this._options=s,this._currentRow="",this._htmlContent="",t._core._themeService?this._ansiColors=t._core._themeService.colors.ansi:this._ansiColors=wRe}_padStart(e,t,s){return t=t>>0,s=s??" ",e.length>t?e:(t-=e.length,t>s.length&&(s+=s.repeat(t/s.length)),s.slice(0,t)+e)}_beforeSerialize(e,t,s){this._htmlContent+="<html><body><!--StartFragment--><pre>";let r="#000000",i="#ffffff";(this._options.includeGlobalBackground??!1)&&(r=this._terminal.options.theme?.foreground??"#ffffff",i=this._terminal.options.theme?.background??"#000000");let a=[];a.push("color: "+r+";"),a.push("background-color: "+i+";"),a.push("font-family: "+this._terminal.options.fontFamily+";"),a.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+a.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre><!--EndFragment--></body></html>"}_rowEnd(e,t){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(e,t){let s=t?e.getFgColor():e.getBgColor();if(t?e.isFgRGB():e.isBgRGB())return"#"+[s>>16&255,s>>8&255,s&255].map(r=>this._padStart(r.toString(16),2,"0")).join("");if(t?e.isFgPalette():e.isBgPalette())return this._ansiColors[s].css}_diffStyle(e,t){let s=[],r=!tV(e,t),i=!Jo(e,t),a=!sV(e,t);if(r||i||a){let o=this._getHexColor(e,!0);o&&s.push("color: "+o+";");let l=this._getHexColor(e,!1);return l&&s.push("background-color: "+l+";"),e.isInverse()&&s.push("color: #000000; background-color: #BFBFBF;"),e.isBold()&&s.push("font-weight: bold;"),e.isUnderline()&&e.isOverline()?s.push("text-decoration: overline underline;"):e.isUnderline()?s.push("text-decoration: underline;"):e.isOverline()&&s.push("text-decoration: overline;"),e.isBlink()&&s.push("text-decoration: blink;"),e.isInvisible()&&s.push("visibility: hidden;"),e.isItalic()&&s.push("font-style: italic;"),e.isDim()&&s.push("opacity: 0.5;"),e.isStrikethrough()&&s.push("text-decoration: line-through;"),s}}_nextCell(e,t,s,r){if(e.getWidth()===0)return;let i=e.getChars()==="",a=this._diffStyle(e,t);a&&(this._currentRow+=a.length===0?"</span><span>":"</span><span style='"+a.join(" ")+"'>"),i?this._currentRow+=" ":this._currentRow+=jRe(e.getChars())}_serializeString(){return this._htmlContent}};function CRe(e,t){let s=null;return((...r)=>{s&&clearTimeout(s),s=setTimeout(()=>e(...r),t)})}function kRe({terminalId:e,onCommandEnter:t,onResize:s,onDimensionsReady:r}){const i=p.useRef(null),a=p.useRef(null),o=p.useRef(null),l=p.useRef(null),u=p.useRef(""),d=p.useRef(!1),m=p.useRef(!1),[f,x]=p.useState({cols:80,rows:24});p.useEffect(()=>{if(!i.current||a.current)return;const j=new dRe({cursorBlink:!0,cursorStyle:"block",fontSize:13,fontFamily:'var(--font-mono), "JetBrains Mono", Menlo, Monaco, "Courier New", monospace',lineHeight:1.2,letterSpacing:0,theme:{background:"#0B0B0F",foreground:"#E8E6E3",cursor:"#D6D876",cursorAccent:"#0B0B0F",selectionBackground:"#D6D87640",selectionForeground:"#E8E6E3",black:"#1A1A1F",red:"#FF6B6B",green:"#87D687",yellow:"#D6D876",blue:"#6BB3FF",magenta:"#C792EA",cyan:"#89DDFF",white:"#E8E6E3",brightBlack:"#4A4A50",brightRed:"#FF8A8A",brightGreen:"#A5E6A5",brightYellow:"#E8E87A",brightBlue:"#8AC4FF",brightMagenta:"#DEB3FF",brightCyan:"#A6E8FF",brightWhite:"#FFFFFF"},allowProposedApi:!0,scrollback:1e4}),T=new mRe,E=new bRe,A=new _Re;j.loadAddon(T),j.loadAddon(E),j.loadAddon(A),j.open(i.current);const D=navigator.userAgentData?.platform?navigator.userAgentData.platform.toLowerCase():navigator.platform.toLowerCase(),M=D.includes("win"),P=D.includes("linux"),O=()=>{if(j.hasSelection()){const I=j.getSelection();if(I)return navigator.clipboard.writeText(I).catch(V=>{console.error("[useXterm] Failed to copy selection:",V)}),!0}return!1},F=()=>{navigator.clipboard.readText().then(I=>{I&&j.paste(I)}).catch(I=>{console.error("[useXterm] Failed to read clipboard:",I)})};j.attachCustomKeyEventHandler(I=>{const V=I.metaKey||I.ctrlKey;return I.key==="Enter"&&I.shiftKey&&!V&&I.type==="keydown"?(j.input(`\x1B
`),!1):I.key==="Backspace"&&I.type==="keydown"&&V?(j.input(""),!1):V&&I.key>="1"&&I.key<="9"||V&&I.key==="Tab"||V&&(I.key==="t"||I.key==="T"||I.key==="w"||I.key==="W")?!1:I.ctrlKey&&I.shiftKey&&(I.key==="C"||I.key==="c")&&I.type==="keydown"&&P?(O(),!1):I.ctrlKey&&I.shiftKey&&(I.key==="V"||I.key==="v")&&I.type==="keydown"&&P?(I.preventDefault(),F(),!1):V&&!I.shiftKey&&(I.key==="c"||I.key==="C")&&I.type==="keydown"?!O():I.ctrlKey&&!I.shiftKey&&(I.key==="v"||I.key==="V")&&I.type==="keydown"&&(M||P)?(I.preventDefault(),F(),!1):!0}),a.current=j,o.current=T,l.current=A;const $=typeof requestAnimationFrame<"u"?requestAnimationFrame:I=>setTimeout(()=>I(Date.now()),0),z=()=>{$(()=>{if(o.current&&a.current&&i.current){const I=i.current.getBoundingClientRect();if(I.width>0&&I.height>0){o.current.fit();const V=a.current.cols,B=a.current.rows;x({cols:V,rows:B}),!m.current&&V>0&&B>0&&(m.current=!0,r?.(V,B))}else setTimeout(z,50)}})};z();const H=id.get(e);return H&&H.length>0&&(j.write(H),id.clear(e)),j.onData(I=>{if(window.electronAPI.sendTerminalInput(e,I),I==="\r"||I===`
`){const V=u.current;u.current="",t&&t(V)}else I===""||I==="\b"?u.current=u.current.slice(0,-1):I===""?u.current="":I.charCodeAt(0)>=32&&I.charCodeAt(0)<127&&(u.current+=I)}),j.onResize(({cols:I,rows:V})=>{s&&s(I,V)}),()=>{}},[e,t,s,r]),p.useEffect(()=>{const j=CRe(()=>{if(o.current&&a.current&&i.current){const E=i.current.getBoundingClientRect();if(E.width>0&&E.height>0){o.current.fit();const A=a.current.cols,R=a.current.rows;x({cols:A,rows:R}),!m.current&&A>0&&R>0&&(m.current=!0,r?.(A,R))}}},100),T=i.current;if(T){const E=new ResizeObserver(j);return E.observe(T),()=>E.disconnect()}},[r]);const v=p.useCallback(()=>{o.current&&a.current&&o.current.fit()},[]),y=p.useCallback(j=>{a.current&&a.current.write(j)},[]),w=p.useCallback(j=>{a.current&&a.current.writeln(j)},[]),S=p.useCallback(()=>{a.current&&a.current.focus()},[]),C=p.useCallback(()=>{if(a.current&&l.current)try{const j=l.current.serialize();j&&j.length>0&&id.set(e,j)}catch(j){console.error("[useXterm] Failed to serialize terminal buffer:",j)}},[e]),_=p.useCallback(()=>{d.current||(d.current=!0,C(),a.current&&(a.current.dispose(),a.current=null),l.current&&(l.current.dispose(),l.current=null),o.current=null)},[C]);return{terminalRef:i,xtermRef:a,fitAddonRef:o,fit:v,write:y,writeln:w,focus:S,dispose:_,cols:f.cols,rows:f.rows,dimensionsReady:m.current}}const ARe=10,ERe=100;function TRe({terminalId:e,cwd:t,projectPath:s,cols:r,rows:i,skipCreation:a=!1,isRecreatingRef:o,onCreated:l,onError:u}){const d=p.useRef(!1),m=p.useRef(!1),f=p.useRef(t),[x,v]=p.useState(0),y=p.useRef(0),w=p.useRef(null),S=p.useCallback(()=>ks.getState(),[]),C=p.useCallback(()=>{w.current&&(clearTimeout(w.current),w.current=null)},[]),_=p.useCallback(E=>o?.current&&y.current<ARe?(y.current+=1,C(),w.current=setTimeout(()=>{v(A=>A+1)},ERe),!0):(o?.current&&(o.current=!1),y.current=0,d.current=!1,u?.(E),!1),[o,u,C]);p.useEffect(()=>()=>{C()},[C]),p.useEffect(()=>{f.current!==t&&(m.current&&!d.current&&(m.current=!1),f.current=t)},[t]),p.useEffect(()=>{if(C(),a&&o?.current){_("Terminal recreation failed: dimensions not ready");return}if(a||d.current||m.current)return;y.current=0;const E=S(),A=E.terminals.find(O=>O.id===e),R=A?.status==="running"||A?.status==="claude-active",D=A?.isRestored;o?.current&&A?.status==="exited"&&E.setTerminalStatus(e,"idle"),d.current=!0;const M=()=>{m.current=!0,o?.current&&(o.current=!1),y.current=0,d.current=!1},P=O=>_(O);D&&A?window.electronAPI.restoreTerminalSession({id:A.id,title:A.title,cwd:A.cwd,projectPath:s||"",isClaudeMode:A.isClaudeMode,claudeSessionId:A.claudeSessionId,outputBuffer:"",createdAt:A.createdAt.toISOString(),lastActiveAt:new Date().toISOString(),worktreeConfig:A.worktreeConfig},r,i).then(O=>{if(O.success&&O.data?.success){M();const F=S();F.setTerminalStatus(e,A.isClaudeMode?"claude-active":"running"),F.updateTerminal(e,{isRestored:!1}),l?.()}else P(`Error restoring session: ${O.data?.error||O.error}`)}).catch(O=>{P(O.message)}):window.electronAPI.createTerminal({id:e,cwd:t,cols:r,rows:i,projectPath:s}).then(O=>{O.success?(M(),R||S().setTerminalStatus(e,"running"),l?.()):P(O.error||"Unknown error")}).catch(O=>{P(O.message)})},[e,t,s,r,i,a,x,S,l,u,C,_,o]);const j=p.useCallback(()=>{d.current=!0},[]),T=p.useCallback(()=>{m.current=!1,d.current=!1,v(E=>E+1)},[]);return{isCreated:m.current,prepareForRecreate:j,resetForRecreate:T}}function PRe({terminalId:e,isRecreatingRef:t,onOutput:s,onExit:r,onTitleChange:i,onClaudeSession:a}){const o=p.useRef(s),l=p.useRef(r),u=p.useRef(i),d=p.useRef(a);p.useEffect(()=>{o.current=s},[s]),p.useEffect(()=>{l.current=r},[r]),p.useEffect(()=>{u.current=i},[i]),p.useEffect(()=>{d.current=a},[a]),p.useEffect(()=>window.electronAPI.onTerminalOutput((f,x)=>{f===e&&(id.append(e,x),o.current?.(x))}),[e]),p.useEffect(()=>window.electronAPI.onTerminalExit((f,x)=>{if(f===e){if(t?.current){l.current?.(x);return}const v=ks.getState();v.setTerminalStatus(e,"exited"),v.getTerminal(e)?.isClaudeMode&&v.updateTerminal(e,{isClaudeMode:!1}),l.current?.(x),setTimeout(()=>{const w=ks.getState();w.getTerminal(e)?.status==="exited"&&(window.electronAPI.destroyTerminal(e).catch(()=>{}),w.removeTerminal(e))},2e3)}}),[e]),p.useEffect(()=>window.electronAPI.onTerminalTitleChange((f,x)=>{f===e&&(ks.getState().updateTerminal(e,{title:x}),u.current?.(x))}),[e]),p.useEffect(()=>window.electronAPI.onTerminalWorktreeConfigChange((f,x)=>{f===e&&ks.getState().setWorktreeConfig(e,x)}),[e]),p.useEffect(()=>window.electronAPI.onTerminalClaudeSession((f,x)=>{if(f===e){const v=ks.getState();v.setClaudeSessionId(e,x),v.setClaudeMode(e,!0),console.warn("[Terminal] Captured Claude session ID:",x),d.current?.(x)}}),[e]),p.useEffect(()=>window.electronAPI.onTerminalClaudeBusy((f,x)=>{f===e&&ks.getState().setClaudeBusy(e,x)}),[e]),p.useEffect(()=>window.electronAPI.onTerminalClaudeExit(f=>{if(f===e){const x=ks.getState();if(x.getTerminal(e)?.status==="exited")return;x.updateTerminal(e,{isClaudeMode:!1,isClaudeBusy:void 0,claudeSessionId:void 0,status:"running"}),console.warn("[Terminal] Claude exited, reset mode for terminal:",e)}}),[e]),p.useEffect(()=>window.electronAPI.onTerminalPendingResume((f,x)=>{f===e&&ks.getState().setPendingClaudeResume(e,!0)}),[e])}function RRe({terminalId:e,cwd:t}){const s=p.useRef(""),r=p.useRef(null),i=cs(m=>m.settings.autoNameTerminals),a=ks(m=>m.terminals.find(f=>f.id===e)),o=ks(m=>m.updateTerminal),l=p.useCallback(async()=>{if(!i||a?.isClaudeMode||!s.current.trim())return;const m=s.current.trim(),x=m.toLowerCase().split(/\s+/)[0];if(!(m.length<3||["ls","cd","ll","la","pwd","dir","tree","exit","clear","cls","reset","history","claude","git","npm","yarn","pnpm","node","python","pip","cargo","go","docker","kubectl","make","cmake","brew","apt","yum","pacman","choco","scoop","winget","vim","nvim","nano","code","cursor","cat","head","tail","less","more","grep","find","which","where","echo","env","export","set","unset","alias","source","chmod","chown","mkdir","rmdir","rm","cp","mv","touch","man","help","whoami","hostname","date","time","top","htop","ps"].includes(x)))try{const y=await window.electronAPI.generateTerminalName(m,a?.cwd||t);y.success&&y.data&&(o(e,{title:y.data}),window.electronAPI.setTerminalTitle(e,y.data))}catch(y){console.warn("[Terminal] Auto-naming failed:",y)}},[i,a?.isClaudeMode,a?.cwd,t,e,o]),u=p.useCallback(m=>{s.current=m,r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{l()},1500)},[l]),d=p.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]);return{handleCommandEnter:u,cleanup:d}}function DRe(e){return`'${e.replace(/'/g,"'\\''")}'`}function IRe(e){const t=e.getData("application/json");if(!t)return null;try{const s=JSON.parse(t);if(s.type==="file-reference"&&typeof s.path=="string"&&s.path.length>0)return{type:"file-reference",path:s.path,name:typeof s.name=="string"?s.name:"",isDirectory:typeof s.isDirectory=="boolean"?s.isDirectory:!1}}catch{}return null}function MRe({terminalId:e,sendTerminalInput:t=(s,r)=>window.electronAPI.sendTerminalInput(s,r)}){const[s,r]=p.useState(!1),i=p.useCallback(l=>{l.dataTransfer.types.includes("application/json")&&(l.preventDefault(),l.stopPropagation(),r(!0))},[]),a=p.useCallback(l=>{l.currentTarget.contains(l.relatedTarget)||(l.stopPropagation(),r(!1))},[]),o=p.useCallback(l=>{r(!1);const u=IRe(l.dataTransfer);if(u){l.preventDefault(),l.stopPropagation();const d=DRe(u.path);t(e,d+" ")}},[e,t]);return{isNativeDragOver:s,handleNativeDragOver:i,handleNativeDragLeave:a,handleNativeDrop:o}}const HL=10,UL=3;function LRe({id:e,cwd:t,projectPath:s,isActive:r,onClose:i,onActivate:a,tasks:o=[],onNewTaskClick:l,terminalCount:u=1,dragHandleListeners:d,isDragging:m,isExpanded:f,onToggleExpand:x}){const v=p.useRef(!0),y=p.useRef(!1),w=p.useRef(!1),[S,C]=p.useState(!1),_=ks(ve=>ve.terminals.find(Me=>Me.id===e)),j=ks(ve=>ve.setClaudeMode),T=ks(ve=>ve.updateTerminal),E=ks(ve=>ve.setAssociatedTask),A=ks(ve=>ve.setWorktreeConfig),R=_?.cwd||t,{settings:D}=cs(),{toast:M}=bo(),P=_?.associatedTaskId?o.find(ve=>ve.id===_.associatedTaskId):void 0,{setNodeRef:O,isOver:F}=cy({id:`terminal-${e}`,data:{type:"terminal",terminalId:e}}),{active:$}=f1(),z=$?.data.current?.type==="terminal-panel",{isNativeDragOver:H,handleNativeDragOver:I,handleNativeDragLeave:V,handleNativeDrop:B}=MRe({terminalId:e}),K=F&&!z||H,{handleCommandEnter:L,cleanup:G}=RRe({terminalId:e,cwd:R}),[Y,q]=p.useState(null),Q=p.useCallback((ve,Me)=>{ve>=HL&&Me>=UL&&q({cols:ve,rows:Me})},[]),{terminalRef:se,write:te,writeln:ee,focus:pe,dispose:fe,cols:re,rows:Z}=kRe({terminalId:e,onCommandEnter:L,onResize:(ve,Me)=>{y.current&&window.electronAPI.resizeTerminal(e,ve,Me)},onDimensionsReady:Q}),ie=p.useMemo(()=>Y||(re>=HL&&Z>=UL?{cols:re,rows:Z}:null),[Y,re,Z]),{prepareForRecreate:ce,resetForRecreate:He}=TRe({terminalId:e,cwd:R,projectPath:s,cols:ie?.cols??80,rows:ie?.rows??24,skipCreation:!ie,isRecreatingRef:w,onCreated:()=>{y.current=!0},onError:ve=>{ee(`\r
\x1B[31mError: ${ve}\x1B[0m`)}});PRe({terminalId:e,isRecreatingRef:w,onOutput:ve=>{te(ve)},onExit:ve=>{y.current=!1,ee(`\r
\x1B[90mProcess exited with code ${ve}\x1B[0m`)}}),p.useEffect(()=>{r&&pe()},[r,pe]),p.useEffect(()=>{r&&_?.pendingClaudeResume&&(ks.getState().setPendingClaudeResume(e,!1),window.electronAPI.activateDeferredClaudeResume(e))},[r,e,_?.pendingClaudeResume]),p.useEffect(()=>{const ve=Me=>{r&&((Me.ctrlKey||Me.metaKey)&&Me.key==="w"&&(Me.preventDefault(),Me.stopPropagation(),i()),(Me.ctrlKey||Me.metaKey)&&Me.shiftKey&&Me.key.toLowerCase()==="e"&&(Me.preventDefault(),Me.stopPropagation(),x?.()))};return window.addEventListener("keydown",ve,!0),()=>window.removeEventListener("keydown",ve,!0)},[r,i,x]),p.useEffect(()=>(v.current=!0,()=>{v.current=!1,G(),setTimeout(()=>{v.current||(fe(),y.current=!1)},100)}),[e,fe,G]);const tt=p.useCallback(()=>{j(e,!0),window.electronAPI.invokeClaudeInTerminal(e,R)},[e,R,j]),he=p.useCallback(()=>{a(),pe()},[a,pe]),Ne=p.useCallback(ve=>{T(e,{title:ve}),window.electronAPI.setTerminalTitle(e,ve)},[e,T]),Ve=p.useCallback(ve=>{const Me=o.find(jt=>jt.id===ve);if(!Me)return;E(e,ve),T(e,{title:Me.title}),window.electronAPI.setTerminalTitle(e,Me.title);const nt=`I'm working on: ${Me.title}

Description:
${Me.description}

Please confirm you're ready by saying: I'm ready to work on ${Me.title} - Context is loaded.`;window.electronAPI.sendTerminalInput(e,nt+"\r")},[e,o,E,T]),qe=p.useCallback(()=>{E(e,void 0),T(e,{title:"Claude"}),window.electronAPI.setTerminalTitle(e,"Claude")},[e,E,T]),Ze=p.useCallback(()=>{C(!0)},[]),Ae=p.useCallback(async ve=>{w.current=!0,ce(),A(e,ve),window.electronAPI.setTerminalWorktreeConfig(e,ve),T(e,{title:ve.name,cwd:ve.worktreePath}),window.electronAPI.setTerminalTitle(e,ve.name),y.current&&(await window.electronAPI.destroyTerminal(e),y.current=!1),He()},[e,A,T,ce,He]),De=p.useCallback(async ve=>{w.current=!0,ce(),A(e,ve),window.electronAPI.setTerminalWorktreeConfig(e,ve),T(e,{title:ve.name,cwd:ve.worktreePath}),window.electronAPI.setTerminalTitle(e,ve.name),y.current&&(await window.electronAPI.destroyTerminal(e),y.current=!1),He()},[e,A,T,ce,He]),je=p.useCallback(async()=>{const ve=_?.worktreeConfig?.worktreePath;if(!ve)return;const Me=D.preferredIDE||"vscode";try{await window.electronAPI.worktreeOpenInIDE(ve,Me,D.customIDEPath)}catch(nt){console.error("Failed to open in IDE:",nt),M({title:"Failed to open IDE",description:nt instanceof Error?nt.message:"Could not launch IDE",variant:"destructive"})}},[_?.worktreeConfig?.worktreePath,D.preferredIDE,D.customIDEPath,M]),Ce=o.filter(ve=>ve.status==="backlog"),It=_?.isClaudeBusy,be=_?.isClaudeMode&&It!==void 0;return n.jsxs("div",{ref:O,className:J("flex h-full flex-col rounded-lg border bg-[#0B0B0F] overflow-hidden transition-all relative",r?"border-primary ring-1 ring-primary/20":"border-border",K&&"ring-2 ring-info border-info",be&&It&&"border-red-500/60 ring-1 ring-red-500/20",be&&!It&&"border-green-500/60 ring-1 ring-green-500/20"),onClick:he,onDragOver:I,onDragLeave:V,onDrop:B,children:[K&&n.jsx("div",{className:"absolute inset-0 bg-info/10 z-10 flex items-center justify-center pointer-events-none",children:n.jsxs("div",{className:"flex items-center gap-2 bg-info/90 text-info-foreground px-3 py-2 rounded-md",children:[n.jsx(mre,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:"Drop to insert path"})]})}),n.jsx(eEe,{terminalId:e,title:_?.title||"Terminal",status:_?.status||"idle",isClaudeMode:_?.isClaudeMode||!1,tasks:o,associatedTask:P,onClose:i,onInvokeClaude:tt,onTitleChange:Ne,onTaskSelect:Ve,onClearTask:qe,onNewTaskClick:l,terminalCount:u,worktreeConfig:_?.worktreeConfig,projectPath:s,onCreateWorktree:Ze,onSelectWorktree:De,onOpenInIDE:je,dragHandleListeners:d,isExpanded:f,onToggleExpand:x}),n.jsx("div",{ref:se,className:"flex-1 p-1",style:{minHeight:0}}),s&&n.jsx(tEe,{open:S,onOpenChange:C,terminalId:e,projectPath:s,backlogTasks:Ce,onWorktreeCreated:Ae})]})}function GL({id:e,cwd:t,projectPath:s,isActive:r,onClose:i,onActivate:a,tasks:o,onNewTaskClick:l,terminalCount:u,isExpanded:d,onToggleExpand:m}){const{attributes:f,listeners:x,setNodeRef:v,transform:y,transition:w,isDragging:S}=hy({id:e,data:{type:"terminal-panel",terminalId:e}}),C={transform:Ra.Transform.toString(y),transition:w,zIndex:S?50:void 0};return n.jsx("div",{ref:v,style:C,className:J("h-full",S&&"opacity-50"),...f,children:n.jsx(LRe,{id:e,cwd:t,projectPath:s,isActive:r,onClose:i,onActivate:a,tasks:o,onNewTaskClick:l,terminalCount:u,dragHandleListeners:x,isDragging:S,isExpanded:d,onToggleExpand:m})})}const ORe={hidden:{width:0,opacity:0},visible:{width:288,opacity:1}},FRe={hidden:{x:20,opacity:0},visible:{x:0,opacity:1}};function BRe({projectPath:e}){const{t}=Re("common"),{isOpen:s,close:r,clearCache:i,loadDirectory:a}=ka(),o=()=>{i(),a(e)};return n.jsx(sp,{mode:"wait",children:s&&n.jsx(zn.div,{variants:ORe,initial:"hidden",animate:"visible",exit:"hidden",transition:{width:{duration:.3,ease:[.4,0,.2,1]},opacity:{duration:.2}},className:"h-full bg-card border-l border-border flex flex-col shadow-xl overflow-hidden",style:{minWidth:0},children:n.jsxs(zn.div,{variants:FRe,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.25,delay:.1,ease:[.4,0,.2,1]},className:"flex flex-col h-full w-72",children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-border bg-card/80 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ol,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Project Files"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:o,"aria-label":t("buttons.refresh"),children:n.jsx(We,{className:"h-3.5 w-3.5","aria-hidden":"true"})}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:r,"aria-label":t("buttons.close"),children:n.jsx(Ss,{className:"h-3.5 w-3.5","aria-hidden":"true"})})]})]}),n.jsx("div",{className:"px-3 py-2 bg-muted/30 border-b border-border shrink-0",children:n.jsx("p",{className:"text-[10px] text-muted-foreground whitespace-nowrap",children:"Drag files into a terminal to insert the path"})}),n.jsx(zt,{className:"flex-1",children:n.jsx(PU,{rootPath:e})})]})})})}function zRe({projectPath:e,onNewTaskClick:t,isActive:s=!1}){const r=ks(Q=>Q.terminals),i=p.useMemo(()=>(e?r.filter(se=>se.projectPath===e||!se.projectPath):r).filter(se=>se.status!=="exited"),[r,e]),a=ks(Q=>Q.activeTerminalId),o=ks(Q=>Q.addTerminal),l=ks(Q=>Q.removeTerminal),u=ks(Q=>Q.setActiveTerminal),d=ks(Q=>Q.canAddTerminal),m=ks(Q=>Q.setClaudeMode),f=ks(Q=>Q.reorderTerminals),x=Ks(Q=>Q.tasks),v=ka(Q=>Q.isOpen),y=ka(Q=>Q.toggle),[w,S]=p.useState([]),[C,_]=p.useState(!1),[j,T]=p.useState(!1),[E,A]=p.useState(null);p.useEffect(()=>{if(!e){S([]);return}(async()=>{_(!0);try{const se=await window.electronAPI.getTerminalSessionDates(e);se.success&&se.data&&S(se.data)}catch(se){console.error("Failed to fetch session dates:",se)}finally{_(!1)}})()},[e]);const R=ks(Q=>Q.addRestoredTerminal),D=p.useCallback(async Q=>{if(!(!e||j)){T(!0);try{const se=await window.electronAPI.getTerminalSessionsForDate(Q,e),te=se.success?se.data||[]:[];if(console.warn(`[TerminalGrid] Found ${te.length} sessions to restore from ${Q}`),te.length===0){console.warn("[TerminalGrid] No sessions found for this date"),T(!1);return}for(const pe of i)await window.electronAPI.destroyTerminal(pe.id),l(pe.id);await new Promise(pe=>setTimeout(pe,100));const ee=await window.electronAPI.restoreTerminalSessionsFromDate(Q,e,80,24);if(ee.success&&ee.data){console.warn(`[TerminalGrid] Main process restored ${ee.data.restored} sessions from ${Q}`);for(const fe of ee.data.sessions)if(fe.success){const re=te.find(Z=>Z.id===fe.id);re&&(console.warn(`[TerminalGrid] Adding restored terminal to store: ${re.id}`),R(re))}const pe=await window.electronAPI.getTerminalSessionDates(e);pe.success&&pe.data&&S(pe.data)}}catch(se){console.error("Failed to restore sessions:",se)}finally{T(!1)}}},[e,i,l,R,j]),M=ry(ud(Ah,{activationConstraint:{distance:8}}),ud(Ep,{coordinateGetter:x1})),[P,O]=Vt.useState(null),[F,$]=Vt.useState(null),z=i.find(Q=>Q.id===F),H=p.useCallback(Q=>{window.electronAPI.destroyTerminal(Q),l(Q),E===Q&&A(null)},[l,E]);p.useEffect(()=>{if(!s)return;const Q=se=>{(se.ctrlKey||se.metaKey)&&se.key==="t"&&(se.preventDefault(),d(e)&&o(e,e)),(se.ctrlKey||se.metaKey)&&se.key==="w"&&a&&(se.preventDefault(),H(a))};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[s,o,d,e,a,H]);const I=p.useCallback(()=>{d(e)&&o(e,e)},[o,d,e]),V=p.useCallback(Q=>{A(se=>se===Q?null:Q)},[]),B=p.useCallback(()=>{i.forEach(Q=>{Q.status==="running"&&!Q.isClaudeMode&&(m(Q.id,!0),window.electronAPI.invokeClaudeInTerminal(Q.id,e))})},[i,m,e]),K=p.useCallback(Q=>{const se=Q.active.data.current;se?.type==="file"&&se.path&&se.name!==void 0?O({path:se.path,name:se.name,isDirectory:se.isDirectory??!1}):se?.type==="terminal-panel"&&$(Q.active.id.toString())},[]),L=p.useCallback(Q=>{const{active:se,over:te}=Q,ee=se.data.current;if(O(null),$(null),!te)return;if(ee?.type==="terminal-panel"){const re=se.id.toString();let Z=te.id.toString();Z.startsWith("terminal-")&&(Z=Z.replace("terminal-","")),re!==Z&&i.some(ie=>ie.id===Z)&&f(re,Z);return}const pe=te.id.toString();let fe=null;if(pe.startsWith("terminal-")?fe=pe.replace("terminal-",""):i.some(re=>re.id===pe)&&(fe=pe),fe&&ee?.path){const re=ee.path.includes(" ")?`"${ee.path}"`:ee.path;window.electronAPI.sendTerminalInput(fe,re+" ")}},[f,i]),G=p.useMemo(()=>{const Q=i.length;return Q===0?{rows:0,cols:0}:Q===1?{rows:1,cols:1}:Q===2?{rows:1,cols:2}:Q<=4?{rows:2,cols:2}:Q<=6?{rows:2,cols:3}:Q<=9?{rows:3,cols:3}:{rows:3,cols:4}},[i.length]),Y=p.useMemo(()=>{const Q=[],{cols:se}=G;if(se===0)return Q;for(let te=0;te<i.length;te+=se)Q.push(i.slice(te,te+se));return Q},[i,G]),q=p.useMemo(()=>i.map(Q=>Q.id),[i]);return i.length===0?n.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-6 p-8",children:[n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx("div",{className:"rounded-full bg-card p-4",children:n.jsx($re,{className:"h-8 w-8 text-muted-foreground"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Agent Terminals"}),n.jsxs("p",{className:"mt-1 text-sm text-muted-foreground max-w-md",children:["Spawn multiple terminals to run Claude agents in parallel. Use ",n.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-card border border-border rounded",children:"Ctrl+T"})," to create a new terminal."]})]})]}),n.jsxs(W,{onClick:I,className:"gap-2",children:[n.jsx(fs,{className:"h-4 w-4"}),"New Terminal"]})]}):n.jsx(ly,{sensors:M,collisionDetection:fO,onDragStart:K,onDragEnd:L,children:n.jsxs("div",{className:"flex h-full flex-col",children:[n.jsxs("div",{className:"flex h-10 items-center justify-between border-b border-border bg-card/30 px-3",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:[i.length," / 12 terminals"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[e&&w.length>0&&n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsxs(W,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1.5",disabled:j||C,children:[j?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(M_,{className:"h-3 w-3"}),"History",n.jsx(bt,{className:"h-3 w-3"})]})}),n.jsxs(La,{align:"end",className:"w-56",children:[n.jsx("div",{className:"px-2 py-1.5 text-xs font-medium text-muted-foreground",children:"Restore sessions from..."}),n.jsx(ma,{}),w.map(Q=>n.jsxs(Pn,{onClick:()=>D(Q.date),className:"flex items-center justify-between",children:[n.jsx("span",{children:Q.label}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[Q.sessionCount," session",Q.sessionCount!==1?"s":""]})]},Q.date))]})]}),i.some(Q=>Q.status==="running"&&!Q.isClaudeMode)&&n.jsxs(W,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1.5",onClick:B,children:[n.jsx(Qt,{className:"h-3 w-3"}),"Invoke Claude All"]}),n.jsxs(W,{variant:"outline",size:"sm",className:"h-7 text-xs gap-1.5",onClick:I,disabled:!d(e),children:[n.jsx(fs,{className:"h-3 w-3"}),"New Terminal",n.jsxs("kbd",{className:"ml-1 text-[10px] text-muted-foreground",children:[navigator.platform.includes("Mac")?"":"Ctrl","+T"]})]}),e&&n.jsxs(W,{variant:v?"default":"outline",size:"sm",className:"h-7 text-xs gap-1.5",onClick:y,children:[n.jsx(ol,{className:"h-3 w-3"}),"Files"]})]})]}),n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx("div",{className:J("flex-1 overflow-hidden p-2 transition-all duration-300 ease-out",v&&"pr-0"),children:E?(()=>{const Q=i.find(se=>se.id===E);return Q?n.jsx("div",{className:"h-full p-1",children:n.jsx(GL,{id:Q.id,cwd:Q.cwd||e,projectPath:e,isActive:Q.id===a,onClose:()=>H(Q.id),onActivate:()=>u(Q.id),tasks:x,onNewTaskClick:t,terminalCount:1,isExpanded:!0,onToggleExpand:()=>V(Q.id)})}):null})():n.jsx(uy,{items:q,strategy:g1,children:n.jsx(G4,{orientation:"vertical",className:"h-full",children:Y.map((Q,se)=>n.jsxs(Vt.Fragment,{children:[n.jsx(V4,{id:`row-${se}`,defaultSize:100/Y.length,minSize:15,children:n.jsx(G4,{orientation:"horizontal",className:"h-full",children:Q.map((te,ee)=>n.jsxs(Vt.Fragment,{children:[n.jsx(V4,{id:te.id,defaultSize:100/Q.length,minSize:10,children:n.jsx("div",{className:"h-full p-1",children:n.jsx(GL,{id:te.id,cwd:te.cwd||e,projectPath:e,isActive:te.id===a,onClose:()=>H(te.id),onActivate:()=>u(te.id),tasks:x,onNewTaskClick:t,terminalCount:i.length,isExpanded:!1,onToggleExpand:()=>V(te.id)})})}),ee<Q.length-1&&n.jsx(q4,{className:"w-1 hover:bg-primary/30 transition-colors"})]},te.id))})}),se<Y.length-1&&n.jsx(q4,{className:"h-1 hover:bg-primary/30 transition-colors"})]},se))})})}),e&&n.jsx(BRe,{projectPath:e})]}),n.jsxs(dy,{children:[P&&n.jsxs("div",{className:"flex items-center gap-2 bg-card border border-border rounded-md px-3 py-2 shadow-lg",children:[P.isDirectory?n.jsx(Uf,{className:"h-4 w-4 text-warning"}):n.jsx(i1,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm",children:P.name})]}),z&&n.jsxs("div",{className:"flex items-center gap-2 bg-card border border-primary rounded-md px-3 py-2 shadow-lg",children:[n.jsx(iO,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium",children:z.title||"Terminal"})]})]})]})})}function $Re(){const[e,t]=p.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return p.useEffect(()=>{const s=window.matchMedia("(prefers-reduced-motion: reduce)"),r=i=>{t(i.matches)};return s.addEventListener("change",r),()=>{s.removeEventListener("change",r)}},[]),e}const HRe={analyzing:{label:"Analyzing",description:"Analyzing project structure and codebase...",icon:Nr,color:"bg-amber-500",bgColor:"bg-amber-500/20"},discovering:{label:"Discovering",description:"Discovering target audience and user needs...",icon:Oa,color:"bg-info",bgColor:"bg-info/20"},generating:{label:"Generating",description:"Generating feature roadmap...",icon:Qt,color:"bg-primary",bgColor:"bg-primary/20"},complete:{label:"Complete",description:"Roadmap generation complete!",icon:Xe,color:"bg-success",bgColor:"bg-success/20"},error:{label:"Error",description:"Generation failed",icon:Ke,color:"bg-destructive",bgColor:"bg-destructive/20"}},l_=[{key:"analyzing",label:"Analyze"},{key:"discovering",label:"Discover"},{key:"generating",label:"Generate"}];function URe({currentPhase:e,reducedMotion:t}){const s=a=>{const o=["analyzing","discovering","generating","complete"],l=o.indexOf(e),u=o.indexOf(a);return e==="error"?"error":e==="complete"?"complete":a===e?"active":u<l?"complete":"pending"},r=a=>a!=="active"?{opacity:1}:t?{opacity:1}:{opacity:[1,.6,1]},i=a=>{if(!(a!=="active"||t))return{duration:1.5,repeat:1/0,ease:"easeInOut"}};return n.jsx("div",{className:"flex items-center justify-center gap-1 mt-4",children:l_.map((a,o)=>{const l=s(a.key);return n.jsxs("div",{className:"flex items-center",children:[n.jsxs(zn.div,{className:J("flex items-center gap-1 px-2 py-1 rounded text-xs font-medium",l==="complete"&&"bg-success/10 text-success",l==="active"&&"bg-primary/10 text-primary",l==="error"&&"bg-destructive/10 text-destructive",l==="pending"&&"bg-muted text-muted-foreground"),animate:r(l),transition:i(l),children:[l==="complete"&&n.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),a.label]}),o<l_.length-1&&n.jsx("div",{className:J("w-4 h-px mx-1",s(l_[o+1].key)!=="pending"?"bg-success/50":"bg-border")})]},a.key)})})}function GRe({generationStatus:e,className:t,onStop:s}){const{phase:r,progress:i,message:a,error:o}=e,l=$Re(),[u,d]=p.useState(!1),m=async()=>{if(!(!s||u)){d(!0);try{await s()}catch(T){console.error("Failed to stop generation:",T)}finally{d(!1)}}};if(r==="idle")return null;const f=HRe[r],x=f.icon,v=r!=="complete"&&r!=="error",y=l?{}:{scale:[1,1.1,1],opacity:[1,.8,1]},w=l?{duration:0}:{duration:1.5,repeat:v?1/0:0,ease:"easeInOut"},S=l?{scale:1,opacity:1}:{scale:[1,1.5,1],opacity:[1,.5,1]},C=l?{duration:0}:{duration:1,repeat:1/0,ease:"easeInOut"},_=l?{x:"150%"}:{x:["-100%","400%"]},j=l?{duration:0}:{duration:1.5,repeat:1/0,ease:"easeInOut"};return n.jsxs("div",{className:J("space-y-4 p-6 rounded-xl bg-card border",t),children:[v&&s&&n.jsx("div",{className:"flex justify-end mb-2",children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"destructive",size:"sm",onClick:m,disabled:u,children:[n.jsx(jo,{className:"h-4 w-4 mr-1"}),u?"Stopping...":"Stop"]})}),n.jsx(mt,{children:"Stop generation"})]})}),n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(zn.div,{className:J("p-4 rounded-full",f.bgColor),animate:v?y:{},transition:w,children:n.jsx(x,{className:J("h-8 w-8",f.color.replace("bg-","text-"))})}),v&&n.jsx(zn.div,{className:J("absolute top-0 right-0 h-3 w-3 rounded-full",f.color),animate:S,transition:C})]}),n.jsx(sp,{mode:"wait",children:n.jsxs(zn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-1",children:[n.jsx("h3",{className:"text-lg font-semibold",children:f.label}),n.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),a&&a!==f.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:a})]},r)})]}),v&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Progress"}),n.jsxs("span",{className:"text-xs font-medium",children:[i,"%"]})]}),n.jsx("div",{className:"relative h-2 w-full overflow-hidden rounded-full bg-border",children:i>0?n.jsx(zn.div,{className:J("h-full rounded-full",f.color),initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5,ease:"easeOut"}}):n.jsx(zn.div,{className:J("absolute h-full w-1/3 rounded-full",f.color),animate:_,transition:j})})]}),n.jsx(URe,{currentPhase:r,reducedMotion:l}),n.jsx(sp,{mode:"wait",children:o&&n.jsx(zn.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"p-3 bg-destructive/10 rounded-md",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-destructive flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-destructive",children:o})]})},"error-display")})]})}function VL({open:e,onOpenChange:t,onAccept:s,onDecline:r}){const i=()=>{s(),t(!1)},a=()=>{r(),t(!1)};return n.jsx(Kr,{open:e,onOpenChange:t,children:n.jsxs(Rr,{className:"sm:max-w-[500px]",children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2 text-foreground",children:[n.jsx(gi,{className:"h-5 w-5 text-primary"}),"Enable Competitor Analysis?"]}),n.jsx(Lr,{className:"text-muted-foreground",children:"Enhance your roadmap with insights from competitor products"})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsxs("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"What competitor analysis does:"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Nr,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),n.jsx("span",{children:"Identifies 3-5 main competitors based on your project type"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(wn,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),n.jsx("span",{children:"Searches app stores, forums, and social media for user feedback and pain points"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(gi,{className:"h-4 w-4 mt-0.5 text-primary flex-shrink-0"}),n.jsx("span",{children:"Suggests features that address gaps in competitor products"})]})]})]}),n.jsx("div",{className:"rounded-lg bg-warning/10 border border-warning/30 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-warning flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Web searches will be performed"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This feature will perform web searches to gather competitor information. Your project name and type will be used in search queries. No code or sensitive data is shared."})]})]})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"You can generate a roadmap without competitor analysis if you prefer. The roadmap will still be based on your project structure and best practices."})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{onClick:a,children:"No, Skip Analysis"}),n.jsx(pi,{onClick:i,children:"Yes, Enable Analysis"})]})]})})}function qL({open:e,onOpenChange:t,onUseExisting:s,onRunNew:r,onSkip:i,analysisDate:a}){const o=()=>{s(),t(!1)},l=()=>{r(),t(!1)},u=()=>{i(),t(!1)},d=m=>m?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(m):"recently";return n.jsx(Kr,{open:e,onOpenChange:t,children:n.jsxs(Rr,{className:"sm:max-w-[500px]",children:[n.jsxs(Dr,{children:[n.jsxs(Mr,{className:"flex items-center gap-2 text-foreground",children:[n.jsx(gi,{className:"h-5 w-5 text-primary"}),"Competitor Analysis Options"]}),n.jsxs(Lr,{className:"text-muted-foreground",children:["This project has an existing competitor analysis from ",d(a)]})]}),n.jsxs("div",{className:"py-4 space-y-3",children:[n.jsx("button",{onClick:o,className:"w-full rounded-lg bg-primary/10 border border-primary/30 p-4 text-left hover:bg-primary/20 transition-colors",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ys,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:["Use existing analysis",n.jsx("span",{className:"text-xs text-primary font-normal",children:"(Recommended)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Reuse the competitor insights you already have. Faster and no additional web searches."})]})]})}),n.jsx("button",{onClick:l,className:"w-full rounded-lg bg-muted/50 border border-border p-4 text-left hover:bg-muted transition-colors",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(We,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground",children:"Run new analysis"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Perform fresh web searches to get updated competitor information. Takes longer."})]})]})}),n.jsx("button",{onClick:u,className:"w-full rounded-lg bg-muted/30 border border-border/50 p-4 text-left hover:bg-muted/50 transition-colors",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(wn,{className:"h-5 w-5 text-muted-foreground/60 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Skip competitor analysis"}),n.jsx("p",{className:"text-xs text-muted-foreground/80 mt-1",children:"Generate roadmap without any competitor insights."})]})]})})]}),n.jsx(Ir,{className:"sm:justify-start",children:n.jsx(W,{variant:"ghost",onClick:()=>t(!1),children:"Cancel"})})]})})}function VRe({analysis:e,open:t,onOpenChange:s}){const{t:r}=Re("common");return e?n.jsx($s,{open:t,onOpenChange:s,children:n.jsxs(Bs,{className:"max-w-4xl max-h-[85vh] flex flex-col",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(gi,{className:"h-5 w-5 text-primary"}),"Competitor Analysis Results"]}),n.jsxs(ws,{children:["Analyzed ",e.competitors.length," competitors to identify market gaps and opportunities"]})]}),n.jsx(zt,{className:"flex-1 overflow-auto pr-4",style:{maxHeight:"calc(85vh - 120px)"},children:n.jsxs("div",{className:"space-y-6 pb-4",children:[e.competitors.map(i=>n.jsxs("div",{className:"rounded-lg border border-border p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"text-lg font-semibold",children:i.name}),i.marketPosition&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:i.marketPosition})]}),i.description&&n.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]}),i.url&&n.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline flex items-center gap-1 text-sm ml-4","aria-label":r("accessibility.visitExternalLink",{name:i.name}),children:[n.jsx(Zt,{className:"h-3 w-3","aria-hidden":"true"}),"Visit",n.jsxs("span",{className:"sr-only",children:["(",r("accessibility.opensInNewWindow"),")"]})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-warning"}),"Identified Pain Points (",i.painPoints.length,")"]}),n.jsx("div",{className:"space-y-2",children:i.painPoints.length===0?n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No pain points identified"}):i.painPoints.map(a=>n.jsx("div",{className:"rounded bg-muted/50 p-3 space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(oe,{variant:a.severity==="high"?"destructive":a.severity==="medium"?"default":"secondary",className:"mt-0.5",children:a.severity}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:a.description}),a.source&&n.jsx("div",{className:"mt-2",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Source: ",n.jsx("span",{className:"italic",children:a.source})]})}),a.frequency&&n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Frequency: ",a.frequency]})}),a.opportunity&&n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Opportunity:"," ",n.jsx("span",{className:"font-medium text-foreground",children:a.opportunity})]})})]})]})},a.id))})]})]},i.id)),e.insightsSummary&&n.jsxs("div",{className:"rounded-lg bg-primary/5 border border-primary/20 p-4 space-y-3",children:[n.jsx("h4",{className:"text-sm font-semibold",children:"Market Insights Summary"}),e.insightsSummary.topPainPoints.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Top Pain Points:"}),n.jsx("ul",{className:"text-sm space-y-1",children:e.insightsSummary.topPainPoints.map((i,a)=>n.jsxs("li",{className:"text-muted-foreground",children:[" ",i]},a))})]}),e.insightsSummary.differentiatorOpportunities.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Differentiator Opportunities:"}),n.jsx("ul",{className:"text-sm space-y-1",children:e.insightsSummary.differentiatorOpportunities.map((i,a)=>n.jsxs("li",{className:"text-muted-foreground",children:[" ",i]},a))})]}),e.insightsSummary.marketTrends.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Market Trends:"}),n.jsx("ul",{className:"text-sm space-y-1",children:e.insightsSummary.marketTrends.map((i,a)=>n.jsxs("li",{className:"text-muted-foreground",children:[" ",i]},a))})]})]})]})})]})}):null}function qRe(e){let t=!1;const s=e.features.map(r=>{const i={...r};return r.status==="idea"&&(i.status="under_review",t=!0),r.source||(i.source={provider:"internal"},t=!0),i});return t?(console.log("[Roadmap] Migrated roadmap data to latest schema"),{...e,features:s,updatedAt:new Date}):e}const WL={phase:"idle",progress:0,message:""},qs=Gn(e=>({roadmap:null,competitorAnalysis:null,generationStatus:WL,currentProjectId:null,setRoadmap:t=>e({roadmap:t}),setCompetitorAnalysis:t=>e({competitorAnalysis:t}),setGenerationStatus:t=>e({generationStatus:t}),setCurrentProjectId:t=>e({currentProjectId:t}),updateFeatureStatus:(t,s)=>e(r=>{if(!r.roadmap)return r;const i=r.roadmap.features.map(a=>a.id===t?{...a,status:s}:a);return{roadmap:{...r.roadmap,features:i,updatedAt:new Date}}}),markFeatureDoneBySpecId:t=>e(s=>{if(!s.roadmap)return s;const r=s.roadmap.features.map(i=>i.linkedSpecId===t?{...i,status:"done"}:i);return{roadmap:{...s.roadmap,features:r,updatedAt:new Date}}}),updateFeatureLinkedSpec:(t,s)=>e(r=>{if(!r.roadmap)return r;const i=r.roadmap.features.map(a=>a.id===t?{...a,linkedSpecId:s,status:"in_progress"}:a);return{roadmap:{...r.roadmap,features:i,updatedAt:new Date}}}),deleteFeature:t=>e(s=>{if(!s.roadmap)return s;const r=s.roadmap.features.filter(i=>i.id!==t);return{roadmap:{...s.roadmap,features:r,updatedAt:new Date}}}),clearRoadmap:()=>e({roadmap:null,competitorAnalysis:null,generationStatus:WL,currentProjectId:null}),reorderFeatures:(t,s)=>e(r=>{if(!r.roadmap)return r;const i=s.map(l=>r.roadmap.features.find(u=>u.id===l)).filter(l=>l!==void 0),o=[...r.roadmap.features.filter(l=>l.phaseId!==t),...i];return{roadmap:{...r.roadmap,features:o,updatedAt:new Date}}}),updateFeaturePhase:(t,s)=>e(r=>{if(!r.roadmap)return r;const i=r.roadmap.features.map(a=>a.id===t?{...a,phaseId:s}:a);return{roadmap:{...r.roadmap,features:i,updatedAt:new Date}}}),addFeature:t=>{const s=`feature-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,r={...t,id:s};return e(i=>i.roadmap?{roadmap:{...i.roadmap,features:[...i.roadmap.features,r],updatedAt:new Date}}:i),s}}));async function WRe(e){const t=qs.getState();t.setCurrentProjectId(e);const s=await window.electronAPI.getRoadmapStatus(e);s.success&&s.data?.isRunning?t.setGenerationStatus({phase:"analyzing",progress:0,message:"Roadmap generation in progress..."}):t.setGenerationStatus({phase:"idle",progress:0,message:""});const r=await window.electronAPI.getRoadmap(e);if(r.success&&r.data){const i=qRe(r.data);t.setRoadmap(i),i!==r.data&&window.electronAPI.saveRoadmap(e,i).catch(a=>{console.error("[Roadmap] Failed to save migrated roadmap:",a)}),i.competitorAnalysis?t.setCompetitorAnalysis(i.competitorAnalysis):t.setCompetitorAnalysis(null)}else t.setRoadmap(null),t.setCompetitorAnalysis(null)}function rf(e,t,s){window.DEBUG&&console.log("[Roadmap] Starting generation:",{projectId:e,enableCompetitorAnalysis:t,refreshCompetitorAnalysis:s}),qs.getState().setGenerationStatus({phase:"analyzing",progress:0,message:"Starting roadmap generation..."}),window.electronAPI.generateRoadmap(e,t,s)}function af(e,t,s){window.DEBUG&&console.log("[Roadmap] Starting refresh:",{projectId:e,enableCompetitorAnalysis:t,refreshCompetitorAnalysis:s}),qs.getState().setGenerationStatus({phase:"analyzing",progress:0,message:"Refreshing roadmap..."}),window.electronAPI.refreshRoadmap(e,t,s)}async function KRe(e){const t=qs.getState();window.DEBUG&&console.log("[Roadmap] Stop requested:",{projectId:e}),t.setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"});const s=await window.electronAPI.stopRoadmap(e);return window.DEBUG&&console.log("[Roadmap] Stop result:",{projectId:e,success:s.success}),s.success||console.log("[Roadmap] Process already stopped"),s.success}function YRe(e,t){return e?e.features.filter(s=>s.phaseId===t):[]}function XRe(e){if(!e)return{total:0,byPriority:{},byStatus:{},byComplexity:{}};const t={},s={},r={};return e.features.forEach(i=>{t[i.priority]=(t[i.priority]||0)+1,s[i.status]=(s[i.status]||0)+1,r[i.complexity]=(r[i.complexity]||0)+1}),{total:e.features.length,byPriority:t,byStatus:s,byComplexity:r}}const ZRe=[{value:"low",labelKey:"addFeature.lowComplexity"},{value:"medium",labelKey:"addFeature.mediumComplexity"},{value:"high",labelKey:"addFeature.highComplexity"}],QRe=[{value:"low",labelKey:"addFeature.lowImpact"},{value:"medium",labelKey:"addFeature.mediumImpact"},{value:"high",labelKey:"addFeature.highImpact"}];function JRe({phases:e,open:t,onOpenChange:s,onFeatureAdded:r,defaultPhaseId:i}){const{t:a}=Re("dialogs"),[o,l]=p.useState(""),[u,d]=p.useState(""),[m,f]=p.useState(""),[x,v]=p.useState("should"),[y,w]=p.useState(""),[S,C]=p.useState("medium"),[_,j]=p.useState("medium"),[T,E]=p.useState(!1),[A,R]=p.useState(null),D=qs(F=>F.addFeature);p.useEffect(()=>{t&&(l(""),d(""),f(""),v("should"),w(i||(e.length>0?e[0].id:"")),C("medium"),j("medium"),R(null))},[t,i,e]);const M=async()=>{if(!o.trim()){R(a("addFeature.titleRequired"));return}if(!u.trim()){R(a("addFeature.descriptionRequired"));return}if(!y){R(a("addFeature.phaseRequired"));return}E(!0),R(null);try{const F=D({title:o.trim(),description:u.trim(),rationale:m.trim()||`User-created feature for ${o.trim()}`,priority:x,complexity:S,impact:_,phaseId:y,dependencies:[],status:"under_review",acceptanceCriteria:[],userStories:[],source:{provider:"internal"}}),$=qs.getState().roadmap;if($){const z=await window.electronAPI.saveRoadmap($.projectId,$);if(!z.success)throw new Error(z.error||"Failed to save roadmap")}s(!1),r?.(F)}catch(F){R(F instanceof Error?F.message:a("addFeature.failedToAdd"))}finally{E(!1)}},P=()=>{T||s(!1)},O=o.trim().length>0&&u.trim().length>0&&y!=="";return n.jsx($s,{open:t,onOpenChange:P,children:n.jsxs(Bs,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[n.jsxs(os,{children:[n.jsx(ls,{className:"text-foreground",children:a("addFeature.title")}),n.jsx(ws,{children:a("addFeature.description")})]}),n.jsxs("div",{className:"space-y-5 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"add-feature-title",className:"text-sm font-medium text-foreground",children:[a("addFeature.featureTitle")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Oe,{id:"add-feature-title",placeholder:a("addFeature.featureTitlePlaceholder"),value:o,onChange:F=>l(F.target.value),disabled:T,"aria-required":"true"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"add-feature-description",className:"text-sm font-medium text-foreground",children:[a("addFeature.featureDescription")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(go,{id:"add-feature-description",placeholder:a("addFeature.featureDescriptionPlaceholder"),value:u,onChange:F=>d(F.target.value),rows:3,disabled:T,"aria-required":"true"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"add-feature-rationale",className:"text-sm font-medium text-foreground",children:[a("addFeature.rationale")," ",n.jsxs("span",{className:"text-muted-foreground font-normal",children:["(",a("addFeature.optional"),")"]})]}),n.jsx(go,{id:"add-feature-rationale",placeholder:a("addFeature.rationalePlaceholder"),value:m,onChange:F=>f(F.target.value),rows:2,disabled:T})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"add-feature-phase",className:"text-sm font-medium text-foreground",children:[a("addFeature.phase")," ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs(_t,{value:y,onValueChange:w,disabled:T,children:[n.jsx(yt,{id:"add-feature-phase","aria-required":"true",children:n.jsx(Nt,{placeholder:a("addFeature.selectPhase")})}),n.jsx(wt,{children:e.map(F=>n.jsxs(et,{value:F.id,children:[F.order,". ",F.name]},F.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"add-feature-priority",className:"text-sm font-medium text-foreground",children:a("addFeature.priority")}),n.jsxs(_t,{value:x,onValueChange:F=>v(F),disabled:T,children:[n.jsx(yt,{id:"add-feature-priority",children:n.jsx(Nt,{placeholder:a("addFeature.selectPriority")})}),n.jsx(wt,{children:Object.entries(gp).map(([F,$])=>n.jsx(et,{value:F,children:$},F))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"add-feature-complexity",className:"text-sm font-medium text-foreground",children:a("addFeature.complexity")}),n.jsxs(_t,{value:S,onValueChange:F=>C(F),disabled:T,children:[n.jsx(yt,{id:"add-feature-complexity",children:n.jsx(Nt,{placeholder:a("addFeature.selectComplexity")})}),n.jsx(wt,{children:ZRe.map(({value:F,labelKey:$})=>n.jsx(et,{value:F,children:a($)},F))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"add-feature-impact",className:"text-sm font-medium text-foreground",children:a("addFeature.impact")}),n.jsxs(_t,{value:_,onValueChange:F=>j(F),disabled:T,children:[n.jsx(yt,{id:"add-feature-impact",children:n.jsx(Nt,{placeholder:a("addFeature.selectImpact")})}),n.jsx(wt,{children:QRe.map(({value:F,labelKey:$})=>n.jsx(et,{value:F,children:a($)},F))})]})]})]}),A&&n.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",role:"alert",children:[n.jsx(Ss,{className:"h-4 w-4 mt-0.5 shrink-0"}),n.jsx("span",{children:A})]})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:P,disabled:T,children:a("addFeature.cancel")}),n.jsx(W,{onClick:M,disabled:T||!O,children:T?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),a("addFeature.adding")]}):a("addFeature.addFeature")})]})]})})}function eDe({roadmap:e,competitorAnalysis:t,onAddFeature:s,onRefresh:r,onViewCompetitorAnalysis:i}){const{t:a}=Re("common"),o=XRe(e);return n.jsxs("div",{className:"shrink-0 border-b border-border p-4 bg-card/50",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ah,{className:"h-5 w-5 text-primary"}),n.jsx("h2",{className:"text-lg font-semibold",children:e.projectName}),n.jsx(oe,{variant:"outline",children:e.status}),t&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(oe,{variant:"secondary",className:"gap-1 cursor-pointer hover:bg-secondary/80 transition-colors",onClick:i,children:[n.jsx(gi,{className:"h-3 w-3"}),"Competitor Analysis"]})}),n.jsx(mt,{className:"max-w-md",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-semibold",children:"Click to view detailed analysis"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Analyzed ",t.competitors.length," competitors with "," ",t.competitors.reduce((l,u)=>l+u.painPoints.length,0)," pain points identified"]})]})})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-xl",children:e.vision})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"outline",size:"sm",onClick:s,children:[n.jsx(fs,{className:"h-4 w-4 mr-1"}),"Add Feature"]})}),n.jsx(mt,{children:"Add a new feature to the roadmap"})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"outline",size:"icon",onClick:r,"aria-label":a("accessibility.regenerateRoadmapAriaLabel"),children:n.jsx(We,{className:"h-4 w-4"})})}),n.jsx(mt,{children:"Regenerate Roadmap"})]})]})]}),e.targetAudience&&n.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-muted-foreground",children:"Target:"}),n.jsx("span",{className:"font-medium",children:e.targetAudience.primary})]}),e.targetAudience.secondary?.length>0&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs("div",{className:"text-muted-foreground cursor-help underline decoration-dotted",children:["+",e.targetAudience.secondary.length," more personas"]})}),n.jsx(mt,{className:"max-w-md",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-semibold mb-2",children:"Secondary Personas:"}),e.targetAudience.secondary.map(l=>n.jsxs("div",{className:"text-sm",children:[" ",l]},l))]})})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tne,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold",children:o.total}),n.jsx("span",{className:"text-muted-foreground",children:" features"})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-sm",children:[n.jsx("span",{className:"font-semibold",children:e.phases.length}),n.jsx("span",{className:"text-muted-foreground",children:" phases"})]})}),n.jsx("div",{className:"flex items-center gap-1",children:Object.entries(o.byPriority).map(([l,u])=>n.jsxs(oe,{variant:"outline",className:`text-xs ${xh[l]}`,children:[u," ",l]},l))})]})]})}function tDe({onGenerate:e}){return n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs(Le,{className:"w-full max-w-lg p-8 text-center",children:[n.jsx(o1,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Roadmap Yet"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate an AI-powered roadmap that understands your project's target audience and creates a strategic feature plan."}),n.jsxs(W,{onClick:e,size:"lg",children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Generate Roadmap"]})]})})}function sDe({phase:e,features:t,isFirst:s,onFeatureSelect:r,onConvertToSpec:i,onGoToTask:a}){const o=t.filter(u=>u.status==="done").length,l=t.length>0?o/t.length*100:0;return n.jsxs(Le,{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${e.status==="completed"?"bg-success/10 text-success":e.status==="in_progress"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:e.status==="completed"?n.jsx(Xe,{className:"h-4 w-4"}):n.jsx("span",{className:"text-sm font-semibold",children:e.order})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:e.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]})]}),n.jsx(oe,{variant:e.status==="completed"?"default":"outline",children:e.status})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-muted-foreground",children:"Progress"}),n.jsxs("span",{children:[o,"/",t.length," features"]})]}),n.jsx(xi,{value:l,className:"h-2"})]}),e.milestones.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"Milestones"}),n.jsx("div",{className:"space-y-2",children:e.milestones.map(u=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[u.status==="achieved"?n.jsx(Xe,{className:"h-4 w-4 text-success"}):n.jsx(yo,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:u.status==="achieved"?"line-through text-muted-foreground":"",children:u.title})]},u.id))})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-medium mb-2",children:["Features (",t.length,")"]}),n.jsxs("div",{className:"grid gap-2",children:[t.slice(0,5).map(u=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted/50 hover:bg-muted cursor-pointer transition-colors",onClick:()=>r(u),children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx(oe,{variant:"outline",className:`text-xs ${xh[u.priority]}`,children:u.priority}),n.jsx("span",{className:"text-sm truncate",children:u.title}),u.competitorInsightIds&&u.competitorInsightIds.length>0&&n.jsx(gi,{className:"h-3 w-3 text-primary flex-shrink-0"})]}),u.status==="done"?n.jsx(Xe,{className:"h-4 w-4 text-success flex-shrink-0"}):u.linkedSpecId?n.jsxs(W,{variant:"ghost",size:"sm",className:"h-6 px-2",onClick:d=>{d.stopPropagation(),a(u.linkedSpecId)},children:[n.jsx(Zt,{className:"h-3 w-3 mr-1"}),"View Task"]}):n.jsxs(W,{variant:"ghost",size:"sm",className:"h-6 px-2 flex-shrink-0",onClick:d=>{d.stopPropagation(),i(u)},children:[n.jsx(Zr,{className:"h-3 w-3 mr-1"}),"Build"]})]},u.id)),t.length>5&&n.jsxs("div",{className:"text-sm text-muted-foreground text-center py-1",children:["+",t.length-5," more features"]})]})]})]})}function nDe({feature:e,onClick:t,onConvertToSpec:s,onGoToTask:r,hasCompetitorInsight:i=!1}){return n.jsx(Le,{className:"p-4 hover:bg-muted/50 cursor-pointer transition-colors",onClick:t,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:xh[e.priority],children:gp[e.priority]}),n.jsx(oe,{variant:"outline",className:`text-xs ${Of[e.complexity]}`,children:e.complexity}),n.jsxs(oe,{variant:"outline",className:`text-xs ${Ib[e.impact]}`,children:[e.impact," impact"]}),i&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(oe,{variant:"outline",className:"text-xs text-primary border-primary/50",children:[n.jsx(gi,{className:"h-3 w-3 mr-1"}),"Competitor Insight"]})}),n.jsx(mt,{children:"This feature addresses competitor pain points"})]})]}),n.jsx("h3",{className:"font-medium",children:e.title}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),e.linkedSpecId?n.jsxs(W,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),r(e.linkedSpecId)},children:[n.jsx(Zt,{className:"h-3 w-3 mr-1"}),"Go to Task"]}):e.status!=="done"&&n.jsxs(W,{variant:"outline",size:"sm",onClick:a=>{a.stopPropagation(),s(e)},children:[n.jsx(Zr,{className:"h-3 w-3 mr-1"}),"Build"]})]})})}function rDe({feature:e,roadmap:t,onClick:s,onConvertToSpec:r,onGoToTask:i}){const{attributes:a,listeners:o,setNodeRef:l,transform:u,transition:d,isDragging:m,isOver:f}=hy({id:e.id}),x={transform:Ra.Transform.toString(u),transition:d,zIndex:m?50:void 0},v=!!e.competitorInsightIds&&e.competitorInsightIds.length>0,y=t?.phases.find(S=>S.id===e.phaseId)?.name,w=e.source?.provider&&e.source.provider!=="internal";return n.jsx("div",{ref:l,style:x,className:J("touch-none transition-all duration-200",m&&"dragging-placeholder opacity-40 scale-[0.98]",f&&!m&&"ring-2 ring-primary/30 ring-offset-2 ring-offset-background rounded-xl"),...a,...o,children:n.jsxs(Le,{className:"p-3 hover:bg-muted/50 cursor-pointer transition-colors",onClick:s,children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",xh[e.priority]),children:gp[e.priority]}),y&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-muted-foreground border-muted-foreground/30",children:[n.jsx(_f,{className:"h-2.5 w-2.5 mr-0.5"}),y.length>12?`${y.slice(0,12)}...`:y]})}),n.jsxs(mt,{children:["Phase: ",y]})]}),v&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-primary border-primary/50",children:n.jsx(gi,{className:"h-2.5 w-2.5"})})}),n.jsx(mt,{children:"This feature addresses competitor pain points"})]})]}),n.jsx("h3",{className:"font-medium text-sm leading-snug line-clamp-2",children:e.title})]}),n.jsx("div",{className:"shrink-0",children:e.linkedSpecId?n.jsxs(W,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:S=>{S.stopPropagation(),i?.(e.linkedSpecId)},children:[n.jsx(Zt,{className:"h-3 w-3 mr-1"}),"Task"]}):e.status!=="done"&&r&&n.jsxs(W,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:S=>{S.stopPropagation(),r(e)},children:[n.jsx(Zr,{className:"h-3 w-3 mr-1"}),"Build"]})})]}),n.jsx("p",{className:"mt-1.5 text-xs text-muted-foreground line-clamp-2",children:e.description}),n.jsxs("div",{className:"mt-2 flex items-center gap-1.5 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",Of[e.complexity]),children:e.complexity}),n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0",Ib[e.impact]),children:e.impact}),e.votes!==void 0&&e.votes>0&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-muted-foreground",children:[n.jsx(cae,{className:"h-2.5 w-2.5 mr-0.5"}),e.votes]})}),n.jsxs(mt,{children:[e.votes," votes from user feedback"]})]}),w&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0 text-orange-500 border-orange-500/30",children:e.source?.provider==="canny"?"Canny":"External"})}),n.jsxs(mt,{children:["Imported from ",e.source?.provider]})]})]})]})})}function iDe(e){switch(e){case"Eye":return n.jsx(Ws,{className:"h-3.5 w-3.5"});case"Calendar":return n.jsx(Y3,{className:"h-3.5 w-3.5"});case"Play":return n.jsx(Zr,{className:"h-3.5 w-3.5"});case"Check":return n.jsx(Pt,{className:"h-3.5 w-3.5"});default:return null}}function aDe({column:e,features:t,roadmap:s,onFeatureClick:r,onConvertToSpec:i,onGoToTask:a,isOver:o}){const{setNodeRef:l}=cy({id:e.id}),u=t.map(d=>d.id);return n.jsxs("div",{ref:l,className:J("flex min-w-80 max-w-[32rem] flex-1 flex-col rounded-xl border border-white/5 bg-linear-to-b from-secondary/30 to-transparent backdrop-blur-sm transition-all duration-200",e.color,"border-t-2",o&&"drop-zone-highlight"),children:[n.jsx("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx("div",{className:J("w-6 h-6 rounded-full flex items-center justify-center",e.id==="done"?"bg-success/10 text-success":e.id==="in_progress"?"bg-primary/10 text-primary":e.id==="planned"?"bg-info/10 text-info":"bg-muted text-muted-foreground"),children:iDe(e.icon)}),n.jsx("h2",{className:"font-semibold text-sm text-foreground",children:e.label}),n.jsx("span",{className:"column-count-badge",children:t.length})]})}),n.jsx("div",{className:"flex-1 min-h-0",children:n.jsx(zt,{className:"h-full px-3 pb-3 pt-2",children:n.jsx(uy,{items:u,strategy:TO,children:n.jsx("div",{className:"space-y-3 min-h-[120px]",children:t.length===0?n.jsx("div",{className:J("empty-column-dropzone flex flex-col items-center justify-center py-6",o&&"active"),children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/20 flex items-center justify-center mb-2",children:n.jsx(fs,{className:"h-4 w-4 text-primary"})}),n.jsx("span",{className:"text-sm font-medium text-primary",children:"Drop here"})]}):n.jsxs(n.Fragment,{children:[n.jsx(L_,{className:"h-6 w-6 text-muted-foreground/50"}),n.jsx("span",{className:"mt-2 text-sm font-medium text-muted-foreground/70",children:"No features"}),n.jsx("span",{className:"mt-0.5 text-xs text-muted-foreground/50",children:"Drag features here"})]})}):t.map(d=>n.jsx(rDe,{feature:d,roadmap:s,onClick:()=>r(d),onConvertToSpec:i,onGoToTask:a},d.id))})})})})]})}function oDe({roadmap:e,onFeatureClick:t,onConvertToSpec:s,onGoToTask:r,onSave:i}){const[a,o]=p.useState(null),[l,u]=p.useState(null),d=qs(C=>C.updateFeatureStatus),m=ry(ud(Ah,{activationConstraint:{distance:8}}),ud(Ep,{coordinateGetter:x1})),f=p.useMemo(()=>{const C={};return fx.forEach(_=>{C[_.id]=e.features.filter(j=>j.status===_.id)}),C},[e.features]),x=p.useMemo(()=>fx.map(C=>C.id),[]),v=C=>{const{active:_}=C,j=e.features.find(T=>T.id===_.id);j&&o(j)},y=C=>{const{over:_}=C;if(!_){u(null);return}const j=_.id;if(x.includes(j)){u(j);return}const T=e.features.find(E=>E.id===j);T&&u(T.status)},w=C=>{const{active:_,over:j}=C;if(o(null),u(null),!j)return;const T=_.id,E=j.id,A=e.features.find(M=>M.id===T);if(!A)return;let R;if(x.includes(E))R=E;else{const M=e.features.find(P=>P.id===E);if(!M)return;R=M.status}A.status!==R&&(d(T,R),i?.())},S=C=>fx.find(j=>j.id===C.status)?.label||"Unknown Status";return n.jsx("div",{className:"flex h-full flex-col",children:n.jsxs(ly,{sensors:m,collisionDetection:d1,onDragStart:v,onDragOver:y,onDragEnd:w,children:[n.jsx("div",{className:"flex flex-1 gap-4 overflow-x-auto p-6",children:fx.map(C=>n.jsx(aDe,{column:C,features:f[C.id]||[],roadmap:e,onFeatureClick:t,onConvertToSpec:s,onGoToTask:r,isOver:l===C.id},C.id))}),n.jsx(dy,{children:a?n.jsx("div",{className:"drag-overlay-card",children:n.jsxs(Le,{className:"p-4 w-80 shadow-2xl",children:[n.jsx("div",{className:"flex items-center gap-2 mb-1",children:n.jsx(oe,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:S(a)})}),n.jsx("div",{className:"font-medium",children:a.title}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:a.description})]})}):null})]})})}function lDe(e,t){if(!t||!e.competitorInsightIds||e.competitorInsightIds.length===0)return[];const s=[];for(const r of t.competitors)for(const i of r.painPoints)e.competitorInsightIds.includes(i.id)&&s.push(i);return s}function KL(e){return!!e.competitorInsightIds&&e.competitorInsightIds.length>0}function cDe({roadmap:e,activeTab:t,onTabChange:s,onFeatureSelect:r,onConvertToSpec:i,onGoToTask:a,onSave:o}){return n.jsxs(Wy,{value:t,onValueChange:s,className:"h-full flex flex-col",children:[n.jsxs(qp,{className:"shrink-0 mx-4 mt-4",children:[n.jsx(wr,{value:"kanban",children:"Kanban"}),n.jsx(wr,{value:"phases",children:"Phases"}),n.jsx(wr,{value:"features",children:"All Features"}),n.jsx(wr,{value:"priorities",children:"By Priority"})]}),n.jsx(Ii,{value:"kanban",className:"flex-1 overflow-hidden",children:n.jsx(oDe,{roadmap:e,onFeatureClick:r,onConvertToSpec:i,onGoToTask:a,onSave:o},e.updatedAt?.toString())}),n.jsx(Ii,{value:"phases",className:"flex-1 overflow-auto p-4",children:n.jsx("div",{className:"space-y-6",children:e.phases.map((l,u)=>n.jsx(sDe,{phase:l,features:YRe(e,l.id),isFirst:u===0,onFeatureSelect:r,onConvertToSpec:i,onGoToTask:a},l.id))})}),n.jsx(Ii,{value:"features",className:"flex-1 overflow-auto p-4",children:n.jsx("div",{className:"grid gap-3",children:e.features.map(l=>n.jsx(nDe,{feature:l,onClick:()=>r(l),onConvertToSpec:i,onGoToTask:a,hasCompetitorInsight:KL(l)},l.id))})}),n.jsx(Ii,{value:"priorities",className:"flex-1 overflow-auto p-4",children:n.jsx("div",{className:"grid grid-cols-2 gap-4",children:["must","should","could","wont"].map(l=>{const u=e.features.filter(d=>d.priority===l);return n.jsxs(Le,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(oe,{variant:"outline",className:xh[l],children:gp[l]}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:[u.length," features"]})]}),n.jsx("div",{className:"space-y-2",children:u.map(d=>n.jsxs("div",{className:"p-2 rounded-md bg-muted/50 hover:bg-muted cursor-pointer transition-colors",onClick:()=>r(d),children:[n.jsx("div",{className:"font-medium text-sm",children:d.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:`text-xs ${Of[d.complexity]}`,children:d.complexity}),n.jsxs(oe,{variant:"outline",className:`text-xs ${Ib[d.impact]}`,children:[d.impact," impact"]}),KL(d)&&n.jsxs(oe,{variant:"outline",className:"text-xs text-primary border-primary/50",children:[n.jsx(gi,{className:"h-3 w-3 mr-1"}),"Insight"]})]})]},d.id))})]},l)})})})]})}function dDe({feature:e,onClose:t,onConvertToSpec:s,onGoToTask:r,onDelete:i,competitorInsights:a=[]}){const{t:o}=Re("common"),[l,u]=p.useState(!1),d=()=>{i&&(i(e.id),t())};return n.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-card border-l border-border shadow-lg flex flex-col z-50",children:[n.jsx("div",{className:"shrink-0 p-4 border-b border-border electron-no-drag",children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:xh[e.priority],children:gp[e.priority]}),n.jsx(oe,{variant:"outline",className:`${Of[e.complexity]}`,children:e.complexity})]}),n.jsx("h2",{className:"font-semibold truncate",children:e.title})]}),n.jsxs("div",{className:"flex items-center gap-1 shrink-0 relative z-10 pointer-events-auto",children:[n.jsx(W,{type:"button",variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:m=>{m.stopPropagation(),u(!0)},"aria-label":o("accessibility.deleteFeatureAriaLabel"),children:n.jsx(or,{className:"h-4 w-4"})}),n.jsx(W,{type:"button",variant:"ghost",size:"icon",onClick:t,"aria-label":o("accessibility.closeFeatureDetailsAriaLabel"),children:n.jsx(Xt,{className:"h-4 w-4"})})]})]})}),n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(zi,{className:"h-4 w-4"}),"Rationale"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.rationale})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${Of[e.complexity]}`,children:e.complexity}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Complexity"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${Ib[e.impact]}`,children:e.impact}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Impact"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:"text-lg font-semibold",children:e.dependencies.length}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Dependencies"})]})]}),e.userStories.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Oa,{className:"h-4 w-4"}),"User Stories"]}),n.jsx("div",{className:"space-y-2",children:e.userStories.map((m,f)=>n.jsxs("div",{className:"text-sm p-2 bg-muted/50 rounded-md italic",children:['"',m,'"']},f))})]}),e.acceptanceCriteria.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Xe,{className:"h-4 w-4"}),"Acceptance Criteria"]}),n.jsx("ul",{className:"space-y-1",children:e.acceptanceCriteria.map((m,f)=>n.jsxs("li",{className:"text-sm flex items-start gap-2",children:[n.jsx(yo,{className:"h-3 w-3 mt-1.5 shrink-0"}),n.jsx("span",{children:m})]},f))})]}),e.dependencies.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(n1,{className:"h-4 w-4"}),"Dependencies"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.dependencies.map(m=>n.jsx(oe,{variant:"outline",className:"text-xs",children:m},m))})]}),a.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4 text-primary"}),"Addresses Competitor Pain Points"]}),n.jsx("div",{className:"space-y-2",children:a.map(m=>n.jsxs("div",{className:"p-2 bg-primary/5 border border-primary/20 rounded-md",children:[n.jsx("p",{className:"text-sm text-foreground",children:m.description}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(oe,{variant:"outline",className:"text-xs",children:m.source}),n.jsxs(oe,{variant:"outline",className:`text-xs ${m.severity==="high"?"text-red-500 border-red-500/50":m.severity==="medium"?"text-yellow-500 border-yellow-500/50":"text-green-500 border-green-500/50"}`,children:[m.severity," severity"]})]})]},m.id))})]})]})}),e.linkedSpecId?n.jsx("div",{className:"shrink-0 p-4 border-t border-border",children:n.jsxs(W,{className:"w-full",onClick:()=>r(e.linkedSpecId),children:[n.jsx(Zt,{className:"h-4 w-4 mr-2"}),"Go to Task"]})}):e.status!=="done"&&n.jsx("div",{className:"shrink-0 p-4 border-t border-border",children:n.jsxs(W,{className:"w-full",onClick:()=>s(e),children:[n.jsx(vi,{className:"h-4 w-4 mr-2"}),"Convert to Auto-Build Task"]})}),l&&n.jsx("div",{className:"absolute inset-0 bg-background/95 flex items-center justify-center p-6 z-10",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-destructive/10 flex items-center justify-center mx-auto",children:n.jsx(or,{className:"h-6 w-6 text-destructive"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Delete Feature?"}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:['This will permanently remove "',e.title,'" from your roadmap.']})]}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsx(W,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),n.jsx(W,{variant:"destructive",onClick:d,children:"Delete"})]})]})})]})}function uDe(e){const t=qs(i=>i.roadmap),s=qs(i=>i.competitorAnalysis),r=qs(i=>i.generationStatus);return p.useEffect(()=>{WRe(e)},[e]),{roadmap:t,competitorAnalysis:s,generationStatus:r}}function hDe(){const e=qs(r=>r.updateFeatureLinkedSpec),t=Ks(r=>r.addTask);return{convertFeatureToSpec:async(r,i,a,o)=>{const l=await window.electronAPI.convertFeatureToSpec(r,i.id);l.success&&l.data&&(t(l.data),e(i.id,l.data.specId),a?.id===i.id&&o({...i,linkedSpecId:l.data.specId,status:"in_progress"}))}}}function mDe(e){return{saveRoadmap:async()=>{const s=qs.getState().roadmap;if(s)try{await window.electronAPI.saveRoadmap(e,s)}catch(r){console.error("Failed to save roadmap:",r)}}}}function fDe(e){const t=qs(r=>r.deleteFeature);return{deleteFeature:async r=>{t(r);const i=qs.getState().roadmap;if(i)try{await window.electronAPI.saveRoadmap(e,i)}catch(a){console.error("Failed to save roadmap after delete:",a)}}}}function pDe(e){const t=qs(C=>C.competitorAnalysis),[s,r]=p.useState(null),[i,a]=p.useState(!1),[o,l]=p.useState(!1),u=!!t,d=()=>{r("generate"),u?l(!0):a(!0)},m=()=>{r("refresh"),u?l(!0):a(!0)},f=()=>{s==="generate"?rf(e,!0):s==="refresh"&&af(e,!0),r(null)},x=()=>{s==="generate"?rf(e,!1):s==="refresh"&&af(e,!1),r(null)},v=()=>{s==="generate"?rf(e,!0,!1):s==="refresh"&&af(e,!0,!1),r(null)},y=()=>{s==="generate"?rf(e,!0,!0):s==="refresh"&&af(e,!0,!0),r(null)},w=()=>{s==="generate"?rf(e,!1):s==="refresh"&&af(e,!1),r(null)},S=async()=>{await KRe(e)};return{pendingAction:s,hasExistingAnalysis:u,competitorAnalysisDate:t?.createdAt,showExistingAnalysisDialog:o,setShowExistingAnalysisDialog:l,handleUseExistingAnalysis:v,handleRunNewAnalysis:y,handleSkipAnalysis:w,showCompetitorDialog:i,setShowCompetitorDialog:a,handleGenerate:d,handleRefresh:m,handleCompetitorDialogAccept:f,handleCompetitorDialogDecline:x,handleStop:S}}function gDe({projectId:e,onGoToTask:t}){const[s,r]=p.useState(null),[i,a]=p.useState("kanban"),[o,l]=p.useState(!1),[u,d]=p.useState(!1),{roadmap:m,competitorAnalysis:f,generationStatus:x}=uDe(e),{convertFeatureToSpec:v}=hDe(),{saveRoadmap:y}=mDe(e),{deleteFeature:w}=fDe(e),{competitorAnalysisDate:S,showExistingAnalysisDialog:C,setShowExistingAnalysisDialog:_,handleUseExistingAnalysis:j,handleRunNewAnalysis:T,handleSkipAnalysis:E,showCompetitorDialog:A,setShowCompetitorDialog:R,handleGenerate:D,handleRefresh:M,handleCompetitorDialogAccept:P,handleCompetitorDialogDecline:O,handleStop:F}=pDe(e),$=async H=>{await v(e,H,s,r)},z=H=>{t&&t(H)};return x.phase!=="idle"&&x.phase!=="complete"?n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsx(GRe,{generationStatus:x,className:"w-full max-w-md",onStop:F})}):m?n.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[n.jsx(eDe,{roadmap:m,competitorAnalysis:f,onAddFeature:()=>l(!0),onRefresh:M,onViewCompetitorAnalysis:()=>d(!0)}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsx(cDe,{roadmap:m,activeTab:i,onTabChange:a,onFeatureSelect:r,onConvertToSpec:$,onGoToTask:z,onSave:y})}),s&&n.jsx(dDe,{feature:s,onClose:()=>r(null),onConvertToSpec:$,onGoToTask:z,onDelete:w,competitorInsights:lDe(s,f)}),n.jsx(VL,{open:A,onOpenChange:R,onAccept:P,onDecline:O}),n.jsx(qL,{open:C,onOpenChange:_,onUseExisting:j,onRunNew:T,onSkip:E,analysisDate:S}),n.jsx(VRe,{analysis:f,open:u,onOpenChange:d}),n.jsx(JRe,{phases:m.phases,open:o,onOpenChange:l})]}):n.jsxs(n.Fragment,{children:[n.jsx(tDe,{onGenerate:D}),n.jsx(VL,{open:A,onOpenChange:R,onAccept:P,onDecline:O}),n.jsx(qL,{open:C,onOpenChange:_,onUseExisting:j,onRunNew:T,onSkip:E,analysisDate:S})]})}const lw=Gn(e=>({projectIndex:null,indexLoading:!1,indexError:null,memoryStatus:null,memoryState:null,memoryLoading:!1,memoryError:null,recentMemories:[],memoriesLoading:!1,searchResults:[],searchLoading:!1,searchQuery:"",setProjectIndex:t=>e({projectIndex:t}),setIndexLoading:t=>e({indexLoading:t}),setIndexError:t=>e({indexError:t}),setMemoryStatus:t=>e({memoryStatus:t}),setMemoryState:t=>e({memoryState:t}),setMemoryLoading:t=>e({memoryLoading:t}),setMemoryError:t=>e({memoryError:t}),setRecentMemories:t=>e({recentMemories:t}),setMemoriesLoading:t=>e({memoriesLoading:t}),setSearchResults:t=>e({searchResults:t}),setSearchLoading:t=>e({searchLoading:t}),setSearchQuery:t=>e({searchQuery:t}),clearAll:()=>e({projectIndex:null,indexLoading:!1,indexError:null,memoryStatus:null,memoryState:null,memoryLoading:!1,memoryError:null,recentMemories:[],memoriesLoading:!1,searchResults:[],searchLoading:!1,searchQuery:""})}));async function xDe(e){const t=lw.getState();t.setIndexLoading(!0),t.setMemoryLoading(!0),t.setIndexError(null),t.setMemoryError(null);try{const s=await window.electronAPI.getProjectContext(e);s.success&&s.data?(t.setProjectIndex(s.data.projectIndex),t.setMemoryStatus(s.data.memoryStatus),t.setMemoryState(s.data.memoryState),t.setRecentMemories(s.data.recentMemories||[])):t.setIndexError(s.error||"Failed to load project context")}catch(s){t.setIndexError(s instanceof Error?s.message:"Unknown error")}finally{t.setIndexLoading(!1),t.setMemoryLoading(!1)}}async function vDe(e){const t=lw.getState();t.setIndexLoading(!0),t.setIndexError(null);try{const s=await window.electronAPI.refreshProjectIndex(e);s.success&&s.data?t.setProjectIndex(s.data):t.setIndexError(s.error||"Failed to refresh project index")}catch(s){t.setIndexError(s instanceof Error?s.message:"Unknown error")}finally{t.setIndexLoading(!1)}}async function bDe(e,t){const s=lw.getState();if(s.setSearchQuery(t),!t.trim()){s.setSearchResults([]);return}s.setSearchLoading(!0);try{const r=await window.electronAPI.searchMemories(e,t);r.success&&r.data?s.setSearchResults(r.data):s.setSearchResults([])}catch{s.setSearchResults([])}finally{s.setSearchLoading(!1)}}function yDe(e){p.useEffect(()=>{e&&xDe(e)},[e])}function wDe(e){return async()=>{await vDe(e)}}function jDe(e){return async t=>{t.trim()&&await bDe(e,t)}}const SDe={backend:so,frontend:wn,worker:Xne,scraper:lr,library:Jb,proxy:an,mobile:Yie,desktop:_h,unknown:Ms},_De={backend:"bg-blue-500/10 text-blue-400 border-blue-500/30",frontend:"bg-purple-500/10 text-purple-400 border-purple-500/30",worker:"bg-amber-500/10 text-amber-400 border-amber-500/30",scraper:"bg-green-500/10 text-green-400 border-green-500/30",library:"bg-gray-500/10 text-gray-400 border-gray-500/30",proxy:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",mobile:"bg-orange-500/10 text-orange-400 border-orange-500/30",desktop:"bg-indigo-500/10 text-indigo-400 border-indigo-500/30",unknown:"bg-muted text-muted-foreground border-muted"},YL={session_insight:zi,codebase_discovery:ol,codebase_map:ol,pattern:lr,gotcha:Tt,task_outcome:ah,qa_result:ah,historical_context:zi,pr_review:Js,pr_finding:jh,pr_pattern:Qt,pr_gotcha:Tt},NDe={session_insight:"bg-amber-500/10 text-amber-400 border-amber-500/30",codebase_discovery:"bg-blue-500/10 text-blue-400 border-blue-500/30",codebase_map:"bg-blue-500/10 text-blue-400 border-blue-500/30",pattern:"bg-purple-500/10 text-purple-400 border-purple-500/30",gotcha:"bg-red-500/10 text-red-400 border-red-500/30",task_outcome:"bg-green-500/10 text-green-400 border-green-500/30",qa_result:"bg-teal-500/10 text-teal-400 border-teal-500/30",historical_context:"bg-slate-500/10 text-slate-400 border-slate-500/30",pr_review:"bg-cyan-500/10 text-cyan-400 border-cyan-500/30",pr_finding:"bg-orange-500/10 text-orange-400 border-orange-500/30",pr_pattern:"bg-purple-500/10 text-purple-400 border-purple-500/30",pr_gotcha:"bg-red-500/10 text-red-400 border-red-500/30"},CDe={session_insight:"Session Insight",codebase_discovery:"Codebase Discovery",codebase_map:"Codebase Map",pattern:"Pattern",gotcha:"Gotcha",task_outcome:"Task Outcome",qa_result:"QA Result",historical_context:"Historical Context",pr_review:"PR Review",pr_finding:"PR Finding",pr_pattern:"PR Pattern",pr_gotcha:"PR Gotcha"},XL={all:{label:"All",types:[]},pr:{label:"PR Reviews",types:["pr_review","pr_finding","pr_pattern","pr_gotcha"]},sessions:{label:"Sessions",types:["session_insight","task_outcome","qa_result","historical_context"]},codebase:{label:"Codebase",types:["codebase_discovery","codebase_map"]},patterns:{label:"Patterns",types:["pattern","pr_pattern"]},gotchas:{label:"Gotchas",types:["gotcha","pr_gotcha"]}};function kDe({environment:e}){const[t,s]=p.useState(!1);return!e||e.detected_count===0?null:n.jsxs(Ba,{open:t,onOpenChange:s,className:"border-t border-border pt-3",children:[n.jsxs(za,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(io,{className:"h-3 w-3"}),"Environment Variables (",e.detected_count,")"]}),t?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})]}),n.jsx($a,{className:"mt-2 space-y-1.5",children:Object.entries(e.variables).slice(0,10).map(([r,i])=>n.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[n.jsx(oe,{variant:i.sensitive?"destructive":"outline",className:"text-xs shrink-0",children:i.type}),n.jsx("code",{className:"flex-1 font-mono text-muted-foreground truncate",children:r}),i.required&&n.jsx("span",{className:"text-orange-500 shrink-0",children:"*"})]},r))})]})}function ADe({api:e}){const[t,s]=p.useState(!1);return!e||e.total_routes===0?null:n.jsxs(Ba,{open:t,onOpenChange:s,className:"border-t border-border pt-3",children:[n.jsxs(za,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fie,{className:"h-3 w-3"}),"API Routes (",e.total_routes,")"]}),t?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})]}),n.jsx($a,{className:"mt-2 space-y-1.5",children:e.routes.slice(0,10).map((r,i)=>n.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[n.jsx("div",{className:"flex gap-1 shrink-0",children:r.methods.map(a=>n.jsx(oe,{variant:"secondary",className:"text-xs",children:a},a))}),n.jsx("code",{className:"flex-1 font-mono text-muted-foreground truncate",children:r.path}),r.requires_auth&&n.jsx(ll,{className:"h-3 w-3 text-orange-500 shrink-0"})]},i))})]})}function EDe({database:e}){const[t,s]=p.useState(!1);return!e||e.total_models===0?null:n.jsxs(Ba,{open:t,onOpenChange:s,className:"border-t border-border pt-3",children:[n.jsxs(za,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oc,{className:"h-3 w-3"}),"Database Models (",e.total_models,")"]}),t?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})]}),n.jsx($a,{className:"mt-2 space-y-1.5",children:e.model_names.slice(0,10).map(r=>{const i=e.models[r];return n.jsxs("div",{className:"flex items-start gap-2 text-xs",children:[n.jsx(oe,{variant:"outline",className:"text-xs shrink-0",children:i.orm}),n.jsx("code",{className:"flex-1 font-mono text-muted-foreground truncate",children:r}),n.jsxs("span",{className:"text-muted-foreground shrink-0 text-xs",children:[Object.keys(i.fields).length," fields"]})]},r)})})]})}function TDe({services:e}){const[t,s]=p.useState(!1);return!e||!Object.values(e).some(r=>r&&r.length>0)?null:n.jsxs(Ba,{open:t,onOpenChange:s,className:"border-t border-border pt-3",children:[n.jsxs(za,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(so,{className:"h-3 w-3"}),"External Services"]}),t?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})]}),n.jsxs($a,{className:"mt-2 space-y-2",children:[e.databases&&e.databases.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Databases"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.databases.map((r,i)=>n.jsxs(oe,{variant:"secondary",className:"text-xs",children:[n.jsx(tO,{className:"h-3 w-3 mr-1"}),r.type||r.client]},i))})]}),e.email&&e.email.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Email"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.email.map((r,i)=>n.jsxs(oe,{variant:"secondary",className:"text-xs",children:[n.jsx(cie,{className:"h-3 w-3 mr-1"}),r.provider||r.client]},i))})]}),e.payments&&e.payments.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Payments"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.payments.map((r,i)=>n.jsxs(oe,{variant:"secondary",className:"text-xs",children:[n.jsx(tre,{className:"h-3 w-3 mr-1"}),r.provider||r.client]},i))})]}),e.cache&&e.cache.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Cache"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.cache.map((r,i)=>n.jsxs(oe,{variant:"secondary",className:"text-xs",children:[n.jsx(vi,{className:"h-3 w-3 mr-1"}),r.type||r.client]},i))})]})]})]})}function PDe({monitoring:e}){const[t,s]=p.useState(!1);return e?n.jsxs(Ba,{open:t,onOpenChange:s,className:"border-t border-border pt-3",children:[n.jsxs(za,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Vb,{className:"h-3 w-3"}),"Monitoring"]}),t?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})]}),n.jsxs($a,{className:"mt-2 space-y-2 text-xs text-muted-foreground",children:[e.metrics_endpoint&&n.jsxs("div",{children:["Metrics: ",n.jsx("code",{className:"text-xs",children:e.metrics_endpoint})," (",e.metrics_type,")"]}),e.health_checks&&e.health_checks.length>0&&n.jsxs("div",{children:["Health: ",e.health_checks.join(", ")]})]})]}):null}function RDe({dependencies:e}){const[t,s]=p.useState(!1);return!e||e.length===0?null:n.jsxs(Ba,{open:t,onOpenChange:s,className:"border-t border-border pt-3",children:[n.jsxs(za,{className:"flex w-full items-center justify-between text-xs font-medium hover:text-foreground",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jb,{className:"h-3 w-3"}),"Dependencies (",e.length,")"]}),t?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})]}),n.jsx($a,{className:"mt-2",children:n.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.slice(0,20).map(r=>n.jsx(oe,{variant:"outline",className:"text-xs font-mono",children:r},r)),e.length>20&&n.jsxs(oe,{variant:"secondary",className:"text-xs",children:["+",e.length-20," more"]})]})})]})}function DDe({name:e,service:t}){const s=SDe[t.type||"unknown"],r=_De[t.type||"unknown"];return n.jsxs(Le,{className:"overflow-hidden",children:[n.jsxs(on,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ln,{className:"text-base flex items-center gap-2",children:[n.jsx(s,{className:"h-4 w-4"}),e]}),n.jsx(oe,{variant:"outline",className:J("capitalize text-xs",r),children:t.type||"unknown"})]}),t.path&&n.jsx(db,{className:"font-mono text-xs truncate",children:t.path})]}),n.jsxs(Ye,{className:"space-y-3",children:[n.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[t.language&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:t.language}),t.framework&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:t.framework}),t.package_manager&&n.jsx(oe,{variant:"outline",className:"text-xs",children:t.package_manager}),t.build_tool&&n.jsx(oe,{variant:"outline",className:"text-xs",children:t.build_tool})]}),n.jsxs("div",{className:"grid gap-2 text-xs",children:[t.entry_point&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Ms,{className:"h-3 w-3 shrink-0"}),n.jsx("span",{className:"truncate font-mono",children:t.entry_point})]}),t.testing&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Ys,{className:"h-3 w-3 shrink-0"}),n.jsxs("span",{children:["Testing: ",t.testing]})]}),t.orm&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(oc,{className:"h-3 w-3 shrink-0"}),n.jsxs("span",{children:["ORM: ",t.orm]})]}),t.default_port&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(wn,{className:"h-3 w-3 shrink-0"}),n.jsxs("span",{children:["Port: ",t.default_port]})]}),t.styling&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(lr,{className:"h-3 w-3 shrink-0"}),n.jsxs("span",{children:["Styling: ",t.styling]})]}),t.state_management&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Jb,{className:"h-3 w-3 shrink-0"}),n.jsxs("span",{children:["State: ",t.state_management]})]})]}),t.apple_frameworks&&t.apple_frameworks.length>0&&n.jsxs("div",{className:"pt-2 border-t border-border",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1.5",children:"Apple Frameworks"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:t.apple_frameworks.map(i=>n.jsx(oe,{variant:"secondary",className:"text-xs",children:i},i))})]}),t.spm_dependencies&&t.spm_dependencies.length>0&&n.jsxs("div",{className:"pt-2 border-t border-border",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1.5",children:"SPM Dependencies"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:t.spm_dependencies.map(i=>n.jsx(oe,{variant:"outline",className:"text-xs font-mono",children:i},i))})]}),n.jsx(kDe,{environment:t.environment}),n.jsx(ADe,{api:t.api}),n.jsx(EDe,{database:t.database}),n.jsx(TDe,{services:t.services}),n.jsx(PDe,{monitoring:t.monitoring}),t.dependencies&&n.jsx(RDe,{dependencies:t.dependencies}),t.key_directories&&Object.keys(t.key_directories).length>0&&n.jsxs("div",{className:"pt-2 border-t border-border",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1.5",children:"Key Directories"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(t.key_directories).slice(0,6).map(([i,a])=>n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(oe,{variant:"outline",className:"text-xs font-mono cursor-help",children:i})}),n.jsx(mt,{children:a.purpose})]},i))})]})]})]})}function Xa({label:e,value:t}){return n.jsxs("div",{children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:e}),n.jsx("p",{className:"text-sm font-medium",children:t})]})}function IDe({projectIndex:e,indexLoading:t,indexError:s,onRefresh:r}){return n.jsx(zt,{className:"h-full",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Project Structure"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-discovered knowledge about your codebase"})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"outline",size:"sm",onClick:r,disabled:t,children:[n.jsx(We,{className:J("h-4 w-4 mr-2",t&&"animate-spin")}),"Refresh"]})}),n.jsx(mt,{children:"Re-analyze project structure"})]})]}),s&&n.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive",children:[n.jsx(Ke,{className:"h-5 w-5 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Failed to load project index"}),n.jsx("p",{className:"text-sm opacity-80",children:s})]})]}),t&&!e&&n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(We,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!t&&!e&&!s&&n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(ol,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"No Project Index Found"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-sm",children:"Click the Refresh button to analyze your project structure and create an index."}),n.jsxs(W,{onClick:r,className:"mt-4",children:[n.jsx(We,{className:"h-4 w-4 mr-2"}),"Analyze Project"]})]}),e&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsx(ln,{className:"text-base",children:"Overview"})}),n.jsxs(Ye,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{variant:"outline",className:"capitalize",children:e.project_type}),Object.keys(e.services).length>0&&n.jsxs(oe,{variant:"secondary",children:[Object.keys(e.services).length," service",Object.keys(e.services).length!==1?"s":""]})]}),n.jsx("p",{className:"text-sm text-muted-foreground font-mono truncate",children:e.project_root})]})]}),Object.keys(e.services).length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Services"}),n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(e.services).map(([i,a])=>n.jsx(DDe,{name:i,service:a},i))})]}),Object.keys(e.infrastructure).length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Infrastructure"}),n.jsx(Le,{children:n.jsx(Ye,{className:"pt-6",children:n.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.infrastructure.docker_compose&&n.jsx(Xa,{label:"Docker Compose",value:e.infrastructure.docker_compose}),e.infrastructure.ci&&n.jsx(Xa,{label:"CI/CD",value:e.infrastructure.ci}),e.infrastructure.deployment&&n.jsx(Xa,{label:"Deployment",value:e.infrastructure.deployment}),e.infrastructure.docker_services&&e.infrastructure.docker_services.length>0&&n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:"Docker Services"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.infrastructure.docker_services.map(i=>n.jsx(oe,{variant:"secondary",className:"text-xs",children:i},i))})]})]})})})]}),Object.keys(e.conventions).length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Conventions"}),n.jsx(Le,{children:n.jsx(Ye,{className:"pt-6",children:n.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.conventions.python_linting&&n.jsx(Xa,{label:"Python Linting",value:e.conventions.python_linting}),e.conventions.js_linting&&n.jsx(Xa,{label:"JS Linting",value:e.conventions.js_linting}),e.conventions.formatting&&n.jsx(Xa,{label:"Formatting",value:e.conventions.formatting}),e.conventions.git_hooks&&n.jsx(Xa,{label:"Git Hooks",value:e.conventions.git_hooks}),e.conventions.typescript&&n.jsx(Xa,{label:"TypeScript",value:"Enabled"})]})})})]})]})]})})}function kC(e){try{return new Date(e).toLocaleString()}catch{return e}}function MDe(e){try{return JSON.parse(e)}catch{return null}}function LDe({verdict:e}){switch(e){case"approve":return n.jsxs(oe,{className:"bg-green-500/10 text-green-400 border-green-500/30 gap-1",children:[n.jsx(Ys,{className:"h-3 w-3"}),"Approved"]});case"request_changes":return n.jsxs(oe,{className:"bg-amber-500/10 text-amber-400 border-amber-500/30 gap-1",children:[n.jsx(yn,{className:"h-3 w-3"}),"Changes Requested"]});case"comment":return n.jsxs(oe,{className:"bg-blue-500/10 text-blue-400 border-blue-500/30 gap-1",children:[n.jsx(nh,{className:"h-3 w-3"}),"Commented"]});default:return n.jsx(oe,{variant:"outline",className:"gap-1",children:e})}}function ev({severity:e,count:t}){if(t===0)return null;const s={critical:"bg-red-600/20 text-red-400 border-red-600/30",high:"bg-orange-500/20 text-orange-400 border-orange-500/30",medium:"bg-amber-500/20 text-amber-400 border-amber-500/30",low:"bg-blue-500/20 text-blue-400 border-blue-500/30"};return n.jsxs(oe,{className:`${s[e]||"bg-muted"} text-xs font-mono`,children:[t," ",e]})}function ODe({memory:e}){const[t,s]=p.useState(!1),r=p.useMemo(()=>MDe(e.content),[e.content]);if(!r)return n.jsx(Le,{className:"bg-muted/30 border-border/50",children:n.jsxs(Ye,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Js,{className:"h-4 w-4 text-cyan-400"}),n.jsx(oe,{variant:"outline",children:"PR Review"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:kC(e.timestamp)})]}),n.jsx("pre",{className:"mt-3 text-xs text-muted-foreground whitespace-pre-wrap font-mono",children:e.content})]})});const{finding_counts:i}=r.summary||{finding_counts:{critical:0,high:0,medium:0,low:0}},a=(i?.critical||0)+(i?.high||0)+(i?.medium||0)+(i?.low||0),o=r.gotchas&&r.gotchas.length>0,l=r.patterns&&r.patterns.length>0,u=r.keyFindings&&r.keyFindings.length>0,d=o||l||u;return n.jsx(Le,{className:"bg-muted/30 border-border/50 hover:border-cyan-500/30 transition-colors",children:n.jsxs(Ye,{className:"pt-4 pb-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"p-2 rounded-lg bg-cyan-500/10",children:n.jsx(Js,{className:"h-4 w-4 text-cyan-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"font-semibold text-foreground",children:["PR #",r.prNumber]}),n.jsx("span",{className:"text-muted-foreground text-sm truncate max-w-[200px]",title:r.repo,children:r.repo}),r.isFollowup&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:"Follow-up"})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[n.jsx(LDe,{verdict:r.verdict}),a>0&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:[a," finding",a!==1?"s":""]})]}),a>0&&n.jsxs("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:[n.jsx(ev,{severity:"critical",count:i?.critical||0}),n.jsx(ev,{severity:"high",count:i?.high||0}),n.jsx(ev,{severity:"medium",count:i?.medium||0}),n.jsx(ev,{severity:"low",count:i?.low||0})]}),n.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[n.jsx(cr,{className:"h-3 w-3"}),kC(e.timestamp)]})]})]}),d&&n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>s(!t),className:"shrink-0 gap-1",children:t?n.jsxs(n.Fragment,{children:[n.jsx(Hi,{className:"h-4 w-4"}),"Collapse"]}):n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-4 w-4"}),"Details"]})})]}),t&&n.jsxs("div",{className:"mt-4 space-y-4 pt-4 border-t border-border/50",children:[u&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(jh,{className:"h-4 w-4 text-orange-400"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Key Findings"}),n.jsx(oe,{variant:"secondary",className:"text-xs px-1.5 py-0",children:r.keyFindings.length})]}),n.jsxs("div",{className:"space-y-2 pl-6",children:[r.keyFindings.slice(0,5).map((m,f)=>n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{className:`text-xs ${m.severity==="critical"?"bg-red-600/20 text-red-400":m.severity==="high"?"bg-orange-500/20 text-orange-400":m.severity==="medium"?"bg-amber-500/20 text-amber-400":"bg-blue-500/20 text-blue-400"}`,children:m.severity}),m.file&&n.jsxs("span",{className:"text-xs text-muted-foreground font-mono truncate max-w-[200px]",children:[m.file,m.line?`:${m.line}`:""]})]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:m.message})]},f)),r.keyFindings.length>5&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",r.keyFindings.length-5," more findings"]})]})]}),o&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-red-400"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Gotchas Discovered"}),n.jsx(oe,{variant:"secondary",className:"text-xs px-1.5 py-0",children:r.gotchas.length})]}),n.jsx("ul",{className:"space-y-1 pl-6",children:r.gotchas.map((m,f)=>n.jsx("li",{className:"text-sm text-red-400/80 py-1 pl-4 relative before:content-[''] before:absolute before:left-0 before:text-red-500/50",children:m},f))})]}),l&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Qt,{className:"h-4 w-4 text-purple-400"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:"Patterns Identified"}),n.jsx(oe,{variant:"secondary",className:"text-xs px-1.5 py-0",children:r.patterns.length})]}),n.jsx("div",{className:"flex flex-wrap gap-2 pl-6",children:r.patterns.map((m,f)=>n.jsx(oe,{variant:"secondary",className:"text-xs bg-purple-500/10 text-purple-400",children:m},f))})]}),r.repo&&r.prNumber&&n.jsx("div",{className:"pt-2",children:n.jsxs(W,{variant:"ghost",size:"sm",className:"text-xs text-muted-foreground hover:text-foreground gap-1",onClick:()=>window.open(`https://github.com/${r.repo}/pull/${r.prNumber}`,"_blank"),children:[n.jsx(Zt,{className:"h-3 w-3"}),"View PR on GitHub"]})})]})]})})}function FDe(e){try{return JSON.parse(e)}catch{try{const t=JSON.parse(e);if(typeof t=="object")return t}catch{return null}return null}}function Xo({icon:e,title:t,count:s}){return n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(e,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium text-foreground",children:t}),s!==void 0&&s>0&&n.jsx(oe,{variant:"secondary",className:"text-xs px-1.5 py-0",children:s})]})}function of({children:e,variant:t="default"}){const s=t==="success"?"text-success":t==="error"?"text-destructive":"text-muted-foreground";return n.jsx("li",{className:`text-sm ${s} py-1 pl-4 relative before:content-[''] before:absolute before:left-0 before:text-muted-foreground/50`,children:e})}function BDe(e){if(e.type==="pr_review"||e.type==="pr_finding"||e.type==="pr_pattern"||e.type==="pr_gotcha")return!0;try{const t=JSON.parse(e.content);return t.prNumber!==void 0&&t.verdict!==void 0}catch{return!1}}function zDe({memory:e}){const[t,s]=p.useState(!1),r=p.useMemo(()=>FDe(e.content),[e.content]),i=p.useMemo(()=>{if(!r)return!1;const m=r.discoveries||{};return(r.what_worked?.length??0)>0||(r.what_failed?.length??0)>0||(r.recommendations_for_next_session?.length??0)>0||(m.patterns_discovered?.length??0)>0||(m.gotchas_discovered?.length??0)>0||(m.file_insights?.length??0)>0||(m.changed_files?.length??0)>0||m.approach_outcome?.approach_used},[r]);if(BDe(e))return n.jsx(ODe,{memory:e});const a=YL[e.type]||YL.session_insight,o=NDe[e.type]||"",l=CDe[e.type]||e.type.replace(/_/g," "),u=e.session_number?`Session #${e.session_number}`:r?.session_number?`Session #${r.session_number}`:null,d=r?.spec_id;return n.jsx(Le,{className:"bg-muted/30 border-border/50 hover:border-border transition-colors",children:n.jsxs(Ye,{className:"pt-4 pb-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"p-2 rounded-lg bg-accent/10",children:n.jsx(a,{className:"h-4 w-4 text-accent"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx(oe,{variant:"outline",className:`text-xs capitalize font-medium ${o}`,children:l}),u&&n.jsx("span",{className:"text-sm font-medium text-foreground",children:u})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[n.jsx(cr,{className:"h-3 w-3"}),kC(e.timestamp)]}),d&&n.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[200px]",title:d,children:d})]})]})]}),i&&n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>s(!t),className:"shrink-0 gap-1",children:t?n.jsxs(n.Fragment,{children:[n.jsx(Hi,{className:"h-4 w-4"}),"Collapse"]}):n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-4 w-4"}),"Expand"]})})]}),t&&r&&n.jsxs("div",{className:"mt-4 space-y-4 pt-4 border-t border-border/50",children:[r.what_worked&&r.what_worked.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:Xe,title:"What Worked",count:r.what_worked.length}),n.jsx("ul",{className:"space-y-0.5",children:r.what_worked.map((m,f)=>n.jsx(of,{variant:"success",children:m},f))})]}),r.what_failed&&r.what_failed.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:yn,title:"What Failed",count:r.what_failed.length}),n.jsx("ul",{className:"space-y-0.5",children:r.what_failed.map((m,f)=>n.jsx(of,{variant:"error",children:m},f))})]}),r.discoveries?.approach_outcome?.approach_used&&n.jsxs("div",{children:[n.jsx(Xo,{icon:r.discoveries.approach_outcome.success?Xe:Tt,title:"Approach"}),n.jsxs("div",{className:"pl-4 space-y-2",children:[n.jsx("p",{className:"text-sm text-foreground",children:r.discoveries.approach_outcome.approach_used}),r.discoveries.approach_outcome.why_it_worked&&n.jsx("p",{className:"text-sm text-success",children:r.discoveries.approach_outcome.why_it_worked}),r.discoveries.approach_outcome.why_it_failed&&n.jsx("p",{className:"text-sm text-destructive",children:r.discoveries.approach_outcome.why_it_failed})]})]}),((r.recommendations_for_next_session?.length??0)>0||(r.discoveries?.recommendations?.length??0)>0)&&n.jsxs("div",{children:[n.jsx(Xo,{icon:zi,title:"Recommendations",count:(r.recommendations_for_next_session?.length??0)+(r.discoveries?.recommendations?.length??0)}),n.jsxs("ul",{className:"space-y-0.5",children:[r.recommendations_for_next_session?.map((m,f)=>n.jsx(of,{children:m},`rec-${f}`)),r.discoveries?.recommendations?.map((m,f)=>n.jsx(of,{children:m},`disc-rec-${f}`))]})]}),r.discoveries?.patterns_discovered&&r.discoveries.patterns_discovered.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:Qt,title:"Patterns",count:r.discoveries.patterns_discovered.length}),n.jsx("div",{className:"flex flex-wrap gap-2 pl-4",children:r.discoveries.patterns_discovered.map((m,f)=>{const x=typeof m=="string"?m:m.pattern;return x?n.jsx(oe,{variant:"secondary",className:"text-xs",children:x},f):null})})]}),r.discoveries?.gotchas_discovered&&r.discoveries.gotchas_discovered.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:Tt,title:"Gotchas",count:r.discoveries.gotchas_discovered.length}),n.jsx("ul",{className:"space-y-0.5",children:r.discoveries.gotchas_discovered.map((m,f)=>{const x=typeof m=="string"?m:m.gotcha;return x?n.jsx(of,{variant:"error",children:x},f):null})})]}),r.discoveries?.changed_files&&r.discoveries.changed_files.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:Ms,title:"Changed Files",count:r.discoveries.changed_files.length}),n.jsx("div",{className:"flex flex-wrap gap-1.5 pl-4",children:r.discoveries.changed_files.map((m,f)=>n.jsx(oe,{variant:"outline",className:"text-xs font-mono",children:m},f))})]}),r.discoveries?.file_insights&&r.discoveries.file_insights.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:Ms,title:"File Insights",count:r.discoveries.file_insights.length}),n.jsx("div",{className:"space-y-2 pl-4",children:r.discoveries.file_insights.map((m,f)=>n.jsxs("div",{className:"text-sm",children:[m.path&&n.jsx(oe,{variant:"outline",className:"text-xs font-mono mb-1",children:m.path}),m.purpose&&n.jsx("p",{className:"text-muted-foreground",children:m.purpose}),m.changes_made&&n.jsx("p",{className:"text-foreground mt-0.5",children:m.changes_made})]},f))})]}),r.subtasks_completed&&r.subtasks_completed.length>0&&n.jsxs("div",{children:[n.jsx(Xo,{icon:Xe,title:"Subtasks Completed",count:r.subtasks_completed.length}),n.jsx("div",{className:"flex flex-wrap gap-1.5 pl-4",children:r.subtasks_completed.map((m,f)=>n.jsx(oe,{variant:"secondary",className:"text-xs font-mono",children:m},f))})]})]}),t&&!r&&n.jsx("pre",{className:"mt-4 text-xs text-muted-foreground whitespace-pre-wrap font-mono p-3 bg-background rounded-lg max-h-64 overflow-auto border border-border/50",children:e.content})]})})}function $De(e){if(["pr_review","pr_finding","pr_pattern","pr_gotcha"].includes(e.type))return!0;try{const t=JSON.parse(e.content);return t.prNumber!==void 0&&t.verdict!==void 0}catch{return!1}}function ZL(e){return $De(e)?"pr":["session_insight","task_outcome"].includes(e.type)?"sessions":["codebase_discovery","codebase_map"].includes(e.type)?"codebase":["pattern","pr_pattern"].includes(e.type)?"patterns":["gotcha","pr_gotcha"].includes(e.type)?"gotchas":"sessions"}const HDe={all:Bi,pr:Js,sessions:zi,codebase:ol,patterns:lr,gotchas:Tt};function UDe({memoryStatus:e,memoryState:t,recentMemories:s,memoriesLoading:r,searchResults:i,searchLoading:a,onSearch:o}){const[l,u]=p.useState(""),[d,m]=p.useState("all"),f=p.useMemo(()=>{const w={all:s.length,pr:0,sessions:0,codebase:0,patterns:0,gotchas:0};for(const S of s){const C=ZL(S);w[C]++}return w},[s]),x=p.useMemo(()=>d==="all"?s:s.filter(w=>ZL(w)===d),[s,d]),v=()=>{l.trim()&&o(l)},y=w=>{w.key==="Enter"&&v()};return n.jsx(zt,{className:"h-full",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ln,{className:"text-base flex items-center gap-2",children:[n.jsx(oc,{className:"h-4 w-4"}),"Graph Memory Status"]}),e?.available?n.jsxs(oe,{variant:"outline",className:"bg-success/10 text-success border-success/30",children:[n.jsx(Ys,{className:"h-3 w-3 mr-1"}),"Connected"]}):n.jsxs(oe,{variant:"outline",className:"bg-muted text-muted-foreground",children:[n.jsx(yn,{className:"h-3 w-3 mr-1"}),"Not Available"]})]})}),n.jsx(Ye,{className:"space-y-3",children:e?.available?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 text-sm",children:[n.jsx(Xa,{label:"Database",value:e.database||"auto_claude_memory"}),n.jsx(Xa,{label:"Path",value:e.dbPath||"~/.auto-claude/memories"})]}),s.length>0&&n.jsx("div",{className:"pt-3 border-t border-border/50",children:n.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-2",children:[n.jsxs("div",{className:"text-center p-2 rounded-lg bg-muted/30",children:[n.jsx("div",{className:"text-lg font-semibold text-foreground",children:f.all}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),n.jsxs("div",{className:"text-center p-2 rounded-lg bg-cyan-500/10",children:[n.jsx("div",{className:"text-lg font-semibold text-cyan-400",children:f.pr}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"PR Reviews"})]}),n.jsxs("div",{className:"text-center p-2 rounded-lg bg-amber-500/10",children:[n.jsx("div",{className:"text-lg font-semibold text-amber-400",children:f.sessions}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Sessions"})]}),n.jsxs("div",{className:"text-center p-2 rounded-lg bg-blue-500/10",children:[n.jsx("div",{className:"text-lg font-semibold text-blue-400",children:f.codebase}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Codebase"})]}),n.jsxs("div",{className:"text-center p-2 rounded-lg bg-purple-500/10",children:[n.jsx("div",{className:"text-lg font-semibold text-purple-400",children:f.patterns}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Patterns"})]}),n.jsxs("div",{className:"text-center p-2 rounded-lg bg-red-500/10",children:[n.jsx("div",{className:"text-lg font-semibold text-red-400",children:f.gotchas}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Gotchas"})]})]})})]}):n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("p",{children:e?.reason||"Graphiti memory is not configured"}),n.jsxs("p",{className:"mt-2 text-xs",children:["To enable graph memory, set ",n.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"GRAPHITI_ENABLED=true"})," in project settings."]})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Search Memories"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{placeholder:"Search for patterns, insights, gotchas...",value:l,onChange:w=>u(w.target.value),onKeyDown:y}),n.jsx(W,{onClick:v,disabled:a,children:n.jsx(Nr,{className:J("h-4 w-4",a&&"animate-pulse")})})]}),i.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.length," result",i.length!==1?"s":""," found"]}),i.map((w,S)=>n.jsx(Le,{className:"bg-muted/50",children:n.jsxs(Ye,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(oe,{variant:"outline",className:"text-xs capitalize",children:w.type.replace("_"," ")}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Score: ",w.score.toFixed(2)]})]}),n.jsx("pre",{className:"text-xs text-muted-foreground whitespace-pre-wrap font-mono max-h-40 overflow-auto",children:w.content})]})},S))]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Memory Browser"}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[x.length," of ",s.length," memories"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(XL).map(w=>{const S=XL[w],C=f[w],_=HDe[w],j=d===w;return n.jsxs(W,{variant:j?"default":"outline",size:"sm",className:J("gap-1.5 h-8",j&&"bg-accent text-accent-foreground",!j&&C===0&&"opacity-50"),onClick:()=>m(w),disabled:C===0&&w!=="all",children:[n.jsx(_,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:S.label}),C>0&&n.jsx(oe,{variant:"secondary",className:J("ml-1 px-1.5 py-0 text-xs",j&&"bg-background/20"),children:C})]},w)})}),r&&n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(We,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),!r&&x.length===0&&s.length===0&&n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[n.jsx(Bi,{className:"h-10 w-10 text-muted-foreground mb-3"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No memories recorded yet. Memories are created during AI agent sessions and PR reviews."})]}),!r&&x.length===0&&s.length>0&&n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[n.jsx(Bi,{className:"h-10 w-10 text-muted-foreground mb-3"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No memories match the selected filter."}),n.jsx(W,{variant:"link",size:"sm",onClick:()=>m("all"),className:"mt-2",children:"Show all memories"})]}),x.length>0&&n.jsx("div",{className:"space-y-3",children:x.map(w=>n.jsx(zDe,{memory:w},w.id))})]})]})})}function GDe({projectId:e}){const{projectIndex:t,indexLoading:s,indexError:r,memoryStatus:i,memoryState:a,recentMemories:o,memoriesLoading:l,searchResults:u,searchLoading:d}=lw(),[m,f]=p.useState("index");yDe(e);const x=wDe(e),v=jDe(e);return n.jsx("div",{className:"flex h-full flex-col overflow-hidden",children:n.jsxs(Wy,{value:m,onValueChange:f,className:"flex flex-col h-full",children:[n.jsx("div",{className:"border-b border-border px-6 py-3",children:n.jsxs(qp,{className:"grid w-full max-w-md grid-cols-2",children:[n.jsxs(wr,{value:"index",className:"gap-2",children:[n.jsx(ol,{className:"h-4 w-4"}),"Project Index"]}),n.jsxs(wr,{value:"memories",className:"gap-2",children:[n.jsx(Bi,{className:"h-4 w-4"}),"Memories"]})]})}),n.jsx(Ii,{value:"index",className:"flex-1 overflow-hidden m-0",children:n.jsx(IDe,{projectIndex:t,indexLoading:s,indexError:r,onRefresh:x})}),n.jsx(Ii,{value:"memories",className:"flex-1 overflow-hidden m-0",children:n.jsx(UDe,{memoryStatus:i,memoryState:a,recentMemories:o,memoriesLoading:l,searchResults:u,searchLoading:d,onSearch:v})})]})})}function QL({open:e,onOpenChange:t,onConfigured:s,title:r="Claude Authentication Required",description:i="A Claude Code OAuth token is required to use AI features like Ideation and Roadmap generation.",projectId:a}){const[o,l]=p.useState(""),[u,d]=p.useState(!1),[m,f]=p.useState(!1),[x,v]=p.useState(!1),[y,w]=p.useState(!0),[S,C]=p.useState(!1),[_,j]=p.useState(null),[T,E]=p.useState(!1),[A,R]=p.useState(null),[D,M]=p.useState(!1),[P,O]=p.useState([]),[F,$]=p.useState(null),[z,H]=p.useState(!0);p.useEffect(()=>{(async()=>{if(e){w(!0),H(!0),j(null),E(!1);try{const[q,Q]=await Promise.all([window.electronAPI.checkSourceToken(),window.electronAPI.getClaudeProfiles()]);if(q.success&&q.data?(R(q.data.sourcePath||null),M(q.data.hasToken),q.data.hasToken&&E(!0)):j(q.error||"Failed to check token status"),Q.success&&Q.data){const se=Q.data.profiles.filter(te=>te.oauthToken||te.isDefault&&te.configDir);O(se),se.length>0&&!F&&$(se[0].id)}}catch(q){j(q instanceof Error?q.message:"Unknown error")}finally{w(!1),H(!1)}}})()},[e]),p.useEffect(()=>e?window.electronAPI.onTerminalOAuthToken(async q=>{q.success&&(E(!0),M(!0),v(!1),setTimeout(()=>{s?.(),t(!1)},1500))}):void 0,[e,s,t]);const I=async()=>{if(F){C(!0),j(null);try{const Y=P.find(Q=>Q.id===F);if(!Y?.oauthToken){j("Selected profile does not have a valid token"),C(!1);return}const q=await window.electronAPI.updateSourceEnv({claudeOAuthToken:Y.oauthToken});q.success?(E(!0),M(!0),setTimeout(()=>{s?.(),t(!1)},1500)):j(q.error||"Failed to save token")}catch(Y){j(Y instanceof Error?Y.message:"Unknown error")}finally{C(!1)}}},V=async()=>{if(!a){j("No project selected. Please select a project first.");return}v(!0),j(null);try{const Y=await window.electronAPI.invokeClaudeSetup(a);Y.success||(j(Y.error||"Failed to start authentication"),v(!1))}catch(Y){j(Y instanceof Error?Y.message:"Failed to start authentication"),v(!1)}},B=async()=>{if(!o.trim()){j("Please enter a token");return}C(!0),j(null);try{const Y=await window.electronAPI.updateSourceEnv({claudeOAuthToken:o.trim()});Y.success?(E(!0),M(!0),l(""),setTimeout(()=>{s?.(),t(!1)},1500)):j(Y.error||"Failed to save token")}catch(Y){j(Y instanceof Error?Y.message:"Unknown error")}finally{C(!1)}},K=()=>{navigator.clipboard.writeText("claude setup-token")},L=()=>{window.open("https://docs.anthropic.com/en/docs/claude-code","_blank")},G=()=>{S||(l(""),j(null),E(!1),t(!1))};return n.jsx($s,{open:e,onOpenChange:G,children:n.jsxs(Bs,{className:"sm:max-w-[500px]",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2 text-foreground",children:[n.jsx(io,{className:"h-5 w-5"}),r]}),n.jsx(ws,{children:i})]}),y&&n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}),!y&&T&&n.jsx("div",{className:"py-4",children:n.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-4 flex items-center gap-3",children:[n.jsx(Xe,{className:"h-5 w-5 text-success shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-success",children:"Token configured successfully"}),n.jsx("p",{className:"text-xs text-success/80 mt-1",children:"You can now use AI features like Ideation and Roadmap generation."})]})]})}),!y&&!T&&n.jsxs("div",{className:"py-4 space-y-4",children:[_&&n.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-destructive shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-destructive",children:_})]}),!z&&P.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"rounded-lg bg-success/10 border border-success/30 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Xe,{className:"h-5 w-5 text-success shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-foreground font-medium mb-1",children:"Use Existing Account"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["You have ",P.length," authenticated Claude account",P.length>1?"s":"",". Select one to use:"]})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Select Account"}),n.jsx("div",{className:"space-y-2",children:P.map(Y=>n.jsxs("button",{onClick:()=>$(Y.id),className:J("w-full flex items-center gap-3 p-3 rounded-lg border-2 transition-colors text-left",F===Y.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[n.jsx("div",{className:J("h-4 w-4 rounded-full border-2 flex items-center justify-center shrink-0",F===Y.id?"border-primary":"border-muted-foreground"),children:F===Y.id&&n.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:"text-sm font-medium text-foreground",children:[Y.name,Y.isDefault&&n.jsx("span",{className:"ml-2 text-xs text-muted-foreground",children:"(Default)"})]}),Y.email&&n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:Y.email})]}),n.jsx(Xe,{className:J("h-4 w-4 shrink-0",F===Y.id?"text-primary":"text-transparent")})]},Y.id))})]}),n.jsx(W,{onClick:I,disabled:!F||S,className:"w-full",size:"lg",children:S?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-5 w-5 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(io,{className:"mr-2 h-5 w-5"}),"Use This Account"]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-border"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"or"})})]})]}),!z&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"rounded-lg bg-info/10 border border-info/30 p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-foreground font-medium mb-1",children:P.length>0?"Or Authenticate New Account":"Authenticate with Browser"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:P.length>0?"Add a new Claude account by logging in with your browser.":"Click below to open your browser and log in with your Claude account."})]})]})}),n.jsx(W,{onClick:V,disabled:x,className:"w-full",size:"lg",variant:P.length>0?"outline":"default",children:x?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-5 w-5 animate-spin"}),"Waiting for authentication..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zb,{className:"mr-2 h-5 w-5"}),P.length>0?"Authenticate New Account":"Authenticate with Browser"]})}),x&&n.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"A browser window should open. Complete the authentication there, then return here."})]}),!z&&n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-border"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"or"})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>f(!m),className:"w-full flex items-center justify-between text-sm text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx("span",{children:"Enter token manually"}),m?n.jsx(bt,{className:"h-4 w-4"}):n.jsx(Xt,{className:"h-4 w-4"})]}),m&&n.jsxs("div",{className:"space-y-3 pl-4 border-l-2 border-border",children:[n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Steps:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[n.jsx("li",{children:"Install Claude Code CLI if you haven't already"}),n.jsxs("li",{children:["Run"," ",n.jsx("code",{className:"px-1 py-0.5 bg-muted rounded font-mono",children:"claude setup-token"})," ",n.jsx("button",{onClick:K,className:"inline-flex items-center text-info hover:text-info/80",children:n.jsx(sh,{className:"h-3 w-3 ml-1"})})]}),n.jsx("li",{children:"Copy the token and paste it below"})]}),n.jsxs("button",{onClick:L,className:"text-info hover:text-info/80 flex items-center gap-1 mt-2",children:[n.jsx(Zt,{className:"h-3 w-3"}),"View documentation"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"token",className:"text-sm font-medium text-foreground",children:"Claude Code OAuth Token"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"token",type:u?"text":"password",value:o,onChange:Y=>l(Y.target.value),placeholder:"Enter your token...",className:"pr-10 font-mono text-sm",disabled:S||x}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:u?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})}),n.jsx(mt,{children:u?"Hide token":"Show token"})]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["The token will be saved to"," ",n.jsx("code",{className:"px-1 py-0.5 bg-muted rounded font-mono",children:A?`${A}/.env`:"auto-claude/.env"})]})]})]})]}),D&&n.jsx("div",{className:"rounded-lg bg-muted/50 p-3",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:["A token is already configured. ",m?"Enter a new token above to replace it.":"Authenticate again to replace it."]})})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:G,disabled:S||x,children:T?"Close":"Cancel"}),!T&&m&&o.trim()&&n.jsx(W,{onClick:B,disabled:S||x,children:S?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(io,{className:"mr-2 h-4 w-4"}),"Save Token"]})})]})]})})}function mc({type:e}){switch(e){case"code_improvements":return n.jsx(vi,{className:"h-4 w-4"});case"ui_ux_improvements":return n.jsx(_p,{className:"h-4 w-4"});case"documentation_gaps":return n.jsx(jp,{className:"h-4 w-4"});case"security_hardening":return n.jsx(xa,{className:"h-4 w-4"});case"performance_optimizations":return n.jsx(Sp,{className:"h-4 w-4"});case"code_quality":return n.jsx(qb,{className:"h-4 w-4"});default:return n.jsx(zi,{className:"h-4 w-4"})}}const fp=["code_improvements","ui_ux_improvements","documentation_gaps","security_hardening","performance_optimizations","code_quality"];function VDe({config:e,hasToken:t,isCheckingToken:s,onGenerate:r,onOpenConfig:i,onToggleIdeationType:a}){return n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs(Le,{className:"w-full max-w-lg p-8 text-center",children:[n.jsx(zi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Ideas Yet"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Generate AI-powered feature ideas based on your project's context, existing patterns, and target audience."}),n.jsxs("div",{className:"mb-6 p-4 bg-muted/50 rounded-lg text-left",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("span",{className:"text-sm font-medium",children:"Enabled Ideation Types"}),n.jsx(W,{variant:"ghost",size:"sm",onClick:i,children:n.jsx(Sd,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"space-y-2",children:fp.map(o=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(mc,{type:o}),n.jsx("span",{className:"text-sm",children:nc[o]})]}),n.jsx(Kt,{checked:e.enabledTypes.includes(o),onCheckedChange:()=>a(o)})]},o))})]}),n.jsxs(W,{onClick:r,size:"lg",disabled:s,children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Generate Ideas"]}),t===!1&&!s&&n.jsxs("p",{className:"mt-3 text-sm text-muted-foreground",children:[n.jsx(Ke,{className:"h-4 w-4 inline-block mr-1 text-warning"}),"Claude token not configured. You'll be prompted to enter it when generating."]})]})})}function qDe({totalIdeas:e,ideaCountByType:t,showDismissed:s,selectedCount:r,onToggleShowDismissed:i,onOpenConfig:a,onOpenAddMore:o,onDismissAll:l,onDeleteSelected:u,onSelectAll:d,onClearSelection:m,onRefresh:f,hasActiveIdeas:x,canAddMore:v}){const{t:y}=Re("common"),w=r>0;return n.jsxs("div",{className:"shrink-0 border-b border-border p-4 bg-card/50",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(zi,{className:"h-5 w-5 text-primary"}),n.jsx("h2",{className:"text-lg font-semibold",children:"Ideation"}),n.jsxs(oe,{variant:"outline",children:[e," ideas"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-generated feature ideas for your project"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[w?n.jsxs(n.Fragment,{children:[n.jsxs(oe,{variant:"secondary",className:"mr-1",children:[r," selected"]}),n.jsxs(W,{variant:"outline",size:"sm",className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",onClick:u,children:[n.jsx(or,{className:"h-4 w-4 mr-1"}),"Delete"]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:m,"aria-label":y("accessibility.clearSelectionAriaLabel"),children:n.jsx(Ss,{className:"h-4 w-4"})})}),n.jsx(mt,{children:y("accessibility.clearSelectionAriaLabel")})]}),n.jsx("div",{className:"w-px h-6 bg-border mx-1"})]}):x&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",onClick:d,"aria-label":y("accessibility.selectAllAriaLabel"),children:n.jsx(_d,{className:"h-4 w-4"})})}),n.jsx(mt,{children:y("accessibility.selectAllAriaLabel")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:s?"secondary":"outline",size:"icon",onClick:i,"aria-label":y(s?"accessibility.hideDismissedAriaLabel":"accessibility.showDismissedAriaLabel"),children:s?n.jsx(Ws,{className:"h-4 w-4"}):n.jsx(nr,{className:"h-4 w-4"})})}),n.jsx(mt,{children:y(s?"accessibility.hideDismissedAriaLabel":"accessibility.showDismissedAriaLabel")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"outline",size:"icon",onClick:a,"aria-label":y("accessibility.configureAriaLabel"),children:n.jsx(Sd,{className:"h-4 w-4"})})}),n.jsx(mt,{children:y("accessibility.configureAriaLabel")})]}),v&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"outline",onClick:o,"aria-label":y("accessibility.addMoreAriaLabel"),children:[n.jsx(fs,{className:"h-4 w-4 mr-1"}),"Add More"]})}),n.jsx(mt,{children:y("accessibility.addMoreAriaLabel")})]}),x&&!w&&n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"outline",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:l,"aria-label":y("accessibility.dismissAllAriaLabel"),children:n.jsx(or,{className:"h-4 w-4"})})}),n.jsx(mt,{children:y("accessibility.dismissAllAriaLabel")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"outline",size:"icon",onClick:f,"aria-label":y("accessibility.regenerateIdeasAriaLabel"),children:n.jsx(We,{className:"h-4 w-4"})})}),n.jsx(mt,{children:y("accessibility.regenerateIdeasAriaLabel")})]})]})]}),n.jsx("div",{className:"mt-4 flex items-center gap-4",children:Object.entries(t).map(([S,C])=>n.jsxs(oe,{variant:"outline",className:Zu[S],children:[n.jsx(mc,{type:S}),n.jsx("span",{className:"ml-1",children:C})]},S))})]})}function WDe({activeTab:e,onTabChange:t,children:s}){return n.jsxs(Wy,{value:e,onValueChange:t,className:"h-full flex flex-col",children:[n.jsxs(qp,{className:"shrink-0 mx-4 mt-4 flex-wrap h-auto gap-1",children:[n.jsx(wr,{value:"all",children:"All"}),n.jsxs(wr,{value:"code_improvements",children:[n.jsx(vi,{className:"h-3 w-3 mr-1"}),"Code"]}),n.jsxs(wr,{value:"ui_ux_improvements",children:[n.jsx(_p,{className:"h-3 w-3 mr-1"}),"UI/UX"]}),n.jsxs(wr,{value:"documentation_gaps",children:[n.jsx(jp,{className:"h-3 w-3 mr-1"}),"Docs"]}),n.jsxs(wr,{value:"security_hardening",children:[n.jsx(xa,{className:"h-3 w-3 mr-1"}),"Security"]}),n.jsxs(wr,{value:"performance_optimizations",children:[n.jsx(Sp,{className:"h-3 w-3 mr-1"}),"Performance"]})]}),s]})}function JL({showConfigDialog:e,showAddMoreDialog:t,config:s,typesToAdd:r,availableTypesToAdd:i,onToggleIdeationType:a,onToggleTypeToAdd:o,onSetConfig:l,onCloseConfigDialog:u,onCloseAddMoreDialog:d,onConfirmAddMore:m}){return n.jsxs(n.Fragment,{children:[n.jsx($s,{open:e,onOpenChange:u,children:n.jsxs(Bs,{children:[n.jsxs(os,{children:[n.jsx(ls,{children:"Ideation Configuration"}),n.jsx(ws,{children:"Configure which types of ideas to generate"})]}),n.jsxs("div",{className:"py-4 space-y-4 max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Ideation Types"}),fp.map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-md ${Zu[f]}`,children:n.jsx(mc,{type:f})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:nc[f]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:m_[f]})]})]}),n.jsx(Kt,{checked:s.enabledTypes.includes(f),onCheckedChange:()=>a(f)})]},f))]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"text-sm font-medium",children:"Context Sources"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Include Roadmap Context"}),n.jsx(Kt,{checked:s.includeRoadmapContext,onCheckedChange:f=>l({includeRoadmapContext:f})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm",children:"Include Kanban Context"}),n.jsx(Kt,{checked:s.includeKanbanContext,onCheckedChange:f=>l({includeKanbanContext:f})})]})]})]}),n.jsx(As,{children:n.jsx(W,{variant:"outline",onClick:u,children:"Close"})})]})}),n.jsx($s,{open:t,onOpenChange:d,children:n.jsxs(Bs,{children:[n.jsxs(os,{children:[n.jsx(ls,{children:"Add More Ideas"}),n.jsx(ws,{children:"Select additional ideation types to generate. Your existing ideas will be preserved."})]}),n.jsx("div",{className:"py-4 space-y-3 max-h-96 overflow-y-auto",children:i.length===0?n.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[n.jsx(Xe,{className:"h-12 w-12 mx-auto mb-2 text-success"}),n.jsx("p",{children:"You've already generated all ideation types!"}),n.jsx("p",{className:"text-sm mt-1",children:'Use "Regenerate" to refresh existing ideas.'})]}):i.map(f=>n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${r.includes(f)?"bg-primary/10 border border-primary":"bg-muted/50 hover:bg-muted"}`,onClick:()=>o(f),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-md ${Zu[f]}`,children:n.jsx(mc,{type:f})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:nc[f]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:m_[f]})]})]}),n.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${r.includes(f)?"border-primary bg-primary":"border-muted-foreground"}`,children:r.includes(f)&&n.jsx(Xe,{className:"h-4 w-4 text-primary-foreground"})})]},f))}),n.jsxs(As,{className:"flex items-center justify-between",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:r.length>0&&`${r.length} selected`}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(W,{variant:"outline",onClick:d,children:"Cancel"}),n.jsxs(W,{onClick:m,disabled:r.length===0,children:[n.jsx(fs,{className:"h-4 w-4 mr-1"}),"Generate ",r.length>0?`${r.length} Types`:"Ideas"]})]})]})]})})]})}function e5({state:e}){switch(e){case"completed":return n.jsx(Xe,{className:"h-4 w-4 text-success"});case"failed":return n.jsx(yn,{className:"h-4 w-4 text-destructive"});case"generating":return n.jsx(we,{className:"h-4 w-4 text-primary animate-spin"});default:return n.jsx(yo,{className:"h-4 w-4 text-muted-foreground"})}}function t5(){return n.jsx(Le,{className:"p-4 animate-pulse",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-5 w-24 bg-muted rounded"}),n.jsx("div",{className:"h-5 w-16 bg-muted rounded"})]}),n.jsx("div",{className:"h-4 w-3/4 bg-muted rounded"}),n.jsx("div",{className:"h-3 w-full bg-muted rounded"}),n.jsx("div",{className:"h-3 w-2/3 bg-muted rounded"})]})})})}function nV(e){return e.type==="code_improvements"}function rV(e){return e.type==="ui_ux_improvements"}function iV(e){return e.type==="documentation_gaps"}function aV(e){return e.type==="security_hardening"}function oV(e){return e.type==="performance_optimizations"}function lV(e){return e.type==="code_quality"}function AC({idea:e,isSelected:t,onClick:s,onConvert:r,onGoToTask:i,onDismiss:a,onToggleSelect:o}){const{t:l}=Re("common"),u=e.status==="dismissed",d=e.status==="archived",m=e.status==="converted",f=u||d;return n.jsx(Le,{className:`p-4 hover:bg-muted/50 cursor-pointer transition-colors ${f?"opacity-50":""} ${t?"ring-2 ring-primary bg-primary/5":""}`,onClick:s,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"pt-0.5",onClick:x=>{x.stopPropagation(),o(e.id)},children:n.jsx(Ui,{checked:t,onCheckedChange:()=>o(e.id),className:"data-[state=checked]:bg-primary data-[state=checked]:border-primary","aria-label":l("accessibility.selectIdeaAriaLabel",{title:e.title})})}),n.jsxs("div",{className:"flex-1 flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsxs(oe,{variant:"outline",className:Zu[e.type],children:[n.jsx(mc,{type:e.type}),n.jsx("span",{className:"ml-1",children:nc[e.type]})]}),e.status!=="draft"&&n.jsx(oe,{variant:"outline",className:_5[e.status],children:e.status}),nV(e)&&n.jsx(oe,{variant:"outline",className:xp[e.estimatedEffort],children:e.estimatedEffort}),rV(e)&&n.jsx(oe,{variant:"outline",children:C5[e.category]}),iV(e)&&n.jsx(oe,{variant:"outline",children:k5[e.category]}),aV(e)&&n.jsx(oe,{variant:"outline",className:N5[e.severity],children:e.severity}),oV(e)&&n.jsxs(oe,{variant:"outline",className:LC[e.impact],children:[e.impact," impact"]}),lV(e)&&n.jsx(oe,{variant:"outline",className:A5[e.severity],children:e.severity})]}),n.jsx("h3",{className:`font-medium ${f?"line-through":""}`,children:e.title}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),!f&&!m&&n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:x=>{x.stopPropagation(),r(e)},"aria-label":l("accessibility.convertToTaskAriaLabel"),children:n.jsx(Zr,{className:"h-4 w-4"})})}),n.jsx(mt,{children:l("accessibility.convertToTaskAriaLabel")})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground hover:text-destructive",onClick:x=>{x.stopPropagation(),a(e)},"aria-label":l("accessibility.dismissAriaLabel"),children:n.jsx(Ss,{className:"h-4 w-4"})})}),n.jsx(mt,{children:l("accessibility.dismissAriaLabel")})]})]}),d&&e.taskId&&i&&n.jsx("div",{className:"flex items-center gap-1 ml-2",children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-primary",onClick:x=>{x.stopPropagation(),i(e.taskId)},"aria-label":l("accessibility.goToTaskAriaLabel"),children:n.jsx(Zt,{className:"h-4 w-4"})})}),n.jsx(mt,{children:l("accessibility.goToTaskAriaLabel")})]})}),m&&e.taskId&&i&&n.jsx("div",{className:"flex items-center gap-1 ml-2",children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-primary",onClick:x=>{x.stopPropagation(),i(e.taskId)},"aria-label":l("accessibility.goToTaskAriaLabel"),children:n.jsx(Zt,{className:"h-4 w-4"})})}),n.jsx(mt,{children:l("accessibility.goToTaskAriaLabel")})]})})]})]})})}function KDe({idea:e}){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${xp[e.estimatedEffort]}`,children:e.estimatedEffort}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:"text-lg font-semibold",children:e.affectedFiles?.length??0}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Files"})]})]}),e.buildsUpon&&e.buildsUpon.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4"}),"Builds Upon"]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.buildsUpon.map((t,s)=>n.jsx(oe,{variant:"outline",className:"text-xs",children:t},s))})]}),e.implementationApproach&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(qb,{className:"h-4 w-4"}),"Implementation Approach"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.implementationApproach})]}),e.affectedFiles&&e.affectedFiles.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Affected Files"]}),n.jsx("ul",{className:"space-y-1",children:e.affectedFiles.map((t,s)=>n.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},s))})]}),e.existingPatterns&&e.existingPatterns.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Patterns to Follow"}),n.jsx("ul",{className:"space-y-1",children:e.existingPatterns.map((t,s)=>n.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[n.jsx(yo,{className:"h-3 w-3 mt-1.5 shrink-0"}),t]},s))})]})]})}function YDe({idea:e}){return n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsx(oe,{variant:"outline",className:"text-sm",children:C5[e.category]})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4"}),"Current State"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentState})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Xe,{className:"h-4 w-4"}),"Proposed Change"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.proposedChange})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Oa,{className:"h-4 w-4"}),"User Benefit"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.userBenefit})]}),e.affectedComponents&&e.affectedComponents.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Affected Components"]}),n.jsx("ul",{className:"space-y-1",children:e.affectedComponents.map((t,s)=>n.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},s))})]})]})}function XDe({idea:e}){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:"text-lg font-semibold",children:k5[e.category]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Category"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${xp[e.estimatedEffort]}`,children:e.estimatedEffort}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Oa,{className:"h-4 w-4"}),"Target Audience"]}),n.jsx(oe,{variant:"outline",className:"capitalize",children:e.targetAudience})]}),e.currentDocumentation&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4"}),"Current Documentation"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentDocumentation})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Xe,{className:"h-4 w-4"}),"Proposed Content"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.proposedContent})]}),e.affectedAreas&&e.affectedAreas.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Affected Areas"]}),n.jsx("ul",{className:"space-y-1",children:e.affectedAreas.map((t,s)=>n.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},s))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Priority"}),n.jsx(oe,{variant:"outline",className:LC[e.priority],children:e.priority})]})]})}function ZDe({idea:e}){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${N5[e.severity]}`,children:e.severity}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Severity"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:"text-lg font-semibold",children:e.affectedFiles?.length??0}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Files"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(xa,{className:"h-4 w-4"}),"Category"]}),n.jsx(oe,{variant:"outline",children:J9[e.category]})]}),e.vulnerability&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-warning"}),"Vulnerability"]}),n.jsx("p",{className:"text-sm font-mono text-muted-foreground",children:e.vulnerability})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4"}),"Current Risk"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentRisk})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(uo,{className:"h-4 w-4"}),"Remediation"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.remediation})]}),e.affectedFiles&&e.affectedFiles.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Affected Files"]}),n.jsx("ul",{className:"space-y-1",children:e.affectedFiles.map((t,s)=>n.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},s))})]}),e.references&&e.references.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Zt,{className:"h-4 w-4"}),"References"]}),n.jsx("ul",{className:"space-y-1",children:e.references.map((t,s)=>n.jsx("li",{className:"text-sm text-primary hover:underline",children:n.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t})},s))})]}),e.compliance&&e.compliance.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Compliance"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.compliance.map((t,s)=>n.jsx(oe,{variant:"outline",className:"text-xs",children:t},s))})]})]})}function QDe(e){switch(e){case"bundle_size":return n.jsx(wne,{className:"h-4 w-4"});case"database":return n.jsx(oc,{className:"h-4 w-4"});case"network":return n.jsx(xae,{className:"h-4 w-4"});case"memory":return n.jsx(tO,{className:"h-4 w-4"});default:return n.jsx(Sp,{className:"h-4 w-4"})}}function JDe({idea:e}){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${LC[e.impact]}`,children:e.impact}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Impact"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${xp[e.estimatedEffort]}`,children:e.estimatedEffort}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[QDe(e.category),"Category"]}),n.jsx(oe,{variant:"outline",children:eq[e.category]})]}),e.currentMetric&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4"}),"Current State"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentMetric})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4 text-success"}),"Expected Improvement"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.expectedImprovement})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(uo,{className:"h-4 w-4"}),"Implementation"]}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:e.implementation})]}),e.affectedAreas&&e.affectedAreas.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Affected Areas"]}),n.jsx("ul",{className:"space-y-1",children:e.affectedAreas.map((t,s)=>n.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},s))})]}),e.tradeoffs&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-warning"}),"Tradeoffs"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.tradeoffs})]})]})}function eIe({idea:e}){return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${A5[e.severity]}`,children:e.severity}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Severity"})]}),n.jsxs(Le,{className:"p-3 text-center",children:[n.jsx("div",{className:`text-lg font-semibold ${xp[e.estimatedEffort]}`,children:e.estimatedEffort}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Effort"})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(qb,{className:"h-4 w-4"}),"Category"]}),n.jsx(oe,{variant:"outline",children:tq[e.category]})]}),e.breakingChange&&n.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4 text-destructive"}),n.jsx("span",{className:"text-sm font-medium text-destructive",children:"Breaking Change"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This refactoring may break existing code or tests."})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4"}),"Current State"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.currentState})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(gi,{className:"h-4 w-4 text-success"}),"Proposed Change"]}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-line",children:e.proposedChange})]}),e.codeExample&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Code Example"]}),n.jsx("pre",{className:"text-xs font-mono bg-muted/50 p-3 rounded-lg overflow-x-auto",children:e.codeExample})]}),e.metrics&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Metrics"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.metrics.lineCount&&n.jsxs(Le,{className:"p-2 text-center",children:[n.jsx("div",{className:"text-sm font-semibold",children:e.metrics.lineCount}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Lines"})]}),e.metrics.complexity&&n.jsxs(Le,{className:"p-2 text-center",children:[n.jsx("div",{className:"text-sm font-semibold",children:e.metrics.complexity}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Complexity"})]}),e.metrics.duplicateLines&&n.jsxs(Le,{className:"p-2 text-center",children:[n.jsx("div",{className:"text-sm font-semibold",children:e.metrics.duplicateLines}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Duplicate Lines"})]}),e.metrics.testCoverage!==void 0&&n.jsxs(Le,{className:"p-2 text-center",children:[n.jsxs("div",{className:"text-sm font-semibold",children:[e.metrics.testCoverage,"%"]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Test Coverage"})]})]})]}),e.affectedFiles&&e.affectedFiles.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Affected Files"]}),n.jsx("ul",{className:"space-y-1",children:e.affectedFiles.map((t,s)=>n.jsx("li",{className:"text-sm font-mono text-muted-foreground",children:t},s))})]}),e.bestPractice&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(jp,{className:"h-4 w-4"}),"Best Practice"]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.bestPractice})]}),e.prerequisites&&e.prerequisites.length>0&&n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(cr,{className:"h-4 w-4"}),"Prerequisites"]}),n.jsx("ul",{className:"space-y-1",children:e.prerequisites.map((t,s)=>n.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[n.jsx("span",{className:"text-muted-foreground",children:""}),t]},s))})]})]})}function cV({idea:e,onClose:t,onConvert:s,onGoToTask:r,onDismiss:i,isConverting:a}){const{t:o}=Re("common"),l=e.status==="dismissed",u=e.status==="converted";return n.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-card border-l border-border shadow-lg flex flex-col z-50",children:[n.jsx("div",{className:"shrink-0 p-4 border-b border-border electron-no-drag",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs(oe,{variant:"outline",className:Zu[e.type],children:[n.jsx(mc,{type:e.type}),n.jsx("span",{className:"ml-1",children:nc[e.type]})]}),e.status!=="draft"&&n.jsx(oe,{variant:"outline",className:_5[e.status],children:e.status})]}),n.jsx("h2",{className:"font-semibold",children:e.title})]}),n.jsx(W,{variant:"ghost",size:"icon",onClick:t,"aria-label":o("accessibility.closePanelAriaLabel"),children:n.jsx(Xt,{className:"h-4 w-4"})})]})}),n.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:o("common:ideation.description")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(zi,{className:"h-4 w-4"}),o("common:ideation.rationale")]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.rationale})]}),nV(e)&&n.jsx(KDe,{idea:e}),rV(e)&&n.jsx(YDe,{idea:e}),iV(e)&&n.jsx(XDe,{idea:e}),aV(e)&&n.jsx(ZDe,{idea:e}),oV(e)&&n.jsx(JDe,{idea:e}),lV(e)&&n.jsx(eIe,{idea:e})]}),!l&&!u&&n.jsxs("div",{className:"shrink-0 p-4 border-t border-border space-y-2",children:[n.jsxs(W,{className:"w-full",onClick:()=>s(e),disabled:a,children:[a?n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Zr,{className:"h-4 w-4 mr-2"}),o(a?"common:ideation.converting":"common:ideation.convertToTask")]}),n.jsxs(W,{variant:"outline",className:"w-full",onClick:()=>{i(e),t()},children:[n.jsx(Ss,{className:"h-4 w-4 mr-2"}),o("common:ideation.dismissIdea")]})]}),u&&e.taskId&&r&&n.jsx("div",{className:"shrink-0 p-4 border-t border-border",children:n.jsxs(W,{className:"w-full",onClick:()=>r(e.taskId),children:[n.jsx(Zt,{className:"h-4 w-4 mr-2"}),o("common:ideation.goToTask")]})})]})}function tIe({generationStatus:e,logs:t,typeStates:s,enabledTypes:r,session:i,onSelectIdea:a,selectedIdea:o,onConvert:l,onGoToTask:u,onDismiss:d,onStop:m}){const f=p.useRef(null),[x,v]=p.useState(!1),[y,w]=p.useState(!1),S=async()=>{if(!y){w(!0);try{await m()}catch(j){console.error("Failed to stop generation:",j)}finally{w(!1)}}};p.useEffect(()=>{f.current&&x&&f.current.scrollIntoView({behavior:"smooth"})},[t,x]);const C=j=>i?i.ideas.filter(T=>T.type===j&&T.status!=="dismissed"&&T.status!=="archived"):[];r.filter(j=>s[j]==="generating").length;const _=r.filter(j=>s[j]==="completed").length;return n.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"shrink-0 border-b border-border p-4 bg-card/50",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Qt,{className:"h-5 w-5 text-primary animate-pulse"}),n.jsx("h2",{className:"text-lg font-semibold",children:"Generating Ideas"}),n.jsxs(oe,{variant:"outline",children:[_,"/",r.length," complete"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.message})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>v(!x),children:[n.jsx(Ms,{className:"h-4 w-4 mr-1"}),x?"Hide":"Show"," Logs"]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"destructive",size:"sm",onClick:S,disabled:y,children:[n.jsx(jo,{className:"h-4 w-4 mr-1"}),y?"Stopping...":"Stop"]})}),n.jsx(mt,{children:"Stop generation"})]})]})]}),n.jsx(xi,{value:e.progress,className:"mt-3"}),n.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.map(j=>n.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md text-xs ${s[j]==="completed"?"bg-success/10 text-success":s[j]==="failed"?"bg-destructive/10 text-destructive":s[j]==="generating"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:[n.jsx(e5,{state:s[j]}),n.jsx(mc,{type:j}),n.jsx("span",{children:nc[j]}),s[j]==="completed"&&i&&n.jsxs("span",{className:"ml-1 font-medium",children:["(",C(j).length,")"]})]},j))})]}),x&&t.length>0&&n.jsx("div",{className:"shrink-0 border-b border-border p-4 bg-muted/20",children:n.jsx(zt,{className:"h-32 rounded-md border border-border bg-muted/30",children:n.jsxs("div",{className:"p-3 space-y-1 font-mono text-xs",children:[t.map((j,T)=>n.jsxs("div",{className:"text-muted-foreground leading-relaxed",children:[n.jsx("span",{className:"text-muted-foreground/50 mr-2 select-none",children:String(T+1).padStart(3,"0")}),j]},T)),n.jsx("div",{ref:f})]})})}),n.jsxs("div",{className:"flex-1 overflow-auto p-4",children:[e.error&&n.jsx("div",{className:"mb-4 p-3 bg-destructive/10 rounded-md text-destructive text-sm",children:e.error}),n.jsx("div",{className:"space-y-6",children:r.map(j=>{const T=C(j),E=s[j];return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("div",{className:`p-1.5 rounded-md ${Zu[j]}`,children:n.jsx(mc,{type:j})}),n.jsx("h3",{className:"font-medium",children:nc[j]}),n.jsx(e5,{state:E}),T.length>0&&n.jsxs(oe,{variant:"outline",className:"ml-auto",children:[T.length," ideas"]})]}),n.jsxs("div",{className:"grid gap-3",children:[T.map(A=>n.jsx(AC,{idea:A,isSelected:!1,onClick:()=>a(o?.id===A.id?null:A),onConvert:l,onGoToTask:u,onDismiss:d,onToggleSelect:()=>{}},A.id)),E==="generating"&&n.jsxs(n.Fragment,{children:[n.jsx(t5,{}),n.jsx(t5,{})]}),E==="pending"&&n.jsx("div",{className:"text-sm text-muted-foreground py-2",children:"Waiting to start..."}),E==="failed"&&T.length===0&&n.jsx("div",{className:"text-sm text-destructive py-2",children:"Failed to generate ideas for this category"}),E==="completed"&&T.length===0&&n.jsx("div",{className:"text-sm text-muted-foreground py-2",children:"No ideas generated for this category"})]})]},j)})})]}),o&&n.jsx(cV,{idea:o,onClose:()=>a(null),onConvert:l,onGoToTask:u,onDismiss:d})]})}const s5=300*1e3,Db=new Map;function $u(e){const t=Db.get(e);t&&(clearTimeout(t),Db.delete(e))}const c_={phase:"idle",progress:0,message:""},sIe={enabledTypes:[...px.enabledTypes],includeRoadmapContext:px.includeRoadmapContext,includeKanbanContext:px.includeKanbanContext,maxIdeasPerType:px.maxIdeasPerType},tv={code_improvements:"pending",ui_ux_improvements:"pending",documentation_gaps:"pending",security_hardening:"pending",performance_optimizations:"pending",code_quality:"pending"},Zs=Gn(e=>({currentProjectId:null,session:null,generationStatus:c_,config:sIe,logs:[],typeStates:{...tv},selectedIds:new Set,isGenerating:!1,setCurrentProjectId:t=>e(s=>s.currentProjectId!==t?{currentProjectId:t,session:null,generationStatus:c_,logs:[],typeStates:{...tv},selectedIds:new Set,isGenerating:!1}:{currentProjectId:t}),setSession:t=>e({session:t}),setIsGenerating:t=>e({isGenerating:t}),setGenerationStatus:t=>e({generationStatus:t}),setConfig:t=>e(s=>({config:{...s.config,...t}})),updateIdeaStatus:(t,s)=>e(r=>{if(!r.session)return r;const i=r.session.ideas.map(a=>a.id===t?{...a,status:s}:a);return{session:{...r.session,ideas:i,updatedAt:new Date}}}),setIdeaTaskId:(t,s)=>e(r=>{if(!r.session)return r;const i=r.session.ideas.map(a=>a.id===t?{...a,taskId:s,status:"archived"}:a);return{session:{...r.session,ideas:i,updatedAt:new Date}}}),dismissIdea:t=>e(s=>{if(!s.session)return s;const r=s.session.ideas.map(i=>i.id===t?{...i,status:"dismissed"}:i);return{session:{...s.session,ideas:r,updatedAt:new Date}}}),dismissAllIdeas:()=>e(t=>{if(!t.session)return t;const s=t.session.ideas.map(r=>r.status!=="dismissed"&&r.status!=="converted"&&r.status!=="archived"?{...r,status:"dismissed"}:r);return{session:{...t.session,ideas:s,updatedAt:new Date}}}),archiveIdea:t=>e(s=>{if(!s.session)return s;const r=s.session.ideas.map(i=>i.id===t?{...i,status:"archived"}:i);return{session:{...s.session,ideas:r,updatedAt:new Date}}}),deleteIdea:t=>e(s=>{if(!s.session)return s;const r=s.session.ideas.filter(a=>a.id!==t),i=new Set(s.selectedIds);return i.delete(t),{session:{...s.session,ideas:r,updatedAt:new Date},selectedIds:i}}),deleteMultipleIdeas:t=>e(s=>{if(!s.session)return s;const r=new Set(t),i=s.session.ideas.filter(o=>!r.has(o.id)),a=new Set(s.selectedIds);return t.forEach(o=>a.delete(o)),{session:{...s.session,ideas:i,updatedAt:new Date},selectedIds:a}}),clearSession:()=>e({session:null,generationStatus:c_,typeStates:{...tv},selectedIds:new Set}),addLog:t=>e(s=>({logs:[...s.logs,t].slice(-100)})),clearLogs:()=>e({logs:[]}),toggleSelectIdea:t=>e(s=>{const r=new Set(s.selectedIds);return r.has(t)?r.delete(t):r.add(t),{selectedIds:r}}),selectAllIdeas:t=>e(()=>({selectedIds:new Set(t)})),clearSelection:()=>e(()=>({selectedIds:new Set})),initializeTypeStates:t=>e(s=>{const r={...tv};return t.forEach(i=>{r[i]="generating"}),Object.keys(r).forEach(i=>{t.includes(i)||(r[i]="pending")}),{typeStates:r}}),setTypeState:(t,s)=>e(r=>({typeStates:{...r.typeStates,[t]:s}})),addIdeasForType:(t,s)=>e(r=>{const i={...r.typeStates};if(i[t]="completed",!r.session){const o=r.config;return{typeStates:i,session:{id:`session-${Date.now()}`,projectId:"",config:o,ideas:s,projectContext:{existingFeatures:[],techStack:[],plannedFeatures:[]},generatedAt:new Date,updatedAt:new Date}}}const a=r.session.ideas.filter(o=>o.type!==t);return{typeStates:i,session:{...r.session,ideas:[...a,...s],updatedAt:new Date}}}),resetGeneratingTypes:t=>e(s=>{const r={...s.typeStates};return Object.entries(r).forEach(([i,a])=>{a==="generating"&&(r[i]=t)}),{typeStates:r}})}));async function nIe(e){const t=Zs.getState();if(t.setCurrentProjectId(e),t.isGenerating)return;const s=await window.electronAPI.getIdeation(e),r=Zs.getState();r.isGenerating||r.currentProjectId!==e||(s.success&&s.data?r.setSession(s.data):r.setSession(null))}function n5(e){const t=Zs.getState(),s=t.config;window.DEBUG&&console.log("[Ideation] Starting generation:",{projectId:e,enabledTypes:s.enabledTypes,includeRoadmapContext:s.includeRoadmapContext,includeKanbanContext:s.includeKanbanContext,maxIdeasPerType:s.maxIdeasPerType}),$u(e),t.clearLogs(),t.clearSession(),t.setIsGenerating(!0),t.initializeTypeStates(s.enabledTypes),t.addLog("Starting ideation generation in parallel..."),t.setGenerationStatus({phase:"generating",progress:0,message:`Generating ${s.enabledTypes.length} ideation types in parallel...`});const r=setTimeout(()=>{const i=Zs.getState();i.generationStatus.phase==="generating"&&(window.DEBUG&&console.warn("[Ideation] Generation timed out after",s5,"ms"),$u(e),i.setIsGenerating(!1),i.resetGeneratingTypes("failed"),i.setGenerationStatus({phase:"error",progress:0,message:"",error:"Generation timed out. Some ideas may have been generated - check the results."}),i.addLog(" Generation timed out"))},s5);Db.set(e,r),window.electronAPI.generateIdeation(e,s)}async function rIe(e){const t=Zs.getState();window.DEBUG&&console.log("[Ideation] Stop requested:",{projectId:e}),t.setIsGenerating(!1),t.addLog("Stopping ideation generation..."),t.setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"});const s=await window.electronAPI.stopIdeation(e);return window.DEBUG&&console.log("[Ideation] Stop result:",{projectId:e,success:s.success}),s.success?t.addLog("Ideation generation stopped"):t.addLog("Process already stopped"),s.success}async function r5(e){const t=Zs.getState(),s=t.config;await window.electronAPI.stopIdeation(e),t.clearLogs(),t.clearSession(),t.setIsGenerating(!0),t.initializeTypeStates(s.enabledTypes),t.addLog("Refreshing ideation in parallel..."),t.setGenerationStatus({phase:"generating",progress:0,message:`Refreshing ${s.enabledTypes.length} ideation types in parallel...`}),window.electronAPI.refreshIdeation(e,s)}async function iIe(e){const t=Zs.getState(),s=await window.electronAPI.dismissAllIdeas(e);return s.success&&(t.dismissAllIdeas(),t.addLog("All ideas dismissed")),s.success}async function aIe(e,t){const s=Zs.getState(),r=await window.electronAPI.deleteMultipleIdeas(e,t);return r.success&&(s.deleteMultipleIdeas(t),s.clearSelection(),s.addLog(`${t.length} ideas deleted`)),r.success}function i5(e,t){const s=Zs.getState(),r=s.config;s.clearLogs(),s.setIsGenerating(!0),{...s.typeStates},t.forEach(a=>{}),s.initializeTypeStates(t),s.addLog(`Adding ${t.length} new ideation types...`),s.setGenerationStatus({phase:"generating",progress:0,message:`Generating ${t.length} additional ideation types...`});const i={...r,enabledTypes:t,append:!0};window.electronAPI.generateIdeation(e,i)}function oIe(e,t){return e?e.ideas.filter(s=>s.type===t):[]}function lIe(e){return e?e.ideas.filter(t=>t.status!=="dismissed"&&t.status!=="archived"):[]}function cIe(e){return e?e.ideas.filter(t=>t.status==="archived"):[]}function dIe(e){if(!e)return{totalIdeas:0,byType:{},byStatus:{}};const t=e.ideas.filter(i=>i.status!=="dismissed"&&i.status!=="archived"),s={},r={};return t.forEach(i=>{s[i.type]=(s[i.type]||0)+1,r[i.status]=(r[i.status]||0)+1}),{totalIdeas:t.length,byType:s,byStatus:r,lastGenerated:e.generatedAt}}function uIe(){const e=Zs.getState,t=d=>e().currentProjectId===d,s=window.electronAPI.onIdeationProgress((d,m)=>{if(!t(d)){window.DEBUG&&console.log("[Ideation] Ignoring progress for different project:",d);return}window.DEBUG&&console.log("[Ideation] Progress update:",{projectId:d,phase:m.phase,progress:m.progress,message:m.message}),e().setGenerationStatus(m)}),r=window.electronAPI.onIdeationLog((d,m)=>{t(d)&&e().addLog(m)}),i=window.electronAPI.onIdeationTypeComplete((d,m,f)=>{if(!t(d)){window.DEBUG&&console.log("[Ideation] Ignoring type complete for different project:",d);return}window.DEBUG&&console.log("[Ideation] Type completed:",{projectId:d,ideationType:m,ideasCount:f.length,ideas:f.map(_=>({id:_.id,title:_.title,type:_.type}))}),e().addIdeasForType(m,f),e().addLog(` ${m} completed with ${f.length} ideas`);const x=e().config,y={...e().typeStates,[m]:"completed"},w=Object.entries(y).filter(([_,j])=>x.enabledTypes.includes(_)&&(j==="completed"||j==="failed")).length,S=x.enabledTypes.length,C=Math.round(w/S*100);e().setGenerationStatus({phase:"generating",progress:C,message:`${w}/${S} ideation types complete`})}),a=window.electronAPI.onIdeationTypeFailed((d,m)=>{t(d)&&(window.DEBUG&&console.error("[Ideation] Type failed:",{projectId:d,ideationType:m}),e().setTypeState(m,"failed"),e().addLog(` ${m} failed`))}),o=window.electronAPI.onIdeationComplete((d,m)=>{if(!t(d)){window.DEBUG&&console.log("[Ideation] Ignoring complete for different project:",d);return}window.DEBUG&&console.log("[Ideation] Generation complete:",{projectId:d,totalIdeas:m.ideas.length,ideaTypes:m.ideas.reduce((f,x)=>(f[x.type]=(f[x.type]||0)+1,f),{})}),$u(d),e().setIsGenerating(!1),e().setSession(m),e().resetGeneratingTypes("completed"),e().setGenerationStatus({phase:"complete",progress:100,message:"Ideation complete"}),e().addLog("Ideation generation complete!")}),l=window.electronAPI.onIdeationError((d,m)=>{t(d)&&(window.DEBUG&&console.error("[Ideation] Error received:",{projectId:d,error:m}),$u(d),e().setIsGenerating(!1),e().resetGeneratingTypes("failed"),e().setGenerationStatus({phase:"error",progress:0,message:"",error:m}),e().addLog(`Error: ${m}`))}),u=window.electronAPI.onIdeationStopped(d=>{t(d)&&(window.DEBUG&&console.log("[Ideation] Stopped:",{projectId:d}),$u(d),e().setIsGenerating(!1),e().resetGeneratingTypes("pending"),e().setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"}),e().addLog("Ideation generation stopped"))});return()=>{for(const[d]of Db)$u(d);s(),r(),i(),a(),o(),l(),u()}}function hIe(){const[e,t]=p.useState(null),[s,r]=p.useState(!0),[i,a]=p.useState(null),o=cs(d=>d.activeProfileId),l=async d=>{if(d&&d!=="")return!0;try{const m=await window.electronAPI.getAPIProfiles();return!!(m.success&&m.data?.activeProfileId&&m.data.activeProfileId!=="")}catch{return!1}};return p.useEffect(()=>{(async()=>{r(!0),a(null);try{const m=await window.electronAPI.checkSourceToken(),f=m.success&&m.data?.hasToken,x=await l(o);t(!!(f||x))}catch(m){t(!1),a(m instanceof Error?m.message:"Unknown error")}finally{r(!1)}})()},[o]),{hasToken:e,isLoading:s,error:i,checkAuth:async()=>{r(!0),a(null);try{const d=await window.electronAPI.checkSourceToken(),m=d.success&&d.data?.hasToken,f=await l(o);t(!!(m||f))}catch(d){t(!1),a(d instanceof Error?d.message:"Unknown error")}finally{r(!1)}}}}function mIe(e,t={}){const{onGoToTask:s,showArchived:r}=t,{t:i}=Re("common"),a=Zs(je=>je.session),o=Zs(je=>je.generationStatus),l=Zs(je=>je.isGenerating),u=Zs(je=>je.config),d=Zs(je=>je.setConfig),m=Zs(je=>je.logs),f=Zs(je=>je.typeStates),x=Zs(je=>je.selectedIds),v=Zs(je=>je.toggleSelectIdea),y=Zs(je=>je.selectAllIdeas),w=Zs(je=>je.clearSelection),[S,C]=p.useState(null),[_,j]=p.useState("all"),[T,E]=p.useState(!1),[A,R]=p.useState(!1),[D,M]=p.useState(!1),[P,O]=p.useState(!1),[F,$]=p.useState(null),[z,H]=p.useState(!1),[I,V]=p.useState([]),[B,K]=p.useState(new Set),L=p.useRef(new Set),{hasToken:G,isLoading:Y,checkAuth:q}=hIe();p.useEffect(()=>{const je=uIe();return nIe(e),je},[e]);const Q=async()=>{if(G===!1){$("generate"),O(!0);return}n5(e)},se=async()=>{if(G===!1){$("refresh"),O(!0);return}r5(e)},te=async()=>{await rIe(e)},ee=async()=>{await iIe(e)},pe=()=>{q(),F==="generate"?n5(e):F==="refresh"?r5(e):F==="append"&&I.length>0&&(i5(e,I),V([])),$(null)},fe=()=>{if(!a)return fp;const je=new Set(a.ideas.filter(Ce=>Ce.status!=="dismissed"&&Ce.status!=="archived").map(Ce=>Ce.type));return fp.filter(Ce=>!je.has(Ce))},re=()=>{if(I.length!==0){if(G===!1){$("append"),O(!0);return}i5(e,I),V([]),H(!1)}},Z=je=>{V(Ce=>Ce.includes(je)?Ce.filter(It=>It!==je):[...Ce,je])},ie=async je=>{if(!L.current.has(je.id)){L.current.add(je.id),K(new Set(L.current));try{const Ce=await window.electronAPI.convertIdeaToTask(e,je.id);Ce.success&&Ce.data?(Zs.getState().setIdeaTaskId(je.id,Ce.data.id),po(e)):ed({variant:"destructive",title:i("ideation.conversionFailed"),description:Ce.error||i("ideation.conversionFailedDescription")})}catch(Ce){console.error("Failed to convert idea to task:",Ce),ed({variant:"destructive",title:i("ideation.conversionError"),description:i("ideation.conversionErrorDescription")})}finally{L.current.delete(je.id),K(new Set(L.current))}}},ce=p.useCallback(je=>{s&&s(je)},[s]),He=async je=>{(await window.electronAPI.dismissIdea(e,je.id)).success&&Zs.getState().dismissIdea(je.id)},tt=je=>{const Ce=u.enabledTypes,It=Ce.includes(je)?Ce.filter(be=>be!==je):[...Ce,je];It.length>0&&d({enabledTypes:It})},he=p.useCallback(async()=>{const je=Zs.getState().selectedIds;je.size!==0&&await aIe(e,Array.from(je))},[e]),Ne=p.useCallback(je=>{y(je.map(Ce=>Ce.id))},[y]),Ve=dIe(a),qe=cIe(a),Ze=r!==void 0?r:D,De=p.useCallback(()=>{if(!a)return[];let je=a.ideas;return!A&&!Ze?je=lIe(a):A&&!Ze?je=je.filter(Ce=>Ce.status!=="archived"):!A&&Ze&&(je=je.filter(Ce=>Ce.status!=="dismissed")),je},[a,A,Ze])();return{session:a,generationStatus:o,isGenerating:l,config:u,logs:m,typeStates:f,selectedIdea:S,activeTab:_,showConfigDialog:T,showDismissed:A,showArchived:Ze,showEnvConfigModal:P,showAddMoreDialog:z,typesToAdd:I,hasToken:G,isCheckingToken:Y,summary:Ve,activeIdeas:De,archivedIdeas:qe,selectedIds:x,convertingIdeas:B,setSelectedIdea:C,setActiveTab:j,setShowConfigDialog:E,setShowDismissed:R,setShowArchived:M,setShowEnvConfigModal:O,setShowAddMoreDialog:H,setTypesToAdd:V,setConfig:d,handleGenerate:Q,handleRefresh:se,handleStop:te,handleDismissAll:ee,handleDeleteSelected:he,handleSelectAll:Ne,handleEnvConfigured:pe,getAvailableTypesToAdd:fe,handleAddMoreIdeas:re,toggleTypeToAdd:Z,handleConvertToTask:ie,handleGoToTask:ce,handleDismiss:He,toggleIdeationType:tt,toggleSelectIdea:v,clearSelection:w,getIdeasByType:je=>oIe(a,je)}}function fIe({projectId:e,onGoToTask:t}){const{showArchived:s}=a6(),{session:r,generationStatus:i,isGenerating:a,config:o,logs:l,typeStates:u,selectedIdea:d,activeTab:m,showConfigDialog:f,showDismissed:x,showEnvConfigModal:v,showAddMoreDialog:y,typesToAdd:w,hasToken:S,isCheckingToken:C,summary:_,activeIdeas:j,selectedIds:T,convertingIdeas:E,setSelectedIdea:A,setActiveTab:R,setShowConfigDialog:D,setShowDismissed:M,setShowEnvConfigModal:P,setShowAddMoreDialog:O,setTypesToAdd:F,setConfig:$,handleGenerate:z,handleRefresh:H,handleStop:I,handleDismissAll:V,handleDeleteSelected:B,handleSelectAll:K,handleEnvConfigured:L,getAvailableTypesToAdd:G,handleAddMoreIdeas:Y,toggleTypeToAdd:q,handleConvertToTask:Q,handleGoToTask:se,handleDismiss:te,toggleIdeationType:ee,toggleSelectIdea:pe,clearSelection:fe,getIdeasByType:re}=mIe(e,{onGoToTask:t,showArchived:s});return a?n.jsx(tIe,{generationStatus:i,logs:l,typeStates:u,enabledTypes:o.enabledTypes,session:r,onSelectIdea:A,selectedIdea:d,onConvert:Q,onGoToTask:se,onDismiss:te,onStop:I}):r?n.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[n.jsx(qDe,{totalIdeas:_.totalIdeas,ideaCountByType:_.byType,showDismissed:x,selectedCount:T.size,onToggleShowDismissed:()=>M(!x),onOpenConfig:()=>D(!0),onOpenAddMore:()=>{F([]),O(!0)},onDismissAll:V,onDeleteSelected:B,onSelectAll:()=>K(j),onClearSelection:fe,onRefresh:H,hasActiveIdeas:j.length>0,canAddMore:G().length>0}),n.jsx("div",{className:"flex-1 overflow-hidden",children:n.jsxs(WDe,{activeTab:m,onTabChange:R,children:[n.jsx(Ii,{value:"all",className:"flex-1 overflow-auto p-4",children:n.jsxs("div",{className:"grid gap-3",children:[j.map(Z=>n.jsx(AC,{idea:Z,isSelected:T.has(Z.id),onClick:()=>A(d?.id===Z.id?null:Z),onConvert:Q,onGoToTask:se,onDismiss:te,onToggleSelect:pe},Z.id)),j.length===0&&n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No ideas to display"})]})}),fp.map(Z=>{const ie=re(Z).filter(ce=>!(!x&&ce.status==="dismissed"||!s&&ce.status==="archived"));return n.jsxs(Ii,{value:Z,className:"flex-1 overflow-auto p-4",children:[n.jsx("div",{className:"mb-4 p-3 bg-muted/50 rounded-lg",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:m_[Z]})}),n.jsx("div",{className:"grid gap-3",children:ie.map(ce=>n.jsx(AC,{idea:ce,isSelected:T.has(ce.id),onClick:()=>A(d?.id===ce.id?null:ce),onConvert:Q,onGoToTask:se,onDismiss:te,onToggleSelect:pe},ce.id))})]},Z)})]})}),d&&n.jsx(cV,{idea:d,onClose:()=>A(null),onConvert:Q,onGoToTask:se,onDismiss:te,isConverting:E.has(d.id)}),n.jsx(JL,{showConfigDialog:f,showAddMoreDialog:y,config:o,typesToAdd:w,availableTypesToAdd:G(),onToggleIdeationType:ee,onToggleTypeToAdd:q,onSetConfig:$,onCloseConfigDialog:()=>D(!1),onCloseAddMoreDialog:()=>O(!1),onConfirmAddMore:Y}),n.jsx(QL,{open:v,onOpenChange:P,onConfigured:L,title:"Claude Authentication Required",description:"A Claude Code OAuth token is required to generate AI-powered feature ideas.",projectId:e})]}):n.jsxs(n.Fragment,{children:[n.jsx(VDe,{config:o,hasToken:S,isCheckingToken:C,onGenerate:z,onOpenConfig:()=>D(!0),onToggleIdeationType:ee}),n.jsx(JL,{showConfigDialog:f,showAddMoreDialog:!1,config:o,typesToAdd:[],availableTypesToAdd:[],onToggleIdeationType:ee,onToggleTypeToAdd:()=>{},onSetConfig:$,onCloseConfigDialog:()=>D(!1),onCloseAddMoreDialog:()=>{},onConfirmAddMore:()=>{}}),n.jsx(QL,{open:v,onOpenChange:P,onConfigured:L,title:"Claude Authentication Required",description:"A Claude Code OAuth token is required to generate AI-powered feature ideas.",projectId:e})]})}const a5={phase:"idle",message:""},rr=Gn((e,t)=>({session:null,sessions:[],status:a5,pendingMessage:"",streamingContent:"",currentTool:null,toolsUsed:[],isLoadingSessions:!1,setSession:s=>e({session:s}),setSessions:s=>e({sessions:s}),setStatus:s=>e({status:s}),setLoadingSessions:s=>e({isLoadingSessions:s}),setPendingMessage:s=>e({pendingMessage:s}),addMessage:s=>e(r=>r.session?{session:{...r.session,messages:[...r.session.messages,s],updatedAt:new Date}}:{session:{id:`session-${Date.now()}`,projectId:"",messages:[s],createdAt:new Date,updatedAt:new Date}}),updateLastAssistantMessage:s=>e(r=>{if(!r.session||r.session.messages.length===0)return r;const i=[...r.session.messages],a=i.length-1,o=i[a];return o.role==="assistant"&&(i[a]={...o,content:s}),{session:{...r.session,messages:i,updatedAt:new Date}}}),appendStreamingContent:s=>e(r=>({streamingContent:r.streamingContent+s})),clearStreamingContent:()=>e({streamingContent:""}),setCurrentTool:s=>e({currentTool:s}),addToolUsage:s=>e(r=>({toolsUsed:[...r.toolsUsed,{name:s.name,input:s.input,timestamp:new Date}]})),clearToolsUsed:()=>e({toolsUsed:[]}),finalizeStreamingMessage:s=>e(r=>{const i=r.streamingContent,a=r.toolsUsed.length>0?[...r.toolsUsed]:void 0;if(!i&&!s&&!a)return{streamingContent:"",toolsUsed:[]};const o={id:`msg-${Date.now()}`,role:"assistant",content:i,timestamp:new Date,suggestedTask:s,toolsUsed:a};return r.session?{streamingContent:"",toolsUsed:[],session:{...r.session,messages:[...r.session.messages,o],updatedAt:new Date}}:{streamingContent:"",toolsUsed:[],session:{id:`session-${Date.now()}`,projectId:"",messages:[o],createdAt:new Date,updatedAt:new Date}}}),clearSession:()=>e({session:null,status:a5,pendingMessage:"",streamingContent:"",currentTool:null,toolsUsed:[]})}));async function cw(e){const t=rr.getState();t.setLoadingSessions(!0);try{const s=await window.electronAPI.listInsightsSessions(e);s.success&&s.data?t.setSessions(s.data):t.setSessions([])}finally{t.setLoadingSessions(!1)}}async function dV(e){const t=await window.electronAPI.getInsightsSession(e);t.success&&t.data?rr.getState().setSession(t.data):rr.getState().setSession(null),await cw(e)}function pIe(e,t,s){const r=rr.getState(),i=r.session,a={id:`msg-${Date.now()}`,role:"user",content:t,timestamp:new Date};r.addMessage(a),r.setPendingMessage(""),r.clearStreamingContent(),r.clearToolsUsed(),r.setStatus({phase:"thinking",message:"Processing your message..."});const o=i?.modelConfig;window.electronAPI.sendInsightsMessage(e,t,o)}async function gIe(e){const t=await window.electronAPI.newInsightsSession(e);t.success&&t.data&&(rr.getState().setSession(t.data),await cw(e))}async function xIe(e,t){const s=await window.electronAPI.switchInsightsSession(e,t);s.success&&s.data&&(rr.getState().setSession(s.data),rr.getState().clearStreamingContent(),rr.getState().clearToolsUsed(),rr.getState().setCurrentTool(null),rr.getState().setStatus({phase:"idle",message:""}))}async function vIe(e,t){return(await window.electronAPI.deleteInsightsSession(e,t)).success?(await dV(e),!0):!1}async function bIe(e,t,s){return(await window.electronAPI.renameInsightsSession(e,t,s)).success?(await cw(e),!0):!1}async function yIe(e,t,s){if((await window.electronAPI.updateInsightsModelConfig(e,t,s)).success){const i=rr.getState();return i.session?.id===t&&i.setSession({...i.session,modelConfig:s,updatedAt:new Date}),await cw(e),!0}return!1}async function wIe(e,t,s,r){const i=await window.electronAPI.createTaskFromInsights(e,t,s,r);return i.success&&i.data?i.data:null}function jIe(){const e=rr.getState,t=window.electronAPI.onInsightsStreamChunk((i,a)=>{switch(a.type){case"text":a.content&&(e().appendStreamingContent(a.content),e().setCurrentTool(null),e().setStatus({phase:"streaming",message:"Receiving response..."}));break;case"tool_start":a.tool&&(e().setCurrentTool({name:a.tool.name,input:a.tool.input}),e().addToolUsage({name:a.tool.name,input:a.tool.input}),e().setStatus({phase:"streaming",message:`Using ${a.tool.name}...`}));break;case"tool_end":e().setCurrentTool(null);break;case"task_suggestion":e().setCurrentTool(null),e().finalizeStreamingMessage(a.suggestedTask);break;case"done":e().setCurrentTool(null),e().finalizeStreamingMessage(),e().setStatus({phase:"complete",message:""});break;case"error":e().setCurrentTool(null),e().setStatus({phase:"error",error:a.error});break}}),s=window.electronAPI.onInsightsStatus((i,a)=>{e().setStatus(a)}),r=window.electronAPI.onInsightsError((i,a)=>{e().setStatus({phase:"error",error:a})});return()=>{t(),s(),r()}}function SIe({sessions:e,currentSessionId:t,isLoading:s,onNewSession:r,onSelectSession:i,onDeleteSession:a,onRenameSession:o}){const{t:l}=Re("common"),[u,d]=p.useState(null),[m,f]=p.useState(""),[x,v]=p.useState(null),y=T=>{d(T.id),f(T.title)},w=async()=>{u&&m.trim()&&await o(u,m.trim()),d(null),f("")},S=()=>{d(null),f("")},C=async()=>{x&&(await a(x),v(null))},_=T=>{const E=new Date,A=new Date(T),R=E.getTime()-A.getTime(),D=Math.floor(R/(1e3*60*60*24));return D===0?"Today":D===1?"Yesterday":D<7?`${D} days ago`:A.toLocaleDateString(void 0,{month:"short",day:"numeric"})},j=e.reduce((T,E)=>{const A=_(E.updatedAt);return T[A]||(T[A]=[]),T[A].push(E),T},{});return n.jsxs("div",{className:"flex h-full w-64 flex-col border-r border-border bg-muted/30",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-border px-3 py-3",children:[n.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Chat History"}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsx(W,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:r,"aria-label":l("accessibility.newConversationAriaLabel"),children:n.jsx(fs,{className:"h-4 w-4"})})}),n.jsx(mt,{children:l("accessibility.newConversationAriaLabel")})]})]}),n.jsx(zt,{className:"flex-1",children:s?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-5 w-5 animate-spin text-muted-foreground"})}):e.length===0?n.jsx("div",{className:"px-3 py-8 text-center text-sm text-muted-foreground",children:"No conversations yet"}):n.jsx("div",{className:"py-2",children:Object.entries(j).map(([T,E])=>n.jsxs("div",{className:"mb-2",children:[n.jsx("div",{className:"px-3 py-1 text-[11px] font-medium uppercase tracking-wide text-muted-foreground",children:T}),E.map(A=>n.jsx(_Ie,{session:A,isActive:A.id===t,isEditing:u===A.id,editTitle:m,onSelect:()=>i(A.id),onStartEdit:()=>y(A),onSaveEdit:w,onCancelEdit:S,onEditTitleChange:f,onDelete:()=>v(A.id)},A.id))]},T))})}),n.jsx(Kr,{open:!!x,onOpenChange:()=>v(null),children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:"Delete conversation?"}),n.jsx(Lr,{children:"This will permanently delete this conversation and all its messages. This action cannot be undone."})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{children:"Cancel"}),n.jsx(pi,{onClick:C,children:"Delete"})]})]})})]})}function _Ie({session:e,isActive:t,isEditing:s,editTitle:r,onSelect:i,onStartEdit:a,onSaveEdit:o,onCancelEdit:l,onEditTitleChange:u,onDelete:d}){const{t:m}=Re("common"),f=x=>{x.key==="Enter"?(x.preventDefault(),o()):x.key==="Escape"&&l()};return s?n.jsxs("div",{className:"group flex items-center gap-1 px-2 py-1",children:[n.jsx(Oe,{value:r,onChange:x=>u(x.target.value),onKeyDown:f,className:"h-7 text-sm",autoFocus:!0}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:o,"aria-label":m("accessibility.saveEditAriaLabel"),children:n.jsx(Pt,{className:"h-3.5 w-3.5 text-success"})}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-7 w-7 shrink-0",onClick:l,"aria-label":m("accessibility.cancelEditAriaLabel"),children:n.jsx(Ss,{className:"h-3.5 w-3.5 text-muted-foreground"})})]}):n.jsxs("div",{className:J("group relative cursor-pointer px-2 py-2 transition-colors hover:bg-muted",t&&"bg-primary/10 hover:bg-primary/15"),onClick:i,children:[n.jsxs("div",{className:"flex items-center gap-1.5 pr-7",children:[n.jsx(nh,{className:J("h-4 w-4 shrink-0",t?"text-primary":"text-muted-foreground")}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("p",{className:J("line-clamp-2 text-sm leading-tight break-words",t?"font-medium text-foreground":"text-foreground/80"),children:e.title}),n.jsxs("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:[e.messageCount," message",e.messageCount!==1?"s":""]})]})]}),n.jsxs(mo,{modal:!1,children:[n.jsx(fo,{asChild:!0,onClick:x=>x.stopPropagation(),children:n.jsx(W,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 opacity-0 group-hover:opacity-100 data-[state=open]:opacity-100 hover:bg-muted-foreground/20 transition-opacity","aria-label":m("accessibility.moreOptionsAriaLabel"),children:n.jsx(Z3,{className:"h-3.5 w-3.5"})})}),n.jsxs(La,{align:"end",sideOffset:5,className:"w-36 z-[100]",children:[n.jsxs(Pn,{onSelect:a,children:[n.jsx(fl,{className:"mr-2 h-3.5 w-3.5"}),"Rename"]}),n.jsxs(Pn,{onSelect:d,className:"text-destructive focus:text-destructive",children:[n.jsx(or,{className:"mr-2 h-3.5 w-3.5"}),"Delete"]})]})]})]})}function NIe({currentConfig:e,onSave:t,onClose:s,open:r=!0}){const{t:i}=Re("dialogs"),[a,o]=p.useState(e?.model||"sonnet"),[l,u]=p.useState(e?.thinkingLevel||"medium");p.useEffect(()=>{r&&(o(e?.model||"sonnet"),u(e?.thinkingLevel||"medium"))},[r,e]);const d=()=>{t({profileId:"custom",model:a,thinkingLevel:l})};return n.jsx($s,{open:r,onOpenChange:s,children:n.jsxs(Bs,{className:"sm:max-w-md",children:[n.jsxs(os,{children:[n.jsx(ls,{children:i("customModel.title")}),n.jsx(ws,{children:i("customModel.description")})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"model-select",children:i("customModel.model")}),n.jsxs(_t,{value:a,onValueChange:m=>o(m),children:[n.jsx(yt,{id:"model-select",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ca.map(m=>n.jsx(et,{value:m.value,children:m.label},m.value))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"thinking-select",children:i("customModel.thinkingLevel")}),n.jsxs(_t,{value:l,onValueChange:m=>u(m),children:[n.jsx(yt,{id:"thinking-select",children:n.jsx(Nt,{})}),n.jsx(wt,{children:ld.map(m=>n.jsx(et,{value:m.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:m.label}),n.jsx("span",{className:"text-xs text-muted-foreground",children:m.description})]})},m.value))})]})]})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:s,children:i("customModel.cancel")}),n.jsx(W,{onClick:d,children:i("customModel.apply")})]})]})})}const o5={Brain:Bi,Scale:rh,Zap:vi,Sparkles:Qt};function CIe({currentConfig:e,onConfigChange:t,disabled:s}){const[r,i]=p.useState(!1),a=e?.profileId||"balanced",o=a==="auto"?"balanced":a,l=ar.find(x=>x.id===o),u=o==="custom"?Vv:l?.icon?o5[l.icon]:rh,d=x=>{if(x==="custom"){i(!0);return}const v=ar.find(y=>y.id===x);v&&t({profileId:v.id,model:v.model,thinkingLevel:v.thinkingLevel})},m=x=>{t(x),i(!1)},f=()=>o==="custom"&&e?`${ca.find(v=>v.value===e.model)?.label||e.model} + ${e.thinkingLevel}`:l?.name||"Balanced";return n.jsxs(n.Fragment,{children:[n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsxs(W,{variant:"ghost",size:"sm",className:"h-8 gap-2 px-2",disabled:s,title:`Model: ${f()}`,children:[n.jsx(u,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden text-xs text-muted-foreground sm:inline",children:f()})]})}),n.jsxs(La,{align:"end",className:"w-64",children:[n.jsx(tk,{children:"Agent Profile"}),ar.filter(x=>!x.isAutoProfile).map(x=>{const v=o5[x.icon||"Brain"],y=o===x.id,w=ca.find(S=>S.value===x.model)?.label;return n.jsxs(Pn,{onClick:()=>d(x.id),className:"flex cursor-pointer items-center gap-2",children:[n.jsx(v,{className:"h-4 w-4 shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("div",{className:"font-medium",children:x.name}),n.jsxs("div",{className:"truncate text-xs text-muted-foreground",children:[w," + ",x.thinkingLevel]})]}),y&&n.jsx(Pt,{className:"h-4 w-4 shrink-0 text-primary"})]},x.id)}),n.jsx(ma,{}),n.jsxs(Pn,{onClick:()=>d("custom"),className:"flex cursor-pointer items-center gap-2",children:[n.jsx(Vv,{className:"h-4 w-4 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:"Custom..."}),n.jsx("div",{className:"text-xs text-muted-foreground",children:"Choose model & thinking level"})]}),o==="custom"&&n.jsx(Pt,{className:"h-4 w-4 shrink-0 text-primary"})]})]})]}),n.jsx(NIe,{open:r,currentConfig:e,onSave:m,onClose:()=>i(!1)})]})}const kIe=e=>function({href:s,children:r,...i}){if(!(s&&(s.startsWith("http://")||s.startsWith("https://")||s.startsWith("/")||s.startsWith("#"))))return n.jsx("span",{className:"text-muted-foreground",children:r});const o=s?.startsWith("http://")||s?.startsWith("https://");return n.jsxs("a",{href:s,...i,...o&&{target:"_blank",rel:"noopener noreferrer"},className:"text-primary hover:underline",children:[r,o&&n.jsxs("span",{className:"sr-only",children:[" ",e]})]})};function AIe({projectId:e}){const{t}=Re("common"),s=rr($=>$.session),r=rr($=>$.sessions),i=rr($=>$.status),a=rr($=>$.streamingContent),o=rr($=>$.currentTool),l=rr($=>$.isLoadingSessions),u=p.useMemo(()=>({a:kIe(t("accessibility.opensInNewWindow"))}),[t]),[d,m]=p.useState(""),[f,x]=p.useState(null),[v,y]=p.useState(new Set),[w,S]=p.useState(!0),C=p.useRef(null),_=p.useRef(null);p.useEffect(()=>(dV(e),jIe()),[e]),p.useEffect(()=>{C.current?.scrollIntoView({behavior:"smooth"})},[s?.messages,a]),p.useEffect(()=>{_.current?.focus()},[]),p.useEffect(()=>{y(new Set)},[s?.id]);const j=()=>{const $=d.trim();!$||i.phase==="thinking"||i.phase==="streaming"||(m(""),pIe(e,$))},T=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),j())},E=async()=>{await gIe(e),y(new Set),_.current?.focus()},A=async $=>{$!==s?.id&&await xIe(e,$)},R=async $=>await vIe(e,$),D=async($,z)=>await bIe(e,$,z),M=async $=>{if($.suggestedTask){x($.id);try{await wIe(e,$.suggestedTask.title,$.suggestedTask.description,$.suggestedTask.metadata)&&(y(H=>new Set(H).add($.id)),po(e))}finally{x(null)}}},P=async $=>{s?.id&&await yIe(e,s.id,$)},O=i.phase==="thinking"||i.phase==="streaming",F=s?.messages||[];return n.jsxs("div",{className:"flex h-full",children:[w&&n.jsx(SIe,{sessions:r,currentSessionId:s?.id||null,isLoading:l,onNewSession:E,onSelectSession:A,onDeleteSession:R,onRenameSession:D}),n.jsxs("div",{className:"flex flex-1 flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-border px-6 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>S(!w),title:w?"Hide sidebar":"Show sidebar",children:w?n.jsx(_ie,{className:"h-4 w-4"}):n.jsx(Cie,{className:"h-4 w-4"})}),n.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:n.jsx(Qt,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-foreground",children:"Insights"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ask questions about your codebase"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(CIe,{currentConfig:s?.modelConfig,onConfigChange:P,disabled:O}),n.jsxs(W,{variant:"outline",size:"sm",onClick:E,children:[n.jsx(fs,{className:"mr-2 h-4 w-4"}),"New Chat"]})]})]}),n.jsx(zt,{className:"flex-1 px-6 py-4",children:F.length===0&&!a?n.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-muted",children:n.jsx(nh,{className:"h-8 w-8 text-muted-foreground"})}),n.jsx("h3",{className:"mb-2 text-lg font-medium text-foreground",children:"Start a Conversation"}),n.jsx("p",{className:"max-w-md text-sm text-muted-foreground",children:"Ask questions about your codebase, get suggestions for improvements, or discuss features you'd like to implement."}),n.jsx("div",{className:"mt-6 flex flex-wrap justify-center gap-2",children:["What is the architecture of this project?","Suggest improvements for code quality","What features could I add next?","Are there any security concerns?"].map($=>n.jsx(W,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>{m($),_.current?.focus()},children:$},$))})]}):n.jsxs("div",{className:"space-y-6",children:[F.map($=>n.jsx(EIe,{message:$,markdownComponents:u,onCreateTask:()=>M($),isCreatingTask:f===$.id,taskCreated:v.has($.id)},$.id)),(a||o)&&n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:n.jsx(sd,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"mb-1 text-sm font-medium text-foreground",children:"Assistant"}),a&&n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(ew,{remarkPlugins:[tw],components:u,children:a})}),o&&n.jsx(PIe,{name:o.name,input:o.input})]})]}),i.phase==="thinking"&&!a&&!o&&n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:n.jsx(sd,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),"Thinking..."]})]}),i.phase==="error"&&i.error&&n.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm text-destructive",children:[n.jsx(Ke,{className:"h-4 w-4 shrink-0"}),i.error]}),n.jsx("div",{ref:C})]})}),n.jsxs("div",{className:"border-t border-border p-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(go,{ref:_,value:d,onChange:$=>m($.target.value),onKeyDown:T,placeholder:"Ask about your codebase...",className:"min-h-[80px] resize-none",disabled:O}),n.jsx(W,{onClick:j,disabled:!d.trim()||O,className:"self-end",children:O?n.jsx(we,{className:"h-4 w-4 animate-spin"}):n.jsx(Np,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"Press Enter to send, Shift+Enter for new line"})]})]})]})}function EIe({message:e,markdownComponents:t,onCreateTask:s,isCreatingTask:r,taskCreated:i}){const a=e.role==="user";return n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:J("flex h-8 w-8 shrink-0 items-center justify-center rounded-full",a?"bg-muted":"bg-primary/10"),children:a?n.jsx(Qr,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(sd,{className:"h-4 w-4 text-primary"})}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"text-sm font-medium text-foreground",children:a?"You":"Assistant"}),n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(ew,{remarkPlugins:[tw],components:t,children:e.content})}),!a&&e.toolsUsed&&e.toolsUsed.length>0&&n.jsx(TIe,{tools:e.toolsUsed}),e.suggestedTask&&n.jsx(Le,{className:"mt-3 border-primary/20 bg-primary/5",children:n.jsxs(Ye,{className:"p-4",children:[n.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[n.jsx(Qt,{className:"h-4 w-4 text-primary"}),n.jsx("span",{className:"text-sm font-medium text-primary",children:"Suggested Task"})]}),n.jsx("h4",{className:"mb-2 font-medium text-foreground",children:e.suggestedTask.title}),n.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:e.suggestedTask.description}),e.suggestedTask.metadata&&n.jsxs("div",{className:"mb-3 flex flex-wrap gap-2",children:[e.suggestedTask.metadata.category&&n.jsx(oe,{variant:"outline",className:J("text-xs",DC[e.suggestedTask.metadata.category]),children:RC[e.suggestedTask.metadata.category]||e.suggestedTask.metadata.category}),e.suggestedTask.metadata.complexity&&n.jsx(oe,{variant:"outline",className:J("text-xs",MC[e.suggestedTask.metadata.complexity]),children:IC[e.suggestedTask.metadata.complexity]||e.suggestedTask.metadata.complexity})]}),n.jsx(W,{size:"sm",onClick:s,disabled:r||i,children:r?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):i?n.jsxs(n.Fragment,{children:[n.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Task Created"]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"mr-2 h-4 w-4"}),"Create Task"]})})]})})]})]})}function TIe({tools:e}){const[t,s]=p.useState(!1);if(e.length===0)return null;const r=e.reduce((o,l)=>(o[l.name]=(o[l.name]||0)+1,o),{}),i=o=>{switch(o){case"Read":return $n;case"Glob":return a1;case"Grep":return Nr;default:return $n}},a=o=>{switch(o){case"Read":return"text-blue-500";case"Glob":return"text-amber-500";case"Grep":return"text-green-500";default:return"text-muted-foreground"}};return n.jsxs("div",{className:"mt-2",children:[n.jsxs("button",{onClick:()=>s(!t),className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx("span",{className:"flex items-center gap-1",children:Object.entries(r).map(([o,l])=>{const u=i(o);return n.jsxs("span",{className:J("flex items-center gap-0.5",a(o)),children:[n.jsx(u,{className:"h-3 w-3"}),n.jsx("span",{children:l})]},o)})}),n.jsxs("span",{children:[e.length," tool",e.length!==1?"s":""," used"]}),n.jsx("span",{className:"text-[10px]",children:t?"":""})]}),t&&n.jsx("div",{className:"mt-2 space-y-1 rounded-md border border-border bg-muted/30 p-2",children:e.map((o,l)=>{const u=i(o.name);return n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx(u,{className:J("h-3 w-3 shrink-0",a(o.name))}),n.jsx("span",{className:"font-medium",children:o.name}),o.input&&n.jsx("span",{className:"text-muted-foreground truncate max-w-[250px]",children:o.input})]},`${o.name}-${l}`)})})]})}function PIe({name:e,input:t}){const s=o=>{switch(o){case"Read":return{icon:$n,label:"Reading file",color:"text-blue-500 bg-blue-500/10"};case"Glob":return{icon:a1,label:"Searching files",color:"text-amber-500 bg-amber-500/10"};case"Grep":return{icon:Nr,label:"Searching code",color:"text-green-500 bg-green-500/10"};default:return{icon:we,label:o,color:"text-primary bg-primary/10"}}},{icon:r,label:i,color:a}=s(e);return n.jsxs("div",{className:J("mt-2 inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm",a),children:[n.jsx(r,{className:"h-4 w-4 animate-pulse"}),n.jsx("span",{className:"font-medium",children:i}),t&&n.jsx("span",{className:"text-muted-foreground truncate max-w-[300px]",children:t})]})}function RIe(e){const{issues:t,isLoading:s,isLoadingMore:r,error:i,selectedIssueNumber:a,filterState:o,hasMore:l,selectIssue:u,setFilterState:d,getFilteredIssues:m,getOpenIssuesCount:f}=lp(),{syncStatus:x}=VU(),v=p.useRef(!1),[y,w]=p.useState(!1);p.useEffect(()=>{w(!1)},[e]),p.useEffect(()=>{e&&(HN(e),v.current=!0)},[e]),p.useEffect(()=>{e&&x?.connected&&jv(e,o,y)},[e,o,x?.connected]);const S=p.useCallback(()=>{e&&(HN(e),jv(e,o,y))},[e,o,y]),C=p.useCallback(A=>{d(A)},[d]),_=p.useCallback(()=>{e&&!y&&jAe(e,o)},[e,o,y]),j=p.useCallback(()=>{!y&&e&&(w(!0),SAe(e,o))},[y,e,o]),T=p.useCallback(()=>{y&&e&&(w(!1),jv(e,o,!1))},[y,e,o]),E=p.useMemo(()=>t.find(A=>A.number===a)||null,[t,a]);return{issues:t,syncStatus:x,isLoading:s,isLoadingMore:r,error:i,selectedIssueNumber:a,selectedIssue:E,filterState:o,hasMore:!y&&l,selectIssue:u,getFilteredIssues:m,getOpenIssuesCount:f,handleRefresh:S,handleFilterChange:C,handleLoadMore:_,handleSearchStart:j,handleSearchClear:T}}function DIe(e){const{investigationStatus:t,lastInvestigationResult:s,setInvestigationStatus:r,setInvestigationResult:i}=GU(),{setError:a}=lp();p.useEffect(()=>{if(!e)return;const u=window.electronAPI.onGitHubInvestigationProgress((f,x)=>{f===e&&r(x)}),d=window.electronAPI.onGitHubInvestigationComplete((f,x)=>{f===e&&(i(x),x.success&&x.taskId&&po(e))}),m=window.electronAPI.onGitHubInvestigationError((f,x)=>{f===e&&(a(x),r({phase:"error",progress:0,message:x}))});return()=>{u(),d(),m()}},[e,r,i,a]);const o=p.useCallback((u,d)=>{e&&kAe(e,u.number,d)},[e]),l=p.useCallback(()=>{r({phase:"idle",progress:0,message:""})},[r]);return{investigationStatus:t,lastInvestigationResult:s,startInvestigation:o,resetInvestigationStatus:l}}function uV(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function IIe(e,t){if(!t)return e;const s=t.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(s)||r.body?.toLowerCase().includes(s))}function MIe(e,t={}){const{onSearchStart:s,onSearchClear:r}=t,[i,a]=p.useState(""),o=p.useMemo(()=>IIe(e,i),[e,i]);p.useEffect(()=>{i.length>0?s?.():r?.()},[i,s,r]);const l=p.useCallback(d=>{a(d)},[]),u=i.length>0;return{searchQuery:i,setSearchQuery:l,filteredIssues:o,isSearchActive:u}}function LIe(e){const[t,s]=p.useState(null),[r,i]=p.useState([]),[a,o]=p.useState([]),[l,u]=p.useState(!1),[d,m]=p.useState(!1),[f,x]=p.useState(null),v=p.useRef(null),y=p.useCallback(async()=>{if(e){u(!0);try{const[E,A,R]=await Promise.all([window.electronAPI.github.getAutoFixConfig(e),window.electronAPI.github.getAutoFixQueue(e),window.electronAPI.github.getBatches(e)]);s(E),i(A),o(R)}catch(E){console.error("Failed to load auto-fix data:",E)}finally{u(!1)}}},[e]);p.useEffect(()=>{y()},[y]),p.useEffect(()=>e?window.electronAPI.github.onAutoFixComplete(A=>{A===e&&window.electronAPI.github.getAutoFixQueue(e).then(i)}):void 0,[e]),p.useEffect(()=>{if(!e)return;const E=window.electronAPI.github.onBatchProgress((D,M)=>{D===e&&(x(M),M.phase==="complete"&&m(!1))}),A=window.electronAPI.github.onBatchComplete((D,M)=>{D===e&&(o(M),m(!1),x(null))}),R=window.electronAPI.github.onBatchError((D,M)=>{D===e&&(m(!1),x(null))});return()=>{E(),A(),R()}},[e]);const w=p.useCallback(E=>r.find(A=>A.issueNumber===E)||null,[r]),S=p.useCallback(async E=>{if(!e)return!1;try{const A=await window.electronAPI.github.saveAutoFixConfig(e,E);return A&&s(E),A}catch(A){return console.error("Failed to save auto-fix config:",A),!1}},[e]),C=p.useCallback(E=>{e&&(m(!0),x({phase:"analyzing",progress:0,message:"Starting batch analysis...",totalIssues:E?.length??0,batchCount:0}),window.electronAPI.github.batchAutoFix(e,E))},[e]),_=p.useCallback(async E=>{if(!t||!e)return!1;const A={...t,enabled:E};return await S(A)},[t,e,S]);p.useEffect(()=>{if(!e||!t?.enabled){v.current&&(clearInterval(v.current),v.current=null);return}const E=300*1e3;return v.current=setInterval(async()=>{try{const A=await window.electronAPI.github.checkNewIssues(e);if(A.length>0){console.log(`[AutoFix] Found ${A.length} new issues`);for(const R of A)console.log(`[AutoFix] Starting auto-fix for issue #${R.number}`),window.electronAPI.github.startAutoFix(e,R.number)}}catch(A){console.error("[AutoFix] Error checking for new issues:",A)}},E),()=>{v.current&&(clearInterval(v.current),v.current=null)}},[e,t?.enabled]);const j=p.useCallback(async()=>{if(!(!e||!t?.enabled))try{const E=await window.electronAPI.github.checkNewIssues(e);if(E.length>0){console.log(`[AutoFix] Found ${E.length} new issues`);for(const A of E)console.log(`[AutoFix] Starting auto-fix for issue #${A.number}`),window.electronAPI.github.startAutoFix(e,A.number)}}catch(E){console.error("[AutoFix] Error checking for new issues:",E)}},[e,t?.enabled]),T=a.filter(E=>E.status==="analyzing"||E.status==="creating_spec"||E.status==="building"||E.status==="qa_review").length;return{config:t,queue:r,batches:a,isLoading:l,isBatchRunning:d,batchProgress:f,activeBatchCount:T,getQueueItem:w,saveConfig:S,toggleAutoFix:_,startBatchAutoFix:C,checkForNewIssues:j,refresh:y}}function OIe({projectId:e}){const[t,s]=p.useState(!1),[r,i]=p.useState(!1),[a,o]=p.useState(!1),[l,u]=p.useState(null),[d,m]=p.useState(null),[f,x]=p.useState(null);p.useEffect(()=>{if(!e)return;const C=window.electronAPI.github.onAnalyzePreviewProgress((T,E)=>{T===e&&u(E)}),_=window.electronAPI.github.onAnalyzePreviewComplete((T,E)=>{T===e&&(i(!1),m(E),x(null))}),j=window.electronAPI.github.onAnalyzePreviewError((T,E)=>{T===e&&(i(!1),x(E.error))});return()=>{C(),_(),j()}},[e]);const v=p.useCallback(()=>{s(!0),u(null),m(null),x(null)},[]),y=p.useCallback(()=>{s(!1),i(!1),o(!1),u(null),m(null),x(null)},[]),w=p.useCallback(()=>{e&&(i(!0),u(null),m(null),x(null),window.electronAPI.github.analyzeIssuesPreview(e,void 0,200))},[e]),S=p.useCallback(async C=>{if(!(!e||C.length===0)){o(!0);try{const _=await window.electronAPI.github.approveBatches(e,C);if(!_.success)throw new Error(_.error||"Failed to approve batches");for(const j of C){const T=j.issues.map(P=>P.issueNumber),E=T.length===1,A=j.theme||(E?`GitHub Issue #${T[0]}: ${j.issues[0].title}`:`GitHub Issues: ${j.theme||T.map(P=>`#${P}`).join(", ")}`),R=j.issues.map(P=>`- #${P.issueNumber}: ${P.title}`).join(`
`),D=E?j.issues[0].title:`**Issues in this batch:**
${R}

**Common themes:** ${j.commonThemes.join(", ")||"N/A"}

**Reasoning:** ${j.reasoning}`,M={sourceType:"github",githubIssueNumbers:T,githubIssueNumber:E?T[0]:void 0,githubBatchTheme:j.theme};await F8(e,A,D,M)}}catch(_){throw x(_ instanceof Error?_.message:"Failed to approve batches"),_}finally{o(!1)}}},[e]);return{isWizardOpen:t,isAnalyzing:r,isApproving:a,analysisProgress:l,analysisResult:d,analysisError:f,openWizard:v,closeWizard:y,startAnalysis:w,approveBatches:S}}function FIe({issue:e,isSelected:t,onClick:s,onInvestigate:r}){return n.jsx("div",{className:`group p-3 rounded-lg cursor-pointer transition-colors ${t?"bg-accent/50 border border-accent":"hover:bg-muted/50 border border-transparent"}`,onClick:s,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(oe,{variant:"outline",className:`text-xs ${M5[e.state]}`,children:I5[e.state]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",e.number]})]}),n.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:e.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qr,{className:"h-3 w-3"}),e.author.login]}),e.commentsCount>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sh,{className:"h-3 w-3"}),e.commentsCount]}),e.labels.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qv,{className:"h-3 w-3"}),e.labels.length]})]})]}),n.jsx(W,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 transition-opacity h-8 w-8",onClick:i=>{i.stopPropagation(),r()},children:n.jsx(Qt,{className:"h-4 w-4"})})]})})}function BIe({issue:e,projectId:t,config:s,queueItem:r}){const[i,a]=p.useState(!1),[o,l]=p.useState(null),[u,d]=p.useState(null),[m,f]=p.useState(!1),x=p.useCallback(()=>{if(!s||!s.enabled||!s.labels.length)return!1;const S=e.labels.map(C=>C.name.toLowerCase());return s.labels.some(C=>S.includes(C.toLowerCase()))},[s,e.labels]);p.useEffect(()=>{const S=window.electronAPI.github.onAutoFixProgress((j,T)=>{j===t&&T.issueNumber===e.number&&(l(T),a(!1))}),C=window.electronAPI.github.onAutoFixComplete((j,T)=>{j===t&&T.issueNumber===e.number&&(f(!0),l(null),a(!1))}),_=window.electronAPI.github.onAutoFixError((j,T)=>{j===t&&T.issueNumber===e.number&&(d(T.error),l(null),a(!1))});return()=>{S(),C(),_()}},[t,e.number]);const v=r&&r.status!=="completed"&&r.status!=="failed",y=i||o!==null||v,w=p.useCallback(()=>{a(!0),d(null),f(!1),window.electronAPI.github.startAutoFix(t,e.number)},[t,e.number]);return s?.enabled?m||r?.status==="completed"?n.jsxs("div",{className:"flex items-center gap-2 text-success text-sm",children:[n.jsx(Xe,{className:"h-4 w-4"}),n.jsx("span",{children:"Spec created from issue"})]}):u||r?.status==="failed"?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-destructive text-sm",children:[n.jsx(Ke,{className:"h-4 w-4"}),n.jsx("span",{children:u||r?.error||"Auto-fix failed"})]}),n.jsxs(W,{size:"sm",variant:"outline",onClick:w,children:[n.jsx(Wv,{className:"h-4 w-4 mr-2"}),"Retry Auto Fix"]})]}):y?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:o?.message||"Processing..."})]}),o&&n.jsx(xi,{value:o.progress,className:"h-1"})]}):n.jsxs(W,{size:"sm",variant:x()?"default":"outline",onClick:w,children:[n.jsx(Wv,{className:"h-4 w-4 mr-2"}),"Auto Fix"]}):null}function zIe({issue:e,onInvestigate:t,investigationResult:s,linkedTaskId:r,onViewTask:i,projectId:a,autoFixConfig:o,autoFixQueueItem:l}){const{t:u}=Re("common"),d=r||(s?.success?s.taskId:void 0),m=!!d,f=()=>{d&&i&&i(d)};return n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{variant:"outline",className:`${M5[e.state]}`,children:I5[e.state]}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["#",e.number]})]}),n.jsx(W,{variant:"ghost",size:"icon",asChild:!0,"aria-label":u("accessibility.openOnGitHubAriaLabel"),children:n.jsx("a",{href:e.htmlUrl,target:"_blank",rel:"noopener noreferrer",children:n.jsx(Zt,{className:"h-4 w-4"})})})]}),n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e.title})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qr,{className:"h-4 w-4"}),e.author.login]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(cr,{className:"h-4 w-4"}),uV(e.createdAt)]}),e.commentsCount>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sh,{className:"h-4 w-4"}),e.commentsCount," comments"]})]}),e.labels.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:e.labels.map(x=>n.jsx(oe,{variant:"outline",style:{backgroundColor:`#${x.color}20`,borderColor:`#${x.color}50`,color:`#${x.color}`},children:x.name},x.id))}),n.jsx("div",{className:"flex items-center gap-2",children:m?n.jsxs(W,{onClick:f,className:"flex-1",variant:"secondary",children:[n.jsx(Ws,{className:"h-4 w-4 mr-2"}),"View Task"]}):n.jsxs(n.Fragment,{children:[n.jsxs(W,{onClick:t,className:"flex-1",children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create Task"]}),a&&o?.enabled&&n.jsx(BIe,{issue:e,projectId:a,config:o,queueItem:l??null})]})}),m&&n.jsxs(Le,{className:"bg-success/5 border-success/30",children:[n.jsx(on,{className:"pb-2",children:n.jsxs(ln,{className:"text-sm flex items-center gap-2 text-success",children:[n.jsx(Xe,{className:"h-4 w-4"}),"Task Linked"]})}),n.jsx(Ye,{className:"text-sm space-y-2",children:s?.success?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-foreground",children:s.analysis.summary}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{className:pq[s.analysis.estimatedComplexity],children:s.analysis.estimatedComplexity}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Task ID: ",d]})]})]}):n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Task ID: ",d]})})})]}),n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:"Description"})}),n.jsx(Ye,{children:e.body?n.jsx("div",{className:"prose prose-sm prose-invert max-w-none",children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm text-muted-foreground font-sans",children:e.body})}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No description provided."})})]}),e.assignees.length>0&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:"Assignees"})}),n.jsx(Ye,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:e.assignees.map(x=>n.jsxs(oe,{variant:"outline",children:[n.jsx(Qr,{className:"h-3 w-3 mr-1"}),x.login]},x.login))})})]}),e.milestone&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:"Milestone"})}),n.jsx(Ye,{children:n.jsx(oe,{variant:"outline",children:e.milestone.title})})]})]})})}function $Ie({open:e,onOpenChange:t,selectedIssue:s,investigationStatus:r,onStartInvestigation:i,onClose:a,projectId:o}){const[l,u]=p.useState([]),[d,m]=p.useState([]),[f,x]=p.useState(!1),[v,y]=p.useState(null);p.useEffect(()=>{if(e&&s&&o){let _=!0;return x(!0),u([]),m([]),y(null),window.electronAPI.getIssueComments(o,s.number).then(j=>{_&&j.success&&j.data&&(u(j.data),m(j.data.map(T=>T.id)))}).catch(j=>{_&&(console.error("Failed to fetch comments:",j),y(j instanceof Error?j.message:"Failed to load comments"))}).finally(()=>{_&&x(!1)}),()=>{_=!1}}},[e,s,o]);const w=_=>{m(j=>j.includes(_)?j.filter(T=>T!==_):[...j,_])},S=()=>{d.length===l.length?m([]):m(l.map(_=>_.id))},C=()=>{i(d)};return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-info"}),"Create Task from Issue"]}),n.jsx(ws,{children:s&&n.jsxs("span",{children:["Issue #",s.number,": ",s.title]})})]}),r.phase==="idle"?n.jsxs("div",{className:"space-y-4 flex-1 min-h-0 flex flex-col",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a task from this GitHub issue. The task will be added to your Kanban board in the Backlog column."}),f?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):v?n.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-4",children:[n.jsx("p",{className:"text-sm text-destructive font-medium",children:"Failed to load comments"}),n.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:v})]}):l.length>0?n.jsxs("div",{className:"space-y-2 flex-1 min-h-0 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Sh,{className:"h-4 w-4"}),"Select Comments to Include (",d.length,"/",l.length,")"]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:S,className:"text-xs",children:d.length===l.length?"Deselect All":"Select All"})]}),n.jsx(zt,{className:"flex min-h-0 border rounded-md",viewportClassName:"h-auto",children:n.jsx("div",{className:"p-2 space-y-2",children:l.map(_=>n.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>w(_.id),children:[n.jsx(Ui,{checked:d.includes(_.id),onCheckedChange:()=>w(_.id),onClick:j=>j.stopPropagation()}),n.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:_.user.login}),n.jsx("span",{children:""}),n.jsx("span",{children:uV(_.created_at)})]}),n.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap break-words line-clamp-3",children:_.body})]})]},_.id))})})]}):n.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:"The task will include:"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsx("li",{children:" Issue title and description"}),n.jsx("li",{children:" Link back to the GitHub issue"}),n.jsx("li",{children:" Labels and metadata from the issue"}),n.jsx("li",{children:" No comments (this issue has no comments)"})]})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:r.message}),n.jsxs("span",{className:"text-foreground",children:[r.progress,"%"]})]}),n.jsx(xi,{value:r.progress,className:"h-2"})]}),r.phase==="error"&&n.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:r.error}),r.phase==="complete"&&n.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-3 flex items-center gap-2 text-sm text-success",children:[n.jsx(Xe,{className:"h-4 w-4"}),"Task created! View it in your Kanban board."]})]}),n.jsxs(As,{children:[r.phase==="idle"&&n.jsxs(n.Fragment,{children:[n.jsx(W,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsxs(W,{onClick:C,children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Create Task"]})]}),r.phase!=="idle"&&r.phase!=="complete"&&n.jsxs(W,{variant:"outline",disabled:!0,children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}),r.phase==="complete"&&n.jsx(W,{onClick:a,children:"Done"})]})]})})}function hV({searchQuery:e,icon:t=qr,message:s}){return n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-3",children:n.jsx(t,{className:"h-6 w-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e?"No issues match your search":s})]})}function HIe({error:e,onOpenSettings:t}){return n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:n.jsx(qr,{className:"h-8 w-8 text-muted-foreground"})}),n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"GitHub Not Connected"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md",children:e||"Configure your GitHub token and repository in project settings to sync issues."}),t&&n.jsxs(W,{onClick:t,variant:"outline",children:[n.jsx(Sd,{className:"h-4 w-4 mr-2"}),"Open Settings"]})]})}function UIe({repoFullName:e,openIssuesCount:t,isLoading:s,searchQuery:r,filterState:i,onSearchChange:a,onFilterChange:o,onRefresh:l,autoFixEnabled:u,autoFixRunning:d,autoFixProcessing:m,onAutoFixToggle:f,onAnalyzeAndGroup:x,isAnalyzing:v}){const{t:y}=Re("common");return n.jsxs("div",{className:"shrink-0 p-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-muted",children:n.jsx(qr,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"GitHub Issues"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(oe,{variant:"outline",className:"text-xs",children:[t," open"]}),n.jsx(W,{variant:"ghost",size:"icon",onClick:l,disabled:s,"aria-label":y("buttons.refresh"),children:n.jsx(We,{className:`h-4 w-4 ${s?"animate-spin":""}`,"aria-hidden":"true"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x&&n.jsx(ul,{children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"outline",size:"sm",onClick:x,disabled:v||s,className:"flex-1",children:[v?n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(_f,{className:"h-4 w-4 mr-2"}),"Analyze & Group Issues"]})}),n.jsx(mt,{side:"bottom",className:"max-w-xs",children:n.jsx("p",{children:"Analyze up to 200 open issues, group similar ones, and review proposed batches before creating tasks."})})]})}),f&&n.jsx("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 border border-border",children:n.jsx(ul,{children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs("div",{className:"flex items-center gap-2",children:[d?n.jsx(we,{className:"h-4 w-4 text-primary animate-spin"}):n.jsx(Wv,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(le,{htmlFor:"auto-fix-toggle",className:"text-sm cursor-pointer whitespace-nowrap",children:"Auto-Fix New"}),n.jsx(Kt,{id:"auto-fix-toggle",checked:u??!1,onCheckedChange:f,disabled:d})]})}),n.jsxs(mt,{side:"bottom",className:"max-w-xs",children:[n.jsx("p",{children:"Automatically fix new issues as they come in."}),d&&m!==void 0&&m>0&&n.jsxs("p",{className:"mt-1 text-primary",children:["Processing ",m," issue",m>1?"s":"","..."]})]})]})})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:"Search issues...",value:r,onChange:w=>a(w.target.value),className:"pl-9"})]}),n.jsxs(_t,{value:i,onValueChange:o,children:[n.jsxs(yt,{className:"w-32",children:[n.jsx(Wb,{className:"h-4 w-4 mr-2"}),n.jsx(Nt,{})]}),n.jsxs(wt,{children:[n.jsx(et,{value:"open",children:"Open"}),n.jsx(et,{value:"closed",children:"Closed"}),n.jsx(et,{value:"all",children:"All"})]})]})]})]})}function GIe({issues:e,selectedIssueNumber:t,isLoading:s,isLoadingMore:r,hasMore:i,error:a,onSelectIssue:o,onInvestigate:l,onLoadMore:u}){const{t:d}=Re("common"),m=p.useRef(null),f=p.useCallback(x=>{const[v]=x;v.isIntersecting&&i&&!r&&!s&&u&&u()},[i,r,s,u]);return p.useEffect(()=>{const x=m.current;if(!x||!u)return;const v=new IntersectionObserver(f,{root:null,rootMargin:"100px",threshold:0});return v.observe(x),()=>{v.disconnect()}},[f,u]),a&&e.length===0?n.jsx("div",{className:"p-4 bg-destructive/10 border-b border-destructive/30",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[n.jsx(Ke,{className:"h-4 w-4"}),a]})}):s&&e.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.length===0?n.jsx(hV,{message:"No issues found"}):n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-2 space-y-1",children:[e.map(x=>n.jsx(FIe,{issue:x,isSelected:t===x.number,onClick:()=>o(x.number),onInvestigate:()=>l(x)},x.id)),u&&n.jsxs("div",{ref:m,className:"py-4 flex flex-col items-center gap-2",children:[a&&e.length>0&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[n.jsx(Ke,{className:"h-4 w-4"}),a]}),r?n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"text-sm",children:d("issues.loadingMore","Loading more...")})]}):i?n.jsx("span",{className:"text-xs text-muted-foreground opacity-50",children:d("issues.scrollForMore","Scroll for more")}):e.length>0?n.jsx("span",{className:"text-xs text-muted-foreground opacity-50",children:d("issues.allLoaded","All issues loaded")}):null]})]})})}function VIe({isOpen:e,onClose:t,projectId:s,onStartAnalysis:r,onApproveBatches:i,analysisProgress:a,analysisResult:o,analysisError:l,isAnalyzing:u,isApproving:d}){const[m,f]=p.useState(new Set),[x,v]=p.useState(new Set),[y,w]=p.useState(new Set),[S,C]=p.useState("intro");p.useEffect(()=>{e&&(f(new Set),v(new Set),w(new Set),C("intro"))},[e]),p.useEffect(()=>{if(u)C("analyzing");else if(o){C("review");const $=new Set(o.proposedBatches.filter(z=>z.validated).map((z,H)=>H));if(f($),o.proposedBatches.length===0&&o.singleIssues.length>0){const z=new Set(o.singleIssues.map(H=>H.issueNumber));v(z)}}else l&&C("intro")},[u,o,l]),p.useEffect(()=>{d&&C("approving")},[d]);const _=p.useCallback($=>{f(z=>{const H=new Set(z);return H.has($)?H.delete($):H.add($),H})},[]),j=p.useCallback($=>{v(z=>{const H=new Set(z);return H.has($)?H.delete($):H.add($),H})},[]),T=p.useCallback($=>{w(z=>{const H=new Set(z);return H.has($)?H.delete($):H.add($),H})},[]),E=p.useCallback(()=>{if(!o)return;const $=new Set(o.proposedBatches.map((H,I)=>I));f($);const z=new Set(o.singleIssues.map(H=>H.issueNumber));v(z)},[o]),A=p.useCallback(()=>{f(new Set),v(new Set)},[]),R=p.useCallback(async()=>{if(!o)return;const $=o.proposedBatches.filter((I,V)=>m.has(V)),z=o.singleIssues.filter(I=>x.has(I.issueNumber)).map(I=>({primaryIssue:I.issueNumber,issues:[{issueNumber:I.issueNumber,title:I.title,labels:I.labels,similarityToPrimary:1}],issueCount:1,commonThemes:[],validated:!0,confidence:1,reasoning:"Single issue - not grouped with others",theme:I.title})),H=[...$,...z];await i(H),C("done")},[o,m,x,i]),D=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-6",children:[n.jsx("div",{className:"p-4 rounded-full bg-primary/10",children:n.jsx(_f,{className:"h-12 w-12 text-primary"})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Analyze & Group Issues"}),n.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"This will analyze up to 200 open issues, group similar ones together, and let you review the proposed batches before creating any tasks."})]}),l&&n.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-destructive/10 text-destructive",children:[n.jsx(Tt,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:l})]}),n.jsxs(W,{onClick:r,size:"lg",children:[n.jsx(_f,{className:"h-4 w-4 mr-2"}),"Start Analysis"]})]}),M=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-6",children:[n.jsx(we,{className:"h-12 w-12 text-primary animate-spin"}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Analyzing Issues..."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a?.message||"Computing similarity and validating batches..."})]}),n.jsxs("div",{className:"w-full max-w-md",children:[n.jsx(xi,{value:a?.progress??0}),n.jsxs("p",{className:"text-xs text-center text-muted-foreground mt-2",children:[a?.progress??0,"% complete"]})]})]}),P=()=>{if(!o)return null;const{proposedBatches:$,singleIssues:z,totalIssues:H}=o,I=m.size,V=$.filter((B,K)=>m.has(K)).reduce((B,K)=>B+K.issueCount,0);return n.jsxs("div",{className:"flex flex-col h-[60vh]",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{children:[n.jsx("strong",{children:H})," issues analyzed"]}),n.jsx("span",{className:"text-muted-foreground",children:"|"}),n.jsxs("span",{children:[n.jsx("strong",{children:$.length})," batches proposed"]}),n.jsx("span",{className:"text-muted-foreground",children:"|"}),n.jsxs("span",{children:[n.jsx("strong",{children:z.length})," single issues"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(W,{variant:"ghost",size:"sm",onClick:E,children:"Select All"}),n.jsx(W,{variant:"ghost",size:"sm",onClick:A,children:"Deselect All"})]})]}),n.jsxs(zt,{className:"flex-1 -mx-6 px-6",children:[n.jsx("div",{className:"space-y-3",children:$.map((B,K)=>n.jsx(qIe,{batch:B,index:K,isSelected:m.has(K),isExpanded:y.has(K),onToggleSelect:()=>_(K),onToggleExpand:()=>T(K)},K))}),z.length>0&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Single Issues (not grouped)"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[z.slice(0,10).map(B=>n.jsxs("div",{onClick:()=>j(B.issueNumber),className:`p-2 rounded border text-sm truncate cursor-pointer transition-colors ${x.has(B.issueNumber)?"border-primary bg-primary/5":"border-border hover:bg-accent"}`,children:[n.jsx(Ui,{checked:x.has(B.issueNumber),className:"inline-block mr-2",onClick:K=>K.stopPropagation(),onCheckedChange:()=>j(B.issueNumber)}),n.jsxs("span",{className:"text-muted-foreground",children:["#",B.issueNumber]})," ",B.title]},B.issueNumber)),z.length>10&&n.jsxs("div",{className:"p-2 text-sm text-muted-foreground",children:["...and ",z.length-10," more"]})]})]})]}),n.jsx("div",{className:"flex items-center justify-between pt-4 mt-4 border-t border-border",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[I," batch",I!==1?"es":""," selected (",V," issues)",x.size>0&&n.jsxs(n.Fragment,{children:[" + ",x.size," single issue",x.size!==1?"s":""]})]})})]})},O=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-6",children:[n.jsx(we,{className:"h-12 w-12 text-primary animate-spin"}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Creating Batches..."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Setting up the approved issue batches for processing."})]})]}),F=()=>n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-6",children:[n.jsx("div",{className:"p-4 rounded-full bg-green-500/10",children:n.jsx(Xe,{className:"h-12 w-12 text-green-500"})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Batches Created"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Your selected issue batches are ready for processing."})]}),n.jsx(W,{onClick:t,children:"Close"})]});return n.jsx($s,{open:e,onOpenChange:$=>!$&&t(),children:n.jsxs(Bs,{className:"max-w-3xl",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(_f,{className:"h-5 w-5"}),"Analyze & Group Issues"]}),n.jsxs(ws,{children:[S==="intro"&&"Analyze open issues and group similar ones for batch processing.",S==="analyzing"&&"Analyzing issues for semantic similarity...",S==="review"&&"Review and approve the proposed issue batches.",S==="approving"&&"Creating the approved batches...",S==="done"&&"Batches have been created successfully."]})]}),n.jsxs("div",{className:"py-4",children:[S==="intro"&&D(),S==="analyzing"&&M(),S==="review"&&P(),S==="approving"&&O(),S==="done"&&F()]}),S==="review"&&n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:t,children:"Cancel"}),n.jsx(W,{onClick:R,disabled:m.size===0&&x.size===0||d,children:d?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Approve & Create (",m.size+x.size," ",m.size+x.size===1?"batch":"batches",")"]})})]})]})})}function qIe({batch:e,index:t,isSelected:s,isExpanded:r,onToggleSelect:i,onToggleExpand:a}){const o=e.confidence>=.8?"text-green-500":e.confidence>=.6?"text-yellow-500":"text-red-500";return n.jsx("div",{className:`rounded-lg border transition-colors ${s?"border-primary bg-primary/5":"border-border bg-card"}`,children:n.jsxs("div",{className:"flex items-center gap-3 p-3",children:[n.jsx(Ui,{checked:s,onCheckedChange:i}),n.jsxs(Ba,{className:"flex-1",open:r,onOpenChange:a,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(za,{className:"flex items-center gap-2 hover:underline",children:[r?n.jsx(bt,{className:"h-4 w-4"}):n.jsx(Xt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium text-sm",children:e.theme||`Batch ${t+1}`})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(oe,{variant:"outline",className:"text-xs",children:[n.jsx(Oa,{className:"h-3 w-3 mr-1"}),e.issueCount," issues"]}),n.jsxs(oe,{variant:e.validated?"default":"secondary",className:"text-xs",children:[e.validated?n.jsx(Xe,{className:"h-3 w-3 mr-1"}):n.jsx(Tt,{className:"h-3 w-3 mr-1"}),n.jsxs("span",{className:o,children:[Math.round(e.confidence*100),"%"]})]})]})]}),n.jsxs($a,{className:"mt-3 space-y-2",children:[n.jsx("p",{className:"text-xs text-muted-foreground px-6",children:e.reasoning}),n.jsx("div",{className:"space-y-1 px-6",children:e.issues.map(l=>n.jsxs("div",{className:"flex items-center justify-between text-sm py-1",children:[n.jsxs("div",{className:"flex items-center gap-2 truncate",children:[n.jsxs("span",{className:"text-muted-foreground",children:["#",l.issueNumber]}),n.jsx("span",{className:"truncate",children:l.title})]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(l.similarityToPrimary*100),"% similar"]})]},l.issueNumber))}),e.commonThemes.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 px-6 pt-2",children:e.commonThemes.map((l,u)=>n.jsx(oe,{variant:"secondary",className:"text-xs",children:l},u))})]})]})]})})}function WIe({onSuccess:e,onCancel:t}){const[s,r]=p.useState("ready"),[i,a]=p.useState(null),[o,l]=p.useState(),u=p.useRef(!1),d=p.useRef(null);p.useEffect(()=>{d.current&&(clearTimeout(d.current),d.current=null);const x=window.electronAPI.onTerminalOAuthToken(v=>{console.warn("[ClaudeOAuth] Token event received:",{success:v.success,hasEmail:!!v.email,profileId:v.profileId}),v.success?(l(v.email),r("success"),d.current=setTimeout(()=>{d.current=null,e()},1500)):(a(v.message||"Failed to save OAuth token"),r("error"))});return()=>{x?.(),d.current&&(clearTimeout(d.current),d.current=null)}},[e]);const m=async()=>{if(u.current){console.warn("[ClaudeOAuth] Auth already started, ignoring duplicate call");return}u.current=!0,console.warn("[ClaudeOAuth] Starting Claude authentication"),r("authenticating"),a(null);try{const x=await window.electronAPI.getClaudeProfiles();if(!x.success||!x.data)throw new Error("Failed to get Claude profiles");const v=x.data.activeProfileId;console.warn("[ClaudeOAuth] Initializing profile:",v);const y=await window.electronAPI.initializeClaudeProfile(v);if(!y.success)throw new Error(y.error||"Failed to start authentication");console.warn("[ClaudeOAuth] Authentication started, waiting for token...")}catch(x){console.error("[ClaudeOAuth] Authentication failed:",x),a(x instanceof Error?x.message:"Authentication failed"),r("error"),u.current=!1}},f=()=>{u.current=!1,r("ready"),a(null)};return n.jsxs("div",{className:"space-y-4",children:[s==="ready"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(io,{className:"h-6 w-6 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Authenticate with Claude"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto Claude requires Claude AI authentication for AI-powered features like Roadmap generation, Task automation, and Ideation."}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"This will open a browser window to authenticate with your Claude account. Your credentials are stored securely and are valid for 1 year."})]})]})})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs(W,{onClick:m,size:"lg",className:"gap-2",children:[n.jsx(io,{className:"h-5 w-5"}),"Authenticate with Claude"]})})]}),s==="authenticating"&&n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(we,{className:"h-6 w-6 animate-spin text-info shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Authenticating..."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"A terminal window has opened. Please complete the authentication in your browser."})]})]}),n.jsx("div",{className:"rounded-lg bg-background/50 p-3 space-y-2",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(_r,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[n.jsx("p",{className:"font-medium",children:"What's happening:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[n.jsxs("li",{children:["A terminal opened and ran ",n.jsx("code",{className:"px-1 bg-muted rounded",children:"claude setup-token"})]}),n.jsx("li",{children:"Your browser should open to authenticate with Claude"}),n.jsx("li",{children:"Complete the OAuth flow in your browser"}),n.jsx("li",{children:"The terminal will display your token (starts with sk-ant-oat01-...)"}),n.jsx("li",{children:"Auto Claude will automatically detect and save it"})]})]})]})})]})})}),s==="success"&&n.jsx(Le,{className:"border border-success/30 bg-success/10",children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Xe,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-success",children:"Successfully Authenticated!"}),n.jsx("p",{className:"text-sm text-success/80 mt-1",children:o?`Connected as ${o}`:"Your Claude credentials have been saved"}),n.jsxs("div",{className:"flex items-center gap-2 mt-3 text-xs text-success/70",children:[n.jsx(Qt,{className:"h-3 w-3"}),n.jsx("span",{children:"You can now use all Auto Claude AI features"})]})]})]})})}),s==="error"&&i&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(Le,{className:"border border-destructive/30 bg-destructive/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-destructive",children:"Authentication Failed"}),n.jsx("p",{className:"text-sm text-destructive/80 mt-1",children:i})]})]})})}),n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx(W,{onClick:f,variant:"outline",children:"Retry"}),t&&n.jsx(W,{onClick:t,variant:"ghost",children:"Cancel"})]})]}),(s==="ready"||s==="authenticating")&&t&&n.jsx("div",{className:"flex justify-center pt-2",children:n.jsx(W,{onClick:t,variant:"ghost",size:"sm",children:"Skip for now"})})]})}function mV({open:e,onOpenChange:t,project:s,onComplete:r,onSkip:i}){const{t:a}=Re("dialogs"),[o,l]=p.useState("github-auth"),[u,d]=p.useState(null),[m,f]=p.useState(null),[x,v]=p.useState(null),[y,w]=p.useState([]),[S,C]=p.useState(null),[_,j]=p.useState(null),[T,E]=p.useState(!1),[A,R]=p.useState(!1),[D,M]=p.useState(null),[P,O]=p.useState(null),[F,$]=p.useState(""),[z,H]=p.useState(!0),[I,V]=p.useState(""),[B,K]=p.useState(!1),[L,G]=p.useState(null),[Y,q]=p.useState([]),[Q,se]=p.useState(null),[te,ee]=p.useState(!1);p.useEffect(()=>{e&&(d(null),f(null),v(null),w([]),C(null),j(null),M(null),O(null),$(s.name.replace(/[^A-Za-z0-9_.-]/g,"-")),H(!0),V(""),K(!1),G(null),q([]),se(null),ee(!1),(async()=>{try{const De=await window.electronAPI.getGitHubToken(),je=De.success&&De.data?.token,Ce=await window.electronAPI.getClaudeProfiles();let It=!1;if(Ce.success&&Ce.data){const be=Ce.data.profiles.find(ve=>ve.id===Ce.data.activeProfileId);It=!!(be?.oauthToken||be?.isDefault&&be?.configDir)}je&&It?(d(De.data.token),l("repo"),await fe()):je?(d(De.data.token),l("claude-auth")):l("github-auth")}catch(De){console.error("Failed to check existing auth:",De),l("github-auth")}})())},[e]);const pe=async()=>{ee(!0);try{const Ae=await window.electronAPI.getGitHubUser();Ae.success&&Ae.data&&(G(Ae.data.username),se(Ae.data.username));const De=await window.electronAPI.listGitHubOrgs();De.success&&De.data&&q(De.data.orgs)}catch(Ae){console.error("Failed to load user/orgs:",Ae)}finally{ee(!1)}},fe=async()=>{R(!0),M(null);try{const Ae=await window.electronAPI.detectGitHubRepo(s.path);Ae.success&&Ae.data?(v(Ae.data),f(Ae.data),l("repo-confirm")):(await pe(),l("repo"))}catch(Ae){M(Ae instanceof Error?Ae.message:"Failed to detect repository"),await pe(),l("repo")}finally{R(!1)}},re=async Ae=>{E(!0),M(null);try{const De=await window.electronAPI.getGitHubBranches(Ae,u);if(De.success&&De.data){w(De.data);const je=Z(De.data);j(je),C(je)}else M(De.error||"Failed to load branches")}catch(De){M(De instanceof Error?De.message:"Failed to load branches")}finally{E(!1)}},Z=Ae=>{const De=["main","master","develop","dev"];for(const je of De)if(Ae.includes(je))return je;return Ae[0]||null},ie=async Ae=>{d(Ae);try{const De=await window.electronAPI.getClaudeProfiles();if(De.success&&De.data){const je=De.data.profiles.find(Ce=>Ce.id===De.data.activeProfileId);if(je?.oauthToken||je?.isDefault&&je?.configDir){await fe();return}}}catch(De){console.error("Failed to check Claude profiles:",De)}l("claude-auth")},ce=async()=>{await fe()},He=async()=>{if(!F.trim()){M("Please enter a repository name");return}if(!Q){M("Please select an owner for the repository");return}K(!0),M(null);try{const Ae=await window.electronAPI.createGitHubRepo(F.trim(),{isPrivate:z,projectPath:s.path,owner:Q!==L?Q:void 0});Ae.success&&Ae.data?(f(Ae.data.fullName),v(Ae.data.fullName),l("branch"),await re(Ae.data.fullName)):M(Ae.error||"Failed to create repository")}catch(Ae){M(Ae instanceof Error?Ae.message:"Failed to create repository")}finally{K(!1)}},tt=async()=>{x&&(l("branch"),await re(x))},he=async()=>{await pe(),l("repo")},Ne=async()=>{if(!I.trim()){M("Please enter a repository name (owner/repo format)");return}if(!/^[A-Za-z0-9_.-]+\/[A-Za-z0-9_.-]+$/.test(I.trim())){M("Invalid format. Use owner/repo (e.g., username/my-project)");return}K(!0),M(null);try{const Ae=await window.electronAPI.addGitRemote(s.path,I.trim());Ae.success?(f(I.trim()),v(I.trim()),l("branch"),await re(I.trim())):M(Ae.error||"Failed to add remote")}catch(Ae){M(Ae instanceof Error?Ae.message:"Failed to add remote")}finally{K(!1)}},Ve=()=>{u&&m&&S&&r({githubToken:u,githubRepo:m,mainBranch:S,githubAuthMethod:"oauth"})},qe=()=>{switch(o){case"github-auth":return n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-5 w-5"}),a("githubSetup.connectTitle")]}),n.jsx(ws,{children:a("githubSetup.connectDescription")})]}),n.jsx("div",{className:"py-4",children:n.jsx(qU,{onSuccess:ie,onCancel:i})})]});case"claude-auth":return n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(io,{className:"h-5 w-5"}),a("githubSetup.claudeTitle")]}),n.jsx(ws,{children:a("githubSetup.claudeDescription")})]}),n.jsx("div",{className:"py-4",children:n.jsx(WIe,{onSuccess:ce,onCancel:i})})]});case"repo-confirm":return n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-5 w-5"}),"Confirm Repository"]}),n.jsx(ws,{children:"We detected a GitHub repository for this project. Please confirm or change it."})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsx("div",{className:"rounded-lg border bg-muted/50 p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xe,{className:"h-6 w-6 text-green-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Repository Detected"}),n.jsx("p",{className:"text-sm text-muted-foreground font-mono",children:x})]})]})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:a("githubSetup.repoDescription")}),D&&n.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:D})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:he,children:"Use Different Repository"}),n.jsxs(W,{onClick:tt,children:[n.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Confirm & Continue"]})]})]});case"repo":return n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-5 w-5"}),"Connect to GitHub"]}),n.jsx(ws,{children:"Your project needs a GitHub repository. Create a new one or link to an existing repository."})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[!P&&n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:()=>O("create"),className:"flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-dashed hover:border-primary hover:bg-primary/5 transition-colors","aria-label":a("githubSetup.createRepoAriaLabel"),children:[n.jsx(fs,{className:"h-8 w-8 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:"Create New Repo"}),n.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Create a new repository on GitHub"})]}),n.jsxs("button",{onClick:()=>O("link"),className:"flex flex-col items-center gap-2 p-4 rounded-lg border-2 border-dashed hover:border-primary hover:bg-primary/5 transition-colors","aria-label":a("githubSetup.linkRepoAriaLabel"),children:[n.jsx(eD,{className:"h-8 w-8 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:"Link Existing"}),n.jsx("span",{className:"text-xs text-muted-foreground text-center",children:"Connect to an existing repository"})]})]}),P==="create"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("button",{onClick:()=>O(null),className:"text-primary hover:underline","aria-label":a("githubSetup.goBackAriaLabel"),children:" Back"}),n.jsx("span",{children:"Create a new repository"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:"Owner"}),te?n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),"Loading accounts..."]}):n.jsxs("div",{className:"flex flex-wrap gap-2",role:"radiogroup","aria-label":a("common:accessibility.repositoryOwnerAriaLabel"),children:[L&&n.jsxs("button",{onClick:()=>se(L),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${Q===L?"border-primary bg-primary/10 text-primary":"border-muted hover:border-primary/50"}`,disabled:B,role:"radio","aria-checked":Q===L,"aria-label":a("githubSetup.selectOwnerAriaLabel",{owner:L}),children:[n.jsx(Qr,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:L})]}),Y.map(Ae=>n.jsxs("button",{onClick:()=>se(Ae.login),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${Q===Ae.login?"border-primary bg-primary/10 text-primary":"border-muted hover:border-primary/50"}`,disabled:B,role:"radio","aria-checked":Q===Ae.login,"aria-label":a("githubSetup.selectOrgAriaLabel",{org:Ae.login}),children:[n.jsx(kne,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:Ae.login})]},Ae.login))]}),Y.length>0&&n.jsx("p",{className:"text-xs text-muted-foreground",children:"Select your personal account or an organization"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"repo-name",children:"Repository Name"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-sm text-muted-foreground",children:[Q||"..."," /"]}),n.jsx(Oe,{id:"repo-name",value:F,onChange:Ae=>$(Ae.target.value),placeholder:"my-project",disabled:B,className:"flex-1"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:"Visibility"}),n.jsxs("div",{className:"flex gap-2",role:"radiogroup","aria-label":a("common:accessibility.repositoryVisibilityAriaLabel"),children:[n.jsxs("button",{onClick:()=>H(!0),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${z?"border-primary bg-primary/10 text-primary":"border-muted hover:border-primary/50"}`,disabled:B,role:"radio","aria-checked":z,"aria-label":a("githubSetup.selectVisibilityAriaLabel",{visibility:"private"}),children:[n.jsx(ll,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Private"})]}),n.jsxs("button",{onClick:()=>H(!1),className:`flex items-center gap-2 px-3 py-2 rounded-md border ${z?"border-muted hover:border-primary/50":"border-primary bg-primary/10 text-primary"}`,disabled:B,role:"radio","aria-checked":!z,"aria-label":a("githubSetup.selectVisibilityAriaLabel",{visibility:"public"}),children:[n.jsx(wn,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Public"})]})]})]})]}),P==="link"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("button",{onClick:()=>O(null),className:"text-primary hover:underline","aria-label":a("githubSetup.goBackAriaLabel"),children:" Back"}),n.jsx("span",{children:"Link to existing repository"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"existing-repo",children:"Repository"}),n.jsx(Oe,{id:"existing-repo",value:I,onChange:Ae=>V(Ae.target.value),placeholder:"username/repository",disabled:B}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the full repository path (e.g., octocat/hello-world)"})]})]}),D&&n.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:D})]}),n.jsxs(As,{children:[i&&n.jsx(W,{variant:"outline",onClick:i,disabled:B,children:"Skip for now"}),P==="create"&&n.jsx(W,{onClick:He,disabled:B||!F.trim(),children:B?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"mr-2 h-4 w-4"}),"Create Repository"]})}),P==="link"&&n.jsx(W,{onClick:Ne,disabled:B||!I.trim(),children:B?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Linking..."]}):n.jsxs(n.Fragment,{children:[n.jsx(eD,{className:"mr-2 h-4 w-4"}),"Link Repository"]})}),!P&&n.jsx(W,{variant:"outline",onClick:fe,disabled:A,children:A?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):"Retry Detection"})]})]});case"branch":return n.jsxs(n.Fragment,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-5 w-5"}),"Select Base Branch"]}),n.jsx(ws,{children:"Choose which branch Auto Claude should use as the base for creating task branches."})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[x&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(qr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-muted-foreground",children:"Repository:"}),n.jsx("code",{className:"px-2 py-0.5 bg-muted rounded font-mono text-xs",children:x}),n.jsx(Xe,{className:"h-4 w-4 text-success"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:"Base Branch"}),n.jsxs(_t,{value:S||"",onValueChange:C,disabled:T||y.length===0,children:[n.jsx(yt,{children:T?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(we,{className:"h-3 w-3 animate-spin"}),n.jsx("span",{children:"Loading branches..."})]}):n.jsx(Nt,{placeholder:"Select a branch"})}),n.jsx(wt,{children:y.map(Ae=>n.jsx(et,{value:Ae,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:Ae}),Ae===_&&n.jsxs("span",{className:"flex items-center gap-1 text-xs text-success",children:[n.jsx(Qt,{className:"h-3 w-3"}),"Recommended"]})]})},Ae))})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["All tasks will be created from branches like"," ",n.jsx("code",{className:"px-1 bg-muted rounded",children:"auto-claude/task-name"}),S&&n.jsxs(n.Fragment,{children:[" based on ",n.jsx("code",{className:"px-1 bg-muted rounded",children:S})]})]})]}),n.jsx("div",{className:"rounded-lg border border-info/30 bg-info/5 p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Qt,{className:"h-4 w-4 text-info mt-0.5"}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.jsx("p",{className:"font-medium text-foreground",children:"Why select a branch?"}),n.jsx("p",{className:"mt-1",children:"Auto Claude creates isolated workspaces for each task. Selecting the right base branch ensures your tasks start with the latest code from your main development line."})]})]})}),D&&n.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:D})]}),n.jsxs(As,{children:[i&&n.jsx(W,{variant:"outline",onClick:i,children:"Skip for now"}),n.jsxs(W,{onClick:Ve,disabled:!S||T,children:[n.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Complete Setup"]})]})]});case"complete":return n.jsxs(n.Fragment,{children:[n.jsx(os,{children:n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Xe,{className:"h-5 w-5 text-success"}),"Setup Complete"]})}),n.jsxs("div",{className:"py-8 flex flex-col items-center justify-center",children:[n.jsx("div",{className:"h-16 w-16 rounded-full bg-success/10 flex items-center justify-center mb-4",children:n.jsx(Xe,{className:"h-8 w-8 text-success"})}),n.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Auto Claude is ready to use! You can now create tasks that will be automatically based on ",n.jsx("code",{className:"px-1 bg-muted rounded",children:S}),"."]})]})]})}},Ze=()=>{const Ae=[{label:"Authenticate"},{label:"Configure"}];if(o==="complete")return null;const De=o==="github-auth"||o==="claude-auth"||o==="repo"?0:1;return n.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:Ae.map((je,Ce)=>n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:`flex items-center justify-center w-6 h-6 rounded-full text-xs font-medium ${Ce<De?"bg-success text-success-foreground":Ce===De?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:Ce<De?n.jsx(Xe,{className:"h-4 w-4"}):Ce+1}),n.jsx("span",{className:`ml-2 text-xs ${Ce===De?"text-foreground font-medium":"text-muted-foreground"}`,children:je.label}),Ce<Ae.length-1&&n.jsx(Xt,{className:"h-4 w-4 mx-2 text-muted-foreground"})]},Ce))})};return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"sm:max-w-md",children:[Ze(),qe()]})})}function KIe({onOpenSettings:e,onNavigateToTask:t}){const s=Ot(Ae=>Ae.projects),r=Ot(Ae=>Ae.selectedProjectId),i=s.find(Ae=>Ae.id===r),a=Ks(Ae=>Ae.tasks),{syncStatus:o,isLoading:l,isLoadingMore:u,error:d,selectedIssueNumber:m,selectedIssue:f,filterState:x,hasMore:v,selectIssue:y,getFilteredIssues:w,getOpenIssuesCount:S,handleRefresh:C,handleFilterChange:_,handleLoadMore:j,handleSearchStart:T,handleSearchClear:E}=RIe(i?.id),{investigationStatus:A,lastInvestigationResult:R,startInvestigation:D,resetInvestigationStatus:M}=DIe(i?.id),{searchQuery:P,setSearchQuery:O,filteredIssues:F,isSearchActive:$}=MIe(w(),{onSearchStart:T,onSearchClear:E}),{config:z,getQueueItem:H,isBatchRunning:I,batchProgress:V,toggleAutoFix:B,checkForNewIssues:K}=LIe(i?.id),{isWizardOpen:L,isAnalyzing:G,isApproving:Y,analysisProgress:q,analysisResult:Q,analysisError:se,openWizard:te,closeWizard:ee,startAnalysis:pe,approveBatches:fe}=OIe({projectId:i?.id||""}),[re,Z]=p.useState(!1),[ie,ce]=p.useState(null),[He,tt]=p.useState(!1);p.useEffect(()=>{se?.includes("GitHub automation module not installed")&&tt(!0)},[se]);const he=p.useMemo(()=>{const Ae=new Map;for(const De of a)De.metadata?.githubIssueNumber&&Ae.set(De.metadata.githubIssueNumber,De.specId||De.id);return Ae},[a]),Ne=p.useCallback(()=>{C(),z?.enabled&&K()},[C,z?.enabled,K]),Ve=p.useCallback(Ae=>{ce(Ae),Z(!0)},[]),qe=p.useCallback(Ae=>{ie&&D(ie,Ae)},[ie,D]),Ze=p.useCallback(()=>{Z(!1),M()},[M]);return o?.connected?n.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[n.jsx(UIe,{repoFullName:o.repoFullName??"",openIssuesCount:S(),isLoading:l,searchQuery:P,filterState:x,onSearchChange:O,onFilterChange:_,onRefresh:Ne,autoFixEnabled:z?.enabled,autoFixRunning:I,autoFixProcessing:V?.totalIssues,onAutoFixToggle:B,onAnalyzeAndGroup:te,isAnalyzing:G}),n.jsxs("div",{className:"flex-1 flex min-h-0",children:[n.jsx("div",{className:"w-1/2 border-r border-border flex flex-col",children:n.jsx(GIe,{issues:F,selectedIssueNumber:m,isLoading:l,isLoadingMore:u,hasMore:v&&!$,error:d,onSelectIssue:y,onInvestigate:Ve,onLoadMore:$?void 0:j})}),n.jsx("div",{className:"w-1/2 flex flex-col",children:f?n.jsx(zIe,{issue:f,onInvestigate:()=>Ve(f),investigationResult:R?.issueNumber===f.number?R:null,linkedTaskId:he.get(f.number),onViewTask:t,projectId:i?.id,autoFixConfig:z,autoFixQueueItem:H(f.number)}):n.jsx(hV,{message:"Select an issue to view details"})})]}),n.jsx($Ie,{open:re,onOpenChange:Z,selectedIssue:ie,investigationStatus:A,onStartInvestigation:qe,onClose:Ze,projectId:i?.id}),n.jsx(VIe,{isOpen:L,onClose:ee,projectId:i?.id||"",onStartAnalysis:pe,onApproveBatches:fe,analysisProgress:q,analysisResult:Q,analysisError:se,isAnalyzing:G,isApproving:Y}),i&&n.jsx(mV,{open:He,onOpenChange:tt,project:i,onComplete:()=>{tt(!1),te(),pe()},onSkip:()=>tt(!1)})]}):n.jsx(HIe,{error:o?.error||null,onOpenSettings:e})}const tg=Gn((e,t)=>({issues:[],syncStatus:null,isLoading:!1,error:null,selectedIssueIid:null,filterState:"opened",investigationStatus:{phase:"idle",progress:0,message:""},lastInvestigationResult:null,setIssues:s=>e({issues:s,error:null}),addIssue:s=>e(r=>({issues:[s,...r.issues.filter(i=>i.iid!==s.iid)]})),updateIssue:(s,r)=>e(i=>({issues:i.issues.map(a=>a.iid===s?{...a,...r}:a)})),setSyncStatus:s=>e({syncStatus:s}),setLoading:s=>e({isLoading:s}),setError:s=>e({error:s,isLoading:!1}),selectIssue:s=>e({selectedIssueIid:s}),setFilterState:s=>e({filterState:s}),setInvestigationStatus:s=>e({investigationStatus:s}),setInvestigationResult:s=>e({lastInvestigationResult:s}),clearIssues:()=>e({issues:[],syncStatus:null,selectedIssueIid:null,error:null,investigationStatus:{phase:"idle",progress:0,message:""},lastInvestigationResult:null}),getSelectedIssue:()=>{const{issues:s,selectedIssueIid:r}=t();return s.find(i=>i.iid===r)||null},getFilteredIssues:()=>{const{issues:s,filterState:r}=t();return r==="all"?s:s.filter(i=>i.state===r)},getOpenIssuesCount:()=>{const{issues:s}=t();return s.filter(r=>r.state==="opened").length}}));async function d_(e,t){const s=tg.getState();s.setLoading(!0),s.setError(null),t&&s.setFilterState(t);try{const r=await window.electronAPI.getGitLabIssues(e,t);r.success&&r.data?s.setIssues(r.data):s.setError(r.error||"Failed to load GitLab issues")}catch(r){s.setError(r instanceof Error?r.message:"Unknown error")}finally{s.setLoading(!1)}}async function l5(e){const t=tg.getState();try{const s=await window.electronAPI.checkGitLabConnection(e);return s.success&&s.data?(t.setSyncStatus(s.data),s.data):(t.setError(s.error||"Failed to check GitLab connection"),null)}catch(s){return t.setError(s instanceof Error?s.message:"Unknown error"),null}}function YIe(e,t,s){const r=tg.getState();r.setInvestigationStatus({phase:"fetching",issueIid:t,progress:0,message:"Starting investigation..."}),r.setInvestigationResult(null),window.electronAPI.investigateGitLabIssue(e,t,s)}function XIe(e){const{issues:t,syncStatus:s,isLoading:r,error:i,selectedIssueIid:a,filterState:o,selectIssue:l,setFilterState:u,getFilteredIssues:d,getOpenIssuesCount:m}=tg();p.useEffect(()=>{e&&l5(e)},[e]),p.useEffect(()=>{e&&s?.connected&&d_(e,o)},[e,o,s?.connected]);const f=p.useCallback(()=>{e&&(l5(e),d_(e,o))},[e,o]),x=p.useCallback(y=>{u(y),e&&d_(e,y)},[e,u]),v=p.useMemo(()=>t.find(y=>y.iid===a)||null,[t,a]);return{issues:t,syncStatus:s,isLoading:r,error:i,selectedIssueIid:a,selectedIssue:v,filterState:o,selectIssue:l,getFilteredIssues:d,getOpenIssuesCount:m,handleRefresh:f,handleFilterChange:x}}function ZIe(e){const{investigationStatus:t,lastInvestigationResult:s,setInvestigationStatus:r,setInvestigationResult:i,setError:a}=tg();p.useEffect(()=>{if(!e)return;const u=window.electronAPI.onGitLabInvestigationProgress((f,x)=>{f===e&&r(x)}),d=window.electronAPI.onGitLabInvestigationComplete((f,x)=>{f===e&&(i(x),x.success&&x.taskId&&po(e))}),m=window.electronAPI.onGitLabInvestigationError((f,x)=>{f===e&&(a(x),r({phase:"error",progress:0,message:x}))});return()=>{u(),d(),m()}},[e,r,i,a]);const o=p.useCallback((u,d)=>{e&&YIe(e,u.iid,d)},[e]),l=p.useCallback(()=>{r({phase:"idle",progress:0,message:""})},[r]);return{investigationStatus:t,lastInvestigationResult:s,startInvestigation:o,resetInvestigationStatus:l}}function fV(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function QIe(e,t){if(!t)return e;const s=t.toLowerCase();return e.filter(r=>r.title.toLowerCase().includes(s)||r.description?.toLowerCase().includes(s))}function JIe(e){const[t,s]=p.useState(""),r=p.useMemo(()=>QIe(e,t),[e,t]);return{searchQuery:t,setSearchQuery:s,filteredIssues:r}}const eMe={opened:"bg-green-500/10 text-green-500 border-green-500/20",closed:"bg-purple-500/10 text-purple-500 border-purple-500/20"},tMe={opened:"Open",closed:"Closed"};function sMe({issue:e,isSelected:t,onClick:s,onInvestigate:r}){return n.jsx("div",{role:"button",tabIndex:0,className:`group p-3 rounded-lg cursor-pointer transition-colors ${t?"bg-accent/50 border border-accent":"hover:bg-muted/50 border border-transparent"}`,onClick:s,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),s())},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(oe,{variant:"outline",className:`text-xs ${eMe[e.state]||""}`,children:tMe[e.state]||e.state}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",e.iid]})]}),n.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:e.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qr,{className:"h-3 w-3"}),e.author.username]}),e.userNotesCount>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sh,{className:"h-3 w-3"}),e.userNotesCount]}),e.labels.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qv,{className:"h-3 w-3"}),e.labels.length]})]})]}),n.jsx(W,{variant:"ghost",size:"icon",className:"opacity-0 group-hover:opacity-100 focus:opacity-100 transition-opacity h-8 w-8",onClick:i=>{i.stopPropagation(),r()},"aria-label":"Investigate issue",children:n.jsx(Qt,{className:"h-4 w-4"})})]})})}const nMe={opened:"bg-green-500/10 text-green-500 border-green-500/20",closed:"bg-purple-500/10 text-purple-500 border-purple-500/20"},rMe={simple:"bg-green-500/10 text-green-500",standard:"bg-yellow-500/10 text-yellow-500",complex:"bg-red-500/10 text-red-500"};function iMe({issue:e,onInvestigate:t,investigationResult:s,linkedTaskId:r,onViewTask:i}){const{t:a}=Re(["gitlab","common"]),o=r||(s?.success?s.taskId:void 0),l=!!o,u=()=>{o&&i&&i(o)};return n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{variant:"outline",className:`${nMe[e.state]||""}`,children:a(`states.${e.state}`)}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["#",e.iid]})]}),n.jsx(W,{variant:"ghost",size:"icon",asChild:!0,"aria-label":a("common:accessibility.openOnGitLabAriaLabel"),children:n.jsx("a",{href:e.webUrl,target:"_blank",rel:"noopener noreferrer",children:n.jsx(Zt,{className:"h-4 w-4"})})})]}),n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e.title})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qr,{className:"h-4 w-4"}),e.author.username]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(cr,{className:"h-4 w-4"}),fV(e.createdAt)]}),e.userNotesCount>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Sh,{className:"h-4 w-4"}),e.userNotesCount," ",a("detail.notes")]})]}),e.labels.length>0&&n.jsx("div",{className:"flex flex-wrap gap-2",children:e.labels.map((d,m)=>n.jsx(oe,{variant:"outline",className:"bg-orange-500/10 text-orange-500 border-orange-500/20",children:d},m))}),n.jsx("div",{className:"flex items-center gap-2",children:l?n.jsxs(W,{onClick:u,className:"flex-1",variant:"secondary",children:[n.jsx(Ws,{className:"h-4 w-4 mr-2"}),a("detail.viewTask")]}):n.jsxs(W,{onClick:t,className:"flex-1",children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),a("detail.createTask")]})}),l&&n.jsxs(Le,{className:"bg-success/5 border-success/30",children:[n.jsx(on,{className:"pb-2",children:n.jsxs(ln,{className:"text-sm flex items-center gap-2 text-success",children:[n.jsx(Xe,{className:"h-4 w-4"}),a("detail.taskLinked")]})}),n.jsx(Ye,{className:"text-sm space-y-2",children:s?.success?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-foreground",children:s.analysis.summary}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{className:rMe[s.analysis.estimatedComplexity],children:a(`complexity.${s.analysis.estimatedComplexity}`)}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[a("detail.taskId"),": ",o]})]})]}):n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("span",{className:"text-xs text-muted-foreground",children:[a("detail.taskId"),": ",o]})})})]}),n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:a("detail.description")})}),n.jsx(Ye,{children:e.description?n.jsx("div",{className:"prose prose-sm prose-invert max-w-none",children:n.jsx("pre",{className:"whitespace-pre-wrap text-sm text-muted-foreground font-sans",children:e.description})}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:a("detail.noDescription")})})]}),e.assignees.length>0&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:a("detail.assignees")})}),n.jsx(Ye,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:e.assignees.map(d=>n.jsxs(oe,{variant:"outline",children:[n.jsx(Qr,{className:"h-3 w-3 mr-1"}),d.username]},d.username))})})]}),e.milestone&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:a("detail.milestone")})}),n.jsx(Ye,{children:n.jsx(oe,{variant:"outline",children:e.milestone.title})})]})]})})}function aMe({open:e,onOpenChange:t,selectedIssue:s,investigationStatus:r,onStartInvestigation:i,onClose:a,projectId:o}){const{t:l}=Re("gitlab"),[u,d]=p.useState([]),[m,f]=p.useState([]),[x,v]=p.useState(!1),[y,w]=p.useState(null);p.useEffect(()=>{if(e&&s&&o){let j=!0;return v(!0),d([]),f([]),w(null),window.electronAPI.getGitLabIssueNotes(o,s.iid).then(T=>{if(j&&T.success&&T.data){const E=T.data.filter(A=>!A.system);d(E),f(E.map(A=>A.id))}}).catch(T=>{j&&(console.error("Failed to fetch notes:",T),w(T instanceof Error?T.message:"Failed to load notes"))}).finally(()=>{j&&v(!1)}),()=>{j=!1}}},[e,s,o]);const S=j=>{f(T=>T.includes(j)?T.filter(E=>E!==j):[...T,j])},C=()=>{m.length===u.length?f([]):f(u.map(j=>j.id))},_=()=>{i(m)};return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"h-5 w-5 text-info"}),l("investigation.title")]}),n.jsx(ws,{children:s&&n.jsxs("span",{children:[l("investigation.issuePrefix")," #",s.iid,": ",s.title]})})]}),r.phase==="idle"?n.jsxs("div",{className:"space-y-4 flex-1 min-h-0 flex flex-col",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:l("investigation.description")}),x?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):y?n.jsxs("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-4",children:[n.jsx("p",{className:"text-sm text-destructive font-medium",children:l("investigation.failedToLoadNotes")}),n.jsx("p",{className:"text-xs text-destructive/80 mt-1",children:y})]}):u.length>0?n.jsxs("div",{className:"space-y-2 flex-1 min-h-0 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Sh,{className:"h-4 w-4"}),l("investigation.selectNotes")," (",m.length,"/",u.length,")"]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:C,className:"text-xs",children:m.length===u.length?l("investigation.deselectAll"):l("investigation.selectAll")})]}),n.jsx(zt,{className:"flex min-h-0 border rounded-md",viewportClassName:"h-auto",children:n.jsx("div",{className:"p-2 space-y-2",children:u.map(j=>n.jsxs("button",{type:"button",className:"flex gap-3 p-3 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors cursor-pointer w-full text-left",onClick:()=>S(j.id),children:[n.jsx(Ui,{checked:m.includes(j.id),onCheckedChange:()=>S(j.id),onClick:T=>T.stopPropagation()}),n.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx("span",{className:"font-medium",children:j.author.username}),n.jsx("span",{children:""}),n.jsx("span",{children:fV(j.createdAt)})]}),n.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap break-words line-clamp-3",children:j.body})]})]},j.id))})})]}):n.jsxs("div",{className:"rounded-lg border border-border bg-muted/30 p-4",children:[n.jsx("h4",{className:"text-sm font-medium mb-2",children:l("investigation.willInclude")}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("li",{children:[" ",l("investigation.includeTitle")]}),n.jsxs("li",{children:[" ",l("investigation.includeLink")]}),n.jsxs("li",{children:[" ",l("investigation.includeLabels")]}),n.jsxs("li",{children:[" ",l("investigation.noNotes")]})]})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:r.message}),n.jsxs("span",{className:"text-foreground",children:[r.progress,"%"]})]}),n.jsx(xi,{value:r.progress,className:"h-2"})]}),r.phase==="error"&&n.jsx("div",{className:"rounded-lg bg-destructive/10 border border-destructive/30 p-3 text-sm text-destructive",children:r.error}),r.phase==="complete"&&n.jsxs("div",{className:"rounded-lg bg-success/10 border border-success/30 p-3 flex items-center gap-2 text-sm text-success",children:[n.jsx(Xe,{className:"h-4 w-4"}),l("investigation.taskCreated")]})]}),n.jsxs(As,{children:[r.phase==="idle"&&n.jsxs(n.Fragment,{children:[n.jsx(W,{variant:"outline",onClick:()=>t(!1),children:l("investigation.cancel")}),n.jsxs(W,{onClick:_,children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),l("detail.createTask")]})]}),r.phase!=="idle"&&r.phase!=="complete"&&r.phase!=="error"&&n.jsxs(W,{variant:"outline",disabled:!0,children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),l("investigation.creating")]}),r.phase==="error"&&n.jsx(W,{variant:"outline",onClick:a,children:l("investigation.close")}),r.phase==="complete"&&n.jsx(W,{onClick:a,children:l("investigation.done")})]})]})})}function pV({searchQuery:e,icon:t=Yb,message:s}){const{t:r}=Re("gitlab");return n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-muted/50 flex items-center justify-center mb-3",children:n.jsx(t,{className:"h-6 w-6 text-muted-foreground"})}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e?r("empty.noMatch"):s})]})}function oMe({error:e,onOpenSettings:t}){const{t:s}=Re("gitlab");return n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-muted/50 flex items-center justify-center mb-4",children:n.jsx(Yb,{className:"h-8 w-8 text-orange-500"})}),n.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:s("notConnected.title")}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md",children:e||s("notConnected.description")}),t&&n.jsxs(W,{onClick:t,variant:"outline",children:[n.jsx(Sd,{className:"h-4 w-4 mr-2"}),s("notConnected.openSettings")]})]})}function lMe({projectPath:e,openIssuesCount:t,isLoading:s,searchQuery:r,filterState:i,onSearchChange:a,onFilterChange:o,onRefresh:l}){const{t:u}=Re("gitlab");return n.jsxs("div",{className:"shrink-0 p-4 border-b border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-muted",children:n.jsx(Yb,{className:"h-5 w-5 text-orange-500"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:u("title")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(oe,{variant:"outline",className:"text-xs",children:[t," ",u("header.open")]}),n.jsx(W,{variant:"ghost",size:"icon",onClick:l,disabled:s,children:n.jsx(We,{className:`h-4 w-4 ${s?"animate-spin":""}`})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:u("header.searchPlaceholder"),value:r,onChange:d=>a(d.target.value),className:"pl-9"})]}),n.jsxs(_t,{value:i,onValueChange:o,children:[n.jsxs(yt,{className:"w-32",children:[n.jsx(Wb,{className:"h-4 w-4 mr-2"}),n.jsx(Nt,{})]}),n.jsxs(wt,{children:[n.jsx(et,{value:"opened",children:u("filters.opened")}),n.jsx(et,{value:"closed",children:u("filters.closed")}),n.jsx(et,{value:"all",children:u("filters.all")})]})]})]})]})}function cMe({issues:e,selectedIssueIid:t,isLoading:s,error:r,onSelectIssue:i,onInvestigate:a}){return r?n.jsx("div",{className:"p-4 bg-destructive/10 border-b border-destructive/30",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[n.jsx(Ke,{className:"h-4 w-4"}),r]})}):s?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):e.length===0?n.jsx(pV,{message:"No issues found"}):n.jsx(zt,{className:"flex-1",children:n.jsx("div",{className:"p-2 space-y-1",children:e.map(o=>n.jsx(sMe,{issue:o,isSelected:t===o.iid,onClick:()=>i(o.iid),onInvestigate:()=>a(o)},o.id))})})}function dMe({onOpenSettings:e,onNavigateToTask:t}){const{t:s}=Re("gitlab"),r=Ot(V=>V.projects),i=Ot(V=>V.selectedProjectId),a=r.find(V=>V.id===i),o=Ks(V=>V.tasks),{syncStatus:l,isLoading:u,error:d,selectedIssueIid:m,selectedIssue:f,filterState:x,selectIssue:v,getFilteredIssues:y,getOpenIssuesCount:w,handleRefresh:S,handleFilterChange:C}=XIe(a?.id),{investigationStatus:_,lastInvestigationResult:j,startInvestigation:T,resetInvestigationStatus:E}=ZIe(a?.id),{searchQuery:A,setSearchQuery:R,filteredIssues:D}=JIe(y()),[M,P]=p.useState(!1),[O,F]=p.useState(null),$=p.useMemo(()=>{const V=new Map;for(const B of o)B.metadata?.gitlabIssueIid&&V.set(B.metadata.gitlabIssueIid,B.specId||B.id);return V},[o]),z=p.useCallback(V=>{F(V),P(!0)},[]),H=p.useCallback(V=>{O&&T(O,V)},[O,T]),I=p.useCallback(()=>{P(!1),E()},[E]);return l?.connected?n.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[n.jsx(lMe,{projectPath:l.projectPathWithNamespace??"",openIssuesCount:w(),isLoading:u,searchQuery:A,filterState:x,onSearchChange:R,onFilterChange:C,onRefresh:S}),n.jsxs("div",{className:"flex-1 flex min-h-0",children:[n.jsx("div",{className:"w-1/2 border-r border-border flex flex-col",children:n.jsx(cMe,{issues:D,selectedIssueIid:m,isLoading:u,error:d,onSelectIssue:v,onInvestigate:z})}),n.jsx("div",{className:"w-1/2 flex flex-col",children:f?n.jsx(iMe,{issue:f,onInvestigate:()=>z(f),investigationResult:j?.issueIid===f.iid?j:null,linkedTaskId:$.get(f.iid),onViewTask:t}):n.jsx(pV,{message:s("empty.selectIssue")})})]}),n.jsx(aMe,{open:M,onOpenChange:P,selectedIssue:O,investigationStatus:_,onStartInvestigation:H,onClose:I,projectId:a?.id})]}):n.jsx(oMe,{error:l?.error||null,onOpenSettings:e})}function uMe(e,t={}){const{isActive:s=!0}=t,[r,i]=p.useState([]),[a,o]=p.useState(!1),[l,u]=p.useState(!1),[d,m]=p.useState(!1),[f,x]=p.useState(null),[v,y]=p.useState(null),[w,S]=p.useState(null),[C,_]=p.useState(!1),[j,T]=p.useState(null),[E,A]=p.useState(1),[R,D]=p.useState(!0),M=p.useRef(s),P=p.useRef(!1),O=p.useRef(null),F=Ca(Ne=>Ne.prReviews),$=Ca(Ne=>Ne.getPRReviewState),z=Ca(Ne=>Ne.getActivePRReviews),H=Ca(Ne=>Ne.setNewCommitsCheck),I=p.useMemo(()=>!e||v===null?null:$(e,v),[e,v,F,$]),V=I?.result??null,B=I?.progress??null,K=I?.isReviewing??!1,L=I?.previousResult??null,G=I?.startedAt??null,Y=p.useMemo(()=>e?z(e).map(Ne=>Ne.prNumber):[],[e,F,z]),q=p.useCallback(Ne=>{if(!e)return null;const Ve=$(e,Ne);return Ve?{isReviewing:Ve.isReviewing,startedAt:Ve.startedAt,progress:Ve.progress,result:Ve.result,previousResult:Ve.previousResult,error:Ve.error,newCommitsCheck:Ve.newCommitsCheck}:null},[e,F,$]),Q=p.useMemo(()=>(w?.number===v?w:null)||r.find(Ve=>Ve.number===v)||null,[w,r,v]),se=p.useCallback(async(Ne=1,Ve=!1)=>{if(e){Ve?u(!0):o(!0),x(null);try{const qe=await window.electronAPI.github.checkGitHubConnection(e);if(qe.success&&qe.data){if(_(qe.data.connected),T(qe.data.repoFullName||null),qe.data.connected){const Ze=await window.electronAPI.github.listPRs(e,Ne);if(Ze){D(Ze.length===100),A(Ne),i(Ve?De=>{const je=new Set(De.map(It=>It.number)),Ce=Ze.filter(It=>!je.has(It.number));return[...De,...Ce]}:Ze);const Ae=Ze.filter(De=>{const je=$(e,De.number);return!je?.result&&!je?.isReviewing});if(Ae.length>0){const De=Ae.map(Ce=>Ce.number),je=await window.electronAPI.github.getPRReviewsBatch(e,De);for(const Ce of Object.values(je))Ce&&Ca.getState().setPRReviewResult(e,Ce,{preserveNewCommitsCheck:!0})}}}}else _(!1),T(null),x(qe.error||"Failed to check connection")}catch(qe){x(qe instanceof Error?qe.message:"Failed to fetch PRs"),_(!1)}finally{o(!1),u(!1)}}},[e,$]);p.useEffect(()=>{e&&!P.current&&(P.current=!0,se(1,!1))},[e,se]),p.useEffect(()=>{s&&!M.current&&P.current&&(A(1),D(!0),se(1,!1)),M.current=s},[s,se]),p.useEffect(()=>{P.current=!1,A(1),D(!0),i([]),y(null),S(null)},[e]);const te=p.useCallback(Ne=>{if(y(Ne),Ne===null){S(null),O.current=null;return}if(Ne&&e){O.current=Ne,m(!0),window.electronAPI.github.getPR(e,Ne).then(qe=>{qe&&Ne===O.current&&S(qe)}).catch(qe=>{console.warn(`Failed to fetch PR details for #${Ne}:`,qe)}).finally(()=>{Ne===O.current&&m(!1)});const Ve=$(e,Ne);!Ve?.result&&!Ve?.isReviewing?window.electronAPI.github.getPRReview(e,Ne).then(qe=>{qe&&(Ca.getState().setPRReviewResult(e,qe,{preserveNewCommitsCheck:!0}),qe.reviewedCommitSha&&window.electronAPI.github.checkNewCommits(e,Ne).then(Ae=>{H(e,Ne,Ae)}).catch(Ae=>{console.warn(`Failed to check new commits for PR #${Ne}:`,Ae)}))}):Ve?.result&&Ve.result.reviewedCommitSha&&window.electronAPI.github.checkNewCommits(e,Ne).then(Ze=>{H(e,Ne,Ze)}).catch(Ze=>{console.warn(`Failed to check new commits for PR #${Ne}:`,Ze)})}},[e,$,H]),ee=p.useCallback(async()=>{A(1),D(!0),await se(1,!1)},[se]),pe=p.useCallback(async()=>{!R||l||a||await se(E+1,!0)},[se,R,l,a,E]),fe=p.useCallback(Ne=>{e&&NAe(e,Ne)},[e]),re=p.useCallback(Ne=>{e&&CAe(e,Ne)},[e]),Z=p.useCallback(async Ne=>{if(!e)return{hasNewCommits:!1,newCommitCount:0};try{const Ve=await window.electronAPI.github.checkNewCommits(e,Ne);return H(e,Ne,Ve),Ve}catch(Ve){return x(Ve instanceof Error?Ve.message:"Failed to check for new commits"),{hasNewCommits:!1,newCommitCount:0}}},[e,H]),ie=p.useCallback(async Ne=>{if(!e)return!1;try{const Ve=await window.electronAPI.github.cancelPRReview(e,Ne);return Ve&&Ca.getState().setPRReviewError(e,Ne,"Review cancelled by user"),Ve}catch(Ve){return x(Ve instanceof Error?Ve.message:"Failed to cancel review"),!1}},[e]),ce=p.useCallback(async(Ne,Ve,qe)=>{if(!e)return!1;try{const Ze=await window.electronAPI.github.postPRReview(e,Ne,Ve,qe);if(Ze){const Ae=await window.electronAPI.github.getPRReview(e,Ne);Ae&&Ca.getState().setPRReviewResult(e,Ae,{preserveNewCommitsCheck:!0})}return Ze}catch(Ze){return x(Ze instanceof Error?Ze.message:"Failed to post review"),!1}},[e]),He=p.useCallback(async(Ne,Ve)=>{if(!e)return!1;try{return await window.electronAPI.github.postPRComment(e,Ne,Ve)}catch(qe){return x(qe instanceof Error?qe.message:"Failed to post comment"),!1}},[e]),tt=p.useCallback(async(Ne,Ve="squash")=>{if(!e)return!1;try{const qe=await window.electronAPI.github.mergePR(e,Ne,Ve);return qe&&await se(),qe}catch(qe){return x(qe instanceof Error?qe.message:"Failed to merge PR"),!1}},[e,se]),he=p.useCallback(async(Ne,Ve)=>{if(!e)return!1;try{const qe=await window.electronAPI.github.assignPR(e,Ne,Ve);return qe&&await se(),qe}catch(qe){return x(qe instanceof Error?qe.message:"Failed to assign user"),!1}},[e,se]);return{prs:r,isLoading:a,isLoadingMore:l,isLoadingPRDetails:d,error:f,selectedPR:Q,selectedPRNumber:v,reviewResult:V,reviewProgress:B,startedAt:G,isReviewing:K,previousReviewResult:L,isConnected:C,repoFullName:j,activePRReviews:Y,hasMore:R,selectPR:te,refresh:ee,loadMore:pe,runReview:fe,runFollowupReview:re,checkNewCommits:Z,cancelReview:ie,postReview:ce,postComment:He,mergePR:tt,assignPR:he,getReviewStateForPR:q}}const c5={searchQuery:"",contributors:[],statuses:[]};function hMe(e){if(e?.isReviewing)return"reviewing";if(!e?.result)return"not_reviewed";const t=e.result,s=!!t.reviewId||!!t.hasPostedFindings,r=t.overallStatus==="request_changes"||t.findings?.some(o=>o.severity==="critical"||o.severity==="high"),i=e.newCommitsCheck?.hasNewCommits,a=e.newCommitsCheck?.hasCommitsAfterPosting;return s&&i&&a?"ready_for_followup":s&&r?"changes_requested":s?"ready_to_merge":"reviewed"}function mMe(e,t){const[s,r]=p.useState(c5),i=p.useMemo(()=>{const f=new Set;return e.forEach(x=>{x.author?.login&&f.add(x.author.login)}),Array.from(f).sort((x,v)=>x.toLowerCase().localeCompare(v.toLowerCase()))},[e]),a=p.useMemo(()=>e.filter(f=>{if(s.searchQuery){const x=s.searchQuery.toLowerCase(),v=f.title.toLowerCase().includes(x),y=f.body?.toLowerCase().includes(x),w=f.number.toString().includes(x);if(!v&&!y&&!w)return!1}if(s.contributors.length>0){const x=f.author?.login;if(!x||!s.contributors.includes(x))return!1}if(s.statuses.length>0){const x=t(f.number),v=hMe(x);if(!s.statuses.some(w=>w==="posted"?x?.result?.reviewId||x?.result?.hasPostedFindings:v===w))return!1}return!0}),[e,s,t]),o=p.useCallback(f=>{r(x=>({...x,searchQuery:f}))},[]),l=p.useCallback(f=>{r(x=>({...x,contributors:f}))},[]),u=p.useCallback(f=>{r(x=>({...x,statuses:f}))},[]),d=p.useCallback(()=>{r(c5)},[]),m=p.useMemo(()=>s.searchQuery!==""||s.contributors.length>0||s.statuses.length>0,[s]);return{filteredPRs:a,contributors:i,filters:s,setSearchQuery:o,setContributors:l,setStatuses:u,clearFilters:d,hasActiveFilters:m}}function Rv({title:e,icon:t,badge:s,headerAction:r,children:i,defaultOpen:a=!0,open:o,onOpenChange:l,className:u}){const[d,m]=p.useState(a),f=o!==void 0?o:d,x=l||m;return n.jsxs(Ba,{open:f,onOpenChange:x,className:J("border rounded-lg bg-card shadow-sm overflow-hidden",u),children:[n.jsx(za,{asChild:!0,children:n.jsxs("div",{className:"p-4 flex items-center justify-between gap-3 bg-muted/30 cursor-pointer hover:bg-muted/40 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:"shrink-0",children:f?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"})}),t&&n.jsx("div",{className:"shrink-0",children:t}),n.jsx("span",{className:"font-medium truncate",children:e})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[r,s]})]})}),n.jsx($a,{children:i})]})}function gV(e,t="en-US"){const s=new Date(e);return isNaN(s.getTime())?"":s.toLocaleDateString(t,{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function fMe({status:e,isReviewing:t,startedAt:s,reviewResult:r,previousReviewResult:i,postedCount:a,onRunReview:o,onRunFollowupReview:l,onCancelReview:u,newCommitsCheck:d,lastPostedAt:m}){const{t:f,i18n:x}=Re("common"),[v,y]=p.useState(!0),w=t&&(i!==null||r?.isFollowupReview);if(e==="not_reviewed"&&!t)return n.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-y-3 p-4 border rounded-lg bg-card shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:"h-2.5 w-2.5 shrink-0 rounded-full bg-muted-foreground/30"}),n.jsx("span",{className:"font-medium text-muted-foreground truncate",children:f("prReview.notReviewed")})]}),n.jsxs(W,{onClick:o,size:"sm",className:"gap-2 shrink-0 ml-auto sm:ml-0",children:[n.jsx(Zr,{className:"h-3.5 w-3.5"}),f("prReview.runAIReview")]})]});const S=[];if(w){if(i){S.push({id:"prev_review",label:f("prReview.previousReview",{count:i.findings.length}),status:"completed",date:i.reviewedAt});const E=i.postedFindingIds?.length??0;(i.hasPostedFindings||E>0)&&S.push({id:"prev_posted",label:f("prReview.findingsPosted",{count:E}),status:"completed",date:i.postedAt})}else S.push({id:"prev_review",label:f("prReview.reviewStatus"),status:"completed",date:null});d?.hasNewCommits&&S.push({id:"new_commits",label:f("prReview.newCommits",{count:d.newCommitCount}),status:"completed",date:null}),S.push({id:"followup_analysis",label:f("prReview.followupInProgress"),status:"current",date:null})}else{S.push({id:"start",label:f("prReview.reviewStarted"),status:"completed",date:s||r?.reviewedAt||new Date().toISOString()}),t?S.push({id:"analysis",label:f("prReview.analysisInProgress"),status:"current",date:null}):r&&S.push({id:"analysis",label:f("prReview.analysisComplete",{count:r.findings.length}),status:"completed",date:r.reviewedAt,action:n.jsx(W,{size:"sm",variant:"ghost",onClick:o,className:"ml-2 h-6 text-xs px-2 text-muted-foreground hover:text-foreground",title:f("prReview.rerunReview"),children:n.jsx(We,{className:"h-3 w-3"})})}),a>0||r?.hasPostedFindings?S.push({id:"posted",label:f("prReview.findingsPostedToGitHub"),status:"completed",date:r?.postedAt||(m?new Date(m).toISOString():null)}):r&&r.findings.length>0&&S.push({id:"posted",label:f("prReview.pendingPost"),status:"pending",date:null});const E=a>0||r?.hasPostedFindings;!t&&E&&d?.hasNewCommits&&d?.hasCommitsAfterPosting&&(d.hasOverlapWithFindings??!0?(S.push({id:"new_commits",label:f("prReview.newCommitsOverlap",{count:d.newCommitCount,files:d.overlappingFiles?.length??0}),status:"alert",date:null}),S.push({id:"followup",label:f("prReview.verifyChanges"),status:"pending",action:n.jsx(W,{size:"sm",variant:"outline",onClick:l,className:"ml-2 h-6 text-xs px-2",children:f("prReview.runFollowup")})})):S.push({id:"branch_synced",label:d.isMergeFromBase?f("prReview.branchSynced",{count:d.newCommitCount}):f("prReview.newCommitsNoOverlap",{count:d.newCommitCount}),status:"completed",date:null,action:n.jsx(W,{size:"sm",variant:"ghost",onClick:l,className:"ml-2 h-6 text-xs px-2 text-muted-foreground hover:text-foreground",title:f("prReview.runFollowupAnyway"),children:f("prReview.verifyAnyway")})}))}const _=J("h-2.5 w-2.5 shrink-0 rounded-full",(()=>{if(t)return"bg-blue-500 animate-pulse";switch(e){case"ready_to_merge":return"bg-success";case"waiting_for_changes":return"bg-warning";case"reviewed_pending_post":return"bg-primary";case"ready_for_followup":return"bg-info";case"needs_attention":return"bg-destructive";case"followup_issues_remain":return"bg-warning";default:return"bg-muted-foreground"}})()),T=(()=>{if(t)return f("prReview.aiReviewInProgress");switch(e){case"ready_to_merge":return f("prReview.readyToMerge");case"waiting_for_changes":return f("prReview.waitingForChanges");case"reviewed_pending_post":return f("prReview.reviewComplete");case"ready_for_followup":return f("prReview.readyForFollowup");case"needs_attention":return f("prReview.needsAttention");case"followup_issues_remain":return f("prReview.blockingIssues");default:return f("prReview.reviewStatus")}})();return n.jsx(Rv,{title:T,icon:n.jsx("div",{className:_}),headerAction:t?n.jsx(W,{variant:"ghost",size:"sm",onClick:E=>{E.stopPropagation(),u()},className:"h-7 text-destructive hover:text-destructive hover:bg-destructive/10",children:f("prReview.cancel")}):void 0,open:v,onOpenChange:y,children:n.jsx("div",{className:"p-4 pt-0",children:n.jsx("div",{className:"relative pl-2 ml-2 border-l border-border/50 space-y-4 pt-4",children:S.map(E=>n.jsxs("div",{className:"relative flex items-start gap-3 pl-4",children:[n.jsx("div",{className:J("absolute -left-[13px] top-1 bg-background rounded-full p-0.5 border",E.status==="completed"?"border-success text-success":E.status==="current"?"border-primary text-primary animate-pulse":E.status==="alert"?"border-warning text-warning":"border-muted-foreground text-muted-foreground"),children:E.status==="completed"?n.jsx(Ys,{className:"h-3 w-3"}):E.status==="current"?n.jsx(zne,{className:"h-3 w-3"}):n.jsx(yo,{className:"h-3 w-3"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1",children:[n.jsx("span",{className:J("text-sm font-medium truncate max-w-full",E.status==="completed"?"text-foreground":E.status==="current"?"text-primary":"text-muted-foreground"),children:E.label}),E.action]}),E.date&&n.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:gV(E.date,x.language)})]})]},E.id))})})})}function pMe(e){switch(e.toLowerCase()){case"added":return"bg-emerald-500/15 text-emerald-500 border-emerald-500/30";case"removed":case"deleted":return"bg-red-500/15 text-red-500 border-red-500/30";case"modified":case"changed":return"bg-amber-500/15 text-amber-500 border-amber-500/30";case"renamed":return"bg-blue-500/15 text-blue-500 border-blue-500/30";default:return"bg-muted text-muted-foreground"}}function gMe({pr:e,isLoadingFiles:t=!1}){const{t:s,i18n:r}=Re("common"),[i,a]=p.useState(!1),o=e.files&&e.files.length>0;return n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(oe,{variant:e.state.toLowerCase()==="open"?"success":"secondary",className:J("capitalize px-2.5 py-0.5",e.state.toLowerCase()==="open"?"bg-emerald-500/15 text-emerald-500 hover:bg-emerald-500/25 border-emerald-500/20":""),children:s(`prReview.state.${e.state.toLowerCase()}`)}),n.jsxs("span",{className:"text-muted-foreground text-sm font-mono",children:["#",e.number]})]}),n.jsx(W,{variant:"ghost",size:"icon",asChild:!0,className:"h-8 w-8 text-muted-foreground hover:text-foreground",children:n.jsx("a",{href:e.htmlUrl,target:"_blank",rel:"noopener noreferrer",children:n.jsx(Zt,{className:"h-4 w-4"})})})]}),n.jsx("h1",{className:"text-xl font-bold mb-4 leading-tight",children:e.title}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 text-sm text-muted-foreground border-b border-border/40 pb-5",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-muted rounded-full p-1",children:n.jsx(Qr,{className:"h-3.5 w-3.5"})}),n.jsx("span",{className:"font-medium text-foreground",children:e.author.login})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(cr,{className:"h-4 w-4 opacity-70"}),n.jsx("span",{children:gV(e.createdAt,r.language)})]}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-muted/50 font-mono text-xs border border-border/50",children:[n.jsx(an,{className:"h-3 w-3"}),n.jsx("span",{className:"text-foreground",children:e.headRefName}),n.jsx("span",{className:"text-muted-foreground/50 mx-1",children:""}),n.jsx("span",{className:"text-foreground",children:e.baseRefName})]}),n.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[n.jsxs("button",{onClick:()=>a(!i),className:J("flex items-center gap-1.5 px-2 py-1 rounded-md transition-colors","hover:bg-accent/50 cursor-pointer",i&&"bg-accent/50"),title:s("prReview.clickToViewFiles"),children:[t?n.jsx(we,{className:"h-4 w-4 animate-spin"}):n.jsx(r1,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium text-foreground",children:e.changedFiles}),n.jsx("span",{className:"text-xs",children:s("prReview.files")}),o&&(i?n.jsx(Hi,{className:"h-3 w-3 ml-1"}):n.jsx(bt,{className:"h-3 w-3 ml-1"}))]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs font-mono",children:[n.jsxs("span",{className:"text-emerald-500 bg-emerald-500/10 px-1.5 py-0.5 rounded",children:["+",e.additions]}),n.jsxs("span",{className:"text-red-500 bg-red-500/10 px-1.5 py-0.5 rounded",children:["-",e.deletions]})]})]})]}),i&&n.jsx("div",{className:"mt-4 border border-border/40 rounded-lg overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:t?n.jsxs("div",{className:"p-4 flex items-center justify-center text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin mr-2"}),n.jsx("span",{className:"text-sm",children:s("prReview.loadingFiles")})]}):o?n.jsx("div",{className:"divide-y divide-border/40 max-h-[300px] overflow-y-auto",children:e.files.map((l,u)=>n.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 hover:bg-accent/30 transition-colors",children:[n.jsx(Ms,{className:"h-4 w-4 text-muted-foreground shrink-0"}),n.jsx("span",{className:"font-mono text-xs truncate flex-1",title:l.path,children:l.path}),n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0 shrink-0",pMe(l.status)),children:l.status}),n.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-mono shrink-0",children:[n.jsxs("span",{className:"text-emerald-500 flex items-center gap-0.5",children:[n.jsx(fs,{className:"h-3 w-3"}),l.additions]}),n.jsxs("span",{className:"text-red-500 flex items-center gap-0.5",children:[n.jsx(Qb,{className:"h-3 w-3"}),l.deletions]})]})]},`${l.path}-${u}`))}):n.jsx("div",{className:"p-4 text-center text-muted-foreground text-sm",children:s("prReview.noFilesAvailable")})})]})}function xMe({isReviewing:e,hasResult:t,hasPosted:s,hasBlockingFindings:r,hasNewCommits:i,hasCommitsAfterPosting:a,t:o}){let l="not_started";s?l="posted":t?l="reviewed":e&&(l="reviewing");let u="success";i&&a?u="followup":r&&(u="warning");const d=x=>{const v="h-2 w-2 rounded-full transition-all duration-300";if(l==="not_started")return J(v,"bg-muted-foreground/30");if(l==="reviewing")return x===0?J(v,"bg-amber-400 animate-pulse"):J(v,"bg-muted-foreground/30");if(l==="reviewed")return x===0?J(v,"bg-amber-400"):x===1?J(v,"bg-blue-400"):J(v,"bg-muted-foreground/30");if(l==="posted"){const y={success:"bg-emerald-400",warning:"bg-red-400",followup:"bg-cyan-400"};return x===0?J(v,"bg-amber-400"):x===1?J(v,"bg-blue-400"):J(v,y[u])}return J(v,"bg-muted-foreground/30")},f=l==="not_started"?null:l==="reviewing"?{label:o("prReview.reviewing"),textColor:"text-amber-400"}:l==="reviewed"?{label:o("prReview.pendingPost"),textColor:"text-blue-400"}:l==="posted"?{success:{label:o("prReview.readyToMerge"),textColor:"text-emerald-400"},warning:{label:o("prReview.changesRequested"),textColor:"text-red-400"},followup:{label:o("prReview.readyForFollowup"),textColor:"text-cyan-400"}}[u]:null;return n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:d(0)}),n.jsx("div",{className:d(1)}),n.jsx("div",{className:d(2)})]}),f&&n.jsx("span",{className:J("text-xs font-medium",f.textColor),children:f.label})]})}function vMe(e){const t=new Date(e),r=new Date().getTime()-t.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i===0){const a=Math.floor(r/36e5);return a===0?`${Math.floor(r/6e4)}m ago`:`${a}h ago`}return i===1?"yesterday":i<7?`${i}d ago`:i<30?`${Math.floor(i/7)}w ago`:t.toLocaleDateString()}function bMe({prs:e,selectedPRNumber:t,isLoading:s,isLoadingMore:r,hasMore:i,error:a,getReviewStateForPR:o,onSelectPR:l,onLoadMore:u}){const{t:d}=Re("common"),m=p.useRef(null),f=p.useRef(null),x=p.useCallback(v=>{const[y]=v;y.isIntersecting&&i&&!r&&!s&&u()},[i,r,s,u]);return p.useEffect(()=>{const v=f.current;if(!v)return;const y=new IntersectionObserver(x,{root:null,rootMargin:"100px",threshold:0});return y.observe(v),()=>{y.disconnect()}},[x]),s&&e.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx(Js,{className:"h-8 w-8 mx-auto mb-2 animate-pulse"}),n.jsx("p",{children:d("prReview.loadingPRs")})]})}):a?n.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:n.jsx("div",{className:"text-center text-destructive",children:n.jsx("p",{className:"text-sm",children:a})})}):e.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx(Js,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:d("prReview.noOpenPRs")})]})}):n.jsx(zt,{className:"flex-1",ref:m,children:n.jsxs("div",{className:"divide-y divide-border",children:[e.map(v=>{const y=o(v.number),w=y?.isReviewing??!1,S=y?.result!==null&&y?.result!==void 0;return n.jsx("button",{onClick:()=>l(v.number),className:J("w-full p-4 text-left transition-colors hover:bg-accent/50",t===v.number&&"bg-accent"),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Js,{className:"h-5 w-5 mt-0.5 text-success shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[n.jsxs("span",{className:"text-sm text-muted-foreground",children:["#",v.number]}),n.jsx(oe,{variant:"outline",className:"text-xs",children:v.headRefName}),n.jsx(xMe,{isReviewing:w,hasResult:S,hasPosted:!!y?.result?.reviewId||!!y?.result?.hasPostedFindings||!!y?.result?.postedFindingIds?.length||!!y?.result?.isFollowupReview&&y?.result?.findings?.length===0,hasBlockingFindings:y?.result?.overallStatus==="request_changes"||!!y?.result?.findings?.some(C=>C.severity==="critical"||C.severity==="high"),hasNewCommits:!!y?.newCommitsCheck?.hasNewCommits,hasCommitsAfterPosting:y?.newCommitsCheck?.hasCommitsAfterPosting??!1,t:d})]}),n.jsx("h3",{className:"font-medium text-sm truncate",children:v.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Qr,{className:"h-3 w-3"}),v.author.login]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(cr,{className:"h-3 w-3"}),vMe(v.updatedAt)]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(r1,{className:"h-3 w-3"}),n.jsxs("span",{className:"text-success",children:["+",v.additions]}),n.jsxs("span",{className:"text-destructive",children:["-",v.deletions]})]})]})]})]})},v.number)}),n.jsx("div",{ref:f,className:"py-4 flex justify-center",children:r?n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{className:"text-sm",children:d("prReview.loadingMore")})]}):i?n.jsx("span",{className:"text-xs text-muted-foreground opacity-50",children:d("prReview.scrollForMore")}):e.length>0?n.jsx("span",{className:"text-xs text-muted-foreground opacity-50",children:d("prReview.allPRsLoaded")}):null})]})})}function yMe({findings:e,selectedIds:t,onSelectionChange:s,groupedFindings:r}){const i=p.useCallback(f=>{const x=new Set(t);x.has(f)?x.delete(f):x.add(f),s(x)},[t,s]),a=p.useCallback(()=>{s(new Set(e.map(f=>f.id)))},[e,s]),o=p.useCallback(()=>{s(new Set)},[s]),l=p.useCallback(()=>{const f=[...r.critical,...r.high];s(new Set(f.map(x=>x.id)))},[r,s]),u=p.useCallback(f=>{const x=r[f],v=x.every(w=>t.has(w.id)),y=new Set(t);if(v)for(const w of x)y.delete(w.id);else for(const w of x)y.add(w.id);s(y)},[r,t,s]),d=p.useCallback(f=>{const x=r[f];return x.length>0&&x.every(v=>t.has(v.id))},[r,t]),m=p.useCallback(f=>{const x=r[f],v=x.filter(y=>t.has(y.id)).length;return v>0&&v<x.length},[r,t]);return{toggleFinding:i,selectAll:a,selectNone:o,selectImportant:l,toggleSeverityGroup:u,isGroupFullySelected:d,isGroupPartiallySelected:m}}function wMe({findings:e,selectedCount:t}){const{t:s}=Re("common"),r={critical:e.filter(i=>i.severity==="critical").length,high:e.filter(i=>i.severity==="high").length,medium:e.filter(i=>i.severity==="medium").length,low:e.filter(i=>i.severity==="low").length,total:e.length};return n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 rounded-lg bg-muted/50",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.critical>0&&n.jsxs(oe,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/30",children:[r.critical," ",s("prReview.severity.critical")]}),r.high>0&&n.jsxs(oe,{variant:"outline",className:"bg-orange-500/10 text-orange-500 border-orange-500/30",children:[r.high," ",s("prReview.severity.high")]}),r.medium>0&&n.jsxs(oe,{variant:"outline",className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/30",children:[r.medium," ",s("prReview.severity.medium")]}),r.low>0&&n.jsxs(oe,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/30",children:[r.low," ",s("prReview.severity.low")]})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:s("prReview.selectedOfTotal",{selected:t,total:r.total})})]})}const jMe=["critical","high","medium","low"],xV={critical:{labelKey:"prReview.severity.critical",color:"text-red-500",bgColor:"bg-red-500/10 border-red-500/30",icon:yn,descriptionKey:"prReview.severity.criticalDesc"},high:{labelKey:"prReview.severity.high",color:"text-orange-500",bgColor:"bg-orange-500/10 border-orange-500/30",icon:Tt,descriptionKey:"prReview.severity.highDesc"},medium:{labelKey:"prReview.severity.medium",color:"text-yellow-500",bgColor:"bg-yellow-500/10 border-yellow-500/30",icon:Ke,descriptionKey:"prReview.severity.mediumDesc"},low:{labelKey:"prReview.severity.low",color:"text-blue-500",bgColor:"bg-blue-500/10 border-blue-500/30",icon:Ys,descriptionKey:"prReview.severity.lowDesc"}},SMe={security:xa,quality:lr,docs:$n,test:aO,performance:vi,style:lr,pattern:lr,logic:Ke};function _Me(e){return SMe[e]||lr}function NMe({severity:e,count:t,selectedCount:s,expanded:r,onToggle:i,onSelectAll:a}){const{t:o}=Re("common"),l=xV[e],u=l.icon,d=s===t&&t>0,m=s>0&&s<t;return n.jsxs("button",{type:"button",onClick:i,className:"w-full flex items-center justify-between p-3 hover:bg-black/5 dark:hover:bg-white/5 rounded-t-lg transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{onClick:a,className:"cursor-pointer",children:d?n.jsx(_d,{className:J("h-4 w-4",l.color)}):m?n.jsx(rO,{className:J("h-4 w-4",l.color)}):n.jsx(jo,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(u,{className:J("h-4 w-4",l.color)}),n.jsx("span",{className:J("font-medium text-sm",l.color),children:o(l.labelKey)}),n.jsx(oe,{variant:"secondary",className:"text-xs",children:t}),n.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:o(l.descriptionKey)})]}),r?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"})]})}function CMe(e){return{security:"prReview.category.security",logic:"prReview.category.logic",quality:"prReview.category.quality",performance:"prReview.category.performance",style:"prReview.category.style",documentation:"prReview.category.documentation",testing:"prReview.category.testing",other:"prReview.category.other"}[e.toLowerCase()]||e}function kMe({finding:e,selected:t,posted:s=!1,onToggle:r}){const{t:i}=Re("common"),a=_Me(e.category),o=CMe(e.category),l=i(o,{defaultValue:e.category});return n.jsxs("div",{className:J("rounded-lg border bg-background p-3 space-y-2 transition-colors",t&&!s&&"ring-2 ring-primary/50",s&&"opacity-60"),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[s?n.jsx(Ys,{className:"h-4 w-4 mt-0.5 text-success shrink-0"}):n.jsx(Ui,{id:e.id,checked:t,onCheckedChange:r,className:"mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs(oe,{variant:"outline",className:"text-xs shrink-0",children:[n.jsx(a,{className:"h-3 w-3 mr-1"}),l]}),s&&n.jsx(oe,{variant:"outline",className:"text-xs shrink-0 text-success border-success/50",children:i("prReview.posted")}),n.jsx("span",{className:"font-medium text-sm break-words",children:e.title})]}),n.jsx("p",{className:"text-sm text-muted-foreground break-words",children:e.description}),n.jsx("div",{className:"text-xs text-muted-foreground",children:n.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded break-all",children:[e.file,":",e.line,e.endLine&&e.endLine!==e.line&&`-${e.endLine}`]})})]})]}),e.suggestedFix&&n.jsxs("div",{className:"ml-7 text-xs",children:[n.jsx("span",{className:"text-muted-foreground font-medium",children:i("prReview.suggestedFix")}),n.jsx("pre",{className:"mt-1 p-2 bg-muted rounded text-xs overflow-x-auto max-w-full whitespace-pre-wrap break-words",children:e.suggestedFix})]})]})}function AMe({findings:e,selectedIds:t,postedIds:s=new Set,onSelectionChange:r}){const{t:i}=Re("common"),[a,o]=p.useState(new Set(["critical","high"])),l=p.useMemo(()=>e.filter(C=>!s.has(C.id)),[e,s]),u=e.length>0&&l.length===0,d=p.useMemo(()=>{const C={critical:[],high:[],medium:[],low:[]};for(const _ of l){const j=_.severity;C[j]&&C[j].push(_)}return C},[l]),m=p.useMemo(()=>({critical:d.critical.length,high:d.high.length,medium:d.medium.length,low:d.low.length,total:l.length,important:d.critical.length+d.high.length,posted:s.size}),[d,l.length,s.size]),{toggleFinding:f,selectAll:x,selectNone:v,selectImportant:y,toggleSeverityGroup:w}=yMe({findings:l,selectedIds:t,onSelectionChange:r,groupedFindings:d}),S=C=>{o(_=>{const j=new Set(_);return j.has(C)?j.delete(C):j.add(C),j})};return u?n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground bg-success/5 rounded-lg border border-success/20",children:[n.jsx(Np,{className:"h-8 w-8 mx-auto mb-2 text-success"}),n.jsx("p",{className:"text-sm font-medium text-success",children:i("prReview.allFindingsPosted")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i("prReview.findingsPostedCount",{count:m.posted})})]})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(wMe,{findings:l,selectedCount:t.size}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs(W,{variant:"outline",size:"sm",onClick:y,className:"text-xs",disabled:m.important===0,children:[n.jsx(Tt,{className:"h-3 w-3 mr-1"}),i("prReview.selectCriticalHigh",{count:m.important})]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:x,className:"text-xs",children:[n.jsx(_d,{className:"h-3 w-3 mr-1"}),i("prReview.selectAll")]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:v,className:"text-xs",disabled:t.size===0,children:[n.jsx(jo,{className:"h-3 w-3 mr-1"}),i("prReview.clear")]})]}),n.jsx("div",{className:"space-y-3",children:jMe.map(C=>{const _=d[C];if(_.length===0)return null;const j=xV[C],T=a.has(C),E=_.filter(A=>t.has(A.id)).length;return n.jsxs("div",{className:J("rounded-lg border",j.bgColor),children:[n.jsx(NMe,{severity:C,count:_.length,selectedCount:E,expanded:T,onToggle:()=>S(C),onSelectAll:A=>{A.stopPropagation(),w(C)}}),T&&n.jsx("div",{className:"p-3 pt-0 space-y-2",children:_.map(A=>n.jsx(kMe,{finding:A,selected:t.has(A.id),posted:!1,onToggle:()=>f(A.id)},A.id))})]},C)})}),e.length===0&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ys,{className:"h-8 w-8 mx-auto mb-2 text-success"}),n.jsx("p",{className:"text-sm",children:i("prReview.noIssuesFound")})]})]})}const EMe={context:"Context Gathering",analysis:"AI Analysis",synthesis:"Synthesis"},TMe={context:Xr,analysis:Sne,synthesis:J3},d5={context:"text-blue-500 bg-blue-500/10 border-blue-500/30",analysis:"text-purple-500 bg-purple-500/10 border-purple-500/30",synthesis:"text-green-500 bg-green-500/10 border-green-500/30"},Lf={Context:"bg-blue-500/20 text-blue-400",AI:"bg-purple-500/20 text-purple-400",Orchestrator:"bg-orange-500/20 text-orange-400",ParallelOrchestrator:"bg-orange-500/20 text-orange-400",Followup:"bg-cyan-500/20 text-cyan-400",ParallelFollowup:"bg-cyan-500/20 text-cyan-400",BotDetector:"bg-amber-500/20 text-amber-400",Progress:"bg-green-500/20 text-green-400","PR Review Engine":"bg-indigo-500/20 text-indigo-400",Summary:"bg-emerald-500/20 text-emerald-400","Agent:logic-reviewer":"bg-blue-600/20 text-blue-400","Agent:quality-reviewer":"bg-indigo-600/20 text-indigo-400","Agent:security-reviewer":"bg-red-600/20 text-red-400","Agent:ai-triage-reviewer":"bg-slate-500/20 text-slate-400","Agent:resolution-verifier":"bg-teal-600/20 text-teal-400","Agent:new-code-reviewer":"bg-cyan-600/20 text-cyan-400","Agent:comment-analyzer":"bg-gray-500/20 text-gray-400",default:"bg-muted text-muted-foreground"},PMe=[/^Reading /,/^Searching for /,/^Finding files /,/^Running: /,/^Editing /,/^Writing /,/^Using tool: /,/^Processing\.\.\. \(\d+ messages/,/^Tool result \[/];function RMe(e){return PMe.some(t=>t.test(e))}function DMe(e){const t=new Map,s=[],r=[];for(const a of e)if(a.source?.startsWith("Agent:")){const o=t.get(a.source)||[];o.push(a),t.set(a.source,o)}else(a.source==="ParallelOrchestrator"||a.source==="ParallelFollowup")&&RMe(a.content)?s.push(a):r.push(a);return{agentGroups:Array.from(t.entries()).map(([a,o])=>({agentName:a,entries:o})).sort((a,o)=>{const l=a.entries[0]?.timestamp||"",u=o.entries[0]?.timestamp||"";return l.localeCompare(u)}),orchestratorActivity:s,otherEntries:r}}function IMe({prNumber:e,logs:t,isLoading:s,isStreaming:r=!1}){const[i,a]=p.useState(new Set(["analysis"])),[o,l]=p.useState(new Set),u=m=>{a(f=>{const x=new Set(f);return x.has(m)?x.delete(m):x.add(m),x})},d=m=>{l(f=>{const x=new Set(f);return x.has(m)?x.delete(m):x.add(m),x})};return n.jsx("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:n.jsx("div",{className:"p-4 space-y-2",children:s&&!t?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):t?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:["PR #",e,t.is_followup&&n.jsx(oe,{variant:"outline",className:"text-xs",children:"Follow-up"}),r&&n.jsxs(oe,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-500 border-blue-500/30 flex items-center gap-1",children:[n.jsx(we,{className:"h-2.5 w-2.5 animate-spin"}),"Live"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[n.jsx(cr,{className:"h-3 w-3"}),new Date(t.updated_at).toLocaleString()]})]}),["context","analysis","synthesis"].map(m=>n.jsx(MMe,{phase:m,phaseLog:t.phases[m],isExpanded:i.has(m),onToggle:()=>u(m),isStreaming:r,expandedAgents:o,onToggleAgent:d},m))]}):r?n.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[n.jsx(we,{className:"mx-auto mb-2 h-8 w-8 animate-spin text-blue-500"}),n.jsx("p",{children:"Waiting for logs..."}),n.jsx("p",{className:"text-xs mt-1",children:"Review is starting"})]}):n.jsxs("div",{className:"text-center text-sm text-muted-foreground py-8",children:[n.jsx(dr,{className:"mx-auto mb-2 h-8 w-8 opacity-50"}),n.jsx("p",{children:"No logs available"}),n.jsx("p",{className:"text-xs mt-1",children:"Run a review to generate logs"})]})})})}function MMe({phase:e,phaseLog:t,isExpanded:s,onToggle:r,isStreaming:i=!1,expandedAgents:a,onToggleAgent:o}){const l=TMe[e],u=t?.status||"pending",d=(t?.entries.length||0)>0,m=()=>{if(u==="active"||i&&u==="pending")return n.jsxs(oe,{variant:"outline",className:"text-xs bg-info/10 text-info border-info/30 flex items-center gap-1",children:[n.jsx(we,{className:"h-3 w-3 animate-spin"}),i?"Streaming":"Running"]});if(i&&u==="completed"&&!d)return n.jsx(oe,{variant:"secondary",className:"text-xs text-muted-foreground",children:"Pending"});switch(u){case"completed":return n.jsxs(oe,{variant:"outline",className:"text-xs bg-success/10 text-success border-success/30 flex items-center gap-1",children:[n.jsx(Xe,{className:"h-3 w-3"}),"Complete"]});case"failed":return n.jsxs(oe,{variant:"outline",className:"text-xs bg-destructive/10 text-destructive border-destructive/30 flex items-center gap-1",children:[n.jsx(yn,{className:"h-3 w-3"}),"Failed"]});default:return n.jsx(oe,{variant:"secondary",className:"text-xs text-muted-foreground",children:"Pending"})}};return n.jsxs(Ba,{open:s,onOpenChange:r,children:[n.jsx(za,{asChild:!0,children:n.jsxs("button",{className:J("w-full flex items-center justify-between p-3 rounded-lg border transition-colors","hover:bg-secondary/50",u==="active"&&d5[e],u==="completed"&&"border-success/30 bg-success/5",u==="failed"&&"border-destructive/30 bg-destructive/5",u==="pending"&&"border-border bg-secondary/30"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(l,{className:J("h-4 w-4",u==="active"?d5[e].split(" ")[0]:"text-muted-foreground")}),n.jsx("span",{className:"font-medium text-sm",children:EMe[e]}),d&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t?.entries.length," entries)"]})]}),n.jsx("div",{className:"flex items-center gap-2",children:m()})]})}),n.jsx($a,{children:n.jsx("div",{className:"mt-1 ml-6 border-l-2 border-border pl-4 py-2 space-y-2",children:d?n.jsx(LMe,{entries:t?.entries||[],phase:e,expandedAgents:a,onToggleAgent:o}):n.jsx("p",{className:"text-xs text-muted-foreground italic",children:"No logs yet"})})})]})}function LMe({entries:e,phase:t,expandedAgents:s,onToggleAgent:r}){const{agentGroups:i,orchestratorActivity:a,otherEntries:o}=DMe(e);return n.jsxs("div",{className:"space-y-2",children:[o.length>0&&n.jsx("div",{className:"space-y-1",children:o.map((l,u)=>n.jsx(EC,{entry:l},`other-${l.timestamp}-${u}`))}),a.length>0&&n.jsx(OMe,{entries:a,phase:t,isExpanded:s.has(`${t}-orchestrator-activity`),onToggle:()=>r(`${t}-orchestrator-activity`)}),i.map(l=>n.jsx(FMe,{group:l,phase:t,isExpanded:s.has(`${t}-${l.agentName}`),onToggle:()=>r(`${t}-${l.agentName}`)},`${t}-${l.agentName}`))]})}function OMe({entries:e,isExpanded:t,onToggle:s}){const{t:r}=Re(["common"]),i=e.filter(d=>d.content.startsWith("Reading ")).length,a=e.filter(d=>d.content.startsWith("Searching for ")).length,o=e.length-i-a,l=[];i>0&&l.push(`${i} file${i>1?"s":""} read`),a>0&&l.push(`${a} search${a>1?"es":""}`),o>0&&l.push(`${o} other`);const u=l.join(", ")||`${e.length} operations`;return n.jsxs("div",{className:"rounded-md border border-border/50 bg-secondary/10 overflow-hidden",children:[n.jsxs("button",{onClick:s,className:J("w-full flex items-center justify-between p-2 transition-colors","hover:bg-secondary/30",t&&"bg-secondary/20"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[t?n.jsx(bt,{className:"h-3 w-3 text-muted-foreground"}):n.jsx(Xt,{className:"h-3 w-3 text-muted-foreground"}),n.jsx(Vb,{className:"h-3 w-3 text-orange-400"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:r("common:prReview.logs.agentActivity")})]}),n.jsx(oe,{variant:"outline",className:"text-[9px] px-1.5 py-0 bg-orange-500/10 text-orange-400 border-orange-500/30",children:u})]}),t&&n.jsx("div",{className:"border-t border-border/30 p-2 space-y-0.5 max-h-[300px] overflow-y-auto",children:e.map((d,m)=>n.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-muted-foreground/80 py-0.5",children:[n.jsx("span",{className:"text-muted-foreground/50 tabular-nums shrink-0",children:new Date(d.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),n.jsx("span",{className:"break-words",children:d.content})]},`activity-${d.timestamp}-${m}`))})]})}function FMe({group:e,isExpanded:t,onToggle:s}){const{t:r}=Re(["common"]),{agentName:i,entries:a}=e,o=a.length>1,l=a[0],u=a.slice(1),d=i.replace("Agent:",""),m=f=>Lf[f]||Lf.default;return n.jsxs("div",{className:"rounded-md border border-border/50 bg-secondary/20 overflow-hidden",children:[n.jsxs("div",{className:"p-2 space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(oe,{variant:"outline",className:J("text-[10px] px-1.5 py-0.5",m(i)),children:d}),o&&n.jsx("button",{onClick:s,className:J("flex items-center gap-1 text-[10px] px-2 py-0.5 rounded transition-colors","text-muted-foreground hover:text-foreground hover:bg-secondary/50",t&&"bg-secondary/50 text-foreground"),children:t?n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-3 w-3"}),n.jsx("span",{children:r("common:prReview.logs.hideMore",{count:u.length})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xt,{className:"h-3 w-3"}),n.jsx("span",{children:r("common:prReview.logs.showMore",{count:u.length})})]})})]}),l&&n.jsx(EC,{entry:{...l,source:void 0}})]}),o&&t&&n.jsx("div",{className:"border-t border-border/30 bg-secondary/10 p-2 space-y-1",children:u.map((f,x)=>n.jsx(EC,{entry:{...f,source:void 0}},`${f.timestamp}-${x}`))})]})}function EC({entry:e}){const[t,s]=p.useState(!1),r=!!e.detail,i=o=>{try{return new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}},a=o=>o&&Lf[o]||Lf.default;return e.type==="error"?n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-start gap-2 text-xs text-destructive bg-destructive/10 rounded-md px-2 py-1",children:[n.jsx(yn,{className:"h-3 w-3 mt-0.5 shrink-0"}),n.jsx("span",{className:"break-words flex-1",children:e.content}),r&&n.jsx("button",{onClick:()=>s(!t),className:J("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded shrink-0","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?n.jsx(bt,{className:"h-2.5 w-2.5"}):n.jsx(Xt,{className:"h-2.5 w-2.5"})})]}),r&&t&&n.jsx("div",{className:"mt-1.5 ml-4 p-2 bg-destructive/5 rounded-md border border-destructive/20 overflow-x-auto",children:n.jsx("pre",{className:"text-[10px] text-destructive/80 whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]}):e.type==="success"?n.jsxs("div",{className:"flex items-start gap-2 text-xs text-success bg-success/10 rounded-md px-2 py-1",children:[n.jsx(Xe,{className:"h-3 w-3 mt-0.5 shrink-0"}),n.jsx("span",{className:"break-words flex-1",children:e.content})]}):e.type==="info"?n.jsxs("div",{className:"flex items-start gap-2 text-xs text-info bg-info/10 rounded-md px-2 py-1",children:[n.jsx(_r,{className:"h-3 w-3 mt-0.5 shrink-0"}),n.jsx("span",{className:"break-words flex-1",children:e.content})]}):n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground py-0.5",children:[n.jsx("span",{className:"text-[10px] text-muted-foreground/60 tabular-nums shrink-0",children:i(e.timestamp)}),e.source&&n.jsx(oe,{variant:"outline",className:J("text-[9px] px-1 py-0 shrink-0",a(e.source)),children:e.source}),n.jsx("span",{className:"break-words whitespace-pre-wrap flex-1",children:e.content}),r&&n.jsx("button",{onClick:()=>s(!t),className:J("flex items-center gap-1 text-[10px] px-1.5 py-0.5 rounded shrink-0","text-muted-foreground hover:text-foreground hover:bg-secondary/50 transition-colors",t&&"bg-secondary/50"),children:t?n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"h-2.5 w-2.5"}),n.jsx("span",{children:"Less"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xt,{className:"h-2.5 w-2.5"}),n.jsx("span",{children:"More"})]})})]}),r&&t&&n.jsx("div",{className:"mt-1.5 ml-12 p-2 bg-secondary/30 rounded-md border border-border/50 overflow-x-auto",children:n.jsx("pre",{className:"text-[10px] text-muted-foreground whitespace-pre-wrap break-words font-mono max-h-[300px] overflow-y-auto",children:e.detail})})]})}function BMe(e){switch(e){case"approve":return"bg-success/20 text-success border-success/50";case"request_changes":return"bg-destructive/20 text-destructive border-destructive/50";default:return"bg-muted"}}function zMe({pr:e,projectId:t,reviewResult:s,previousReviewResult:r,reviewProgress:i,startedAt:a,isReviewing:o,initialNewCommitsCheck:l,isActive:u=!1,isLoadingFiles:d=!1,onRunReview:m,onRunFollowupReview:f,onCheckNewCommits:x,onCancelReview:v,onPostReview:y,onPostComment:w,onMergePR:S,onAssignPR:C,onGetLogs:_}){const{t:j}=Re("common"),[T,E]=p.useState(new Set),[A,R]=p.useState(new Set),[D,M]=p.useState(!1),[P,O]=p.useState(null),[F,$]=p.useState(!1),[z,H]=p.useState(!1),[I,V]=p.useState(!1),[B,K]=p.useState(null),[L,G]=p.useState(!1),[Y,q]=p.useState(!1),[Q,se]=p.useState(!1),[te,ee]=p.useState(null),[pe,fe]=p.useState(!1),[re,Z]=p.useState(l??null),[ie,ce]=p.useState(!0),He=p.useRef(null),tt=p.useRef(!1),[he,Ne]=p.useState(!1),[Ve,qe]=p.useState(null),[Ze,Ae]=p.useState(!1),De=p.useRef(!1),[je,Ce]=p.useState(null),It=p.useRef(null),[be,ve]=p.useState(null),[Me,nt]=p.useState(null),[jt,ps]=p.useState(!0),tn=p.useId();p.useEffect(()=>{Z(l??null)},[l]),p.useEffect(()=>{s?.postedFindingIds?R(new Set(s.postedFindingIds)):R(new Set)},[s?.postedFindingIds,e.number]),p.useEffect(()=>{if(s?.success&&s.findings.length>0){const Ge=s.findings.filter(Ie=>!A.has(Ie.id)).map(Ie=>Ie.id);E(new Set(Ge))}},[s,A]);const Lt=A.size>0||s?.hasPostedFindings,ds=p.useCallback(async()=>{if(!tt.current&&(He.current&&He.current.abort(),He.current=new AbortController,s?.success&&s.reviewedCommitSha)){tt.current=!0;try{const Ge=await x();He.current?.signal.aborted||Z(Ge)}finally{He.current?.signal.aborted||(tt.current=!1)}}},[s,x]);p.useEffect(()=>(ds(),()=>{He.current&&He.current.abort()}),[ds]),p.useEffect(()=>{if(P){const Ge=setTimeout(()=>O(null),3e3);return()=>clearTimeout(Ge)}},[P]),p.useEffect(()=>{o&&Ne(!0)},[o]),p.useEffect(()=>{he&&!De.current&&!Ze&&(De.current=!0,Ae(!0),_().then(Ge=>qe(Ge)).catch(()=>qe(null)).finally(()=>Ae(!1)))},[he,_,Ze]);const gs=p.useRef(!1);p.useEffect(()=>{const Ge=gs.current;if(gs.current=o,Ge&&!o){_().then(ut=>qe(ut)).catch(ut=>console.error("Failed to fetch final logs:",ut));return}if(!Ge&&o&&qe(null),!o)return;const Ie=async()=>{try{const ut=await _();qe(ut)}catch{}};Ie();const Je=setInterval(Ie,1500);return()=>clearInterval(Je)},[o,_]),p.useEffect(()=>{De.current=!1,qe(null),Ne(!1),V(!1),K(null),H(!1),G(!1),se(!1),ee(null),q(!1)},[e.number]),p.useEffect(()=>{(async()=>{try{const Ie=await window.electronAPI.github.getWorkflowsAwaitingApproval("",e.number);ve(Ie)}catch{ve(null)}})()},[e.number,s]),p.useEffect(()=>(It.current&&It.current.abort(),It.current=new AbortController,(async()=>{if(!t){Ce(null);return}try{const Ie=await window.electronAPI.github.checkMergeReadiness(t,e.number);It.current?.signal.aborted||Ce(Ie)}catch{It.current?.signal.aborted||Ce(null)}})(),()=>{It.current&&It.current.abort()}),[e.number,t]);const Ft=p.useCallback(async Ge=>{nt(Ge);try{if(await window.electronAPI.github.approveWorkflow("",Ge)){const Je=await window.electronAPI.github.getWorkflowsAwaitingApproval("",e.number);ve(Je)}}finally{nt(null)}},[e.number]),Be=p.useCallback(async()=>{if(!be?.workflow_runs.length)return;for(const Ie of be.workflow_runs){nt(Ie.id);try{await window.electronAPI.github.approveWorkflow("",Ie.id)}catch{}}nt(null);const Ge=await window.electronAPI.github.getWorkflowsAwaitingApproval("",e.number);ve(Ge)},[e.number,be]),st=T.size,us=p.useMemo(()=>!s||!s.success?!1:s.summary?.includes("READY TO MERGE")||s.overallStatus==="approve",[s]),ue=p.useMemo(()=>!s||!s.success?!1:!s.findings.some(Ge=>Ge.severity==="critical"||Ge.severity==="high"||Ge.severity==="medium"),[s]),xs=p.useMemo(()=>s?.findings&&s.findings.length>0,[s]),kt=p.useMemo(()=>s?.findings?s.findings.filter(Ge=>Ge.severity==="low"):[],[s]),me=p.useMemo(()=>{if(o)return{status:"reviewing",label:j("prReview.aiReviewInProgress"),description:i?.message||j("prReview.analysisInProgress"),icon:n.jsx(sd,{className:"h-5 w-5 animate-pulse"}),color:"bg-blue-500/10 text-blue-500 border-blue-500/30"};if(!s||!s.success)return{status:"not_reviewed",label:j("prReview.notReviewed"),description:j("prReview.runAIReviewDesc"),icon:n.jsx(sd,{className:"h-5 w-5"}),color:"bg-muted text-muted-foreground border-muted"};const Ge=new Set([...A,...s.postedFindingIds??[]]),Ie=Ge.size,Je=Ie>0||s.hasPostedFindings,ut=s.findings.some(_s=>_s.severity==="critical"||_s.severity==="high"),gt=s.findings.filter(_s=>!Ge.has(_s.id)),Cr=gt.some(_s=>_s.severity==="critical"||_s.severity==="high"),Vn=re?.hasNewCommits??!1,ri=re?.newCommitCount??0,Br=re?.hasCommitsAfterPosting??!1;if(s.isFollowupReview){const _s=s.resolvedFindings?.length??0,qn=s.unresolvedFindings?.length??0,Ao=s.newFindingsSinceLastReview?.length??0,Xh=s.findings.some(Pd=>Pd.severity==="critical"||Pd.severity==="high");if(Vn&&Br)return{status:"ready_for_followup",label:j("prReview.readyForFollowup"),description:j("prReview.newCommitsSinceFollowup",{count:ri}),icon:n.jsx(We,{className:"h-5 w-5"}),color:"bg-info/20 text-info border-info/50"};if(qn===0&&Ao===0)return{status:"ready_to_merge",label:j("prReview.readyToMerge"),description:j("prReview.allIssuesResolved",{count:_s}),icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"};if(!Xh){const Pd=qn+Ao;return{status:"ready_to_merge",label:j("prReview.readyToMerge"),description:j("prReview.nonBlockingSuggestions",{resolved:_s,suggestions:Pd}),icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"}}return{status:"followup_issues_remain",label:j("prReview.blockingIssues"),description:j("prReview.blockingIssuesDesc",{resolved:_s,unresolved:qn}),icon:n.jsx(Tt,{className:"h-5 w-5"}),color:"bg-warning/20 text-warning border-warning/50"}}return Je&&Vn&&Br?{status:"ready_for_followup",label:j("prReview.readyForFollowup"),description:j("prReview.newCommitsSinceReview",{count:ri}),icon:n.jsx(We,{className:"h-5 w-5"}),color:"bg-info/20 text-info border-info/50"}:us&&Je?{status:"ready_to_merge",label:j("prReview.readyToMerge"),description:j("prReview.noBlockingIssues"),icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"}:Je&&ut?{status:"waiting_for_changes",label:j("prReview.waitingForChanges"),description:j("prReview.findingsPostedWaiting",{count:Ie}),icon:n.jsx(Tt,{className:"h-5 w-5"}),color:"bg-warning/20 text-warning border-warning/50"}:Je&&!ut?{status:"ready_to_merge",label:j("prReview.readyToMerge"),description:j("prReview.findingsPostedNoBlockers",{count:Ie}),icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"}:Cr?{status:"needs_attention",label:j("prReview.needsAttention"),description:j("prReview.findingsNeedPosting",{count:gt.length}),icon:n.jsx(Ke,{className:"h-5 w-5"}),color:"bg-destructive/20 text-destructive border-destructive/50"}:{status:"reviewed_pending_post",label:j("prReview.reviewComplete"),description:j("prReview.findingsFoundSelectPost",{count:s.findings.length}),icon:n.jsx(nh,{className:"h-5 w-5"}),color:"bg-primary/20 text-primary border-primary/50"}},[o,i,s,A,us,re,j]),ze=async()=>{const Ge=Array.from(T);if(Ge.length===0)return;const Ie=e.number;M(!0);try{await y(Ge)&&e.number===Ie&&(R(ut=>new Set([...ut,...Ge])),E(new Set),O({count:Ge.length,timestamp:Date.now()}),setTimeout(()=>ds(),500))}finally{e.number===Ie&&M(!1)}},ct=async()=>{if(!s)return;const Ge=e.number;$(!0);try{const Ie=`##  Auto Claude PR Review - APPROVED

${s.summary}

---
*This approval was generated by Auto Claude.*`;await Promise.resolve(w(Ie))}finally{e.number===Ge&&$(!1)}},Rt=async()=>{if(!s)return;const Ge=e.number;$(!0);try{const Ie=kt.map(ut=>ut.id);await y(Ie,{forceApprove:!0})&&Ie.length>0&&e.number===Ge&&R(ut=>new Set([...ut,...Ie]))}finally{e.number===Ge&&$(!1)}},Jt=async()=>{if(!s)return;const Ge=e.number;H(!0),K(null),G(!1);try{const Ie=`${j("prReview.cleanReviewMessageTitle")}

${j("prReview.cleanReviewMessageStatus")}

${s.summary}

---

${j("prReview.cleanReviewMessageFooter")}`;await Promise.resolve(w(Ie)),e.number===Ge&&(V(!0),K(null))}catch(Ie){console.error("Failed to post clean review comment:",Ie);const Je=Ie instanceof Error?Ie.message:String(Ie);e.number===Ge&&K(Je)}finally{e.number===Ge&&H(!1)}},vs=async()=>{if(!s)return;const Ge=e.number;q(!0),ee(null);try{const Ie=`${j("prReview.blockedStatusMessageTitle")}

${s.summary}

---

${j("prReview.blockedStatusMessageFooter")}`;await Promise.resolve(w(Ie)),e.number===Ge&&(se(!0),ee(null))}catch(Ie){console.error("Failed to post blocked status comment:",Ie);const Je=Ie instanceof Error?Ie.message:String(Ie);e.number===Ge&&ee(Je)}finally{e.number===Ge&&q(!1)}},Hs=async()=>{fe(!0);try{await S("squash")}finally{fe(!1)}};return n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-6 max-w-5xl mx-auto space-y-6",children:[n.jsx(gMe,{pr:e,isLoadingFiles:d}),je&&je.blockers.length>0&&s?.success&&(me.status==="ready_to_merge"||me.status==="reviewed_pending_post")&&n.jsx(Le,{className:"border-warning/50 bg-warning/10 animate-in fade-in slide-in-from-top-2 duration-300",children:n.jsx(Ye,{className:"py-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-warning shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("p",{className:"font-semibold text-warning",children:j("prReview.verdictOutdated","AI verdict may be outdated")}),n.jsx("ul",{className:"text-sm text-warning/90 space-y-1",children:je.blockers.map((Ge,Ie)=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-warning/70"}),Ge]},Ie))}),n.jsx("p",{className:"text-xs text-warning/70 mt-2",children:j("prReview.rerunReviewSuggestion","Consider re-running the review after resolving these issues.")})]})]})})}),n.jsx(fMe,{status:me.status,isReviewing:o,startedAt:a,reviewResult:s,previousReviewResult:r,postedCount:new Set([...A,...s?.postedFindingIds??[]]).size,onRunReview:m,onRunFollowupReview:f,onCancelReview:v,newCommitsCheck:re,lastPostedAt:P?.timestamp||(s?.postedAt?new Date(s.postedAt).getTime():null)}),s&&s.success&&!o&&n.jsxs("div",{className:"flex flex-wrap items-center gap-3 animate-in fade-in slide-in-from-top-2 duration-300",children:[st>0&&n.jsx(W,{onClick:ze,variant:"secondary",disabled:D,className:"flex-1 sm:flex-none",children:D?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),j("prReview.posting")]}):n.jsxs(n.Fragment,{children:[n.jsx(Np,{className:"h-4 w-4 mr-2"}),j("prReview.postFindings",{count:st})]})}),st===0&&ue&&!Lt&&!I&&s?.overallStatus!=="request_changes"&&n.jsx(W,{onClick:Jt,disabled:z||F,variant:"secondary",className:"flex-1 sm:flex-none",children:z?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),j("prReview.postingCleanReview")]}):n.jsxs(n.Fragment,{children:[n.jsx(nh,{className:"h-4 w-4 mr-2"}),j("prReview.postCleanReview")]})}),st===0&&!Lt&&!Q&&s?.overallStatus==="request_changes"&&n.jsx(W,{onClick:vs,disabled:Y||F,variant:"secondary",className:"flex-1 sm:flex-none",children:Y?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),j("prReview.postingBlockedStatus")]}):n.jsxs(n.Fragment,{children:[n.jsx(Tt,{className:"h-4 w-4 mr-2"}),j("prReview.postBlockedStatus")]})}),ue&&!Lt&&s?.overallStatus!=="request_changes"&&n.jsx(W,{onClick:Rt,disabled:F||z,variant:"default",className:"flex-1 sm:flex-none bg-emerald-600 hover:bg-emerald-700 text-white",children:F?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),j("prReview.postingApproval")]}):n.jsxs(n.Fragment,{children:[n.jsx(Ja,{className:"h-4 w-4 mr-2"}),j("prReview.autoApprovePR"),xs&&kt.length>0&&n.jsx("span",{className:"ml-1 text-xs opacity-80",children:j("prReview.suggestions",{count:kt.length})})]})}),us&&!ue&&!Lt&&n.jsxs(W,{onClick:ct,disabled:F,variant:"default",className:"flex-1 sm:flex-none bg-emerald-600 hover:bg-emerald-700 text-white",children:[F?n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Ys,{className:"h-4 w-4 mr-2"}),j("prReview.approve")]}),Lt&&n.jsx(W,{onClick:Hs,disabled:pe,variant:"outline",className:"flex-1 sm:flex-none gap-1.5 text-muted-foreground hover:text-foreground",title:j("prReview.mergeViaGitHub"),children:pe?n.jsx(we,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(ua,{className:"h-4 w-4"}),n.jsx("span",{children:j("prReview.merge")}),n.jsx(Zt,{className:"h-3 w-3 opacity-50"})]})}),P&&n.jsxs("div",{className:"ml-auto flex items-center gap-2 text-emerald-600 text-sm font-medium animate-pulse",children:[n.jsx(Ys,{className:"h-4 w-4"}),j("prReview.postedFindings",{count:P.count})]}),I&&!P&&n.jsxs("div",{className:"ml-auto flex items-center gap-2 text-emerald-600 text-sm font-medium animate-pulse",children:[n.jsx(Ys,{className:"h-4 w-4"}),j("prReview.cleanReviewPosted")]}),B&&n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-destructive text-sm font-medium",children:[n.jsx(yn,{className:"h-4 w-4"}),j("prReview.failedPostCleanReview")]}),n.jsx("button",{onClick:()=>G(!L),"aria-expanded":L,"aria-controls":tn,className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors",children:L?n.jsxs(n.Fragment,{children:[j("prReview.hideErrorDetails"),n.jsx(Hi,{className:"h-3 w-3"})]}):n.jsxs(n.Fragment,{children:[j("prReview.viewErrorDetails"),n.jsx(bt,{className:"h-3 w-3"})]})})]}),B&&L&&n.jsx("div",{id:tn,className:"ml-auto text-xs text-muted-foreground max-w-md truncate",title:B,children:B}),Q&&!P&&!I&&n.jsxs("div",{className:"ml-auto flex items-center gap-2 text-amber-600 text-sm font-medium animate-pulse",children:[n.jsx(Ys,{className:"h-4 w-4"}),j("prReview.blockedStatusPosted")]}),te&&n.jsxs("div",{className:"ml-auto flex items-center gap-2 text-destructive text-sm font-medium",children:[n.jsx(yn,{className:"h-4 w-4"}),j("prReview.failedPostBlockedStatus")]})]}),i&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium",children:i.message}),n.jsxs("span",{className:"text-muted-foreground",children:[i.progress,"%"]})]}),n.jsx(xi,{value:i.progress,className:"h-2"})]}),s&&s.success&&n.jsx(Rv,{title:s.isFollowupReview?j("prReview.followupReviewDetails"):j("prReview.aiAnalysisResults"),icon:s.isFollowupReview?n.jsx(We,{className:"h-4 w-4 text-blue-500"}):n.jsx(sd,{className:"h-4 w-4 text-purple-500"}),badge:n.jsxs(oe,{variant:"outline",className:BMe(s.overallStatus),children:[s.overallStatus==="approve"&&j("prReview.approve"),s.overallStatus==="request_changes"&&j("prReview.changesRequested"),s.overallStatus==="comment"&&j("prReview.commented")]}),open:ie,onOpenChange:ce,children:n.jsxs("div",{className:"p-4 space-y-6",children:[s.isFollowupReview&&n.jsxs("div",{className:"flex flex-wrap items-center gap-3 pb-4 border-b border-border/50",children:[(s.resolvedFindings?.length??0)>0&&n.jsxs(oe,{variant:"outline",className:"bg-success/10 text-success border-success/30 px-3 py-1",children:[n.jsx(Ys,{className:"h-3.5 w-3.5 mr-1.5"}),j("prReview.resolved",{count:s.resolvedFindings?.length??0})]}),(s.unresolvedFindings?.length??0)>0&&n.jsxs(oe,{variant:"outline",className:"bg-warning/10 text-warning border-warning/30 px-3 py-1",children:[n.jsx(Ke,{className:"h-3.5 w-3.5 mr-1.5"}),j("prReview.stillOpen",{count:s.unresolvedFindings?.length??0})]}),(s.newFindingsSinceLastReview?.length??0)>0&&n.jsxs(oe,{variant:"outline",className:"bg-destructive/10 text-destructive border-destructive/30 px-3 py-1",children:[n.jsx(yn,{className:"h-3.5 w-3.5 mr-1.5"}),j("prReview.newIssue",{count:s.newFindingsSinceLastReview?.length??0})]}),n.jsx(W,{variant:"ghost",size:"sm",className:"h-7 px-2 ml-auto text-muted-foreground hover:text-foreground",onClick:f,disabled:o,title:j("prReview.rerunFollowup"),children:o?n.jsx(we,{className:"h-3.5 w-3.5 animate-spin"}):n.jsx(We,{className:"h-3.5 w-3.5"})})]}),n.jsx("div",{className:"bg-muted/30 p-4 rounded-lg text-sm text-muted-foreground leading-relaxed",children:s.summary}),n.jsx(AMe,{findings:s.findings,selectedIds:T,postedIds:A,onSelectionChange:E})]})}),s&&!s.success&&s.error&&n.jsx(Le,{className:"border-destructive/50 bg-destructive/5",children:n.jsx(Ye,{className:"pt-6",children:n.jsxs("div",{className:"flex items-start gap-3 text-destructive",children:[n.jsx(yn,{className:"h-5 w-5 mt-0.5"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-semibold",children:j("prReview.reviewFailed")}),n.jsx("p",{className:"text-sm opacity-90",children:s.error})]})]})})}),be&&be.awaiting_approval>0&&n.jsx(Rv,{title:j("prReview.workflowsAwaitingApproval",{count:be.awaiting_approval}),icon:n.jsx(cr,{className:"h-4 w-4 text-warning"}),badge:n.jsxs(oe,{variant:"outline",className:"text-xs bg-warning/10 text-warning border-warning/30",children:[n.jsx(Tt,{className:"h-3 w-3 mr-1"}),j("prReview.blockedByWorkflows")]}),open:jt,onOpenChange:ps,children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:j("prReview.workflowsAwaitingDescription")}),n.jsx("div",{className:"space-y-2",children:be.workflow_runs.map(Ge=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50 border border-border/50",children:[n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx(cr,{className:"h-4 w-4 text-warning shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("span",{className:"text-sm font-medium truncate block",children:Ge.workflow_name}),n.jsx("span",{className:"text-xs text-muted-foreground",children:Ge.name})]})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[n.jsxs(W,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>window.open(Ge.html_url,"_blank"),children:[n.jsx(Zt,{className:"h-3 w-3 mr-1"}),j("prReview.viewOnGitHub")]}),n.jsx(W,{size:"sm",variant:"default",className:"h-7 text-xs",onClick:()=>Ft(Ge.id),disabled:Me!==null,children:Me===Ge.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Zr,{className:"h-3 w-3 mr-1"}),j("prReview.approveWorkflow")]})})]})]},Ge.id))}),be.workflow_runs.length>1&&n.jsx("div",{className:"flex justify-end pt-2 border-t border-border/50",children:n.jsxs(W,{size:"sm",variant:"default",onClick:Be,disabled:Me!==null,children:[Me!==null?n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(Zr,{className:"h-4 w-4 mr-2"}),j("prReview.approveAllWorkflows")]})})]})}),(s||o)&&n.jsx(Rv,{title:j("prReview.reviewLogs"),icon:n.jsx($n,{className:"h-4 w-4 text-muted-foreground"}),badge:o?n.jsxs(oe,{variant:"outline",className:"text-xs bg-blue-500/10 text-blue-500 border-blue-500/30",children:[n.jsx(we,{className:"h-3 w-3 mr-1 animate-spin"}),j("prReview.aiReviewInProgress")]}):Ve?n.jsx(oe,{variant:"outline",className:"text-xs",children:Ve.is_followup?j("prReview.followup"):j("prReview.initial")}):null,open:he,onOpenChange:Ne,children:n.jsx(IMe,{prNumber:e.number,logs:Ve,isLoading:Ze,isStreaming:o})}),n.jsx(Le,{children:n.jsxs(Ye,{className:"pt-6",children:[n.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:j("prReview.description")}),n.jsx(zt,{className:"h-[400px] w-full rounded-md border p-4 bg-muted/10",children:e.body?n.jsx("pre",{className:"whitespace-pre-wrap text-sm text-muted-foreground font-sans break-words",children:e.body}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:j("prReview.noDescription")})})]})})]})})}const u5=[{value:"reviewing",labelKey:"prReview.reviewing",icon:we,color:"text-amber-400",bgColor:"bg-amber-500/20"},{value:"not_reviewed",labelKey:"prReview.notReviewed",icon:Qt,color:"text-slate-500",bgColor:"bg-slate-500/20"},{value:"reviewed",labelKey:"prReview.reviewed",icon:Xe,color:"text-blue-400",bgColor:"bg-blue-500/20"},{value:"posted",labelKey:"prReview.posted",icon:Np,color:"text-purple-400",bgColor:"bg-purple-500/20"},{value:"changes_requested",labelKey:"prReview.changesRequested",icon:Ke,color:"text-red-400",bgColor:"bg-red-500/20"},{value:"ready_to_merge",labelKey:"prReview.readyToMerge",icon:Ja,color:"text-emerald-400",bgColor:"bg-emerald-500/20"},{value:"ready_for_followup",labelKey:"prReview.readyForFollowup",icon:We,color:"text-cyan-400",bgColor:"bg-cyan-500/20"}];function h5({title:e,icon:t,items:s,selected:r,onChange:i,renderItem:a,renderTrigger:o,searchable:l=!1,searchPlaceholder:u,selectedCountLabel:d,noResultsLabel:m,clearLabel:f}){const[x,v]=p.useState(""),[y,w]=p.useState(!1),[S,C]=p.useState(-1),_=p.useRef([]),j=p.useCallback(A=>{r.includes(A)?i(r.filter(R=>R!==A)):i([...r,A])},[r,i]),T=p.useMemo(()=>x?s.filter(A=>A.toLowerCase().includes(x.toLowerCase())):s,[s,x]),E=p.useCallback(A=>{if(T.length!==0)switch(A.key){case"ArrowDown":A.preventDefault(),C(R=>R<T.length-1?R+1:0);break;case"ArrowUp":A.preventDefault(),C(R=>R>0?R-1:T.length-1);break;case"Enter":case" ":A.preventDefault(),S>=0&&S<T.length&&j(T[S]);break;case"Escape":w(!1);break}},[T,S,j]);return n.jsxs(mo,{open:y,onOpenChange:A=>{w(A),A||(v(""),C(-1))},children:[n.jsx(fo,{asChild:!0,children:n.jsxs(W,{variant:"outline",size:"sm",className:J("h-8 w-full justify-start border-dashed bg-transparent",r.length>0&&"border-solid bg-accent/50"),children:[n.jsx(t,{className:"mr-2 h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"truncate",children:e}),r.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(Rn,{orientation:"vertical",className:"mx-2 h-4"}),n.jsx(oe,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:r.length}),n.jsx("div",{className:"hidden space-x-1 lg:flex flex-1 truncate",children:r.length>2?n.jsx(oe,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:d}):o?o(r):r.map(A=>n.jsx(oe,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:A},A))})]})]})}),n.jsxs(La,{align:"start",className:"w-[240px] p-0",children:[n.jsxs("div",{className:"px-3 py-2 border-b border-border/50",children:[n.jsx("div",{className:"text-xs font-semibold text-muted-foreground mb-1",children:e}),l&&n.jsxs("div",{className:"relative",children:[n.jsx(Nr,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3 w-3 text-muted-foreground"}),n.jsx(Oe,{placeholder:u,className:"h-7 text-xs pl-7 bg-muted/50 border-none focus-visible:ring-1 focus-visible:ring-primary/50",value:x,onChange:A=>v(A.target.value),onKeyDown:A=>A.stopPropagation()})]})]}),n.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar p-1",role:"listbox","aria-multiselectable":"true",onKeyDown:E,tabIndex:0,children:T.length===0?n.jsx("div",{className:"p-3 text-xs text-muted-foreground text-center",children:m}):T.map((A,R)=>{const D=r.includes(A),M=R===S;return n.jsxs("div",{ref:P=>{_.current[R]=P},role:"option","aria-selected":D,className:J("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",D&&"bg-accent/50",M&&"ring-2 ring-primary/50 bg-accent"),onClick:P=>{P.preventDefault(),j(A)},onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),j(A))},tabIndex:-1,children:[n.jsx("div",{className:J("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary/30",D?"bg-primary border-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:n.jsx(Pt,{className:J("h-3 w-3")})}),a?a(A):A]},A)})}),r.length>0&&n.jsx("div",{className:"p-1 border-t border-border/50 bg-muted/20",children:n.jsx(W,{variant:"ghost",size:"sm",className:"w-full justify-center text-xs h-7 hover:bg-destructive/10 hover:text-destructive",onClick:()=>i([]),children:f})})]})]})}function $Me({filters:e,contributors:t,hasActiveFilters:s,onSearchChange:r,onContributorsChange:i,onStatusesChange:a,onClearFilters:o}){const{t:l}=Re("common"),u=d=>u5.find(m=>m.value===d);return n.jsx("div",{className:"px-4 py-2 border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:n.jsxs("div",{className:"flex items-center gap-2 h-9",children:[n.jsxs("div",{className:"relative flex-1 max-w-md",children:[n.jsx(Nr,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(Oe,{placeholder:l("prReview.searchPlaceholder"),value:e.searchQuery,onChange:d=>r(d.target.value),className:"h-8 pl-9 bg-background/50 focus:bg-background transition-colors"}),e.searchQuery&&n.jsx("button",{onClick:()=>r(""),className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":l("prReview.clearSearch"),children:n.jsx(Ss,{className:"h-3 w-3"})})]}),n.jsx(Rn,{orientation:"vertical",className:"h-5 mx-1"}),n.jsx("div",{className:"flex-1 max-w-[240px]",children:n.jsx(h5,{title:l("prReview.contributors"),icon:Oa,items:t,selected:e.contributors,onChange:i,searchable:!0,searchPlaceholder:l("prReview.searchContributors"),selectedCountLabel:l("prReview.selectedCount",{count:e.contributors.length}),noResultsLabel:l("prReview.noResultsFound"),clearLabel:l("prReview.clearFilters"),renderItem:d=>n.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[n.jsx("div",{className:"h-5 w-5 rounded-full bg-primary/10 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"text-[10px] font-medium text-primary",children:d.slice(0,2).toUpperCase()})}),n.jsx("span",{className:"truncate text-sm",children:d})]})})}),n.jsx("div",{className:"flex-1 max-w-[240px]",children:n.jsx(h5,{title:l("prReview.allStatuses"),icon:Wb,items:u5.map(d=>d.value),selected:e.statuses,onChange:a,selectedCountLabel:l("prReview.selectedCount",{count:e.statuses.length}),noResultsLabel:l("prReview.noResultsFound"),clearLabel:l("prReview.clearFilters"),renderItem:d=>{const m=u(d);if(!m)return null;const f=m.icon;return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:J("p-1 rounded-full",m.bgColor),children:n.jsx(f,{className:J("h-3 w-3",m.color)})}),n.jsx("span",{className:"text-sm",children:l(m.labelKey)})]})},renderTrigger:d=>d.map(m=>{const f=u(m);if(!f)return null;const x=f.icon;return n.jsxs(oe,{variant:"secondary",className:J("rounded-sm px-1 font-normal gap-1",f.bgColor,f.color),children:[n.jsx(x,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate max-w-[80px]",children:l(f.labelKey)})]},m)})})}),s&&n.jsxs(W,{variant:"ghost",size:"sm",onClick:o,className:"h-8 px-2 lg:px-3 text-muted-foreground hover:text-foreground ml-auto",children:[n.jsx("span",{className:"hidden lg:inline mr-2",children:l("prReview.reset")}),n.jsx(Ss,{className:"h-4 w-4"})]})]})})}function HMe({leftPanel:e,rightPanel:t,defaultLeftWidth:s=50,minLeftWidth:r=30,maxLeftWidth:i=70,storageKey:a,className:o}){const[l,u]=p.useState(()=>{if(a)try{const y=localStorage.getItem(a);if(y){const w=parseFloat(y);if(!isNaN(w)&&w>=r&&w<=i)return w}}catch{}return s}),[d,m]=p.useState(!1),f=p.useRef(null);p.useEffect(()=>{if(a&&!d)try{localStorage.setItem(a,l.toString())}catch{}},[l,a,d]);const x=p.useCallback(y=>{y.preventDefault(),m(!0)},[]),v=p.useCallback(y=>{y.preventDefault(),m(!0)},[]);return p.useEffect(()=>{if(!d)return;const y=_=>{if(!f.current)return;const j=f.current.getBoundingClientRect();if(j.width<=0)return;const T=(_.clientX-j.left)/j.width*100,E=Math.max(r,Math.min(i,T));u(E)},w=()=>{m(!1)},S=_=>{if(!f.current||_.touches.length===0)return;const j=f.current.getBoundingClientRect();if(j.width<=0)return;const E=(_.touches[0].clientX-j.left)/j.width*100,A=Math.max(r,Math.min(i,E));u(A)},C=()=>{m(!1)};return document.body.style.userSelect="none",document.body.style.cursor="col-resize",document.addEventListener("mousemove",y),document.addEventListener("mouseup",w),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("touchend",C),()=>{document.body.style.userSelect="",document.body.style.cursor="",document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",C)}},[d,r,i]),n.jsxs("div",{ref:f,className:J("flex-1 flex min-h-0",o),children:[n.jsx("div",{className:"flex flex-col min-w-0 overflow-hidden",style:{width:`${l}%`},children:e}),n.jsx("div",{className:J("w-1 flex-shrink-0 relative cursor-col-resize touch-none","bg-border transition-colors duration-150","hover:bg-primary/40",d&&"bg-primary/60"),onMouseDown:x,onTouchStart:v,children:n.jsx("div",{className:"absolute inset-y-0 -left-1 -right-1 z-10"})}),n.jsx("div",{className:"flex flex-col min-w-0 overflow-hidden",style:{width:`${100-l}%`},children:t})]})}function UMe({error:e,onOpenSettings:t,t:s}){return n.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Js,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),n.jsx("h3",{className:"text-lg font-medium mb-2",children:s("prReview.notConnected")}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e||s("prReview.connectPrompt")}),t&&n.jsxs(W,{onClick:t,variant:"outline",children:[n.jsx(ey,{className:"h-4 w-4 mr-2"}),s("prReview.openSettings")]})]})})}function GMe({message:e}){return n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx(Js,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:e})]})})}function VMe({onOpenSettings:e,isActive:t=!1}){const{t:s}=Re("common"),r=Ot(he=>he.projects),i=Ot(he=>he.selectedProjectId),a=r.find(he=>he.id===i),{prs:o,isLoading:l,isLoadingMore:u,isLoadingPRDetails:d,error:m,selectedPRNumber:f,reviewResult:x,reviewProgress:v,startedAt:y,isReviewing:w,previousReviewResult:S,hasMore:C,selectPR:_,runReview:j,runFollowupReview:T,checkNewCommits:E,cancelReview:A,postReview:R,postComment:D,mergePR:M,assignPR:P,refresh:O,loadMore:F,isConnected:$,repoFullName:z,getReviewStateForPR:H,selectedPR:I}=uMe(a?.id,{isActive:t}),B=(f?H(f):null)?.newCommitsCheck??null,{filteredPRs:K,contributors:L,filters:G,setSearchQuery:Y,setContributors:q,setStatuses:Q,clearFilters:se,hasActiveFilters:te}=mMe(o,H),ee=p.useCallback(()=>{f&&j(f)},[f,j]),pe=p.useCallback(()=>{f&&T(f)},[f,T]),fe=p.useCallback(async()=>f?await E(f):{hasNewCommits:!1,newCommitCount:0},[f,E]),re=p.useCallback(()=>{f&&A(f)},[f,A]),Z=p.useCallback(async(he,Ne)=>f&&x?await R(f,he,Ne):!1,[f,x,R]),ie=p.useCallback(async he=>{f&&await D(f,he)},[f,D]),ce=p.useCallback(async he=>{f&&await M(f,he)},[f,M]),He=p.useCallback(async he=>{f&&await P(f,he)},[f,P]),tt=p.useCallback(async()=>i&&f?await window.electronAPI.github.getPRLogs(i,f):null,[i,f]);return $?n.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("h2",{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Js,{className:"h-4 w-4"}),s("prReview.pullRequests")]}),z&&n.jsxs("a",{href:`https://github.com/${z}/pulls`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-muted-foreground hover:text-foreground flex items-center gap-1",children:[z,n.jsx(Zt,{className:"h-3 w-3"})]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[o.length," ",s("prReview.open")]})]}),n.jsx(W,{variant:"ghost",size:"icon",onClick:O,disabled:l,children:n.jsx(We,{className:`h-4 w-4 ${l?"animate-spin":""}`})})]}),n.jsx(HMe,{defaultLeftWidth:50,minLeftWidth:30,maxLeftWidth:70,storageKey:"github-prs-panel-width",leftPanel:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx($Me,{filters:G,contributors:L,hasActiveFilters:te,onSearchChange:Y,onContributorsChange:q,onStatusesChange:Q,onClearFilters:se}),n.jsx(bMe,{prs:K,selectedPRNumber:f,isLoading:l,isLoadingMore:u,hasMore:C,error:m,getReviewStateForPR:H,onSelectPR:_,onLoadMore:F})]}),rightPanel:I?n.jsx(zMe,{pr:I,projectId:i||"",reviewResult:x,previousReviewResult:S,reviewProgress:v,startedAt:y,isReviewing:w,initialNewCommitsCheck:B,isActive:t,isLoadingFiles:d,onRunReview:ee,onRunFollowupReview:pe,onCheckNewCommits:fe,onCancelReview:re,onPostReview:Z,onPostComment:ie,onMergePR:ce,onAssignPR:He,onGetLogs:tt}):n.jsx(GMe,{message:s("prReview.selectPRToView")})})]}):n.jsx(UMe,{error:m,onOpenSettings:e,t:s})}function qMe({mr:e,isSelected:t,onClick:s}){const r={opened:"text-success",closed:"text-destructive",merged:"text-info",locked:"text-warning"},a={opened:Js,closed:Js,merged:ua,locked:ll}[e.state]||Js,o=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"});return n.jsx("button",{type:"button",onClick:s,className:J("w-full text-left p-3 rounded-lg border transition-colors",t?"border-primary bg-primary/5":"border-transparent hover:bg-muted/50"),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(a,{className:J("h-5 w-5 mt-0.5 shrink-0",r[e.state])}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs text-muted-foreground",children:["!",e.iid]}),n.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:e.title})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[n.jsx("span",{children:e.sourceBranch}),n.jsx("span",{children:""}),n.jsx("span",{children:e.targetBranch})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.labels.slice(0,3).map(l=>n.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:l},l)),e.labels.length>3&&n.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",e.labels.length-3]})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["by ",e.author.username]}),n.jsx("span",{children:""}),n.jsx("span",{children:o(e.createdAt)})]})]}),n.jsx("a",{href:e.webUrl,target:"_blank",rel:"noopener noreferrer",onClick:l=>l.stopPropagation(),className:"text-muted-foreground hover:text-foreground",children:n.jsx(Zt,{className:"h-4 w-4"})})]})})}function WMe({mergeRequests:e,isLoading:t,selectedMrIid:s,onSelectMr:r,onRefresh:i,stateFilter:a,onStateFilterChange:o}){const[l,u]=p.useState(""),d=e.filter(m=>m.title.toLowerCase().includes(l.toLowerCase())||m.sourceBranch.toLowerCase().includes(l.toLowerCase())||m.targetBranch.toLowerCase().includes(l.toLowerCase())||String(m.iid).includes(l));return n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"p-4 border-b border-border space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[n.jsx(Js,{className:"h-4 w-4"}),"Merge Requests"]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:i,disabled:t,className:"h-7 px-2",children:n.jsx(We,{className:`h-3 w-3 ${t?"animate-spin":""}`})})]}),n.jsx(Oe,{placeholder:"Search merge requests...",value:l,onChange:m=>u(m.target.value),className:"h-8 text-sm"}),n.jsx("div",{className:"flex gap-1",children:["opened","merged","closed","all"].map(m=>n.jsx(W,{variant:a===m?"default":"ghost",size:"sm",onClick:()=>o(m),className:"h-7 text-xs capitalize",children:m},m))})]}),n.jsx(zt,{className:"flex-1",children:t&&e.length===0?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):d.length===0?n.jsx("div",{className:"py-8 text-center text-sm text-muted-foreground",children:l?"No matching merge requests":"No merge requests found"}):n.jsx("div",{className:"p-2 space-y-1",children:d.map(m=>n.jsx(qMe,{mr:m,isSelected:m.iid===s,onClick:()=>r(m)},m.id))})})]})}class KMe extends Vt.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("ErrorBoundary caught an error:",t,s),Zse(t,{componentStack:s.componentStack})}handleReset=()=>{this.setState({hasError:!1,error:null}),this.props.onReset?.()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx(Le,{className:"border-destructive m-4",children:n.jsx(Ye,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(Tt,{className:"h-10 w-10 text-destructive"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Something went wrong"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"An error occurred while rendering this content."}),this.state.error&&n.jsx("p",{className:"text-xs text-muted-foreground font-mono bg-muted p-2 rounded max-w-md overflow-auto",children:this.state.error.message})]}),n.jsxs(W,{onClick:this.handleReset,variant:"outline",size:"sm",children:[n.jsx(We,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})}):this.props.children}}function YMe({findings:e,selectedIds:t,onSelectionChange:s,groupedFindings:r}){const i=p.useCallback(f=>{const x=new Set(t);x.has(f)?x.delete(f):x.add(f),s(x)},[t,s]),a=p.useCallback(()=>{s(new Set(e.map(f=>f.id)))},[e,s]),o=p.useCallback(()=>{s(new Set)},[s]),l=p.useCallback(()=>{const f=[...r.critical,...r.high];s(new Set(f.map(x=>x.id)))},[r,s]),u=p.useCallback(f=>{const x=r[f],v=x.every(w=>t.has(w.id)),y=new Set(t);if(v)for(const w of x)y.delete(w.id);else for(const w of x)y.add(w.id);s(y)},[r,t,s]),d=p.useCallback(f=>{const x=r[f];return x.length>0&&x.every(v=>t.has(v.id))},[r,t]),m=p.useCallback(f=>{const x=r[f],v=x.filter(y=>t.has(y.id)).length;return v>0&&v<x.length},[r,t]);return{toggleFinding:i,selectAll:a,selectNone:o,selectImportant:l,toggleSeverityGroup:u,isGroupFullySelected:d,isGroupPartiallySelected:m}}function XMe({findings:e,selectedCount:t}){const s={critical:e.filter(r=>r.severity==="critical").length,high:e.filter(r=>r.severity==="high").length,medium:e.filter(r=>r.severity==="medium").length,low:e.filter(r=>r.severity==="low").length,total:e.length};return n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 rounded-lg bg-muted/50",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.critical>0&&n.jsxs(oe,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/30",children:[s.critical," Critical"]}),s.high>0&&n.jsxs(oe,{variant:"outline",className:"bg-orange-500/10 text-orange-500 border-orange-500/30",children:[s.high," High"]}),s.medium>0&&n.jsxs(oe,{variant:"outline",className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/30",children:[s.medium," Medium"]}),s.low>0&&n.jsxs(oe,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/30",children:[s.low," Low"]})]}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[t,"/",s.total," selected"]})]})}const ZMe=["critical","high","medium","low"],vV={critical:{labelKey:"mrReview.severity.critical",color:"text-red-500",bgColor:"bg-red-500/10 border-red-500/30",icon:yn,descriptionKey:"mrReview.severity.criticalDesc"},high:{labelKey:"mrReview.severity.high",color:"text-orange-500",bgColor:"bg-orange-500/10 border-orange-500/30",icon:Tt,descriptionKey:"mrReview.severity.highDesc"},medium:{labelKey:"mrReview.severity.medium",color:"text-yellow-500",bgColor:"bg-yellow-500/10 border-yellow-500/30",icon:Ke,descriptionKey:"mrReview.severity.mediumDesc"},low:{labelKey:"mrReview.severity.low",color:"text-blue-500",bgColor:"bg-blue-500/10 border-blue-500/30",icon:Ys,descriptionKey:"mrReview.severity.lowDesc"}},QMe={security:xa,quality:lr,docs:$n,test:aO,performance:vi,style:lr,pattern:lr,logic:Ke};function JMe(e){return QMe[e]||lr}function e4e({severity:e,count:t,selectedCount:s,expanded:r,onToggle:i,onSelectAll:a}){const{t:o}=Re(["gitlab","common"]),l=vV[e],u=l.icon,d=s===t&&t>0,m=s>0&&s<t;return n.jsxs("button",{type:"button",onClick:i,className:"w-full flex items-center justify-between p-3 hover:bg-black/5 dark:hover:bg-white/5 rounded-t-lg transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{onClick:a,className:"cursor-pointer",children:d?n.jsx(_d,{className:J("h-4 w-4",l.color)}):m?n.jsx(rO,{className:J("h-4 w-4",l.color)}):n.jsx(jo,{className:"h-4 w-4 text-muted-foreground"})}),n.jsx(u,{className:J("h-4 w-4",l.color)}),n.jsx("span",{className:J("font-medium text-sm",l.color),children:o(l.labelKey)}),n.jsx(oe,{variant:"secondary",className:"text-xs",children:t}),n.jsx("span",{className:"text-xs text-muted-foreground hidden sm:inline",children:o(l.descriptionKey)})]}),r?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"})]})}function t4e({finding:e,selected:t,posted:s=!1,onToggle:r}){const i=JMe(e.category);return n.jsxs("div",{className:J("rounded-lg border bg-background p-3 space-y-2 transition-colors",t&&!s&&"ring-2 ring-primary/50",s&&"opacity-60"),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[s?n.jsx(Ys,{className:"h-4 w-4 mt-0.5 text-success shrink-0"}):n.jsx(Ui,{id:e.id,checked:t,onCheckedChange:r,className:"mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs(oe,{variant:"outline",className:"text-xs shrink-0",children:[n.jsx(i,{className:"h-3 w-3 mr-1"}),e.category]}),s&&n.jsx(oe,{variant:"outline",className:"text-xs shrink-0 text-success border-success/50",children:"Posted"}),n.jsx("span",{className:"font-medium text-sm break-words",children:e.title})]}),n.jsx("p",{className:"text-sm text-muted-foreground break-words",children:e.description}),n.jsx("div",{className:"text-xs text-muted-foreground",children:n.jsxs("code",{className:"bg-muted px-1 py-0.5 rounded break-all",children:[e.file,":",e.line,e.endLine&&e.endLine!==e.line&&`-${e.endLine}`]})})]})]}),e.suggestedFix&&n.jsxs("div",{className:"ml-7 text-xs",children:[n.jsx("span",{className:"text-muted-foreground font-medium",children:"Suggested fix:"}),n.jsx("pre",{className:"mt-1 p-2 bg-muted rounded text-xs overflow-x-auto max-w-full whitespace-pre-wrap break-words",children:e.suggestedFix})]})]})}function s4e({findings:e,selectedIds:t,postedIds:s=new Set,onSelectionChange:r}){const[i,a]=p.useState(new Set(["critical","high"])),o=p.useMemo(()=>{const y={critical:[],high:[],medium:[],low:[]};for(const w of e){const S=w.severity;y[S]&&y[S].push(w)}return y},[e]),l=p.useMemo(()=>({critical:o.critical.length,high:o.high.length,medium:o.medium.length,low:o.low.length,total:e.length,important:o.critical.length+o.high.length}),[o,e.length]),{toggleFinding:u,selectAll:d,selectNone:m,selectImportant:f,toggleSeverityGroup:x}=YMe({findings:e,selectedIds:t,onSelectionChange:r,groupedFindings:o}),v=y=>{a(w=>{const S=new Set(w);return S.has(y)?S.delete(y):S.add(y),S})};return n.jsxs("div",{className:"space-y-4",children:[n.jsx(XMe,{findings:e,selectedCount:t.size}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs(W,{variant:"outline",size:"sm",onClick:f,className:"text-xs",disabled:l.important===0,children:[n.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Select Critical/High (",l.important,")"]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:[n.jsx(_d,{className:"h-3 w-3 mr-1"}),"Select All"]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:m,className:"text-xs",disabled:t.size===0,children:[n.jsx(jo,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),n.jsx("div",{className:"space-y-3",children:ZMe.map(y=>{const w=o[y];if(w.length===0)return null;const S=vV[y],C=i.has(y),_=w.filter(j=>t.has(j.id)).length;return n.jsxs("div",{className:J("rounded-lg border",S.bgColor),children:[n.jsx(e4e,{severity:y,count:w.length,selectedCount:_,expanded:C,onToggle:()=>v(y),onSelectAll:j=>{j.stopPropagation(),x(y)}}),C&&n.jsx("div",{className:"p-3 pt-0 space-y-2",children:w.map(j=>n.jsx(t4e,{finding:j,selected:t.has(j.id),posted:s.has(j.id),onToggle:()=>u(j.id)},j.id))})]},y)})}),e.length===0&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(Ys,{className:"h-8 w-8 mx-auto mb-2 text-success"}),n.jsx("p",{className:"text-sm",children:"No issues found! The code looks good."})]})]})}function m5(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}function n4e(e){switch(e){case"approve":return"bg-success/20 text-success border-success/50";case"request_changes":return"bg-destructive/20 text-destructive border-destructive/50";default:return"bg-muted"}}function r4e(e){switch(e){case"opened":return"bg-success/20 text-success border-success/50";case"merged":return"bg-purple-500/20 text-purple-500 border-purple-500/50";case"closed":return"bg-destructive/20 text-destructive border-destructive/50";default:return"bg-muted"}}function i4e({mr:e,reviewResult:t,reviewProgress:s,isReviewing:r,onRunReview:i,onRunFollowupReview:a,onCheckNewCommits:o,onCancelReview:l,onPostReview:u,onPostNote:d,onMergeMR:m,onApproveMR:f}){const{t:x}=Re("common"),[v,y]=p.useState(new Set),[w,S]=p.useState(new Set),[C,_]=p.useState(!1),[j,T]=p.useState(null),[E,A]=p.useState(!1),[R,D]=p.useState(!1),[M,P]=p.useState(null);p.useEffect(()=>{if(t?.success&&t.findings.length>0){const K=t.findings.filter(L=>(L.severity==="critical"||L.severity==="high")&&!w.has(L.id)).map(L=>L.id);y(new Set(K))}},[t,w]);const O=w.size>0||t?.hasPostedFindings,F=p.useCallback(async()=>{if(t?.success&&t.reviewedCommitSha&&O){const K=await o();P(K)}else P(null)},[t,o,O]);p.useEffect(()=>{F()},[F]),p.useEffect(()=>{if(j){const K=setTimeout(()=>T(null),3e3);return()=>clearTimeout(K)}},[j]);const $=v.size,z=p.useMemo(()=>!t||!t.success?!1:t.summary?.includes("READY TO MERGE")||t.overallStatus==="approve",[t]),H=p.useMemo(()=>{if(!t||!t.success)return{status:"not_reviewed",label:"Not Reviewed",description:"Run an AI review to analyze this MR",icon:n.jsx(Qt,{className:"h-5 w-5"}),color:"bg-muted text-muted-foreground border-muted"};const K=w.size+(t.postedFindingIds?.length??0),L=K>0||t.hasPostedFindings,G=t.findings.some(te=>te.severity==="critical"||te.severity==="high"),Y=t.findings.filter(te=>!w.has(te.id)&&!t.postedFindingIds?.includes(te.id)),q=Y.some(te=>te.severity==="critical"||te.severity==="high"),Q=M?.hasNewCommits??!1,se=M?.newCommitCount??0;if(t.isFollowupReview){const te=t.resolvedFindings?.length??0,ee=t.unresolvedFindings?.length??0,pe=t.newFindingsSinceLastReview?.length??0,fe=t.findings.some(re=>re.severity==="critical"||re.severity==="high");if(Q)return{status:"ready_for_followup",label:"Ready for Follow-up",description:`${se} new commit${se!==1?"s":""} since follow-up. Run another follow-up review.`,icon:n.jsx(We,{className:"h-5 w-5"}),color:"bg-info/20 text-info border-info/50"};if(ee===0&&pe===0)return{status:"ready_to_merge",label:"Ready to Merge",description:`All ${te} issue${te!==1?"s":""} resolved. This MR can be merged.`,icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"};if(!fe){const re=ee+pe;return{status:"ready_to_merge",label:"Ready to Merge",description:`${te} resolved. ${re} non-blocking suggestion${re!==1?"s":""} remain.`,icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"}}return{status:"followup_issues_remain",label:"Blocking Issues",description:`${te} resolved, ${ee} blocking issue${ee!==1?"s":""} still open.`,icon:n.jsx(Tt,{className:"h-5 w-5"}),color:"bg-warning/20 text-warning border-warning/50"}}return L&&Q?{status:"ready_for_followup",label:"Ready for Follow-up",description:`${se} new commit${se!==1?"s":""} since review. Run follow-up to check if issues are resolved.`,icon:n.jsx(We,{className:"h-5 w-5"}),color:"bg-info/20 text-info border-info/50"}:z&&L?{status:"ready_to_merge",label:"Ready to Merge",description:"No blocking issues found. This MR can be merged.",icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"}:L&&G?{status:"waiting_for_changes",label:"Waiting for Changes",description:`${K} finding${K!==1?"s":""} posted. Waiting for contributor to address issues.`,icon:n.jsx(Tt,{className:"h-5 w-5"}),color:"bg-warning/20 text-warning border-warning/50"}:L&&!G?{status:"ready_to_merge",label:"Ready to Merge",description:`${K} finding${K!==1?"s":""} posted. No blocking issues remain.`,icon:n.jsx(Ja,{className:"h-5 w-5"}),color:"bg-success/20 text-success border-success/50"}:q?{status:"needs_attention",label:"Needs Attention",description:`${Y.length} finding${Y.length!==1?"s":""} need to be posted to GitLab.`,icon:n.jsx(Ke,{className:"h-5 w-5"}),color:"bg-destructive/20 text-destructive border-destructive/50"}:{status:"reviewed_pending_post",label:"Review Complete",description:`${t.findings.length} finding${t.findings.length!==1?"s":""} found. Select and post to GitLab.`,icon:n.jsx(nh,{className:"h-5 w-5"}),color:"bg-primary/20 text-primary border-primary/50"}},[t,w,z,M]),I=async()=>{const K=Array.from(v);if(K.length!==0){_(!0);try{await u(K)&&(S(G=>new Set([...G,...K])),y(new Set),T({count:K.length,timestamp:Date.now()}),setTimeout(()=>F(),500))}finally{_(!1)}}},V=async()=>{if(t){D(!0);try{await f()}finally{D(!1)}}},B=async()=>{A(!0);try{await m("squash")}finally{A(!1)}};return n.jsx(KMe,{children:n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oe,{variant:"outline",className:r4e(e.state),children:e.state.charAt(0).toUpperCase()+e.state.slice(1)}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["!",e.iid]})]}),n.jsx(W,{variant:"ghost",size:"icon",asChild:!0,"aria-label":x("accessibility.openOnGitLabAriaLabel"),children:n.jsx("a",{href:e.webUrl,target:"_blank",rel:"noopener noreferrer",children:n.jsx(Zt,{className:"h-4 w-4"})})})]}),n.jsx("h2",{className:"text-lg font-semibold text-foreground",children:e.title})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Qr,{className:"h-4 w-4"}),e.author.username]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(cr,{className:"h-4 w-4"}),m5(e.createdAt)]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(an,{className:"h-4 w-4"}),e.sourceBranch,"  ",e.targetBranch]}),e.assignees&&e.assignees.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Oa,{className:"h-4 w-4"}),e.assignees.map(K=>K.username).join(", ")]})]}),e.mergeStatus&&n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs(oe,{variant:"outline",className:"flex items-center gap-1",children:[n.jsx(r1,{className:"h-3 w-3"}),e.mergeStatus]})}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[M?.hasNewCommits&&!r?n.jsxs(W,{onClick:a,disabled:r,className:"flex-1",variant:"secondary",children:[n.jsx(We,{className:"h-4 w-4 mr-2"}),"Follow-up Review (",M.newCommitCount," new commit",M.newCommitCount!==1?"s":"",")"]}):n.jsx(W,{onClick:i,disabled:r,className:"flex-1",children:r?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Reviewing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Run AI Review"]})}),r&&n.jsxs(W,{onClick:l,variant:"destructive",children:[n.jsx(yn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),t&&t.success&&$>0&&!r&&n.jsx(W,{onClick:I,variant:"secondary",disabled:C,children:C?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Posting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Np,{className:"h-4 w-4 mr-2"}),"Post ",$," Finding",$!==1?"s":""]})}),j&&n.jsxs("div",{className:"flex items-center gap-2 text-success text-sm",children:[n.jsx(Ys,{className:"h-4 w-4"}),"Posted ",j.count," finding",j.count!==1?"s":""," to GitLab"]})]}),t&&t.success&&z&&e.state==="opened"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(W,{onClick:V,disabled:R,variant:"default",className:"flex-1 bg-success hover:bg-success/90",children:R?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Approving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Approve"]})}),n.jsx(W,{onClick:B,disabled:E,variant:"outline",className:"flex-1",children:E?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Merging..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ua,{className:"h-4 w-4 mr-2"}),"Merge MR"]})})]})]}),n.jsx(Le,{className:`border-2 ${H.color} ${H.status==="ready_for_followup"?"animate-pulse-subtle":""}`,children:n.jsx(Ye,{className:"py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-full ${H.color}`,children:H.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-medium",children:H.label}),n.jsx("div",{className:"text-sm text-muted-foreground truncate",children:H.description})]}),H.status==="ready_for_followup"&&n.jsx(W,{onClick:a,disabled:r,className:"bg-info hover:bg-info/90 text-info-foreground shrink-0",children:r?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Reviewing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-4 w-4 mr-2"}),"Run Follow-up Review"]})}),H.status==="waiting_for_changes"&&M?.hasNewCommits&&n.jsxs(oe,{variant:"outline",className:"bg-primary/20 text-primary border-primary/50 shrink-0",children:[n.jsx(We,{className:"h-3 w-3 mr-1"}),M.newCommitCount," new commit",M.newCommitCount!==1?"s":""]})]})})}),s&&n.jsx(Le,{children:n.jsx(Ye,{className:"pt-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{children:s.message}),n.jsxs("span",{className:"text-muted-foreground",children:[s.progress,"%"]})]}),n.jsx(xi,{value:s.progress})]})})}),t&&t.success&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsxs(ln,{className:"text-sm flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[t.isFollowupReview?n.jsx(We,{className:"h-4 w-4"}):n.jsx(Qt,{className:"h-4 w-4"}),t.isFollowupReview?"Follow-up Review":"AI Review Result"]}),n.jsxs(oe,{variant:"outline",className:n4e(t.overallStatus),children:[t.overallStatus==="approve"&&"Approve",t.overallStatus==="request_changes"&&"Changes Requested",t.overallStatus==="comment"&&"Comment"]})]})}),n.jsxs(Ye,{className:"space-y-4 overflow-hidden",children:[t.isFollowupReview&&n.jsxs("div",{className:"flex flex-wrap gap-2 pb-2 border-b border-border",children:[(t.resolvedFindings?.length??0)>0&&n.jsxs(oe,{variant:"outline",className:"bg-success/20 text-success border-success/50",children:[n.jsx(Ys,{className:"h-3 w-3 mr-1"}),t.resolvedFindings?.length," resolved"]}),(t.unresolvedFindings?.length??0)>0&&n.jsxs(oe,{variant:"outline",className:"bg-warning/20 text-warning border-warning/50",children:[n.jsx(Ke,{className:"h-3 w-3 mr-1"}),t.unresolvedFindings?.length," still open"]}),(t.newFindingsSinceLastReview?.length??0)>0&&n.jsxs(oe,{variant:"outline",className:"bg-destructive/20 text-destructive border-destructive/50",children:[n.jsx(yn,{className:"h-3 w-3 mr-1"}),t.newFindingsSinceLastReview?.length," new issue",t.newFindingsSinceLastReview?.length!==1?"s":""]})]}),n.jsx("p",{className:"text-sm text-muted-foreground break-words",children:t.summary}),n.jsx(s4e,{findings:t.findings,selectedIds:v,postedIds:w,onSelectionChange:y}),t.reviewedAt&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Reviewed: ",m5(t.reviewedAt),t.reviewedCommitSha&&n.jsxs(n.Fragment,{children:[" at commit ",t.reviewedCommitSha.substring(0,7)]})]})]})]}),t&&!t.success&&n.jsx(Le,{className:"border-destructive",children:n.jsx(Ye,{className:"pt-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[n.jsx(yn,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Review failed"})]})})}),n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:"Description"})}),n.jsx(Ye,{className:"overflow-hidden",children:e.description?n.jsx("pre",{className:"whitespace-pre-wrap text-sm text-muted-foreground font-sans break-words max-w-full overflow-hidden",children:e.description}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No description provided."})})]}),e.labels&&e.labels.length>0&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-2",children:n.jsx(ln,{className:"text-sm",children:"Labels"})}),n.jsx(Ye,{children:n.jsx("div",{className:"flex flex-wrap gap-2",children:e.labels.map(K=>n.jsx(oe,{variant:"outline",children:K},K))})})]})]})})})}function a4e({open:e,onOpenChange:t,projectId:s,defaultSourceBranch:r="",defaultTargetBranch:i="main",onSuccess:a}){const[o,l]=p.useState(""),[u,d]=p.useState(""),[m,f]=p.useState(r),[x,v]=p.useState(i),[y,w]=p.useState(!1),[S,C]=p.useState(null),_=async()=>{if(!o.trim()||!m.trim()||!x.trim()){C("Title, source branch, and target branch are required");return}w(!0),C(null);try{const j=await window.electronAPI.createGitLabMergeRequest(s,{sourceBranch:m.trim(),targetBranch:x.trim(),title:o.trim(),description:u.trim()||void 0});j.success&&j.data?(a?.(j.data.iid),t(!1),l(""),d(""),f(r),v(i)):C(j.error||"Failed to create merge request")}catch(j){C(j instanceof Error?j.message:"Failed to create merge request")}finally{w(!1)}};return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"sm:max-w-[500px]",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(Js,{className:"h-5 w-5"}),"Create Merge Request"]}),n.jsx(ws,{children:"Create a new merge request in GitLab"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"title",children:"Title"}),n.jsx(Oe,{id:"title",placeholder:"Merge request title",value:o,onChange:j=>l(j.target.value)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"source",children:"Source Branch"}),n.jsx(Oe,{id:"source",placeholder:"feature/my-feature",value:m,onChange:j=>f(j.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"target",children:"Target Branch"}),n.jsx(Oe,{id:"target",placeholder:"main",value:x,onChange:j=>v(j.target.value)})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"description",children:"Description (optional)"}),n.jsx(go,{id:"description",placeholder:"Describe the changes in this merge request...",value:u,onChange:j=>d(j.target.value),rows:4})]}),S&&n.jsx("div",{className:"rounded-lg border border-destructive/30 bg-destructive/10 p-3 text-sm text-destructive",children:S})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsx(W,{onClick:_,disabled:y,children:y?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Merge Request"})]})]})})}const Qa=Gn((e,t)=>({mrReviews:{},startMRReview:(s,r)=>e(i=>{const a=`${s}:${r}`,o=i.mrReviews[a];return{mrReviews:{...i.mrReviews,[a]:{mrIid:r,projectId:s,isReviewing:!0,progress:null,result:null,error:null,newCommitsCheck:o?.newCommitsCheck??null}}}}),setMRReviewProgress:(s,r)=>e(i=>{const a=`${s}:${r.mrIid}`,o=i.mrReviews[a];return{mrReviews:{...i.mrReviews,[a]:{mrIid:r.mrIid,projectId:s,isReviewing:!0,progress:r,result:o?.result??null,error:null,newCommitsCheck:o?.newCommitsCheck??null}}}}),setMRReviewResult:(s,r)=>e(i=>{const a=`${s}:${r.mrIid}`;return{mrReviews:{...i.mrReviews,[a]:{mrIid:r.mrIid,projectId:s,isReviewing:!1,progress:null,result:r,error:null,newCommitsCheck:null}}}}),setMRReviewError:(s,r,i)=>e(a=>{const o=`${s}:${r}`,l=a.mrReviews[o];return{mrReviews:{...a.mrReviews,[o]:{mrIid:r,projectId:s,isReviewing:!1,progress:null,result:l?.result??null,error:i,newCommitsCheck:l?.newCommitsCheck??null}}}}),setNewCommitsCheck:(s,r,i)=>e(a=>{const o=`${s}:${r}`,l=a.mrReviews[o];return l?{mrReviews:{...a.mrReviews,[o]:{...l,newCommitsCheck:i}}}:{mrReviews:{...a.mrReviews,[o]:{mrIid:r,projectId:s,isReviewing:!1,progress:null,result:null,error:null,newCommitsCheck:i}}}}),clearMRReview:(s,r)=>e(i=>{const a=`${s}:${r}`,{[a]:o,...l}=i.mrReviews;return{mrReviews:l}}),getMRReviewState:(s,r)=>{const{mrReviews:i}=t(),a=`${s}:${r}`;return i[a]??null},getActiveMRReviews:s=>{const{mrReviews:r}=t();return Object.values(r).filter(i=>i.projectId===s&&i.isReviewing)}}));let f5=!1;function o4e(){if(f5)return;const e=Qa.getState();if(!window.electronAPI?.onGitLabMRReviewProgress){console.warn("[GitLab MR Store] GitLab MR Review API not available, skipping listener setup");return}const t=(a,o)=>{e.setMRReviewProgress(a,o)};window.electronAPI.onGitLabMRReviewProgress(t);const s=(a,o)=>{e.setMRReviewResult(a,o)};window.electronAPI.onGitLabMRReviewComplete(s);const r=(a,o)=>{e.setMRReviewError(a,o.mrIid,o.error)};window.electronAPI.onGitLabMRReviewError(r);const i=window.electronAPI;i.removeGitLabMRReviewProgress,i.removeGitLabMRReviewComplete,i.removeGitLabMRReviewError,f5=!0}function l4e(e,t){Qa.getState().startMRReview(e,t),window.electronAPI.runGitLabMRReview(e,t)}function c4e(e,t){Qa.getState().startMRReview(e,t),window.electronAPI.runGitLabMRFollowupReview(e,t)}function d4e(e){const[t,s]=p.useState([]),[r,i]=p.useState(!1),[a,o]=p.useState(null),[l,u]=p.useState(null),[d,m]=p.useState(!1),[f,x]=p.useState(null),[v]=p.useState("opened"),y=Qa(L=>L.mrReviews),w=Qa(L=>L.getMRReviewState),S=Qa(L=>L.getActiveMRReviews),C=p.useMemo(()=>!e||l===null?null:w(e,l),[e,l,y,w]),_=C?.result??null,j=C?.progress??null,T=C?.isReviewing??!1,E=p.useMemo(()=>e?S(e).map(L=>L.mrIid):[],[e,y,S]),A=p.useCallback(L=>{if(!e)return null;const G=w(e,L);return G?{isReviewing:G.isReviewing,progress:G.progress,result:G.result,error:G.error,newCommitsCheck:G.newCommitsCheck}:null},[e,y,w]),R=t.find(L=>L.iid===l)||null,D=p.useCallback(async()=>{if(e){i(!0),o(null);try{const L=await window.electronAPI.checkGitLabConnection(e);if(L.success&&L.data){if(m(L.data.connected),x(L.data.projectPathWithNamespace||null),L.data.connected){const G=await window.electronAPI.getGitLabMergeRequests(e,v);G.success&&G.data&&(s(G.data),G.data.forEach(Y=>{!w(e,Y.iid)?.result&&window.electronAPI.getGitLabMRReview&&window.electronAPI.getGitLabMRReview(e,Y.iid).then(Q=>{Q&&Qa.getState().setMRReviewResult(e,Q)})}))}}else m(!1),x(null),o(L.error||"Failed to check connection")}catch(L){o(L instanceof Error?L.message:"Failed to fetch MRs"),m(!1)}finally{i(!1)}}},[e,v,w]);p.useEffect(()=>{D()},[D]);const M=p.useCallback(L=>{u(L),L&&e&&!w(e,L)?.result&&window.electronAPI.getGitLabMRReview&&window.electronAPI.getGitLabMRReview(e,L).then(Y=>{Y&&Qa.getState().setMRReviewResult(e,Y)})},[e,w]),P=p.useCallback(async()=>{await D()},[D]),O=p.useCallback(async L=>{e&&l4e(e,L)},[e]),F=p.useCallback(async L=>{e&&c4e(e,L)},[e]),$=p.useCallback(async L=>{if(!e||!window.electronAPI.checkGitLabMRNewCommits)return{hasNewCommits:!1};try{const G=await window.electronAPI.checkGitLabMRNewCommits(e,L);return Qa.getState().setNewCommitsCheck(e,L,G),G}catch(G){return o(G instanceof Error?G.message:"Failed to check for new commits"),{hasNewCommits:!1}}},[e]),z=p.useCallback(async L=>{if(!e||!window.electronAPI.cancelGitLabMRReview)return!1;try{const G=await window.electronAPI.cancelGitLabMRReview(e,L);return G&&Qa.getState().setMRReviewError(e,L,"Review cancelled by user"),G}catch(G){return o(G instanceof Error?G.message:"Failed to cancel review"),!1}},[e]),H=p.useCallback(async(L,G)=>{if(!e||!window.electronAPI.postGitLabMRReview)return!1;try{return await window.electronAPI.postGitLabMRReview(e,L,G)}catch(Y){return o(Y instanceof Error?Y.message:"Failed to post review"),!1}},[e]),I=p.useCallback(async(L,G)=>{if(!e||!window.electronAPI.postGitLabMRNote)return!1;try{return await window.electronAPI.postGitLabMRNote(e,L,G)}catch(Y){return o(Y instanceof Error?Y.message:"Failed to post note"),!1}},[e]),V=p.useCallback(async(L,G="squash")=>{if(!e||!window.electronAPI.mergeGitLabMR)return!1;try{const Y=await window.electronAPI.mergeGitLabMR(e,L,G);return Y&&await D(),Y}catch(Y){return o(Y instanceof Error?Y.message:"Failed to merge MR"),!1}},[e,D]),B=p.useCallback(async(L,G)=>{if(!e||!window.electronAPI.assignGitLabMR)return!1;try{const Y=await window.electronAPI.assignGitLabMR(e,L,G);return Y&&await D(),Y}catch(Y){return o(Y instanceof Error?Y.message:"Failed to assign users"),!1}},[e,D]),K=p.useCallback(async L=>{if(!e||!window.electronAPI.approveGitLabMR)return!1;try{return await window.electronAPI.approveGitLabMR(e,L)}catch(G){return o(G instanceof Error?G.message:"Failed to approve MR"),!1}},[e]);return{mergeRequests:t,isLoading:r,error:a,selectedMR:R,selectedMRIid:l,reviewResult:_,reviewProgress:j,isReviewing:T,isConnected:d,projectPath:f,activeMRReviews:E,selectMR:M,refresh:P,runReview:O,runFollowupReview:F,checkNewCommits:$,cancelReview:z,postReview:H,postNote:I,mergeMR:V,assignMR:B,approveMR:K,getReviewStateForMR:A}}function u4e({projectId:e,onOpenSettings:t}){const[s,r]=p.useState("opened"),[i,a]=p.useState(!1);p.useEffect(()=>{o4e()},[]);const{mergeRequests:o,isLoading:l,error:u,selectedMR:d,selectedMRIid:m,reviewResult:f,reviewProgress:x,isReviewing:v,selectMR:y,refresh:w,runReview:S,runFollowupReview:C,checkNewCommits:_,cancelReview:j,postReview:T,postNote:E,mergeMR:A,assignMR:R,approveMR:D}=d4e(e),M=async P=>{await w(),y(P)};return u?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[n.jsx(Ke,{className:"h-12 w-12 text-destructive mb-4"}),n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:u}),n.jsx(W,{variant:"outline",onClick:w,className:"mt-4",children:"Try Again"})]}):n.jsxs("div",{className:"flex h-full",children:[n.jsxs("div",{className:"w-1/2 border-r border-border flex flex-col",children:[n.jsx(WMe,{mergeRequests:o,isLoading:l,selectedMrIid:m,onSelectMr:P=>y(P.iid),onRefresh:w,stateFilter:s,onStateFilterChange:r}),n.jsx("div",{className:"p-2 border-t border-border",children:n.jsxs(W,{onClick:()=>a(!0),className:"w-full gap-2",size:"sm",children:[n.jsx(fs,{className:"h-4 w-4"}),"New Merge Request"]})})]}),n.jsx("div",{className:"flex-1 flex flex-col",children:d?n.jsx(i4e,{mr:d,reviewResult:f,reviewProgress:x,isReviewing:v,onRunReview:()=>S(d.iid),onRunFollowupReview:()=>C(d.iid),onCheckNewCommits:()=>_(d.iid),onCancelReview:()=>j(d.iid),onPostReview:P=>T(d.iid,P),onPostNote:P=>E(d.iid,P),onMergeMR:P=>A(d.iid,P),onAssignMR:P=>R(d.iid,P),onApproveMR:()=>D(d.iid)}):n.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Select a merge request to view details"})}),n.jsx(a4e,{open:i,onOpenChange:a,projectId:e,onSuccess:M})]})}function h4e({step:e,onRefresh:t}){return n.jsxs("div",{className:"flex items-center justify-between border-b border-border px-6 py-4",children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-semibold",children:"Changelog Generator"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e===1?"Step 1: Select completed tasks to include":e===2?"Step 2: Configure and generate changelog":"Step 3: Release and archive tasks"})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[n.jsx(u_,{step:1,currentStep:e,label:"Select"}),n.jsx("div",{className:"w-6 h-px bg-border"}),n.jsx(u_,{step:2,currentStep:e,label:"Generate"}),n.jsx("div",{className:"w-6 h-px bg-border"}),n.jsx(u_,{step:3,currentStep:e,label:"Release"})]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:t,children:[n.jsx(We,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]})}function u_({step:e,currentStep:t,label:s}){const r=e===t,i=e<t;return n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:J("flex h-6 w-6 items-center justify-center rounded-full text-xs font-medium transition-colors",i||r?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:i?n.jsx(Pt,{className:"h-3 w-3"}):e}),n.jsx("span",{className:J("text-sm",r?"text-foreground font-medium":"text-muted-foreground"),children:s})]})}var AA="Radio",[m4e,bV]=ur(AA),[f4e,p4e]=m4e(AA),yV=p.forwardRef((e,t)=>{const{__scopeRadio:s,name:r,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:u,form:d,...m}=e,[f,x]=p.useState(null),v=Ct(t,S=>x(S)),y=p.useRef(!1),w=f?d||!!f.closest("form"):!0;return n.jsxs(f4e,{scope:s,checked:i,disabled:o,children:[n.jsx(ot.button,{type:"button",role:"radio","aria-checked":i,"data-state":_V(i),"data-disabled":o?"":void 0,disabled:o,value:l,...m,ref:v,onClick:Fe(e.onClick,S=>{i||u?.(),w&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})}),w&&n.jsx(SV,{control:f,bubbles:!y.current,name:r,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});yV.displayName=AA;var wV="RadioIndicator",jV=p.forwardRef((e,t)=>{const{__scopeRadio:s,forceMount:r,...i}=e,a=p4e(wV,s);return n.jsx(Dn,{present:r||a.checked,children:n.jsx(ot.span,{"data-state":_V(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});jV.displayName=wV;var g4e="RadioBubbleInput",SV=p.forwardRef(({__scopeRadio:e,control:t,checked:s,bubbles:r=!0,...i},a)=>{const o=p.useRef(null),l=Ct(o,a),u=My(s),d=xy(t);return p.useEffect(()=>{const m=o.current;if(!m)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==s&&v){const y=new Event("click",{bubbles:r});v.call(m,s),m.dispatchEvent(y)}},[u,s,r]),n.jsx(ot.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SV.displayName=g4e;function _V(e){return e?"checked":"unchecked"}var x4e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dw="RadioGroup",[v4e]=ur(dw,[$h,bV]),NV=$h(),CV=bV(),[b4e,y4e]=v4e(dw),kV=p.forwardRef((e,t)=>{const{__scopeRadioGroup:s,name:r,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:u,dir:d,loop:m=!0,onValueChange:f,...x}=e,v=NV(s),y=Bh(d),[w,S]=$i({prop:a,defaultProp:i??null,onChange:f,caller:dw});return n.jsx(b4e,{scope:s,name:r,required:o,disabled:l,value:w,onValueChange:S,children:n.jsx(q1,{asChild:!0,...v,orientation:u,dir:y,loop:m,children:n.jsx(ot.div,{role:"radiogroup","aria-required":o,"aria-orientation":u,"data-disabled":l?"":void 0,dir:y,...x,ref:t})})})});kV.displayName=dw;var AV="RadioGroupItem",EV=p.forwardRef((e,t)=>{const{__scopeRadioGroup:s,disabled:r,...i}=e,a=y4e(AV,s),o=a.disabled||r,l=NV(s),u=CV(s),d=p.useRef(null),m=Ct(t,d),f=a.value===i.value,x=p.useRef(!1);return p.useEffect(()=>{const v=w=>{x4e.includes(w.key)&&(x.current=!0)},y=()=>x.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",y)}},[]),n.jsx(W1,{asChild:!0,...l,focusable:!o,active:f,children:n.jsx(yV,{disabled:o,required:a.required,checked:f,...u,...i,name:a.name,ref:m,onCheck:()=>a.onValueChange(i.value),onKeyDown:Fe(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:Fe(i.onFocus,()=>{x.current&&d.current?.click()})})})});EV.displayName=AV;var w4e="RadioGroupIndicator",TV=p.forwardRef((e,t)=>{const{__scopeRadioGroup:s,...r}=e,i=CV(s);return n.jsx(jV,{...i,...r,ref:t})});TV.displayName=w4e;var PV=kV,RV=EV,j4e=TV;const EA=p.forwardRef(({className:e,...t},s)=>n.jsx(PV,{className:J("grid gap-2",e),...t,ref:s}));EA.displayName=PV.displayName;const Xu=p.forwardRef(({className:e,...t},s)=>n.jsx(RV,{ref:s,className:J("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background","focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(j4e,{className:"flex items-center justify-center",children:n.jsx(yo,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Xu.displayName=RV.displayName;function S4e({sourceMode:e,onSourceModeChange:t,doneTasksCount:s,branches:r,tags:i,defaultBranch:a,isLoadingGitData:o,isLoadingCommits:l,gitHistoryType:u,gitHistoryCount:d,gitHistorySinceDate:m,gitHistoryFromTag:f,gitHistoryToTag:x,gitHistorySinceVersion:v,includeMergeCommits:y,onGitHistoryTypeChange:w,onGitHistoryCountChange:S,onGitHistorySinceDateChange:C,onGitHistoryFromTagChange:_,onGitHistoryToTagChange:j,onGitHistorySinceVersionChange:T,onIncludeMergeCommitsChange:E,baseBranch:A,compareBranch:R,onBaseBranchChange:D,onCompareBranchChange:M,onLoadCommitsPreview:P}){const O=r.filter(F=>!F.isRemote);return n.jsx("div",{className:"w-80 shrink-0 border-r border-border overflow-y-auto",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(le,{className:"text-sm font-medium",children:"Changelog Source"}),n.jsxs(EA,{value:e,onValueChange:F=>t(F),className:"space-y-2",children:[n.jsxs("label",{className:J("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-all",e==="tasks"?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[n.jsx(Xu,{value:"tasks",className:"mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($n,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium text-sm",children:yj.tasks}),n.jsx(oe,{variant:"secondary",className:"ml-auto text-xs",children:s})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:wj.tasks})]})]}),n.jsxs("label",{className:J("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-all",e==="git-history"?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[n.jsx(Xu,{value:"git-history",className:"mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(M_,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium text-sm",children:yj["git-history"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:wj["git-history"]})]})]}),n.jsxs("label",{className:J("flex items-start gap-3 rounded-lg border p-3 cursor-pointer transition-all",e==="branch-diff"?"border-primary bg-primary/5":"border-border hover:border-primary/50"),children:[n.jsx(Xu,{value:"branch-diff",className:"mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium text-sm",children:yj["branch-diff"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:wj["branch-diff"]})]})]})]})]}),e==="git-history"&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsx(ln,{className:"text-sm",children:"Git History Options"})}),n.jsxs(Ye,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"History Type"}),n.jsxs(_t,{value:u,onValueChange:F=>w(F),children:[n.jsx(yt,{children:n.jsx(Nt,{})}),n.jsxs(wt,{children:[n.jsx(et,{value:"since-version",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qv,{className:"h-3 w-3"}),"Since Version"]})}),n.jsx(et,{value:"recent",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(M_,{className:"h-3 w-3"}),"Recent Commits"]})}),n.jsx(et,{value:"since-date",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Y3,{className:"h-3 w-3"}),"Since Date"]})}),n.jsx(et,{value:"tag-range",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qv,{className:"h-3 w-3"}),"Tag Range"]})})]})]})]}),u==="recent"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"Number of Commits"}),n.jsx(Oe,{type:"number",min:1,max:500,value:d,onChange:F=>S(parseInt(F.target.value)||25)})]}),u==="since-date"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"Since Date"}),n.jsx(Oe,{type:"date",value:m,onChange:F=>C(F.target.value)})]}),u==="tag-range"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"From Tag"}),n.jsxs(_t,{value:f,onValueChange:_,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select tag..."})}),n.jsx(wt,{children:i.map(F=>n.jsx(et,{value:F.name,children:F.name},F.name))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"To Tag (optional)"}),n.jsxs(_t,{value:x||"HEAD",onValueChange:F=>j(F==="HEAD"?"":F),children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"HEAD (latest)"})}),n.jsxs(wt,{children:[n.jsx(et,{value:"HEAD",children:"HEAD (latest)"}),i.map(F=>n.jsx(et,{value:F.name,children:F.name},F.name))]})]})]})]}),u==="since-version"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"Last Version"}),n.jsxs(_t,{value:v,onValueChange:T,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select version..."})}),n.jsx(wt,{children:i.map(F=>n.jsx(et,{value:F.name,children:F.name},F.name))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"All commits since this version will be included"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ui,{id:"merge-commits",checked:y,onCheckedChange:F=>E(F)}),n.jsx(le,{htmlFor:"merge-commits",className:"text-xs cursor-pointer",children:"Include merge commits"})]}),n.jsx(W,{variant:"outline",className:"w-full",onClick:P,disabled:l||o,children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4"}),"Load Commits"]})})]})]}),e==="branch-diff"&&n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsx(ln,{className:"text-sm",children:"Branch Comparison"})}),n.jsxs(Ye,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"Base Branch"}),n.jsxs(_t,{value:A,onValueChange:D,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select base branch..."})}),n.jsx(wt,{children:O.map(F=>n.jsx(et,{value:F.name,children:n.jsxs("div",{className:"flex items-center gap-2",children:[F.name,F.name===a&&n.jsx(oe,{variant:"outline",className:"text-xs",children:"default"})]})},F.name))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The branch you're merging into"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-xs",children:"Compare Branch"}),n.jsxs(_t,{value:R,onValueChange:M,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select compare branch..."})}),n.jsx(wt,{children:O.map(F=>n.jsx(et,{value:F.name,children:n.jsxs("div",{className:"flex items-center gap-2",children:[F.name,F.isCurrent&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:"current"})]})},F.name))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"The branch with your changes"})]}),A&&R&&A===R&&n.jsxs("div",{className:"flex items-center gap-2 text-destructive text-xs",children:[n.jsx(Ke,{className:"h-3 w-3"}),"Branches must be different"]}),n.jsx(W,{variant:"outline",className:"w-full",onClick:P,disabled:l||o||!A||!R||A===R,children:l?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4"}),"Load Commits"]})})]})]})]})})}function _4e({task:e,isSelected:t,onToggle:s}){const r=new Date(e.completedAt).toLocaleDateString();return n.jsx("label",{className:J("flex flex-col rounded-lg border p-4 cursor-pointer transition-all",t?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50 hover:bg-muted/30"),children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ui,{checked:t,onCheckedChange:s,className:"mt-1"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-medium text-sm leading-tight",children:e.title}),e.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2 line-clamp-2",children:e.description}),n.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.hasSpecs&&n.jsx(oe,{variant:"secondary",className:"text-xs",children:"Has Specs"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:r})]})]})]})})}function N4e({commit:e}){const t=new Date(e.date).toLocaleDateString();return n.jsxs("div",{className:"flex items-start gap-3 rounded-lg border border-border p-3 bg-background",children:[n.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted",children:n.jsx(Kb,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-sm font-medium leading-tight line-clamp-2",children:e.subject}),n.jsx("code",{className:"text-xs text-muted-foreground font-mono shrink-0",children:e.hash})]}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[n.jsx("span",{children:e.author}),n.jsx("span",{children:t}),e.filesChanged!==void 0&&n.jsxs("span",{children:[e.filesChanged," file",e.filesChanged!==1?"s":""]})]})]})]})}function C4e({sourceMode:e,doneTasks:t,selectedTaskIds:s,onToggleTask:r,onSelectAll:i,onDeselectAll:a,previewCommits:o,isLoadingCommits:l,onContinue:u,canContinue:d}){const m=()=>{switch(e){case"tasks":return s.length;case"git-history":case"branch-diff":return o.length;default:return 0}},f=()=>{switch(e){case"tasks":return"task";case"git-history":case"branch-diff":return"commit";default:return"item"}};return n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e==="tasks"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between border-b border-border px-6 py-3 bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-sm font-medium",children:[s.length," of ",t.length," tasks selected"]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(W,{variant:"ghost",size:"sm",onClick:i,className:"h-7 px-2 text-xs",children:"Select All"}),n.jsx(W,{variant:"ghost",size:"sm",onClick:a,className:"h-7 px-2 text-xs",children:"Clear"})]})]})}),n.jsx(zt,{className:"flex-1 p-6",children:t.length===0?n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx($n,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),n.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Completed Tasks"}),n.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-md",children:'Complete tasks in the Kanban board and mark them as "Done" to include them in your changelog.'})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(x=>n.jsx(_4e,{task:x,isSelected:s.includes(x.id),onToggle:()=>r(x.id)},x.id))})})]}),(e==="git-history"||e==="branch-diff")&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between border-b border-border px-6 py-3 bg-muted/30",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-sm font-medium",children:[o.length," commit",o.length!==1?"s":""," found"]}),l&&n.jsx(we,{className:"h-4 w-4 animate-spin text-muted-foreground"})]})}),n.jsx(zt,{className:"flex-1 p-6",children:l?n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(we,{className:"mx-auto h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Loading commits..."})]})}):o.length===0?n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Kb,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),n.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Commits Found"}),n.jsx("p",{className:"mt-2 text-sm text-muted-foreground max-w-md",children:e==="git-history"?'Configure the history options and click "Load Commits" to preview.':'Select both branches and click "Load Commits" to see the changes.'})]})}):n.jsx("div",{className:"space-y-2",children:o.map(x=>n.jsx(N4e,{commit:x},x.fullHash))})})]}),n.jsx("div",{className:"flex items-center justify-end border-t border-border px-6 py-4 bg-background",children:n.jsxs(W,{onClick:u,disabled:!d,size:"lg",children:["Continue",n.jsx(n1,{className:"ml-2 h-4 w-4"}),d&&n.jsxs(oe,{variant:"secondary",className:"ml-2",children:[m()," ",f(),m()!==1?"s":""]})]})})]})}function k4e(e,t,s,r){switch(e){case"tasks":return{count:t.length,label:"task",details:s.slice(0,3).map(i=>i.title).join(", ")+(s.length>3?` +${s.length-3} more`:"")};case"git-history":case"branch-diff":return{count:r.length,label:"commit",details:r.slice(0,3).map(i=>i.subject.substring(0,40)).join(", ")+(r.length>3?` +${r.length-3} more`:"")};default:return{count:0,label:"item",details:""}}}function A4e(e){return e.startsWith("v")?e:`v${e}`}function E4e(e){if(!e)return null;switch(e){case"breaking":return"Major version bump (breaking changes detected)";case"feature":return"Minor version bump (new features detected)";default:return"Patch version bump (fixes/improvements)"}}function T4e({sourceMode:e,summaryInfo:t,existingChangelog:s,version:r,versionReason:i,date:a,format:o,audience:l,emojiLevel:u,customInstructions:d,generationProgress:m,isGenerating:f,error:x,showAdvanced:v,canGenerate:y,onBack:w,onVersionChange:S,onDateChange:C,onFormatChange:_,onAudienceChange:j,onEmojiLevelChange:T,onCustomInstructionsChange:E,onShowAdvancedChange:A,onGenerate:R}){const D=E4e(i);return n.jsx("div",{className:"w-80 shrink-0 border-r border-border overflow-y-auto",children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs(W,{variant:"ghost",size:"sm",onClick:w,className:"-ml-2",children:[n.jsx(fne,{className:"mr-2 h-4 w-4"}),"Back to Selection"]}),n.jsxs("div",{className:"rounded-lg bg-muted/50 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e==="tasks"?n.jsx($n,{className:"h-4 w-4"}):n.jsx(Kb,{className:"h-4 w-4"}),"Including ",t.count," ",t.label,t.count!==1?"s":""]}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:t.details})]})]}),n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsx(ln,{className:"text-sm",children:"Release Info"})}),n.jsxs(Ye,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"version",children:"Version"}),n.jsx(Oe,{id:"version",value:r,onChange:M=>S(M.target.value),placeholder:"1.0.0"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"date",children:"Date"}),n.jsx(Oe,{id:"date",type:"date",value:a,onChange:M=>C(M.target.value)})]}),(s?.lastVersion||D)&&n.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s?.lastVersion&&n.jsxs("p",{children:["Previous: ",s.lastVersion]}),D&&n.jsx("p",{className:"text-primary/70",children:D})]})]})]}),n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsx(ln,{className:"text-sm",children:"Output Style"})}),n.jsxs(Ye,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:"Format"}),n.jsxs(_t,{value:o,onValueChange:M=>_(M),children:[n.jsx(yt,{children:n.jsx(Nt,{})}),n.jsx(wt,{children:Object.entries(sq).map(([M,P])=>n.jsx(et,{value:M,children:n.jsxs("div",{children:[n.jsx("div",{children:P}),n.jsx("div",{className:"text-xs text-muted-foreground",children:nq[M]})]})},M))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:"Audience"}),n.jsxs(_t,{value:l,onValueChange:M=>j(M),children:[n.jsx(yt,{children:n.jsx(Nt,{})}),n.jsx(wt,{children:Object.entries(rq).map(([M,P])=>n.jsx(et,{value:M,children:n.jsxs("div",{children:[n.jsx("div",{children:P}),n.jsx("div",{className:"text-xs text-muted-foreground",children:iq[M]})]})},M))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:"Emojis"}),n.jsxs(_t,{value:u,onValueChange:M=>T(M),children:[n.jsx(yt,{children:n.jsx(Nt,{})}),n.jsx(wt,{children:Object.entries(aq).map(([M,P])=>n.jsx(et,{value:M,children:n.jsxs("div",{children:[n.jsx("div",{children:P}),n.jsx("div",{className:"text-xs text-muted-foreground",children:oq[M]})]})},M))})]})]})]})]}),n.jsxs(Ba,{open:v,onOpenChange:A,children:[n.jsx(za,{asChild:!0,children:n.jsxs(W,{variant:"ghost",className:"w-full justify-between",children:["Advanced Options",v?n.jsx(Hi,{className:"h-4 w-4"}):n.jsx(bt,{className:"h-4 w-4"})]})}),n.jsx($a,{className:"pt-2",children:n.jsx(Le,{children:n.jsx(Ye,{className:"pt-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"instructions",children:"Custom Instructions"}),n.jsx(go,{id:"instructions",value:d,onChange:M=>E(M.target.value),placeholder:"Add any special instructions for the AI...",rows:3}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Optional. Guide the AI on tone, specific details to include, etc."})]})})})})]}),n.jsx(W,{className:"w-full",onClick:R,disabled:!y,size:"lg",children:f?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Generate Changelog"]})}),m&&f&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{children:lq[m.stage]}),n.jsxs("span",{children:[m.progress,"%"]})]}),n.jsx(xi,{value:m.progress})]}),x&&n.jsx("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-sm",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),n.jsx("span",{className:"text-destructive",children:x})]})})]})})}function P4e({src:e,alt:t,projectPath:s}){const[r,i]=p.useState(null),[a,o]=p.useState(!0),[l,u]=p.useState(null);return p.useEffect(()=>{if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")){i(e),o(!1);return}if(!s){u("Cannot load local image: no project path"),o(!1);return}(async()=>{try{o(!0),u(null);const m=e.startsWith("./")?e.slice(2):e,f=await window.electronAPI.readLocalImage(s,m);f.success&&f.data?i(f.data):u(f.error||"Failed to load image")}catch(m){u(m instanceof Error?m.message:"Failed to load image")}finally{o(!1)}})()},[e,s]),a?n.jsxs("span",{className:"inline-flex items-center gap-2 rounded border border-border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Loading image..."})]}):l||!r?n.jsxs("span",{className:"inline-flex items-center gap-2 rounded border border-destructive/50 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:[n.jsx(ec,{className:"h-4 w-4"}),n.jsx("span",{children:l||"Image not found"})]}):n.jsx("img",{src:r,alt:t,className:"max-w-full h-auto"})}function R4e({generatedChangelog:e,saveSuccess:t,copySuccess:s,canSave:r,isDragOver:i,imageError:a,textareaRef:o,projectPath:l,onSave:u,onCopy:d,onChangelogEdit:m,onPaste:f,onDragOver:x,onDragLeave:v,onDrop:y}){const[w,S]=p.useState("markdown"),C=p.useMemo(()=>({img:({src:_,alt:j})=>n.jsx(P4e,{src:_||"",alt:j||"",projectPath:l})}),[l]);return n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-border px-6 py-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h2",{className:"font-medium",children:"Preview"}),n.jsxs("div",{className:"flex items-center gap-1 rounded-md border border-border p-1",children:[n.jsx(W,{variant:w==="markdown"?"default":"ghost",size:"sm",onClick:()=>S("markdown"),className:"h-7 px-3 text-xs",children:"Markdown"}),n.jsx(W,{variant:w==="preview"?"default":"ghost",size:"sm",onClick:()=>S("preview"),className:"h-7 px-3 text-xs",children:"Preview"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"outline",size:"sm",onClick:d,disabled:!r,children:[s?n.jsx(Ys,{className:"mr-2 h-4 w-4 text-success"}):n.jsx(sh,{className:"mr-2 h-4 w-4"}),s?"Copied!":"Copy"]})}),n.jsx(mt,{children:"Copy to clipboard"})]}),n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs(W,{variant:"default",size:"sm",onClick:u,disabled:!r,children:[t?n.jsx(Ys,{className:"mr-2 h-4 w-4"}):n.jsx(nO,{className:"mr-2 h-4 w-4"}),t?"Saved!":"Save to CHANGELOG.md"]})}),n.jsx(mt,{children:"Prepend to CHANGELOG.md in project root"})]})]})]}),n.jsx("div",{className:`flex-1 overflow-hidden p-6 ${i?"bg-muted/50":""}`,onDragOver:x,onDragLeave:v,onDrop:y,children:e?n.jsxs(n.Fragment,{children:[i&&n.jsxs("div",{className:"mb-4 rounded-lg border-2 border-dashed border-primary/50 bg-primary/5 p-4 text-center",children:[n.jsx(ec,{className:"mx-auto h-8 w-8 text-primary/50"}),n.jsx("p",{className:"mt-2 text-sm text-primary/70",children:"Drop images here to add to changelog"})]}),a&&n.jsx("div",{className:"mb-4 rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-sm text-destructive",children:a}),w==="markdown"?n.jsxs("div",{className:"flex h-full flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(ec,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:"Paste images into the description to save them to the changelog"})]}),n.jsx(go,{ref:o,className:"flex-1 w-full resize-none font-mono text-sm",value:e,onChange:_=>m(_.target.value),onPaste:f,placeholder:"Generated changelog will appear here..."})]}):n.jsx("div",{className:"h-full overflow-auto",children:n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:n.jsx(ew,{remarkPlugins:[tw],components:C,children:e})})})]}):n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx($n,{className:"mx-auto h-12 w-12 text-muted-foreground/30"}),n.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:'Click "Generate Changelog" to create release notes.'}),n.jsxs("p",{className:"mt-2 text-xs text-muted-foreground flex items-center justify-center gap-2",children:[n.jsx(ec,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:"Paste images into the description to save them to the changelog"})]})]})})})]})}function D4e({projectId:e,version:t,generatedChangelog:s}){const[r,i]=p.useState(!1),[a,o]=p.useState(null),[l,u]=p.useState(null),d=t.startsWith("v")?t:`v${t}`,m=async()=>{i(!0),u(null);try{const f=await window.electronAPI.createGitHubRelease(e,t,s);f.success&&f.data?o(f.data.url):u(f.error||"Failed to create release")}catch(f){u(f instanceof Error?f.message:"Failed to create release")}finally{i(!1)}};return n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qr,{className:"h-5 w-5"}),n.jsx(ln,{className:"text-base",children:"Create GitHub Release"})]})}),n.jsx(Ye,{children:a?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-success",children:[n.jsx(Ys,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:"Release created successfully!"})]}),n.jsxs(W,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(a,"_blank"),children:[n.jsx(Zt,{className:"mr-2 h-4 w-4"}),"View Release on GitHub"]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Create a new release ",d," on GitHub with the changelog as release notes."]}),l&&n.jsxs("div",{className:"flex items-start gap-2 text-destructive text-sm",children:[n.jsx(Ke,{className:"h-4 w-4 mt-0.5 shrink-0"}),n.jsx("span",{children:l})]}),n.jsx(W,{className:"w-full",onClick:m,disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Release..."]}):n.jsxs(n.Fragment,{children:[n.jsx(qr,{className:"mr-2 h-4 w-4"}),"Create Release ",d]})})]})})]})}function I4e({projectId:e,version:t,selectedTaskIds:s,selectedTasks:r}){const[i,a]=p.useState(!1),[o,l]=p.useState(!1),[u,d]=p.useState(null),m=async()=>{a(!0),d(null);try{const f=await window.electronAPI.archiveTasks(e,s,t);f.success?l(!0):d(f.error||"Failed to archive tasks")}catch(f){d(f instanceof Error?f.message:"Failed to archive tasks")}finally{a(!1)}};return n.jsxs(Le,{children:[n.jsx(on,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(td,{className:"h-5 w-5"}),n.jsx(ln,{className:"text-base",children:"Archive Completed Tasks"})]})}),n.jsx(Ye,{children:o?n.jsxs("div",{className:"flex items-center gap-2 text-success",children:[n.jsx(Ys,{className:"h-4 w-4"}),n.jsxs("span",{className:"text-sm",children:[r.length," task",r.length!==1?"s":""," archived!"]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Archive ",r.length," task",r.length!==1?"s":"",' to clean up your Kanban board. Archived tasks can be viewed using the "Show Archived" toggle.']}),u&&n.jsxs("div",{className:"flex items-start gap-2 text-destructive text-sm",children:[n.jsx(Ke,{className:"h-4 w-4 mt-0.5 shrink-0"}),n.jsx("span",{children:u})]}),n.jsx(W,{variant:"outline",className:"w-full",onClick:m,disabled:i,children:i?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),"Archiving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(td,{className:"mr-2 h-4 w-4"}),"Archive ",r.length," Task",r.length!==1?"s":""]})})]})})]})}function M4e({projectId:e,version:t,selectedTaskIds:s,doneTasks:r,generatedChangelog:i,onDone:a}){const o=r.filter(u=>s.includes(u.id)),l=A4e(t);return n.jsx("div",{className:"flex flex-1 flex-col items-center justify-center p-8",children:n.jsxs("div",{className:"max-w-lg w-full space-y-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-success/10 mb-4",children:n.jsx(Aie,{className:"h-8 w-8 text-success"})}),n.jsx("h2",{className:"text-2xl font-semibold",children:"Changelog Saved!"}),n.jsxs("p",{className:"text-muted-foreground mt-2",children:["Version ",l," has been added to CHANGELOG.md"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(D4e,{projectId:e,version:t,generatedChangelog:i}),n.jsx(I4e,{projectId:e,version:t,selectedTaskIds:s,selectedTasks:o})]}),n.jsx("div",{className:"pt-4",children:n.jsxs(W,{className:"w-full",size:"lg",onClick:a,children:[n.jsx(Pt,{className:"mr-2 h-4 w-4"}),"Done"]})})]})})}function L4e({projectId:e,content:t,onContentChange:s}){const[r,i]=p.useState(!1),[a,o]=p.useState(null),l=p.useRef(null),u=p.useCallback(y=>{const w=l.current;if(w){const S=w.selectionStart,C=t.substring(0,S),_=t.substring(S),j=C+y+_;s(j),setTimeout(()=>{const T=S+y.length;w.setSelectionRange(T,T),w.focus()},0)}},[t,s]),d=p.useCallback(async y=>{if(e){if(!yb(y.type)){o(`Invalid image type. Allowed: ${Mv}`);return}try{const w=await wb(y),S=y.name.split(".").pop()||y.type.split("/")[1]||"png",_=`changelog-${Date.now()}.${S}`,j=jb(_,[]),T=await window.electronAPI.saveChangelogImage(e,w,j);if(T.success&&T.data){const E=`
![${j}](${T.data.relativePath})
`;u(E)}else o(T.error||"Failed to save image")}catch{o("Failed to process image")}}},[e,u]),m=p.useCallback(async y=>{if(!e)return;const S=Array.from(y.clipboardData.items).filter(C=>C.type.startsWith("image/"));if(S.length!==0){y.preventDefault(),o(null);for(const C of S){const _=C.getAsFile();_&&await d(_)}}},[e,d]),f=p.useCallback(y=>{y.preventDefault(),y.stopPropagation(),i(!0)},[]),x=p.useCallback(y=>{y.preventDefault(),y.stopPropagation(),i(!1)},[]),v=p.useCallback(async y=>{if(y.preventDefault(),y.stopPropagation(),i(!1),!e)return;const S=Array.from(y.dataTransfer.files).filter(C=>C.type.startsWith("image/"));if(S.length!==0){o(null);for(const C of S)await d(C)}},[e,d]);return{textareaRef:l,isDragOver:r,imageError:a,handlePaste:m,handleDragOver:f,handleDragLeave:x,handleDrop:v}}function O4e(e){const{sourceMode:t,selectedTaskIds:s,doneTasks:r,previewCommits:i,generatedChangelog:a,onChangelogEdit:o}=e,l=Ot(v=>v.selectedProjectId),d=Ot(v=>v.projects).find(v=>v.id===l),m=r.filter(v=>s.includes(v.id)),f=k4e(t,s,m,i),x=L4e({projectId:l,content:a,onContentChange:o});return n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx(T4e,{sourceMode:t,summaryInfo:f,existingChangelog:e.existingChangelog,version:e.version,versionReason:e.versionReason,date:e.date,format:e.format,audience:e.audience,emojiLevel:e.emojiLevel,customInstructions:e.customInstructions,generationProgress:e.generationProgress,isGenerating:e.isGenerating,error:e.error,showAdvanced:e.showAdvanced,canGenerate:e.canGenerate,onBack:e.onBack,onVersionChange:e.onVersionChange,onDateChange:e.onDateChange,onFormatChange:e.onFormatChange,onAudienceChange:e.onAudienceChange,onEmojiLevelChange:e.onEmojiLevelChange,onCustomInstructionsChange:e.onCustomInstructionsChange,onShowAdvancedChange:e.onShowAdvancedChange,onGenerate:e.onGenerate}),n.jsx(R4e,{generatedChangelog:a,saveSuccess:e.saveSuccess,copySuccess:e.copySuccess,canSave:e.canSave,isDragOver:x.isDragOver,imageError:x.imageError,textareaRef:x.textareaRef,projectPath:d?.path,onSave:e.onSave,onCopy:e.onCopy,onChangelogEdit:o,onPaste:x.handlePaste,onDragOver:x.handleDragOver,onDragLeave:x.handleDragLeave,onDrop:x.handleDrop})]})}function F4e(e){return n.jsx(M4e,{...e})}const DV=()=>new Date().toISOString().split("T")[0],p5={doneTasks:[],selectedTaskIds:[],loadedSpecs:[],existingChangelog:null,sourceMode:"tasks",branches:[],tags:[],currentBranch:"",defaultBranch:"main",previewCommits:[],isLoadingGitData:!1,isLoadingCommits:!1,gitHistoryType:"recent",gitHistoryCount:25,gitHistorySinceDate:"",gitHistoryFromTag:"",gitHistoryToTag:"",gitHistorySinceVersion:"",includeMergeCommits:!1,baseBranch:"",compareBranch:"",version:"1.0.0",date:DV(),format:"keep-a-changelog",audience:"user-facing",emojiLevel:"none",customInstructions:"",generationProgress:null,generatedChangelog:"",isGenerating:!1,error:null},lt=Gn((e,t)=>({...p5,setDoneTasks:s=>e({doneTasks:s}),setSelectedTaskIds:s=>e({selectedTaskIds:s}),toggleTaskSelection:s=>e(r=>({selectedTaskIds:r.selectedTaskIds.includes(s)?r.selectedTaskIds.filter(i=>i!==s):[...r.selectedTaskIds,s]})),selectAllTasks:()=>e(s=>({selectedTaskIds:s.doneTasks.map(r=>r.id)})),deselectAllTasks:()=>e({selectedTaskIds:[]}),setLoadedSpecs:s=>e({loadedSpecs:s}),setExistingChangelog:s=>{if(e({existingChangelog:s}),s?.lastVersion){const r=s.lastVersion.split(".").map(Number);if(r.length===3&&!r.some(isNaN)){const[i,a,o]=r;e({version:`${i}.${a}.${o+1}`})}}},setSourceMode:s=>{e({sourceMode:s,previewCommits:[],error:null})},setBranches:s=>e({branches:s}),setTags:s=>e({tags:s}),setCurrentBranch:s=>e({currentBranch:s}),setDefaultBranch:s=>{e({defaultBranch:s}),t().baseBranch||e({baseBranch:s})},setPreviewCommits:s=>e({previewCommits:s}),setIsLoadingGitData:s=>e({isLoadingGitData:s}),setIsLoadingCommits:s=>e({isLoadingCommits:s}),setGitHistoryType:s=>e({gitHistoryType:s,previewCommits:[]}),setGitHistoryCount:s=>e({gitHistoryCount:s}),setGitHistorySinceDate:s=>e({gitHistorySinceDate:s}),setGitHistoryFromTag:s=>e({gitHistoryFromTag:s}),setGitHistoryToTag:s=>e({gitHistoryToTag:s}),setGitHistorySinceVersion:s=>e({gitHistorySinceVersion:s}),setIncludeMergeCommits:s=>e({includeMergeCommits:s}),setBaseBranch:s=>e({baseBranch:s,previewCommits:[]}),setCompareBranch:s=>e({compareBranch:s,previewCommits:[]}),setVersion:s=>e({version:s}),setDate:s=>e({date:s}),setFormat:s=>{e({format:s}),Ql({changelogFormat:s})},setAudience:s=>{e({audience:s}),Ql({changelogAudience:s})},setEmojiLevel:s=>{e({emojiLevel:s}),Ql({changelogEmojiLevel:s})},setCustomInstructions:s=>e({customInstructions:s}),initializeFromSettings:()=>{const s=cs.getState().settings;e({format:s.changelogFormat||"keep-a-changelog",audience:s.changelogAudience||"user-facing",emojiLevel:s.changelogEmojiLevel||"none"})},setGenerationProgress:s=>e({generationProgress:s}),setGeneratedChangelog:s=>e({generatedChangelog:s}),setIsGenerating:s=>e({isGenerating:s}),setError:s=>e({error:s}),reset:()=>e({...p5,date:DV()}),updateGeneratedChangelog:s=>e({generatedChangelog:s})}));async function h_(e){const t=lt.getState();try{const r=Ks.getState().tasks,i=await window.electronAPI.getChangelogDoneTasks(e,r);i.success&&i.data&&t.setDoneTasks(i.data);const a=await window.electronAPI.readExistingChangelog(e);a.success&&a.data&&t.setExistingChangelog(a.data)}catch(s){t.setError(s instanceof Error?s.message:"Failed to load changelog data")}}async function B4e(e){const t=lt.getState();t.setIsLoadingGitData(!0),t.setError(null);try{const[s,r]=await Promise.all([window.electronAPI.getChangelogBranches(e),window.electronAPI.getChangelogTags(e)]);if(s.success&&s.data){t.setBranches(s.data);const i=s.data.find(o=>o.isCurrent);i&&(t.setCurrentBranch(i.name),t.compareBranch||t.setCompareBranch(i.name));const a=s.data.find(o=>o.name==="main"||o.name==="master");a&&t.setDefaultBranch(a.name)}r.success&&r.data&&(t.setTags(r.data),r.data.length>0&&!t.gitHistoryFromTag&&t.setGitHistoryFromTag(r.data[0].name),r.data.length>1&&!t.gitHistoryToTag&&t.setGitHistoryToTag(r.data[1].name),r.data.length>0&&!t.gitHistorySinceVersion&&t.setGitHistorySinceVersion(r.data[0].name))}catch(s){t.setError(s instanceof Error?s.message:"Failed to load git data")}finally{t.setIsLoadingGitData(!1)}}async function z4e(e){const t=lt.getState();t.setIsLoadingCommits(!0),t.setError(null);try{let s,r;if(t.sourceMode==="git-history")r="git-history",s={type:t.gitHistoryType,count:t.gitHistoryCount,sinceDate:t.gitHistorySinceDate||void 0,fromTag:t.gitHistoryType==="since-version"?t.gitHistorySinceVersion||void 0:t.gitHistoryFromTag||void 0,toTag:t.gitHistoryToTag||void 0,includeMergeCommits:t.includeMergeCommits};else if(t.sourceMode==="branch-diff")r="branch-diff",s={baseBranch:t.baseBranch,compareBranch:t.compareBranch};else{t.setPreviewCommits([]),t.setIsLoadingCommits(!1);return}const i=await window.electronAPI.getChangelogCommitsPreview(e,s,r);i.success&&i.data?t.setPreviewCommits(i.data):(t.setError(i.error||"Failed to load commits"),t.setPreviewCommits([]))}catch(s){t.setError(s instanceof Error?s.message:"Failed to load commits preview"),t.setPreviewCommits([])}finally{t.setIsLoadingCommits(!1)}}function $4e(e){const t=lt.getState();if(t.sourceMode==="tasks"){if(t.selectedTaskIds.length===0){t.setError("Please select at least one task to include in the changelog");return}}else if(t.sourceMode==="git-history"){if(t.previewCommits.length===0){t.setError("No commits found for the selected options. Please adjust your filters.");return}}else if(t.sourceMode==="branch-diff"){if(!t.baseBranch||!t.compareBranch){t.setError("Please select both base and compare branches");return}if(t.baseBranch===t.compareBranch){t.setError("Base and compare branches must be different");return}if(t.previewCommits.length===0){t.setError("No commits found between the selected branches");return}}t.setIsGenerating(!0),t.setError(null),t.setGenerationProgress({stage:"loading_specs",progress:0,message:t.sourceMode==="tasks"?"Loading task specifications...":"Preparing commit data..."});const s={projectId:e,sourceMode:t.sourceMode,version:t.version,date:t.date,format:t.format,audience:t.audience,emojiLevel:t.emojiLevel!=="none"?t.emojiLevel:void 0,customInstructions:t.customInstructions||void 0};t.sourceMode==="tasks"?window.electronAPI.generateChangelog({...s,taskIds:t.selectedTaskIds}):t.sourceMode==="git-history"?window.electronAPI.generateChangelog({...s,gitHistory:{type:t.gitHistoryType,count:t.gitHistoryCount,sinceDate:t.gitHistorySinceDate||void 0,fromTag:t.gitHistoryType==="since-version"?t.gitHistorySinceVersion||void 0:t.gitHistoryFromTag||void 0,toTag:t.gitHistoryToTag||void 0,includeMergeCommits:t.includeMergeCommits}}):t.sourceMode==="branch-diff"&&window.electronAPI.generateChangelog({...s,branchDiff:{baseBranch:t.baseBranch,compareBranch:t.compareBranch}})}async function H4e(e,t="prepend"){const s=lt.getState();if(!s.generatedChangelog)return s.setError("No changelog to save"),!1;try{const r=await window.electronAPI.saveChangelog({projectId:e,content:s.generatedChangelog,mode:t});return r.success?!0:(s.setError(r.error||"Failed to save changelog"),!1)}catch(r){return s.setError(r instanceof Error?r.message:"Failed to save changelog"),!1}}function U4e(){const e=lt.getState();if(!e.generatedChangelog)return e.setError("No changelog to copy"),!1;try{return navigator.clipboard.writeText(e.generatedChangelog),!0}catch{return e.setError("Failed to copy to clipboard"),!1}}function G4e(){const e=lt.getState();if(e.isGenerating)return!1;switch(e.sourceMode){case"tasks":return e.selectedTaskIds.length>0;case"git-history":return e.previewCommits.length>0;case"branch-diff":return e.baseBranch!==""&&e.compareBranch!==""&&e.baseBranch!==e.compareBranch&&e.previewCommits.length>0;default:return!1}}function V4e(){const e=Ot(ue=>ue.selectedProjectId),t=lt(ue=>ue.doneTasks),s=lt(ue=>ue.selectedTaskIds),r=lt(ue=>ue.existingChangelog),i=lt(ue=>ue.sourceMode),a=lt(ue=>ue.branches),o=lt(ue=>ue.tags),l=lt(ue=>ue.currentBranch),u=lt(ue=>ue.defaultBranch),d=lt(ue=>ue.previewCommits),m=lt(ue=>ue.isLoadingGitData),f=lt(ue=>ue.isLoadingCommits),x=lt(ue=>ue.gitHistoryType),v=lt(ue=>ue.gitHistoryCount),y=lt(ue=>ue.gitHistorySinceDate),w=lt(ue=>ue.gitHistoryFromTag),S=lt(ue=>ue.gitHistoryToTag),C=lt(ue=>ue.gitHistorySinceVersion),_=lt(ue=>ue.includeMergeCommits),j=lt(ue=>ue.baseBranch),T=lt(ue=>ue.compareBranch),E=lt(ue=>ue.version),A=lt(ue=>ue.date),R=lt(ue=>ue.format),D=lt(ue=>ue.audience),M=lt(ue=>ue.emojiLevel),P=lt(ue=>ue.customInstructions),O=lt(ue=>ue.generationProgress),F=lt(ue=>ue.generatedChangelog),$=lt(ue=>ue.isGenerating),z=lt(ue=>ue.error),H=lt(ue=>ue.toggleTaskSelection),I=lt(ue=>ue.selectAllTasks),V=lt(ue=>ue.deselectAllTasks),B=lt(ue=>ue.setSourceMode),K=lt(ue=>ue.setGitHistoryType),L=lt(ue=>ue.setGitHistoryCount),G=lt(ue=>ue.setGitHistorySinceDate),Y=lt(ue=>ue.setGitHistoryFromTag),q=lt(ue=>ue.setGitHistoryToTag),Q=lt(ue=>ue.setGitHistorySinceVersion),se=lt(ue=>ue.setIncludeMergeCommits),te=lt(ue=>ue.setBaseBranch),ee=lt(ue=>ue.setCompareBranch),pe=lt(ue=>ue.setVersion),fe=lt(ue=>ue.setDate),re=lt(ue=>ue.setFormat),Z=lt(ue=>ue.setAudience),ie=lt(ue=>ue.setEmojiLevel),ce=lt(ue=>ue.setCustomInstructions),He=lt(ue=>ue.updateGeneratedChangelog),tt=lt(ue=>ue.setError),he=lt(ue=>ue.setIsGenerating),Ne=lt(ue=>ue.setGenerationProgress),Ve=lt(ue=>ue.reset),[qe,Ze]=p.useState(1),[Ae,De]=p.useState(!1),[je,Ce]=p.useState(!1),[It,be]=p.useState(!1),[ve,Me]=p.useState(null),nt=lt(ue=>ue.initializeFromSettings);p.useEffect(()=>{nt()},[nt]),p.useEffect(()=>{e&&(h_(e),B4e(e))},[e]);const jt=p.useCallback(()=>{e&&(i==="git-history"||i==="branch-diff")&&z4e(e)},[e,i]);p.useEffect(()=>{const ue=window.electronAPI.onChangelogGenerationProgress((me,ze)=>{me===e&&Ne(ze)}),xs=window.electronAPI.onChangelogGenerationComplete((me,ze)=>{me===e&&(he(!1),ze.success?(He(ze.changelog),Ne({stage:"complete",progress:100,message:"Changelog generated successfully!"})):tt(ze.error||"Generation failed"))}),kt=window.electronAPI.onChangelogGenerationError((me,ze)=>{me===e&&(he(!1),tt(ze),Ne({stage:"error",progress:0,message:ze,error:ze}))});return()=>{ue(),xs(),kt()}},[e,tt,Ne,he,He]);const ps=()=>{e&&$4e(e)},tn=async()=>{e&&await H4e(e,"prepend")&&(Ce(!0),setTimeout(()=>{Ce(!1),Ze(3)},1e3))},Lt=()=>{U4e()&&(be(!0),setTimeout(()=>be(!1),2e3))},ds=async()=>{if(e)try{if(i==="tasks"&&s.length>0){const ue=await window.electronAPI.suggestChangelogVersion(e,s);ue.success&&ue.data&&(pe(ue.data.version),Me(ue.data.reason))}else if((i==="git-history"||i==="branch-diff")&&d.length>0){const ue=await window.electronAPI.suggestChangelogVersionFromCommits(e,d);ue.success&&ue.data&&(pe(ue.data.version),Me(ue.data.reason))}}catch(ue){console.error("Failed to suggest version:",ue),Me(null)}Ze(2)},gs=()=>{Ze(1)},Ft=async()=>{Ve(),Ze(1),e&&(await po(e),h_(e))},Be=G4e(),st=F.length>0&&!$,us=(()=>{switch(i){case"tasks":return s.length>0;case"git-history":return d.length>0;case"branch-diff":return j!==""&&T!==""&&j!==T&&d.length>0;default:return!1}})();return{selectedProjectId:e,doneTasks:t,selectedTaskIds:s,existingChangelog:r,sourceMode:i,branches:a,tags:o,currentBranch:l,defaultBranch:u,previewCommits:d,isLoadingGitData:m,isLoadingCommits:f,gitHistoryType:x,gitHistoryCount:v,gitHistorySinceDate:y,gitHistoryFromTag:w,gitHistoryToTag:S,gitHistorySinceVersion:C,includeMergeCommits:_,baseBranch:j,compareBranch:T,version:E,date:A,format:R,audience:D,emojiLevel:M,customInstructions:P,generationProgress:O,generatedChangelog:F,isGenerating:$,error:z,step:qe,showAdvanced:Ae,saveSuccess:je,copySuccess:It,versionReason:ve,canGenerate:Be,canSave:st,canContinue:us,toggleTaskSelection:H,selectAllTasks:I,deselectAllTasks:V,setSourceMode:B,setGitHistoryType:K,setGitHistoryCount:L,setGitHistorySinceDate:G,setGitHistoryFromTag:Y,setGitHistoryToTag:q,setGitHistorySinceVersion:Q,setIncludeMergeCommits:se,setBaseBranch:te,setCompareBranch:ee,setVersion:pe,setDate:fe,setFormat:re,setAudience:Z,setEmojiLevel:ie,setCustomInstructions:ce,updateGeneratedChangelog:He,setShowAdvanced:De,setStep:Ze,handleLoadCommitsPreview:jt,handleGenerate:ps,handleSave:tn,handleCopy:Lt,handleContinue:ds,handleBack:gs,handleDone:Ft,handleRefresh:()=>e&&h_(e)}}function q4e(){const{selectedProjectId:e,doneTasks:t,selectedTaskIds:s,existingChangelog:r,sourceMode:i,branches:a,tags:o,defaultBranch:l,previewCommits:u,isLoadingGitData:d,isLoadingCommits:m,gitHistoryType:f,gitHistoryCount:x,gitHistorySinceDate:v,gitHistoryFromTag:y,gitHistoryToTag:w,gitHistorySinceVersion:S,includeMergeCommits:C,baseBranch:_,compareBranch:j,version:T,date:E,format:A,audience:R,emojiLevel:D,customInstructions:M,generationProgress:P,generatedChangelog:O,isGenerating:F,error:$,step:z,showAdvanced:H,saveSuccess:I,copySuccess:V,versionReason:B,canGenerate:K,canSave:L,canContinue:G,toggleTaskSelection:Y,selectAllTasks:q,deselectAllTasks:Q,setSourceMode:se,setGitHistoryType:te,setGitHistoryCount:ee,setGitHistorySinceDate:pe,setGitHistoryFromTag:fe,setGitHistoryToTag:re,setGitHistorySinceVersion:Z,setIncludeMergeCommits:ie,setBaseBranch:ce,setCompareBranch:He,setVersion:tt,setDate:he,setFormat:Ne,setAudience:Ve,setEmojiLevel:qe,setCustomInstructions:Ze,updateGeneratedChangelog:Ae,setShowAdvanced:De,handleLoadCommitsPreview:je,handleGenerate:Ce,handleSave:It,handleCopy:be,handleContinue:ve,handleBack:Me,handleDone:nt,handleRefresh:jt}=V4e();return e?n.jsx(ul,{children:n.jsxs("div",{className:"flex h-full flex-col",children:[n.jsx(h4e,{step:z,onRefresh:jt}),z===1&&n.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[n.jsx(S4e,{sourceMode:i,onSourceModeChange:se,doneTasksCount:t.length,branches:a,tags:o,defaultBranch:l,isLoadingGitData:d,isLoadingCommits:m,gitHistoryType:f,gitHistoryCount:x,gitHistorySinceDate:v,gitHistoryFromTag:y,gitHistoryToTag:w,gitHistorySinceVersion:S,includeMergeCommits:C,onGitHistoryTypeChange:te,onGitHistoryCountChange:ee,onGitHistorySinceDateChange:pe,onGitHistoryFromTagChange:fe,onGitHistoryToTagChange:re,onGitHistorySinceVersionChange:Z,onIncludeMergeCommitsChange:ie,baseBranch:_,compareBranch:j,onBaseBranchChange:ce,onCompareBranchChange:He,onLoadCommitsPreview:je}),n.jsx(C4e,{sourceMode:i,doneTasks:t,selectedTaskIds:s,onToggleTask:Y,onSelectAll:q,onDeselectAll:Q,previewCommits:u,isLoadingCommits:m,onContinue:ve,canContinue:G})]}),z===2&&n.jsx(O4e,{sourceMode:i,selectedTaskIds:s,doneTasks:t,previewCommits:u,existingChangelog:r,version:T,versionReason:B,date:E,format:A,audience:R,emojiLevel:D,customInstructions:M,generationProgress:P,generatedChangelog:O,isGenerating:F,error:$,showAdvanced:H,saveSuccess:I,copySuccess:V,canGenerate:K,canSave:L,onBack:Me,onVersionChange:tt,onDateChange:he,onFormatChange:Ne,onAudienceChange:Ve,onEmojiLevelChange:qe,onCustomInstructionsChange:Ze,onShowAdvancedChange:De,onGenerate:Ce,onSave:It,onCopy:be,onChangelogEdit:Ae}),z===3&&e&&n.jsx(F4e,{projectId:e,version:T,selectedTaskIds:s,doneTasks:t,generatedChangelog:O,onDone:nt})]})}):n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx($n,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),n.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Project Selected"}),n.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Select a project from the sidebar to generate changelogs."})]})})}function W4e({projectId:e}){const{t}=Re(["common"]),r=Ot(Z=>Z.projects).find(Z=>Z.id===e),i=Ks(Z=>Z.tasks),[a,o]=p.useState([]),[l,u]=p.useState([]),[d,m]=p.useState(!1),[f,x]=p.useState(null),[v,y]=p.useState(null),[w,S]=p.useState(!1),[C,_]=p.useState(!1),[j,T]=p.useState(null),[E,A]=p.useState(!1),[R,D]=p.useState(null),[M,P]=p.useState(!1),[O,F]=p.useState(null),[$,z]=p.useState(!1),[H,I]=p.useState(!1),[V,B]=p.useState(null),[K,L]=p.useState(null),G=p.useCallback(async()=>{if(!(!e||!r)){m(!0),x(null);try{const[Z,ie]=await Promise.all([window.electronAPI.listWorktrees(e),window.electronAPI.listTerminalWorktrees(r.path)]);console.log("[Worktrees] Task worktrees result:",Z),console.log("[Worktrees] Terminal worktrees result:",ie),Z.success&&Z.data?o(Z.data.worktrees):x(Z.error||"Failed to load task worktrees"),ie.success&&ie.data?(console.log("[Worktrees] Setting terminal worktrees:",ie.data),u(ie.data)):console.warn("[Worktrees] Terminal worktrees fetch failed or empty:",ie)}catch(Z){console.error("[Worktrees] Error loading worktrees:",Z),x(Z instanceof Error?Z.message:"Failed to load worktrees")}finally{m(!1)}}},[e,r]);p.useEffect(()=>{G()},[G]);const Y=Z=>i.find(ie=>ie.specId===Z),q=async()=>{if(!j)return;const Z=Y(j.specName);if(!Z){x("Task not found for this worktree");return}A(!0);try{const ie=await window.electronAPI.mergeWorktree(Z.id);ie.success&&ie.data?(D(ie.data),ie.data.success&&await G()):D({success:!1,message:ie.error||"Merge failed"})}catch(ie){D({success:!1,message:ie instanceof Error?ie.message:"Merge failed"})}finally{A(!1)}},Q=async()=>{if(!O)return;const Z=Y(O.specName);if(!Z){x("Task not found for this worktree");return}z(!0);try{const ie=await window.electronAPI.discardWorktree(Z.id);ie.success?(await G(),P(!1),F(null)):x(ie.error||"Failed to delete worktree")}catch(ie){x(ie instanceof Error?ie.message:"Failed to delete worktree")}finally{z(!1)}},se=Z=>{T(Z),D(null),_(!0)},te=Z=>{F(Z),P(!0)},ee=Z=>({exists:!0,worktreePath:Z.path,branch:Z.branch,baseBranch:Z.baseBranch,commitCount:Z.commitCount,filesChanged:Z.filesChanged,additions:Z.additions,deletions:Z.deletions}),pe=(Z,ie)=>{B(Z),L(ie),I(!0)},fe=async Z=>{if(!K)return null;try{const ie=await window.electronAPI.createWorktreePR(K.id,Z);return ie.success&&ie.data?(ie.data.success&&ie.data.prUrl&&!ie.data.alreadyExists&&Ks.getState().updateTask(K.id,{status:"pr_created",metadata:{...K.metadata,prUrl:ie.data.prUrl}}),ie.data):{success:!1,error:ie.error,prUrl:void 0,alreadyExists:!1}}catch(ie){return{success:!1,error:ie instanceof Error?ie.message:void 0,prUrl:void 0,alreadyExists:!1}}},re=async()=>{if(!(!v||!r)){S(!0);try{const Z=await window.electronAPI.removeTerminalWorktree(r.path,v.name,v.hasGitBranch);Z.success?(await G(),y(null)):x(Z.error||"Failed to delete terminal worktree")}catch(Z){x(Z instanceof Error?Z.message:"Failed to delete terminal worktree")}finally{S(!1)}}};return r?n.jsxs("div",{className:"flex h-full flex-col p-6",children:[n.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[n.jsx(an,{className:"h-6 w-6"}),"Worktrees"]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage isolated workspaces for your Auto Claude tasks"})]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:G,disabled:d,children:[n.jsx(We,{className:`h-4 w-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]}),f&&n.jsx("div",{className:"mb-4 rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-destructive",children:"Error"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:f})]})]})}),d&&a.length===0&&l.length===0&&n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!d&&a.length===0&&l.length===0&&n.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[n.jsx("div",{className:"rounded-full bg-muted p-4 mb-4",children:n.jsx(an,{className:"h-8 w-8 text-muted-foreground"})}),n.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Worktrees"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-md",children:"Worktrees are created automatically when Auto Claude builds features. You can also create terminal worktrees from the Agent Terminals tab."})]}),(a.length>0||l.length>0)&&n.jsx(zt,{className:"flex-1 -mx-2",children:n.jsxs("div",{className:"space-y-6 px-2",children:[a.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),"Task Worktrees"]}),a.map(Z=>{const ie=Y(Z.specName);return n.jsxs(Le,{className:"overflow-hidden",children:[n.jsx(on,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs(ln,{className:"text-base flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4 text-info shrink-0"}),n.jsx("span",{className:"truncate",children:Z.branch})]}),ie&&n.jsx(db,{className:"mt-1 truncate",children:ie.title})]}),n.jsx(oe,{variant:"outline",className:"shrink-0 ml-2",children:Z.specName})]})}),n.jsxs(Ye,{className:"pt-0",children:[n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[n.jsx(Ms,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[Z.filesChanged," files changed"]})]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[n.jsx(Xt,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[Z.commitCount," commits ahead"]})]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-success",children:[n.jsx(fs,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:Z.additions})]}),n.jsxs("div",{className:"flex items-center gap-1.5 text-destructive",children:[n.jsx(Qb,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:Z.deletions})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-4 bg-muted/50 rounded-md p-2",children:[n.jsx("span",{className:"font-mono",children:Z.baseBranch}),n.jsx(Xt,{className:"h-3 w-3"}),n.jsx("span",{className:"font-mono text-info",children:Z.branch})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(W,{variant:"default",size:"sm",onClick:()=>se(Z),disabled:!ie,children:[n.jsx(ua,{className:"h-3.5 w-3.5 mr-1.5"}),"Merge to ",Z.baseBranch]}),ie&&n.jsxs(W,{variant:"info",size:"sm",onClick:()=>pe(Z,ie),children:[n.jsx(Js,{className:"h-3.5 w-3.5 mr-1.5"}),t("common:buttons.createPR")]}),ie?.status==="pr_created"&&ie.metadata?.prUrl&&n.jsxs(W,{variant:"info",size:"sm",onClick:()=>window.electronAPI?.openExternal(ie.metadata?.prUrl??""),children:[n.jsx(Js,{className:"h-3.5 w-3.5 mr-1.5"}),t("common:buttons.openPR")]}),n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(Z.path)},children:[n.jsx(Xr,{className:"h-3.5 w-3.5 mr-1.5"}),"Copy Path"]}),n.jsxs(W,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>te(Z),disabled:!ie,children:[n.jsx(or,{className:"h-3.5 w-3.5 mr-1.5"}),"Delete"]})]})]})]},Z.specName)})]}),l.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[n.jsx(dr,{className:"h-4 w-4"}),"Terminal Worktrees"]}),l.map(Z=>n.jsxs(Le,{className:"overflow-hidden",children:[n.jsx(on,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs(ln,{className:"text-base flex items-center gap-2",children:[n.jsx(Hf,{className:"h-4 w-4 text-amber-500 shrink-0"}),n.jsx("span",{className:"truncate",children:Z.name})]}),Z.branchName&&n.jsx(db,{className:"mt-1 truncate font-mono text-xs",children:Z.branchName})]}),Z.taskId&&n.jsx(oe,{variant:"outline",className:"shrink-0 ml-2",children:Z.taskId})]})}),n.jsxs(Ye,{className:"pt-0",children:[Z.baseBranch&&Z.branchName&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-4 bg-muted/50 rounded-md p-2",children:[n.jsx("span",{className:"font-mono",children:Z.baseBranch}),n.jsx(Xt,{className:"h-3 w-3"}),n.jsx("span",{className:"font-mono text-amber-500",children:Z.branchName})]}),Z.createdAt&&n.jsxs("div",{className:"text-xs text-muted-foreground mb-4",children:["Created ",new Date(Z.createdAt).toLocaleDateString()]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(Z.worktreePath)},children:[n.jsx(Xr,{className:"h-3.5 w-3.5 mr-1.5"}),"Copy Path"]}),n.jsxs(W,{variant:"outline",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>y(Z),children:[n.jsx(or,{className:"h-3.5 w-3.5 mr-1.5"}),"Delete"]})]})]})]},Z.name))]})]})}),n.jsx($s,{open:C,onOpenChange:_,children:n.jsxs(Bs,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(ua,{className:"h-5 w-5"}),"Merge Worktree"]}),n.jsx(ws,{children:"Merge changes from this worktree into the base branch."})]}),j&&!R&&n.jsx("div",{className:"py-4",children:n.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Source Branch"}),n.jsx("span",{className:"font-mono text-info",children:j.branch})]}),n.jsx("div",{className:"flex items-center justify-center",children:n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground rotate-90"})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:"Target Branch"}),n.jsx("span",{className:"font-mono",children:j.baseBranch})]}),n.jsx("div",{className:"border-t border-border pt-3 mt-3",children:n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:"Changes"}),n.jsxs("span",{children:[j.commitCount," commits, ",j.filesChanged," files"]})]})})]})}),R&&n.jsx("div",{className:"py-4",children:n.jsx("div",{className:`rounded-lg p-4 text-sm ${R.success?"bg-success/10 border border-success/30":"bg-destructive/10 border border-destructive/30"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[R.success?n.jsx(Pt,{className:"h-4 w-4 text-success mt-0.5"}):n.jsx(Ss,{className:"h-4 w-4 text-destructive mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:`font-medium ${R.success?"text-success":"text-destructive"}`,children:R.success?"Merge Successful":"Merge Failed"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:R.message}),R.conflictFiles&&R.conflictFiles.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("p",{className:"text-xs font-medium",children:"Conflicting files:"}),n.jsx("ul",{className:"list-disc list-inside text-xs mt-1",children:R.conflictFiles.map(Z=>n.jsx("li",{className:"font-mono",children:Z},Z))})]})]})]})})}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:()=>{_(!1),D(null)},children:R?"Close":"Cancel"}),!R&&n.jsx(W,{onClick:q,disabled:E,children:E?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Merging..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ua,{className:"h-4 w-4 mr-2"}),"Merge"]})})]})]})}),n.jsx(Kr,{open:M,onOpenChange:P,children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:"Delete Worktree?"}),n.jsxs(Lr,{children:["This will permanently delete the worktree and all uncommitted changes.",O&&n.jsx("span",{className:"block mt-2 font-mono text-sm",children:O.branch}),"This action cannot be undone."]})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:$,children:"Cancel"}),n.jsx(pi,{onClick:Q,disabled:$,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:$?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})}),n.jsx(Kr,{open:!!v,onOpenChange:Z=>!Z&&y(null),children:n.jsxs(Rr,{children:[n.jsxs(Dr,{children:[n.jsx(Mr,{children:"Delete Terminal Worktree?"}),n.jsxs(Lr,{children:["This will permanently delete the worktree and its branch. Any uncommitted changes will be lost.",v&&n.jsxs("span",{className:"block mt-2 font-mono text-sm",children:[v.name,v.branchName&&n.jsxs("span",{className:"text-muted-foreground",children:[" (",v.branchName,")"]})]})]})]}),n.jsxs(Ir,{children:[n.jsx(Yr,{disabled:w,children:"Cancel"}),n.jsx(pi,{onClick:re,disabled:w,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:w?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(or,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})}),K&&V&&n.jsx(AU,{open:H,task:K,worktreeStatus:ee(V),onOpenChange:I,onCreatePR:fe})]}):n.jsx("div",{className:"flex h-full items-center justify-center",children:n.jsx("p",{className:"text-muted-foreground",children:"Select a project to view worktrees"})})}function K4e({open:e,onOpenChange:t,server:s,existingIds:r,onSave:i}){const{t:a}=Re(["settings","common"]),o=s!==null,[l,u]=p.useState({id:"",name:"",type:"command",command:"npx",args:[],url:"",headers:{},description:""}),[d,m]=p.useState(""),[f,x]=p.useState(""),[v,y]=p.useState(""),[w,S]=p.useState(""),[C,_]=p.useState(!1),[j,T]=p.useState(null),E=p.useMemo(()=>{const O=l.url?.toLowerCase()||"";return O.includes("github")?{provider:"GitHub",icon:qr,message:a("mcp.hints.github"),link:"https://github.com/settings/tokens",linkText:a("mcp.hints.createGithubPat")}:O.includes("google")||O.includes("googleapis")?{provider:"Google",icon:wn,message:a("mcp.hints.google"),link:"https://console.cloud.google.com/apis/credentials",linkText:a("mcp.hints.createGoogleToken")}:O.includes("anthropic")?{provider:"Anthropic",icon:wn,message:a("mcp.hints.anthropic"),link:"https://console.anthropic.com/settings/keys",linkText:a("mcp.hints.createAnthropicKey")}:O.includes("openai")?{provider:"OpenAI",icon:wn,message:a("mcp.hints.openai"),link:"https://platform.openai.com/api-keys",linkText:a("mcp.hints.createOpenaiKey")}:null},[l.url,a]);p.useEffect(()=>{if(e&&s){u(s),m(s.args?.join(" ")||"");const O=s.headers?.Authorization||s.headers?.authorization||"";O.toLowerCase().startsWith("bearer ")?S(O.substring(7)):S("");const F=Object.keys(s.headers||{}).some($=>$.toLowerCase()!=="authorization");_(F),T(null)}else e&&(u({id:"",name:"",type:"command",command:"npx",args:[],url:"",headers:{},description:""}),m(""),S(""),_(!1),T(null));x(""),y("")},[e,s]);const A=O=>O.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),R=()=>{if(!l.name.trim()){T(a("mcp.errorNameRequired"));return}const O=o?l.id:A(l.name);if(!o&&r.includes(O)){T(a("mcp.errorIdExists"));return}if(l.type==="command"&&!l.command?.trim()){T(a("mcp.errorCommandRequired"));return}if(l.type==="http"&&!l.url?.trim()){T(a("mcp.errorUrlRequired"));return}const F={};if(l.type==="http"){if(l.headers)for(const[z,H]of Object.entries(l.headers))w&&z.toLowerCase()==="authorization"||(F[z]=H);w.trim()&&(F.Authorization=`Bearer ${w.trim()}`)}const $={id:O,name:l.name.trim(),type:l.type,description:l.description?.trim()||void 0,...l.type==="command"?{command:l.command,args:d.split(" ").filter(Boolean)}:{url:l.url,headers:Object.keys(F).length>0?F:void 0}};i($),t(!1)},D=()=>{f.trim()&&v.trim()&&(u(O=>({...O,headers:{...O.headers,[f.trim()]:v.trim()}})),x(""),y(""))},M=O=>{u(F=>{const $={...F.headers};return delete $[O],{...F,headers:$}})},P=l.name.trim()&&(l.type==="command"&&l.command?.trim()||l.type==="http"&&l.url?.trim());return n.jsx($s,{open:e,onOpenChange:t,children:n.jsxs(Bs,{className:"sm:max-w-lg",children:[n.jsxs(os,{children:[n.jsx(ls,{children:a(o?"mcp.editCustomServer":"mcp.addCustomServer")}),n.jsx(ws,{children:a("mcp.customServerDescription")})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[j&&n.jsx("div",{className:"text-sm text-destructive bg-destructive/10 px-3 py-2 rounded",children:j}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{children:a("mcp.serverType")}),n.jsxs(EA,{value:l.type,onValueChange:O=>u(F=>({...F,type:O})),className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xu,{value:"command",id:"type-command"}),n.jsxs(le,{htmlFor:"type-command",className:"flex items-center gap-1.5 cursor-pointer",children:[n.jsx(dr,{className:"h-3.5 w-3.5"}),a("mcp.typeCommand")]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xu,{value:"http",id:"type-http"}),n.jsxs(le,{htmlFor:"type-http",className:"flex items-center gap-1.5 cursor-pointer",children:[n.jsx(wn,{className:"h-3.5 w-3.5"}),a("mcp.typeHttp")]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"name",children:a("mcp.serverName")}),n.jsx(Oe,{id:"name",value:l.name,onChange:O=>{u(F=>({...F,name:O.target.value})),T(null)},placeholder:a("mcp.serverNamePlaceholder")}),!o&&l.name&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",A(l.name)||"..."]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"description",children:[a("mcp.serverDescription")," ",n.jsxs("span",{className:"text-muted-foreground",children:["(",a("common:optional"),")"]})]}),n.jsx(Oe,{id:"description",value:l.description||"",onChange:O=>u(F=>({...F,description:O.target.value})),placeholder:a("mcp.serverDescriptionPlaceholder")})]}),l.type==="command"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"command",children:a("mcp.command")}),n.jsx(Oe,{id:"command",value:l.command||"",onChange:O=>{u(F=>({...F,command:O.target.value})),T(null)},placeholder:"npx"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"args",children:a("mcp.args")}),n.jsx(Oe,{id:"args",value:d,onChange:O=>m(O.target.value),placeholder:"-y @myorg/my-mcp-server"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:a("mcp.argsHint")})]})]}),l.type==="http"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"url",children:a("mcp.url")}),n.jsx(Oe,{id:"url",value:l.url||"",onChange:O=>{u(F=>({...F,url:O.target.value})),T(null)},placeholder:"https://mcp.example.com/mcp"})]}),E&&n.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted/50 rounded-lg border border-border",children:[n.jsx(E.icon,{className:"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:E.message}),n.jsxs("a",{href:E.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-primary hover:underline mt-1",onClick:O=>{O.preventDefault(),window.electronAPI?.openExternal(E.link)},children:[E.linkText,n.jsx(Zt,{className:"h-3 w-3"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(le,{htmlFor:"bearerToken",children:[a("mcp.authToken")," ",n.jsxs("span",{className:"text-muted-foreground",children:["(",a("common:optional"),")"]})]}),n.jsx(Oe,{id:"bearerToken",value:w,onChange:O=>S(O.target.value),placeholder:a("mcp.authTokenPlaceholder"),type:"password"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:a("mcp.authTokenHint")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{type:"button",onClick:()=>_(!C),className:"flex items-center gap-1 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[n.jsx("span",{className:`transition-transform ${C?"rotate-90":""}`,children:""}),a("mcp.advancedHeaders")]}),C&&n.jsxs("div",{className:"pl-4 space-y-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Oe,{value:f,onChange:O=>x(O.target.value),placeholder:a("mcp.headerName"),className:"flex-1"}),n.jsx(Oe,{value:v,onChange:O=>y(O.target.value),placeholder:a("mcp.headerValue"),className:"flex-1",type:"password"}),n.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:D,disabled:!f.trim()||!v.trim(),children:a("common:add")})]}),Object.entries(l.headers||{}).filter(([O])=>O.toLowerCase()!=="authorization").length>0&&n.jsx("div",{className:"space-y-1 mt-2",children:Object.entries(l.headers||{}).filter(([O])=>O.toLowerCase()!=="authorization").map(([O,F])=>n.jsxs("div",{className:"flex items-center justify-between text-sm bg-muted px-2 py-1 rounded",children:[n.jsxs("span",{children:[n.jsxs("span",{className:"font-medium",children:[O,":"]})," ",n.jsx("span",{className:"text-muted-foreground",children:F.length>20?`${F.substring(0,20)}...`:F})]}),n.jsx("button",{onClick:()=>M(O),className:"text-muted-foreground hover:text-destructive transition-colors",children:n.jsx(Ss,{className:"h-3 w-3"})})]},O))})]})]})]})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:()=>t(!1),children:a("common:cancel")}),n.jsx(W,{onClick:R,disabled:!P,children:a(o?"common:save":"mcp.addServer")})]})]})})}const Hu=new Map;let el=null,pp=null;function TC(){if(Hu.size===0||!pp)return;const e=performance.now(),t=Hu.size;let s=0,r=0;const i=pp;if(Di.unstable_batchedUpdates(()=>{Hu.forEach((a,o)=>{a.plan&&(i.updateTaskFromPlan(o,a.plan),s++),a.status&&(i.updateTaskStatus(o,a.status),s++),a.progress&&(i.updateExecutionProgress(o,a.progress),s++),a.logs&&a.logs.length>0&&(i.batchAppendLogs(o,a.logs),r+=a.logs.length,s++)})}),window.DEBUG){const a=performance.now()-e;console.warn(`[IPC Batch] Flushed ${s} updates (${r} logs) for ${t} tasks in ${a.toFixed(2)}ms`)}Hu.clear(),el=null}function sv(e,t){const s=Hu.get(e)||{};if(t.progress?.phase&&pp){const i=s.progress?.phase||Ks.getState().tasks.find(a=>a.id===e||a.specId===e)?.executionProgress?.phase;if(t.progress.phase!==i){el&&(clearTimeout(el),el=null,TC()),window.DEBUG&&console.warn(`[IPC Batch] Phase change detected: ${i}  ${t.progress.phase}, applying immediately`),pp.updateExecutionProgress(e,t.progress);return}}let r=s.logs;t.logs&&(r=[...s.logs||[],...t.logs]),Hu.set(e,{...s,...t,logs:r,queuedAt:s.queuedAt||performance.now()}),el||(el=setTimeout(TC,16))}function lf(e){if(!e)return!0;const t=Ot.getState().selectedProjectId;return t?t===e:!0}function Y4e(){const e=Ks(o=>o.updateTaskFromPlan),t=Ks(o=>o.updateTaskStatus),s=Ks(o=>o.updateExecutionProgress),r=Ks(o=>o.appendLog),i=Ks(o=>o.batchAppendLogs),a=Ks(o=>o.setError);pp={updateTaskStatus:t,updateExecutionProgress:s,updateTaskFromPlan:e,batchAppendLogs:i},p.useEffect(()=>{const o=window.electronAPI.onTaskProgress((T,E,A)=>{lf(A)&&sv(T,{plan:E})}),l=window.electronAPI.onTaskError((T,E,A)=>{lf(A)&&(a(`Task ${T}: ${E}`),r(T,`[ERROR] ${E}`))}),u=window.electronAPI.onTaskLog((T,E,A)=>{lf(A)&&sv(T,{logs:[E]})}),d=window.electronAPI.onTaskStatusChange((T,E,A)=>{lf(A)&&sv(T,{status:E})}),m=window.electronAPI.onTaskExecutionProgress((T,E,A)=>{lf(A)&&sv(T,{progress:E})}),f=T=>qs.getState().currentProjectId===T,x=window.electronAPI.onRoadmapProgress((T,E)=>{window.DEBUG&&console.warn("[Roadmap] Progress update:",{projectId:T,currentProjectId:qs.getState().currentProjectId,phase:E.phase,progress:E.progress,message:E.message}),f(T)&&qs.getState().setGenerationStatus(E)}),v=window.electronAPI.onRoadmapComplete((T,E)=>{window.DEBUG&&console.warn("[Roadmap] Generation complete:",{projectId:T,currentProjectId:qs.getState().currentProjectId,featuresCount:E.features?.length||0,phasesCount:E.phases?.length||0}),f(T)&&(qs.getState().setRoadmap(E),qs.getState().setGenerationStatus({phase:"complete",progress:100,message:"Roadmap ready"}))}),y=window.electronAPI.onRoadmapError((T,E)=>{window.DEBUG&&console.error("[Roadmap] Error received:",{projectId:T,currentProjectId:qs.getState().currentProjectId,error:E}),f(T)&&qs.getState().setGenerationStatus({phase:"error",progress:0,message:"Generation failed",error:E})}),w=window.electronAPI.onRoadmapStopped(T=>{window.DEBUG&&console.warn("[Roadmap] Generation stopped:",{projectId:T,currentProjectId:qs.getState().currentProjectId}),f(T)&&qs.getState().setGenerationStatus({phase:"idle",progress:0,message:"Generation stopped"})}),S=Xf.getState().showRateLimitModal,C=window.electronAPI.onTerminalRateLimit(T=>{S({...T,detectedAt:typeof T.detectedAt=="string"?new Date(T.detectedAt):T.detectedAt})}),_=Xf.getState().showSDKRateLimitModal,j=window.electronAPI.onSDKRateLimit(T=>{_({...T,detectedAt:typeof T.detectedAt=="string"?new Date(T.detectedAt):T.detectedAt})});return()=>{el&&(clearTimeout(el),TC(),el=null),o(),l(),u(),d(),m(),x(),v(),y(),w(),C(),j()}},[e,t,s,r,i,a])}function X4e(e){return p.useMemo(()=>{const t=e.selectedAgentProfile||"auto",s=ar.find(d=>d.id===t)||ar[0],r=s.phaseModels||oa,i=s.phaseThinking||la,a=e.customPhaseModels||r,o=e.customPhaseThinking||i,l=e.featureModels||P5,u=e.featureThinking||R5;return{phaseModels:a,phaseThinking:o,featureModels:l,featureThinking:u}},[e.selectedAgentProfile,e.customPhaseModels,e.customPhaseThinking,e.featureModels,e.featureThinking])}function Z4e(e,t){return e.type==="phase"?{model:t.phaseModels[e.phase],thinking:t.phaseThinking[e.phase]}:e.type==="feature"?{model:t.featureModels[e.feature],thinking:t.featureThinking[e.feature]}:{model:e.model,thinking:e.thinking}}function Q4e(e){return ca.find(s=>s.value===e)?.label.replace("Claude ","")||e}function J4e(e){return ld.find(s=>s.value===e)?.label||e}const g5={spec_gatherer:{label:"Spec Gatherer",description:"Collects initial requirements from user",category:"spec",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:[],settingsSource:{type:"phase",phase:"spec"}},spec_researcher:{label:"Spec Researcher",description:"Validates external integrations and APIs",category:"spec",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:["context7"],settingsSource:{type:"phase",phase:"spec"}},spec_writer:{label:"Spec Writer",description:"Creates the spec.md document",category:"spec",tools:["Read","Glob","Grep","Write","Edit","Bash"],mcp_servers:[],settingsSource:{type:"phase",phase:"spec"}},spec_critic:{label:"Spec Critic",description:"Self-critique using deep analysis",category:"spec",tools:["Read","Glob","Grep"],mcp_servers:[],settingsSource:{type:"phase",phase:"spec"}},spec_discovery:{label:"Spec Discovery",description:"Initial project discovery and analysis",category:"spec",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:[],settingsSource:{type:"phase",phase:"spec"}},spec_context:{label:"Spec Context",description:"Builds context from existing codebase",category:"spec",tools:["Read","Glob","Grep"],mcp_servers:[],settingsSource:{type:"phase",phase:"spec"}},spec_validation:{label:"Spec Validation",description:"Validates spec completeness and quality",category:"spec",tools:["Read","Glob","Grep"],mcp_servers:[],settingsSource:{type:"phase",phase:"spec"}},planner:{label:"Planner",description:"Creates implementation plan with subtasks",category:"build",tools:["Read","Glob","Grep","Write","Edit","Bash","WebFetch","WebSearch"],mcp_servers:["context7","graphiti-memory","auto-claude"],mcp_optional:["linear"],settingsSource:{type:"phase",phase:"planning"}},coder:{label:"Coder",description:"Implements individual subtasks",category:"build",tools:["Read","Glob","Grep","Write","Edit","Bash","WebFetch","WebSearch"],mcp_servers:["context7","graphiti-memory","auto-claude"],mcp_optional:["linear"],settingsSource:{type:"phase",phase:"coding"}},qa_reviewer:{label:"QA Reviewer",description:"Validates acceptance criteria. Uses Electron or Puppeteer based on project type.",category:"qa",tools:["Read","Glob","Grep","Bash","WebFetch","WebSearch"],mcp_servers:["context7","graphiti-memory","auto-claude"],mcp_optional:["linear","electron","puppeteer"],settingsSource:{type:"phase",phase:"qa"}},qa_fixer:{label:"QA Fixer",description:"Fixes QA-reported issues. Uses Electron or Puppeteer based on project type.",category:"qa",tools:["Read","Glob","Grep","Write","Edit","Bash","WebFetch","WebSearch"],mcp_servers:["context7","graphiti-memory","auto-claude"],mcp_optional:["linear","electron","puppeteer"],settingsSource:{type:"phase",phase:"qa"}},pr_reviewer:{label:"PR Reviewer",description:"Reviews GitHub pull requests",category:"utility",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:["context7"],settingsSource:{type:"feature",feature:"githubPrs"}},commit_message:{label:"Commit Message",description:"Generates commit messages",category:"utility",tools:[],mcp_servers:[],settingsSource:{type:"feature",feature:"utility"}},merge_resolver:{label:"Merge Resolver",description:"Resolves merge conflicts",category:"utility",tools:[],mcp_servers:[],settingsSource:{type:"feature",feature:"utility"}},insights:{label:"Insights",description:"Extracts code insights",category:"utility",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:[],settingsSource:{type:"feature",feature:"insights"}},analysis:{label:"Analysis",description:"Codebase analysis with context lookup",category:"utility",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:["context7"],settingsSource:{type:"feature",feature:"insights"}},batch_analysis:{label:"Batch Analysis",description:"Batch processing of issues or items",category:"utility",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:[],settingsSource:{type:"feature",feature:"githubIssues"}},ideation:{label:"Ideation",description:"Generates feature ideas",category:"ideation",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:[],settingsSource:{type:"feature",feature:"ideation"}},roadmap_discovery:{label:"Roadmap Discovery",description:"Discovers roadmap items",category:"ideation",tools:["Read","Glob","Grep","WebFetch","WebSearch"],mcp_servers:["context7"],settingsSource:{type:"feature",feature:"roadmap"}}},eLe={context7:{name:"Context7",description:"Documentation lookup for libraries and frameworks via @upstash/context7-mcp",icon:Nr,tools:["mcp__context7__resolve-library-id","mcp__context7__get-library-docs"]},"graphiti-memory":{name:"Graphiti Memory",description:"Knowledge graph for cross-session context. Requires GRAPHITI_MCP_URL env var.",icon:Bi,tools:["mcp__graphiti-memory__search_nodes","mcp__graphiti-memory__search_facts","mcp__graphiti-memory__add_episode","mcp__graphiti-memory__get_episodes","mcp__graphiti-memory__get_entity_edge"]},"auto-claude":{name:"Auto-Claude Tools",description:"Build progress tracking, session context, discoveries & gotchas recording",icon:Xb,tools:["mcp__auto-claude__update_subtask_status","mcp__auto-claude__get_build_progress","mcp__auto-claude__record_discovery","mcp__auto-claude__record_gotcha","mcp__auto-claude__get_session_context","mcp__auto-claude__update_qa_status"]},linear:{name:"Linear",description:"Project management via Linear API. Requires LINEAR_API_KEY env var.",icon:X3,tools:["mcp__linear-server__list_teams","mcp__linear-server__list_projects","mcp__linear-server__list_issues","mcp__linear-server__create_issue","mcp__linear-server__update_issue"]},electron:{name:"Electron MCP",description:"Desktop app automation via Chrome DevTools Protocol. Requires ELECTRON_MCP_ENABLED=true.",icon:_h,tools:["mcp__electron__get_electron_window_info","mcp__electron__take_screenshot","mcp__electron__send_command_to_electron","mcp__electron__read_electron_logs"]},puppeteer:{name:"Puppeteer MCP",description:"Web browser automation for non-Electron web frontends.",icon:wn,tools:["mcp__puppeteer__puppeteer_connect_active_tab","mcp__puppeteer__puppeteer_navigate","mcp__puppeteer__puppeteer_screenshot","mcp__puppeteer__puppeteer_click","mcp__puppeteer__puppeteer_fill","mcp__puppeteer__puppeteer_select","mcp__puppeteer__puppeteer_hover","mcp__puppeteer__puppeteer_evaluate"]}},tLe=["context7","graphiti-memory","linear","electron","puppeteer","auto-claude"],IV={spec:{label:"Spec Creation",icon:J3},build:{label:"Build",icon:lr},qa:{label:"QA",icon:Xe},utility:{label:"Utility",icon:uo},ideation:{label:"Ideation",icon:zi}};function sLe({id:e,config:t,modelLabel:s,thinkingLabel:r,overrides:i,mcpServerStates:a,customServers:o,onAddMcp:l,onRemoveMcp:u}){const[d,m]=p.useState(!1),[f,x]=p.useState(!1),{t:v}=Re(["settings"]),w=IV[t.category].icon,S=p.useMemo(()=>{const R={...eLe};for(const D of o)R[D.id]={name:D.name,description:D.description||(D.type==="command"?`${D.command} ${D.args?.join(" ")||""}`:D.url||""),icon:D.type==="command"?dr:wn};return R},[o]),C=p.useMemo(()=>{const R=[...t.mcp_servers,...t.mcp_optional||[]],D=i?.add||[],M=i?.remove||[];return[...new Set([...R,...D])].filter(O=>!M.includes(O)).filter(O=>{if(!a||o.some(F=>F.id===O))return!0;switch(O){case"context7":return a.context7Enabled!==!1;case"graphiti-memory":return a.graphitiEnabled!==!1;case"linear":return a.linearMcpEnabled!==!1;case"electron":return a.electronEnabled!==!1;case"puppeteer":return a.puppeteerEnabled!==!1;default:return!0}})},[t,i,a,o]),_=R=>![...t.mcp_servers,...t.mcp_optional||[]].includes(R)&&(i?.add||[]).includes(R),j=p.useMemo(()=>[...t.mcp_servers,...t.mcp_optional||[]].filter(D=>(i?.remove||[]).includes(D)),[t,i]),T=o.map(R=>R.id),A=[...tLe,...T].filter(R=>!C.includes(R)&&!j.includes(R)&&R!=="auto-claude");return n.jsxs("div",{className:"border border-border rounded-lg bg-card overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>m(!d),className:"w-full flex items-center gap-3 p-4 hover:bg-muted/50 transition-colors text-left",children:[n.jsx("div",{className:"p-2 rounded-lg bg-muted",children:n.jsx(w,{className:"h-4 w-4 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h3",{className:"font-medium text-sm text-foreground",children:t.label}),n.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium bg-secondary text-secondary-foreground",children:s}),n.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-medium bg-secondary text-secondary-foreground",children:r})]}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.description})]}),n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsxs("span",{className:"text-xs",children:[C.length," MCP"]}),d?n.jsx(bt,{className:"h-4 w-4"}):n.jsx(Xt,{className:"h-4 w-4"})]})]}),d&&n.jsxs("div",{className:"border-t border-border p-4 space-y-4 bg-muted/30",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"MCP Servers"}),A.length>0&&n.jsxs("button",{type:"button",onClick:R=>{R.stopPropagation(),x(!0)},className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors",children:[n.jsx(fs,{className:"h-3 w-3"}),v("mcp.addServer")]})]}),C.length>0||j.length>0?n.jsxs("div",{className:"space-y-2",children:[C.map(R=>{const D=S[R],M=D?.icon||so,P=_(R),O=R!=="auto-claude";return n.jsxs("div",{className:"flex items-center justify-between group",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Xe,{className:"h-3.5 w-3.5 text-emerald-500"}),n.jsx(M,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:D?.name||R}),P&&n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 bg-primary/10 text-primary rounded",children:v("mcp.added")})]}),O&&n.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),u(e,R)},className:"opacity-0 group-hover:opacity-100 p-1 text-muted-foreground hover:text-destructive transition-all",title:v("mcp.remove"),children:n.jsx(Ss,{className:"h-3.5 w-3.5"})})]},R)}),j.map(R=>{const D=S[R],M=D?.icon||so;return n.jsxs("div",{className:"flex items-center justify-between group opacity-50",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm line-through",children:[n.jsx(yo,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx(M,{className:"h-3.5 w-3.5 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:D?.name||R}),n.jsxs("span",{className:"text-[10px] text-muted-foreground no-underline",children:["(",v("mcp.removed"),")"]})]}),n.jsx("button",{type:"button",onClick:P=>{P.stopPropagation(),l(e,R)},className:"opacity-0 group-hover:opacity-100 p-1 text-muted-foreground hover:text-primary transition-all",title:v("mcp.restore"),children:n.jsx(wo,{className:"h-3.5 w-3.5"})})]},R)})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:v("mcp.noMcpServers")})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2",children:"Available Tools"}),t.tools.length>0?n.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.tools.map(R=>n.jsx("span",{className:"px-2 py-1 bg-muted rounded text-xs font-mono",children:R},R))}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"Text-only (no tools)"})]})]}),n.jsx($s,{open:f,onOpenChange:x,children:n.jsxs(Bs,{className:"sm:max-w-md",children:[n.jsxs(os,{children:[n.jsx(ls,{children:v("mcp.addMcpTo",{agent:t.label})}),n.jsx(ws,{children:v("mcp.addMcpDescription")})]}),n.jsxs("div",{className:"space-y-2 py-4",children:[A.length>0?A.map(R=>{const D=S[R],M=D?.icon||so;return n.jsxs("button",{type:"button",onClick:()=>{l(e,R),x(!1)},className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors text-left",children:[n.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:D?.name||R}),n.jsx("div",{className:"text-xs text-muted-foreground",children:D?.description})]})]},R)}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:v("mcp.allMcpsAdded")}),j.length>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"border-t border-border my-2 pt-2",children:n.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:[v("mcp.restore"),":"]})}),j.map(R=>{const D=S[R],M=D?.icon||so;return n.jsxs("button",{type:"button",onClick:()=>{l(e,R),x(!1)},className:"w-full flex items-center gap-3 p-3 rounded-lg hover:bg-muted transition-colors text-left opacity-60",children:[n.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:D?.name||R}),n.jsx("div",{className:"text-xs text-muted-foreground",children:D?.description})]})]},R)})]})]})]})})]})}function nLe(){const{t:e}=Re(["settings"]),t=cs(B=>B.settings),s=Ot(B=>B.projects),r=Ot(B=>B.selectedProjectId),i=s.find(B=>B.id===r),[a,o]=p.useState(new Set(["spec","build","qa"])),[l,u]=p.useState(null),[,d]=p.useState(!1),[m,f]=p.useState(!1),[x,v]=p.useState(null),[y,w]=p.useState({}),[S,C]=p.useState(new Set);p.useEffect(()=>{r&&i?.autoBuildPath?(d(!0),window.electronAPI.getProjectEnv(r).then(B=>{B.success&&B.data?u(B.data):u(null)}).catch(()=>{u(null)}).finally(()=>{d(!1)})):u(null)},[r,i?.autoBuildPath]);const _=p.useCallback(async(B,K)=>{if(!r||!l)return;const L={...l.mcpServers,[B]:K};u(G=>G?{...G,mcpServers:L}:null);try{await window.electronAPI.updateProjectEnv(r,{mcpServers:L})}catch(G){console.error("Failed to update MCP config:",G),u(Y=>Y?{...Y,mcpServers:l.mcpServers}:null)}},[r,l]),j=p.useCallback(async(B,K)=>{if(!r||!l)return;const L=l.agentMcpOverrides||{},G=L[B]||{};let Y;G.remove?.includes(K)?Y={...G,remove:G.remove.filter(Q=>Q!==K)}:Y={...G,add:[...G.add||[],K].filter((Q,se,te)=>te.indexOf(Q)===se)},Y.add?.length===0&&delete Y.add,Y.remove?.length===0&&delete Y.remove;const q={...L};Object.keys(Y).length===0?delete q[B]:q[B]=Y,u(Q=>Q?{...Q,agentMcpOverrides:q}:null);try{await window.electronAPI.updateProjectEnv(r,{agentMcpOverrides:q})}catch(Q){console.error("Failed to update agent MCP config:",Q),u(se=>se?{...se,agentMcpOverrides:L}:null)}},[r,l]),T=p.useCallback(async(B,K)=>{if(!r||!l)return;const L=g5[B],Y=[...L?.mcp_servers||[],...L?.mcp_optional||[]].includes(K),q=l.agentMcpOverrides||{},Q=q[B]||{};let se;Y?se={...Q,remove:[...Q.remove||[],K].filter((ee,pe,fe)=>fe.indexOf(ee)===pe)}:se={...Q,add:(Q.add||[]).filter(ee=>ee!==K)},se.add?.length===0&&delete se.add,se.remove?.length===0&&delete se.remove;const te={...q};Object.keys(se).length===0?delete te[B]:te[B]=se,u(ee=>ee?{...ee,agentMcpOverrides:te}:null);try{await window.electronAPI.updateProjectEnv(r,{agentMcpOverrides:te})}catch(ee){console.error("Failed to update agent MCP config:",ee),u(pe=>pe?{...pe,agentMcpOverrides:q}:null)}},[r,l]),E=p.useCallback(async B=>{if(!r||!l)return;const K=l.customMcpServers||[],L=K.findIndex(Y=>Y.id===B.id);let G;L>=0?(G=[...K],G[L]=B):G=[...K,B],u(Y=>Y?{...Y,customMcpServers:G}:null);try{await window.electronAPI.updateProjectEnv(r,{customMcpServers:G})}catch(Y){console.error("Failed to save custom MCP server:",Y),u(q=>q?{...q,customMcpServers:K}:null)}},[r,l]),A=p.useCallback(async B=>{if(!r||!l)return;const K=l.customMcpServers||[],L=K.filter(q=>q.id!==B),G=l.agentMcpOverrides||{},Y={...G};for(const q of Object.keys(Y)){const Q=Y[q];Q.add?.includes(B)&&(Y[q]={...Q,add:Q.add.filter(se=>se!==B)},Y[q].add?.length===0&&delete Y[q].add,Object.keys(Y[q]).length===0&&delete Y[q])}u(q=>q?{...q,customMcpServers:L,agentMcpOverrides:Y}:null);try{await window.electronAPI.updateProjectEnv(r,{customMcpServers:L,agentMcpOverrides:Y})}catch(q){console.error("Failed to delete custom MCP server:",q),u(Q=>Q?{...Q,customMcpServers:K,agentMcpOverrides:G}:null)}},[r,l]),R=p.useCallback(async()=>{const B=l?.customMcpServers||[];if(B.length!==0)for(const K of B){w(L=>({...L,[K.id]:{serverId:K.id,status:"checking",checkedAt:new Date().toISOString()}}));try{const L=await window.electronAPI.checkMcpHealth(K);L.success&&L.data&&w(G=>({...G,[K.id]:L.data}))}catch{w(G=>({...G,[K.id]:{serverId:K.id,status:"unknown",message:"Health check failed",checkedAt:new Date().toISOString()}}))}}},[l?.customMcpServers]);p.useEffect(()=>{l?.customMcpServers&&l.customMcpServers.length>0&&R()},[l?.customMcpServers,R]);const D=p.useCallback(async B=>{C(K=>new Set(K).add(B.id));try{const K=await window.electronAPI.testMcpConnection(B);K.success&&K.data&&w(L=>({...L,[B.id]:{serverId:B.id,status:K.data.success?"healthy":"unhealthy",message:K.data.message,responseTime:K.data.responseTime,checkedAt:new Date().toISOString()}}))}catch{w(L=>({...L,[B.id]:{serverId:B.id,status:"unhealthy",message:"Connection test failed",checkedAt:new Date().toISOString()}}))}finally{C(K=>{const L=new Set(K);return L.delete(B.id),L})}},[]),{phaseModels:M,phaseThinking:P,featureModels:O,featureThinking:F}=X4e(t),$=l?.mcpServers||{},z=[$.context7Enabled!==!1,$.graphitiEnabled&&l?.graphitiProviderConfig,$.linearMcpEnabled!==!1&&l?.linearEnabled,$.electronEnabled,$.puppeteerEnabled,!0].filter(Boolean).length,H=p.useMemo(()=>B=>Z4e(B.settingsSource,{phaseModels:M,phaseThinking:P,featureModels:O,featureThinking:F}),[M,P,O,F]),I=B=>{o(K=>{const L=new Set(K);return L.has(B)?L.delete(B):L.add(B),L})},V=Object.entries(g5).reduce((B,[K,L])=>{const G=L.category;return B[G]||(B[G]=[]),B[G].push({id:K,config:L}),B},{});return n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsx("div",{className:"border-b border-border p-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-muted",children:n.jsx(so,{className:"h-5 w-5 text-muted-foreground"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"MCP Server Overview"}),i&&n.jsxs("span",{className:"text-sm text-muted-foreground",children:["for ",i.name]})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e(i?"settings:mcp.description":"settings:mcp.descriptionNoProject")})]}),l&&n.jsx("div",{className:"text-right",children:n.jsx("span",{className:"text-sm text-muted-foreground",children:e("settings:mcp.serversEnabled",{count:z})})})]})}),n.jsx(zt,{className:"flex-1",children:n.jsxs("div",{className:"p-6 space-y-6",children:[!i&&n.jsxs("div",{className:"rounded-lg border border-border bg-card p-6 text-center",children:[n.jsx(Ke,{className:"h-8 w-8 text-muted-foreground mx-auto mb-3"}),n.jsx("h2",{className:"text-sm font-medium text-foreground mb-1",children:e("settings:mcp.noProjectSelected")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e("settings:mcp.noProjectSelectedDescription")})]}),i&&!i.autoBuildPath&&n.jsxs("div",{className:"rounded-lg border border-border bg-card p-6 text-center",children:[n.jsx(_r,{className:"h-8 w-8 text-muted-foreground mx-auto mb-3"}),n.jsx("h2",{className:"text-sm font-medium text-foreground mb-1",children:e("settings:mcp.projectNotInitialized")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e("settings:mcp.projectNotInitializedDescription")})]}),l&&n.jsxs("div",{className:"rounded-lg border border-border bg-card p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-sm font-medium text-foreground",children:e("settings:mcp.configuration")}),n.jsx("span",{className:"text-xs text-muted-foreground",children:e("settings:mcp.configurationHint")})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:e("settings:mcp.servers.context7.name")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("settings:mcp.servers.context7.description")})]})]}),n.jsx(Kt,{checked:$.context7Enabled!==!1,onCheckedChange:B=>_("context7Enabled",B)})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Bi,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:e("settings:mcp.servers.graphiti.name")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l.graphitiProviderConfig?e("settings:mcp.servers.graphiti.description"):e("settings:mcp.servers.graphiti.notConfigured")})]})]}),n.jsx(Kt,{checked:$.graphitiEnabled!==!1&&!!l.graphitiProviderConfig,onCheckedChange:B=>_("graphitiEnabled",B),disabled:!l.graphitiProviderConfig})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(X3,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:e("settings:mcp.servers.linear.name")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:l.linearEnabled?e("settings:mcp.servers.linear.description"):e("settings:mcp.servers.linear.notConfigured")})]})]}),n.jsx(Kt,{checked:$.linearMcpEnabled!==!1&&l.linearEnabled,onCheckedChange:B=>_("linearMcpEnabled",B),disabled:!l.linearEnabled})]}),n.jsxs("div",{className:"pt-2",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(_r,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:e("settings:mcp.browserAutomation")})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_h,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:e("settings:mcp.servers.electron.name")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("settings:mcp.servers.electron.description")})]})]}),n.jsx(Kt,{checked:$.electronEnabled===!0,onCheckedChange:B=>_("electronEnabled",B)})]}),n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(wn,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:e("settings:mcp.servers.puppeteer.name")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:e("settings:mcp.servers.puppeteer.description")})]})]}),n.jsx(Kt,{checked:$.puppeteerEnabled===!0,onCheckedChange:B=>_("puppeteerEnabled",B)})]})]}),n.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-border opacity-60",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xb,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium",children:e("settings:mcp.servers.autoClaude.name")}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[e("settings:mcp.servers.autoClaude.description")," (",e("settings:mcp.alwaysEnabled"),")"]})]})]}),n.jsx(Kt,{checked:!0,disabled:!0})]}),n.jsxs("div",{className:"pt-4 border-t border-border",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dr,{className:"h-3 w-3 text-muted-foreground"}),n.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:e("settings:mcp.customServers")})]}),n.jsxs("button",{type:"button",onClick:()=>{v(null),f(!0)},className:"flex items-center gap-1 text-xs text-primary hover:text-primary/80 transition-colors",children:[n.jsx(fs,{className:"h-3 w-3"}),e("settings:mcp.addCustomServer")]})]}),(l.customMcpServers?.length??0)>0?n.jsx("div",{className:"space-y-2",children:l.customMcpServers?.map(B=>{const K=y[B.id],L=S.has(B.id),G=K?.status==="checking",Y=()=>{if(L||G)return n.jsx(we,{className:"h-3.5 w-3.5 text-muted-foreground animate-spin"});switch(K?.status){case"healthy":return n.jsx(Xe,{className:"h-3.5 w-3.5 text-emerald-500"});case"needs_auth":return n.jsx(ll,{className:"h-3.5 w-3.5 text-amber-500"});case"unhealthy":return n.jsx(Ke,{className:"h-3.5 w-3.5 text-destructive"});default:return n.jsx(yo,{className:"h-3.5 w-3.5 text-muted-foreground"})}};return n.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-muted/50 rounded-lg group",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Y,{}),B.type==="command"?n.jsx(dr,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(wn,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium",children:B.name}),K?.responseTime&&n.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[K.responseTime,"ms"]})]}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:K?.message||(B.type==="command"?`${B.command} ${B.args?.join(" ")||""}`:B.url)})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>D(B),disabled:L,className:"h-7 px-2 text-xs",title:"Test Connection",children:[L?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(We,{className:"h-3 w-3"}),n.jsx("span",{className:"ml-1",children:"Test"})]}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx("button",{type:"button",onClick:()=>{v(B),f(!0)},className:"p-1.5 text-muted-foreground hover:text-foreground transition-colors",title:"Edit",children:n.jsx(fl,{className:"h-3.5 w-3.5"})}),n.jsx("button",{type:"button",onClick:()=>A(B.id),className:"p-1.5 text-muted-foreground hover:text-destructive transition-colors",title:"Delete",children:n.jsx(or,{className:"h-3.5 w-3.5"})})]})]})]},B.id)})}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-3",children:e("settings:mcp.noCustomServers")})]})]})]}),Object.entries(IV).map(([B,K])=>{const L=V[B]||[];if(L.length===0)return null;const G=a.has(B),Y=K.icon;return n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{type:"button",onClick:()=>I(B),className:"flex items-center gap-2 w-full text-left hover:opacity-80 transition-opacity",children:[G?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("h2",{className:"text-sm font-semibold text-foreground",children:K.label}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",L.length," agents)"]})]}),G&&n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 pl-6",children:L.map(({id:q,config:Q})=>{const{model:se,thinking:te}=H(Q);return n.jsx(sLe,{id:q,config:Q,modelLabel:Q4e(se),thinkingLabel:J4e(te),overrides:l?.agentMcpOverrides?.[q],mcpServerStates:l?.mcpServers,customServers:l?.customMcpServers||[],onAddMcp:j,onRemoveMcp:T},q)})})]},B)})]})}),n.jsx(K4e,{open:m,onOpenChange:f,server:x,existingIds:(l?.customMcpServers||[]).map(B=>B.id),onSave:E})]})}function rLe({projects:e,onNewProject:t,onOpenProject:s,onSelectProject:r}){const{t:i}=Re(["welcome","common"]),a=[...e].sort((l,u)=>new Date(u.updatedAt).getTime()-new Date(l.updatedAt).getTime()).slice(0,10),o=l=>{const d=new Date().getTime()-new Date(l).getTime(),m=Math.floor(d/6e4),f=Math.floor(m/60),x=Math.floor(f/24);return m<1?i("common:time.justNow"):m<60?i("common:time.minutesAgo",{count:m}):f<24?i("common:time.hoursAgo",{count:f}):x<7?i("common:time.daysAgo",{count:x}):new Date(l).toLocaleDateString()};return n.jsx("div",{className:"flex h-full items-center justify-center p-8",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:i("welcome:hero.title")}),n.jsx("p",{className:"mt-3 text-muted-foreground",children:i("welcome:hero.subtitle")})]}),n.jsxs("div",{className:"flex gap-4 justify-center mb-10",children:[n.jsxs(W,{size:"lg",onClick:t,className:"gap-2 px-6",children:[n.jsx(eO,{className:"h-5 w-5"}),i("welcome:actions.newProject")]}),n.jsxs(W,{size:"lg",variant:"secondary",onClick:s,className:"gap-2 px-6",children:[n.jsx(Xr,{className:"h-5 w-5"}),i("welcome:actions.openProject")]})]}),a.length>0&&n.jsxs(Le,{className:"border border-border bg-card/50 backdrop-blur-sm",children:[n.jsx("div",{className:"p-4 pb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[n.jsx(cr,{className:"h-4 w-4"}),i("welcome:recentProjects.title")]})}),n.jsx(Rn,{}),n.jsx(zt,{className:"max-h-[320px]",children:n.jsx("div",{className:"p-2",children:a.map((l,u)=>n.jsxs("button",{onClick:()=>r(l.id),className:"w-full flex items-center gap-3 rounded-lg px-3 py-3 text-left transition-colors hover:bg-accent/50 group","aria-label":i("welcome:recentProjects.openProjectAriaLabel",{name:l.name}),children:[n.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-accent/20 text-accent-foreground shrink-0",children:n.jsx(Uf,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium text-foreground truncate",children:l.name}),l.autoBuildPath&&n.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-success/20 text-success shrink-0",children:"Initialized"})]}),n.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:l.path})]}),n.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[n.jsx("span",{className:"text-xs text-muted-foreground",children:o(l.updatedAt)}),n.jsx(Xt,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},l.id))})})]}),e.length===0&&n.jsxs(Le,{className:"border border-dashed border-border bg-card/30 p-8 text-center",children:[n.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-accent/20 mx-auto mb-4",children:n.jsx(Uf,{className:"h-6 w-6 text-accent-foreground"})}),n.jsx("h3",{className:"font-medium text-foreground mb-1",children:i("welcome:recentProjects.empty")}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:i("welcome:recentProjects.emptyDescription")})]})]})})}const iLe="https://claude.ai/upgrade";function aLe(){const{t:e}=Re("common"),{isModalOpen:t,rateLimitInfo:s,hideRateLimitModal:r,clearPendingRateLimit:i}=Xf(),{profiles:a,activeProfileId:o,isSwitching:l}=Xp(),{toast:u}=bo(),[d,m]=p.useState(null),[f,x]=p.useState(!1),[v,y]=p.useState(!1),[w,S]=p.useState(!1),[C,_]=p.useState("");p.useEffect(()=>{t&&(hc(),j(),s?.suggestedProfileId&&m(s.suggestedProfileId))},[t,s?.suggestedProfileId]),p.useEffect(()=>{t||(m(null),S(!1),_(""))},[t]);const j=async()=>{try{const H=await window.electronAPI.getAutoSwitchSettings();H.success&&H.data&&x(H.data.autoSwitchOnRateLimit)}catch(H){yr("[RateLimitModal] Failed to load auto-switch settings:",H)}},T=async H=>{y(!0);try{await window.electronAPI.updateAutoSwitchSettings({enabled:H,autoSwitchOnRateLimit:H}),x(H)}catch(I){yr("[RateLimitModal] Failed to update auto-switch settings:",I)}finally{y(!1)}},E=()=>{window.open(iLe,"_blank")},A=async()=>{if(C.trim()){S(!0);try{const H=C.trim(),I=H.toLowerCase().replace(/\s+/g,"-"),V=await window.electronAPI.saveClaudeProfile({id:`profile-${Date.now()}`,name:H,configDir:`~/.claude-profiles/${I}`,isDefault:!1,createdAt:new Date});if(V.success&&V.data){const B=await window.electronAPI.initializeClaudeProfile(V.data.id);B.success?(hc(),_(""),r(),u({title:e("rateLimit.toast.authenticating",{profileName:H}),description:e("rateLimit.toast.checkTerminal")})):u({variant:"destructive",title:e("rateLimit.toast.authStartFailed"),description:B.error||e("rateLimit.toast.tryAgain")})}}catch(H){yr("[RateLimitModal] Failed to add profile:",H),u({variant:"destructive",title:e("rateLimit.toast.addProfileFailed"),description:e("rateLimit.toast.tryAgain")})}finally{S(!1)}}},R=async()=>{if(!d||!s?.terminalId)return;await Uke(s.terminalId,d)&&i()},D=s?.profileId||o,M=a.filter(H=>H.id!==D),P=a.length>1,O=d?a.find(H=>H.id===d):null,F=a.find(H=>H.id===D),$=s?.suggestedProfileId?a.find(H=>H.id===s.suggestedProfileId):null,z=s?.autoSwitchEnabled&&$;return n.jsx($s,{open:t,onOpenChange:H=>!H&&r(),children:n.jsxs(Bs,{className:"sm:max-w-[520px]",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2 text-warning",children:[n.jsx(Ke,{className:"h-5 w-5"}),e("rateLimit.modalTitle")]}),n.jsxs(ws,{children:[e("rateLimit.modalDescription"),F&&!F.isDefault&&n.jsxs("span",{className:"text-muted-foreground",children:[" (",e("rateLimit.profile",{name:F.name}),")"]})]})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[z&&n.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-green-500/30 bg-green-500/10 p-4",children:[n.jsx(vi,{className:"h-5 w-5 text-green-500 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:e("rateLimit.autoSwitching",{name:$?.name})}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("rateLimit.autoSwitchingDescription")})]})]}),s?.resetTime&&!z&&n.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/50 p-4",children:[n.jsx(cr,{className:"h-5 w-5 text-muted-foreground shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:e("rateLimit.resetsTime",{time:s.resetTime})}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:e("rateLimit.usageRestored")})]})]}),!z&&n.jsxs("div",{className:"rounded-lg border border-accent/50 bg-accent/10 p-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[n.jsx(Qr,{className:"h-4 w-4"}),e(P?"rateLimit.switchAccount":"rateLimit.useAnotherAccount")]}),P?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:$?e("rateLimit.recommended",{name:$.name}):e("rateLimit.otherSubscriptions")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsxs(W,{variant:"outline",className:"flex-1 justify-between",children:[n.jsxs("span",{className:"truncate flex items-center gap-2",children:[O?.name||e("rateLimit.selectAccount"),d===s?.suggestedProfileId&&n.jsx(ih,{className:"h-3 w-3 text-yellow-500"})]}),n.jsx(bt,{className:"h-4 w-4 shrink-0 ml-2"})]})}),n.jsxs(La,{align:"start",className:"w-[220px] bg-popover border border-border shadow-lg",children:[M.map(H=>n.jsxs(Pn,{onClick:()=>m(H.id),className:"flex items-center justify-between",children:[n.jsxs("span",{className:"truncate flex items-center gap-2",children:[H.name,H.id===s?.suggestedProfileId&&n.jsx(ih,{className:"h-3 w-3 text-yellow-500","aria-label":"Recommended"})]}),d===H.id&&n.jsx(Pt,{className:"h-4 w-4 shrink-0"})]},H.id)),n.jsx(ma,{}),n.jsxs(Pn,{onClick:()=>{const H=document.querySelector('input[placeholder*="Account name"]');H&&H.focus()},className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(fs,{className:"h-4 w-4"}),e("rateLimit.addNewAccount")]})]})]}),n.jsx(W,{variant:"default",size:"sm",onClick:R,disabled:!d||l,className:"gap-2 shrink-0",children:l?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-4 w-4 animate-spin"}),e("rateLimit.switching")]}):n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-4 w-4"}),e("buttons.switch")]})})]}),O?.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:O.description}),M.length>0&&n.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[n.jsx(le,{htmlFor:"auto-switch",className:"text-xs text-muted-foreground cursor-pointer",children:e("rateLimit.autoSwitchOnRateLimit")}),n.jsx(Kt,{id:"auto-switch",checked:f,onCheckedChange:T,disabled:v})]})]}):n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e("rateLimit.addAnotherSubscription")}),n.jsxs("div",{className:P?"mt-4 pt-3 border-t border-border/50":"",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:e(P?"rateLimit.addAnotherAccount":"rateLimit.connectAccount")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{placeholder:e("rateLimit.accountNamePlaceholder"),value:C,onChange:H=>_(H.target.value),className:"flex-1 h-8 text-sm",onKeyDown:H=>{H.key==="Enter"&&C.trim()&&A()}}),n.jsxs(W,{variant:"outline",size:"sm",onClick:A,disabled:!C.trim()||w,className:"gap-1 shrink-0",children:[w?n.jsx(We,{className:"h-3 w-3 animate-spin"}):n.jsx(fs,{className:"h-3 w-3"}),e("buttons.add")]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e("rateLimit.willOpenLogin")})]})]}),n.jsxs("div",{className:"rounded-lg border border-primary/30 bg-primary/5 p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:e("rateLimit.upgradeTitle")}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:e("rateLimit.upgradeDescription")}),n.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",onClick:E,"aria-label":e("accessibility.upgradeSubscriptionAriaLabel"),children:[n.jsx(Zt,{className:"h-4 w-4","aria-hidden":"true"}),e("rateLimit.upgradeSubscription"),n.jsxs("span",{className:"sr-only",children:["(",e("accessibility.opensInNewWindow"),")"]})]})]})]}),n.jsx(As,{children:n.jsx(W,{variant:"outline",onClick:r,children:e(z?"buttons.continue":P?"buttons.close":"buttons.gotIt")})})]})})}const x5="https://claude.ai/upgrade";function oLe(e){switch(e){case"changelog":return"Changelog Generation";case"task":return"Task Execution";case"roadmap":return"Roadmap Generation";case"ideation":return"Ideation";case"title-generator":return"Title Generation";default:return"Claude Operation"}}function lLe(e){switch(e){case"changelog":return $n;case"task":return Uu;case"roadmap":return o1;case"ideation":return zi;default:return Ke}}function cLe(){const{isSDKModalOpen:e,sdkRateLimitInfo:t,hideSDKRateLimitModal:s,clearPendingRateLimit:r}=Xf(),{profiles:i,isSwitching:a,setSwitching:o}=Xp(),{toast:l}=bo(),{t:u}=Re("common"),[d,m]=p.useState(null),[f,x]=p.useState(!1),[v,y]=p.useState(!1),[w,S]=p.useState(!1),[C,_]=p.useState(!1),[j,T]=p.useState(""),[E,A]=p.useState(null);p.useEffect(()=>{e&&(hc(),R(),t?.suggestedProfile?.id&&m(t.suggestedProfile.id),t&&A({wasAutoSwapped:t.wasAutoSwapped??!1,swapReason:t.swapReason,swappedFrom:i.find(L=>L.id===t.profileId)?.name,swappedTo:t.swappedToProfile?.name}))},[e,t,i]),p.useEffect(()=>{e||(m(null),S(!1),_(!1),T(""))},[e]);const R=async()=>{try{const L=await window.electronAPI.getAutoSwitchSettings();L.success&&L.data&&x(L.data.autoSwitchOnRateLimit)}catch(L){yr("[SDKRateLimitModal] Failed to load auto-switch settings:",L)}},D=async L=>{y(!0);try{await window.electronAPI.updateAutoSwitchSettings({enabled:L,autoSwitchOnRateLimit:L}),x(L)}catch(G){yr("[SDKRateLimitModal] Failed to update auto-switch settings:",G)}finally{y(!1)}},M=()=>{window.open(x5,"_blank")},P=async()=>{if(j.trim()){_(!0);try{const L=j.trim(),G=L.toLowerCase().replace(/\s+/g,"-"),Y=await window.electronAPI.saveClaudeProfile({id:`profile-${Date.now()}`,name:L,configDir:`~/.claude-profiles/${G}`,isDefault:!1,createdAt:new Date});if(Y.success&&Y.data){const q=await window.electronAPI.initializeClaudeProfile(Y.data.id);q.success?(hc(),T(""),s(),l({title:u("rateLimit.toast.authenticating",{profileName:L}),description:u("rateLimit.toast.checkTerminal")})):l({variant:"destructive",title:u("rateLimit.toast.authStartFailed"),description:q.error||u("rateLimit.toast.tryAgain")})}}catch(L){yr("[SDKRateLimitModal] Failed to add profile:",L),l({variant:"destructive",title:u("rateLimit.toast.addProfileFailed"),description:u("rateLimit.toast.tryAgain")})}finally{_(!1)}}},O=async()=>{if(!(!d||!t?.projectId)){S(!0),o(!0);try{await window.electronAPI.setActiveClaudeProfile(d),(await window.electronAPI.retryWithProfile({source:t.source,projectId:t.projectId,taskId:t.taskId,profileId:d})).success&&r()}catch(L){yr("[SDKRateLimitModal] Failed to retry with profile:",L)}finally{S(!1),o(!1)}}};if(!t)return null;const F=t.profileId,$=i.filter(L=>L.id!==F),z=i.length>1,H=d?i.find(L=>L.id===d):null,I=i.find(L=>L.id===F),V=t.suggestedProfile?i.find(L=>L.id===t.suggestedProfile?.id):null,B=lLe(t.source),K=oLe(t.source);return n.jsx($s,{open:e,onOpenChange:L=>!L&&s(),children:n.jsxs(Bs,{className:"sm:max-w-[520px]",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2 text-warning",children:[n.jsx(Ke,{className:"h-5 w-5"}),u("rateLimit.sdk.title")]}),n.jsxs(ws,{className:"flex items-center gap-2",children:[n.jsx(B,{className:"h-4 w-4"}),u("rateLimit.sdk.interrupted",{source:K}),I&&n.jsxs("span",{className:"text-muted-foreground",children:[" (Profile: ",I.name,")"]})]})]}),n.jsxs("div",{className:"py-4 space-y-4",children:[n.jsx("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:E?.wasAutoSwapped?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"font-medium mb-1",children:E.swapReason==="proactive"?u("rateLimit.sdk.proactiveSwap"):u("rateLimit.sdk.reactiveSwap")}),n.jsx("p",{children:E.swapReason==="proactive"?u("rateLimit.sdk.proactiveSwapDesc",{from:E.swappedFrom,to:E.swappedTo}):u("rateLimit.sdk.reactiveSwapDesc",{from:E.swappedFrom,to:E.swappedTo})}),n.jsx("p",{className:"mt-2 text-[10px]",children:u("rateLimit.sdk.continueWithoutInterruption")})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"font-medium mb-1",children:u("rateLimit.sdk.rateLimitReached")}),n.jsxs("p",{children:[u("rateLimit.sdk.operationStopped",{account:I?.name||"your account"}),z?" "+u("rateLimit.sdk.switchBelow"):" "+u("rateLimit.sdk.addAccountToContinue")]})]})}),n.jsxs(W,{variant:"default",size:"sm",className:"gap-2 w-full",onClick:()=>window.open(x5,"_blank"),children:[n.jsx(vi,{className:"h-4 w-4"}),u("rateLimit.sdk.upgradeToProButton")]}),t.resetTime&&n.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-muted/50 p-4",children:[n.jsx(cr,{className:"h-5 w-5 text-muted-foreground shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:u("rateLimit.sdk.resetsLabel",{time:t.resetTime})}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.limitType==="weekly"?u("rateLimit.sdk.weeklyLimit"):u("rateLimit.sdk.sessionLimit")})]})]}),n.jsxs("div",{className:"rounded-lg border border-accent/50 bg-accent/10 p-4",children:[n.jsxs("h4",{className:"text-sm font-medium text-foreground mb-2 flex items-center gap-2",children:[n.jsx(Qr,{className:"h-4 w-4"}),u(z?"rateLimit.sdk.switchAccountRetry":"rateLimit.useAnotherAccount")]}),z?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:V?n.jsxs(n.Fragment,{children:["Recommended: ",n.jsx("strong",{children:V.name})," has more capacity available."]}):"Switch to another Claude account and retry the operation:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(mo,{children:[n.jsx(fo,{asChild:!0,children:n.jsxs(W,{variant:"outline",className:"flex-1 justify-between",children:[n.jsxs("span",{className:"truncate flex items-center gap-2",children:[H?.name||"Select account...",d===t.suggestedProfile?.id&&n.jsx(ih,{className:"h-3 w-3 text-yellow-500"})]}),n.jsx(bt,{className:"h-4 w-4 shrink-0 ml-2"})]})}),n.jsxs(La,{align:"start",className:"w-[220px] bg-popover border border-border shadow-lg",children:[$.map(L=>n.jsxs(Pn,{onClick:()=>m(L.id),className:"flex items-center justify-between",children:[n.jsxs("span",{className:"truncate flex items-center gap-2",children:[L.name,L.id===t.suggestedProfile?.id&&n.jsx(ih,{className:"h-3 w-3 text-yellow-500","aria-label":"Recommended"})]}),d===L.id&&n.jsx(Pt,{className:"h-4 w-4 shrink-0"})]},L.id)),n.jsx(ma,{}),n.jsxs(Pn,{onClick:()=>{const L=document.querySelector('input[placeholder*="Account name"]');L&&L.focus()},className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(fs,{className:"h-4 w-4"}),"Add new account..."]})]})]}),n.jsx(W,{variant:"default",size:"sm",onClick:O,disabled:!d||w||a,className:"gap-2 shrink-0",children:w||a?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-4 w-4 animate-spin"}),u("rateLimit.sdk.retrying")]}):n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"h-4 w-4"}),u("rateLimit.sdk.retry")]})})]}),H?.description&&n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:H.description}),$.length>0&&n.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[n.jsx(le,{htmlFor:"sdk-auto-switch",className:"text-xs text-muted-foreground cursor-pointer",children:u("rateLimit.sdk.autoSwitchRetryLabel")}),n.jsx(Kt,{id:"sdk-auto-switch",checked:f,onCheckedChange:D,disabled:v})]})]}):n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Add another Claude subscription to automatically switch when you hit rate limits."}),n.jsxs("div",{className:z?"mt-4 pt-3 border-t border-border/50":"",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:z?"Add another account:":"Connect a Claude account:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{placeholder:"Account name (e.g., Work, Personal)",value:j,onChange:L=>T(L.target.value),className:"flex-1 h-8 text-sm",onKeyDown:L=>{L.key==="Enter"&&j.trim()&&P()}}),n.jsxs(W,{variant:"outline",size:"sm",onClick:P,disabled:!j.trim()||C,className:"gap-1 shrink-0",children:[C?n.jsx(We,{className:"h-3 w-3 animate-spin"}):n.jsx(fs,{className:"h-3 w-3"}),u("rateLimit.sdk.add")]})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"This will open Claude login to authenticate the new account."})]})]}),n.jsxs("div",{className:"rounded-lg border border-primary/30 bg-primary/5 p-4",children:[n.jsx("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Upgrade for more usage"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Upgrade your Claude subscription for higher usage limits."}),n.jsxs(W,{variant:"outline",size:"sm",className:"gap-2",onClick:M,children:[n.jsx(Zt,{className:"h-4 w-4"}),"Upgrade Subscription"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 rounded-lg p-3",children:[n.jsx("p",{className:"font-medium mb-1",children:u("rateLimit.sdk.whatHappened")}),n.jsxs("p",{children:[u("rateLimit.sdk.whatHappenedDesc",{source:K.toLowerCase(),account:I?.name||"Default"}),z?" "+u("rateLimit.sdk.switchRetryOrAdd"):" "+u("rateLimit.sdk.addOrWait")]})]})]}),n.jsx(As,{children:n.jsx(W,{variant:"outline",onClick:s,children:u("rateLimit.sdk.close")})})]})})}function dLe({currentStep:e,steps:t}){return n.jsx("div",{className:"flex items-center justify-center",children:t.map((s,r)=>{const i=s.completed,a=r===e,o=r>e;return n.jsxs("div",{className:"flex items-center",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:J("flex h-10 w-10 items-center justify-center rounded-full border-2 text-sm font-semibold transition-all duration-200",i&&"border-primary bg-primary text-primary-foreground",a&&!i&&"border-primary bg-background text-primary",o&&"border-muted-foreground/40 bg-background text-muted-foreground"),children:i?n.jsx(Pt,{className:"h-5 w-5"}):n.jsx("span",{children:r+1})}),n.jsx("span",{className:J("mt-2 text-xs font-medium text-center max-w-[80px] truncate",i&&"text-primary",a&&!i&&"text-primary",o&&"text-muted-foreground"),children:s.label})]}),r<t.length-1&&n.jsx("div",{className:J("mx-2 h-0.5 w-12 transition-colors duration-200",s.completed?"bg-primary":"bg-muted-foreground/40")})]},s.id)})})}function uLe({icon:e,title:t,description:s}){return n.jsx(Le,{className:"border border-border bg-card/50 backdrop-blur-sm",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-foreground",children:t}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:s})]})]})})})}function hLe({onGetStarted:e,onSkip:t}){const{t:s}=Re("onboarding"),r=[{icon:n.jsx(Qt,{className:"h-5 w-5"}),title:s("welcome.features.aiPowered.title"),description:s("welcome.features.aiPowered.description")},{icon:n.jsx(Ms,{className:"h-5 w-5"}),title:s("welcome.features.specDriven.title"),description:s("welcome.features.specDriven.description")},{icon:n.jsx(Bi,{className:"h-5 w-5"}),title:s("welcome.features.memory.title"),description:s("welcome.features.memory.description")},{icon:n.jsx(vi,{className:"h-5 w-5"}),title:s("welcome.features.parallel.title"),description:s("welcome.features.parallel.description")}];return n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:s("welcome.title")}),n.jsx("p",{className:"mt-3 text-muted-foreground text-lg",children:s("welcome.subtitle")})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-10",children:r.map((i,a)=>n.jsx(uLe,{icon:i.icon,title:i.title,description:i.description},a))}),n.jsx("div",{className:"text-center mb-8",children:n.jsx("p",{className:"text-muted-foreground",children:s("wizard.helpText")})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(W,{size:"lg",onClick:e,className:"gap-2 px-8",children:[n.jsx(Qt,{className:"h-5 w-5"}),s("welcome.getStarted")]}),n.jsx(W,{size:"lg",variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:s("welcome.skip")})]})]})})}function v5({icon:e,title:t,description:s,onClick:r,variant:i="default","data-testid":a}){return n.jsx(Le,{"data-testid":a,className:`border border-border bg-card/50 backdrop-blur-sm cursor-pointer transition-all hover:border-primary/50 hover:shadow-md ${i==="oauth"?"hover:bg-accent/5":""}`,onClick:r,children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-foreground text-lg",children:t}),n.jsx("p",{className:"mt-2 text-sm text-muted-foreground leading-relaxed",children:s})]})]})})})}function mLe({onNext:e,onBack:t,onSkip:s,onAPIKeyPathComplete:r}){const[i,a]=p.useState(!1),o=cs(f=>f.profiles),l=p.useRef(o.length);p.useEffect(()=>{i||(l.current=o.length)},[o.length,i]);const u=()=>{e()},d=()=>{a(!0)},m=f=>{const x=l.current===0,v=o.length>0;a(f),!f&&x&&v&&r&&r()};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:n.jsx(xa,{className:"h-8 w-8 text-primary"})})}),n.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:"Choose Your Authentication Method"}),n.jsx("p",{className:"mt-3 text-muted-foreground text-lg",children:"Select how you want to authenticate with Claude. You can change this later in Settings."})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10",children:[n.jsx(v5,{icon:n.jsx(Zb,{className:"h-6 w-6"}),title:"Sign in with Anthropic",description:"Use your Anthropic account to authenticate. Simple and secure OAuth flow.",onClick:u,variant:"oauth","data-testid":"auth-option-oauth"}),n.jsx(v5,{icon:n.jsx(io,{className:"h-6 w-6"}),title:"Use Custom API Key",description:"Bring your own API key from Anthropic or a compatible API provider.  Highly experimental  may incur significant costs.",onClick:d,"data-testid":"auth-option-apikey"})]}),n.jsx("div",{className:"text-center mb-8",children:n.jsx("p",{className:"text-muted-foreground text-sm",children:"Both options provide full access to Claude Code features. Choose based on your preference."})}),n.jsx("div",{className:"flex justify-center",children:n.jsx(W,{size:"lg",variant:"ghost",onClick:s,className:"text-muted-foreground hover:text-foreground",children:"Skip for now"})})]})}),n.jsx(UU,{open:i,onOpenChange:m})]})}function fLe({onNext:e,onBack:t,onSkip:s}){const{t:r}=Re("onboarding"),{toast:i}=bo(),[a,o]=p.useState([]),[l,u]=p.useState(null),[d,m]=p.useState(!0),[f,x]=p.useState(""),[v,y]=p.useState(!1),[w,S]=p.useState(null),[C,_]=p.useState(null),[j,T]=p.useState(""),[E,A]=p.useState(null),[R,D]=p.useState(null),[M,P]=p.useState(""),[O,F]=p.useState(""),[$,z]=p.useState(!1),[H,I]=p.useState(null),[V,B]=p.useState(null),K=a.some(Z=>Z.oauthToken||Z.isDefault&&Z.configDir),L=async()=>{m(!0),B(null);try{const Z=await window.electronAPI.getClaudeProfiles();Z.success&&Z.data&&(o(Z.data.profiles),u(Z.data.activeProfileId),await hc())}catch(Z){B(Z instanceof Error?Z.message:"Failed to load profiles")}finally{m(!1)}};p.useEffect(()=>{L()},[]),$U(),p.useEffect(()=>window.electronAPI.onTerminalOAuthToken(async ie=>{ie.success&&ie.profileId&&(await L(),i({title:r("oauth.toast.authSuccess"),description:ie.email?r("oauth.toast.authSuccessWithEmail",{email:ie.email}):r("oauth.toast.authSuccessGeneric")}))}),[r,i]);const G=async()=>{if(f.trim()){y(!0),B(null);try{const Z=f.trim(),ie=Z.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");if(!ie){B("Profile name must contain at least one letter or number"),y(!1);return}const ce=await window.electronAPI.saveClaudeProfile({id:`profile-${Date.now()}`,name:Z,configDir:`~/.claude-profiles/${ie}`,isDefault:!1,createdAt:new Date});if(ce.success&&ce.data){const He=await window.electronAPI.initializeClaudeProfile(ce.data.id);He.success?(await L(),x("")):(await L(),i({variant:"destructive",title:r("oauth.toast.authStartFailed"),description:He.error||r("oauth.toast.tryAgain")}))}}catch(Z){B(Z instanceof Error?Z.message:"Failed to add profile"),i({variant:"destructive",title:r("oauth.toast.addProfileFailed"),description:r("oauth.toast.tryAgain")})}finally{y(!1)}}},Y=async Z=>{S(Z),B(null);try{(await window.electronAPI.deleteClaudeProfile(Z)).success&&await L()}catch(ie){B(ie instanceof Error?ie.message:"Failed to delete profile")}finally{S(null)}},q=Z=>{_(Z.id),T(Z.name)},Q=()=>{_(null),T("")},se=async()=>{if(!(!C||!j.trim())){B(null);try{(await window.electronAPI.renameClaudeProfile(C,j.trim())).success&&await L()}catch(Z){B(Z instanceof Error?Z.message:"Failed to rename profile")}finally{_(null),T("")}}},te=async Z=>{B(null);try{(await window.electronAPI.setActiveClaudeProfile(Z)).success&&(u(Z),await hc())}catch(ie){B(ie instanceof Error?ie.message:"Failed to set active profile")}},ee=async Z=>{A(Z),B(null);try{const ie=await window.electronAPI.initializeClaudeProfile(Z);ie.success||i({variant:"destructive",title:r("oauth.toast.authStartFailed"),description:ie.error||r("oauth.toast.tryAgain")})}catch(ie){B(ie instanceof Error?ie.message:"Failed to authenticate profile"),i({variant:"destructive",title:r("oauth.toast.authStartFailed"),description:r("oauth.toast.tryAgain")})}finally{A(null)}},pe=Z=>{R===Z?(D(null),P(""),F(""),z(!1)):(D(Z),P(""),F(""),z(!1))},fe=async Z=>{if(M.trim()){I(Z),B(null);try{const ie=await window.electronAPI.setClaudeProfileToken(Z,M.trim(),O.trim()||void 0);ie.success?(await L(),D(null),P(""),F(""),z(!1),i({title:r("oauth.toast.tokenSaved"),description:r("oauth.toast.tokenSavedDescription")})):i({variant:"destructive",title:r("oauth.toast.tokenSaveFailed"),description:ie.error||r("oauth.toast.tryAgain")})}catch(ie){B(ie instanceof Error?ie.message:"Failed to save token"),i({variant:"destructive",title:r("oauth.toast.tokenSaveFailed"),description:r("oauth.toast.tryAgain")})}finally{I(null)}}},re=()=>{e()};return n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:n.jsx(Oa,{className:"h-7 w-7"})})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:r("oauth.configureTitle")}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:r("oauth.addAccountsDesc")})]}),d&&n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!d&&n.jsxs("div",{className:"space-y-6",children:[V&&n.jsx(Le,{className:"border border-destructive/30 bg-destructive/10",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-destructive",children:V})]})})}),n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsx("div",{className:"flex-1",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:r("oauth.multiAccountInfo")})})]})})}),navigator.platform.toLowerCase().includes("mac")&&n.jsx(Le,{className:"border border-border bg-muted/30",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(ll,{className:"h-5 w-5 text-muted-foreground shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:r("oauth.keychainTitle")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("oauth.keychainDescription")})]})]})})}),n.jsxs("div",{className:"rounded-lg bg-muted/30 border border-border p-4",children:[a.length===0?n.jsx("div",{className:"rounded-lg border border-dashed border-border p-4 text-center mb-4",children:n.jsx("p",{className:"text-sm text-muted-foreground",children:r("oauth.noAccountsYet")})}):n.jsx("div",{className:"space-y-2 mb-4",children:a.map(Z=>n.jsxs("div",{className:J("rounded-lg border transition-colors",Z.id===l?"border-primary bg-primary/5":"border-border bg-background"),children:[n.jsxs("div",{className:J("flex items-center justify-between p-3",R!==Z.id&&"hover:bg-muted/50"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:J("h-7 w-7 rounded-full flex items-center justify-center text-xs font-medium shrink-0",Z.id===l?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:(C===Z.id?j:Z.name).charAt(0).toUpperCase()}),n.jsx("div",{className:"min-w-0",children:C===Z.id?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{value:j,onChange:ie=>T(ie.target.value),className:"h-7 text-sm w-40",autoFocus:!0,onKeyDown:ie=>{ie.key==="Enter"&&se(),ie.key==="Escape"&&Q()}}),n.jsx(W,{variant:"ghost",size:"icon",onClick:se,className:"h-7 w-7 text-success hover:text-success hover:bg-success/10",children:n.jsx(Pt,{className:"h-3 w-3"})}),n.jsx(W,{variant:"ghost",size:"icon",onClick:Q,className:"h-7 w-7 text-muted-foreground hover:text-foreground",children:n.jsx(Ss,{className:"h-3 w-3"})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm font-medium text-foreground",children:Z.name}),Z.isDefault&&n.jsx("span",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:r("oauth.badges.default")}),Z.id===l&&n.jsxs("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded flex items-center gap-1",children:[n.jsx(ih,{className:"h-3 w-3"}),r("oauth.badges.active")]}),Z.oauthToken||Z.isDefault&&Z.configDir?n.jsxs("span",{className:"text-xs bg-success/20 text-success px-1.5 py-0.5 rounded flex items-center gap-1",children:[n.jsx(Pt,{className:"h-3 w-3"}),r("oauth.badges.authenticated")]}):n.jsx("span",{className:"text-xs bg-warning/20 text-warning px-1.5 py-0.5 rounded",children:r("oauth.badges.needsAuth")})]}),Z.email&&n.jsx("span",{className:"text-xs text-muted-foreground",children:Z.email})]})})]}),C!==Z.id&&n.jsxs("div",{className:"flex items-center gap-1",children:[!Z.oauthToken&&n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>ee(Z.id),disabled:E===Z.id,className:"gap-1 h-7 text-xs",children:[E===Z.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(Zb,{className:"h-3 w-3"}),r("oauth.buttons.authenticate")]}),Z.id!==l&&n.jsxs(W,{variant:"outline",size:"sm",onClick:()=>te(Z.id),className:"gap-1 h-7 text-xs",children:[n.jsx(Pt,{className:"h-3 w-3"}),r("oauth.buttons.setActive")]}),n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>pe(Z.id),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:R===Z.id?"Hide token entry":"Enter token manually",children:R===Z.id?n.jsx(bt,{className:"h-3 w-3"}):n.jsx(Xt,{className:"h-3 w-3"})}),n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>q(Z),className:"h-7 w-7 text-muted-foreground hover:text-foreground",title:"Rename profile",children:n.jsx(fl,{className:"h-3 w-3"})}),!Z.isDefault&&n.jsx(W,{variant:"ghost",size:"icon",onClick:()=>Y(Z.id),disabled:w===Z.id,className:"h-7 w-7 text-destructive hover:text-destructive hover:bg-destructive/10",title:"Delete profile",children:w===Z.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(or,{className:"h-3 w-3"})})]})]}),R===Z.id&&n.jsx("div",{className:"px-3 pb-3 pt-0 border-t border-border/50 mt-0",children:n.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 mt-3 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{className:"text-xs font-medium text-muted-foreground",children:"Manual Token Entry"}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["Run ",n.jsx("code",{className:"px-1 py-0.5 bg-muted rounded font-mono text-xs",children:"claude setup-token"})," to get your token"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{type:$?"text":"password",placeholder:"sk-ant-oat01-...",value:M,onChange:ie=>P(ie.target.value),className:"pr-10 font-mono text-xs h-8"}),n.jsx("button",{type:"button",onClick:()=>z(!$),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:$?n.jsx(nr,{className:"h-3 w-3"}):n.jsx(Ws,{className:"h-3 w-3"})})]}),n.jsx(Oe,{type:"email",placeholder:"Email (optional, for display)",value:O,onChange:ie=>F(ie.target.value),className:"text-xs h-8"})]}),n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(W,{variant:"ghost",size:"sm",onClick:()=>pe(Z.id),className:"h-7 text-xs",children:"Cancel"}),n.jsxs(W,{size:"sm",onClick:()=>fe(Z.id),disabled:!M.trim()||H===Z.id,className:"h-7 text-xs gap-1",children:[H===Z.id?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(Pt,{className:"h-3 w-3"}),"Save Token"]})]})]})})]},Z.id))}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Oe,{placeholder:"Account name (e.g., Work, Personal)",value:f,onChange:Z=>x(Z.target.value),className:"flex-1 h-8 text-sm",onKeyDown:Z=>{Z.key==="Enter"&&f.trim()&&G()}}),n.jsxs(W,{onClick:G,disabled:!f.trim()||v,size:"sm",className:"gap-1 shrink-0",children:[v?n.jsx(we,{className:"h-3 w-3 animate-spin"}):n.jsx(fs,{className:"h-3 w-3"}),"Add"]})]})]}),K&&n.jsx(Le,{className:"border border-success/30 bg-success/10",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Xe,{className:"h-5 w-5 text-success shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-success",children:"You have at least one authenticated Claude account. You can continue to the next step."})]})})})]}),n.jsxs("div",{className:"flex justify-between items-center mt-10 pt-6 border-t border-border",children:[n.jsx(W,{variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:r("oauth.buttons.back")}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(W,{variant:"ghost",onClick:s,className:"text-muted-foreground hover:text-foreground",children:r("oauth.buttons.skip")}),n.jsx(W,{onClick:re,disabled:!K,children:r("oauth.buttons.continue")})]})]})]})})}function pLe({onNext:e,onBack:t,onSkip:s}){const{t:r}=Re("onboarding"),[i,a]=p.useState("loading"),[o,l]=p.useState(null),[u,d]=p.useState(!1),[m,f]=p.useState(null),[x,v]=p.useState(!1),y=p.useCallback(async()=>{a("loading"),f(null),v(!1);try{if(!window.electronAPI?.checkClaudeCodeVersion){console.warn("[ClaudeCodeStep] Version check API not available"),a("error"),f("Version check API not available");return}const j=await window.electronAPI.checkClaudeCodeVersion();j.success&&j.data?(l(j.data),j.data.installed?j.data.isOutdated?a("outdated"):a("installed"):a("not-found")):(a("error"),f(j.error||"Failed to check version"))}catch(j){console.error("Failed to check Claude Code version:",j),a("error"),f(j instanceof Error?j.message:"Unknown error")}},[]);p.useEffect(()=>{y()},[y]);const w=async()=>{d(!0),f(null);try{if(!window.electronAPI?.installClaudeCode){f("Install API not available");return}const j=await window.electronAPI.installClaudeCode();j.success?(v(!0),setTimeout(()=>{y()},5e3)):f(j.error||"Failed to start installation")}catch(j){f(j instanceof Error?j.message:"Unknown error")}finally{d(!1)}},S=()=>{switch(i){case"loading":return n.jsx(we,{className:"h-6 w-6 animate-spin text-muted-foreground"});case"installed":return n.jsx(Pt,{className:"h-6 w-6 text-green-500"});case"outdated":return n.jsx(Tt,{className:"h-6 w-6 text-yellow-500"});case"not-found":return n.jsx(Ss,{className:"h-6 w-6 text-destructive"});case"error":return n.jsx(Tt,{className:"h-6 w-6 text-destructive"})}},C=()=>{switch(i){case"loading":return r("claudeCode.detecting","Checking Claude Code installation...");case"installed":return r("claudeCode.status.installed","Installed");case"outdated":return r("claudeCode.status.outdated","Update Available");case"not-found":return r("claudeCode.status.notFound","Not Installed");case"error":return m||"Error checking status"}},_=()=>{switch(i){case"installed":return"text-green-500";case"outdated":return"text-yellow-500";case"not-found":case"error":return"text-destructive";default:return"text-muted-foreground"}};return n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:n.jsx(dr,{className:"h-7 w-7"})})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:r("claudeCode.title","Claude Code CLI")}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:r("claudeCode.description","Install or update the Claude Code CLI to enable AI-powered features")})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:r("claudeCode.info.title","What is Claude Code?")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r("claudeCode.info.description","Claude Code is Anthropic's official CLI that powers Auto Claude's AI features. It provides secure authentication and direct access to Claude models.")})]})]})})}),n.jsx(Le,{className:`border ${i==="installed"?"border-green-500/30 bg-green-500/5":i==="outdated"?"border-yellow-500/30 bg-yellow-500/5":i==="not-found"||i==="error"?"border-destructive/30 bg-destructive/5":"border-border"}`,children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[S(),n.jsxs("div",{children:[n.jsx("p",{className:`text-sm font-medium ${_()}`,children:C()}),o&&i!=="loading"&&n.jsxs("div",{className:"mt-1 text-xs text-muted-foreground space-y-0.5",children:[o.installed&&n.jsxs("p",{children:[r("claudeCode.version.current","Current Version"),": ",n.jsx("span",{className:"font-mono",children:o.installed})]}),o.latest&&o.latest!=="unknown"&&n.jsxs("p",{children:[r("claudeCode.version.latest","Latest Version"),": ",n.jsx("span",{className:"font-mono",children:o.latest})]}),o.path&&n.jsxs("p",{className:"truncate max-w-md",title:o.path,children:["Path: ",n.jsx("span",{className:"font-mono",children:o.path})]})]})]})]}),n.jsx(W,{variant:"ghost",size:"sm",onClick:y,disabled:i==="loading"||u,children:n.jsx(We,{className:`h-4 w-4 ${i==="loading"?"animate-spin":""}`})})]})})}),m&&i!=="loading"&&n.jsx(Le,{className:"border border-destructive/30 bg-destructive/10",children:n.jsx(Ye,{className:"p-4",children:n.jsx("p",{className:"text-sm text-destructive",children:m})})}),x&&n.jsx(Le,{className:"border border-green-500/30 bg-green-500/10",children:n.jsxs(Ye,{className:"p-4",children:[n.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:r("claudeCode.install.success","Installation command sent to terminal. Please complete the installation there.")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:r("claudeCode.install.instructions","The installer will open in your terminal. Follow the prompts to complete installation.")})]})}),(i==="not-found"||i==="outdated")&&!x&&n.jsx("div",{className:"flex justify-center",children:n.jsx(W,{onClick:w,disabled:u,size:"lg",className:"gap-2",children:u?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 animate-spin"}),r("claudeCode.install.inProgress","Installing...")]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"h-4 w-4"}),i==="outdated"?r("claudeCode.install.updating","Update Claude Code"):r("claudeCode.install.button","Install Claude Code")]})})}),n.jsx("div",{className:"flex justify-center",children:n.jsxs(W,{variant:"link",size:"sm",className:"text-muted-foreground gap-1",onClick:()=>window.electronAPI?.openExternal?.("https://claude.ai/code"),children:[r("claudeCode.learnMore","Learn more about Claude Code"),n.jsx(Zt,{className:"h-3 w-3"})]})})]}),n.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-border",children:[n.jsx(W,{variant:"outline",onClick:t,children:r("common:back","Back")}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(W,{variant:"ghost",onClick:s,children:r("common:skip","Skip")}),n.jsx(W,{onClick:e,disabled:i==="loading",children:i==="installed"?r("common:continue","Continue"):r("common:continueAnyway","Continue Anyway")})]})]})]})})}const gLe={androidstudio:"Android Studio",clion:"CLion",cursor:"Cursor",emacs:"Emacs",goland:"GoLand",intellij:"IntelliJ IDEA",neovim:"Neovim",nova:"Nova",phpstorm:"PhpStorm",pycharm:"PyCharm",rider:"Rider",rubymine:"RubyMine",sublime:"Sublime Text",vim:"Vim",vscode:"Visual Studio Code",vscodium:"VSCodium",webstorm:"WebStorm",windsurf:"Windsurf",xcode:"Xcode",zed:"Zed",custom:"Custom..."},b5={alacritty:"Alacritty",ghostty:"Ghostty",gnometerminal:"GNOME Terminal",hyper:"Hyper",iterm2:"iTerm2",kitty:"Kitty",konsole:"Konsole",powershell:"PowerShell",system:"System Terminal",tabby:"Tabby",terminal:"Terminal.app",terminator:"Terminator",tilix:"Tilix",tmux:"tmux",warp:"Warp",wezterm:"WezTerm",windowsterminal:"Windows Terminal",zellij:"Zellij",custom:"Custom..."};function xLe({onNext:e,onBack:t}){const{settings:s,updateSettings:r}=cs(),[i,a]=p.useState(s.preferredIDE||"vscode"),[o,l]=p.useState(s.preferredTerminal||"system"),[u,d]=p.useState(s.customIDEPath||""),[m,f]=p.useState(s.customTerminalPath||""),[x,v]=p.useState(null),[y,w]=p.useState(!0),[S,C]=p.useState(!1),[_,j]=p.useState(null),T=p.useCallback(async()=>{w(!0);try{if(!window.electronAPI?.worktreeDetectTools){console.warn("[DevToolsStep] Detection API not available, using fallback"),w(!1);return}const P=await window.electronAPI.worktreeDetectTools();P.success&&P.data&&(v(P.data),!s.preferredIDE&&P.data.ides.length>0&&a(P.data.ides[0].id))}catch(P){console.error("Failed to detect tools:",P)}finally{w(!1)}},[s.preferredIDE]);p.useEffect(()=>{T()},[T]);const E=async()=>{C(!0),j(null);try{const P={preferredIDE:i,preferredTerminal:o,customIDEPath:i==="custom"?u:void 0,customTerminalPath:o==="custom"?m:void 0},O=await window.electronAPI.saveSettings(P);O?.success?(r(P),e()):j(O?.error||"Failed to save settings")}catch(P){j(P instanceof Error?P.message:"Unknown error occurred")}finally{C(!1)}},A=[];if(x)for(const P of x.ides)A.push({value:P.id,label:P.name,detected:!0});const R=new Set(x?.ides.map(P=>P.id)||[]);for(const[P,O]of Object.entries(gLe))P!=="custom"&&!R.has(P)&&A.push({value:P,label:O,detected:!1});A.push({value:"custom",label:"Custom...",detected:!1});const D=[];if(D.push({value:"system",label:b5.system,detected:!0}),x)for(const P of x.terminals)P.id!=="system"&&D.push({value:P.id,label:P.name,detected:!0});const M=new Set(x?.terminals.map(P=>P.id)||[]);M.add("system");for(const[P,O]of Object.entries(b5))P!=="custom"&&!M.has(P)&&D.push({value:P,label:O,detected:!1});return D.push({value:"custom",label:"Custom...",detected:!1}),n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:n.jsx(lr,{className:"h-7 w-7"})})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:"Developer Tools"}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:"Choose your preferred IDE and terminal for working with Auto Claude worktrees"})]}),y&&n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"}),n.jsx("span",{className:"ml-3 text-muted-foreground",children:"Detecting installed tools..."})]}),!y&&n.jsxs("div",{className:"space-y-6",children:[_&&n.jsx(Le,{className:"border border-destructive/30 bg-destructive/10",children:n.jsx(Ye,{className:"p-4",children:n.jsx("p",{className:"text-sm text-destructive",children:_})})}),n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Why configure these?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"When Auto Claude builds features in isolated worktrees, you can open them directly in your preferred IDE or terminal to test and review changes."})]})]})})}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(W,{variant:"outline",size:"sm",onClick:T,disabled:y,children:[n.jsx(We,{className:"h-4 w-4 mr-2"}),"Detect Again"]})}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(le,{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[n.jsx(lr,{className:"h-4 w-4"}),"Preferred IDE"]}),n.jsxs(_t,{value:i,onValueChange:P=>a(P),disabled:S,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select IDE..."})}),n.jsx(wt,{children:A.map(P=>n.jsx(et,{value:P.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:P.label}),P.detected&&n.jsx(Pt,{className:"h-3 w-3 text-green-500"})]})},P.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto Claude will open worktrees in this editor"}),i==="custom"&&n.jsxs("div",{className:"mt-3",children:[n.jsx(le,{htmlFor:"custom-ide-path",className:"text-xs text-muted-foreground",children:"Custom IDE Path"}),n.jsx(Oe,{id:"custom-ide-path",value:u,onChange:P=>d(P.target.value),placeholder:"/path/to/your/ide",className:"mt-1",disabled:S})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(le,{className:"text-sm font-medium text-foreground flex items-center gap-2",children:[n.jsx(dr,{className:"h-4 w-4"}),"Preferred Terminal"]}),n.jsxs(_t,{value:o,onValueChange:P=>l(P),disabled:S,children:[n.jsx(yt,{children:n.jsx(Nt,{placeholder:"Select terminal..."})}),n.jsx(wt,{children:D.map(P=>n.jsx(et,{value:P.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:P.label}),P.detected&&n.jsx(Pt,{className:"h-3 w-3 text-green-500"})]})},P.value))})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto Claude will open terminal sessions here"}),o==="custom"&&n.jsxs("div",{className:"mt-3",children:[n.jsx(le,{htmlFor:"custom-terminal-path",className:"text-xs text-muted-foreground",children:"Custom Terminal Path"}),n.jsx(Oe,{id:"custom-terminal-path",value:m,onChange:P=>f(P.target.value),placeholder:"/path/to/your/terminal",className:"mt-1",disabled:S})]})]}),x&&n.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:[n.jsx("p",{className:"font-medium mb-1",children:"Detected on your system:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[x.ides.map(P=>n.jsx("li",{children:P.name},P.id)),x.terminals.filter(P=>P.id!=="system").map(P=>n.jsx("li",{children:P.name},P.id)),x.ides.length===0&&x.terminals.filter(P=>P.id!=="system").length===0&&n.jsx("li",{children:"No additional tools detected (VS Code and system terminal will be used)"})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-10 pt-6 border-t border-border",children:[n.jsx(W,{variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:"Back"}),n.jsx(W,{onClick:E,disabled:y||S,children:S?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 animate-spin mr-2"}),"Saving..."]}):"Save & Continue"})]})]})})}function vLe({onNext:e,onBack:t}){const{t:s}=Re(["onboarding","common"]),{settings:r,updateSettings:i}=cs(),[a,o]=p.useState(r.sentryEnabled??!0),[l,u]=p.useState(!1),[d,m]=p.useState(null),f=v=>{o(v),m(null)},x=async()=>{u(!0),m(null);try{(await window.electronAPI.saveSettings({sentryEnabled:a}))?.success?(i({sentryEnabled:a}),q3(a),e()):m(s("onboarding:privacy.saveFailed","Failed to save privacy settings. Please try again."))}catch{m(s("onboarding:privacy.saveFailed","Failed to save privacy settings. Please try again."))}finally{u(!1)}};return n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:n.jsx(xa,{className:"h-7 w-7"})})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:s("onboarding:privacy.title")}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:s("onboarding:privacy.subtitle")})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:s("onboarding:privacy.whatWeCollect.title")}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1.5 list-disc list-inside",children:[n.jsx("li",{children:s("onboarding:privacy.whatWeCollect.crashReports")}),n.jsx("li",{children:s("onboarding:privacy.whatWeCollect.errorMessages")}),n.jsx("li",{children:s("onboarding:privacy.whatWeCollect.appVersion")})]})]})]})})}),n.jsx(Le,{className:"border border-success/30 bg-success/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Pt,{className:"h-5 w-5 text-success shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:s("onboarding:privacy.whatWeNeverCollect.title")}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1.5 list-disc list-inside",children:[n.jsx("li",{children:s("onboarding:privacy.whatWeNeverCollect.code")}),n.jsx("li",{children:s("onboarding:privacy.whatWeNeverCollect.filenames")}),n.jsx("li",{children:s("onboarding:privacy.whatWeNeverCollect.apiKeys")}),n.jsx("li",{children:s("onboarding:privacy.whatWeNeverCollect.personalData")})]})]})]})})}),n.jsx(Le,{className:"border border-border bg-card",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(xa,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx(le,{htmlFor:"sentry-toggle",className:"text-sm font-medium text-foreground cursor-pointer",children:s("onboarding:privacy.toggle.label")}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:s("onboarding:privacy.toggle.description")})]})]}),n.jsx(Kt,{id:"sentry-toggle",checked:a,onCheckedChange:f})]})})})]}),d&&n.jsxs("div",{className:"flex items-start gap-2 p-3 mt-6 rounded-md bg-destructive/10 text-destructive text-sm",children:[n.jsx(Ke,{className:"h-4 w-4 mt-0.5 shrink-0"}),d]}),n.jsxs("div",{className:"flex justify-between items-center mt-10 pt-6 border-t border-border",children:[n.jsx(W,{variant:"ghost",onClick:t,children:s("common:back","Back")}),n.jsx(W,{onClick:x,disabled:l,children:l?s("common:saving","Saving..."):s("common:continue","Continue")})]})]})})}const bLe=[{id:"openai",name:"OpenAI",description:"GPT models (recommended)",requiresApiKey:!0},{id:"anthropic",name:"Anthropic",description:"Claude models",requiresApiKey:!0},{id:"google",name:"Google AI",description:"Gemini models",requiresApiKey:!0},{id:"groq",name:"Groq",description:"Llama models (fast inference)",requiresApiKey:!0},{id:"openrouter",name:"OpenRouter",description:"Multi-provider aggregator",requiresApiKey:!0},{id:"azure_openai",name:"Azure OpenAI",description:"Enterprise Azure deployment",requiresApiKey:!0},{id:"ollama",name:"Ollama",description:"Local models (free)",requiresApiKey:!1}],yLe=[{id:"ollama",name:"Ollama",description:"Local embeddings (free)",requiresApiKey:!1},{id:"openai",name:"OpenAI",description:"text-embedding-3-small (recommended)",requiresApiKey:!0},{id:"voyage",name:"Voyage AI",description:"voyage-3 (great with Anthropic)",requiresApiKey:!0},{id:"google",name:"Google AI",description:"Gemini text-embedding-004",requiresApiKey:!0},{id:"openrouter",name:"OpenRouter",description:"OpenAI-compatible embeddings",requiresApiKey:!0},{id:"azure_openai",name:"Azure OpenAI",description:"Enterprise Azure embeddings",requiresApiKey:!0}];function wLe({onNext:e,onBack:t,onSkip:s}){const{settings:r,updateSettings:i}=cs(),[a,o]=p.useState({enabled:!0,database:"auto_claude_memory",dbPath:"",llmProvider:"openai",embeddingProvider:"openai",openaiApiKey:r.globalOpenAIApiKey||"",anthropicApiKey:r.globalAnthropicApiKey||"",azureOpenaiApiKey:"",azureOpenaiBaseUrl:"",azureOpenaiLlmDeployment:"",azureOpenaiEmbeddingDeployment:"",voyageApiKey:"",googleApiKey:r.globalGoogleApiKey||"",groqApiKey:r.globalGroqApiKey||"",openrouterApiKey:r.globalOpenRouterApiKey||"",openrouterBaseUrl:"https://openrouter.ai/api/v1",openrouterLlmModel:"anthropic/claude-sonnet-4",openrouterEmbeddingModel:"openai/text-embedding-3-small",huggingfaceApiKey:"",ollamaBaseUrl:r.ollamaBaseUrl||"http://localhost:11434",ollamaLlmModel:"",ollamaEmbeddingModel:"",ollamaEmbeddingDim:"768"}),[l,u]=p.useState({}),[d,m]=p.useState(!1),[f,x]=p.useState(null),[v,y]=p.useState(!1),[w,S]=p.useState(!0),[C,_]=p.useState(null),[j,T]=p.useState(!1),[E,A]=p.useState({database:null,provider:null});p.useEffect(()=>{(async()=>{S(!0);try{const V=await window.electronAPI.getMemoryInfrastructureStatus();_(!!(V?.success&&V?.data?.memory?.kuzuInstalled))}catch{_(!1)}finally{S(!1)}})()},[]);const R=I=>{o(V=>({...V,enabled:I})),x(null),y(!1),A({database:null,provider:null})},D=I=>{u(V=>({...V,[I]:!V[I]}))},M=()=>{const{llmProvider:I,embeddingProvider:V}=a;if((I==="openai"||V==="openai")&&!a.openaiApiKey.trim())return"OpenAI API key";if(I==="anthropic"&&!a.anthropicApiKey.trim())return"Anthropic API key";if(I==="azure_openai"||V==="azure_openai"){if(!a.azureOpenaiApiKey.trim())return"Azure OpenAI API key";if(!a.azureOpenaiBaseUrl.trim())return"Azure OpenAI Base URL";if(I==="azure_openai"&&!a.azureOpenaiLlmDeployment.trim())return"Azure OpenAI LLM deployment name";if(V==="azure_openai"&&!a.azureOpenaiEmbeddingDeployment.trim())return"Azure OpenAI embedding deployment name"}return V==="voyage"&&!a.voyageApiKey.trim()?"Voyage API key":(I==="google"||V==="google")&&!a.googleApiKey.trim()?"Google API key":I==="groq"&&!a.groqApiKey.trim()?"Groq API key":(I==="openrouter"||V==="openrouter")&&!a.openrouterApiKey.trim()?"OpenRouter API key":I==="ollama"&&!a.ollamaLlmModel.trim()?"Ollama LLM model name":V==="ollama"&&!a.ollamaEmbeddingModel.trim()?"Ollama embedding model name":null},P=async()=>{const I=M();if(I){x(`Please enter ${I} to test the connection`);return}T(!0),x(null),A({database:null,provider:null});try{const V=a.llmProvider==="openai"?a.openaiApiKey:a.llmProvider==="anthropic"?a.anthropicApiKey:a.llmProvider==="google"?a.googleApiKey:a.llmProvider==="groq"?a.groqApiKey:a.llmProvider==="openrouter"?a.openrouterApiKey:a.llmProvider==="azure_openai"?a.azureOpenaiApiKey:a.llmProvider==="ollama"?"":a.embeddingProvider==="openai"?a.openaiApiKey:a.embeddingProvider==="openrouter"?a.openrouterApiKey:"",B=await window.electronAPI.testGraphitiConnection({dbPath:a.dbPath||void 0,database:a.database||"auto_claude_memory",llmProvider:a.llmProvider,apiKey:V.trim()});if(B?.success&&B?.data){if(A({database:{tested:!0,success:B.data.database.success,message:B.data.database.message},provider:{tested:!0,success:B.data.llmProvider.success,message:B.data.llmProvider.success?`${a.llmProvider} / ${a.embeddingProvider} providers configured`:B.data.llmProvider.message}}),!B.data.ready){const K=[];B.data.database.success||K.push(`Database: ${B.data.database.message}`),B.data.llmProvider.success||K.push(`Provider: ${B.data.llmProvider.message}`),K.length>0&&x(K.join(`
`))}}else x(B?.error||"Failed to test connection")}catch(V){x(V instanceof Error?V.message:"Unknown error occurred")}finally{T(!1)}},O=async()=>{if(!a.enabled){e();return}const I=M();if(I){x(`${I} is required`);return}m(!0),x(null);try{const V={graphitiLlmProvider:a.llmProvider};a.openaiApiKey.trim()&&(V.globalOpenAIApiKey=a.openaiApiKey.trim()),a.anthropicApiKey.trim()&&(V.globalAnthropicApiKey=a.anthropicApiKey.trim()),a.googleApiKey.trim()&&(V.globalGoogleApiKey=a.googleApiKey.trim()),a.groqApiKey.trim()&&(V.globalGroqApiKey=a.groqApiKey.trim()),a.openrouterApiKey.trim()&&(V.globalOpenRouterApiKey=a.openrouterApiKey.trim()),a.ollamaBaseUrl.trim()&&(V.ollamaBaseUrl=a.ollamaBaseUrl.trim());const B=await window.electronAPI.saveSettings(V);if(B?.success){const K={};a.openaiApiKey.trim()&&(K.globalOpenAIApiKey=a.openaiApiKey.trim()),a.anthropicApiKey.trim()&&(K.globalAnthropicApiKey=a.anthropicApiKey.trim()),a.googleApiKey.trim()&&(K.globalGoogleApiKey=a.googleApiKey.trim()),a.groqApiKey.trim()&&(K.globalGroqApiKey=a.groqApiKey.trim()),a.openrouterApiKey.trim()&&(K.globalOpenRouterApiKey=a.openrouterApiKey.trim()),a.ollamaBaseUrl.trim()&&(K.ollamaBaseUrl=a.ollamaBaseUrl.trim()),i(K),e()}else x(B?.error||"Failed to save Graphiti configuration")}catch(V){x(V instanceof Error?V.message:"Unknown error occurred")}finally{m(!1)}},F=()=>{a.enabled&&!v?O():e()},$=()=>{window.open("https://github.com/getzep/graphiti","_blank")},z=()=>{y(!1),x(null)},H=()=>{const{llmProvider:I,embeddingProvider:V}=a,B=I==="openai"||V==="openai",K=I==="anthropic",L=I==="azure_openai"||V==="azure_openai",G=V==="voyage",Y=I==="google"||V==="google",q=I==="groq",Q=I==="openrouter"||V==="openrouter",se=I==="ollama"||V==="ollama";return n.jsxs("div",{className:"space-y-4",children:[B&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(le,{htmlFor:"openai-key",className:"text-sm font-medium text-foreground",children:"OpenAI API Key"}),E.provider?.tested&&B&&n.jsx("div",{className:"flex items-center gap-1.5",children:E.provider.success?n.jsx(Xe,{className:"h-4 w-4 text-success"}):n.jsx(yn,{className:"h-4 w-4 text-destructive"})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"openai-key",type:l.openai?"text":"password",value:a.openaiApiKey,onChange:te=>{o(ee=>({...ee,openaiApiKey:te.target.value})),A(ee=>({...ee,provider:null}))},placeholder:"sk-...",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("openai"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.openai?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"OpenAI"})]})]}),K&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"anthropic-key",className:"text-sm font-medium text-foreground",children:"Anthropic API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"anthropic-key",type:l.anthropic?"text":"password",value:a.anthropicApiKey,onChange:te=>o(ee=>({...ee,anthropicApiKey:te.target.value})),placeholder:"sk-ant-...",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("anthropic"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.anthropic?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Anthropic Console"})]})]}),L&&n.jsxs("div",{className:"space-y-3 p-3 rounded-md bg-muted/50",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Azure OpenAI Settings"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"azure-key",className:"text-xs text-muted-foreground",children:"API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"azure-key",type:l.azure?"text":"password",value:a.azureOpenaiApiKey,onChange:te=>o(ee=>({...ee,azureOpenaiApiKey:te.target.value})),placeholder:"Azure API key",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("azure"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.azure?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"azure-url",className:"text-xs text-muted-foreground",children:"Base URL"}),n.jsx(Oe,{id:"azure-url",type:"text",value:a.azureOpenaiBaseUrl,onChange:te=>o(ee=>({...ee,azureOpenaiBaseUrl:te.target.value})),placeholder:"https://your-resource.openai.azure.com",className:"font-mono text-sm",disabled:d||j})]}),I==="azure_openai"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"azure-llm-deployment",className:"text-xs text-muted-foreground",children:"LLM Deployment Name"}),n.jsx(Oe,{id:"azure-llm-deployment",type:"text",value:a.azureOpenaiLlmDeployment,onChange:te=>o(ee=>({...ee,azureOpenaiLlmDeployment:te.target.value})),placeholder:"gpt-4",className:"font-mono text-sm",disabled:d||j})]}),V==="azure_openai"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"azure-embedding-deployment",className:"text-xs text-muted-foreground",children:"Embedding Deployment Name"}),n.jsx(Oe,{id:"azure-embedding-deployment",type:"text",value:a.azureOpenaiEmbeddingDeployment,onChange:te=>o(ee=>({...ee,azureOpenaiEmbeddingDeployment:te.target.value})),placeholder:"text-embedding-ada-002",className:"font-mono text-sm",disabled:d||j})]})]}),G&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"voyage-key",className:"text-sm font-medium text-foreground",children:"Voyage API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"voyage-key",type:l.voyage?"text":"password",value:a.voyageApiKey,onChange:te=>o(ee=>({...ee,voyageApiKey:te.target.value})),placeholder:"pa-...",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("voyage"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.voyage?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://dash.voyageai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Voyage AI"})]})]}),Y&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"google-key",className:"text-sm font-medium text-foreground",children:"Google API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"google-key",type:l.google?"text":"password",value:a.googleApiKey,onChange:te=>o(ee=>({...ee,googleApiKey:te.target.value})),placeholder:"AIza...",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("google"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.google?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://aistudio.google.com/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Google AI Studio"})]})]}),q&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"groq-key",className:"text-sm font-medium text-foreground",children:"Groq API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"groq-key",type:l.groq?"text":"password",value:a.groqApiKey,onChange:te=>o(ee=>({...ee,groqApiKey:te.target.value})),placeholder:"gsk_...",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("groq"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.groq?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://console.groq.com/keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"Groq Console"})]})]}),Q&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"openrouter-key",className:"text-sm font-medium text-foreground",children:"OpenRouter API Key"}),n.jsxs("div",{className:"relative",children:[n.jsx(Oe,{id:"openrouter-key",type:l.openrouter?"text":"password",value:a.openrouterApiKey,onChange:te=>o(ee=>({...ee,openrouterApiKey:te.target.value})),placeholder:"sk-or-...",className:"pr-10 font-mono text-sm",disabled:d||j}),n.jsx("button",{type:"button",onClick:()=>D("openrouter"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:l.openrouter?n.jsx(nr,{className:"h-4 w-4"}):n.jsx(Ws,{className:"h-4 w-4"})})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Get your key from"," ",n.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"OpenRouter Dashboard"})]})]}),se&&n.jsxs("div",{className:"space-y-3 p-3 rounded-md bg-muted/50",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"Ollama Settings (Local)"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"ollama-url",className:"text-xs text-muted-foreground",children:"Base URL"}),n.jsx(Oe,{id:"ollama-url",type:"text",value:a.ollamaBaseUrl,onChange:te=>o(ee=>({...ee,ollamaBaseUrl:te.target.value})),placeholder:"http://localhost:11434",className:"font-mono text-sm",disabled:d||j})]}),I==="ollama"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"ollama-llm",className:"text-xs text-muted-foreground",children:"LLM Model"}),n.jsx(Oe,{id:"ollama-llm",type:"text",value:a.ollamaLlmModel,onChange:te=>o(ee=>({...ee,ollamaLlmModel:te.target.value})),placeholder:"llama3.2, deepseek-r1:7b, etc.",className:"font-mono text-sm",disabled:d||j})]}),V==="ollama"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"ollama-embedding",className:"text-xs text-muted-foreground",children:"Embedding Model"}),n.jsx(Oe,{id:"ollama-embedding",type:"text",value:a.ollamaEmbeddingModel,onChange:te=>o(ee=>({...ee,ollamaEmbeddingModel:te.target.value})),placeholder:"nomic-embed-text",className:"font-mono text-sm",disabled:d||j})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{htmlFor:"ollama-dim",className:"text-xs text-muted-foreground",children:"Embedding Dimension"}),n.jsx(Oe,{id:"ollama-dim",type:"number",value:a.ollamaEmbeddingDim,onChange:te=>o(ee=>({...ee,ollamaEmbeddingDim:te.target.value})),placeholder:"768",className:"font-mono text-sm",disabled:d||j})]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ensure Ollama is running locally. See"," ",n.jsx("a",{href:"https://ollama.ai",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80",children:"ollama.ai"})]})]})]})};return n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary/10 text-primary",children:n.jsx(Bi,{className:"h-7 w-7"})})}),n.jsx("h1",{className:"text-2xl font-bold text-foreground tracking-tight",children:"Memory & Context"}),n.jsx("p",{className:"mt-2 text-muted-foreground",children:"Enable Graphiti for persistent memory across coding sessions"})]}),w&&n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(we,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),!w&&n.jsxs("div",{className:"space-y-6",children:[v&&n.jsx(Le,{className:"border border-success/30 bg-success/10",children:n.jsx(Ye,{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Xe,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-success",children:"Graphiti configured successfully"}),n.jsx("p",{className:"mt-1 text-sm text-success/80",children:"Memory features are enabled. Auto Claude will maintain context across sessions for improved code understanding."})]})]})})}),v&&n.jsx("div",{className:"text-center text-sm text-muted-foreground",children:n.jsx("button",{onClick:z,className:"text-primary hover:text-primary/80 underline-offset-4 hover:underline",children:"Reconfigure Graphiti settings"})}),!v&&n.jsxs(n.Fragment,{children:[f&&n.jsx(Le,{className:"border border-destructive/30 bg-destructive/10",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ke,{className:"h-5 w-5 text-destructive shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-destructive whitespace-pre-line",children:f})]})})}),C===!1&&n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-info",children:"Database will be created automatically"}),n.jsx("p",{className:"text-sm text-info/80 mt-1",children:"LadybugDB uses an embedded database - no Docker required. The database will be created when you first use memory features."})]})]})})}),n.jsx(Le,{className:"border border-info/30 bg-info/10",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(_r,{className:"h-5 w-5 text-info shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-foreground",children:"What is Graphiti?"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Graphiti is an intelligent memory layer that helps Auto Claude remember context across sessions. It uses a knowledge graph to store discoveries, patterns, and insights about your codebase."}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1.5 list-disc list-inside",children:[n.jsx("li",{children:"Persistent memory across coding sessions"}),n.jsx("li",{children:"Better understanding of your codebase over time"}),n.jsx("li",{children:"Reduces repetitive explanations"}),n.jsx("li",{children:"No Docker required - uses embedded database"})]}),n.jsxs("button",{onClick:$,className:"text-sm text-info hover:text-info/80 flex items-center gap-1",children:[n.jsx(Zt,{className:"h-3 w-3"}),"Learn more about Graphiti"]})]})]})})}),n.jsx(Le,{className:"border border-border bg-card",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(oc,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx(le,{htmlFor:"enable-graphiti",className:"text-sm font-medium text-foreground cursor-pointer",children:"Enable Graphiti Memory"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Uses LadybugDB (embedded) and an LLM/embedding provider"})]})]}),n.jsx(Kt,{id:"enable-graphiti",checked:a.enabled,onCheckedChange:R})]})})}),a.enabled&&n.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(oc,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(le,{htmlFor:"database-name",className:"text-sm font-medium text-foreground",children:"Database Name"})]}),E.database&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[E.database.success?n.jsx(Xe,{className:"h-4 w-4 text-success"}):n.jsx(yn,{className:"h-4 w-4 text-destructive"}),n.jsx("span",{className:`text-xs ${E.database.success?"text-success":"text-destructive"}`,children:E.database.success?"Ready":"Issue"})]})]}),n.jsx(Oe,{id:"database-name",type:"text",value:a.database,onChange:I=>{o(V=>({...V,database:I.target.value})),A(V=>({...V,database:null}))},placeholder:"auto_claude_memory",className:"font-mono text-sm",disabled:d||j}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Stored in ~/.auto-claude/graphs/"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"LLM Provider"}),n.jsxs(_t,{value:a.llmProvider,onValueChange:I=>{o(V=>({...V,llmProvider:I})),A(V=>({...V,provider:null}))},disabled:d||j,children:[n.jsx(yt,{children:n.jsx(Nt,{})}),n.jsx(wt,{children:bLe.map(I=>n.jsx(et,{value:I.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:I.name}),n.jsx("span",{className:"text-xs text-muted-foreground",children:I.description})]})},I.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(le,{className:"text-sm font-medium text-foreground",children:"Embedding Provider"}),n.jsxs(_t,{value:a.embeddingProvider,onValueChange:I=>{o(V=>({...V,embeddingProvider:I})),A(V=>({...V,provider:null}))},disabled:d||j,children:[n.jsx(yt,{children:n.jsx(Nt,{})}),n.jsx(wt,{children:yLe.map(I=>n.jsx(et,{value:I.id,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{children:I.name}),n.jsx("span",{className:"text-xs text-muted-foreground",children:I.description})]})},I.id))})]})]})]}),H(),n.jsxs("div",{className:"pt-2",children:[n.jsx(W,{variant:"outline",onClick:P,disabled:!!M()||j||d,className:"w-full",children:j?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 animate-spin mr-2"}),"Testing connection..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vi,{className:"h-4 w-4 mr-2"}),"Test Connection"]})}),E.database?.success&&E.provider?.success&&n.jsx("p",{className:"text-xs text-success text-center mt-2",children:"All connections validated successfully!"}),a.llmProvider!=="openai"&&a.llmProvider!=="ollama"&&n.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Note: API key validation currently only fully supports OpenAI. Your key will be saved and used at runtime."}),a.llmProvider==="ollama"&&n.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Note: Ollama connection will be tested by checking if the server is reachable."})]})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center mt-10 pt-6 border-t border-border",children:[n.jsx(W,{variant:"ghost",onClick:t,className:"text-muted-foreground hover:text-foreground",children:"Back"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(W,{variant:"ghost",onClick:s,className:"text-muted-foreground hover:text-foreground",children:"Skip"}),n.jsx(W,{onClick:F,disabled:w||a.enabled&&!!M()&&!v||d||j,children:d?n.jsxs(n.Fragment,{children:[n.jsx(we,{className:"h-4 w-4 animate-spin mr-2"}),"Saving..."]}):a.enabled&&!v?"Save & Continue":"Continue"})]})]})]})})}function jLe({icon:e,title:t,description:s,action:r,actionLabel:i}){return n.jsx(Le,{className:"border border-border bg-card/50 backdrop-blur-sm",children:n.jsx(Ye,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium text-foreground",children:t}),n.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:s}),r&&i&&n.jsxs(W,{variant:"link",size:"sm",onClick:r,className:"mt-2 h-auto p-0 text-primary hover:text-primary/80",children:[i,n.jsx(n1,{className:"ml-1 h-3 w-3"})]})]})]})})})}function SLe({onFinish:e,onOpenTaskCreator:t,onOpenSettings:s}){const{t:r}=Re("onboarding"),i=[{icon:n.jsx($n,{className:"h-5 w-5"}),title:r("completion.createTask.title"),description:r("completion.createTask.description"),action:t,actionLabel:r("completion.createTask.action")},{icon:n.jsx(ey,{className:"h-5 w-5"}),title:r("completion.customizeSettings.title"),description:r("completion.customizeSettings.description"),action:s,actionLabel:r("completion.customizeSettings.action")},{icon:n.jsx(jp,{className:"h-5 w-5"}),title:r("completion.exploreDocs.title"),description:r("completion.exploreDocs.description")}];return n.jsx("div",{className:"flex h-full flex-col items-center justify-center px-8 py-6",children:n.jsxs("div",{className:"w-full max-w-2xl",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-success/20 text-success",children:n.jsx(Xe,{className:"h-10 w-10"})}),n.jsx("div",{className:"absolute -bottom-1 -right-1 flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground",children:n.jsx(Vj,{className:"h-4 w-4"})})]})}),n.jsx("h1",{className:"text-3xl font-bold text-foreground tracking-tight",children:r("completion.title")}),n.jsx("p",{className:"mt-3 text-muted-foreground text-lg",children:r("completion.subtitle")})]}),n.jsx(Le,{className:"border border-success/30 bg-success/10 mb-8",children:n.jsx(Ye,{className:"p-5",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Xe,{className:"h-6 w-6 text-success shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-medium text-success",children:r("completion.setupComplete")}),n.jsx("p",{className:"mt-1 text-sm text-success/80",children:r("completion.setupCompleteDescription")})]})]})})}),n.jsxs("div",{className:"space-y-4 mb-10",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[n.jsx(Vj,{className:"h-4 w-4"}),r("completion.whatsNext")]}),n.jsx("div",{className:"grid grid-cols-1 gap-3",children:i.map((a,o)=>n.jsx(jLe,{icon:a.icon,title:a.title,description:a.description,action:a.action,actionLabel:a.actionLabel},o))})]}),n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsxs(W,{size:"lg",onClick:e,className:"gap-2 px-10",children:[n.jsx(Vj,{className:"h-5 w-5"}),r("completion.finish")]}),n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:r("completion.rerunHint")})]})]})})}const cf=[{id:"welcome",labelKey:"steps.welcome"},{id:"auth-choice",labelKey:"steps.authChoice"},{id:"oauth",labelKey:"steps.auth"},{id:"claude-code",labelKey:"steps.claudeCode"},{id:"devtools",labelKey:"steps.devtools"},{id:"privacy",labelKey:"steps.privacy"},{id:"graphiti",labelKey:"steps.memory"},{id:"completion",labelKey:"steps.done"}];function _Le({open:e,onOpenChange:t,onOpenTaskCreator:s,onOpenSettings:r}){const{t:i}=Re("onboarding"),{updateSettings:a}=cs(),[o,l]=p.useState(0),[u,d]=p.useState(new Set),[m,f]=p.useState(!1),x=cf[o].id,v=cf.map((D,M)=>({id:D.id,label:i(D.labelKey),completed:u.has(D.id)||M<o})),y=p.useCallback(()=>{d(D=>new Set(D).add(x)),x==="auth-choice"&&f(!1),o<cf.length-1&&l(D=>D+1)},[o,x]),w=p.useCallback(()=>{if(x==="graphiti"&&m){const D=cf.findIndex(M=>M.id==="auth-choice");l(D),f(!1);return}o>0&&l(D=>D-1)},[o,x,m]),S=p.useCallback(()=>{f(!0),d(M=>new Set(M).add("auth-choice"));const D=cf.findIndex(M=>M.id==="graphiti");l(D)},[]),C=p.useCallback(()=>{l(0),d(new Set),f(!1)},[]),_=p.useCallback(async()=>{try{const D=await window.electronAPI.saveSettings({onboardingCompleted:!0});D?.success||console.error("Failed to save onboarding completion:",D?.error)}catch(D){console.error("Error saving onboarding completion:",D)}a({onboardingCompleted:!0}),t(!1),C()},[a,t,C]),j=p.useCallback(async()=>{try{const D=await window.electronAPI.saveSettings({onboardingCompleted:!0});D?.success||console.error("Failed to save onboarding completion:",D?.error)}catch(D){console.error("Error saving onboarding completion:",D)}a({onboardingCompleted:!0}),t(!1),C()},[a,t,C]),T=p.useCallback(()=>{s&&(t(!1),s())},[s,t]),E=p.useCallback(()=>{r&&(j(),r())},[r,j]),A=()=>{switch(x){case"welcome":return n.jsx(hLe,{onGetStarted:y,onSkip:_});case"auth-choice":return n.jsx(mLe,{onNext:y,onBack:w,onSkip:_,onAPIKeyPathComplete:S});case"oauth":return n.jsx(fLe,{onNext:y,onBack:w,onSkip:_});case"claude-code":return n.jsx(pLe,{onNext:y,onBack:w,onSkip:_});case"devtools":return n.jsx(xLe,{onNext:y,onBack:w});case"privacy":return n.jsx(vLe,{onNext:y,onBack:w});case"graphiti":return n.jsx(wLe,{onNext:y,onBack:w,onSkip:_});case"completion":return n.jsx(SLe,{onFinish:j,onOpenTaskCreator:T,onOpenSettings:E});default:return null}},R=p.useCallback(D=>{D?t(D):_()},[_,t]);return n.jsx(RU,{open:e,onOpenChange:R,children:n.jsxs(lA,{children:[n.jsxs(cA,{children:[n.jsxs(uA,{className:"flex items-center gap-3",children:[n.jsx(Wv,{className:"h-6 w-6"}),i("wizard.title")]}),n.jsx(hA,{children:i("wizard.description")}),x!=="welcome"&&x!=="completion"&&n.jsx("div",{className:"mt-6",children:n.jsx(dLe,{currentStep:o,steps:v})})]}),n.jsx(dA,{children:n.jsx(zt,{className:"h-full",children:A()})})]})})}const NLe="https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md";function CLe({markdown:e}){const t=p.useMemo(()=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/^### (.+)$/gm,'<h4 class="text-sm font-semibold text-foreground mt-3 mb-1.5 first:mt-0">$1</h4>').replace(/^## (.+)$/gm,'<h3 class="text-sm font-semibold text-foreground mt-3 mb-1.5 first:mt-0">$1</h3>').replace(/\*\*([^*]+)\*\*/g,'<strong class="text-foreground font-medium">$1</strong>').replace(/`([^`]+)`/g,'<code class="px-1 py-0.5 bg-muted rounded text-xs">$1</code>').replace(/^- (.+)$/gm,`<li class="ml-4 text-muted-foreground before:content-[''] before:mr-2 before:text-muted-foreground/60">$1</li>`).replace(/(<li[^>]*>.*?<\/li>\n?)+/g,'<ul class="space-y-1 my-2">$&</ul>').replace(/\n\n/g,'<div class="h-2"></div>').replace(/\n/g,"<br/>"),[e]);return n.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed",dangerouslySetInnerHTML:{__html:t}})}function kLe(){const{t:e}=Re(["dialogs"]),[t,s]=p.useState(!1),[r,i]=p.useState(null),[a,o]=p.useState(null),[l,u]=p.useState(!1),[d,m]=p.useState(!1),[f,x]=p.useState(null);p.useEffect(()=>window.electronAPI.onAppUpdateAvailable(C=>{i(C),s(!0),u(!1),m(!1),o(null),x(null)}),[]),p.useEffect(()=>window.electronAPI.onAppUpdateDownloaded(C=>{u(!1),m(!0),o(null)}),[]),p.useEffect(()=>window.electronAPI.onAppUpdateProgress(C=>{o(C)}),[]);const v=async()=>{u(!0),x(null);try{const S=await window.electronAPI.downloadAppUpdate();S.success||(x(S.error||e("dialogs:appUpdate.downloadError","Failed to download update")),u(!1))}catch(S){console.error("Failed to download app update:",S),x(e("dialogs:appUpdate.downloadError","Failed to download update")),u(!1)}},y=()=>{window.electronAPI.installAppUpdate()},w=()=>{s(!1)};return r?n.jsx($s,{open:t,onOpenChange:s,children:n.jsxs(Bs,{className:"max-w-2xl",children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-5 w-5"}),e("dialogs:appUpdate.title","App Update Available")]}),n.jsx(ws,{children:e("dialogs:appUpdate.description","A new version of Auto Claude is ready to download")})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"rounded-lg border border-border bg-muted/50 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-1",children:e("dialogs:appUpdate.newVersion","New Version")}),n.jsx("p",{className:"text-base font-medium text-foreground",children:r.version}),r.releaseDate&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e("dialogs:appUpdate.released","Released")," ",new Date(r.releaseDate).toLocaleDateString()]})]}),d?n.jsx(Xe,{className:"h-6 w-6 text-success"}):l?n.jsx(We,{className:"h-6 w-6 animate-spin text-info"}):n.jsx(jn,{className:"h-6 w-6 text-info"})]})}),r.releaseNotes&&n.jsx("div",{className:"bg-background rounded-lg p-4 max-h-64 overflow-y-auto border border-border/50",children:n.jsx(CLe,{markdown:r.releaseNotes})}),n.jsxs(W,{variant:"link",size:"sm",className:"w-full text-xs text-muted-foreground gap-1",onClick:()=>window.electronAPI?.openExternal?.(NLe),"aria-label":e("dialogs:appUpdate.claudeCodeChangelogAriaLabel","View Claude Code Changelog (opens in new window)"),children:[e("dialogs:appUpdate.claudeCodeChangelog","View Claude Code Changelog"),n.jsx(Zt,{className:"h-3 w-3","aria-hidden":"true"})]}),l&&a&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:e("dialogs:appUpdate.downloading","Downloading...")}),n.jsxs("span",{className:"text-foreground font-medium",children:[Math.round(a.percent),"%"]})]}),n.jsx(xi,{value:a.percent,className:"h-2"}),n.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[(a.transferred/1024/1024).toFixed(2)," MB /"," ",(a.total/1024/1024).toFixed(2)," MB"]})]}),f&&n.jsxs("div",{className:"flex items-center gap-3 text-sm text-destructive bg-destructive/10 border border-destructive/30 rounded-lg p-3",children:[n.jsx(Ke,{className:"h-5 w-5 shrink-0"}),n.jsx("span",{children:f})]}),d&&n.jsxs("div",{className:"flex items-center gap-3 text-sm text-success bg-success/10 border border-success/30 rounded-lg p-3",children:[n.jsx(Xe,{className:"h-5 w-5 shrink-0"}),n.jsx("span",{children:e("dialogs:appUpdate.updateDownloaded","Update downloaded successfully! Click Install to restart and apply the update.")})]})]}),n.jsxs(As,{className:"flex flex-col sm:flex-row gap-3",children:[n.jsx(W,{variant:"outline",onClick:w,disabled:l,children:d?e("dialogs:appUpdate.installLater","Install Later"):e("dialogs:appUpdate.remindMeLater","Remind Me Later")}),d?n.jsxs(W,{onClick:y,children:[n.jsx(We,{className:"mr-2 h-4 w-4"}),e("dialogs:appUpdate.installAndRestart","Install and Restart")]}):n.jsx(W,{onClick:v,disabled:l,children:l?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),e("dialogs:appUpdate.downloading","Downloading...")]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),e("dialogs:appUpdate.downloadUpdate","Download Update")]})})]})]})}):null}function ALe(){const{t:e}=Re("common"),[t,s]=p.useState(null),[r,i]=p.useState(!1);p.useEffect(()=>{const o=window.electronAPI.onProactiveSwapNotification(l=>{const u={fromProfile:l.fromProfile.name,toProfile:l.toProfile.name,reason:l.reason,timestamp:new Date};s(u),i(!0),setTimeout(()=>{i(!1)},5e3)});return()=>{o()}},[]);const a=()=>{i(!1)};return!t||!r?null:n.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-2 fade-in duration-300",children:n.jsx("div",{className:"bg-card border border-border shadow-lg rounded-lg p-4 max-w-sm",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(We,{className:"h-4 w-4 text-primary"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-semibold text-foreground",children:e("notification.accountSwitched")}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e("notification.swapFrom")," ",n.jsx("strong",{children:t.fromProfile})," ",e("notification.swapTo")," ",n.jsx("strong",{children:t.toProfile}),n.jsx("br",{}),n.jsx("span",{className:"text-[10px]",children:e("notification.swapReason",{reason:t.reason})})]})]}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-6 w-6 flex-shrink-0",onClick:a,children:n.jsx(Ss,{className:"h-3 w-3"})})]})})})}function ELe(){const{t:e}=Re("common"),t=Zc(m=>m.downloads),s=Zc(m=>m.clearDownload),[r,i]=p.useState(!0),a=Object.values(t),o=a.filter(m=>m.status==="starting"||m.status==="downloading"),l=a.filter(m=>m.status==="completed"),u=a.filter(m=>m.status==="failed");if(a.length===0)return null;const d=o.length>0;return n.jsx("div",{className:"fixed bottom-4 right-4 z-50 max-w-sm",children:n.jsxs("div",{className:"rounded-lg border border-border bg-card shadow-lg overflow-hidden",children:[n.jsxs("button",{type:"button",className:J("flex items-center justify-between px-3 py-2 cursor-pointer w-full text-left",d?"bg-primary/10":"bg-muted/50"),onClick:()=>i(!r),"aria-expanded":r,"aria-label":e("downloads.toggleExpand"),children:[n.jsxs("div",{className:"flex items-center gap-2",children:[d?n.jsx(we,{className:"h-4 w-4 animate-spin text-primary"}):l.length>0&&u.length===0?n.jsx(Pt,{className:"h-4 w-4 text-success"}):u.length>0?n.jsx(Ke,{className:"h-4 w-4 text-destructive"}):n.jsx(jn,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-sm font-medium",children:d?e("downloads.downloading",{count:o.length}):l.length>0?e("downloads.complete",{count:l.length}):e("downloads.failed",{count:u.length})})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[!d&&n.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),a.forEach(f=>{(f.status==="completed"||f.status==="failed")&&s(f.modelName)})},className:"p-1 hover:bg-muted rounded","aria-label":e("downloads.clearAll"),children:n.jsx(Ss,{className:"h-3.5 w-3.5 text-muted-foreground"})}),r?n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Hi,{className:"h-4 w-4 text-muted-foreground"})]})]}),r&&n.jsx("div",{className:"divide-y divide-border",children:a.map(m=>n.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs font-medium truncate max-w-[200px]",children:m.modelName}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[m.status==="completed"&&n.jsxs("span",{className:"text-xs text-success flex items-center gap-1",children:[n.jsx(Pt,{className:"h-3 w-3"}),e("downloads.done")]}),m.status==="failed"&&n.jsxs("span",{className:"text-xs text-destructive flex items-center gap-1",children:[n.jsx(Ke,{className:"h-3 w-3"}),e("downloads.failedLabel")]}),(m.status==="starting"||m.status==="downloading")&&n.jsx("span",{className:"text-xs text-muted-foreground",children:m.percentage>0?`${Math.round(m.percentage)}%`:e("downloads.starting")})]})]}),(m.status==="starting"||m.status==="downloading")&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 overflow-hidden",children:m.percentage>0?n.jsx("div",{className:"h-full rounded-full bg-primary transition-all duration-300",style:{width:`${m.percentage}%`}}):n.jsx("div",{className:"h-full w-1/4 rounded-full bg-primary animate-indeterminate"})}),(m.speed||m.timeRemaining)&&n.jsxs("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground",children:[n.jsx("span",{children:m.speed||""}),n.jsx("span",{className:"text-primary",children:m.timeRemaining||""})]})]}),m.status==="failed"&&m.error&&n.jsx("p",{className:"text-[10px] text-destructive/80 truncate",children:m.error})]},m.modelName))})]})})}const TLe=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0,y5=TLe?"":"Ctrl+";function PLe({project:e,isActive:t,canClose:s,tabIndex:r,onSelect:i,onClose:a,onSettingsClick:o}){const{t:l}=Re("common"),u=r<9?`${y5}${r+1}`:"",d=`${y5}W`,{attributes:m,listeners:f,setNodeRef:x,transform:v,transition:y,isDragging:w}=hy({id:e.id}),S={transform:Ra.Transform.toString(v),transition:y,zIndex:w?50:void 0};return n.jsxs("div",{ref:x,style:S,className:J("group relative flex items-center min-w-0",t?"max-w-[180px] sm:max-w-[220px] md:max-w-[280px]":"max-w-[120px] sm:max-w-[160px] md:max-w-[200px]","border-r border-border last:border-r-0","touch-none transition-all duration-200",w&&"opacity-60 scale-[0.98] shadow-lg"),...m,children:[n.jsxs(ft,{delayDuration:200,children:[n.jsx(pt,{asChild:!0,children:n.jsxs("div",{className:J("flex-1 flex items-center gap-1 sm:gap-2","px-2 sm:px-3 md:px-4 py-2 sm:py-2.5","text-xs sm:text-sm","min-w-0 truncate hover:bg-muted/50 transition-colors","border-b-2 border-transparent cursor-pointer",t&&["bg-background border-b-primary text-foreground","hover:bg-background"],!t&&["text-muted-foreground","hover:text-foreground"]),onClick:i,children:[n.jsx("div",{...f,className:J("hidden sm:block","opacity-0 group-hover:opacity-60 transition-opacity","cursor-grab active:cursor-grabbing","w-1 h-4 bg-muted-foreground rounded-full flex-shrink-0")}),n.jsx("span",{className:"truncate font-medium",children:e.name})]})}),n.jsxs(mt,{side:"bottom",className:"flex items-center gap-2",children:[n.jsx("span",{children:e.name}),u&&n.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted rounded border border-border font-mono",children:u})]})]}),t&&n.jsx("div",{className:"flex items-center gap-0.5 mr-0.5 sm:mr-1 flex-shrink-0",children:o&&n.jsxs(ft,{delayDuration:200,children:[n.jsx(pt,{asChild:!0,children:n.jsx("button",{type:"button",className:J("h-5 w-5 sm:h-6 sm:w-6 p-0 rounded","flex items-center justify-center","text-muted-foreground hover:text-foreground","hover:bg-muted/50 transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1"),onClick:C=>{C.stopPropagation(),o()},"aria-label":l("projectTab.settings"),children:n.jsx(Sd,{className:"h-3 w-3 sm:h-3.5 sm:w-3.5"})})}),n.jsx(mt,{side:"bottom",children:n.jsx("span",{children:l("projectTab.settings")})})]})}),s&&n.jsxs(ft,{delayDuration:200,children:[n.jsx(pt,{asChild:!0,children:n.jsx("button",{type:"button",className:J("h-5 w-5 sm:h-6 sm:w-6 p-0 mr-0.5 sm:mr-1","opacity-0 group-hover:opacity-100 focus-visible:opacity-100","transition-opacity duration-200 rounded flex-shrink-0","hover:bg-destructive hover:text-destructive-foreground","flex items-center justify-center","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-1",t&&"opacity-100"),onClick:a,"aria-label":l("projectTab.closeTabAriaLabel"),children:n.jsx("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),n.jsxs(mt,{side:"bottom",className:"flex items-center gap-2",children:[n.jsx("span",{children:l("projectTab.closeTab")}),n.jsx("kbd",{className:"px-1.5 py-0.5 text-xs bg-muted rounded border border-border font-mono",children:d})]})]})]})}function RLe(){const[e,t]=p.useState(null),[s,r]=p.useState(!1);if(p.useEffect(()=>{const l=window.electronAPI.onUsageUpdated(u=>{t(u),r(!0)});return window.electronAPI.requestUsageUpdate().then(u=>{u.success&&u.data&&(t(u.data),r(!0))}),()=>{l()}},[]),!s||!e)return null;const i=Math.max(e.sessionPercent,e.weeklyPercent),a=i>=95?"text-red-500 bg-red-500/10 border-red-500/20":i>=91?"text-orange-500 bg-orange-500/10 border-orange-500/20":i>=71?"text-yellow-500 bg-yellow-500/10 border-yellow-500/20":"text-green-500 bg-green-500/10 border-green-500/20",o=i>=91?Ke:i>=71?gi:Vb;return n.jsx(ul,{delayDuration:200,children:n.jsxs(ft,{children:[n.jsx(pt,{asChild:!0,children:n.jsxs("button",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-md border transition-all hover:opacity-80 ${a}`,"aria-label":"Claude usage status",children:[n.jsx(o,{className:"h-3.5 w-3.5"}),n.jsxs("span",{className:"text-xs font-semibold font-mono",children:[Math.round(i),"%"]})]})}),n.jsx(mt,{side:"bottom",className:"text-xs w-64",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 mb-1",children:[n.jsx("span",{className:"text-muted-foreground font-medium",children:"Session Usage"}),n.jsxs("span",{className:"font-semibold tabular-nums",children:[Math.round(e.sessionPercent),"%"]})]}),e.sessionResetTime&&n.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Resets: ",e.sessionResetTime]}),n.jsx("div",{className:"mt-1.5 h-1.5 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full transition-all ${e.sessionPercent>=95?"bg-red-500":e.sessionPercent>=91?"bg-orange-500":e.sessionPercent>=71?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(e.sessionPercent,100)}%`}})})]}),n.jsx("div",{className:"h-px bg-border"}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 mb-1",children:[n.jsx("span",{className:"text-muted-foreground font-medium",children:"Weekly Usage"}),n.jsxs("span",{className:"font-semibold tabular-nums",children:[Math.round(e.weeklyPercent),"%"]})]}),e.weeklyResetTime&&n.jsxs("div",{className:"text-[10px] text-muted-foreground",children:["Resets: ",e.weeklyResetTime]}),n.jsx("div",{className:"mt-1.5 h-1.5 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full transition-all ${e.weeklyPercent>=99?"bg-red-500":e.weeklyPercent>=91?"bg-orange-500":e.weeklyPercent>=71?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(e.weeklyPercent,100)}%`}})})]}),n.jsx("div",{className:"h-px bg-border"}),n.jsxs("div",{className:"flex items-center justify-between gap-4 pt-1",children:[n.jsx("span",{className:"text-muted-foreground text-[10px] uppercase tracking-wide",children:"Active Account"}),n.jsx("span",{className:"font-semibold text-primary",children:e.profileName})]})]})})]})})}function DLe({projects:e,activeProjectId:t,onProjectSelect:s,onProjectClose:r,onAddProject:i,className:a,onSettingsClick:o}){const{t:l}=Re("common");return p.useEffect(()=>{const u=d=>{if(!(d.target instanceof HTMLInputElement||d.target instanceof HTMLTextAreaElement||d.target?.isContentEditable||!(d.metaKey||d.ctrlKey))){if(d.key>="1"&&d.key<="9"){d.preventDefault();const f=parseInt(d.key)-1;f<e.length&&s(e[f].id);return}if(d.key==="Tab"){d.preventDefault();const f=e.findIndex(v=>v.id===t);if(f===-1||e.length===0)return;const x=d.shiftKey?(f-1+e.length)%e.length:(f+1)%e.length;s(e[x].id);return}d.key==="w"&&t&&e.length>1&&(d.preventDefault(),r(t))}};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[e,t,s,r]),e.length===0?null:n.jsxs("div",{className:J("flex items-center border-b border-border bg-background","overflow-x-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",a),children:[n.jsx("div",{className:"flex items-center flex-1 min-w-0",children:e.map((u,d)=>{const m=t===u.id;return n.jsx(PLe,{project:u,isActive:m,canClose:e.length>1,tabIndex:d,onSelect:()=>s(u.id),onClose:f=>{f.stopPropagation(),r(u.id)},onSettingsClick:m?o:void 0},u.id)})}),n.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[n.jsx(RLe,{}),n.jsx(W,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:i,"aria-label":l("projectTab.addProjectAriaLabel"),children:n.jsx(fs,{className:"h-4 w-4"})})]})]})}function ILe({projects:e,activeProjectId:t,onProjectSelect:s,onProjectClose:r,onAddProject:i,onSettingsClick:a}){return n.jsx(DLe,{projects:e,activeProjectId:t,onProjectSelect:s,onProjectClose:r,onAddProject:i,onSettingsClick:a})}function MLe(){Y4e();const e=Ot(me=>me.projects),t=Ot(me=>me.selectedProjectId),s=Ot(me=>me.activeProjectId),r=Ot(me=>me.getProjectTabs),i=Ot(me=>me.openProjectIds),a=Ot(me=>me.openProjectTab),o=Ot(me=>me.setActiveProject),l=Ot(me=>me.reorderTabs),u=Ks(me=>me.tasks),d=cs(me=>me.settings),m=cs(me=>me.isLoading),f=cs(me=>me.profiles);cs(me=>me.activeProfileId);const x=Xp(me=>me.profiles),[v,y]=p.useState(null),[w,S]=p.useState(!1),[C,_]=p.useState(!1),[j,T]=p.useState(void 0),[E,A]=p.useState(void 0),[R,D]=p.useState("kanban"),[M,P]=p.useState(!1),[O,F]=p.useState(!1),[$,z]=p.useState(!1),[H,I]=p.useState(null),[V,B]=p.useState(!1),[K,L]=p.useState(!1),[G,Y]=p.useState(null),[q,Q]=p.useState(null),[se,te]=p.useState(!1),[ee,pe]=p.useState(!1),[fe,re]=p.useState(null),[Z,ie]=p.useState(!1),[ce,He]=p.useState(null),[tt,he]=p.useState(null),Ne=ry(ud(Ah,{activationConstraint:{distance:8}})),[Ve,qe]=p.useState(null),Ze=r(),Ae=e.find(me=>me.id===(s||t));p.useEffect(()=>{QD(),U3(),Wse(),AAe();const me=DAe();return()=>{me()}},[]),p.useEffect(()=>{if(console.log("[App] Tab restore useEffect triggered:",{projectsCount:e.length,openProjectIds:i,activeProjectId:s,selectedProjectId:t,projectTabsCount:Ze.length,projectTabIds:Ze.map(me=>me.id)}),e.length>0){if(i.length===0){const me=s||t||e[0].id;console.log("[App] No tabs persisted, opening project:",me),e.some(ze=>ze.id===me)?(a(me),o(me)):(console.log("[App] Project not found, falling back to first project:",e[0].id),a(e[0].id),o(e[0].id));return}console.log("[App] Tabs already persisted, checking active project"),s&&!i.includes(s)?(console.log("[App] Active project has no tab, opening:",s),a(s)):t&&!s?(console.log("[App] No active project, using selected:",t),o(t),a(t)):console.log("[App] Tab state is valid, no action needed")}},[e,s,t,i,a,o]);const[De,je]=p.useState(!1);p.useEffect(()=>{!m&&!De&&je(!0)},[m,De]),p.useEffect(()=>{const me=f.length>0,ze=x.some(Rt=>Rt.oauthToken||Rt.isDefault&&Rt.configDir),ct=me||ze;De&&d.onboardingCompleted===!1&&!ct&&P(!0)},[De,d.onboardingCompleted,f,x]);const{t:Ce,i18n:It}=Re("dialogs");p.useEffect(()=>{d.language&&d.language!==It.language&&It.changeLanguage(d.language)},[d.language,It]),p.useEffect(()=>{const me=ze=>{const Rt=ze.detail;Rt&&T(Rt),_(!0)};return window.addEventListener("open-app-settings",me),()=>{window.removeEventListener("open-app-settings",me)}},[]),p.useEffect(()=>{const me=window.electronAPI.onAppUpdateDownloaded(()=>{console.warn("[App] Update downloaded, opening settings to updates section"),T("updates"),_(!0)});return()=>{me()}},[]),p.useEffect(()=>{L(!1),Y(null)},[t]),p.useEffect(()=>{V||K||Ae&&!Ae.autoBuildPath&&q!==Ae.id&&(I(Ae),Y(null),L(!1),z(!0))},[Ae,q,V,K]),p.useEffect(()=>{const me=async ze=>{if(!(ze.target instanceof HTMLInputElement||ze.target instanceof HTMLTextAreaElement||ze.target?.isContentEditable)&&(ze.ctrlKey||ze.metaKey)&&ze.key==="t"&&R!=="terminals"){ze.preventDefault();try{const ct=await window.electronAPI.selectDirectory();if(ct){const Rt=await J_(ct);Rt&&(a(Rt.id),Rt.autoBuildPath||(I(Rt),Y(null),L(!1),z(!0)))}}catch(ct){console.error("Failed to add project:",ct)}}};return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[R,a]),p.useEffect(()=>{const me=s||t;me?(po(me),y(null)):Ks.getState().clearTasks(),Ae?.path&&Xke(Ae.path).catch(ze=>{console.error("[App] Failed to restore sessions:",ze)})},[s,t,Ae?.path,Ae?.name]),p.useEffect(()=>{const me=document.documentElement,ze=()=>{d.theme==="dark"?me.classList.add("dark"):d.theme==="light"?me.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?me.classList.add("dark"):me.classList.remove("dark")},ct=D5.map(Ge=>Ge.id),Rt=d.colorTheme??"default",Jt=ct.includes(Rt)?Rt:"default";Jt==="default"?me.removeAttribute("data-theme"):me.setAttribute("data-theme",Jt),ze();const vs=window.matchMedia("(prefers-color-scheme: dark)"),Hs=()=>{d.theme==="system"&&ze()};return vs.addEventListener("change",Hs),()=>{vs.removeEventListener("change",Hs)}},[d.theme,d.colorTheme]),p.useEffect(()=>{const me=document.documentElement,ze=d.uiScale??nl,ct=Math.max(Au,Math.min(Eu,ze));me.setAttribute("data-ui-scale",ct.toString())},[d.uiScale]),p.useEffect(()=>{if(!v){ir("[App] No selected task to update");return}const me=u.find(gt=>gt.id===v.id||gt.specId===v.specId);if(ir("[App] Task lookup result",{found:!!me,updatedTaskId:me?.id,selectedTaskId:v.id}),!me){ir("[App] Updated task not found in tasks array");return}const ze=JSON.stringify(v.subtasks||[])!==JSON.stringify(me.subtasks||[]),ct=v.status!==me.status,Rt=v.title!==me.title,Jt=v.description!==me.description,vs=JSON.stringify(v.metadata||{})!==JSON.stringify(me.metadata||{}),Hs=JSON.stringify(v.executionProgress||{})!==JSON.stringify(me.executionProgress||{}),Ge=JSON.stringify(v.qaReport||{})!==JSON.stringify(me.qaReport||{}),Ie=v.reviewReason!==me.reviewReason,Je=JSON.stringify(v.logs||[])!==JSON.stringify(me.logs||[]),ut=ze||ct||Rt||Jt||vs||Hs||Ge||Ie||Je;if(ir("[App] Task comparison",{hasChanged:ut,changes:{subtasks:ze,status:ct,title:Rt,description:Jt,metadata:vs,executionProgress:Hs,qaReport:Ge,reviewReason:Ie,logs:Je}}),ut){const gt=[];ze&&gt.push("Subtasks"),ct&&gt.push("Status"),Rt&&gt.push("Title"),Jt&&gt.push("Description"),vs&&gt.push("Metadata"),Hs&&gt.push("ExecutionProgress"),Ge&&gt.push("QAReport"),Ie&&gt.push("ReviewReason"),Je&&gt.push("Logs"),ir("[App] Updating selectedTask",{taskId:me.id,reason:gt.join(", ")}),y(me)}},[u,v?.id,v?.specId]);const be=me=>{y(me)},ve=async()=>{const me=s||t;if(me){F(!0);try{await po(me)}finally{F(!1)}}},Me=()=>{y(null)},nt=(me,ze)=>{console.log("[App] Opening inbuilt terminal:",{cwd:ze}),D("terminals"),y(null);const ct=ks.getState().addTerminal(ze,Ae?.path);ct?console.log("[App] Terminal added to store:",ct.id):console.error("[App] Failed to add terminal to store (max terminals reached?)")},jt=()=>{te(!0)},ps=(me,ze)=>{a(me.id),ze&&(I(me),Y(null),L(!1),z(!0))},tn=me=>{o(me)},Lt=me=>{const ze=e.find(ct=>ct.id===me);ze&&(he(ze),ie(!0))},ds=()=>{if(tt)try{He(null),UB(tt.id),ie(!1),he(null)}catch(me){console.error("[App] Failed to remove project:",me),He(me instanceof Error?me.message:Ce("common:errors.unknownError"))}},gs=()=>{ie(!1),he(null),He(null)},Ft=me=>{const{active:ze}=me,ct=Ze.find(Rt=>Rt.id===ze.id);ct&&qe(ct)},Be=me=>{const{active:ze,over:ct}=me;if(qe(null),!ct)return;const Rt=Ze.findIndex(vs=>vs.id===ze.id),Jt=Ze.findIndex(vs=>vs.id===ct.id);Rt!==Jt&&Rt!==-1&&Jt!==-1&&l(Rt,Jt)},st=async()=>{if(!H)return;const me=H.id;console.log("[InitDialog] Starting initialization for project:",me),B(!0),L(!1),Y(null);try{const ze=await $1(me);if(console.log("[InitDialog] Initialization result:",ze),ze?.success){console.log("[InitDialog] Initialization successful, closing dialog");const ct=Ot.getState().projects.find(Rt=>Rt.id===me);console.log("[InitDialog] Updated project:",ct),L(!0),B(!1),z(!1),I(null),ct&&(re(ct),pe(!0))}else{console.log("[InitDialog] Initialization failed, showing error");const ct=ze?.error||"Failed to initialize Auto Claude. Please try again.";Y(ct),B(!1)}}catch(ze){console.error("[InitDialog] Unexpected error during initialization:",ze);const ct=ze instanceof Error?ze.message:"An unexpected error occurred";Y(ct),B(!1)}},us=async me=>{if(fe){try{await window.electronAPI.updateProjectEnv(fe.id,{githubEnabled:!0,githubToken:me.githubToken,githubRepo:me.githubRepo,githubAuthMethod:me.githubAuthMethod}),await window.electronAPI.updateProjectSettings(fe.id,{mainBranch:me.mainBranch}),await QD()}catch(ze){console.error("Failed to save GitHub settings:",ze)}pe(!1),re(null)}},ue=()=>{pe(!1),re(null)},xs=()=>{console.log("[InitDialog] User skipped initialization"),H&&Q(H.id),z(!1),I(null),Y(null),L(!1)},kt=me=>{D("kanban");const ze=u.find(ct=>ct.id===me||ct.specId===me);ze&&y(ze)};return n.jsx(epe,{children:n.jsxs(ul,{children:[n.jsx(ALe,{}),n.jsxs("div",{className:"flex h-screen bg-background",children:[n.jsx(Jfe,{onSettingsClick:()=>_(!0),onNewTaskClick:()=>S(!0),activeView:R,onViewChange:D}),n.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[Ze.length>0&&n.jsxs(ly,{sensors:Ne,collisionDetection:fO,onDragStart:Ft,onDragEnd:Be,children:[n.jsx(uy,{items:Ze.map(me=>me.id),strategy:tle,children:n.jsx(ILe,{projects:Ze,activeProjectId:s,onProjectSelect:tn,onProjectClose:Lt,onAddProject:jt,onSettingsClick:()=>_(!0)})}),n.jsx(dy,{children:Ve&&n.jsxs("div",{className:"flex items-center gap-2 bg-card border border-border rounded-md px-4 py-2.5 shadow-lg max-w-[200px]",children:[n.jsx("div",{className:"w-1 h-4 bg-muted-foreground rounded-full"}),n.jsx("span",{className:"truncate font-medium text-sm",children:Ve.name})]})})]}),n.jsx("main",{className:"flex-1 overflow-hidden",children:Ae?n.jsxs(n.Fragment,{children:[R==="kanban"&&n.jsx(Twe,{tasks:u,onTaskClick:be,onNewTaskClick:()=>S(!0),onRefresh:ve,isRefreshing:O}),n.jsx("div",{className:R==="terminals"?"h-full":"hidden",children:n.jsx(zRe,{projectPath:Ae?.path,onNewTaskClick:()=>S(!0),isActive:R==="terminals"})}),R==="roadmap"&&(s||t)&&n.jsx(gDe,{projectId:s||t,onGoToTask:kt}),R==="context"&&(s||t)&&n.jsx(GDe,{projectId:s||t}),R==="ideation"&&(s||t)&&n.jsx(fIe,{projectId:s||t,onGoToTask:kt}),R==="insights"&&(s||t)&&n.jsx(AIe,{projectId:s||t}),R==="github-issues"&&(s||t)&&n.jsx(KIe,{onOpenSettings:()=>{A("github"),_(!0)},onNavigateToTask:kt}),R==="gitlab-issues"&&(s||t)&&n.jsx(dMe,{onOpenSettings:()=>{A("gitlab"),_(!0)},onNavigateToTask:kt}),(s||t)&&n.jsx("div",{className:R==="github-prs"?"h-full":"hidden",children:n.jsx(VMe,{onOpenSettings:()=>{A("github"),_(!0)},isActive:R==="github-prs"})}),R==="gitlab-merge-requests"&&(s||t)&&n.jsx(u4e,{projectId:s||t,onOpenSettings:()=>{A("gitlab"),_(!0)}}),R==="changelog"&&(s||t)&&n.jsx(q4e,{}),R==="worktrees"&&(s||t)&&n.jsx(W4e,{projectId:s||t}),R==="agent-tools"&&n.jsx(nLe,{})]}):n.jsx(rLe,{projects:e,onNewProject:jt,onOpenProject:jt,onSelectProject:me=>{a(me)}})})]}),n.jsx(nke,{open:!!v,task:v,onOpenChange:me=>!me&&Me(),onSwitchToTerminals:()=>D("terminals"),onOpenInbuiltTerminal:nt}),(s||t)&&n.jsx(kke,{projectId:s||t,open:w,onOpenChange:S}),n.jsx(g2e,{open:C,onOpenChange:me=>{_(me),me||(T(void 0),A(void 0))},initialSection:j,initialProjectSection:E,onRerunWizard:()=>{cs.getState().updateSettings({onboardingCompleted:!1}),_(!1),P(!0)}}),n.jsx(H1,{open:se,onOpenChange:te,onProjectAdded:ps}),n.jsx($s,{open:$,onOpenChange:me=>{console.log("[InitDialog] onOpenChange called",{open:me,pendingProject:!!H,isInitializing:V,initSuccess:K}),!me&&H&&!V&&!K&&xs()},children:n.jsxs(Bs,{children:[n.jsxs(os,{children:[n.jsxs(ls,{className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-5 w-5"}),Ce("initialize.title")]}),n.jsx(ws,{children:Ce("initialize.description")})]}),n.jsxs("div",{className:"py-4",children:[n.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[n.jsx("p",{className:"font-medium mb-2",children:Ce("initialize.willDo")}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[n.jsx("li",{children:Ce("initialize.createFolder")}),n.jsx("li",{children:Ce("initialize.copyFramework")}),n.jsx("li",{children:Ce("initialize.setupSpecs")})]})]}),!d.autoBuildPath&&n.jsx("div",{className:"mt-4 rounded-lg border border-warning/50 bg-warning/10 p-4 text-sm",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-warning mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-warning",children:Ce("initialize.sourcePathNotConfigured")}),n.jsx("p",{className:"text-muted-foreground mt-1",children:Ce("initialize.sourcePathNotConfiguredDescription")})]})]})}),G&&n.jsx("div",{className:"mt-4 rounded-lg border border-destructive/50 bg-destructive/10 p-4 text-sm",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-destructive mt-0.5 shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-destructive",children:Ce("initialize.initFailed")}),n.jsx("p",{className:"text-muted-foreground mt-1",children:G})]})]})})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:xs,disabled:V,children:Ce("common:buttons.skip",{ns:"common"})}),n.jsx(W,{onClick:st,disabled:V||!d.autoBuildPath,children:V?n.jsxs(n.Fragment,{children:[n.jsx(We,{className:"mr-2 h-4 w-4 animate-spin"}),Ce("common:labels.initializing",{ns:"common"})]}):n.jsxs(n.Fragment,{children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),Ce("common:buttons.initialize",{ns:"common"})]})})]})]})}),fe&&n.jsx(mV,{open:ee,onOpenChange:pe,project:fe,onComplete:us,onSkip:ue}),n.jsx($s,{open:Z,onOpenChange:me=>{me||gs()},children:n.jsxs(Bs,{children:[n.jsxs(os,{children:[n.jsx(ls,{children:Ce("removeProject.title")}),n.jsx(ws,{children:Ce("removeProject.description",{projectName:tt?.name||""})})]}),ce&&n.jsxs("div",{className:"flex items-center gap-2 p-3 text-sm text-destructive bg-destructive/10 rounded-md",children:[n.jsx(Ke,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{children:ce})]}),n.jsxs(As,{children:[n.jsx(W,{variant:"outline",onClick:gs,children:Ce("removeProject.cancel")}),n.jsx(W,{variant:"destructive",onClick:ds,children:Ce("removeProject.remove")})]})]})}),n.jsx(aLe,{}),n.jsx(cLe,{}),n.jsx(_Le,{open:M,onOpenChange:P,onOpenTaskCreator:()=>{P(!1),S(!0)},onOpenSettings:()=>{P(!1),_(!0)}}),n.jsx(kLe,{}),n.jsx(ELe,{}),n.jsx(Yue,{})]})]})})}Xse().catch(e=>{console.warn("[Sentry] Failed to initialize renderer:",e)});rne.createRoot(document.getElementById("root")).render(n.jsx(Vt.StrictMode,{children:n.jsx(MLe,{})}));
