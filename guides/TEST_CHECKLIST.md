# Auto-Claude 安装包测试清单

本文档提供完整的手动测试清单，用于验证 Auto-Claude 安装包的所有核心功能。

**版本**: 2.7.5
**测试平台**: Windows 10/11
**测试日期**: _________
**测试人员**: _________

---

## 1. 安装测试

### 1.1 安装程序测试

- [ ] **安装程序可以正常启动**
  - 双击 `.exe` 文件，安装向导正常显示
  - 如果显示 Windows SmartScreen 警告，可以绕过（开发版本未签名）

- [ ] **安装向导界面显示正常**
  - 所有文本清晰可读
  - 按钮和选项响应正常
  - 界面无乱码或布局错误

- [ ] **可以选择安装路径**
  - 默认路径显示正确 (`C:\Users\<用户名>\AppData\Local\Programs\Auto-Claude`)
  - 可以自定义安装路径
  - 路径验证功能正常（拒绝无效路径）

- [ ] **安装过程无错误**
  - 进度条正常显示
  - 无错误弹窗或警告
  - 安装时间合理（< 2 分钟）

- [ ] **安装完成后桌面有快捷方式**
  - 桌面快捷方式图标显示正确
  - 快捷方式可以正常启动应用

- [ ] **开始菜单有快捷方式**
  - Windows 开始菜单中有 "Auto Claude" 项
  - 开始菜单快捷方式可以正常启动应用

### 1.2 便携版测试（如果提供）

- [ ] **ZIP 解压正常**
  - 解压无错误
  - 文件结构完整

- [ ] **可执行文件直接运行**
  - `Auto-Claude.exe` 可以直接运行
  - 无需安装步骤

---

## 2. 应用启动测试

### 2.1 首次启动

- [ ] **应用可以正常启动**
  - 主窗口在合理时间内显示（< 5 秒）
  - 启动过程无卡顿或假死

- [ ] **主窗口显示正常**
  - 窗口大小和位置合理
  - 标题栏显示 "Auto Claude"
  - 界面完整渲染，无白屏或空白区域

- [ ] **无崩溃或错误弹窗**
  - 启动过程无报错对话框
  - 无 JavaScript 错误提示

- [ ] **控制台无严重错误日志**（开发模式）
  - 打开开发者工具检查控制台
  - 无红色 Error 级别日志（Warning 可接受）

### 2.2 重复启动

- [ ] **重新启动应用正常**
  - 关闭应用后可以再次启动
  - 启动速度正常

- [ ] **多次启动不产生重复进程**
  - 任务管理器中只有一个 `Auto-Claude.exe` 进程

---

## 3. 核心功能测试

### 3.1 OAuth 认证（官方 API）

- [ ] **可以配置 OAuth Token**
  - 打开设置页面
  - 找到 "OAuth Token" 输入框
  - 可以粘贴 Token

- [ ] **Token 验证成功**
  - 输入有效 Token 后显示验证成功提示
  - Token 格式错误时显示错误提示

- [ ] **Token 保存到系统 Keychain**
  - Token 保存后，重启应用无需重新输入
  - 验证 Token 已加密存储（无明文显示）

### 3.2 API Profiles 配置管理（新功能）

#### 3.2.1 基础功能

- [ ] **可以打开 API Profiles 设置**
  - 设置页面有 "API Profiles" 选项卡
  - 点击后显示 Profile 列表

- [ ] **可以创建新 Profile**
  - 点击 "添加配置" 按钮
  - 弹出编辑对话框
  - 所有字段可以正常填写：
    - Profile 名称
    - Base URL
    - API Key
    - （可选）模型映射

- [ ] **可以编辑 Profile**
  - 点击已有 Profile 的 "编辑" 按钮
  - 对话框正确显示现有配置
  - 可以修改所有字段
  - 保存后更改生效

- [ ] **可以删除 Profile**
  - 点击 "删除" 按钮
  - 弹出确认对话框
  - 确认后 Profile 从列表中移除

- [ ] **可以切换激活 Profile**
  - 点击不同 Profile 的 "设为激活" 按钮
  - 激活状态正确显示（高亮或标记）
  - 只有一个 Profile 可以同时激活

#### 3.2.2 连接测试

- [ ] **测试连接功能正常**
  - 点击 "测试连接" 按钮
  - 使用有效配置时显示成功消息
  - 使用无效配置时显示错误消息（如 URL 错误、API Key 无效等）

#### 3.2.3 后端集成

- [ ] **切换 Profile 后后端正确加载配置**
  - 激活一个 Profile
  - 创建新 Spec 或运行构建
  - 验证后端使用了正确的 API 端点（检查日志）

#### 3.2.4 中文界面

- [ ] **中文界面显示正确**
  - 切换到中文语言
  - API Profiles 界面所有文本显示中文
  - 无乱码或未翻译的英文文本

#### 3.2.5 边界测试

- [ ] **空 Profile 列表显示正常**
  - 删除所有 Profile 后显示 "暂无配置" 提示

- [ ] **无效 URL 输入验证**
  - 输入非 URL 格式（如 "abc123"）
  - 显示格式错误提示

- [ ] **长名称处理**
  - 输入超长 Profile 名称（100+ 字符）
  - UI 正确处理（截断或滚动显示）

### 3.3 Spec 创建

- [ ] **可以创建新 Spec**
  - 点击 "Create New Spec" 按钮
  - 创建向导正常启动

- [ ] **Interactive 模式工作正常**
  - 选择 Interactive 模式
  - 问答流程正常进行
  - 可以输入回答并提交

- [ ] **Task 描述可以正常提交**
  - 输入任务描述（如 "Add a login feature"）
  - 点击提交
  - Spec 创建流程启动

- [ ] **Spec 生成成功**
  - Spec 创建过程显示进度
  - 最终生成 `spec.md` 文件
  - Spec 内容结构正确

### 3.4 构建执行

- [ ] **Python 后端可以正常启动**
  - 运行构建时后端进程启动
  - 任务管理器中可以看到 `python.exe` 进程

- [ ] **Agent 会话可以创建**
  - 构建过程显示 Agent 会话日志
  - 日志内容合理（无大量错误）

- [ ] **代码生成正常**
  - Agent 可以读取文件
  - Agent 可以编辑文件
  - Agent 可以创建新文件

- [ ] **Git 操作正常**
  - Git worktree 创建成功
  - Git commit 正常执行
  - 分支切换无错误

- [ ] **Worktree 创建成功**
  - `.worktrees/<spec-name>` 目录存在
  - Worktree 中文件完整

### 3.5 QA 测试

- [ ] **QA Review 可以运行**
  - 构建完成后可以触发 QA Review
  - QA Agent 正常分析代码
  - 生成 `qa_report.md`

- [ ] **QA Fixer 可以运行**
  - QA 发现问题时可以触发 Fixer
  - Fixer Agent 尝试修复问题
  - 修复后重新验证

- [ ] **E2E 测试（如果启用 Electron MCP）正常**
  - 启用 `ELECTRON_MCP_ENABLED=true`
  - QA Agent 可以与 Electron 应用交互
  - 截图功能正常
  - 点击/填写表单功能正常

### 3.6 设置功能

- [ ] **主题切换正常**
  - 切换到暗色主题，界面立即更新
  - 切换到亮色主题，界面立即更新
  - 主题配置正确保存

- [ ] **语言切换正常（中文/英文）**
  - 切换到中文，界面所有文本变为中文
  - 切换到英文，界面所有文本变为英文
  - 语言配置正确保存

- [ ] **设置保存成功**
  - 修改任意设置项
  - 关闭应用
  - 重新启动后设置保持

- [ ] **重启后设置保持**
  - 验证主题、语言、API Profiles 等配置在重启后正确加载

---

## 4. Python 后端测试

### 4.1 运行时验证

- [ ] **Python 3.12.8 运行时可用**
  - 后端使用的是打包的 Python 3.12.8
  - 不依赖系统 Python

- [ ] **所有依赖包可以导入**
  - `claude-agent-sdk` 可以导入
  - `graphiti-core` 可以导入
  - `pydantic` 可以导入
  - `openai` 可以导入
  - `anthropic` 可以导入

### 4.2 功能验证

- [ ] **Claude Agent SDK 正常工作**
  - 可以创建 Agent 会话
  - Agent 可以执行工具调用
  - 响应正常返回

- [ ] **Graphiti 内存系统正常**
  - Memory 可以初始化
  - 可以存储和检索上下文

- [ ] **文件操作权限正常**
  - 后端可以读取项目文件
  - 后端可以写入文件
  - 权限检查正确工作

---

## 5. 性能测试

### 5.1 启动性能

- [ ] **应用启动时间 < 5 秒**
  - 从双击图标到主窗口显示的时间
  - 冷启动（首次启动）
  - 热启动（第二次启动）

### 5.2 运行时性能

- [ ] **UI 响应流畅（无卡顿）**
  - 页面切换瞬时完成
  - 滚动列表流畅
  - 按钮点击响应快速

- [ ] **内存占用合理（< 500 MB 空闲时）**
  - 打开任务管理器查看内存使用
  - 空闲状态下内存 < 500 MB
  - 运行构建时内存增长合理

- [ ] **后端处理速度正常**
  - Spec 创建时间合理（< 5 分钟）
  - 构建执行速度正常
  - Agent 响应延迟可接受

---

## 6. 卸载测试

### 6.1 标准卸载

- [ ] **卸载程序可以启动**
  - 通过"设置 → 应用"卸载，或运行 `Uninstall.exe`
  - 卸载向导正常显示

- [ ] **卸载过程无错误**
  - 卸载进度条正常
  - 无错误弹窗

- [ ] **卸载后文件清理干净**
  - 安装目录被删除
  - 桌面快捷方式被删除
  - 开始菜单项被删除

- [ ] **卸载后注册表清理干净（Windows）**
  - 打开注册表编辑器
  - 搜索 "Auto Claude"，无残留项

### 6.2 配置保留测试

- [ ] **用户配置是否保留**
  - 卸载后检查 `%APPDATA%\Auto-Claude` 是否保留
  - 根据卸载选项决定是否保留用户数据

---

## 7. 异常情况测试

### 7.1 网络异常

- [ ] **离线模式处理**
  - 断网状态下启动应用，显示友好提示
  - 网络恢复后自动重试

- [ ] **API 超时处理**
  - API 响应超时时显示错误信息
  - 不会导致应用崩溃

### 7.2 文件系统异常

- [ ] **磁盘空间不足**
  - 磁盘满时构建失败，显示明确错误
  - 不会产生损坏的文件

- [ ] **权限不足**
  - 项目目录只读时显示权限错误
  - 提示用户检查权限

### 7.3 并发场景

- [ ] **多个 Spec 同时构建**
  - 可以同时运行多个构建任务
  - 资源分配合理，无死锁

---

## 8. 安全性测试

### 8.1 数据安全

- [ ] **API Key 加密存储**
  - 配置文件中 API Key 已加密
  - 无明文存储敏感信息

- [ ] **配置文件权限**
  - `profiles.json` 权限为 600（仅所有者可读写）

### 8.2 沙箱隔离

- [ ] **Bash 命令沙箱生效**
  - 危险命令被拦截（如 `rm -rf /`）
  - 只允许项目目录内操作

---

## 9. 文档与帮助

- [ ] **README 准确且完整**
  - 安装说明清晰
  - 使用方法易懂

- [ ] **内置帮助功能可用**
  - 帮助菜单可以打开
  - 链接到正确的文档

---

## 测试总结

**通过测试项**: _____ / _____
**失败测试项**: _____ / _____
**阻塞性问题**: _____

### 严重问题（P0 - 必须修复）

1. _____________________________________
2. _____________________________________

### 一般问题（P1 - 应该修复）

1. _____________________________________
2. _____________________________________

### 建议改进（P2 - 可选）

1. _____________________________________
2. _____________________________________

### 测试结论

- [ ] ✅ **通过** - 可以发布
- [ ] ⚠️ **有条件通过** - 修复 P0 问题后发布
- [ ] ❌ **未通过** - 需要重大修复

---

**测试人员签名**: __________________
**日期**: __________________
