---
phase: 06-measurement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/06-measurement/06-MEASUREMENT.md
autonomous: false

must_haves:
  truths:
    - "5 PRs have been reviewed with the new system"
    - "Each finding has been classified as TP, FP, or excluded"
    - "FP rate has been calculated"
    - "FP patterns are documented if any FPs exist"
  artifacts:
    - path: ".planning/phases/06-measurement/06-MEASUREMENT.md"
      provides: "Measurement results and FP pattern documentation"
      contains: "## Aggregate Results"
  key_links:
    - from: "06-MEASUREMENT.md"
      to: "Requirements"
      via: "MEASURE-01 through MEASURE-04 satisfaction"
---

<objective>
Run 5 PRs through the new review system, classify findings, calculate FP rate, and document patterns.

Purpose: Validate that Phases 1-5 changes reduced false positive rate to target (<15%)
Output: Measurement document with FP rate, patterns, and pass/fail determination
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/06-measurement/06-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:decision" gate="blocking">
  <name>Task 1: Select 5 PRs for measurement</name>
  <decision>Which 5 PRs to use for measurement validation</decision>
  <context>
PRs should be diverse to provide representative measurement:
- Size variety: at least 1 small (<100 lines), 1 large (>500 lines)
- File count variety: at least 1 single-file, 1 multi-file (5+)
- Mix of change types (bug fix, feature, refactor)

**Important:** Select PRs BEFORE seeing review results to avoid selection bias.

Use this command to list recent PRs:
```bash
cd /Users/andremikalsen/Documents/Coding/autonomous-coding/apps/backend && gh pr list --repo AndyMik90/Auto-Claude --state merged --limit 20
```

Or list open PRs if testing on unmerged:
```bash
cd /Users/andremikalsen/Documents/Coding/autonomous-coding/apps/backend && gh pr list --repo AndyMik90/Auto-Claude --state open --limit 20
```
  </context>
  <options>
    <option id="user-selected">
      <name>User provides PR numbers</name>
      <pros>User knows which PRs have context for accurate classification</pros>
      <cons>May introduce selection bias</cons>
    </option>
    <option id="recent-merged">
      <name>Use 5 most recent merged PRs</name>
      <pros>Unbiased selection, representative of real usage</pros>
      <cons>May not have context to classify findings accurately</cons>
    </option>
  </options>
  <resume-signal>Provide 5 PR numbers (e.g., "42, 45, 48, 51, 53") or select option</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Run reviews and create measurement document</name>
  <files>.planning/phases/06-measurement/06-MEASUREMENT.md</files>
  <action>
For each of the 5 selected PRs, run the review:

```bash
cd /Users/andremikalsen/Documents/Coding/autonomous-coding/apps/backend
python runner.py review-pr <PR_NUMBER>
```

After each review completes, the results are saved to:
`.auto-claude/github/pr/review_<PR_NUMBER>.json`

Create `.planning/phases/06-measurement/06-MEASUREMENT.md` with this structure:

```markdown
# Phase 6: Measurement Results

**Measurement Date:** YYYY-MM-DD
**Target FP Rate:** <15%

## PR Reviews

### PR #X: [Title from PR]

**PR Details:**
- Files changed: X
- Lines changed: +X/-X
- Author: @username
- Type: [bug fix / feature / refactor]

**Review Command:** `python runner.py review-pr X`

**Findings:**

| ID | Title | Severity | Category | File:Line | Classification | Reason |
|----|-------|----------|----------|-----------|----------------|--------|
| [short-id] | [title] | [sev] | [cat] | [file:line] | PENDING | - |

**PR Summary:**
- Total findings: X
- Classified: 0/X
- TP: 0, FP: 0, Excluded: 0

[Repeat for all 5 PRs]

## Aggregate Results

**Pending classification by human reviewer**

| Metric | Value | Target | Status |
|--------|-------|--------|--------|
| Total Findings | X | - | - |
| True Positives | 0 | - | - |
| False Positives | 0 | - | - |
| Excluded | 0 | - | - |
| FP Rate | - | <15% | PENDING |

## FP Pattern Analysis

To be completed after classification.
```

Populate the findings tables from each review JSON. Leave Classification as "PENDING" for human review.
  </action>
  <verify>
- 06-MEASUREMENT.md exists with all 5 PR sections
- Each PR section has findings table populated from JSON
- Aggregate Results section exists (with pending values)
  </verify>
  <done>Measurement document created with all 5 PR reviews, findings ready for human classification</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Classify findings</name>
  <what-built>
Measurement document with findings from 5 PRs. Each finding needs human classification.
  </what-built>
  <how-to-verify>
For EACH finding in 06-MEASUREMENT.md, classify as:

**True Positive (TP)** if:
- The finding identifies a REAL issue that should be fixed
- The code cited actually has the problem described
- The line number and file are correct
- A reasonable senior developer would agree this is an issue

**False Positive (FP)** if:
- The finding is WRONG - there is no actual issue
- The code cited does NOT have the problem described
- The line number or file is incorrect
- The issue was already handled elsewhere
- The AI misunderstood the context or intent
- The severity is wildly inappropriate (e.g., CRITICAL for a style issue)

**Excluded** if:
- Subjective style preference with no clear right/wrong
- Genuinely needs expert domain knowledge to evaluate

For each classification, provide a brief reason (1 sentence).

**To edit the file:**
Open `.planning/phases/06-measurement/06-MEASUREMENT.md` and update:
1. Change "PENDING" to "TP", "FP", or "Excluded" in Classification column
2. Add reason in Reason column
3. Update PR Summary counts
  </how-to-verify>
  <resume-signal>Type "classified" when all findings have been classified, or provide updates to apply</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Calculate FP rate and document patterns</name>
  <files>.planning/phases/06-measurement/06-MEASUREMENT.md</files>
  <action>
After human classification, update 06-MEASUREMENT.md:

1. **Update Aggregate Results table:**
   - Count total TP across all PRs
   - Count total FP across all PRs
   - Count total Excluded
   - Calculate FP Rate = FP / (TP + FP) * 100
   - Set Status to PASS if <15%, FAIL if >=15%

2. **Document FP Patterns** (if any FPs exist):

For each FP, analyze:
- Which agent produced it (security, logic, quality, codebase-fit)?
- What type of error was it (wrong line, wrong file, misunderstood context, already handled)?

Group FPs by pattern and add to "FP Pattern Analysis" section:

```markdown
## FP Pattern Analysis

### Pattern 1: [Pattern Name]
- **Count:** X FPs
- **Agent:** [which agent]
- **Examples:**
  - PR #X: "[finding title]" - [why it was wrong]
- **Root Cause:** [why the AI made this mistake]
- **Potential Fix:** [what prompt change might help]

### Pattern 2: ...
```

3. **Add Summary section:**

```markdown
## Summary

**Result:** [PASS/FAIL]
**FP Rate:** X.X% (target: <15%)
**Total PRs:** 5
**Total Findings:** X (X TP, X FP, X excluded)

### Key Findings

[2-3 sentences on what the measurement revealed]

### Recommendation

[If PASS: Ready to merge and ship]
[If FAIL: Specific prompts to iterate on, based on FP patterns]
```
  </action>
  <verify>
- Aggregate Results table has calculated values
- FP Rate shows actual percentage
- Status shows PASS or FAIL
- FP Pattern Analysis section documents patterns (if any FPs)
- Summary section exists with recommendation
  </verify>
  <done>Measurement complete with FP rate calculated, patterns documented, and pass/fail determination</done>
</task>

<task type="checkpoint:decision" gate="blocking">
  <name>Task 5: Decide on iteration (if needed)</name>
  <decision>Whether to iterate on prompts based on FP rate</decision>
  <context>
Review the measurement results:
- If FP Rate < 15%: Phase 6 succeeds, ready to merge
- If FP Rate >= 15%: Need to iterate on prompts based on documented FP patterns

The FP Pattern Analysis in 06-MEASUREMENT.md identifies which agents and what types of errors are causing FPs.
  </context>
  <options>
    <option id="pass-ship">
      <name>FP Rate < 15% - Ship it</name>
      <pros>Target achieved, changes are validated</pros>
      <cons>None</cons>
    </option>
    <option id="iterate">
      <name>FP Rate >= 15% - Iterate on prompts</name>
      <pros>Improves quality before shipping</pros>
      <cons>Additional work required</cons>
    </option>
  </options>
  <resume-signal>Select "pass-ship" or "iterate" based on measured FP rate</resume-signal>
</task>

</tasks>

<verification>
Requirements satisfaction check:
- MEASURE-01: 5 PRs reviewed (Task 2)
- MEASURE-02: FP rate calculated (Task 4)
- MEASURE-03: FP patterns documented (Task 4)
- MEASURE-04: Iteration decision made (Task 5)
</verification>

<success_criteria>
- 06-MEASUREMENT.md exists with complete data
- All 5 PRs have been reviewed and findings classified
- FP rate is calculated with clear PASS/FAIL determination
- FP patterns are documented (if any FPs exist)
- Clear recommendation on next steps
</success_criteria>

<output>
After completion, create `.planning/phases/06-measurement/06-01-SUMMARY.md`
</output>
