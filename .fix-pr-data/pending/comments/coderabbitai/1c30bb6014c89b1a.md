# Comment: 1c30bb6014c89b1a

**Source:** coderabbitai
**Type:** comment
**File:** `apps/backend/tests/test_linear_similarity_agent.py`
**Line:** 391
**Original ID:** 2738348103
**Created:** None
**Severity:** MEDIUM
**Status:** PENDING

---

## Original Content

_‚ö†Ô∏è Potential issue_ | _üü° Minor_

**Restore LINEAR_API_KEY even if empty string.**

If the original env var was set to `""`, it won‚Äôt be restored. Use an `is not None` check.  

<details>
<summary>üîß Proposed fix</summary>

```diff
-            if original_key:
+            if original_key is not None:
                 os.environ["LINEAR_API_KEY"] = original_key
```
</details>

<details>
<summary>ü§ñ Prompt for AI Agents</summary>

```
In `@apps/backend/tests/test_linear_similarity_agent.py` around lines 379 - 391,
The test temporarily unsets LINEAR_API_KEY but only restores it when
original_key is truthy, so an original empty string would not be restored;
update the restore logic in the test that uses original_key (the block around
LinearValidationAgent and the finally) to check "original_key is not None"
instead of a truthy check so that an empty-string environment value is correctly
restored after the test.
```

</details>

<!-- fingerprinting:phantom:poseidon:eagle -->

<!-- This is an auto-generated comment by CodeRabbit -->

---

## Suggested Fix

```python
</details>

<details>
<summary>ü§ñ Prompt for AI Agents</summary>
```

---

## Implementation Notes

*Status: PENDING - Not yet verified or implemented*

### Verification Checklist

- [ ] Read file at comment location
- [ ] Verify if issue is already fixed
- [ ] Implement fix if needed
- [ ] Re-verify after implementation

