# Review: 6d63052067eca132

**Source:** coderabbitai
**Type:** review
**Original ID:** 3716270281
**Created:** None
**Severity:** MEDIUM
**Status:** SKIPPED

---

## Original Content

**Actionable comments posted: 8**

<details>
<summary>ðŸ¤– Fix all issues with AI agents</summary>

```
In `@apps/backend/agents/linear_similarity_agent.py`:
- Around line 212-213: The imports for json and re should be moved out of the
function to avoid per-call overhead: remove the in-function imports inside
_parse_similarity_response and add import json and import re at the module top
with the other imports; ensure any usage of json and re in
_parse_similarity_response remains unchanged after removing the local import
lines.

In
`@apps/frontend/src/renderer/components/linear/components/LinearFilterControls.tsx`:
- Around line 1-657: This file duplicates dropdown components and constants that
exist in LinearFilterBar.tsx; extract shared pieces into a new shared module and
import them to remove duplication. Create a new module exporting
PRIORITY_OPTIONS, FilterDropdown, SingleSelectDropdown and any helper
data-derivation utilities used (e.g., functions that compute uniqueStatuses,
uniqueLabels, uniqueAssignees from storeTickets), update LinearFilterControls to
import those symbols (PRIORITY_OPTIONS, FilterDropdown, SingleSelectDropdown,
and the new helper functions) and remove the local definitions, and update
LinearFilterBar.tsx to import the same shared module so both components use the
single source of truth.

In
`@apps/frontend/src/renderer/components/linear/components/LinearTicketDetail.tsx`:
- Around line 37-41: The effect that runs when the ticket changes currently
calls detailRef.current.scrollIntoView which only moves the element into view
but doesn't reset its internal scroll position; update the useEffect so that
when detailRef.current exists you call its scroll container's scrollTo (e.g.,
detailRef.current.scrollTo({ top: 0, behavior: "smooth" })) or set scrollTop = 0
to reset the panel internal scroll position instead of using scrollIntoView;
locate the useEffect and detailRef in LinearTicketDetail.tsx and replace the
scrollIntoView call with a scrollTo/scrollTop reset on detailRef.current.

In
`@apps/frontend/src/renderer/components/linear/components/ResolutionCheckDialog.tsx`:
- Around line 61-83: The helper parameters accept broad strings; narrow them to
the union literal types used by your interfaces: change
getConfidenceColor(confidence: string) to getConfidenceColor(confidence: "high"
| "medium" | "low") and change getEvidenceIcon(type: string) to
getEvidenceIcon(type: "commit" | "release" | "other" /* or the exact union from
your Evidence type */); update any call-sites that pass plain strings to use the
correct literals (or cast/derive them from the typed model) so the functions
align with the declared interfaces and prevent typos.

In
`@apps/frontend/src/renderer/components/linear/components/TicketLinkingBadge.tsx`:
- Around line 63-85: The Button and Badge in TicketLinkingBadge.tsx are missing
an i18n-backed accessible label; add an aria-label to both the Button and Badge
using the i18n key "linear:relationshipBadgeAria" and interpolate the relevant
values (ticketId, totalLinks as total, duplicates, related) so screen readers
get context; update en/linear.json and fr/linear.json with the key (e.g.,
"{{ticketId}} has {{total}} linked tickets ({{duplicates}} duplicates,
{{related}} related)") and ensure TicketLinkingBadge uses the i18n
hook/translator to build the label and pass it into the aria-label props on the
Button and Badge (keep existing getIcon(), getBadgeStyle(), onClick, totalLinks
intact).

In `@apps/frontend/src/renderer/components/linear/hooks/useLinearTickets.ts`:
- Around line 133-175: The append flag in fetchTicketsData is only toggling UI
state but not passed to or respected by fetchLinearTickets, so pagination just
replaces items; update the flow to either (A) pass the append boolean into
fetchLinearTickets (and update the store method that implements
fetchLinearTickets to accept an append parameter and append new items to the
existing list instead of replacing them) or (B) remove the append/loadMore logic
from fetchTicketsData (remove setIsLoadingMore and the append param) to avoid
misleading behavior; locate fetchTicketsData in useLinearTickets.ts and the
fetchLinearTickets implementation in the linear store and implement the chosen
change so that append actually appends or is removed consistently.

In `@apps/frontend/src/shared/i18n/locales/en/linear.json`:
- Around line 95-96: The locales are missing i18next plural forms for the
"related" key but TicketLinkingBadge calls t("linear:related", { count }) so add
plural keys "related_one" and "related_other" (or the i18next preferred
"related_one"/"related_other") into both en/linear.json and fr/linear.json;
update the "related" entry to include singular and plural strings (e.g.,
"related_one": "related", "related_other": "related") in en and appropriate
French translations in fr so pluralization works when TicketLinkingBadge passes
count.

In `@apps/frontend/src/shared/i18n/locales/fr/linear.json`:
- Around line 95-96: The French locale is missing pluralization for the
"related" key used with a count in TicketLinkingBadge.tsx; update the fr
translations to provide singular and plural forms (e.g., an ICU/plural entry or
separate keys such as "related.one"/"related.other" depending on the repo
convention) so the count parameter renders correctly in TicketLinkingBadge.tsx
when passing count; ensure the singular form corresponds to one related item and
the plural form for 0 and >1.
```

</details>

<!-- This is an auto-generated comment by CodeRabbit for review status -->

---

## Implementation Notes

*Status: SKIPPED*

**Reason:** Review state: COMMENTED

