# Comment: 8a9d2495a159e3d3

**Source:** coderabbitai
**Type:** comment
**File:** `apps/frontend/src/renderer/stores/__tests__/linear-store.test.ts`
**Line:** 106
**Original ID:** 2733875133
**Created:** None
**Severity:** HIGH
**Status:** SKIPPED

---

## Original Content

_âš ï¸ Potential issue_ | _ğŸŸ¡ Minor_

<details>
<summary>ğŸ§© Analysis chain</summary>

ğŸ Script executed:

```shell
# Find the store definition file
find apps/frontend -name "*linear*store*" -type f | grep -v node_modules | head -20
```

Repository: AndyMik90/Auto-Claude

Length of output: 179

---

ğŸ Script executed:

```shell
# Examine the store definition to see all fields
cat -n apps/frontend/src/renderer/stores/linear-store.ts
```

Repository: AndyMik90/Auto-Claude

Length of output: 26792

---

ğŸ Script executed:

```shell
# Examine the test file, specifically around lines 95-106
sed -n '80,120p' apps/frontend/src/renderer/stores/__tests__/linear-store.test.ts
```

Repository: AndyMik90/Auto-Claude

Length of output: 948

---



</details>

**Reset `selectedProjectId` in beforeEach to prevent cross-test leakage.**

Zustand's `setState` performs a shallow merge, so omitted fields persist across tests. The store includes `selectedProjectId` but the reset omits it, risking test isolation issues.

<details>
<summary>ğŸ”§ Proposed fix</summary>

```diff
 useLinearStore.setState({
 	tickets: [],
 	filters: createTestFilters(),
 	validationResults: new Map(),
 	selectedTicketId: null,
+	selectedProjectId: null,
 	teams: [],
 	projects: [],
 	isLoading: false,
 	error: null,
 });
```
</details>

<!-- suggestion_start -->

<details>
<summary>ğŸ“ Committable suggestion</summary>

> â€¼ï¸ **IMPORTANT**
> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.

```suggestion
	beforeEach(() => {
		// Reset store to initial state before each test
		useLinearStore.setState({
			tickets: [],
			filters: createTestFilters(),
			validationResults: new Map(),
			selectedTicketId: null,
			selectedProjectId: null,
			teams: [],
			projects: [],
			isLoading: false,
			error: null,
		});
```

</details>

<!-- suggestion_end -->

<details>
<summary>ğŸ¤– Prompt for AI Agents</summary>

```
In `@apps/frontend/src/renderer/stores/__tests__/linear-store.test.ts` around
lines 95 - 106, The beforeEach reset uses useLinearStore.setState but omits
selectedProjectId so it persists between tests due to Zustand's shallow merge;
update the beforeEach reset (the call to useLinearStore.setState) to include
selectedProjectId: null alongside tickets, filters, validationResults,
selectedTicketId, teams, projects, isLoading, and error to ensure the store is
fully reset before each test.
```

</details>

<!-- fingerprinting:phantom:medusa:eagle -->

<!-- This is an auto-generated comment by CodeRabbit -->

---

## Suggested Fix

```typescript
</details>

<!-- suggestion_start -->

<details>
<summary>ğŸ“ Committable suggestion</summary>

> â€¼ï¸ **IMPORTANT**
> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.
```

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** Nitpick or minor suggestion - not blocking