# Comment: 290e0456b6f68d8a

**Source:** coderabbitai
**Type:** comment
**File:** `apps/frontend/src/renderer/components/Sidebar.tsx`
**Line:** 169
**Original ID:** 2734046553
**Created:** None
**Severity:** MEDIUM
**Status:** RESOLVED

---

## Original Content

_‚ö†Ô∏è Potential issue_ | _üü° Minor_

**Clear `envConfig` before async load to avoid stale nav visibility.**

When switching between projects with `autoBuildPath`, the previous `envConfig` remains visible until the IPC call resolves, so nav items may temporarily reflect the wrong project. Consider clearing `envConfig` before awaiting the response.


<details>
<summary>üßπ Suggested change</summary>

```diff
     if (!selectedProject?.autoBuildPath) {
       if (!cancelled) {
         setEnvConfig(null);
       }
       return;
     }
+    if (!cancelled) {
+      setEnvConfig(null);
+    }
     try {
       const result = await window.electronAPI.getProjectEnv(selectedProject.id);
```
</details>

<details>
<summary>ü§ñ Prompt for AI Agents</summary>

```
In `@apps/frontend/src/renderer/components/Sidebar.tsx` around lines 137 - 166,
The current useEffect delays clearing envConfig until after the async IPC
returns, causing stale nav visibility; in the loadEnvConfig function (used
inside the useEffect that depends on selectedProject?.id and
selectedProject?.autoBuildPath) call setEnvConfig(null) immediately when
selectedProject?.autoBuildPath is present (before awaiting
window.electronAPI.getProjectEnv) so the UI clears while the IPC call runs, then
update envConfig with the result only if not cancelled; preserve the existing
cancelled check and error handling around window.electronAPI.getProjectEnv and
keep setting null on errors.
```

</details>

<!-- fingerprinting:phantom:poseidon:eagle -->

<!-- This is an auto-generated comment by CodeRabbit -->

‚úÖ Addressed in commits ef15aee to 06c64be

---

## Implementation Notes

*Status: RESOLVED*

**Resolution:** Body contains resolution marker

**Resolved At:** 2026-01-28T15:40:48.085691

