# Comment: 4063a48cc6ae25c3

**Source:** coderabbitai
**Type:** comment
**File:** `apps/backend/tests/test_linear_validation.py`
**Original ID:** 2713898430
**Created:** None
**Severity:** HIGH
**Status:** SKIPPED

---

## Original Content

_‚ö†Ô∏è Potential issue_ | _üü† Major_

**Test assertion incorrect - timestamp colons are also sanitized.**

The test expects `"LIN_123:2024-01-18T10:00:00Z"` but the timestamp colons would also be replaced with underscores per the implementation.

<details>
<summary>Proposed fix</summary>

```diff
     def test_cache_key_with_colon_in_issue_id(self):
         """Issue IDs with colons should be sanitized to prevent delimiter conflicts."""
         # ...
         cache_key = agent._get_cache_key("LIN:123", "2024-01-18T10:00:00Z")
-        assert cache_key == "LIN_123:2024-01-18T10:00:00Z"
+        assert cache_key == "LIN_123:2024-01-18T10_00_00Z"
```
</details>

<details>
<summary>ü§ñ Prompt for AI Agents</summary>

```
In `@apps/backend/tests/test_linear_validation.py` around lines 269 - 278, The
test expectation is wrong because LinearValidationAgent._get_cache_key sanitizes
colons in both the issue_id and timestamp; update the assertion to match the
implementation by expecting all colons replaced with underscores (e.g.,
"LIN_123_2024-01-18T10_00_00Z") or adjust the test to build the expected value
by calling the same sanitization logic; reference _get_cache_key and change the
expected cache_key accordingly.
```

</details>

<!-- fingerprinting:phantom:medusa:ocelot -->

<!-- This is an auto-generated comment by CodeRabbit -->

---

## Suggested Fix

```python
</details>

<details>
<summary>ü§ñ Prompt for AI Agents</summary>
```

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** Test already uses sanitized format - colons in issue_id are replaced with underscores