# Comment: 926e15eb8a9026b1

**Source:** coderabbitai
**Type:** comment
**File:** `apps/frontend/src/main/ipc-handlers/linear-handlers.ts`
**Line:** 513
**Original ID:** 2736538731
**Created:** None
**Severity:** LOW
**Status:** SKIPPED

---

## Original Content

_ğŸ§¹ Nitpick_ | _ğŸ”µ Trivial_

**Avoid `readdirSync` per issue to prevent O(nÂ²) scaling.**  
Compute the next spec number once, then increment in the loop.

<details>
<summary>â™»ï¸ Suggested refactor</summary>

```diff
-				// Create tasks for each imported issue
-				for (const issue of data.issues.nodes) {
+				// Pre-compute next available spec number once
+				const existingDirs = readdirSync(specsDir, { withFileTypes: true })
+					.filter((d) => d.isDirectory())
+					.map((d) => d.name);
+				const existingNumbers = existingDirs
+					.map((name) => {
+						const match = name.match(/^(\d+)/);
+						return match ? parseInt(match[1], 10) : 0;
+					})
+					.filter((n) => n > 0);
+				let nextSpecNumber =
+					existingNumbers.length > 0 ? Math.max(...existingNumbers) + 1 : 1;
+
+				// Create tasks for each imported issue
+				for (const issue of data.issues.nodes) {
 					try {
-						// Find next available spec number
-						let specNumber = 1;
-						const existingDirs = readdirSync(specsDir, { withFileTypes: true })
-							.filter((d) => d.isDirectory())
-							.map((d) => d.name);
-						const existingNumbers = existingDirs
-							.map((name) => {
-								const match = name.match(/^(\d+)/);
-								return match ? parseInt(match[1], 10) : 0;
-							})
-							.filter((n) => n > 0);
-						if (existingNumbers.length > 0) {
-							specNumber = Math.max(...existingNumbers) + 1;
-						}
+						const specNumber = nextSpecNumber++;
```
</details>

<details>
<summary>ğŸ¤– Prompt for AI Agents</summary>

```
In `@apps/frontend/src/main/ipc-handlers/linear-handlers.ts` around lines 521 -
535, The current code uses readdirSync to discover existing spec directories and
compute specNumber, but the review warns that this pattern is being repeated
inside a loop elsewhere; refactor so you call readdirSync exactly once to
compute the current maximum spec number (using existingDirs -> existingNumbers
-> Math.max) and then, inside any loop that creates multiple specs, increment a
local specNumber counter instead of re-running readdirSync or recomputing
existingNumbers each iteration; update the code paths that create specs to use
this single computed specNumber variable (symbols: specsDir, existingDirs,
existingNumbers, specNumber) and remove any additional readdirSync calls in
creation loops.
```

</details>

<!-- fingerprinting:phantom:poseidon:eagle -->

<!-- This is an auto-generated comment by CodeRabbit -->

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** Trivial nitpick or refactor suggestion