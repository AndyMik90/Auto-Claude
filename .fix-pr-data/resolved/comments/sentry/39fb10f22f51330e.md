# Comment: 39fb10f22f51330e

**Source:** sentry
**Type:** comment
**File:** `apps/frontend/src/main/ipc-handlers/linear-handlers.ts`
**Original ID:** 2715999275
**Created:** None
**Severity:** HIGH
**Status:** SKIPPED

---

## Original Content

**Bug:** The cache clearing path in `linear-handlers.ts` is incorrect. It points to a hardcoded home directory path instead of the project-specific directory where the cache is actually stored.
<sub>Severity: HIGH</sub>
<!-- BUG_PREDICTION -->

<details>
<summary><b title="Reference ID: `9007640`">Suggested Fix</b></summary>

The IPC handler for clearing the cache needs to receive the `project_dir` from the frontend. It should then construct the cache path by joining the `project_dir` with `'.cache/linear_validator'` to match the location used by the Python agent. This ensures the correct directory is targeted for deletion.
</details>

<details open>
<summary><b title="Reference ID: `9007640`">Prompt for AI Agent</b></summary>

```
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/frontend/src/main/ipc-handlers/linear-handlers.ts#L748-L754

Potential issue: The cache clearing logic in `linear-handlers.ts` constructs a file path
based on the user's home directory, attempting to delete
`$HOME/.auto-claude/specs/.cache/linear_validator`. However, the Python agent that
performs the validation creates its cache at a different location, relative to the
project directory: `{project_dir}/.cache/linear_validator`. Because these paths do not
match, the 'Clear Cache' feature will fail silently on all operating systems. It will
report success to the user, but the actual cache will not be cleared, leading to stale
data being used in subsequent validations.
```
</details>


<sub><i>Did we get this right? :+1: / :-1: to inform future reviews.</i></sub>
<!--
<sub>Reference ID: `9007640`</sub>-->

---

## Suggested Fix

```typescript
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/frontend/src/main/ipc-handlers/linear-handlers.ts#L748-L754

Potential issue: The cache clearing logic in `linear-handlers.ts` constructs a file path
based on the user's home directory, attempting to delete
`$HOME/.auto-claude/specs/.cache/linear_validator`. However, the Python agent that
performs the validation creates its cache at a different location, relative to the
project directory: `{project_dir}/.cache/linear_validator`. Because these paths do not
match, the 'Clear Cache' feature will fail silently on all operating systems. It will
report success to the user, but the actual cache will not be cleared, leading to stale
data being used in subsequent validations.
```

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** Cache clearing handler is now a no-op by design (line 836) - frontend clears in-memory cache, backend has timestamp-based invalidation