# Comment: db2a799ebb09368b

**Source:** sentry
**Type:** comment
**File:** `apps/backend/agents/linear_validator.py`
**Original ID:** 2717374169
**Created:** None
**Severity:** HIGH
**Status:** SKIPPED

---

## Original Content

**Bug:** `TicketNotFoundError` and `NetworkError` are instantiated with the wrong number or type of arguments, which will cause a `TypeError` during error handling in ticket validation.
<sub>Severity: HIGH</sub>
<!-- BUG_PREDICTION -->

<details>
<summary><b title="Reference ID: `9028099`">Suggested Fix</b></summary>

Update the `raise` statements to match the exception constructor signatures. For `TicketNotFoundError`, pass only the `issue_id`. For `NetworkError`, pass the `issue_id` as the first argument and the error details as the optional second argument. For example: `raise TicketNotFoundError(issue_id)` and `raise NetworkError(issue_id, details=f"Linear API error: {error_msg}")`.
</details>

<details open>
<summary><b title="Reference ID: `9028099`">Prompt for AI Agent</b></summary>

```
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/backend/agents/linear_validator.py#L533-L534

Potential issue: The `_fetch_linear_issue` method incorrectly instantiates custom
exceptions. `TicketNotFoundError` is called with two arguments on lines 533 and 538, but
its constructor only accepts one (`issue_id`). Similarly, `NetworkError` is called with
a single string message on lines 534, 557, and 558, but its constructor expects
`issue_id` as the first argument. These mismatches will raise a `TypeError` when error
conditions like a missing ticket or a network issue occur, crashing the validation
process instead of returning a handled error.
```
</details>


<sub><i>Did we get this right? :+1: / :-1: to inform future reviews.</i></sub>
<!--
<sub>Reference ID: `9028099`</sub>-->

---

## Suggested Fix

```python
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/backend/agents/linear_validator.py#L533-L534

Potential issue: The `_fetch_linear_issue` method incorrectly instantiates custom
exceptions. `TicketNotFoundError` is called with two arguments on lines 533 and 538, but
its constructor only accepts one (`issue_id`). Similarly, `NetworkError` is called with
a single string message on lines 534, 557, and 558, but its constructor expects
`issue_id` as the first argument. These mismatches will raise a `TypeError` when error
conditions like a missing ticket or a network issue occur, crashing the validation
process instead of returning a handled error.
```

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** TicketNotFoundError and NetworkError are correctly instantiated - TicketNotFoundError takes 1 arg (line 543, 548), NetworkError takes 2 args with keyword (lines 544, 567, 569)