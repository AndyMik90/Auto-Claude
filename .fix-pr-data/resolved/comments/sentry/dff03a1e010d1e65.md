# Comment: dff03a1e010d1e65

**Source:** sentry
**Type:** comment
**File:** `apps/frontend/src/renderer/stores/linear-store.ts`
**Original ID:** 2713861147
**Created:** None
**Severity:** HIGH
**Status:** SKIPPED

---

## Original Content

**Bug:** The `validateLinearTicket`, `validateLinearTicketBatch`, and `updateLinearTicketWithValidation` functions incorrectly access `store.selectedProjectId`, a property that doesn't exist on `LinearState`, causing validation to fail.
<sub>Severity: HIGH</sub>
<!-- BUG_PREDICTION -->

<details>
<summary><b title="Reference ID: `8970190`">Suggested Fix</b></summary>

In `validateLinearTicket`, `validateLinearTicketBatch`, and `updateLinearTicketWithValidation`, remove the access to `store.selectedProjectId`. Instead, import `useProjectStore` and get the selected project ID from it, similar to the pattern used in `createTaskFromLinearTicket`. This will provide the correct `projectId` and allow the validation logic to proceed as intended.
</details>

<details open>
<summary><b title="Reference ID: `8970190`">Prompt for AI Agent</b></summary>

```
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/frontend/src/renderer/stores/linear-store.ts#L363

Potential issue: Three functions in the linear store (`validateLinearTicket`,
`validateLinearTicketBatch`, and `updateLinearTicketWithValidation`) attempt to access
`store.selectedProjectId`. However, the `LinearState` interface does not define this
property. This causes the `projectId` variable to be `undefined`, triggering an early
return with a "No project selected" error. This effectively breaks all Linear ticket
validation functionality, as these core functions will fail immediately upon execution.
The correct pattern of retrieving the project from `useProjectStore` is used elsewhere
in the file, indicating this was an oversight.
```
</details>


<sub><i>Did we get this right? :+1: / :-1: to inform future reviews.</i></sub>
<!--
<sub>Reference ID: `8970190`</sub>-->

---

## Suggested Fix

```typescript
Review the code at the location below. A potential bug has been identified by an AI
agent.
Verify if this is a real issue. If it is, propose a fix; if not, explain why it's not
valid.

Location: apps/frontend/src/renderer/stores/linear-store.ts#L363

Potential issue: Three functions in the linear store (`validateLinearTicket`,
`validateLinearTicketBatch`, and `updateLinearTicketWithValidation`) attempt to access
`store.selectedProjectId`. However, the `LinearState` interface does not define this
property. This causes the `projectId` variable to be `undefined`, triggering an early
return with a "No project selected" error. This effectively breaks all Linear ticket
validation functionality, as these core functions will fail immediately upon execution.
The correct pattern of retrieving the project from `useProjectStore` is used elsewhere
in the file, indicating this was an oversight.
```

---

## Implementation Notes

*Status: SKIPPED*

**Resolution:** store.selectedProjectId not found in linear-store.ts - already fixed